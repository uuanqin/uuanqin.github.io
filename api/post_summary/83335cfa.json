{"title":"Nginx 与 CDN 完成重定向：从 HTTP 重定向到 HTTPS、从 WWW 重定向到根","tags":["Nginx","CDN","阿里云","腾讯云","DNS","HSTS","HTTP","HTTPS","SSL","阿里巴巴","腾讯","301"],"cover":"https://cdn.gallery.uuanqin.top/img/%E7%BD%91%E7%AB%99%E9%85%8D%E7%BD%AEcover.png","description":"精解本博客域名配置，建议熟悉 CDN、HTTPS 配置后参考。","abbrlink":"83335cfa","categories":["博客站点维护"],"date":"2023-07-24T01:27:11.000Z","top_img":null,"summary":"> [!hint] 文章推荐：在 DNS 侧配置重定向 > 通过 Cloudflare DNS 重定向规则可以更方便配置好重定向。详看这篇文章：[[域名 DNS 服务托管至 Cloudflare 以及 301 重定向的配置]] 今天填了一个一直想填的坑，就是把博客域名的重定向、CDN 回源设置给弄好和捋顺了。以前的做法是 www.uuanqin.top 和 uuanqin.top 同时使用，CDN 也配置两条域名，但我总感觉不优雅、也不安全。通过学习一些网络相关知识，我自己尝试动手实验，绘制了域名解析流程图（把 DNS 迭代查询和递归查询简化拉平了）。此外把一些关键的具体配置分享出来并简要分析。 镇楼图先放出来： 上图即为本站域名跳转关系，呕心沥血绘制。看着很复杂，实际......这张图体现的配置我还是感觉不太完美，限于目前的知识储备也就这样了，希望路过的大佬们在评论区指点迷津！！ > 本文目的在于分享交流，所有操作仅供参考。 > 如果你是萌新站长，建议不要直接上手本篇文章内容，先弄明白这几篇文章循序渐进开始： > > 1. 拥有了域名，配置主机 A 记录，直接指向源站：新手引导 (aliyun.com) > 2. 使用 CDN 服务，并加速域名：内容分发网络 CDN 从零开始配置 CDN-快速入门-文档中心-腾讯云 (tencent.com) > 3. 网站使用 HTTPS：SSL 证书使用指南 (aliyun.com) 环境 我的整个博客项目不同服务由不同服务商提供，之所以没选择 All in one 除了想自己边折腾边学习外，还是想让各种服务松耦合起来。 博客使用的服务以及部分软件系统版本如下： | DNS 域名解析 | SSL 证书 | CDN 服务 | 云服务器 | Web 服务 | | :------: | :----: | :----: | :------------: | :----------: | | 阿里云 | 阿里云 | 腾讯云 | 阿里云 ECS（Linux） | Nginx 1.22.1 | 不管是阿里云还是腾讯云，相关服务的使用大差不差，本文只是给个思路。 配置效果与原因 理想的域名配置效果应该是这样的： 用户在地址栏输入 www.uuanqin.top 时会直接重定向到 uuanqin.t..."}