{"title":"页面展示用户 IP 地址及地理位置信息","tags":["API","IP","UA"],"cover":"https://cdn.gallery.uuanqin.top/img/1590736606072ip.webp","description":"利用 API 获取 IP 地址信息，这也是对 Heo 方案的改进","abbrlink":"25f6686b","categories":["博客站点维护"],"date":"2023-09-09T16:13:29.000Z","top_img":null,"summary":"最近开始筹备隐私政策的撰写了，注意到 洪涝 Heo 的隐私政策有这样一个表格，感觉有趣，尝试借鉴一下： Heo 发布过这一教程：js 获取用户 IP 和地理位置信息、UA 并展示 | 张洪 Heo (zhheo.com) 但是近期该 API 出现了一些问题（从上图你可以发现其中的问题所在）。下面我通过使用另一个接口： https://2023.ipchaxun.com/ 来尝试实现这个功能。 实现效果 <script src=\"/js/privacy.js\"></script> | 类型<div style=\"width:100px\"> | 信息 | | :---------------------------: | :-------------------------------- | | IP 地址 | <div id=\"userAgentIp\"></div> | | 国家 | <div id=\"userAgentCountry\"></div> | | 省份 | <div id=\"userAgentRegion\"></div> | | 城市 | <div id=\"userAgentCity\"></div> | | 运营商 | <div id=\"userAgentIsp\"></div> | | UA | <div id=\"userAgent\"></div> | <script type=\"text/javascript\">getIpInfo()</script> 编写新的 JS 文件 这个文件是由洪涝 Heo https://cdn1.tianli0.top/gh/zhheo/JS-Heo@main/privacy/privacy.js 改动而来。我们不妨也将其命名为 `privacy.js` 吧。 页面使用 Hexo 新建页面，写入以下内容即可。 注意上面的代码中填写你正确的 `privacy.js` 路径。 本文参考 获取 IP 地址信息的 API 合集\\_api 地址\\_psonh 的博客-CSDN 博客 JavaScript 获取用户操作系统信息及浏览器信息 - 掘金 (juejin.cn) JSON.parse() - JavaScript | MDN (mozilla.org) Array.prototype.s..."}