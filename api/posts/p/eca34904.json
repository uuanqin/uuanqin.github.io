{"data":{"title":"æœ‰è°è¿˜ä¸ä¼šäºŒå‰æ ‘çš„éå†ï¼Ÿ","slug":"ç®—æ³•ä¸æ•°æ®ç»“æ„/æœ‰è°è¿˜ä¸ä¼šäºŒå‰æ ‘çš„éå†ï¼Ÿ","description":"åˆ«ç¬‘ï¼Œä½ ä¹Ÿæƒ³ä¸å‡ºç¬¬äºŒä¸ªæ–¹æ³•...","date":"2023-11-28T08:26:49.000Z","updated":"2025-09-26T15:45:30.078Z","language":"zh-CN","comments":true,"url":"p/eca34904/","cover":"https://cdn.gallery.uuanqin.top/img/202509262338422.webp","images":[],"content":"\n<div class=\"callout\" data-callout=\"note\">\n<div class=\"callout-title\">\n<div class=\"callout-title-icon\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-pencil\"><path d=\"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z\"/><path d=\"m15 5 4 4\"/></svg>\n</div>\n<div class=\"callout-title-inner\">æœ¬æ–‡åˆ›å»ºäº <code>231128</code>ï¼Œäº <code>250925</code> ä»ç¬”è®°ä¸­è¿›è¡Œè¿ç§»ã€‚</div>\n</div>\n<div class=\"callout-content\"><p></p>\n</div></div><p>äºŒå‰æ ‘çš„éå†é—®é¢˜éå¸¸ç»å…¸ï¼Œç”¨é€’å½’æ–¹å¼å®ç°éå¸¸ç®€å•ã€‚ä½†å½“é€’å½’çš„ç¨‹åºæ ˆäº¤ç”±è‡ªå·±ç®¡ç†æ—¶ï¼Œäº‹æƒ…è¿˜ä¼šç®€å•å—ï¼Ÿ</p>\n<p>æœ¬æ–‡ä¸»è¦å†…å®¹ï¼š</p>\n<ul>\n<li>æ ‘éå†çš„åŸºæœ¬æ¦‚å¿µä¸ç‰¹ç‚¹</li>\n<li>å±‚åºéå†æ–¹å¼</li>\n<li>å‰ã€ä¸­ã€ååºéå†çš„é€’å½’æ–¹å¼</li>\n<li>å‰ã€ä¸­ã€ååºéå†çš„å¸¸è§„è¿­ä»£æ–¹å¼</li>\n<li>å‰ã€ä¸­ã€ååºéå†çš„æ¨¡æ‹Ÿç¨‹åºæ ˆæ–¹å¼</li>\n<li>å‰ã€ååºäº’è½¬æŠ€å·§</li>\n<li>Morris ç®—æ³•</li>\n</ul>\n<p>æœ¬æ–‡é¢˜ç›®éš¾åº¦æ ‡è¯†ï¼šğŸŸ©ç®€å•ï¼ŒğŸŸ¨ä¸­ç­‰ï¼ŒğŸŸ¥å›°éš¾ã€‚</p>\n<h1 id=\"åŸºæœ¬æ¦‚å¿µä¸ç‰¹ç‚¹\"><a class=\"markdownIt-Anchor\" href=\"#åŸºæœ¬æ¦‚å¿µä¸ç‰¹ç‚¹\"></a> åŸºæœ¬æ¦‚å¿µä¸ç‰¹ç‚¹</h1>\n<p>ç³»ç»Ÿåœ°è®¿é—®æœ‰åºæ ‘çš„æ¯ä¸ªç»“ç‚¹ï¼Œä½¿å¾—å¯¹æ¯ä¸ªç»“ç‚¹æ°å¥½è®¿é—®ä¸€æ¬¡ï¼Œè¿›è¡Œæ•°æ®å­˜å–çš„è¿‡ç¨‹ç§°ä¸ºæœ‰åºæ ‘éå†ç®—æ³•ã€‚</p>\n<p>äºŒå‰æ ‘çš„éå†åˆ†ä¸ºï¼š</p>\n<ul>\n<li>å…ˆåºéå†ï¼ˆå‰åºéå†ï¼‰ï¼šè®¿é—®æ¬¡åºä¸ºæ ¹ã€å·¦å­æ ‘ã€å³å­æ ‘</li>\n<li>ä¸­åºéå†ï¼šè®¿é—®æ¬¡åºä¸ºå·¦å­æ ‘ã€æ ¹ã€å³å­æ ‘</li>\n<li>ååºéå†ï¼šè®¿é—®æ¬¡åºä¸ºå·¦å­æ ‘ã€å³å­æ ‘ã€æ ¹</li>\n<li>å±‚æ¬¡éå†</li>\n</ul>\n<p>æ‰€è°“ã€Œåºã€å³æŒ‡æ ¹èŠ‚ç‚¹ä½•æ—¶è¢«è®¿é—®ã€‚</p>\n<p>ç”±éå†åºåˆ—æ„é€ äºŒå‰æ ‘ï¼š</p>\n<ul>\n<li>å”¯ä¸€ç¡®å®šä¸€æ£µäºŒå‰æ ‘ï¼ˆå…·ä½“ç®—æ³•å®ç°å¯çœ‹åæ–‡ï¼‰ï¼š\n<ul>\n<li>å…ˆåºåºåˆ— + ä¸­åºåºåˆ—</li>\n<li>ååºåºåˆ— + ä¸­åºåºåˆ—</li>\n<li>å±‚åºåºåˆ— + ä¸­åºåºåˆ—</li>\n</ul>\n</li>\n<li>æ— æ³•å”¯ä¸€ç¡®å®šä¸€æ£µäºŒå‰æ ‘ï¼š\n<ul>\n<li>å…ˆåºåºåˆ— + ååºåºåˆ—ã€‚ä½†å¯ä»¥ç¡®å®šäºŒå‰æ ‘ä¸­ç»“ç‚¹çš„ç¥–å…ˆå…³ç³»ï¼šå½“ä¸¤ä¸ªç»“ç‚¹çš„å‰åºåºåˆ—ä¸º XYã€ååºåºåˆ—ä¸º YX æ—¶ï¼Œåˆ™ X ä¸º Y çš„ç¥–å…ˆã€‚</li>\n</ul>\n</li>\n</ul>\n<p>åœ¨ä»»æ„ä¸€æ£µäºŒå‰æ ‘çš„å‰åºåºåˆ—å’Œååºåºåˆ—ä¸­ï¼Œå„å¶å­ä¹‹é—´ç›¸å¯¹æ¬¡åºå…³ç³»éƒ½ç›¸åŒã€‚å¶å­ç»“ç‚¹ä½äºå·¦å³ä¸¤ä¸ªåˆ†æ”¯ä¸Šï¼Œå…ˆåºå’Œååºçš„éå†å±æ€§å‡æ˜¯å·¦å­æ ‘åœ¨å³å­æ ‘ä¹‹å‰ï¼ˆç›¸å¯¹æ¬¡åºä¸€å®šç›¸åŒï¼‰ï¼Œå’ŒäºŒå‰æ ‘çš„æ ·å¼æ— å…³ã€‚</p>\n<h1 id=\"å±‚åºéå†\"><a class=\"markdownIt-Anchor\" href=\"#å±‚åºéå†\"></a> å±‚åºéå†</h1>\n\n<div class=\"callout\" data-callout=\"example\">\n<div class=\"callout-title\">\n<div class=\"callout-title-icon\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-list\"><line x1=\"8\" x2=\"21\" y1=\"6\" y2=\"6\"/><line x1=\"8\" x2=\"21\" y1=\"12\" y2=\"12\"/><line x1=\"8\" x2=\"21\" y1=\"18\" y2=\"18\"/><line x1=\"3\" x2=\"3.01\" y1=\"6\" y2=\"6\"/><line x1=\"3\" x2=\"3.01\" y1=\"12\" y2=\"12\"/><line x1=\"3\" x2=\"3.01\" y1=\"18\" y2=\"18\"/></svg>\n</div>\n<div class=\"callout-title-inner\">ğŸŸ¨ <a href=\"https://leetcode.cn/problems/binary-tree-level-order-traversal/description/\">102. äºŒå‰æ ‘çš„å±‚åºéå† - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></div>\n</div>\n<div class=\"callout-content\"><p></p>\n</div></div><p>è‡ªä¸‹è€Œä¸Šã€ä»å³åˆ°å·¦çš„å±‚æ¬¡éå†ç®—æ³•ï¼šåˆ©ç”¨åŸæœ‰çš„å±‚æ¬¡éå†ç®—æ³•ï¼Œå‡ºé˜Ÿçš„åŒæ—¶å°†å„ä¸ªç»“ç‚¹çš„æŒ‡é’ˆå…¥æ ˆï¼Œåœ¨æ‰€æœ‰ç»“ç‚¹å…¥æ ˆåå†ä»æ ˆé¡¶å¼€å§‹ä¾æ¬¡è®¿é—®ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Solution</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> List&lt;List&lt;Integer&gt;&gt; <span class=\"title function_\">levelOrder</span><span class=\"params\">(TreeNode root)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(root==<span class=\"literal\">null</span>)<span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">        Deque&lt;TreeNode&gt; q = <span class=\"keyword\">new</span> <span class=\"title class_\">LinkedList</span>&lt;&gt;();</span><br><span class=\"line\">        List&lt;List&lt;Integer&gt;&gt; ans = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">        q.offer(root);</span><br><span class=\"line\">        List&lt;Integer&gt; layer;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(q.size()&gt;<span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">            <span class=\"type\">int</span> <span class=\"variable\">now</span> <span class=\"operator\">=</span> q.size(); <span class=\"comment\">// ç¡®å®šå½“å‰å±‚æ¬¡çš„å±‚æ•°</span></span><br><span class=\"line\">            layer = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">0</span>;i&lt;now;i++)&#123;</span><br><span class=\"line\">                <span class=\"type\">TreeNode</span> <span class=\"variable\">node</span> <span class=\"operator\">=</span> q.poll();</span><br><span class=\"line\">                layer.add(node.val);</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(node.left!=<span class=\"literal\">null</span>)&#123;</span><br><span class=\"line\">                    q.offer(node.left);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(node.right!=<span class=\"literal\">null</span>)&#123;</span><br><span class=\"line\">                    q.offer(node.right);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            ans.add(layer);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>å¤æ‚åº¦åˆ†æï¼šè®°æ ‘ä¸Šæ‰€æœ‰èŠ‚ç‚¹çš„ä¸ªæ•°ä¸º nã€‚</p>\n<ul>\n<li>æ—¶é—´å¤æ‚åº¦ï¼šæ¯ä¸ªç‚¹è¿›é˜Ÿå‡ºé˜Ÿå„ä¸€æ¬¡ï¼Œæ•…æ¸è¿›æ—¶é—´å¤æ‚åº¦ä¸º <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span>ã€‚</li>\n<li>ç©ºé—´å¤æ‚åº¦ï¼šé˜Ÿåˆ—ä¸­å…ƒç´ çš„ä¸ªæ•°ä¸è¶…è¿‡ n ä¸ªï¼Œæ•…æ¸è¿›ç©ºé—´å¤æ‚åº¦ä¸º <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span>ã€‚</li>\n</ul>\n<p>å±‚åºéå†ç‰¹ç‚¹ï¼šç»“ç‚¹æ˜¯ä¸€å±‚ä¸€å±‚åŠ çš„ã€‚åˆ©ç”¨è¿™ä¸ªç‰¹ç‚¹å¯ä»¥çŸ¥é“æ¯ä¸€å±‚çš„é«˜åº¦ã€‚æ¯”å¦‚ç»´æŠ¤ Map æ•°ç»„è®°å½•æ¯ä¸ªç»“ç‚¹çš„æ·±åº¦ã€‚</p>\n<p>å¦‚æœä¸éœ€è¦è®°å½•é«˜åº¦ï¼Œéœ€è¦åœ¨æ¯å±‚ç»“ç‚¹å¤„ç†ä¹‹é—´åŠ å…¥é—´éš”ï¼Œå¯ä»¥ç»´æŠ¤å˜é‡ï¼Œåœ¨è£…å…¥é˜Ÿåˆ—æ—¶è®°å½•ä¸‹ä¸€å±‚ç»“ç‚¹çš„ä¸ªæ•°ã€‚ä½†å®é™…ä¸Šï¼Œéå†æ¯å±‚å‰é˜Ÿåˆ—çš„å¤§å°å°±æ˜¯æœ€å¥½çš„é—´éš”ï¼Œå¦‚ä¸Šé¢ä»£ç ä¸­çš„ <code>int now = q.size();</code>ã€‚</p>\n<h1 id=\"å‰-ä¸­-ååºéå†çš„é€’å½’æ–¹æ³•\"><a class=\"markdownIt-Anchor\" href=\"#å‰-ä¸­-ååºéå†çš„é€’å½’æ–¹æ³•\"></a> å‰ã€ä¸­ã€ååºéå†çš„é€’å½’æ–¹æ³•</h1>\n\n<div class=\"callout\" data-callout=\"example\">\n<div class=\"callout-title\">\n<div class=\"callout-title-icon\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-list\"><line x1=\"8\" x2=\"21\" y1=\"6\" y2=\"6\"/><line x1=\"8\" x2=\"21\" y1=\"12\" y2=\"12\"/><line x1=\"8\" x2=\"21\" y1=\"18\" y2=\"18\"/><line x1=\"3\" x2=\"3.01\" y1=\"6\" y2=\"6\"/><line x1=\"3\" x2=\"3.01\" y1=\"12\" y2=\"12\"/><line x1=\"3\" x2=\"3.01\" y1=\"18\" y2=\"18\"/></svg>\n</div>\n<div class=\"callout-title-inner\">ğŸŸ© <a href=\"https://leetcode.cn/problems/binary-tree-preorder-traversal/\">144. äºŒå‰æ ‘çš„å‰åºéå† - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></div>\n</div>\n<div class=\"callout-content\"><p></p>\n</div></div>\n<div class=\"callout\" data-callout=\"example\">\n<div class=\"callout-title\">\n<div class=\"callout-title-icon\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-list\"><line x1=\"8\" x2=\"21\" y1=\"6\" y2=\"6\"/><line x1=\"8\" x2=\"21\" y1=\"12\" y2=\"12\"/><line x1=\"8\" x2=\"21\" y1=\"18\" y2=\"18\"/><line x1=\"3\" x2=\"3.01\" y1=\"6\" y2=\"6\"/><line x1=\"3\" x2=\"3.01\" y1=\"12\" y2=\"12\"/><line x1=\"3\" x2=\"3.01\" y1=\"18\" y2=\"18\"/></svg>\n</div>\n<div class=\"callout-title-inner\">ğŸŸ© <a href=\"https://leetcode.cn/problems/binary-tree-inorder-traversal/description/\">94. äºŒå‰æ ‘çš„ä¸­åºéå† - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></div>\n</div>\n<div class=\"callout-content\"><p></p>\n</div></div>\n<div class=\"callout\" data-callout=\"example\">\n<div class=\"callout-title\">\n<div class=\"callout-title-icon\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-list\"><line x1=\"8\" x2=\"21\" y1=\"6\" y2=\"6\"/><line x1=\"8\" x2=\"21\" y1=\"12\" y2=\"12\"/><line x1=\"8\" x2=\"21\" y1=\"18\" y2=\"18\"/><line x1=\"3\" x2=\"3.01\" y1=\"6\" y2=\"6\"/><line x1=\"3\" x2=\"3.01\" y1=\"12\" y2=\"12\"/><line x1=\"3\" x2=\"3.01\" y1=\"18\" y2=\"18\"/></svg>\n</div>\n<div class=\"callout-title-inner\">ğŸŸ© <a href=\"https://leetcode.cn/problems/binary-tree-postorder-traversal/description/\">145. äºŒå‰æ ‘çš„ååºéå† - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></div>\n</div>\n<div class=\"callout-content\"><p></p>\n</div></div><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">Track</span><span class=\"params\">(BiTree *T)</span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(T==<span class=\"literal\">NULL</span>)<span class=\"keyword\">return</span>;</span><br><span class=\"line\">\t<span class=\"comment\">// å‰åºéå†visitäºæ­¤</span></span><br><span class=\"line\">\tTrack(T-&gt;left);</span><br><span class=\"line\">\t<span class=\"comment\">// ä¸­åºéå†visitäºæ­¤</span></span><br><span class=\"line\">\tTrack(T-&gt;right);</span><br><span class=\"line\">\t<span class=\"comment\">// ååºéå†visitäºæ­¤</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>é€’å½’å·¥ä½œæ ˆæ ˆæ·±æ°å¥½ä¸ºæ ‘çš„æ·±åº¦ã€‚åœ¨æœ€åæƒ…å†µä¸‹ï¼ŒäºŒå‰æ ‘æ˜¯æœ‰ n ä¸ªç»“ç‚¹ï¼Œæ·±åº¦ä¸º n çš„å•æ”¯æ ‘ï¼Œéå†ç®—æ³•çš„ç©ºé—´å¤æ‚åº¦ä¸º <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span>ã€‚</p>\n<p>åˆ«çœ‹ä¸Šé¢çš„é¢˜ç›®éš¾åº¦æ ‡è¯†ä¸ºç®€å•ï¼Œé‚£åªæ˜¯å¯¹äºé€’å½’æ–¹å¼å®ç°è€Œè¨€ã€‚ç”¨è¿­ä»£æ–¹å¼å»å®ç°å¯ä¸ä¸€å®šç®€å•ã€‚</p>\n<h1 id=\"å‰-ä¸­-ååºéå†è¿­ä»£æ–¹æ³•\"><a class=\"markdownIt-Anchor\" href=\"#å‰-ä¸­-ååºéå†è¿­ä»£æ–¹æ³•\"></a> å‰ã€ä¸­ã€ååºéå†è¿­ä»£æ–¹æ³•</h1>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/20231225170324.webp\" alt=\"image.png\" width=\"425px\" /></p>\n<h2 id=\"å‰-ä¸­-ååºéå†å¸¸è§„è¿­ä»£æ–¹æ³•\"><a class=\"markdownIt-Anchor\" href=\"#å‰-ä¸­-ååºéå†å¸¸è§„è¿­ä»£æ–¹æ³•\"></a> å‰ã€ä¸­ã€ååºéå†å¸¸è§„è¿­ä»£æ–¹æ³•</h2>\n<p>å‰åºéå†éé€’å½’ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Solution</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> List&lt;Integer&gt; <span class=\"title function_\">preorderTraversal</span><span class=\"params\">(TreeNode root)</span> &#123;</span><br><span class=\"line\">        Deque&lt;TreeNode&gt; stack = <span class=\"keyword\">new</span> <span class=\"title class_\">LinkedList</span>&lt;&gt;();</span><br><span class=\"line\">        List&lt;Integer&gt; ans = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">        <span class=\"type\">TreeNode</span> <span class=\"variable\">w</span> <span class=\"operator\">=</span> root;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(w!=<span class=\"literal\">null</span> || stack.size()&gt;<span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">while</span>(w!=<span class=\"literal\">null</span>)&#123;</span><br><span class=\"line\">                ans.add(w.val); <span class=\"comment\">// å˜åŠ¨ç‚¹</span></span><br><span class=\"line\">                stack.push(w);</span><br><span class=\"line\">                w=w.left;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            w = stack.pop();</span><br><span class=\"line\">            w = w.right;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ä¸­åºéå†éé€’å½’ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Solution</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> List&lt;Integer&gt; <span class=\"title function_\">inorderTraversal</span><span class=\"params\">(TreeNode root)</span> &#123;</span><br><span class=\"line\">        Deque&lt;TreeNode&gt; stack = <span class=\"keyword\">new</span> <span class=\"title class_\">LinkedList</span>&lt;&gt;();</span><br><span class=\"line\">        List&lt;Integer&gt; ans = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">        <span class=\"type\">TreeNode</span> <span class=\"variable\">w</span> <span class=\"operator\">=</span> root;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(w!=<span class=\"literal\">null</span> || stack.size()&gt;<span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">while</span>(w!=<span class=\"literal\">null</span>)&#123;</span><br><span class=\"line\">                stack.push(w);</span><br><span class=\"line\">                w=w.left;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            w = stack.pop();</span><br><span class=\"line\">            ans.add(w.val); <span class=\"comment\">// å˜åŠ¨ç‚¹</span></span><br><span class=\"line\">            w = w.right;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>å‰åºéå†å’Œä¸­åºéå†å®ç°çš„ä¸åŒä¹‹å¤„ï¼Œåªåœ¨äºè®¿é—®ç¯èŠ‚çš„ä½ç½®ä¸åŒã€‚</p>\n<p>åç»­éå†éé€’å½’ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Solution</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> List&lt;Integer&gt; <span class=\"title function_\">postorderTraversal</span><span class=\"params\">(TreeNode root)</span> &#123;</span><br><span class=\"line\">        Deque&lt;TreeNode&gt; stack = <span class=\"keyword\">new</span> <span class=\"title class_\">LinkedList</span>&lt;&gt;();</span><br><span class=\"line\">        List&lt;Integer&gt; ans = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">        <span class=\"type\">TreeNode</span> <span class=\"variable\">w</span> <span class=\"operator\">=</span> root;</span><br><span class=\"line\">        <span class=\"type\">TreeNode</span> <span class=\"variable\">prev</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>; <span class=\"comment\">// ç»´æŠ¤ä¸Šæ¬¡ visit è¿‡çš„ç»“ç‚¹</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span>(w!=<span class=\"literal\">null</span> || stack.size()&gt;<span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">while</span>(w!=<span class=\"literal\">null</span>)&#123;</span><br><span class=\"line\">                stack.push(w);</span><br><span class=\"line\">                w=w.left;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            w = stack.peek(); <span class=\"comment\">// æ‰“ç®— visit æ­¤ä¸­ç»“ç‚¹</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span>(w.right == <span class=\"literal\">null</span> || w.right == prev)&#123;</span><br><span class=\"line\">                <span class=\"comment\">// å³è¾¹æ²¡æœ‰å¯ä»¥éå†çš„äº†</span></span><br><span class=\"line\">                ans.add(w.val);</span><br><span class=\"line\">                prev = stack.pop();</span><br><span class=\"line\">                w = <span class=\"literal\">null</span>; <span class=\"comment\">// ç›®çš„æ˜¯è·³è¿‡å‰é¢çš„ while</span></span><br><span class=\"line\">            &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">                <span class=\"comment\">// å³è¾¹å¯ä»¥éå†</span></span><br><span class=\"line\">                w = w.right;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ååºéå†å¼•å…¥æŒ‡é’ˆ <code>prev</code>ï¼Œè®°å½•ä¸Šä¸€æ¬¡éå†è¿‡çš„ç»“ç‚¹ã€‚è¿™ä¸ªéé€’å½’ååºéå†ç‰¹ç‚¹æ˜¯ï¼šæ ˆä¸­æ‰€æœ‰å…ƒç´ çš„ç»“ç‚¹å‡ä¸ºè¯¥ç»“ç‚¹çš„ç¥–å…ˆã€‚</p>\n<p>ååºéå†çš„æ–¹æ³•æ˜¯ä¸æ˜¯å¥½åƒå’Œå‰é¢çš„å‰åºéå†ã€ä¸­åºéå†çš„æ–¹æ³•å·®åˆ«å¾ˆå¤§ï¼Ÿä¸å¥½è®°å¿†çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨æ–‡ç« åé¢æåˆ°çš„ã€Œæ ¹å³å·¦é€†åºã€æŠ€å·§ã€‚</p>\n<h2 id=\"å‰-ä¸­-ååºéå†çš„æ¨¡æ‹Ÿæ ˆæ–¹æ³•é¢œè‰²æ ‡è®°æ³•\"><a class=\"markdownIt-Anchor\" href=\"#å‰-ä¸­-ååºéå†çš„æ¨¡æ‹Ÿæ ˆæ–¹æ³•é¢œè‰²æ ‡è®°æ³•\"></a> å‰ã€ä¸­ã€ååºéå†çš„æ¨¡æ‹Ÿæ ˆæ–¹æ³•ï¼ˆé¢œè‰²æ ‡è®°æ³•ï¼‰</h2>\n<p>åœ¨ä¸Šé¢çš„è¿­ä»£æ–¹æ³•ä¸­ï¼Œçœ‹ç€å„ç§åµŒå¥—å¾ªç¯å¯èƒ½ä¼šéå¸¸çƒ§è„‘ï¼Œå¯¼è‡´ã€Œä¸€çœ‹å°±ä¼šã€ä¸€ç”¨å°±åºŸã€ã€‚ä¸åŒéå†é¡ºåºçš„å¾ªç¯ç»“æ„å·®å¼‚è¾ƒå¤§ï¼Œå¢åŠ è®°å¿†è´Ÿæ‹…ã€‚LeetCode ä¸­çš„ç½‘å‹ henry ä»‹ç»äº†ä¸€ç§ç®€å•çš„è¿­ä»£æ–¹æ³•ï¼Œä¸åŒéå†çš„å¾ªç¯ç»“æ„å‡ ä¹ä¸€è‡´ï¼Œé€’å½’æ–¹å¼ä¸€æ ·å¥½æ‡‚ã€‚ä¸‹é¢æˆ‘å°†å¯¹å…¶æ€æƒ³è¿›è¡Œä¼˜åŒ–å’Œè§£æã€‚</p>\n<p>æ ¸å¿ƒæ€æƒ³ï¼š</p>\n<ul>\n<li>ä¸ºæ¯ä¸ªç»“ç‚¹æ·»åŠ  <code>boolean</code> ç±»å‹çš„æ ‡è®° <code>isUnfold</code>ï¼Œè¡¨ç¤ºä¸€ä¸ªç»“ç‚¹æ˜¯å¦è¿›è¡Œã€Œå±•å¼€ã€è¿‡ã€‚æ–°ç»“ç‚¹é»˜è®¤ä¸ºã€Œæœªå±•å¼€ã€çŠ¶æ€ã€‚</li>\n<li>ä¸æ–­è·å–æ ˆä¸­å…ƒç´ ï¼š\n<ul>\n<li>å¦‚æœå¼¹å‡ºçš„ç»“ç‚¹æœªå±•å¼€ã€‚é‚£ä¹ˆå°†å¼¹å‡ºçš„ç»“ç‚¹è‡ªèº«æ ‡è®°ä¸ºå±•å¼€ï¼Œç„¶åæŒ‰ä¸€å®šçš„é¡ºåºå°†å…¶å·¦å³ç»“ç‚¹å’Œè‡ªèº«å…¥æ ˆã€‚</li>\n<li>å¦‚æœå¼¹å‡ºçš„ç»“ç‚¹å·²ç»å±•å¼€ã€‚é‚£ä¹ˆå°± <code>visit</code> è¯¥ç»“ç‚¹ï¼ˆåŠ å…¥ç­”æ¡ˆæ•°ç»„ï¼‰ï¼Œè¿›å…¥ä¸‹ä¸€è½®è¿­ä»£ã€‚</li>\n</ul>\n</li>\n</ul>\n<p>ä¸‹é¢æ¼”ç¤ºçš„æ˜¯å‰åºéå†çš„ä»£ç ã€‚</p>\n<p>ç”±äº henry å°†è¿™ç§åšæ³•æˆä¸ºã€Œé¢œè‰²æ ‡è®°æ³•ã€ï¼Œè¿™é‡Œæˆ‘å°±å€Ÿã€Œé¢œè‰²ã€è¿™ä¸ªæ¦‚å¿µï¼Œæ–°å®šä¹‰å¸¦æ ‡è®°çš„ç»“ç‚¹ã€‚é¢œè‰²ç»“ç‚¹çš„åŒ…è£…ä»£ç å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">ColorNode</span>&#123;</span><br><span class=\"line\">    TreeNode node;</span><br><span class=\"line\">    <span class=\"type\">boolean</span> isUnfold; <span class=\"comment\">// é¢œè‰²æ ‡è®°</span></span><br><span class=\"line\">    ColorNode(TreeNode node)&#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.node = node;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// å±•å¼€ç»“ç‚¹</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> ColorNode <span class=\"title function_\">unFold</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.isUnfold = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>å‰åºéå†ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Solution</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> List&lt;Integer&gt; <span class=\"title function_\">preorderTraversal</span><span class=\"params\">(TreeNode root)</span> &#123;</span><br><span class=\"line\">        Deque&lt;ColorNode&gt; stack = <span class=\"keyword\">new</span> <span class=\"title class_\">LinkedList</span>&lt;&gt;();</span><br><span class=\"line\">        List&lt;Integer&gt; ans = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(root==<span class=\"literal\">null</span>)<span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">        <span class=\"type\">ColorNode</span> <span class=\"variable\">w</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ColorNode</span>(root);</span><br><span class=\"line\">        stack.push(w);</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(stack.size()&gt;<span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">            w = stack.pop();</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(w.isUnfold)&#123;</span><br><span class=\"line\">                ans.add(w.node.val);</span><br><span class=\"line\">                <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"comment\">// å³ - å·¦ - ä¸­ ä¾æ¬¡å…¥æ ˆ</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span>(w.node.right!=<span class=\"literal\">null</span>)stack.push(<span class=\"keyword\">new</span> <span class=\"title class_\">ColorNode</span>(w.node.right));</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(w.node.left!=<span class=\"literal\">null</span>)stack.push(<span class=\"keyword\">new</span> <span class=\"title class_\">ColorNode</span>(w.node.left));</span><br><span class=\"line\">            stack.push(w.unFold());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ä¸­åºéå†ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Solution</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> List&lt;Integer&gt; <span class=\"title function_\">inorderTraversal</span><span class=\"params\">(TreeNode root)</span> &#123;</span><br><span class=\"line\">        Deque&lt;ColorNode&gt; stack = <span class=\"keyword\">new</span> <span class=\"title class_\">LinkedList</span>&lt;&gt;();</span><br><span class=\"line\">        List&lt;Integer&gt; ans = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(root==<span class=\"literal\">null</span>)<span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">        <span class=\"type\">ColorNode</span> <span class=\"variable\">w</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ColorNode</span>(root);</span><br><span class=\"line\">        stack.push(w);</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(stack.size()&gt;<span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">            w = stack.pop();</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(w.isUnfold)&#123;</span><br><span class=\"line\">                ans.add(w.node.val);</span><br><span class=\"line\">                <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"comment\">// å³ - ä¸­ - å·¦ ä¾æ¬¡å…¥æ ˆ</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span>(w.node.right!=<span class=\"literal\">null</span>)stack.push(<span class=\"keyword\">new</span> <span class=\"title class_\">ColorNode</span>(w.node.right));</span><br><span class=\"line\">            stack.push(w.unFold());</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(w.node.left!=<span class=\"literal\">null</span>)stack.push(<span class=\"keyword\">new</span> <span class=\"title class_\">ColorNode</span>(w.node.left));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ååºéå†ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Solution</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> List&lt;Integer&gt; <span class=\"title function_\">postorderTraversal</span><span class=\"params\">(TreeNode root)</span> &#123;</span><br><span class=\"line\">        Deque&lt;ColorNode&gt; stack = <span class=\"keyword\">new</span> <span class=\"title class_\">LinkedList</span>&lt;&gt;();</span><br><span class=\"line\">        List&lt;Integer&gt; ans = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(root==<span class=\"literal\">null</span>)<span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">        <span class=\"type\">ColorNode</span> <span class=\"variable\">w</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ColorNode</span>(root);</span><br><span class=\"line\">        stack.push(w);</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(stack.size()&gt;<span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">            w = stack.pop();</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(w.isUnfold)&#123;</span><br><span class=\"line\">                ans.add(w.node.val);</span><br><span class=\"line\">                <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"comment\">// ä¸­ - å³ - å·¦ ä¾æ¬¡å…¥æ ˆ</span></span><br><span class=\"line\">            stack.push(w.unFold());</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(w.node.right!=<span class=\"literal\">null</span>)stack.push(<span class=\"keyword\">new</span> <span class=\"title class_\">ColorNode</span>(w.node.right));</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(w.node.left!=<span class=\"literal\">null</span>)stack.push(<span class=\"keyword\">new</span> <span class=\"title class_\">ColorNode</span>(w.node.left));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ã€Œé¢œè‰²æ ‡è®°æ³•ã€å…¥æ ˆæ–¹å¼ç‰¹åˆ«åƒé€’å½’ï¼Œå…¶çš„åŸç†åœ¨äºæˆ‘ä»¬é€šè¿‡ä»£ç æ¨¡æ‹Ÿäº†é€’å½’çš„è¿‡ç¨‹ï¼Œåªä¸è¿‡é€’å½’æ—¶æ˜¯ç¨‹åºä¸­çš„æ–¹æ³•è°ƒç”¨æ ˆï¼Œè¿™é‡Œæ˜¯ç”¨ä»£ç æ¨¡æ‹Ÿè¿™ä¸ªæ ˆã€‚</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/202509262333213.webp\" alt=\"image.png\" /></p>\n<p>è‡³æ­¤ï¼Œä¹Ÿè®¸ä½ å·²ç»å¿«é€ŸæŒæ¡äº†æ›´åŠ å®¹æ˜“è®°å¾—éé€’å½’éå†äºŒå‰æ ‘çš„æ–¹å¼ã€‚æ³¨æ„åˆ°ï¼Œå…ˆåºéå†çš„å†™æ³•ä¸­è¿˜å¯ä»¥å­˜åœ¨ä¼˜åŒ–çš„åœ°æ–¹ã€‚å…ˆåºéå†ä¸­ã€Œå³ - å·¦ - ä¸­ã€ä¾æ¬¡å…¥æ ˆåï¼Œä¸‹ä¸€è½®è¿­ä»£ä¸­ï¼Œè§£æŠ˜å åçš„ã€Œä¸­ã€ä¼šé¦–å…ˆå¼¹å‡ºæ¥å¹¶åŠ å…¥ç­”æ¡ˆä¸­ï¼Œçœ‹èµ·æ¥ä¸Šä¸‹ä¸¤æ¬¡è¿­ä»£ä¸­ï¼Œå¯¹äºã€Œä¸­ã€ç»“ç‚¹çš„å…¥æ ˆå’Œå‡ºæ ˆå¯ä»¥åœ¨ä¸€æ¬¡è¿­ä»£ä¸­å®Œæˆã€‚</p>\n<p>åœ¨ä¸€æ¬¡è¿­ä»£ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè§£æŠ˜å åçš„ã€Œä¸­ã€ç»“ç‚¹ç›´æ¥åŠ å…¥ç­”æ¡ˆæ•°ç»„ä¸å†å‹æ ˆã€‚è¿™æ ·çš„è¯ï¼Œ<code>isUnFold</code> çš„ç»“ç‚¹çŠ¶æ€æ ‡è®°å°±æ²¡æ„ä¹‰äº†ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠé¢œè‰²ç»“ç‚¹é€€åŒ–ä¸ºåŸºæœ¬çš„æ ‘ç»“ç‚¹ã€‚</p>\n<p>å…ˆåºéå†ç®€åŒ–å†™æ³•ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Solution</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> List&lt;Integer&gt; <span class=\"title function_\">preorderTraversal</span><span class=\"params\">(TreeNode root)</span> &#123;</span><br><span class=\"line\">        Deque&lt;TreeNode&gt; stack = <span class=\"keyword\">new</span> <span class=\"title class_\">LinkedList</span>&lt;&gt;();</span><br><span class=\"line\">        List&lt;Integer&gt; ans = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">        <span class=\"type\">TreeNode</span> <span class=\"variable\">w</span> <span class=\"operator\">=</span> root;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(w!=<span class=\"literal\">null</span>)stack.push(w);</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(stack.size()&gt;<span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">            w = stack.pop();</span><br><span class=\"line\">            ans.add(w.val);</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(w.right!=<span class=\"literal\">null</span>)stack.push(w.right);</span><br><span class=\"line\">            <span class=\"comment\">// ans.add(w.val); // ä¹Ÿå¯ä»¥å†™åœ¨è¿™ï¼Œåæ­£ä¸å…¥æ ˆ</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span>(w.left!=<span class=\"literal\">null</span>)stack.push(w.left);</span><br><span class=\"line\">            <span class=\"comment\">// ans.add(w.val); // ä¹Ÿå¯ä»¥å†™åœ¨è¿™ï¼Œåæ­£ä¸å…¥æ ˆ</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"ç¿»è½¬å‰åºéå†ç»“æœå¯å¾—åˆ°ååºéå†ç»“æœ\"><a class=\"markdownIt-Anchor\" href=\"#ç¿»è½¬å‰åºéå†ç»“æœå¯å¾—åˆ°ååºéå†ç»“æœ\"></a> ç¿»è½¬å‰åºéå†ç»“æœå¯å¾—åˆ°ååºéå†ç»“æœ</h2>\n<p>å‰åºéå†ä¸­éå†ç»“ç‚¹çš„é¡ºåºä¸ºï¼šè®¿é—®æ ¹ - éå†å·¦å­æ ‘ - éå†å³å­æ ‘ã€‚è®¿é—®æ ¹åï¼Œæˆ‘ä»¬å¾€å¾€ä¼šå°†å­æ ‘è¿›è¡Œå‹æ ˆå¤„ç†ã€‚å¦‚æœæˆ‘ä»¬è¿›è¡Œä»¥ä¸‹è°ƒæ•´ï¼š</p>\n<ul>\n<li>è°ƒæ•´å­æ ‘çš„å‹æ ˆé¡ºåºï¼šè®¿é—®æ ¹ - éå†å³å­æ ‘ - éå†å·¦å­æ ‘ã€‚ï¼ˆæ ¹ - å³ - å·¦ï¼‰</li>\n<li>æŠŠæœ€ç»ˆçš„ç»“æœé€†åºæ’åˆ—ã€‚ï¼ˆå·¦ - å³ - æ ¹ï¼‰<br />\næœ€ç»ˆå¾—åˆ°çš„éå†ç»“æœï¼Œå°±æ˜¯ååºéå†çš„ç»“æœï¼æˆ‘ä»¬å°†ã€Œæ ¹ - å·¦ - å³ã€å˜ä¸ºäº†ã€Œå·¦ - å³ - æ ¹ã€ã€‚</li>\n</ul>\n<p>æˆ‘ä»¬å°è¯•æŠŠä¸Šä¸€å°èŠ‚æåˆ°çš„å‰åºéå†çš„å‡ ç§éé€’å½’æ–¹å¼ï¼Œä½¿ç”¨ã€Œç¿»è½¬å‰åºéå†ç»“æœã€çš„æ–¹æ³•ï¼Œå°†å‰åºéå†æ”¹é€ ä¸ºã€Œååºéå†ã€ã€‚</p>\n<p>å¸¸è§„è¿­ä»£æ–¹æ³•çš„åç»­éå†ã€Œæ ¹å³å·¦é€†åºã€ç‰ˆæœ¬ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Solution</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> List&lt;Integer&gt; <span class=\"title function_\">postorderTraversal</span><span class=\"params\">(TreeNode root)</span> &#123;</span><br><span class=\"line\">        Deque&lt;TreeNode&gt; stack = <span class=\"keyword\">new</span> <span class=\"title class_\">LinkedList</span>&lt;&gt;();</span><br><span class=\"line\">        List&lt;Integer&gt; ans = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">        <span class=\"type\">TreeNode</span> <span class=\"variable\">w</span> <span class=\"operator\">=</span> root;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(w!=<span class=\"literal\">null</span> || stack.size()&gt;<span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">while</span>(w!=<span class=\"literal\">null</span>)&#123;</span><br><span class=\"line\">                ans.add(w.val); </span><br><span class=\"line\">                stack.push(w);</span><br><span class=\"line\">                w=w.right; <span class=\"comment\">// å˜åŠ¨ç‚¹</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            w = stack.pop();</span><br><span class=\"line\">            w = w.left; <span class=\"comment\">// å˜åŠ¨ç‚¹</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        Collections.reverse(ans); <span class=\"comment\">// æ•°ç»„ç¿»è½¬</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æ¨¡æ‹Ÿæ ˆæ–¹æ³•ï¼Œååºéå†ã€Œæ ¹å³å·¦é€†åºã€ç‰ˆæœ¬ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Solution</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> List&lt;Integer&gt; <span class=\"title function_\">postorderTraversal</span><span class=\"params\">(TreeNode root)</span> &#123;</span><br><span class=\"line\">        Deque&lt;TreeNode&gt; stack = <span class=\"keyword\">new</span> <span class=\"title class_\">LinkedList</span>&lt;&gt;();</span><br><span class=\"line\">        List&lt;Integer&gt; ans = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">        <span class=\"type\">TreeNode</span> <span class=\"variable\">w</span> <span class=\"operator\">=</span> root;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(w!=<span class=\"literal\">null</span>)stack.push(w);</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(stack.size()&gt;<span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">            w = stack.pop();</span><br><span class=\"line\">            ans.add(w.val);</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(w.left!=<span class=\"literal\">null</span>)stack.push(w.left); <span class=\"comment\">// å˜åŠ¨</span></span><br><span class=\"line\">            <span class=\"comment\">// ans.add(w.val); // ä¹Ÿå¯ä»¥å†™åœ¨è¿™</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span>(w.right!=<span class=\"literal\">null</span>)stack.push(w.right); <span class=\"comment\">// å˜åŠ¨</span></span><br><span class=\"line\">            <span class=\"comment\">// ans.add(w.val); // ä¹Ÿå¯ä»¥å†™åœ¨è¿™</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        Collections.reverse(ans); <span class=\"comment\">// ç¿»è½¬æ•°ç»„</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"çº¿ç´¢äºŒå‰æ ‘morris-ç®—æ³•\"><a class=\"markdownIt-Anchor\" href=\"#çº¿ç´¢äºŒå‰æ ‘morris-ç®—æ³•\"></a> çº¿ç´¢äºŒå‰æ ‘â€”â€”Morris ç®—æ³•</h2>\n<p>æœ¬èŠ‚ä»‹ç»ä¸€ç§å·§å¦™çš„æ–¹æ³•å¯ä»¥åœ¨çº¿æ€§æ—¶é—´å†…ï¼Œåªå ç”¨å¸¸æ•°ç©ºé—´æ¥å®ç°æ ‘çš„å‰ã€ä¸­ã€ååºéå†ã€‚è¿™ç§æ–¹æ³•ç”± Joseph M. Morris åœ¨ 1979 å¹´çš„è®ºæ–‡ã€ŒTraversing Binary Trees Simply and Cheaplyã€ä¸­é¦–æ¬¡æå‡ºï¼Œå› æ­¤è¢«ç§°ä¸º Morris éå†ã€‚</p>\n<p>Morris éå†çš„æ ¸å¿ƒæ€æƒ³æ˜¯åˆ©ç”¨æ ‘çš„å¤§é‡ç©ºé—²æŒ‡é’ˆï¼Œå®ç°ç©ºé—´å¼€é”€çš„æé™ç¼©å‡ã€‚</p>\n<p>Morris éå†å¯ä»¥å°†éé€’å½’éå†ä¸­çš„ç©ºé—´å¤æ‚åº¦é™ä¸º <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span>ã€‚ä»è€Œå®ç°æ—¶é—´å¤æ‚åº¦ä¸º <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>N</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(N)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span><span class=\"mclose\">)</span></span></span></span>ï¼Œè€Œç©ºé—´å¤æ‚åº¦ä¸º <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span> çš„ç²¾å¦™ç®—æ³•ã€‚</p>\n<h3 id=\"å®ç°åŸåˆ™\"><a class=\"markdownIt-Anchor\" href=\"#å®ç°åŸåˆ™\"></a> å®ç°åŸåˆ™</h3>\n<p>è®°ä½œå½“å‰èŠ‚ç‚¹ä¸º <code>cur</code>ã€‚</p>\n<ol>\n<li>å¦‚æœ <code>cur</code> æ— å·¦å­©å­ï¼Œ<code>cur</code> å‘å³ç§»åŠ¨ï¼ˆ<code>cur=cur.right</code>ï¼‰</li>\n<li>å¦‚æœ <code>cur</code> æœ‰å·¦å­©å­ï¼Œæ‰¾åˆ° <code>cur</code> å·¦å­æ ‘ä¸Šæœ€å³çš„èŠ‚ç‚¹ï¼Œè®°ä¸º <code>mostright</code>\n<ol>\n<li>å¦‚æœ <code>mostright</code> çš„ <code>right</code> æŒ‡é’ˆæŒ‡å‘ç©ºï¼Œè®©å…¶æŒ‡å‘ <code>cur</code>ï¼Œ<code>cur</code> å‘å·¦ç§»åŠ¨ï¼ˆ<code>cur=cur.left</code>ï¼‰</li>\n<li>å¦‚æœ <code>mostright</code> çš„ <code>right</code> æŒ‡é’ˆæŒ‡å‘ <code>cur</code>ï¼Œè®©å…¶æŒ‡å‘ç©ºï¼Œ<code>cur</code> å‘å³ç§»åŠ¨ï¼ˆ<code>cur=cur.right</code>ï¼‰</li>\n</ol>\n</li>\n</ol>\n<p>å®ç°ä»¥ä¸Šçš„åŸåˆ™ï¼Œå³å®ç°äº† Morris éå†ã€‚</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">Traversal</span><span class=\"params\">(<span class=\"keyword\">struct</span> TreeNode* root, <span class=\"type\">int</span>* returnSize)</span> &#123;</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">TreeNode</span> *<span class=\"title\">cur</span> =</span> root, *mostright = <span class=\"literal\">NULL</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (cur != <span class=\"literal\">NULL</span>) &#123;</span><br><span class=\"line\">        mostright = cur-&gt;left;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (mostright != <span class=\"literal\">NULL</span>) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// æ¡ä»¶Aã€æ¡ä»¶Béƒ½ä¸æ»¡è¶³ å°±ä¸€ç›´æ‰¾æœ€å³</span></span><br><span class=\"line\">            <span class=\"keyword\">while</span> (mostright-&gt;right != <span class=\"literal\">NULL</span> &amp;&amp; mostright-&gt;right != cur)</span><br><span class=\"line\">                mostright = mostright-&gt;right;</span><br><span class=\"line\">                </span><br><span class=\"line\">            <span class=\"comment\">// åªæ»¡è¶³æ¡ä»¶A</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (mostright-&gt;right == <span class=\"literal\">NULL</span>) &#123;</span><br><span class=\"line\">                cur å‰åºéå†ç‚¹ä½ <span class=\"number\">1</span>/<span class=\"number\">2</span></span><br><span class=\"line\">                mostright-&gt;right = cur;</span><br><span class=\"line\">                cur = cur-&gt;left;</span><br><span class=\"line\">                <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"comment\">// åªæ»¡è¶³æ¡ä»¶B </span></span><br><span class=\"line\">            <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                mostright-&gt;right = <span class=\"literal\">NULL</span>;    </span><br><span class=\"line\">                cur ä¸­åºéå†ç‚¹ä½ <span class=\"number\">1</span>/<span class=\"number\">2</span></span><br><span class=\"line\">                <span class=\"comment\">// é¢„å‘Šï¼šæ¥ä¸‹æ¥å°†curç§»åŠ¨åˆ°å³å­æ ‘ä¸Š</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// mostright == NULL </span></span><br><span class=\"line\">        <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            cur å‰åºéå†ç‚¹ä½ <span class=\"number\">2</span>/<span class=\"number\">2</span>      </span><br><span class=\"line\">            cur ä¸­åºéå†ç‚¹ä½ <span class=\"number\">2</span>/<span class=\"number\">2</span></span><br><span class=\"line\">            <span class=\"comment\">// é¢„å‘Šï¼šæ¥ä¸‹æ¥å°†curç§»åŠ¨åˆ°å³å­æ ‘ä¸Š</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        cur = cur-&gt;right;                <span class=\"comment\">// å°†curç§»åŠ¨åˆ°å³å­æ ‘ä¸Š</span></span><br><span class=\"line\">    &#125; <span class=\"comment\">// end while</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/20230729005245.png\" alt=\"image.png\" /></p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/20230729005252.png\" alt=\"image.png\" /></p>\n<ul>\n<li>ååºéå†å¯ä»¥é¦–å…ˆæŒ‰ç…§<strong>æ ¹å³å·¦</strong>çš„é¡ºåºéå†æ•´æ£µæ ‘ï¼Œæœ€åå°†ç»“æœç¿»è½¬ä¸€ä¸‹å³å¯ã€‚å› æ­¤æ­¤å†™æ³•å’Œ <code>Morris</code> å‰åºéå†ç›¸åŒï¼ŒåŒºåˆ«åœ¨äº <code>left</code> å’Œ <code>right</code> å…¨éƒ¨äº¤æ¢å³å¯ã€‚</li>\n</ul>\n<h1 id=\"ç»™å®šä¸¤ç§éå†é¡ºåºç¡®å®šä¸€æ£µäºŒå‰æ ‘\"><a class=\"markdownIt-Anchor\" href=\"#ç»™å®šä¸¤ç§éå†é¡ºåºç¡®å®šä¸€æ£µäºŒå‰æ ‘\"></a> ç»™å®šä¸¤ç§éå†é¡ºåºç¡®å®šä¸€æ£µäºŒå‰æ ‘</h1>\n\n<div class=\"callout\" data-callout=\"example\">\n<div class=\"callout-title\">\n<div class=\"callout-title-icon\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-list\"><line x1=\"8\" x2=\"21\" y1=\"6\" y2=\"6\"/><line x1=\"8\" x2=\"21\" y1=\"12\" y2=\"12\"/><line x1=\"8\" x2=\"21\" y1=\"18\" y2=\"18\"/><line x1=\"3\" x2=\"3.01\" y1=\"6\" y2=\"6\"/><line x1=\"3\" x2=\"3.01\" y1=\"12\" y2=\"12\"/><line x1=\"3\" x2=\"3.01\" y1=\"18\" y2=\"18\"/></svg>\n</div>\n<div class=\"callout-title-inner\">ğŸŸ¨ <a href=\"https://leetcode.cn/problems/construct-binary-tree-from-preorder-and-inorder-traversal/description/\">105. ä»å‰åºä¸ä¸­åºéå†åºåˆ—æ„é€ äºŒå‰æ ‘ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></div>\n</div>\n<div class=\"callout-content\"><p>ç»™å®šä¸¤ä¸ªæ•´æ•°æ•°ç»„ <code>preorder</code> å’Œ <code>inorder</code> ï¼Œå…¶ä¸­ <code>preorder</code> æ˜¯äºŒå‰æ ‘çš„å…ˆåºéå†ï¼Œ<code>inorder</code> æ˜¯åŒä¸€æ£µæ ‘çš„ä¸­åºéå†ï¼Œè¯·æ„é€ äºŒå‰æ ‘å¹¶è¿”å›å…¶æ ¹èŠ‚ç‚¹ã€‚</p>\n</div></div><h1 id=\"æœ¬æ–‡å‚è€ƒ\"><a class=\"markdownIt-Anchor\" href=\"#æœ¬æ–‡å‚è€ƒ\"></a> æœ¬æ–‡å‚è€ƒ</h1>\n<ul>\n<li>408 æ€ç»´å¯¼å›¾è§£è€¦</li>\n<li>ç ”ç©¶ç”Ÿè¯¾ç¨‹ã€Šç¦»æ•£æ•°å­¦ã€‹æ ‘çš„éå†ç›¸å…³å†…å®¹</li>\n<li>LeetCode ç›¸å…³é¢˜ç›®é¢˜è§£</li>\n<li>â­æ¨èï¼š<a href=\"https://leetcode.cn/problems/binary-tree-inorder-traversal/solutions/25220/yan-se-biao-ji-fa-yi-chong-tong-yong-qie-jian-ming/\">é¢œè‰²æ ‡è®°æ³•ï¼Œä¸€ç§é€šç”¨ä¸”ç®€æ˜çš„æ ‘éå†æ–¹æ³• - äºŒå‰æ ‘çš„ä¸­åºéå† - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Threaded_binary_tree\">Threaded binary tree - Wikipedia</a></li>\n</ul>\n","raw":"---\ntitle: æœ‰è°è¿˜ä¸ä¼šäºŒå‰æ ‘çš„éå†ï¼Ÿ\ntags:\n  - Java\n  - C\n  - äºŒå‰æ ‘\ncover: 'https://cdn.gallery.uuanqin.top/img/202509262338422.webp'\ndescription: åˆ«ç¬‘ï¼Œä½ ä¹Ÿæƒ³ä¸å‡ºç¬¬äºŒä¸ªæ–¹æ³•...\nkatex: true\ncategories:\n  - ç®—æ³•ä¸æ•°æ®ç»“æ„\nabbrlink: eca34904\ndate: 2023-11-28 16:26:49\ntop_img:\n---\n\n> [!note] æœ¬æ–‡åˆ›å»ºäº `231128`ï¼Œäº `250925` ä»ç¬”è®°ä¸­è¿›è¡Œè¿ç§»ã€‚\n\näºŒå‰æ ‘çš„éå†é—®é¢˜éå¸¸ç»å…¸ï¼Œç”¨é€’å½’æ–¹å¼å®ç°éå¸¸ç®€å•ã€‚ä½†å½“é€’å½’çš„ç¨‹åºæ ˆäº¤ç”±è‡ªå·±ç®¡ç†æ—¶ï¼Œäº‹æƒ…è¿˜ä¼šç®€å•å—ï¼Ÿ\n\næœ¬æ–‡ä¸»è¦å†…å®¹ï¼š\n\n- æ ‘éå†çš„åŸºæœ¬æ¦‚å¿µä¸ç‰¹ç‚¹\n- å±‚åºéå†æ–¹å¼\n- å‰ã€ä¸­ã€ååºéå†çš„é€’å½’æ–¹å¼\n- å‰ã€ä¸­ã€ååºéå†çš„å¸¸è§„è¿­ä»£æ–¹å¼\n- å‰ã€ä¸­ã€ååºéå†çš„æ¨¡æ‹Ÿç¨‹åºæ ˆæ–¹å¼\n- å‰ã€ååºäº’è½¬æŠ€å·§\n- Morris ç®—æ³•\n\næœ¬æ–‡é¢˜ç›®éš¾åº¦æ ‡è¯†ï¼šğŸŸ©ç®€å•ï¼ŒğŸŸ¨ä¸­ç­‰ï¼ŒğŸŸ¥å›°éš¾ã€‚\n\n# åŸºæœ¬æ¦‚å¿µä¸ç‰¹ç‚¹\n\nç³»ç»Ÿåœ°è®¿é—®æœ‰åºæ ‘çš„æ¯ä¸ªç»“ç‚¹ï¼Œä½¿å¾—å¯¹æ¯ä¸ªç»“ç‚¹æ°å¥½è®¿é—®ä¸€æ¬¡ï¼Œè¿›è¡Œæ•°æ®å­˜å–çš„è¿‡ç¨‹ç§°ä¸ºæœ‰åºæ ‘éå†ç®—æ³•ã€‚\n\näºŒå‰æ ‘çš„éå†åˆ†ä¸ºï¼š\n\n- å…ˆåºéå†ï¼ˆå‰åºéå†ï¼‰ï¼šè®¿é—®æ¬¡åºä¸ºæ ¹ã€å·¦å­æ ‘ã€å³å­æ ‘\n- ä¸­åºéå†ï¼šè®¿é—®æ¬¡åºä¸ºå·¦å­æ ‘ã€æ ¹ã€å³å­æ ‘\n- ååºéå†ï¼šè®¿é—®æ¬¡åºä¸ºå·¦å­æ ‘ã€å³å­æ ‘ã€æ ¹\n- å±‚æ¬¡éå†\n\næ‰€è°“ã€Œåºã€å³æŒ‡æ ¹èŠ‚ç‚¹ä½•æ—¶è¢«è®¿é—®ã€‚\n\nç”±éå†åºåˆ—æ„é€ äºŒå‰æ ‘ï¼š\n\n- å”¯ä¸€ç¡®å®šä¸€æ£µäºŒå‰æ ‘ï¼ˆå…·ä½“ç®—æ³•å®ç°å¯çœ‹åæ–‡ï¼‰ï¼š\n\t- å…ˆåºåºåˆ— + ä¸­åºåºåˆ—\n\t- ååºåºåˆ— + ä¸­åºåºåˆ—\n\t- å±‚åºåºåˆ— + ä¸­åºåºåˆ—\n- æ— æ³•å”¯ä¸€ç¡®å®šä¸€æ£µäºŒå‰æ ‘ï¼š\n\t- å…ˆåºåºåˆ— + ååºåºåˆ—ã€‚ä½†å¯ä»¥ç¡®å®šäºŒå‰æ ‘ä¸­ç»“ç‚¹çš„ç¥–å…ˆå…³ç³»ï¼šå½“ä¸¤ä¸ªç»“ç‚¹çš„å‰åºåºåˆ—ä¸º XYã€ååºåºåˆ—ä¸º YX æ—¶ï¼Œåˆ™ X ä¸º Y çš„ç¥–å…ˆã€‚\n\nåœ¨ä»»æ„ä¸€æ£µäºŒå‰æ ‘çš„å‰åºåºåˆ—å’Œååºåºåˆ—ä¸­ï¼Œå„å¶å­ä¹‹é—´ç›¸å¯¹æ¬¡åºå…³ç³»éƒ½ç›¸åŒã€‚å¶å­ç»“ç‚¹ä½äºå·¦å³ä¸¤ä¸ªåˆ†æ”¯ä¸Šï¼Œå…ˆåºå’Œååºçš„éå†å±æ€§å‡æ˜¯å·¦å­æ ‘åœ¨å³å­æ ‘ä¹‹å‰ï¼ˆç›¸å¯¹æ¬¡åºä¸€å®šç›¸åŒï¼‰ï¼Œå’ŒäºŒå‰æ ‘çš„æ ·å¼æ— å…³ã€‚\n\n# å±‚åºéå†\n\n> [!example] ğŸŸ¨ [102. äºŒå‰æ ‘çš„å±‚åºéå† - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/binary-tree-level-order-traversal/description/)\n\nè‡ªä¸‹è€Œä¸Šã€ä»å³åˆ°å·¦çš„å±‚æ¬¡éå†ç®—æ³•ï¼šåˆ©ç”¨åŸæœ‰çš„å±‚æ¬¡éå†ç®—æ³•ï¼Œå‡ºé˜Ÿçš„åŒæ—¶å°†å„ä¸ªç»“ç‚¹çš„æŒ‡é’ˆå…¥æ ˆï¼Œåœ¨æ‰€æœ‰ç»“ç‚¹å…¥æ ˆåå†ä»æ ˆé¡¶å¼€å§‹ä¾æ¬¡è®¿é—®ã€‚\n\n```java\nclass Solution {\n    public List<List<Integer>> levelOrder(TreeNode root) {\n        if(root==null)return new ArrayList<>();\n        Deque<TreeNode> q = new LinkedList<>();\n        List<List<Integer>> ans = new ArrayList<>();\n        q.offer(root);\n        List<Integer> layer;\n        while(q.size()>0){\n            int now = q.size(); // ç¡®å®šå½“å‰å±‚æ¬¡çš„å±‚æ•°\n            layer = new ArrayList<>();\n            for(int i=0;i<now;i++){\n                TreeNode node = q.poll();\n                layer.add(node.val);\n                if(node.left!=null){\n                    q.offer(node.left);\n                }\n                if(node.right!=null){\n                    q.offer(node.right);\n                }\n            }\n            ans.add(layer);\n        }\n        return ans;\n    }\n}\n```\n\nå¤æ‚åº¦åˆ†æï¼šè®°æ ‘ä¸Šæ‰€æœ‰èŠ‚ç‚¹çš„ä¸ªæ•°ä¸º nã€‚\n\n- æ—¶é—´å¤æ‚åº¦ï¼šæ¯ä¸ªç‚¹è¿›é˜Ÿå‡ºé˜Ÿå„ä¸€æ¬¡ï¼Œæ•…æ¸è¿›æ—¶é—´å¤æ‚åº¦ä¸º $O(n)$ã€‚\n- ç©ºé—´å¤æ‚åº¦ï¼šé˜Ÿåˆ—ä¸­å…ƒç´ çš„ä¸ªæ•°ä¸è¶…è¿‡ n ä¸ªï¼Œæ•…æ¸è¿›ç©ºé—´å¤æ‚åº¦ä¸º $O(n)$ã€‚\n\nå±‚åºéå†ç‰¹ç‚¹ï¼šç»“ç‚¹æ˜¯ä¸€å±‚ä¸€å±‚åŠ çš„ã€‚åˆ©ç”¨è¿™ä¸ªç‰¹ç‚¹å¯ä»¥çŸ¥é“æ¯ä¸€å±‚çš„é«˜åº¦ã€‚æ¯”å¦‚ç»´æŠ¤ Map æ•°ç»„è®°å½•æ¯ä¸ªç»“ç‚¹çš„æ·±åº¦ã€‚\n\nå¦‚æœä¸éœ€è¦è®°å½•é«˜åº¦ï¼Œéœ€è¦åœ¨æ¯å±‚ç»“ç‚¹å¤„ç†ä¹‹é—´åŠ å…¥é—´éš”ï¼Œå¯ä»¥ç»´æŠ¤å˜é‡ï¼Œåœ¨è£…å…¥é˜Ÿåˆ—æ—¶è®°å½•ä¸‹ä¸€å±‚ç»“ç‚¹çš„ä¸ªæ•°ã€‚ä½†å®é™…ä¸Šï¼Œéå†æ¯å±‚å‰é˜Ÿåˆ—çš„å¤§å°å°±æ˜¯æœ€å¥½çš„é—´éš”ï¼Œå¦‚ä¸Šé¢ä»£ç ä¸­çš„ `int now = q.size();`ã€‚\n\n# å‰ã€ä¸­ã€ååºéå†çš„é€’å½’æ–¹æ³•\n\n> [!example] ğŸŸ© [144. äºŒå‰æ ‘çš„å‰åºéå† - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/binary-tree-preorder-traversal/)\n\n> [!example] ğŸŸ© [94. äºŒå‰æ ‘çš„ä¸­åºéå† - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/binary-tree-inorder-traversal/description/)\n\n> [!example] ğŸŸ© [145. äºŒå‰æ ‘çš„ååºéå† - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/binary-tree-postorder-traversal/description/)\n\n```c\nvoid Track(BiTree *T){\n\tif(T==NULL)return;\n\t// å‰åºéå†visitäºæ­¤\n\tTrack(T->left);\n\t// ä¸­åºéå†visitäºæ­¤\n\tTrack(T->right);\n\t// ååºéå†visitäºæ­¤\n}\n```\n\né€’å½’å·¥ä½œæ ˆæ ˆæ·±æ°å¥½ä¸ºæ ‘çš„æ·±åº¦ã€‚åœ¨æœ€åæƒ…å†µä¸‹ï¼ŒäºŒå‰æ ‘æ˜¯æœ‰ n ä¸ªç»“ç‚¹ï¼Œæ·±åº¦ä¸º n çš„å•æ”¯æ ‘ï¼Œéå†ç®—æ³•çš„ç©ºé—´å¤æ‚åº¦ä¸º $O(n)$ã€‚\n\nåˆ«çœ‹ä¸Šé¢çš„é¢˜ç›®éš¾åº¦æ ‡è¯†ä¸ºç®€å•ï¼Œé‚£åªæ˜¯å¯¹äºé€’å½’æ–¹å¼å®ç°è€Œè¨€ã€‚ç”¨è¿­ä»£æ–¹å¼å»å®ç°å¯ä¸ä¸€å®šç®€å•ã€‚\n\n# å‰ã€ä¸­ã€ååºéå†è¿­ä»£æ–¹æ³•\n\n![image.png|425](https://cdn.gallery.uuanqin.top/img/20231225170324.webp)\n\n## å‰ã€ä¸­ã€ååºéå†å¸¸è§„è¿­ä»£æ–¹æ³•\n\nå‰åºéå†éé€’å½’ï¼š\n\n```java\nclass Solution {\n    public List<Integer> preorderTraversal(TreeNode root) {\n        Deque<TreeNode> stack = new LinkedList<>();\n        List<Integer> ans = new ArrayList<>();\n        TreeNode w = root;\n        while(w!=null || stack.size()>0){\n            while(w!=null){\n                ans.add(w.val); // å˜åŠ¨ç‚¹\n                stack.push(w);\n                w=w.left;\n            }\n            w = stack.pop();\n            w = w.right;\n        }\n        return ans;\n    }\n}\n```\n\nä¸­åºéå†éé€’å½’ï¼š\n\n```java\nclass Solution {\n    public List<Integer> inorderTraversal(TreeNode root) {\n        Deque<TreeNode> stack = new LinkedList<>();\n        List<Integer> ans = new ArrayList<>();\n        TreeNode w = root;\n        while(w!=null || stack.size()>0){\n            while(w!=null){\n                stack.push(w);\n                w=w.left;\n            }\n            w = stack.pop();\n            ans.add(w.val); // å˜åŠ¨ç‚¹\n            w = w.right;\n        }\n        return ans;\n    }\n}\n```\n\nå‰åºéå†å’Œä¸­åºéå†å®ç°çš„ä¸åŒä¹‹å¤„ï¼Œåªåœ¨äºè®¿é—®ç¯èŠ‚çš„ä½ç½®ä¸åŒã€‚\n\nåç»­éå†éé€’å½’ï¼š\n\n```java\nclass Solution {\n    public List<Integer> postorderTraversal(TreeNode root) {\n        Deque<TreeNode> stack = new LinkedList<>();\n        List<Integer> ans = new ArrayList<>();\n        TreeNode w = root;\n        TreeNode prev = null; // ç»´æŠ¤ä¸Šæ¬¡ visit è¿‡çš„ç»“ç‚¹\n        while(w!=null || stack.size()>0){\n            while(w!=null){\n                stack.push(w);\n                w=w.left;\n            }\n            w = stack.peek(); // æ‰“ç®— visit æ­¤ä¸­ç»“ç‚¹\n            if(w.right == null || w.right == prev){\n                // å³è¾¹æ²¡æœ‰å¯ä»¥éå†çš„äº†\n                ans.add(w.val);\n                prev = stack.pop();\n                w = null; // ç›®çš„æ˜¯è·³è¿‡å‰é¢çš„ while\n            }else{\n                // å³è¾¹å¯ä»¥éå†\n                w = w.right;\n            }\n        }\n        return ans;\n    }\n}\n```\n\nååºéå†å¼•å…¥æŒ‡é’ˆ `prev`ï¼Œè®°å½•ä¸Šä¸€æ¬¡éå†è¿‡çš„ç»“ç‚¹ã€‚è¿™ä¸ªéé€’å½’ååºéå†ç‰¹ç‚¹æ˜¯ï¼šæ ˆä¸­æ‰€æœ‰å…ƒç´ çš„ç»“ç‚¹å‡ä¸ºè¯¥ç»“ç‚¹çš„ç¥–å…ˆã€‚\n\nååºéå†çš„æ–¹æ³•æ˜¯ä¸æ˜¯å¥½åƒå’Œå‰é¢çš„å‰åºéå†ã€ä¸­åºéå†çš„æ–¹æ³•å·®åˆ«å¾ˆå¤§ï¼Ÿä¸å¥½è®°å¿†çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨æ–‡ç« åé¢æåˆ°çš„ã€Œæ ¹å³å·¦é€†åºã€æŠ€å·§ã€‚\n\n## å‰ã€ä¸­ã€ååºéå†çš„æ¨¡æ‹Ÿæ ˆæ–¹æ³•ï¼ˆé¢œè‰²æ ‡è®°æ³•ï¼‰\n\nåœ¨ä¸Šé¢çš„è¿­ä»£æ–¹æ³•ä¸­ï¼Œçœ‹ç€å„ç§åµŒå¥—å¾ªç¯å¯èƒ½ä¼šéå¸¸çƒ§è„‘ï¼Œå¯¼è‡´ã€Œä¸€çœ‹å°±ä¼šã€ä¸€ç”¨å°±åºŸã€ã€‚ä¸åŒéå†é¡ºåºçš„å¾ªç¯ç»“æ„å·®å¼‚è¾ƒå¤§ï¼Œå¢åŠ è®°å¿†è´Ÿæ‹…ã€‚LeetCode ä¸­çš„ç½‘å‹ henry ä»‹ç»äº†ä¸€ç§ç®€å•çš„è¿­ä»£æ–¹æ³•ï¼Œä¸åŒéå†çš„å¾ªç¯ç»“æ„å‡ ä¹ä¸€è‡´ï¼Œé€’å½’æ–¹å¼ä¸€æ ·å¥½æ‡‚ã€‚ä¸‹é¢æˆ‘å°†å¯¹å…¶æ€æƒ³è¿›è¡Œä¼˜åŒ–å’Œè§£æã€‚\n\næ ¸å¿ƒæ€æƒ³ï¼š\n\n- ä¸ºæ¯ä¸ªç»“ç‚¹æ·»åŠ  `boolean` ç±»å‹çš„æ ‡è®° `isUnfold`ï¼Œè¡¨ç¤ºä¸€ä¸ªç»“ç‚¹æ˜¯å¦è¿›è¡Œã€Œå±•å¼€ã€è¿‡ã€‚æ–°ç»“ç‚¹é»˜è®¤ä¸ºã€Œæœªå±•å¼€ã€çŠ¶æ€ã€‚\n- ä¸æ–­è·å–æ ˆä¸­å…ƒç´ ï¼š\n\t- å¦‚æœå¼¹å‡ºçš„ç»“ç‚¹æœªå±•å¼€ã€‚é‚£ä¹ˆå°†å¼¹å‡ºçš„ç»“ç‚¹è‡ªèº«æ ‡è®°ä¸ºå±•å¼€ï¼Œç„¶åæŒ‰ä¸€å®šçš„é¡ºåºå°†å…¶å·¦å³ç»“ç‚¹å’Œè‡ªèº«å…¥æ ˆã€‚\n\t- å¦‚æœå¼¹å‡ºçš„ç»“ç‚¹å·²ç»å±•å¼€ã€‚é‚£ä¹ˆå°± `visit` è¯¥ç»“ç‚¹ï¼ˆåŠ å…¥ç­”æ¡ˆæ•°ç»„ï¼‰ï¼Œè¿›å…¥ä¸‹ä¸€è½®è¿­ä»£ã€‚\n\nä¸‹é¢æ¼”ç¤ºçš„æ˜¯å‰åºéå†çš„ä»£ç ã€‚\n\nç”±äº henry å°†è¿™ç§åšæ³•æˆä¸ºã€Œé¢œè‰²æ ‡è®°æ³•ã€ï¼Œè¿™é‡Œæˆ‘å°±å€Ÿã€Œé¢œè‰²ã€è¿™ä¸ªæ¦‚å¿µï¼Œæ–°å®šä¹‰å¸¦æ ‡è®°çš„ç»“ç‚¹ã€‚é¢œè‰²ç»“ç‚¹çš„åŒ…è£…ä»£ç å¦‚ä¸‹ï¼š\n\n```java\nclass ColorNode{\n    TreeNode node;\n    boolean isUnfold; // é¢œè‰²æ ‡è®°\n    ColorNode(TreeNode node){\n        this.node = node;\n    }\n    // å±•å¼€ç»“ç‚¹\n    public ColorNode unFold(){\n        this.isUnfold = true;\n        return this;\n    }\n}\n```\n\nå‰åºéå†ï¼š\n\n```java\nclass Solution {\n    public List<Integer> preorderTraversal(TreeNode root) {\n        Deque<ColorNode> stack = new LinkedList<>();\n        List<Integer> ans = new ArrayList<>();\n        if(root==null)return ans;\n        ColorNode w = new ColorNode(root);\n        stack.push(w);\n        while(stack.size()>0){\n            w = stack.pop();\n            if(w.isUnfold){\n                ans.add(w.node.val);\n                continue;\n            }\n            // å³ - å·¦ - ä¸­ ä¾æ¬¡å…¥æ ˆ\n            if(w.node.right!=null)stack.push(new ColorNode(w.node.right));\n            if(w.node.left!=null)stack.push(new ColorNode(w.node.left));\n            stack.push(w.unFold());\n        }\n        return ans;\n    }\n}\n```\n\nä¸­åºéå†ï¼š\n\n```java\nclass Solution {\n    public List<Integer> inorderTraversal(TreeNode root) {\n        Deque<ColorNode> stack = new LinkedList<>();\n        List<Integer> ans = new ArrayList<>();\n        if(root==null)return ans;\n        ColorNode w = new ColorNode(root);\n        stack.push(w);\n        while(stack.size()>0){\n            w = stack.pop();\n            if(w.isUnfold){\n                ans.add(w.node.val);\n                continue;\n            }\n            // å³ - ä¸­ - å·¦ ä¾æ¬¡å…¥æ ˆ\n            if(w.node.right!=null)stack.push(new ColorNode(w.node.right));\n            stack.push(w.unFold());\n            if(w.node.left!=null)stack.push(new ColorNode(w.node.left));\n        }\n        return ans;\n    }\n}\n```\n\nååºéå†ï¼š\n\n```java\nclass Solution {\n    public List<Integer> postorderTraversal(TreeNode root) {\n        Deque<ColorNode> stack = new LinkedList<>();\n        List<Integer> ans = new ArrayList<>();\n        if(root==null)return ans;\n        ColorNode w = new ColorNode(root);\n        stack.push(w);\n        while(stack.size()>0){\n            w = stack.pop();\n            if(w.isUnfold){\n                ans.add(w.node.val);\n                continue;\n            }\n            // ä¸­ - å³ - å·¦ ä¾æ¬¡å…¥æ ˆ\n            stack.push(w.unFold());\n            if(w.node.right!=null)stack.push(new ColorNode(w.node.right));\n            if(w.node.left!=null)stack.push(new ColorNode(w.node.left));\n        }\n        return ans;\n    }\n}\n```\n\nã€Œé¢œè‰²æ ‡è®°æ³•ã€å…¥æ ˆæ–¹å¼ç‰¹åˆ«åƒé€’å½’ï¼Œå…¶çš„åŸç†åœ¨äºæˆ‘ä»¬é€šè¿‡ä»£ç æ¨¡æ‹Ÿäº†é€’å½’çš„è¿‡ç¨‹ï¼Œåªä¸è¿‡é€’å½’æ—¶æ˜¯ç¨‹åºä¸­çš„æ–¹æ³•è°ƒç”¨æ ˆï¼Œè¿™é‡Œæ˜¯ç”¨ä»£ç æ¨¡æ‹Ÿè¿™ä¸ªæ ˆã€‚\n\n![image.png](https://cdn.gallery.uuanqin.top/img/202509262333213.webp)\n\nè‡³æ­¤ï¼Œä¹Ÿè®¸ä½ å·²ç»å¿«é€ŸæŒæ¡äº†æ›´åŠ å®¹æ˜“è®°å¾—éé€’å½’éå†äºŒå‰æ ‘çš„æ–¹å¼ã€‚æ³¨æ„åˆ°ï¼Œå…ˆåºéå†çš„å†™æ³•ä¸­è¿˜å¯ä»¥å­˜åœ¨ä¼˜åŒ–çš„åœ°æ–¹ã€‚å…ˆåºéå†ä¸­ã€Œå³ - å·¦ - ä¸­ã€ä¾æ¬¡å…¥æ ˆåï¼Œä¸‹ä¸€è½®è¿­ä»£ä¸­ï¼Œè§£æŠ˜å åçš„ã€Œä¸­ã€ä¼šé¦–å…ˆå¼¹å‡ºæ¥å¹¶åŠ å…¥ç­”æ¡ˆä¸­ï¼Œçœ‹èµ·æ¥ä¸Šä¸‹ä¸¤æ¬¡è¿­ä»£ä¸­ï¼Œå¯¹äºã€Œä¸­ã€ç»“ç‚¹çš„å…¥æ ˆå’Œå‡ºæ ˆå¯ä»¥åœ¨ä¸€æ¬¡è¿­ä»£ä¸­å®Œæˆã€‚\n\nåœ¨ä¸€æ¬¡è¿­ä»£ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè§£æŠ˜å åçš„ã€Œä¸­ã€ç»“ç‚¹ç›´æ¥åŠ å…¥ç­”æ¡ˆæ•°ç»„ä¸å†å‹æ ˆã€‚è¿™æ ·çš„è¯ï¼Œ`isUnFold` çš„ç»“ç‚¹çŠ¶æ€æ ‡è®°å°±æ²¡æ„ä¹‰äº†ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠé¢œè‰²ç»“ç‚¹é€€åŒ–ä¸ºåŸºæœ¬çš„æ ‘ç»“ç‚¹ã€‚\n\nå…ˆåºéå†ç®€åŒ–å†™æ³•ï¼š\n\n```java\nclass Solution {\n    public List<Integer> preorderTraversal(TreeNode root) {\n        Deque<TreeNode> stack = new LinkedList<>();\n        List<Integer> ans = new ArrayList<>();\n        TreeNode w = root;\n        if(w!=null)stack.push(w);\n        while(stack.size()>0){\n            w = stack.pop();\n            ans.add(w.val);\n            if(w.right!=null)stack.push(w.right);\n            // ans.add(w.val); // ä¹Ÿå¯ä»¥å†™åœ¨è¿™ï¼Œåæ­£ä¸å…¥æ ˆ\n            if(w.left!=null)stack.push(w.left);\n            // ans.add(w.val); // ä¹Ÿå¯ä»¥å†™åœ¨è¿™ï¼Œåæ­£ä¸å…¥æ ˆ\n        }\n        return ans;\n    }\n}\n```\n\n## ç¿»è½¬å‰åºéå†ç»“æœå¯å¾—åˆ°ååºéå†ç»“æœ\n\nå‰åºéå†ä¸­éå†ç»“ç‚¹çš„é¡ºåºä¸ºï¼šè®¿é—®æ ¹ - éå†å·¦å­æ ‘ - éå†å³å­æ ‘ã€‚è®¿é—®æ ¹åï¼Œæˆ‘ä»¬å¾€å¾€ä¼šå°†å­æ ‘è¿›è¡Œå‹æ ˆå¤„ç†ã€‚å¦‚æœæˆ‘ä»¬è¿›è¡Œä»¥ä¸‹è°ƒæ•´ï¼š\n\n- è°ƒæ•´å­æ ‘çš„å‹æ ˆé¡ºåºï¼šè®¿é—®æ ¹ - éå†å³å­æ ‘ - éå†å·¦å­æ ‘ã€‚ï¼ˆæ ¹ - å³ - å·¦ï¼‰\n- æŠŠæœ€ç»ˆçš„ç»“æœé€†åºæ’åˆ—ã€‚ï¼ˆå·¦ - å³ - æ ¹ï¼‰\næœ€ç»ˆå¾—åˆ°çš„éå†ç»“æœï¼Œå°±æ˜¯ååºéå†çš„ç»“æœï¼æˆ‘ä»¬å°†ã€Œæ ¹ - å·¦ - å³ã€å˜ä¸ºäº†ã€Œå·¦ - å³ - æ ¹ã€ã€‚\n\næˆ‘ä»¬å°è¯•æŠŠä¸Šä¸€å°èŠ‚æåˆ°çš„å‰åºéå†çš„å‡ ç§éé€’å½’æ–¹å¼ï¼Œä½¿ç”¨ã€Œç¿»è½¬å‰åºéå†ç»“æœã€çš„æ–¹æ³•ï¼Œå°†å‰åºéå†æ”¹é€ ä¸ºã€Œååºéå†ã€ã€‚\n\nå¸¸è§„è¿­ä»£æ–¹æ³•çš„åç»­éå†ã€Œæ ¹å³å·¦é€†åºã€ç‰ˆæœ¬ï¼š\n\n```java\nclass Solution {\n    public List<Integer> postorderTraversal(TreeNode root) {\n        Deque<TreeNode> stack = new LinkedList<>();\n        List<Integer> ans = new ArrayList<>();\n        TreeNode w = root;\n        while(w!=null || stack.size()>0){\n            while(w!=null){\n                ans.add(w.val); \n                stack.push(w);\n                w=w.right; // å˜åŠ¨ç‚¹\n            }\n            w = stack.pop();\n            w = w.left; // å˜åŠ¨ç‚¹\n        }\n        Collections.reverse(ans); // æ•°ç»„ç¿»è½¬\n        return ans;\n    }\n}\n```\n\næ¨¡æ‹Ÿæ ˆæ–¹æ³•ï¼Œååºéå†ã€Œæ ¹å³å·¦é€†åºã€ç‰ˆæœ¬ï¼š\n\n```java\nclass Solution {\n    public List<Integer> postorderTraversal(TreeNode root) {\n        Deque<TreeNode> stack = new LinkedList<>();\n        List<Integer> ans = new ArrayList<>();\n        TreeNode w = root;\n        if(w!=null)stack.push(w);\n        while(stack.size()>0){\n            w = stack.pop();\n            ans.add(w.val);\n            if(w.left!=null)stack.push(w.left); // å˜åŠ¨\n            // ans.add(w.val); // ä¹Ÿå¯ä»¥å†™åœ¨è¿™\n            if(w.right!=null)stack.push(w.right); // å˜åŠ¨\n            // ans.add(w.val); // ä¹Ÿå¯ä»¥å†™åœ¨è¿™\n        }\n        Collections.reverse(ans); // ç¿»è½¬æ•°ç»„\n        return ans;\n    }\n}\n```\n\n## çº¿ç´¢äºŒå‰æ ‘â€”â€”Morris ç®—æ³•\n\næœ¬èŠ‚ä»‹ç»ä¸€ç§å·§å¦™çš„æ–¹æ³•å¯ä»¥åœ¨çº¿æ€§æ—¶é—´å†…ï¼Œåªå ç”¨å¸¸æ•°ç©ºé—´æ¥å®ç°æ ‘çš„å‰ã€ä¸­ã€ååºéå†ã€‚è¿™ç§æ–¹æ³•ç”± Joseph M. Morris åœ¨ 1979 å¹´çš„è®ºæ–‡ã€ŒTraversing Binary Trees Simply and Cheaplyã€ä¸­é¦–æ¬¡æå‡ºï¼Œå› æ­¤è¢«ç§°ä¸º Morris éå†ã€‚\n\nMorris éå†çš„æ ¸å¿ƒæ€æƒ³æ˜¯åˆ©ç”¨æ ‘çš„å¤§é‡ç©ºé—²æŒ‡é’ˆï¼Œå®ç°ç©ºé—´å¼€é”€çš„æé™ç¼©å‡ã€‚\n\nMorris éå†å¯ä»¥å°†éé€’å½’éå†ä¸­çš„ç©ºé—´å¤æ‚åº¦é™ä¸º $O(1)$ã€‚ä»è€Œå®ç°æ—¶é—´å¤æ‚åº¦ä¸º $O(N)$ï¼Œè€Œç©ºé—´å¤æ‚åº¦ä¸º $O(1)$ çš„ç²¾å¦™ç®—æ³•ã€‚\n\n### å®ç°åŸåˆ™\n\nè®°ä½œå½“å‰èŠ‚ç‚¹ä¸º `cur`ã€‚\n\n1. å¦‚æœ `cur` æ— å·¦å­©å­ï¼Œ`cur` å‘å³ç§»åŠ¨ï¼ˆ`cur=cur.right`ï¼‰\n2. å¦‚æœ `cur` æœ‰å·¦å­©å­ï¼Œæ‰¾åˆ° `cur` å·¦å­æ ‘ä¸Šæœ€å³çš„èŠ‚ç‚¹ï¼Œè®°ä¸º `mostright`\n    1. å¦‚æœ `mostright` çš„ `right` æŒ‡é’ˆæŒ‡å‘ç©ºï¼Œè®©å…¶æŒ‡å‘ `cur`ï¼Œ`cur` å‘å·¦ç§»åŠ¨ï¼ˆ`cur=cur.left`ï¼‰\n    2. å¦‚æœ `mostright` çš„ `right` æŒ‡é’ˆæŒ‡å‘ `cur`ï¼Œè®©å…¶æŒ‡å‘ç©ºï¼Œ`cur` å‘å³ç§»åŠ¨ï¼ˆ`cur=cur.right`ï¼‰\n\nå®ç°ä»¥ä¸Šçš„åŸåˆ™ï¼Œå³å®ç°äº† Morris éå†ã€‚\n\n```C\nvoid Traversal(struct TreeNode* root, int* returnSize) {\n    struct TreeNode *cur = root, *mostright = NULL;\n\n    while (cur != NULL) {\n        mostright = cur->left;\n        if (mostright != NULL) {\n            // æ¡ä»¶Aã€æ¡ä»¶Béƒ½ä¸æ»¡è¶³ å°±ä¸€ç›´æ‰¾æœ€å³\n            while (mostright->right != NULL && mostright->right != cur)\n                mostright = mostright->right;\n                \n            // åªæ»¡è¶³æ¡ä»¶A\n            if (mostright->right == NULL) {\n                cur å‰åºéå†ç‚¹ä½ 1/2\n                mostright->right = cur;\n                cur = cur->left;\n                continue;\n            }\n            // åªæ»¡è¶³æ¡ä»¶B \n            else {\n                mostright->right = NULL;    \n                cur ä¸­åºéå†ç‚¹ä½ 1/2\n                // é¢„å‘Šï¼šæ¥ä¸‹æ¥å°†curç§»åŠ¨åˆ°å³å­æ ‘ä¸Š\n            }\n        }\n        // mostright == NULL \n        else {\n            cur å‰åºéå†ç‚¹ä½ 2/2      \n            cur ä¸­åºéå†ç‚¹ä½ 2/2\n            // é¢„å‘Šï¼šæ¥ä¸‹æ¥å°†curç§»åŠ¨åˆ°å³å­æ ‘ä¸Š\n        }\n        cur = cur->right;                // å°†curç§»åŠ¨åˆ°å³å­æ ‘ä¸Š\n    } // end while\n}\n```\n\n![image.png](https://cdn.gallery.uuanqin.top/img/20230729005245.png)\n\n![image.png](https://cdn.gallery.uuanqin.top/img/20230729005252.png)\n\n- ååºéå†å¯ä»¥é¦–å…ˆæŒ‰ç…§**æ ¹å³å·¦**çš„é¡ºåºéå†æ•´æ£µæ ‘ï¼Œæœ€åå°†ç»“æœç¿»è½¬ä¸€ä¸‹å³å¯ã€‚å› æ­¤æ­¤å†™æ³•å’Œ `Morris` å‰åºéå†ç›¸åŒï¼ŒåŒºåˆ«åœ¨äº `left` å’Œ `right` å…¨éƒ¨äº¤æ¢å³å¯ã€‚\n\n# ç»™å®šä¸¤ç§éå†é¡ºåºç¡®å®šä¸€æ£µäºŒå‰æ ‘\n\n> [!example] ğŸŸ¨ [105. ä»å‰åºä¸ä¸­åºéå†åºåˆ—æ„é€ äºŒå‰æ ‘ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/construct-binary-tree-from-preorder-and-inorder-traversal/description/)\n> ç»™å®šä¸¤ä¸ªæ•´æ•°æ•°ç»„ `preorder` å’Œ `inorder` ï¼Œå…¶ä¸­ `preorder` æ˜¯äºŒå‰æ ‘çš„å…ˆåºéå†ï¼Œ`inorder` æ˜¯åŒä¸€æ£µæ ‘çš„ä¸­åºéå†ï¼Œè¯·æ„é€ äºŒå‰æ ‘å¹¶è¿”å›å…¶æ ¹èŠ‚ç‚¹ã€‚\n\n# æœ¬æ–‡å‚è€ƒ\n\n- 408 æ€ç»´å¯¼å›¾è§£è€¦\n- ç ”ç©¶ç”Ÿè¯¾ç¨‹ã€Šç¦»æ•£æ•°å­¦ã€‹æ ‘çš„éå†ç›¸å…³å†…å®¹\n- LeetCode ç›¸å…³é¢˜ç›®é¢˜è§£\n- â­æ¨èï¼š[é¢œè‰²æ ‡è®°æ³•ï¼Œä¸€ç§é€šç”¨ä¸”ç®€æ˜çš„æ ‘éå†æ–¹æ³• - äºŒå‰æ ‘çš„ä¸­åºéå† - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/binary-tree-inorder-traversal/solutions/25220/yan-se-biao-ji-fa-yi-chong-tong-yong-qie-jian-ming/)\n- [Threaded binary tree - Wikipedia](https://en.wikipedia.org/wiki/Threaded_binary_tree)\n","categories":[{"name":"ç®—æ³•ä¸æ•°æ®ç»“æ„","api":"api/categories/ç®—æ³•ä¸æ•°æ®ç»“æ„.json"}],"tags":[{"name":"C","api":"api/tags/C.json"},{"name":"Java","api":"api/tags/Java.json"},{"name":"äºŒå‰æ ‘","api":"api/tags/äºŒå‰æ ‘.json"}]},"api":"api/posts/p/eca34904.json"}