{"title":"STM32+ESP8266+MQTT 实现阿里云温湿度监控及 LED 点灯（FreeRTOS+标准库 or HAL）","tags":["STM32","阿里云","DHT11","ESP8266","MQTT","C","HAL","FreeRTOS","STM32CubeMX","UML"],"categories":["嵌入式"],"abbrlink":"de31d8e3","date":"2024-04-05T12:49:50.000Z","cover":"https://cdn.gallery.uuanqin.top/img/20240405161606.webp","description":"一整套「嵌入式」入门练习","top_img":null,"summary":"> 标题直接 Buff 点满...... 阅读指引 如果你是 0 基础选手，建议先阅读以下内容掌握基本的 FreeRTOS 工程知识： C 语言基本语法 STM32 工程创建，详看 - [[STM32 工程的创建 - 基于寄存器或标准库]] - [[STM32 工程的创建 - 基于 HAL 库]] FreeRTOS 的移植，详看 - [[STM32 移植 FreeRTOS - 基于标准库]] - [[STM32 移植 FreeRTOS - 基于 HAL 库]] 本文主要分为三个部分，每个部分需要准备的工具如下： 阿里云物联网平台注册：需要阿里云账号。 模拟 MQTT 客户端发送与订阅消息：软件 MQTT.fx，阿里云提供的 MQTT_Password 工具。 ESP8266 固件烧录：串口助手软件，需要材料 ESP8266、USB-TTL、杜邦线若干。 软件实现：Keil 软件、STM32CubeMX（使用 HAL）、STM32、DHT11、杜邦线若干、OLED（可选）、LED 灯、ST-Link > [!hint] 阅读前的提示 > > 1. 阿里云相关产品新用户只能免费试用 1 个月。比如物联网企业版实例新用户可以试用 1 个月，但也有公共实例永久免费使用。增值服务 IoT Studio 用于绘制可视化界面，可以试用 1 个月，但其实这也不是必须的，就是提供了一个可视化界面而已。 > 2. MQTT 功能是通过固件烧录进 ESP8266 中的，不是 MQTT 协议在 FreeRTOS 上的移植。 > 3. 如果只是单纯实现温湿度监控及点灯的话，FreeRTOS 其实不是必须的。 接线图与实物图展示 > Visio 随便画的，感觉掌握不到诀窍，很难画。 > 下图有个多余连接的串口，读者可以忽略。 UML > 如果 UML 图不规范请指出哈。我感觉 UML 图我永远画不对...... 用例图： 用户通过阿里云物联网平台进行温湿度数据监测以及 LED 灯控制，此外，用户还可通过直接观察设备显示屏读取温湿度监测数据。对于通过阿里云物联网平台监测温湿度数据的用例，除了在远程平台实现可视化界面外，STM32 需实现将温湿度数据发送至远程平台的能力。无论是温湿度数据的本地展示或远程发送，都依赖于 STM32 中获取温湿度数据用例。..."}