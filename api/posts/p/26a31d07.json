{"data":{"title":"博客网站网页变灰的操作方法","slug":"博客站点维护/博客网站网页变灰的操作方法","description":"在「额外CSS」中加入代码。","date":"2022-03-26T13:44:54.000Z","updated":"2024-12-11T09:55:49.524Z","language":"zh-CN","comments":true,"url":"p/26a31d07/","cover":"https://cdn.gallery.uuanqin.top/img/1ff4099a6177a54d86cf9d60314eff95.jpeg","images":[],"content":"<h1 id=\"核心样式代码\"><a class=\"markdownIt-Anchor\" href=\"#核心样式代码\"></a> 核心样式代码</h1>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">html</span> &#123;</span><br><span class=\"line\">    -webkit-<span class=\"attribute\">filter</span>: <span class=\"built_in\">grayscale</span>(<span class=\"number\">100%</span>);</span><br><span class=\"line\">    -moz-<span class=\"attribute\">filter</span>: <span class=\"built_in\">grayscale</span>(<span class=\"number\">100%</span>);</span><br><span class=\"line\">    -ms-<span class=\"attribute\">filter</span>: <span class=\"built_in\">grayscale</span>(<span class=\"number\">100%</span>);</span><br><span class=\"line\">    -o-<span class=\"attribute\">filter</span>: <span class=\"built_in\">grayscale</span>(<span class=\"number\">100%</span>);</span><br><span class=\"line\">    <span class=\"attribute\">filter</span>: <span class=\"built_in\">grayscale</span>(<span class=\"number\">100%</span>);</span><br><span class=\"line\">    <span class=\"attribute\">filter</span>: gray;</span><br><span class=\"line\">    <span class=\"attribute\">filter</span>: progid:DXImageTransform.Microsoft.<span class=\"built_in\">BasicImage</span>(grayscale=<span class=\"number\">1</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>其实直接这样写也行：</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">html</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">filter</span>: <span class=\"built_in\">grayscale</span>(<span class=\"number\">100%</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>但是考虑到 IE 兼容性就写得比较多。</p>\n<h1 id=\"hexo\"><a class=\"markdownIt-Anchor\" href=\"#hexo\"></a> Hexo</h1>\n<h2 id=\"全站变灰\"><a class=\"markdownIt-Anchor\" href=\"#全站变灰\"></a> 全站变灰</h2>\n<p>这里以 Butterfly 主题为例。新建 css 文件，包含以上代码内容，然后在主题配置文件中 inject 即可。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">inject:</span></span><br><span class=\"line\">  <span class=\"attr\">head:</span></span><br><span class=\"line\">    <span class=\"comment\"># - &lt;link rel=&quot;stylesheet&quot; href=&quot;/xxx.css&quot;&gt;</span></span><br><span class=\"line\">    <span class=\"comment\"># 网页变灰CSS</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">&lt;link</span> <span class=\"string\">rel=&quot;stylesheet&quot;</span> <span class=\"string\">href=&quot;/css/gray.css&quot;&gt;</span></span><br></pre></td></tr></table></figure>\n<p>参考：<a href=\"https://zhuanlan.zhihu.com/p/125708748\">用代码如何实现整个网站变灰？ - 知乎 (zhihu.com)</a></p>\n<h2 id=\"指定页面变灰\"><a class=\"markdownIt-Anchor\" href=\"#指定页面变灰\"></a> 指定页面变灰</h2>\n<p>引入以下 js 文件：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> style = <span class=\"variable language_\">document</span>.<span class=\"title function_\">createElement</span>(<span class=\"string\">&#x27;style&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">let</span> graySelector = <span class=\"string\">&#x27;gray-filter&#x27;</span></span><br><span class=\"line\">style.<span class=\"title function_\">setAttribute</span>(<span class=\"string\">&#x27;type&#x27;</span>, <span class=\"string\">&#x27;text/css&#x27;</span>)</span><br><span class=\"line\">style.<span class=\"property\">textContent</span> = <span class=\"string\">`.<span class=\"subst\">$&#123;graySelector&#125;</span>&#123;</span></span><br><span class=\"line\"><span class=\"string\">  -webkit-filter: grayscale(100%);</span></span><br><span class=\"line\"><span class=\"string\">  -moz-filter: grayscale(100%);</span></span><br><span class=\"line\"><span class=\"string\">  -ms-filter: grayscale(100%);</span></span><br><span class=\"line\"><span class=\"string\">  -o-filter: grayscale(100%);</span></span><br><span class=\"line\"><span class=\"string\">  filter: grayscale(100%);</span></span><br><span class=\"line\"><span class=\"string\">  filter: gray;</span></span><br><span class=\"line\"><span class=\"string\">  filter: progid:dximagetransform.microsoft.basicimage(grayscale=1);</span></span><br><span class=\"line\"><span class=\"string\">&#125;`</span></span><br><span class=\"line\"><span class=\"variable language_\">document</span>.<span class=\"property\">head</span>.<span class=\"title function_\">appendChild</span>(style)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> root = <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&#x27;html&#x27;</span>)</span><br><span class=\"line\">url = <span class=\"variable language_\">window</span>.<span class=\"property\">location</span>.<span class=\"property\">pathname</span> <span class=\"comment\">// 取的是文件路径</span></span><br><span class=\"line\"><span class=\"title function_\">toggleClassName</span>(root,graySelector)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">toggleClassName</span>(<span class=\"params\">el,name</span>)&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(url===<span class=\"string\">&quot;/p/26a31d07/&quot;</span>) <span class=\"comment\">// 指定你要变灰的网页</span></span><br><span class=\"line\">        el.<span class=\"property\">className</span> = [el.<span class=\"property\">className</span>, name].<span class=\"title function_\">join</span>(<span class=\"string\">&#x27; &#x27;</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">inject:</span></span><br><span class=\"line\">\t<span class=\"attr\">head:</span></span><br><span class=\"line\">\t\t<span class=\"comment\"># ... ...</span></span><br><span class=\"line\">\t<span class=\"attr\">bottom:</span></span><br><span class=\"line\">\t    <span class=\"comment\"># 单页面变灰  </span></span><br><span class=\"line\">\t\t<span class=\"bullet\">-</span> <span class=\"string\">&lt;script</span> <span class=\"string\">src=&quot;/js/gray_page.js&quot;&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure>\n<p>参考：</p>\n<ul>\n<li><a href=\"https://segmentfault.com/a/1190000042999615\">前端 - 如何在网页置灰的时候，部分元素保持彩色-有意思的面试题 - 蜗牛老湿 - SegmentFault 思否</a></li>\n<li><a href=\"https://blog.csdn.net/u013288800/article/details/82787641\">使用JS获取当前页面的URL(网址信息)_js 获取url-CSDN博客</a></li>\n</ul>\n<h1 id=\"wordpress\"><a class=\"markdownIt-Anchor\" href=\"#wordpress\"></a> Wordpress</h1>\n<h2 id=\"全站变灰-2\"><a class=\"markdownIt-Anchor\" href=\"#全站变灰-2\"></a> 全站变灰</h2>\n<p>在主题自定义中，找到“额外 CSS”选项，加入上方核心代码片段。</p>\n<h2 id=\"仅让首页变灰\"><a class=\"markdownIt-Anchor\" href=\"#仅让首页变灰\"></a> 仅让首页变灰</h2>\n<p>打开仪表盘，进入外观中的主题文件编辑器中，找到 <code>functions.php</code> 文件。在其最末尾添加上：</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">nicetheme_global_greyscale</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> ( <span class=\"title function_ invoke__\">is_home</span>() )&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&lt;style type=&quot;text/css&quot;&gt;html&#123;-webkit-filter:grayscale(1);-webkit-filter:grayscale(100%);filter:grayscale(100%);-webkit-filter:gray;filter:gray;filter:progid:DXImageTransform.Microsoft.BasicImage(grayscale=1);&#125;&lt;/style&gt;&#x27;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"title function_ invoke__\">add_action</span>(<span class=\"string\">&#x27;wp_head&#x27;</span>, <span class=\"string\">&#x27;nicetheme_global_greyscale&#x27;</span>);</span><br></pre></td></tr></table></figure>\n<p>更多情形，详见以下参考链接：</p>\n<ul>\n<li><a href=\"https://cloud.tencent.com/developer/article/1944792\">wordpress 如何让网站变成灰色 - 云+社区 - 腾讯云 (tencent.com)</a></li>\n<li><a href=\"https://www.ourboke.com/1749.html\">用代码轻松实现 WordPress 网站全站变灰教程 Ourboke 联盟</a></li>\n<li><a href=\"http://www.maqingxi.com/archives/4901.html\">WordPress 网站如何实现全站变灰？ - 醒悟的凡灵 (maqingxi.com)</a></li>\n<li><a href=\"https://www.mbx0.com/4117.html\">wordpress 网站全站变灰教程 - 墨白社区 (mbx0.com)</a></li>\n</ul>\n","raw":"---\ntitle: 博客网站网页变灰的操作方法\ntags:\n  - CSS\n  - JavaScript\n  - Hexo\n  - WordPress\ndescription: 在「额外CSS」中加入代码。\ncover: 'https://cdn.gallery.uuanqin.top/img/1ff4099a6177a54d86cf9d60314eff95.jpeg'\nabbrlink: 26a31d07\ncategories:\n  - 博客站点维护\ndate: 2022-03-26 21:44:54\n---\n\n# 核心样式代码\n\n```css\nhtml {\n    -webkit-filter: grayscale(100%);\n    -moz-filter: grayscale(100%);\n    -ms-filter: grayscale(100%);\n    -o-filter: grayscale(100%);\n    filter: grayscale(100%);\n    filter: gray;\n    filter: progid:DXImageTransform.Microsoft.BasicImage(grayscale=1);\n}\n```\n\n其实直接这样写也行：\n\n```css\nhtml{\n    filter: grayscale(100%);\n}\n```\n\n但是考虑到 IE 兼容性就写得比较多。\n\n# Hexo\n\n## 全站变灰\n\n这里以 Butterfly 主题为例。新建 css 文件，包含以上代码内容，然后在主题配置文件中 inject 即可。\n\n```yaml\ninject:\n  head:\n    # - <link rel=\"stylesheet\" href=\"/xxx.css\">\n    # 网页变灰CSS\n    - <link rel=\"stylesheet\" href=\"/css/gray.css\">\n```\n\n参考：[用代码如何实现整个网站变灰？ - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/125708748)\n\n## 指定页面变灰\n\n引入以下 js 文件：\n\n```js\nlet style = document.createElement('style')\nlet graySelector = 'gray-filter'\nstyle.setAttribute('type', 'text/css')\nstyle.textContent = `.${graySelector}{\n  -webkit-filter: grayscale(100%);\n  -moz-filter: grayscale(100%);\n  -ms-filter: grayscale(100%);\n  -o-filter: grayscale(100%);\n  filter: grayscale(100%);\n  filter: gray;\n  filter: progid:dximagetransform.microsoft.basicimage(grayscale=1);\n}`\ndocument.head.appendChild(style)\n\nlet root = document.querySelector('html')\nurl = window.location.pathname // 取的是文件路径\ntoggleClassName(root,graySelector)\n\nfunction toggleClassName(el,name){\n    if(url===\"/p/26a31d07/\") // 指定你要变灰的网页\n        el.className = [el.className, name].join(' ')\n}\n```\n\n```yaml\ninject:\n\thead:\n\t\t# ... ...\n\tbottom:\n\t    # 单页面变灰  \n\t\t- <script src=\"/js/gray_page.js\"></script>\n```\n\n参考：\n\n- [前端 - 如何在网页置灰的时候，部分元素保持彩色-有意思的面试题 - 蜗牛老湿 - SegmentFault 思否](https://segmentfault.com/a/1190000042999615)\n- [使用JS获取当前页面的URL(网址信息)_js 获取url-CSDN博客](https://blog.csdn.net/u013288800/article/details/82787641)\n\n# Wordpress\n\n## 全站变灰\n\n在主题自定义中，找到“额外 CSS”选项，加入上方核心代码片段。\n\n## 仅让首页变灰\n\n打开仪表盘，进入外观中的主题文件编辑器中，找到 `functions.php` 文件。在其最末尾添加上：\n\n```php\nfunction nicetheme_global_greyscale() {\n    if ( is_home() ){\n        echo '<style type=\"text/css\">html{-webkit-filter:grayscale(1);-webkit-filter:grayscale(100%);filter:grayscale(100%);-webkit-filter:gray;filter:gray;filter:progid:DXImageTransform.Microsoft.BasicImage(grayscale=1);}</style>';\n    }\n}\nadd_action('wp_head', 'nicetheme_global_greyscale');\n```\n\n更多情形，详见以下参考链接：\n\n- [wordpress 如何让网站变成灰色 - 云+社区 - 腾讯云 (tencent.com)](https://cloud.tencent.com/developer/article/1944792)\n- [用代码轻松实现 WordPress 网站全站变灰教程 Ourboke 联盟](https://www.ourboke.com/1749.html)\n- [WordPress 网站如何实现全站变灰？ - 醒悟的凡灵 (maqingxi.com)](http://www.maqingxi.com/archives/4901.html)\n- [wordpress 网站全站变灰教程 - 墨白社区 (mbx0.com)](https://www.mbx0.com/4117.html)\n","categories":[{"name":"博客站点维护","api":"api/categories/博客站点维护.json"}],"tags":[{"name":"CSS","api":"api/tags/CSS.json"},{"name":"JavaScript","api":"api/tags/JavaScript.json"},{"name":"Hexo","api":"api/tags/Hexo.json"},{"name":"WordPress","api":"api/tags/WordPress.json"}]},"api":"api/posts/p/26a31d07.json"}