{"data":{"title":"è´£ä»»é“¾æ¨¡å¼â€”â€”æ¨å¸è´£ä»»","slug":"é«˜è´¨é‡ä»£ç åŠè®¾è®¡æ¨¡å¼/è´£ä»»é“¾æ¨¡å¼â€”â€”æ¨å¸è´£ä»»","description":"é“¾å¼å¤„ç†è´£ä»»","date":"2025-08-06T16:35:06.000Z","updated":"2025-08-06T16:39:20.776Z","language":"zh-CN","comments":true,"url":"p/c4f5b558/","cover":"https://cdn.gallery.uuanqin.top/img/202508070037052.webp","images":[],"content":"<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/202410090024663.webp\" alt=\"image.png\" width=\"475px\" /></p>\n\n<div class=\"callout\" data-callout=\"tldr\">\n<div class=\"callout-title\">\n<div class=\"callout-title-icon\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-clipboard-list\"><rect width=\"8\" height=\"4\" x=\"8\" y=\"2\" rx=\"1\" ry=\"1\"/><path d=\"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\"/><path d=\"M12 11h4\"/><path d=\"M12 16h4\"/><path d=\"M8 11h.01\"/><path d=\"M8 16h.01\"/></svg>\n</div>\n<div class=\"callout-title-inner\">è´£ä»»é“¾æ¨¡å¼ Chain Of Responsibility Design Pattern</div>\n</div>\n<div class=\"callout-content\"><p>Avoid coupling the sender of a request to its receiver by giving more than one object a chance to handle the request. Chain the receiving objects and pass the request along the chain until an object handles it.â€”â€”GoF<br />\nå°†è¯·æ±‚çš„å‘é€å’Œæ¥æ”¶è§£è€¦ï¼Œè®©å¤šä¸ªæ¥æ”¶å¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¿™ä¸ªè¯·æ±‚ã€‚å°†è¿™äº›æ¥æ”¶å¯¹è±¡ä¸²æˆä¸€æ¡é“¾ï¼Œå¹¶æ²¿ç€è¿™æ¡é“¾ä¼ é€’è¿™ä¸ªè¯·æ±‚ï¼Œç›´åˆ°é“¾ä¸Šçš„æŸä¸ªæ¥æ”¶å¯¹è±¡èƒ½å¤Ÿå¤„ç†å®ƒä¸ºæ­¢ã€‚</p>\n</div></div><p>å°†å¤šä¸ªå¯¹è±¡ç»„æˆä¸€æ¡èŒè´£é“¾ï¼Œç„¶åæŒ‰ç…§å®ƒä»¬åœ¨èŒè´£é“¾ä¸Šçš„é¡ºåºä¸€ä¸ªä¸€ä¸ªåœ°æ‰¾å‡ºåˆ°åº•åº”è¯¥è°æ¥è´Ÿè´£å¤„ç†ã€‚ä½¿ç”¨è´£ä»»é“¾æ¨¡å¼å¯ä»¥å¼±åŒ–â€œè¯·æ±‚æ–¹â€å’Œâ€œå¤„ç†æ–¹â€ä¹‹é—´çš„å…³è”å…³ç³»ã€‚</p>\n<p>ç™»åœºè§’è‰²ï¼š</p>\n<ul>\n<li>Handlerï¼ˆå¤„ç†è€…ï¼‰ï¼šHandler è§’è‰²å®šä¹‰äº†å¤„ç†è¯·æ±‚çš„æ¥å£ï¼ˆAPIï¼‰ã€‚Handler è§’è‰²çŸ¥é“â€œä¸‹ä¸€ä¸ªå¤„ç†è€…â€æ˜¯è°ï¼Œå¦‚æœè‡ªå·±æ— æ³•å¤„ç†è¯·æ±‚ï¼Œå®ƒä¼šå°†è¯·æ±‚è½¬ç»™â€œä¸‹ä¸€ä¸ªå¤„ç†è€…â€ã€‚å½“ç„¶ï¼Œâ€œä¸‹ä¸€ä¸ªå¤„ç†è€…â€ä¹Ÿæ˜¯ Handler è§’è‰²ã€‚</li>\n<li>ConcreteHandlerï¼ˆå…·ä½“çš„å¤„ç†è€…ï¼‰ï¼šConcreteHandler è§’è‰²æ˜¯å¤„ç†è¯·æ±‚çš„å…·ä½“è§’è‰²ã€‚</li>\n<li>Clientï¼ˆè¯·æ±‚è€…ï¼‰ï¼šClient è§’è‰²æ˜¯å‘ç¬¬ä¸€ä¸ª ConcreteHandler è§’è‰²å‘é€è¯·æ±‚çš„è§’è‰²ã€‚</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">class Client</span><br><span class=\"line\">abstract class Handler&#123;</span><br><span class=\"line\">\tnext</span><br><span class=\"line\">\t&#123;method&#125; &#123;abstract&#125; request</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">class ConcreteHandler1&#123;</span><br><span class=\"line\">\t&#123;method&#125; request</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">class ConcreteHandler2&#123;</span><br><span class=\"line\">\t&#123;method&#125; request</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">Client -&gt; Handler : Request &gt;</span><br><span class=\"line\">Handler o--&gt; Handler</span><br><span class=\"line\">Handler &lt;|-- ConcreteHandler1</span><br><span class=\"line\">Handler &lt;|-- ConcreteHandler2</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><code>request()</code> æ–¹æ³•ä¸­ä¸€èˆ¬å†™æ˜è‡ªå·±çš„å¤„ç†é€»è¾‘ï¼Œä»¥åŠè°ƒç”¨å­—æ®µ <code>next</code> å»å¤„ç†çš„é€»è¾‘ã€‚å…·ä½“ä»£ç è¯¦çœ‹æ¥ä¸‹æ¥çš„ä¾‹å­ã€‚</p>\n</blockquote>\n<p>ç‰¹ç‚¹ï¼š</p>\n<ul>\n<li>å¼±åŒ–äº†å‘å‡ºè¯·æ±‚çš„äººå’Œå¤„ç†è¯·æ±‚çš„äººä¹‹é—´çš„å…³ç³»ã€‚ã€Œå‘å‡ºè¯·æ±‚çš„äººã€ä¸éœ€è¦çŸ¥é“å¤„ç†è¯·æ±‚çš„äººå„è‡ªè´£ä»»åˆ†æ‹…æƒ…å†µã€‚</li>\n<li>åŒæ¨¡æ¿æ¨¡å¼ã€ç­–ç•¥æ¨¡å¼ä¸€æ ·ï¼Œè´£ä»»é“¾æ¨¡å¼åˆ©äºä»£ç çš„å¤ç”¨å’Œæ‰©å±•\n<ul>\n<li>é…ç½®çµæ´»ï¼šå¯ä»¥åŠ¨æ€æ”¹å˜èŒè´£é“¾</li>\n<li>åº”å¯¹ä»£ç å¤æ‚æ€§ï¼šæ¯ä¸ªæ¨¡å—ä¸“æ³¨äºè‡ªå·±çš„å·¥ä½œ</li>\n</ul>\n</li>\n</ul>\n<p>ç¼ºç‚¹ï¼š</p>\n<ul>\n<li>æ¨å¸è¯·æ±‚å¯èƒ½ä¼šå¯¼è‡´å¤„ç†å»¶è¿Ÿã€‚éœ€è¦è‡ªå·±æƒè¡¡ã€‚</li>\n</ul>\n<p>ç›¸å…³çš„è®¾è®¡æ¨¡å¼ï¼š</p>\n<ul>\n<li>Composite æ¨¡å¼ (ç¬¬ 11 ç« )ï¼šHandler è§’è‰²ç»å¸¸ä¼šä½¿ç”¨ Composite æ¨¡å¼ã€‚</li>\n<li>Command æ¨¡å¼ (ç¬¬ 23 ç« )ï¼šæœ‰æ—¶ä¼šä½¿ç”¨ Command æ¨¡å¼å‘ Handler è§’è‰²å‘é€è¯·æ±‚ã€‚</li>\n</ul>\n<h1 id=\"ä¾‹å­æ„é€ è´£ä»»é“¾çš„ç»†èŠ‚\"><a class=\"markdownIt-Anchor\" href=\"#ä¾‹å­æ„é€ è´£ä»»é“¾çš„ç»†èŠ‚\"></a> ä¾‹å­â€”â€”æ„é€ è´£ä»»é“¾çš„ç»†èŠ‚</h1>\n<table>\n<thead>\n<tr>\n<th>åå­—</th>\n<th>è¯´æ˜</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Trouble</td>\n<td>è¡¨ç¤ºå‘ç”Ÿçš„é—®é¢˜çš„ç±»ã€‚å®ƒå¸¦æœ‰é—®é¢˜ç¼–å·ï¼ˆnumberï¼‰</td>\n</tr>\n<tr>\n<td>Support</td>\n<td>ç”¨æ¥è§£å†³é—®é¢˜çš„æŠ½è±¡ç±»</td>\n</tr>\n<tr>\n<td>NoSupport</td>\n<td>ç”¨æ¥è§£å†³é—®é¢˜çš„å…·ä½“ç±» (æ°¸è¿œâ€œä¸å¤„ç†é—®é¢˜â€)</td>\n</tr>\n<tr>\n<td>LimitSupport</td>\n<td>ç”¨æ¥è§£å†³é—®é¢˜çš„å…·ä½“ç±»ï¼ˆä»…è§£å†³ç¼–å·å°äºæŒ‡å®šç¼–å·çš„é—®é¢˜ï¼‰</td>\n</tr>\n<tr>\n<td>Specialsupport</td>\n<td>ç”¨æ¥è§£å†³é—®é¢˜çš„å…·ä½“ç±»ï¼ˆä»…è§£å†³æŒ‡å®šç¼–å·çš„é—®é¢˜ï¼‰</td>\n</tr>\n<tr>\n<td>Main</td>\n<td>åˆ¶ä½œ <code>support</code> çš„èŒè´£é“¾ï¼Œåˆ¶é€ é—®é¢˜å¹¶æµ‹è¯•ç¨‹åºè¡Œä¸º</td>\n</tr>\n</tbody>\n</table>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">class Main</span><br><span class=\"line\">abstract class Support&#123;</span><br><span class=\"line\">\t- name</span><br><span class=\"line\">\t- next</span><br><span class=\"line\">\t+ &#123;method&#125; support</span><br><span class=\"line\">\t+ &#123;method&#125; setNext</span><br><span class=\"line\">\t# &#123;method&#125; &#123;abstract&#125; resolve</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">class NoSupport&#123;</span><br><span class=\"line\">\t# &#123;method&#125; resolve</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">class LimitSupport&#123;</span><br><span class=\"line\">\t- limit</span><br><span class=\"line\">\t# &#123;method&#125; resolve</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">class SpecialSupport&#123;</span><br><span class=\"line\">\t- number</span><br><span class=\"line\">\t# &#123;method&#125; resolve</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">Main -&gt; Support : Request &gt;</span><br><span class=\"line\">Support o--&gt; Support</span><br><span class=\"line\">Support &lt;|-- NoSupport</span><br><span class=\"line\">Support &lt;|-- LimitSupport</span><br><span class=\"line\">Support &lt;|-- SpecialSupport</span><br></pre></td></tr></table></figure>\n<p>ä¸‹é¢ç»™å‡ºå®Œæ•´ä»£ç æ¡ˆä¾‹ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Trouble</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"type\">int</span> number; <span class=\"comment\">// é—®é¢˜ç¼–å·</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">Trouble</span><span class=\"params\">(<span class=\"type\">int</span> number)</span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.number = number;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> <span class=\"title function_\">getNumber</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> number;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String <span class=\"title function_\">toString</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;[é—®é¢˜ç¼–å·ï¼š&quot;</span>+number+<span class=\"string\">&quot;]&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Support æŠ½è±¡ç±»ä»£ç å¦‚ä¸‹ã€‚<code>public void support(Trouble trouble)</code> æ–¹æ³•é‡‡ç”¨äº†æ¨¡æ¿æ¨¡å¼ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Support æŠ½è±¡ç±»</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Support</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> String name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Support next; <span class=\"comment\">// è¦æ¨å¸ç»™çš„å¯¹è±¡ã€‚é€šè¿‡setNextå‡½æ•°è®¾ç½®</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">support</span><span class=\"params\">(Trouble trouble)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (resolve(trouble)) &#123;</span><br><span class=\"line\">            done(trouble);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (next != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">            next.support(trouble); <span class=\"comment\">// è§£å†³ä¸äº†é—®é¢˜å°±é€’å½’è°ƒç”¨é“¾æ¡</span></span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            fail(trouble);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// é‡è¦æŠ€å·§</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Support <span class=\"title function_\">setNext</span><span class=\"params\">(Support next)</span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.next = next;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> next;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">setNextButNotReturn</span><span class=\"params\">(Support next)</span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.next = next;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">Support</span><span class=\"params\">(String name)</span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.name = name;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String <span class=\"title function_\">toString</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;[&quot;</span> + name + <span class=\"string\">&quot;]&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"keyword\">abstract</span> <span class=\"type\">boolean</span> <span class=\"title function_\">resolve</span><span class=\"params\">(Trouble trouble)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">protected</span>  <span class=\"keyword\">void</span> <span class=\"title function_\">done</span> <span class=\"params\">(Trouble trouble)</span>&#123;</span><br><span class=\"line\">        System.out.println(trouble+<span class=\"string\">&quot; å·²ç»è¢« &quot;</span>+<span class=\"built_in\">this</span>+<span class=\"string\">&quot;è§£å†³&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">protected</span>  <span class=\"keyword\">void</span> <span class=\"title function_\">fail</span> <span class=\"params\">(Trouble trouble)</span>&#123;</span><br><span class=\"line\">        System.out.println(trouble+<span class=\"string\">&quot; æ— æ³•è¢« &quot;</span>+<span class=\"built_in\">this</span>+<span class=\"string\">&quot;è§£å†³&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>Support</code> çš„å®ç°ç±»ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Support çš„å®ç°ç±»</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">NoSupport</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">Support</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">NoSupport</span><span class=\"params\">(String name)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">super</span>(name);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"type\">boolean</span> <span class=\"title function_\">resolve</span><span class=\"params\">(Trouble trouble)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">LimitSupport</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">Support</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"type\">int</span> limit;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">LimitSupport</span><span class=\"params\">(String name, <span class=\"type\">int</span> limit)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">super</span>(name);</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.limit = limit;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"type\">boolean</span> <span class=\"title function_\">resolve</span><span class=\"params\">(Trouble trouble)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> trouble.getNumber() &lt; limit;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">SpecialSupport</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">Support</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"type\">int</span> number;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">SpecialSupport</span><span class=\"params\">(String name, <span class=\"type\">int</span> number)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">super</span>(name);</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.number = number;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"type\">boolean</span> <span class=\"title function_\">resolve</span><span class=\"params\">(Trouble trouble)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> trouble.getNumber() == number;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>è°ƒç”¨æ–¹ä»£ç ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">\t<span class=\"type\">Support</span> <span class=\"variable\">s1</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">NoSupport</span>(<span class=\"string\">&quot;ä¸äºˆé€šè¿‡æ–¹æ¡ˆ&quot;</span>);</span><br><span class=\"line\">\t<span class=\"type\">Support</span> <span class=\"variable\">s2</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">LimitSupport</span>(<span class=\"string\">&quot;ä¸åŠæ ¼æ–¹æ¡ˆ&quot;</span>,<span class=\"number\">60</span>);</span><br><span class=\"line\">\t<span class=\"type\">Support</span> <span class=\"variable\">s3</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">SpecialSupport</span>(<span class=\"string\">&quot;æ»¡åˆ†æ–¹æ¡ˆ&quot;</span>,<span class=\"number\">100</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// è´£ä»»é“¾å½¢æˆs1-&gt;s2-&gt;s3ï¼š</span></span><br><span class=\"line\">\ts1.setNext(s2).setNext(s3);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// ç”¨è¿™æ¡é“¾å¤„ç†ä»¥ä¸‹ 3 ä¸ªé—®é¢˜ï¼š</span></span><br><span class=\"line\">\ts1.support(<span class=\"keyword\">new</span> <span class=\"title class_\">Trouble</span>(<span class=\"number\">13</span>)); <span class=\"comment\">// [é—®é¢˜ç¼–å·ï¼š13] å·²ç»è¢« [ä¸åŠæ ¼æ–¹æ¡ˆ]è§£å†³</span></span><br><span class=\"line\">\ts1.support(<span class=\"keyword\">new</span> <span class=\"title class_\">Trouble</span>(<span class=\"number\">64</span>)); <span class=\"comment\">// [é—®é¢˜ç¼–å·ï¼š64] æ— æ³•è¢« [æ»¡åˆ†æ–¹æ¡ˆ]è§£å†³</span></span><br><span class=\"line\">\ts1.support(<span class=\"keyword\">new</span> <span class=\"title class_\">Trouble</span>(<span class=\"number\">100</span>));<span class=\"comment\">// [é—®é¢˜ç¼–å·ï¼š100] å·²ç»è¢« [æ»¡åˆ†æ–¹æ¡ˆ]è§£å†³</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>é‡è¦æŠ€å·§ï¼š<code>Support</code> æŠ½è±¡ç±»ä¸­ <code>setNext()</code> é™¤äº†è®¾ç½® next å¤–ï¼Œè¿˜ <code>return next;</code>ã€‚è¿™æ ·å¯ä»¥æœ‰</p>\n<p><code>h1.setNext(h2).setNext(h3).setNext(h4).setNext(h5)</code> è¿™æ ·çš„è´£ä»»é“¾æ„é€ ã€‚</p>\n\n<div class=\"callout\" data-callout=\"warning\">\n<div class=\"callout-title\">\n<div class=\"callout-title-icon\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-alert-triangle\"><path d=\"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z\"/><path d=\"M12 9v4\"/><path d=\"M12 17h.01\"/></svg>\n</div>\n<div class=\"callout-title-inner\">è´£ä»»é“¾æ„é€ çš„é”™è¯¯ç¤ºä¾‹</div>\n</div>\n<div class=\"callout-content\"><p>è¯·æ³¨æ„ï¼Œè¿™ç§è´£ä»»é“¾æ„é€ æ–¹å¼æ˜¯<strong>é”™è¯¯çš„</strong>ï¼š<code>h1.setNext(h2.setNext(h3.setNext(h4.setNext(h5))));</code> è¿™ä¼šå¯¼è‡´æ„é€ è¿™æ ·ä¸€ä¸ªè´£ä»»é“¾ï¼š<code>h1-&gt;h5</code>ï¼ˆæƒ³ä¸€æƒ³ä¸ºä»€ä¹ˆï¼Ÿï¼‰</p>\n</div></div><p>å¦‚æœ <code>setNext()</code> ä¸­å•çº¯è®¾ç½® <code>next</code>ï¼Œä¸ <code>return next;</code> çš„è¯ï¼Œè´£ä»»é“¾æ„é€ æ–¹å¼åªèƒ½æ˜¯è¿™ä¸ªæ ·å­ï¼š <code>h1.setNext(h2); h2.setNext(h3)</code> â€¦</p>\n<h1 id=\"å˜ä½“å¼•å…¥è´£ä»»é“¾æ„é€ ç±»\"><a class=\"markdownIt-Anchor\" href=\"#å˜ä½“å¼•å…¥è´£ä»»é“¾æ„é€ ç±»\"></a> å˜ä½“ï¼šå¼•å…¥è´£ä»»é“¾æ„é€ ç±»</h1>\n<p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨ main å‡½æ•°ä¸­ä½¿ç”¨è´£ä»»é“¾çš„å¤´ç»“ç‚¹ <code>s1</code> ä¸æ–­è¿›è¡Œæ„é€ ã€‚æˆ‘ä»¬å¯ä»¥å¼•ç”¨æ–°çš„ç±» <code>SupportChain</code> æ¥ç®¡ç†è¿™ä¸ªé“¾æ¡ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">SupportChain</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// è®°å½•é“¾æ¡çš„é¦–å°¾ç»“ç‚¹</span></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"type\">Support</span> <span class=\"variable\">head</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"type\">Support</span> <span class=\"variable\">tail</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">addSupport</span><span class=\"params\">(Support support)</span> &#123;</span><br><span class=\"line\">    support.setNext(<span class=\"literal\">null</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (head == <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      head = support;</span><br><span class=\"line\">      tail = support;</span><br><span class=\"line\">      <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    tail.setNext(support);</span><br><span class=\"line\">    tail = support;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">support</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (head != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      head.handle();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">\t<span class=\"type\">SupportChain</span> <span class=\"variable\">chain</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">SupportChain</span>();</span><br><span class=\"line\">\tchain.addSupport(<span class=\"keyword\">new</span> <span class=\"title class_\">LimitSupport</span>(<span class=\"string\">&quot;ä¸åŠæ ¼æ–¹æ¡ˆ&quot;</span>,<span class=\"number\">60</span>));</span><br><span class=\"line\">\tchain.addSupport(<span class=\"keyword\">new</span> <span class=\"title class_\">SpecialSupport</span>(<span class=\"string\">&quot;æ»¡åˆ†æ–¹æ¡ˆ&quot;</span>,<span class=\"number\">100</span>));</span><br><span class=\"line\">\tchain.support();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æˆ‘ä»¬è¿˜å¯ä»¥ç”¨æ•°ç»„è€Œéé“¾è¡¨æ¥ä¿å­˜æ‰€æœ‰çš„å¤„ç†å™¨ï¼Œç„¶ååœ¨ <code>SupportChain</code> ä¸­ä¾æ¬¡è°ƒç”¨å³å¯ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">SupportChain</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> List&lt;Support&gt; supports = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">addSupport</span><span class=\"params\">(Support support)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.supports.add(support);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">support</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (Support support: supports) &#123;</span><br><span class=\"line\">      <span class=\"type\">boolean</span> <span class=\"variable\">isSoveled</span> <span class=\"operator\">=</span> support.support();</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (isSoveled) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"å˜ä½“ä¸­é€”ä¸ç»ˆæ­¢é“¾æ¡\"><a class=\"markdownIt-Anchor\" href=\"#å˜ä½“ä¸­é€”ä¸ç»ˆæ­¢é“¾æ¡\"></a> å˜ä½“ï¼šä¸­é€”ä¸ç»ˆæ­¢é“¾æ¡</h1>\n<p>åœ¨ GoF ç»™å‡ºçš„å®šä¹‰ä¸­ï¼Œå¦‚æœå¤„ç†å™¨é“¾ä¸Šçš„æŸä¸ªå¤„ç†å™¨èƒ½å¤Ÿå¤„ç†è¿™ä¸ªè¯·æ±‚ï¼Œå°±ä¸ä¼šç»§ç»­å¾€ä¸‹ä¼ é€’è¯·æ±‚ã€‚å®é™…ä¸ŠèŒè´£é“¾æ¨¡å¼è¿˜æœ‰ä¸€ç§å˜ä½“ï¼šè¯·æ±‚ä¼šè¢«æ‰€æœ‰çš„å¤„ç†å™¨éƒ½å¤„ç†ä¸€éï¼Œä¸å­˜åœ¨ä¸­é€”ç»ˆæ­¢çš„æƒ…å†µã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Support æŠ½è±¡ç±»</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Support</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> String name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Support next; <span class=\"comment\">// è¦æ¨å¸ç»™çš„å¯¹è±¡ã€‚é€šè¿‡setNextå‡½æ•°è®¾ç½®</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">support</span><span class=\"params\">(Trouble trouble)</span> &#123;</span><br><span class=\"line\">\t    resolve(trouble);</span><br><span class=\"line\">\t    <span class=\"comment\">// æ— è§†ç»“æœï¼Œç»§ç»­å¤„ç†</span></span><br><span class=\"line\">\t    <span class=\"keyword\">if</span> (next != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">            next.support(trouble);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// çœç•¥å…¶ä»–ä»£ç </span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"æœ¬æ–‡å‚è€ƒ\"><a class=\"markdownIt-Anchor\" href=\"#æœ¬æ–‡å‚è€ƒ\"></a> æœ¬æ–‡å‚è€ƒ</h1>\n<ul>\n<li>ã€Šå›¾è§£è®¾è®¡æ¨¡å¼ã€‹ç¬¬ 14 ç« </li>\n<li>æœ¬ç§‘ç”Ÿè¯¾ç¨‹ç¬”è®°ã€Šç¨‹åºè®¾è®¡ä¸­çº§å®è·µï¼†è®¾è®¡æ¨¡å¼ã€‹ - TJU ğŸâš±ï¸</li>\n<li><a href=\"https://gitee.com/buxsren/design-pattern-books/blob/master/docs/200786.md\">æå®¢æ—¶é—´ä¸“æ  - è®¾è®¡æ¨¡å¼ä¹‹ç¾ - ç‹äº‰</a></li>\n</ul>\n","raw":"---\ntitle: è´£ä»»é“¾æ¨¡å¼â€”â€”æ¨å¸è´£ä»»\ntags:\n  - è®¾è®¡æ¨¡å¼\n  - Java\ncover: 'https://cdn.gallery.uuanqin.top/img/202508070037052.webp'\ndescription: é“¾å¼å¤„ç†è´£ä»»\nkatex: false\ncategories:\n  - é«˜è´¨é‡ä»£ç åŠè®¾è®¡æ¨¡å¼\nabbrlink: c4f5b558\ndate: 2025-08-07 00:35:06\ntop_img:\n---\n\n![image.png|475](https://cdn.gallery.uuanqin.top/img/202410090024663.webp)\n\n> [!tldr] è´£ä»»é“¾æ¨¡å¼ Chain Of Responsibility Design Pattern\n> Avoid coupling the sender of a request to its receiver by giving more than one object a chance to handle the request. Chain the receiving objects and pass the request along the chain until an object handles it.â€”â€”GoF\n> å°†è¯·æ±‚çš„å‘é€å’Œæ¥æ”¶è§£è€¦ï¼Œè®©å¤šä¸ªæ¥æ”¶å¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¿™ä¸ªè¯·æ±‚ã€‚å°†è¿™äº›æ¥æ”¶å¯¹è±¡ä¸²æˆä¸€æ¡é“¾ï¼Œå¹¶æ²¿ç€è¿™æ¡é“¾ä¼ é€’è¿™ä¸ªè¯·æ±‚ï¼Œç›´åˆ°é“¾ä¸Šçš„æŸä¸ªæ¥æ”¶å¯¹è±¡èƒ½å¤Ÿå¤„ç†å®ƒä¸ºæ­¢ã€‚\n\nå°†å¤šä¸ªå¯¹è±¡ç»„æˆä¸€æ¡èŒè´£é“¾ï¼Œç„¶åæŒ‰ç…§å®ƒä»¬åœ¨èŒè´£é“¾ä¸Šçš„é¡ºåºä¸€ä¸ªä¸€ä¸ªåœ°æ‰¾å‡ºåˆ°åº•åº”è¯¥è°æ¥è´Ÿè´£å¤„ç†ã€‚ä½¿ç”¨è´£ä»»é“¾æ¨¡å¼å¯ä»¥å¼±åŒ–â€œè¯·æ±‚æ–¹â€å’Œâ€œå¤„ç†æ–¹â€ä¹‹é—´çš„å…³è”å…³ç³»ã€‚\n\nç™»åœºè§’è‰²ï¼š\n\n- Handlerï¼ˆå¤„ç†è€…ï¼‰ï¼šHandler è§’è‰²å®šä¹‰äº†å¤„ç†è¯·æ±‚çš„æ¥å£ï¼ˆAPIï¼‰ã€‚Handler è§’è‰²çŸ¥é“â€œä¸‹ä¸€ä¸ªå¤„ç†è€…â€æ˜¯è°ï¼Œå¦‚æœè‡ªå·±æ— æ³•å¤„ç†è¯·æ±‚ï¼Œå®ƒä¼šå°†è¯·æ±‚è½¬ç»™â€œä¸‹ä¸€ä¸ªå¤„ç†è€…â€ã€‚å½“ç„¶ï¼Œâ€œä¸‹ä¸€ä¸ªå¤„ç†è€…â€ä¹Ÿæ˜¯ Handler è§’è‰²ã€‚\n- ConcreteHandlerï¼ˆå…·ä½“çš„å¤„ç†è€…ï¼‰ï¼šConcreteHandler è§’è‰²æ˜¯å¤„ç†è¯·æ±‚çš„å…·ä½“è§’è‰²ã€‚\n- Clientï¼ˆè¯·æ±‚è€…ï¼‰ï¼šClient è§’è‰²æ˜¯å‘ç¬¬ä¸€ä¸ª ConcreteHandler è§’è‰²å‘é€è¯·æ±‚çš„è§’è‰²ã€‚\n\n```plantuml\nclass Client\nabstract class Handler{\n\tnext\n\t{method} {abstract} request\n}\n\nclass ConcreteHandler1{\n\t{method} request\n}\n\nclass ConcreteHandler2{\n\t{method} request\n}\n\nClient -> Handler : Request >\nHandler o--> Handler\nHandler <|-- ConcreteHandler1\nHandler <|-- ConcreteHandler2\n```\n\n> `request()` æ–¹æ³•ä¸­ä¸€èˆ¬å†™æ˜è‡ªå·±çš„å¤„ç†é€»è¾‘ï¼Œä»¥åŠè°ƒç”¨å­—æ®µ `next` å»å¤„ç†çš„é€»è¾‘ã€‚å…·ä½“ä»£ç è¯¦çœ‹æ¥ä¸‹æ¥çš„ä¾‹å­ã€‚\n\nç‰¹ç‚¹ï¼š\n\n- å¼±åŒ–äº†å‘å‡ºè¯·æ±‚çš„äººå’Œå¤„ç†è¯·æ±‚çš„äººä¹‹é—´çš„å…³ç³»ã€‚ã€Œå‘å‡ºè¯·æ±‚çš„äººã€ä¸éœ€è¦çŸ¥é“å¤„ç†è¯·æ±‚çš„äººå„è‡ªè´£ä»»åˆ†æ‹…æƒ…å†µã€‚\n- åŒæ¨¡æ¿æ¨¡å¼ã€ç­–ç•¥æ¨¡å¼ä¸€æ ·ï¼Œè´£ä»»é“¾æ¨¡å¼åˆ©äºä»£ç çš„å¤ç”¨å’Œæ‰©å±•\n\t- é…ç½®çµæ´»ï¼šå¯ä»¥åŠ¨æ€æ”¹å˜èŒè´£é“¾\n\t- åº”å¯¹ä»£ç å¤æ‚æ€§ï¼šæ¯ä¸ªæ¨¡å—ä¸“æ³¨äºè‡ªå·±çš„å·¥ä½œ\n\nç¼ºç‚¹ï¼š\n\n- æ¨å¸è¯·æ±‚å¯èƒ½ä¼šå¯¼è‡´å¤„ç†å»¶è¿Ÿã€‚éœ€è¦è‡ªå·±æƒè¡¡ã€‚\n\nç›¸å…³çš„è®¾è®¡æ¨¡å¼ï¼š\n\n- Composite æ¨¡å¼ (ç¬¬ 11 ç« )ï¼šHandler è§’è‰²ç»å¸¸ä¼šä½¿ç”¨ Composite æ¨¡å¼ã€‚\n- Command æ¨¡å¼ (ç¬¬ 23 ç« )ï¼šæœ‰æ—¶ä¼šä½¿ç”¨ Command æ¨¡å¼å‘ Handler è§’è‰²å‘é€è¯·æ±‚ã€‚\n\n# ä¾‹å­â€”â€”æ„é€ è´£ä»»é“¾çš„ç»†èŠ‚\n\n| åå­—             | è¯´æ˜                            |\n| -------------- | ----------------------------- |\n| Trouble        | è¡¨ç¤ºå‘ç”Ÿçš„é—®é¢˜çš„ç±»ã€‚å®ƒå¸¦æœ‰é—®é¢˜ç¼–å·ï¼ˆnumberï¼‰     |\n| Support        | ç”¨æ¥è§£å†³é—®é¢˜çš„æŠ½è±¡ç±»                    |\n| NoSupport      | ç”¨æ¥è§£å†³é—®é¢˜çš„å…·ä½“ç±» (æ°¸è¿œâ€œä¸å¤„ç†é—®é¢˜â€)        |\n| LimitSupport   | ç”¨æ¥è§£å†³é—®é¢˜çš„å…·ä½“ç±»ï¼ˆä»…è§£å†³ç¼–å·å°äºæŒ‡å®šç¼–å·çš„é—®é¢˜ï¼‰    |\n| Specialsupport | ç”¨æ¥è§£å†³é—®é¢˜çš„å…·ä½“ç±»ï¼ˆä»…è§£å†³æŒ‡å®šç¼–å·çš„é—®é¢˜ï¼‰        |\n| Main           | åˆ¶ä½œ `support` çš„èŒè´£é“¾ï¼Œåˆ¶é€ é—®é¢˜å¹¶æµ‹è¯•ç¨‹åºè¡Œä¸º |\n\n```plantuml\nclass Main\nabstract class Support{\n\t- name\n\t- next\n\t+ {method} support\n\t+ {method} setNext\n\t# {method} {abstract} resolve\n}\n\nclass NoSupport{\n\t# {method} resolve\n}\n\nclass LimitSupport{\n\t- limit\n\t# {method} resolve\n}\n\nclass SpecialSupport{\n\t- number\n\t# {method} resolve\n}\n\nMain -> Support : Request >\nSupport o--> Support\nSupport <|-- NoSupport\nSupport <|-- LimitSupport\nSupport <|-- SpecialSupport\n```\n\nä¸‹é¢ç»™å‡ºå®Œæ•´ä»£ç æ¡ˆä¾‹ï¼š\n\n```java\npublic class Trouble {\n    private final int number; // é—®é¢˜ç¼–å·\n    public Trouble(int number){\n        this.number = number;\n    }\n    public int getNumber(){\n        return number;\n    }\n\n    @Override\n    public String toString(){\n        return \"[é—®é¢˜ç¼–å·ï¼š\"+number+\"]\";\n    }\n}\n```\n\nSupport æŠ½è±¡ç±»ä»£ç å¦‚ä¸‹ã€‚`public void support(Trouble trouble)` æ–¹æ³•é‡‡ç”¨äº†æ¨¡æ¿æ¨¡å¼ã€‚\n\n```java\n// Support æŠ½è±¡ç±»\npublic abstract class Support{\n    private final String name;\n    private Support next; // è¦æ¨å¸ç»™çš„å¯¹è±¡ã€‚é€šè¿‡setNextå‡½æ•°è®¾ç½®\n\n    public void support(Trouble trouble) {\n        if (resolve(trouble)) {\n            done(trouble);\n        } else if (next != null) {\n            next.support(trouble); // è§£å†³ä¸äº†é—®é¢˜å°±é€’å½’è°ƒç”¨é“¾æ¡\n        } else {\n            fail(trouble);\n        }\n    }\n\n\t// é‡è¦æŠ€å·§\n    public Support setNext(Support next){\n        this.next = next;\n        return next;\n    }\n\n    public void setNextButNotReturn(Support next){\n        this.next = next;\n    }\n\n    public Support(String name){\n        this.name = name;\n    }\n\n    @Override\n    public String toString(){\n        return \"[\" + name + \"]\";\n    }\n\n    protected abstract boolean resolve(Trouble trouble);\n\n    protected  void done (Trouble trouble){\n        System.out.println(trouble+\" å·²ç»è¢« \"+this+\"è§£å†³\");\n    }\n\n    protected  void fail (Trouble trouble){\n        System.out.println(trouble+\" æ— æ³•è¢« \"+this+\"è§£å†³\");\n    }\n}\n```\n\n`Support` çš„å®ç°ç±»ï¼š\n\n```java\n// Support çš„å®ç°ç±»\npublic class NoSupport extends Support{\n\n    public NoSupport(String name) {\n        super(name);\n    }\n\n    @Override\n    protected boolean resolve(Trouble trouble) {\n        return false;\n    }\n}\n\n\npublic class LimitSupport extends Support{\n    private final int limit;\n\n    public LimitSupport(String name, int limit) {\n        super(name);\n        this.limit = limit;\n    }\n\n    @Override\n    protected boolean resolve(Trouble trouble) {\n        return trouble.getNumber() < limit;\n    }\n}\n\npublic class SpecialSupport extends Support{\n    private final int number;\n\n    public SpecialSupport(String name, int number) {\n        super(name);\n        this.number = number;\n    }\n\n    @Override\n    protected boolean resolve(Trouble trouble) {\n        return trouble.getNumber() == number;\n    }\n}\n\n```\n\nè°ƒç”¨æ–¹ä»£ç ï¼š\n\n```java\npublic static void main(String[] args) {\n\tSupport s1 = new NoSupport(\"ä¸äºˆé€šè¿‡æ–¹æ¡ˆ\");\n\tSupport s2 = new LimitSupport(\"ä¸åŠæ ¼æ–¹æ¡ˆ\",60);\n\tSupport s3 = new SpecialSupport(\"æ»¡åˆ†æ–¹æ¡ˆ\",100);\n\n\t// è´£ä»»é“¾å½¢æˆs1->s2->s3ï¼š\n\ts1.setNext(s2).setNext(s3);\n\n\t// ç”¨è¿™æ¡é“¾å¤„ç†ä»¥ä¸‹ 3 ä¸ªé—®é¢˜ï¼š\n\ts1.support(new Trouble(13)); // [é—®é¢˜ç¼–å·ï¼š13] å·²ç»è¢« [ä¸åŠæ ¼æ–¹æ¡ˆ]è§£å†³\n\ts1.support(new Trouble(64)); // [é—®é¢˜ç¼–å·ï¼š64] æ— æ³•è¢« [æ»¡åˆ†æ–¹æ¡ˆ]è§£å†³\n\ts1.support(new Trouble(100));// [é—®é¢˜ç¼–å·ï¼š100] å·²ç»è¢« [æ»¡åˆ†æ–¹æ¡ˆ]è§£å†³\n}\n```\n\né‡è¦æŠ€å·§ï¼š`Support` æŠ½è±¡ç±»ä¸­ `setNext()` é™¤äº†è®¾ç½® next å¤–ï¼Œè¿˜ `return next;`ã€‚è¿™æ ·å¯ä»¥æœ‰\n\n`h1.setNext(h2).setNext(h3).setNext(h4).setNext(h5)` è¿™æ ·çš„è´£ä»»é“¾æ„é€ ã€‚\n\n> [!warning] è´£ä»»é“¾æ„é€ çš„é”™è¯¯ç¤ºä¾‹\n> è¯·æ³¨æ„ï¼Œè¿™ç§è´£ä»»é“¾æ„é€ æ–¹å¼æ˜¯**é”™è¯¯çš„**ï¼š`h1.setNext(h2.setNext(h3.setNext(h4.setNext(h5))));` è¿™ä¼šå¯¼è‡´æ„é€ è¿™æ ·ä¸€ä¸ªè´£ä»»é“¾ï¼š`h1->h5`ï¼ˆæƒ³ä¸€æƒ³ä¸ºä»€ä¹ˆï¼Ÿï¼‰\n\nå¦‚æœ `setNext()` ä¸­å•çº¯è®¾ç½® `next`ï¼Œä¸ `return next;` çš„è¯ï¼Œè´£ä»»é“¾æ„é€ æ–¹å¼åªèƒ½æ˜¯è¿™ä¸ªæ ·å­ï¼š `h1.setNext(h2); h2.setNext(h3)` ......\n\n# å˜ä½“ï¼šå¼•å…¥è´£ä»»é“¾æ„é€ ç±»\n\nåœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨ main å‡½æ•°ä¸­ä½¿ç”¨è´£ä»»é“¾çš„å¤´ç»“ç‚¹ `s1` ä¸æ–­è¿›è¡Œæ„é€ ã€‚æˆ‘ä»¬å¯ä»¥å¼•ç”¨æ–°çš„ç±» `SupportChain` æ¥ç®¡ç†è¿™ä¸ªé“¾æ¡ã€‚\n\n```java\npublic class SupportChain {\n  // è®°å½•é“¾æ¡çš„é¦–å°¾ç»“ç‚¹\n  private Support head = null;\n  private Support tail = null;\n\n  public void addSupport(Support support) {\n    support.setNext(null);\n\n    if (head == null) {\n      head = support;\n      tail = support;\n      return;\n    }\n\n    tail.setNext(support);\n    tail = support;\n  }\n\n  public void support() {\n    if (head != null) {\n      head.handle();\n    }\n  }\n}\n```\n\nä½¿ç”¨ç¤ºä¾‹ï¼š\n\n```java\npublic static void main(String[] args) {\n\tSupportChain chain = new SupportChain();\n\tchain.addSupport(new LimitSupport(\"ä¸åŠæ ¼æ–¹æ¡ˆ\",60));\n\tchain.addSupport(new SpecialSupport(\"æ»¡åˆ†æ–¹æ¡ˆ\",100));\n\tchain.support();\n}\n```\n\næˆ‘ä»¬è¿˜å¯ä»¥ç”¨æ•°ç»„è€Œéé“¾è¡¨æ¥ä¿å­˜æ‰€æœ‰çš„å¤„ç†å™¨ï¼Œç„¶ååœ¨ `SupportChain` ä¸­ä¾æ¬¡è°ƒç”¨å³å¯ã€‚\n\n```java\npublic class SupportChain {\n  private List<Support> supports = new ArrayList<>();\n\n  public void addSupport(Support support) {\n    this.supports.add(support);\n  }\n\n  public void support() {\n    for (Support support: supports) {\n      boolean isSoveled = support.support();\n      if (isSoveled) {\n        break;\n      }\n    }\n  }\n}\n```\n\n# å˜ä½“ï¼šä¸­é€”ä¸ç»ˆæ­¢é“¾æ¡\n\nåœ¨ GoF ç»™å‡ºçš„å®šä¹‰ä¸­ï¼Œå¦‚æœå¤„ç†å™¨é“¾ä¸Šçš„æŸä¸ªå¤„ç†å™¨èƒ½å¤Ÿå¤„ç†è¿™ä¸ªè¯·æ±‚ï¼Œå°±ä¸ä¼šç»§ç»­å¾€ä¸‹ä¼ é€’è¯·æ±‚ã€‚å®é™…ä¸ŠèŒè´£é“¾æ¨¡å¼è¿˜æœ‰ä¸€ç§å˜ä½“ï¼šè¯·æ±‚ä¼šè¢«æ‰€æœ‰çš„å¤„ç†å™¨éƒ½å¤„ç†ä¸€éï¼Œä¸å­˜åœ¨ä¸­é€”ç»ˆæ­¢çš„æƒ…å†µã€‚\n\n```java\n// Support æŠ½è±¡ç±»\npublic abstract class Support{\n    private final String name;\n    private Support next; // è¦æ¨å¸ç»™çš„å¯¹è±¡ã€‚é€šè¿‡setNextå‡½æ•°è®¾ç½®\n\n    public void support(Trouble trouble) {\n\t    resolve(trouble);\n\t    // æ— è§†ç»“æœï¼Œç»§ç»­å¤„ç†\n\t    if (next != null) {\n            next.support(trouble);\n        }\n    }\n\n\t// çœç•¥å…¶ä»–ä»£ç \n}\n```\n\n# æœ¬æ–‡å‚è€ƒ\n- ã€Šå›¾è§£è®¾è®¡æ¨¡å¼ã€‹ç¬¬ 14 ç« \n- æœ¬ç§‘ç”Ÿè¯¾ç¨‹ç¬”è®°ã€Šç¨‹åºè®¾è®¡ä¸­çº§å®è·µï¼†è®¾è®¡æ¨¡å¼ã€‹ - TJU ğŸâš±ï¸\n- [æå®¢æ—¶é—´ä¸“æ  - è®¾è®¡æ¨¡å¼ä¹‹ç¾ - ç‹äº‰](https://gitee.com/buxsren/design-pattern-books/blob/master/docs/200786.md)","categories":[{"name":"é«˜è´¨é‡ä»£ç åŠè®¾è®¡æ¨¡å¼","api":"api/categories/é«˜è´¨é‡ä»£ç åŠè®¾è®¡æ¨¡å¼.json"}],"tags":[{"name":"Java","api":"api/tags/Java.json"},{"name":"è®¾è®¡æ¨¡å¼","api":"api/tags/è®¾è®¡æ¨¡å¼.json"}]},"api":"api/posts/p/c4f5b558.json"}