<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>半方池水半方田</title>
  
  <subtitle>Qinq的个人博客</subtitle>
  <link href="https://www.uuanqin.top/atom.xml" rel="self"/>
  
  <link href="https://www.uuanqin.top/"/>
  <updated>2023-04-30T16:24:17.181Z</updated>
  <id>https://www.uuanqin.top/</id>
  
  <author>
    <name>Wuanqin</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>将CDN缓存自动刷新加入到Hexo博客发布的工作流</title>
    <link href="https://www.uuanqin.top/p/b05ac1ee.html"/>
    <id>https://www.uuanqin.top/p/b05ac1ee.html</id>
    <published>2023-04-30T16:15:18.000Z</published>
    <updated>2023-04-30T16:24:17.181Z</updated>
    
    <content type="html"><![CDATA[<p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/%E7%BA%BF%E4%B8%8A%E5%B0%9D%E8%AF%95%E6%8E%A5%E5%8F%A3dfdff.jpg" alt="线上尝试接口dfdff"></p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/%E6%88%90%E5%8A%9Fddf.jpg" alt="成功ddf"></p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/%E4%BE%9D%E8%B5%96%E4%B8%8B%E8%BD%BDdfsdf.jpg" alt="依赖下载dfsdf"></p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/test%20env%20%E6%88%90%E5%8A%9Fdfsdf.jpg" alt="test env 成功dfsdf"></p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/%E7%A4%BA%E4%BE%8Benv546546.jpg" alt="示例env546546"></p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/%E6%9F%A5%E7%9C%8B%E6%9C%89%E6%B2%A1%E6%9C%89%E5%88%B7%E6%96%B0%E6%88%90%E5%8A%9F6546.jpg" alt="查看有没有刷新成功6546"></p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/%E8%84%9A%E6%9C%AC%E5%8A%A0%E5%85%A565465.jpg" alt="脚本加入65465"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;img src= &quot;/image/loading.gif&quot; data-lazy-src=&quot;https://typora-1301301520.file.myqcloud.com/img/%E7%BA%BF%E4%B8%8A%E5%B0%9D%E8%AF%95%E6%8E%</summary>
      
    
    
    
    <category term="计算机" scheme="https://www.uuanqin.top/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/"/>
    
    <category term="Hexo" scheme="https://www.uuanqin.top/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/Hexo/"/>
    
    
    <category term="CDN" scheme="https://www.uuanqin.top/tags/CDN/"/>
    
    <category term="API" scheme="https://www.uuanqin.top/tags/API/"/>
    
    <category term="node" scheme="https://www.uuanqin.top/tags/node/"/>
    
    <category term="JavaScript" scheme="https://www.uuanqin.top/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>博客网站网页变灰的操作方法</title>
    <link href="https://www.uuanqin.top/p/26a31d07.html"/>
    <id>https://www.uuanqin.top/p/26a31d07.html</id>
    <published>2023-04-30T13:44:54.000Z</published>
    <updated>2023-04-30T13:45:00.040Z</updated>
    
    <content type="html"><![CDATA[<h1 id="核心代码"><a href="#核心代码" class="headerlink" title="核心代码"></a>核心代码</h1><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">html</span> &#123;</span><br><span class="line">    -webkit-<span class="attribute">filter</span>: <span class="built_in">grayscale</span>(<span class="number">100%</span>);</span><br><span class="line">    -moz-<span class="attribute">filter</span>: <span class="built_in">grayscale</span>(<span class="number">100%</span>);</span><br><span class="line">    -ms-<span class="attribute">filter</span>: <span class="built_in">grayscale</span>(<span class="number">100%</span>);</span><br><span class="line">    -o-<span class="attribute">filter</span>: <span class="built_in">grayscale</span>(<span class="number">100%</span>);</span><br><span class="line">    <span class="attribute">filter</span>: <span class="built_in">grayscale</span>(<span class="number">100%</span>);</span><br><span class="line">    <span class="attribute">filter</span>: progid:DXImageTransform.Microsoft.<span class="built_in">BasicImage</span>(grayscale=<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Hexo"><a href="#Hexo" class="headerlink" title="Hexo"></a>Hexo</h1><p>这里以Butterfly主题为例。新建css文件，包含以上代码内容，然后在主题配置文件中inject即可。（放最后吧）</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">    <span class="comment"># - &lt;link rel=&quot;stylesheet&quot; href=&quot;/xxx.css&quot;&gt;</span></span><br><span class="line">    <span class="comment"># 网页变灰CSS</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/gray.css&quot;&gt;</span></span><br></pre></td></tr></table></figure><p>参考：<a href="https://zhuanlan.zhihu.com/p/125708748">用代码如何实现整个网站变灰？ - 知乎 (zhihu.com)</a></p><h1 id="Wordpress博客网站"><a href="#Wordpress博客网站" class="headerlink" title="Wordpress博客网站"></a>Wordpress博客网站</h1><h2 id="让所有网页变灰"><a href="#让所有网页变灰" class="headerlink" title="让所有网页变灰"></a>让所有网页变灰</h2><p>在主题自定义中，找到“额外CSS”选项，加入上方代码片段。</p><h2 id="仅让首页变灰"><a href="#仅让首页变灰" class="headerlink" title="仅让首页变灰"></a>仅让首页变灰</h2><p>打开仪表盘，进入外观中的主题文件编辑器中，找到functions.php文件。在其最末尾添加上：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">nicetheme_global_greyscale</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ( <span class="title function_ invoke__">is_home</span>() )&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;&lt;style type=&quot;text/css&quot;&gt;html&#123;-webkit-filter:grayscale(1);-webkit-filter:grayscale(100%);filter:grayscale(100%);-webkit-filter:gray;filter:gray;filter:progid:DXImageTransform.Microsoft.BasicImage(grayscale=1);&#125;&lt;/style&gt;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_ invoke__">add_action</span>(<span class="string">&#x27;wp_head&#x27;</span>, <span class="string">&#x27;nicetheme_global_greyscale&#x27;</span>);</span><br></pre></td></tr></table></figure><p>更多情形，详见以下参考链接：</p><p><a href="https://cloud.tencent.com/developer/article/1944792">wordpress 如何让网站变成灰色 - 云+社区 - 腾讯云 (tencent.com)</a></p><p><a href="https://www.ourboke.com/1749.html">用代码轻松实现WordPress网站全站变灰教程 Ourboke联盟</a></p><p><a href="http://www.maqingxi.com/archives/4901.html">WordPress 网站如何实现全站变灰？ - 醒悟的凡灵 (maqingxi.com)</a></p><p><a href="https://www.mbx0.com/4117.html">wordpress网站全站变灰教程 - 墨白社区 (mbx0.com)</a></p>]]></content>
    
    
    <summary type="html">在“额外CSS”中加入代码。</summary>
    
    
    
    <category term="计算机" scheme="https://www.uuanqin.top/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/"/>
    
    
    <category term="搬运" scheme="https://www.uuanqin.top/tags/%E6%90%AC%E8%BF%90/"/>
    
    <category term="CSS" scheme="https://www.uuanqin.top/tags/CSS/"/>
    
  </entry>
  
  <entry>
    <title>Hexo博客添加漂浮物效果（可定制显示页面）</title>
    <link href="https://www.uuanqin.top/p/28a4bfe2.html"/>
    <id>https://www.uuanqin.top/p/28a4bfe2.html</id>
    <published>2023-04-30T10:53:23.000Z</published>
    <updated>2023-04-30T14:12:02.926Z</updated>
    
    <content type="html"><![CDATA[<p>本文为Hexo Butterfly主题的优雅改（只引入js文件）。<br>原码参考自：<a href="https://yisous.xyz/posts/670e47f/#%E8%90%BD%E6%A8%B1%E7%89%B9%E6%95%88%E6%90%AD%E9%85%8D%E5%8D%9A%E5%AE%A2%E8%AE%BE%E7%BD%AE%E9%A3%9F%E7%94%A8">博客魔改日记（3） | Ariasakaの小窝 (yisous.xyz)</a>，在其中做了改动：</p><ul><li>替换了部分变量和注释名</li><li>增加可定制显示漂浮物页面的逻辑<br>使用方法：</li><li>需要所有博客页面都显示漂浮物：将<code>allowAll = true</code></li><li>指定显示漂浮物的页面：将<code>allowAll = false</code>，在urlAllowList中列出需要显示漂浮物的网页相对地址。如<code>/about/</code>。<br>缺点显而易见：<strong>不灵活</strong>。后续将会改进。</li></ul><p>js代码：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 漂浮物</span></span><br><span class="line"><span class="comment">// 新增函数 </span></span><br><span class="line"><span class="comment">// 首先获取 Url，然后把 Url 通过 // 截成两部分，再从后一部分中截取相对路径。如果截取到的相对路径中有参数，则把参数去掉。</span></span><br><span class="line"><span class="comment">// 获取相对路径</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">GetUrlRelativePath</span>(<span class="params"></span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">var</span> url = <span class="variable language_">document</span>.<span class="property">location</span>.<span class="title function_">toString</span>();</span><br><span class="line">    <span class="keyword">var</span> arrUrl = url.<span class="title function_">split</span>(<span class="string">&quot;//&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> start = arrUrl[<span class="number">1</span>].<span class="title function_">indexOf</span>(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> relUrl = arrUrl[<span class="number">1</span>].<span class="title function_">substring</span>(start);<span class="comment">//stop省略，截取从start开始到结尾的所有字符</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(relUrl.<span class="title function_">indexOf</span>(<span class="string">&quot;?&quot;</span>) != -<span class="number">1</span>)&#123;</span><br><span class="line">        relUrl = relUrl.<span class="title function_">split</span>(<span class="string">&quot;?&quot;</span>)[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> relUrl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> allowAll = <span class="literal">false</span>; <span class="comment">// true 则允许所有网页存在漂浮物</span></span><br><span class="line"><span class="comment">// 允许显示漂浮物的网址列表</span></span><br><span class="line"><span class="keyword">var</span> urlAllowList = [</span><br><span class="line">    <span class="string">&quot;/about/&quot;</span>,</span><br><span class="line">    <span class="string">&quot;/link/friends/&quot;</span>,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> isAllowFloat = <span class="literal">false</span>;   <span class="comment">// 全局变量，允许使用漂浮特效</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">decide</span>(<span class="params"></span>)&#123;</span><br><span class="line">    isAllowFloat = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">if</span>(!allowAll)&#123;</span><br><span class="line">        <span class="comment">// 判断当前页面是否为指定页面</span></span><br><span class="line">        <span class="keyword">var</span> url = <span class="title class_">GetUrlRelativePath</span>();</span><br><span class="line">        <span class="keyword">var</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(;i&lt;urlAllowList.<span class="property">length</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(url===urlAllowList[i])&#123;</span><br><span class="line">                <span class="comment">// console.log(i);</span></span><br><span class="line">                isAllowFloat = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(i===urlAllowList.<span class="property">length</span>)&#123;</span><br><span class="line">            isAllowFloat = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(isAllowFloat)</span><br><span class="line">    <span class="keyword">if</span>(isAllowFloat)<span class="title function_">startFloat</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> stop, staticx;</span><br><span class="line"><span class="keyword">var</span> img = <span class="keyword">new</span> <span class="title class_">Image</span>();</span><br><span class="line">img.<span class="property">src</span> = <span class="string">&quot;/image/star_float.png&quot;</span>; <span class="comment">// 图片</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Float</span>(<span class="params">x, y, s, r, fn</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">x</span> = x;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">y</span> = y;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">s</span> = s;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">r</span> = r;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">fn</span> = fn;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Float</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">draw</span> = <span class="keyword">function</span>(<span class="params">cxt</span>) &#123;</span><br><span class="line">    cxt.<span class="title function_">save</span>();</span><br><span class="line">    <span class="keyword">var</span> xc = <span class="number">40</span> * <span class="variable language_">this</span>.<span class="property">s</span> / <span class="number">4</span>;</span><br><span class="line">    cxt.<span class="title function_">translate</span>(<span class="variable language_">this</span>.<span class="property">x</span>, <span class="variable language_">this</span>.<span class="property">y</span>);</span><br><span class="line">    cxt.<span class="title function_">rotate</span>(<span class="variable language_">this</span>.<span class="property">r</span>);</span><br><span class="line">    cxt.<span class="title function_">drawImage</span>(img, <span class="number">0</span>, <span class="number">0</span>, <span class="number">35</span> * <span class="variable language_">this</span>.<span class="property">s</span>, <span class="number">35</span> * <span class="variable language_">this</span>.<span class="property">s</span>)</span><br><span class="line">    <span class="comment">//漂浮物大小</span></span><br><span class="line">    cxt.<span class="title function_">restore</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Float</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">update</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">x</span> = <span class="variable language_">this</span>.<span class="property">fn</span>.<span class="title function_">x</span>(<span class="variable language_">this</span>.<span class="property">x</span>, <span class="variable language_">this</span>.<span class="property">y</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">y</span> = <span class="variable language_">this</span>.<span class="property">fn</span>.<span class="title function_">y</span>(<span class="variable language_">this</span>.<span class="property">y</span>, <span class="variable language_">this</span>.<span class="property">y</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">r</span> = <span class="variable language_">this</span>.<span class="property">fn</span>.<span class="title function_">r</span>(<span class="variable language_">this</span>.<span class="property">r</span>);</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">x</span> &gt; <span class="variable language_">window</span>.<span class="property">innerWidth</span> || <span class="variable language_">this</span>.<span class="property">x</span> &lt; <span class="number">0</span> || <span class="variable language_">this</span>.<span class="property">y</span> &gt; <span class="variable language_">window</span>.<span class="property">innerHeight</span> || <span class="variable language_">this</span>.<span class="property">y</span> &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">r</span> = <span class="title function_">getRandom</span>(<span class="string">&#x27;fnr&#x27;</span>);</span><br><span class="line">        <span class="keyword">if</span> (<span class="title class_">Math</span>.<span class="title function_">random</span>() &gt; <span class="number">0.4</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">x</span> = <span class="title function_">getRandom</span>(<span class="string">&#x27;x&#x27;</span>);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">y</span> = <span class="number">0</span>;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">s</span> = <span class="title function_">getRandom</span>(<span class="string">&#x27;s&#x27;</span>);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">r</span> = <span class="title function_">getRandom</span>(<span class="string">&#x27;r&#x27;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">x</span> = <span class="variable language_">window</span>.<span class="property">innerWidth</span>;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">y</span> = <span class="title function_">getRandom</span>(<span class="string">&#x27;y&#x27;</span>);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">s</span> = <span class="title function_">getRandom</span>(<span class="string">&#x27;s&#x27;</span>);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">r</span> = <span class="title function_">getRandom</span>(<span class="string">&#x27;r&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">FloatList</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">list</span> = [];</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">FloatList</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">push</span> = <span class="keyword">function</span>(<span class="params">float</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">list</span>.<span class="title function_">push</span>(float);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">FloatList</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">update</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = <span class="variable language_">this</span>.<span class="property">list</span>.<span class="property">length</span>; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">list</span>[i].<span class="title function_">update</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">FloatList</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">draw</span> = <span class="keyword">function</span>(<span class="params">cxt</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = <span class="variable language_">this</span>.<span class="property">list</span>.<span class="property">length</span>; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">list</span>[i].<span class="title function_">draw</span>(cxt);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">FloatList</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">get</span> = <span class="keyword">function</span>(<span class="params">i</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">list</span>[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">FloatList</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">size</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">list</span>.<span class="property">length</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getRandom</span>(<span class="params">option</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> ret, random;</span><br><span class="line">    <span class="keyword">switch</span> (option) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;x&#x27;</span>:</span><br><span class="line">        ret = <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="variable language_">window</span>.<span class="property">innerWidth</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;y&#x27;</span>:</span><br><span class="line">        ret = <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="variable language_">window</span>.<span class="property">innerHeight</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;s&#x27;</span>:</span><br><span class="line">        ret = <span class="title class_">Math</span>.<span class="title function_">random</span>();</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;r&#x27;</span>:</span><br><span class="line">        ret = <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">6</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;fnx&#x27;</span>:</span><br><span class="line">        random = -<span class="number">0.5</span> + <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">1</span>;</span><br><span class="line">        ret = <span class="keyword">function</span>(<span class="params">x, y</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> x + <span class="number">0.5</span> * random - <span class="number">0.6</span>;</span><br><span class="line">            <span class="comment">//x轴速度</span></span><br><span class="line">        &#125;</span><br><span class="line">        ;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;fny&#x27;</span>:</span><br><span class="line">        random = <span class="number">0.8</span> + <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">0.7</span></span><br><span class="line">        <span class="comment">//y轴速度</span></span><br><span class="line">        ret = <span class="keyword">function</span>(<span class="params">x, y</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> y + random;</span><br><span class="line">        &#125;</span><br><span class="line">        ;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;fnr&#x27;</span>:</span><br><span class="line">        random = <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">0.03</span>;</span><br><span class="line">        ret = <span class="keyword">function</span>(<span class="params">r</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> r + random;</span><br><span class="line">        &#125;</span><br><span class="line">        ;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">startFloat</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">    requestAnimationFrame = <span class="variable language_">window</span>.<span class="property">requestAnimationFrame</span> || <span class="variable language_">window</span>.<span class="property">mozRequestAnimationFrame</span> || <span class="variable language_">window</span>.<span class="property">webkitRequestAnimationFrame</span> || <span class="variable language_">window</span>.<span class="property">msRequestAnimationFrame</span> || <span class="variable language_">window</span>.<span class="property">oRequestAnimationFrame</span>;</span><br><span class="line">    <span class="keyword">var</span> canvas = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;canvas&#x27;</span>), cxt;</span><br><span class="line">    staticx = <span class="literal">true</span>;</span><br><span class="line">    canvas.<span class="property">height</span> = <span class="variable language_">window</span>.<span class="property">innerHeight</span>;</span><br><span class="line">    canvas.<span class="property">width</span> = <span class="variable language_">window</span>.<span class="property">innerWidth</span>;</span><br><span class="line">    canvas.<span class="title function_">setAttribute</span>(<span class="string">&#x27;style&#x27;</span>, <span class="string">&#x27;position: fixed;left: 0;top: 0;pointer-events: none;&#x27;</span>);</span><br><span class="line">    canvas.<span class="title function_">setAttribute</span>(<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;canvas_float&#x27;</span>);</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;body&#x27;</span>)[<span class="number">0</span>].<span class="title function_">appendChild</span>(canvas);</span><br><span class="line">    cxt = canvas.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>);</span><br><span class="line">    <span class="keyword">var</span> floatList = <span class="keyword">new</span> <span class="title class_">FloatList</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">        <span class="comment">//漂浮物数量</span></span><br><span class="line">        <span class="keyword">var</span> float, randomX, randomY, randomS, randomR, randomFnx, randomFny;</span><br><span class="line">        randomX = <span class="title function_">getRandom</span>(<span class="string">&#x27;x&#x27;</span>);</span><br><span class="line">        randomY = <span class="title function_">getRandom</span>(<span class="string">&#x27;y&#x27;</span>);</span><br><span class="line">        randomR = <span class="title function_">getRandom</span>(<span class="string">&#x27;r&#x27;</span>);</span><br><span class="line">        randomS = <span class="title function_">getRandom</span>(<span class="string">&#x27;s&#x27;</span>);</span><br><span class="line">        randomFnx = <span class="title function_">getRandom</span>(<span class="string">&#x27;fnx&#x27;</span>);</span><br><span class="line">        randomFny = <span class="title function_">getRandom</span>(<span class="string">&#x27;fny&#x27;</span>);</span><br><span class="line">        randomFnR = <span class="title function_">getRandom</span>(<span class="string">&#x27;fnr&#x27;</span>);</span><br><span class="line">        float = <span class="keyword">new</span> <span class="title class_">Float</span>(randomX,randomY,randomS,randomR,&#123;</span><br><span class="line">            <span class="attr">x</span>: randomFnx,</span><br><span class="line">            <span class="attr">y</span>: randomFny,</span><br><span class="line">            <span class="attr">r</span>: randomFnR</span><br><span class="line">        &#125;);</span><br><span class="line">        float.<span class="title function_">draw</span>(cxt);</span><br><span class="line">        floatList.<span class="title function_">push</span>(float);</span><br><span class="line">    &#125;</span><br><span class="line">    stop = <span class="title function_">requestAnimationFrame</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        cxt.<span class="title function_">clearRect</span>(<span class="number">0</span>, <span class="number">0</span>, canvas.<span class="property">width</span>, canvas.<span class="property">height</span>);</span><br><span class="line">        floatList.<span class="title function_">update</span>();</span><br><span class="line">        floatList.<span class="title function_">draw</span>(cxt);</span><br><span class="line">        stop = <span class="title function_">requestAnimationFrame</span>(<span class="variable language_">arguments</span>.<span class="property">callee</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onresize</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(!isAllowFloat)<span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">var</span> canvasSnow = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;canvas_float&#x27;</span>);</span><br><span class="line">    canvasSnow.<span class="property">width</span> = <span class="variable language_">window</span>.<span class="property">innerWidth</span>;</span><br><span class="line">    canvasSnow.<span class="property">height</span> = <span class="variable language_">window</span>.<span class="property">innerHeight</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">stopp</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!e &amp;&amp; <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;canvas_float&quot;</span>)) &#123;</span><br><span class="line">        <span class="keyword">var</span> child = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;canvas_float&quot;</span>);</span><br><span class="line">        child.<span class="property">parentNode</span>.<span class="title function_">removeChild</span>(child);</span><br><span class="line">        <span class="variable language_">window</span>.<span class="title function_">cancelAnimationFrame</span>(stop);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (e &amp;&amp; !<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;canvas_float&quot;</span>)) &#123;</span><br><span class="line">        <span class="title function_">decide</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;DOMContentLoaded&quot;</span>,decide);</span><br></pre></td></tr></table></figure><p>也许不够优雅，但也够用了。</p><p>未来计划：节日触发漂浮物效果，以及优雅进行实现。<a href="https://blog.csdn.net/LEVsunshine/article/details/109069345">js处理时间戳为各种格式/js判断公历/农历/周历节日和节气_js 二十四节气计算_to Zero-的博客-CSDN博客</a></p>]]></content>
    
    
    <summary type="html">为博客添加漂浮物效果，并可定制需要显示漂浮物的页面。Hexo优雅改。</summary>
    
    
    
    <category term="计算机" scheme="https://www.uuanqin.top/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/"/>
    
    <category term="Hexo" scheme="https://www.uuanqin.top/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/Hexo/"/>
    
    
    <category term="JavaScript" scheme="https://www.uuanqin.top/tags/JavaScript/"/>
    
    <category term="ButterFly" scheme="https://www.uuanqin.top/tags/ButterFly/"/>
    
  </entry>
  
  <entry>
    <title>在你的Hexo博客上加入进度条（Butterfly）</title>
    <link href="https://www.uuanqin.top/p/4dfb77c6.html"/>
    <id>https://www.uuanqin.top/p/4dfb77c6.html</id>
    <published>2023-04-28T12:03:02.000Z</published>
    <updated>2023-04-28T12:30:12.332Z</updated>
    
    <content type="html"><![CDATA[<h1 id="引入方法"><a href="#引入方法" class="headerlink" title="引入方法"></a>引入方法</h1><p>如果你使用的是Butterfly主题，可以在主题配置文件中加入：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">src=&quot;https://npm.elemecdn.com/pace-js@latest/pace.min.js&quot;&gt;&lt;/script&gt;</span> <span class="comment"># pace.js文件</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/&lt;your_pace.css&gt;&quot;&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>新版本Butterfly配置文件中有内置的pace选项，但是它的pace.js使用的jsdelivr提供的CDN，国内访问困难，CDN项也没有相应更改的地方，建议按照这篇文章的说明使用老方法进行进度条的引入。</p></blockquote><h1 id="基本样式"><a href="#基本样式" class="headerlink" title="基本样式"></a>基本样式</h1><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-20230428202826301.png" alt="image-20230428202826301"></p><p>PACE官网给出的示例，这里已把官网的jsdelivr连接替换掉了：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://cdn.bootcdn.net/ajax/libs/pace/1.2.4/pace-theme-default.min.css</span><br></pre></td></tr></table></figure><h1 id="官网样式"><a href="#官网样式" class="headerlink" title="官网样式"></a>官网样式</h1><p>可以在这里挑选你喜欢的样式并下载对应的CSS文件：<a href="https://codebyzach.github.io/pace/">PACE — Automatic page load progress bars (codebyzach.github.io)</a></p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-20230428200140054.png" alt="image-20230428200140054"></p><h1 id="其他样式"><a href="#其他样式" class="headerlink" title="其他样式"></a>其他样式</h1><p>也可以尝试这一种：</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-20230428195652087.png" alt="image-20230428195652087"></p><h2 id="基础版本"><a href="#基础版本" class="headerlink" title="基础版本"></a>基础版本</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.pace</span> &#123;</span><br><span class="line">    -webkit-<span class="attribute">pointer-events</span>: none;</span><br><span class="line">    <span class="attribute">pointer-events</span>: none;</span><br><span class="line">    -webkit-user-select: none;</span><br><span class="line">    -moz-user-select: none;</span><br><span class="line">    user-select: none;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">2000</span>;</span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">margin</span>: auto;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">4rem</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#eaecf2</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> <span class="number">#e3e8f7</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.pace-inactive</span> <span class="selector-class">.pace-progress</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">transition</span>: .<span class="number">3s</span> ease-in</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.pace</span> <span class="selector-class">.pace-progress</span> &#123;</span><br><span class="line">    -webkit-<span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">    -moz-<span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">    -ms-<span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">    -o-<span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">    -webkit-<span class="attribute">transform</span>: <span class="built_in">translate3d</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    -moz-<span class="attribute">transform</span>: <span class="built_in">translate3d</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    -ms-<span class="attribute">transform</span>: <span class="built_in">translate3d</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    -o-<span class="attribute">transform</span>: <span class="built_in">translate3d</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">2000</span>;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(<span class="number">215deg</span>, <span class="number">#05662a</span> <span class="number">0%</span>, <span class="number">#bffc16</span> <span class="number">100%</span>);</span><br><span class="line">    <span class="attribute">animation</span>: gradient <span class="number">2s</span> ease infinite;</span><br><span class="line">    <span class="attribute">background-size</span>: <span class="number">200%</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.pace</span><span class="selector-class">.pace-inactive</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">transition</span>: .<span class="number">3s</span>;</span><br><span class="line">    <span class="attribute">top</span>: -<span class="number">8px</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="动态版本"><a href="#动态版本" class="headerlink" title="动态版本"></a>动态版本</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.pace</span> &#123;</span><br><span class="line">    -webkit-<span class="attribute">pointer-events</span>: none;</span><br><span class="line">    <span class="attribute">pointer-events</span>: none;</span><br><span class="line">    -webkit-user-select: none;</span><br><span class="line">    -moz-user-select: none;</span><br><span class="line">    user-select: none;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">2000</span>;</span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">margin</span>: auto;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">4rem</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#eaecf2</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> <span class="number">#e3e8f7</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.pace-inactive</span> <span class="selector-class">.pace-progress</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">transition</span>: .<span class="number">3s</span> ease-in</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.pace</span> <span class="selector-class">.pace-progress</span> &#123;</span><br><span class="line">    -webkit-<span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">    -moz-<span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">    -ms-<span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">    -o-<span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">    -webkit-<span class="attribute">transform</span>: <span class="built_in">translate3d</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    -moz-<span class="attribute">transform</span>: <span class="built_in">translate3d</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    -ms-<span class="attribute">transform</span>: <span class="built_in">translate3d</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    -o-<span class="attribute">transform</span>: <span class="built_in">translate3d</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">2000</span>;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(-<span class="number">45deg</span>, <span class="number">#ee7752</span>, <span class="number">#e73c7e</span>, <span class="number">#23a6d5</span>, <span class="number">#23d5ab</span>);</span><br><span class="line">    <span class="attribute">animation</span>: gradient <span class="number">1.5s</span> ease infinite;</span><br><span class="line">    <span class="attribute">background-size</span>: <span class="number">200%</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.pace</span><span class="selector-class">.pace-inactive</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">transition</span>: .<span class="number">3s</span>;</span><br><span class="line">    <span class="attribute">top</span>: -<span class="number">8px</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@keyframes</span> gradient &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">100%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>对比两个版本的差异，相信你能自定义出一套自己的进度条。</p><p>参考：<a href="https://blog.trfox.ml/p/81434d957ca9/">给你的网站/博客顶部加上加载进度条 | Teror (trfox.ml)</a></p>]]></content>
    
    
    <summary type="html">通过进入pace.js以及本地css实现网站顶部进度条</summary>
    
    
    
    <category term="计算机" scheme="https://www.uuanqin.top/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/"/>
    
    <category term="Hexo" scheme="https://www.uuanqin.top/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/Hexo/"/>
    
    
    <category term="pace" scheme="https://www.uuanqin.top/tags/pace/"/>
    
  </entry>
  
  <entry>
    <title>国内访问Hexo优化加速-替换jsdelivr的CDN链接</title>
    <link href="https://www.uuanqin.top/p/7b17333d.html"/>
    <id>https://www.uuanqin.top/p/7b17333d.html</id>
    <published>2023-04-28T09:34:18.000Z</published>
    <updated>2023-04-30T10:02:29.912Z</updated>
    
    <content type="html"><![CDATA[<p>假设你刚搭建了个人博客，发现网站的访问速度实在堪忧，怎么办？解决方法无非以下几种方法：</p><ul><li>有经济实力的，考虑提升硬件性能和带宽（购买高级服务器、增大带宽）</li><li>正确使用CDN加速源站和图片。CDN加速源站方法详看这篇文章：<a href="https://www.uuanqin.top/p/36451a4e.html">只要一篇文章——CDN实操 | 半方池水半方田 (uuanqin.top)</a>，如果对象存储已加入Typora的工作流，那图片的处理就更方便了：<a href="https://www.uuanqin.top/p/edfe8057.html">Typora+PicGo(app)+腾讯云COS实现图床 | 半方池水半方田 (uuanqin.top)</a></li><li>如果你的个人博客网站是动态网站（如Wordpress），但实在没有必要必须是动态网站时，可尝试改成静态框架，详看我的这篇文章：<a href="https://www.uuanqin.top/p/ad28b4a.html">部署Hexo个人博客框架到服务器 | 半方池水半方田 (uuanqin.top)</a></li></ul><p>如果以上的方法你都尝试过，但博客网站可能遇到页面卡顿、显示不全、功能异常（图标、评论、搜索等各种异常）等情况，比如：</p><ul><li>fontawesome加载迟、卡，拖慢网页加载（fontawesome可以考虑更换图标库，请看我之前的文章《》）</li><li>algolia搜索按钮按不出来</li><li>Waline评论系统不显示或评论数据无法获取（处理这个问题前请看我之前的文章：<a href="https://www.uuanqin.top/p/591f2165.html">Hexo框架Btterfly主题引入Waline评论系统及国内正常访问 | 半方池水半方田 (uuanqin.top)</a>）</li></ul><p>而使用魔法访问时却一切正常。这时候我们该考虑是不是CDN出现问题了。</p><p>本地调试自己的博客网站后，打开浏览器的开发者面板（F12）-&gt;禁用缓存-&gt;点击网络选项卡-&gt;刷新页面：</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/jsdeliver%E6%83%B9%E7%9A%84%E7%A5%B81.png" alt="jsdeliver惹的祸1"></p><p>你会发现一些js文件或css文件无法被加载，这些文件大多来源于jsdelivr的CDN连接。</p><blockquote><p>不熟悉CDN的小伙伴可以理解为，jsdelivr里存放了大量的js文件或css文件，你的博客网站需要引入这些文件，但是由于某种原因，jsdelivr结点的链接状况在国内时好时坏（使用魔法就好）。</p></blockquote><p>这时我们可以考虑把获取这些js或css文件的链接替换掉。在你的主题配置上进行替换，这里以Butterfly主题为例，在主题配置文件下找到：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">CDN:</span></span><br><span class="line">    <span class="attr">option:</span> </span><br><span class="line">        <span class="attr">fontawesome:</span> <span class="string">&lt;替换的cdn&gt;</span></span><br></pre></td></tr></table></figure><p>建议你把涉及jsdelivr都替换掉把，让中国宝宝访问你的博客网站更快更方便。</p><p>各种资源CDN链接参考：<a href="https://blog.zhheo.com/p/790087d9.html">Butterfly CDN链接更改指南，替换jsdelivr提升访问速度 | 张洪Heo (zhheo.com)</a></p><p>也可以在下面的两个网站找：</p><ul><li><a href="https://cdnjs.com/">https://cdnjs.com/</a></li><li><a href="https://www.bootcdn.cn/">https://www.bootcdn.cn/</a></li></ul><p>也可以把文件放在自己的存储桶中（注意看好你的钱包）。</p><p>参考：</p><ul><li><a href="https://blog.zhheo.com/p/790087d9.html">Butterfly CDN链接更改指南，替换jsdelivr提升访问速度 | 张洪Heo (zhheo.com)</a></li><li><a href="https://blog.csdn.net/u013014254/article/details/122045331">jsdelivr炸了如何解决|用这些免费cdn_地域男孩的博客-CSDN博客</a></li><li><a href="https://butterfly.js.org/posts/ceeb73f/#custom-format">Butterfly 安裝文檔(四) 主題配置-2 | Butterfly</a></li><li><a href="https://github.com/jerryc127/hexo-theme-butterfly/issues/1243">fontawesome图标问题 · Issue #1243 · jerryc127/hexo-theme-butterfly (github.com)</a></li></ul>]]></content>
    
    
    <summary type="html">由于某种原因，jsdelivr的状况时好时坏，本文介绍Butterfly下替换CDN链接的解决方案</summary>
    
    
    
    <category term="计算机" scheme="https://www.uuanqin.top/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/"/>
    
    <category term="Hexo" scheme="https://www.uuanqin.top/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/Hexo/"/>
    
    
    <category term="CDN" scheme="https://www.uuanqin.top/tags/CDN/"/>
    
    <category term="Butterfly" scheme="https://www.uuanqin.top/tags/Butterfly/"/>
    
    <category term="jsdelivr" scheme="https://www.uuanqin.top/tags/jsdelivr/"/>
    
  </entry>
  
  <entry>
    <title>定制自己的Waline评论系统</title>
    <link href="https://www.uuanqin.top/p/dd188b35.html"/>
    <id>https://www.uuanqin.top/p/dd188b35.html</id>
    <published>2023-04-28T08:15:12.000Z</published>
    <updated>2023-04-29T14:02:58.150Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Waline邮件通知"><a href="#Waline邮件通知" class="headerlink" title="Waline邮件通知"></a>Waline邮件通知</h1><p>Waline发送邮件，首先你得有一个专门发送通知的邮箱，任何支持STMP协议的都行。这里以腾讯企业邮作域名邮箱为例。</p><h2 id="拥有域名邮箱"><a href="#拥有域名邮箱" class="headerlink" title="拥有域名邮箱"></a>拥有域名邮箱</h2><p>注册一个企业微信，企业微信完成企业创建后，可以申请域名邮箱：</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-20230428231218707.png" alt="image-20230428231218707"></p><h2 id="解析设置"><a href="#解析设置" class="headerlink" title="解析设置"></a>解析设置</h2><p>然后在阿里云云解析进行设置：（其他云服务商解析设置方法参考：<a href="https://open.work.weixin.qq.com/help2/pc/19814?person_id=1&searchData=">如何确认域名的服务商以及各大域名商的域名设置方法-帮助中心-企业微信 (qq.com)</a>）</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-20230428230939924.png" alt="image-20230428230939924"></p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-20230428231010712.png" alt="image-20230428231010712"></p><h2 id="邮箱设置好密码"><a href="#邮箱设置好密码" class="headerlink" title="邮箱设置好密码"></a>邮箱设置好密码</h2><p>拥有企业邮箱之后，登录邮箱设置好密码。可参考[成员如何设置邮箱密码？_腾讯企业邮箱帮助中心 (qq.com)](<a href="https://service.exmail.qq.com/cgi-bin/help?subtype=1&amp;&amp;id=7&amp;&amp;no=1001558#:~:text=%E6%88%90%E5%91%98%E5%A6%82%E4%BD%95%E8%AE%BE%E7%BD%AE%E9%82%AE%E7%AE%B1%E5%AF%86%E7%A0%81%EF%BC%9F">https://service.exmail.qq.com/cgi-bin/help?subtype=1&amp;&amp;id=7&amp;&amp;no=1001558#:~:text=成员如何设置邮箱密码？</a> _腾讯企业邮箱帮助中心 成员如何设置邮箱密码？,注意：成员初次需要使用 “手机号%2B验证码”方式登录后，便可以自行设置邮箱密码。 登录后，在“设置-帐户-帐户安全”，设置密码即可，后续也可修改密码。)</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-20230428222407581.png" alt="image-20230428222407581"></p><h2 id="环境变量配置"><a href="#环境变量配置" class="headerlink" title="环境变量配置"></a>环境变量配置</h2><p>设置好域名邮箱密码后，打开Vercel服务端项目，点击环境变量：</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-20230428223656516.png" alt="image-20230428223656516"></p><p>然后按照Waline官方文档的指导设置好服务端的环境变量：<a href="https://waline.js.org/guide/features/notification.html#%E9%82%AE%E4%BB%B6%E9%80%9A%E7%9F%A5">评论通知 | Waline</a>，腾讯企业邮相关参数如下：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;QQex&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;aliases&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;QQ Enterprise&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;domains&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;exmail.qq.com&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;host&quot;</span><span class="punctuation">:</span> <span class="string">&quot;smtp.exmail.qq.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;port&quot;</span><span class="punctuation">:</span> <span class="number">465</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;secure&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure><p>参考：<a href="https://cloud.tencent.com/developer/article/2067294">Fluid -15- Waline 邮件通知 - 腾讯云开发者社区-腾讯云 (tencent.com)</a></p><h2 id="信件模板"><a href="#信件模板" class="headerlink" title="信件模板"></a>信件模板</h2><p>关于邮件内容的模板，即环境变量<strong>MAIL_TEMPLATE_ADMIN</strong>如何写，可自行搜索样例。</p><p>这里我参考了洪涝的针对Twikoo评论系统的示例：<a href="https://blog.zhheo.com/p/169a1abb.html">Twikoo评论回复邮件模板：Acrylic Mail 粉 | 张洪Heo (zhheo.com)</a></p><p>其实与Waline大差不差，只是有一些写法需要注意。</p><blockquote><p>目前该模板存在问题：电脑端QQ邮箱显示灰色方框显示有误。在这里记录一下。</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;page flex-col&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box_3 flex-col&quot;</span> <span class="attr">style</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">    display: flex;</span></span></span><br><span class="line"><span class="string"><span class="tag">    position: relative;</span></span></span><br><span class="line"><span class="string"><span class="tag">    width: 100%;</span></span></span><br><span class="line"><span class="string"><span class="tag">    height: 206px;</span></span></span><br><span class="line"><span class="string"><span class="tag">    background: #859cef2e;</span></span></span><br><span class="line"><span class="string"><span class="tag">    top: 0;</span></span></span><br><span class="line"><span class="string"><span class="tag">    left: 0;</span></span></span><br><span class="line"><span class="string"><span class="tag">    justify-content: center;</span></span></span><br><span class="line"><span class="string"><span class="tag">  &quot;</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;section_1 flex-col&quot;</span> <span class="attr">style</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">    background-image: url(https://typora-1301301520.file.myqcloud.com/img/qlogo.png);</span></span></span><br><span class="line"><span class="string"><span class="tag">    position: absolute;</span></span></span><br><span class="line"><span class="string"><span class="tag">    width: 152px;</span></span></span><br><span class="line"><span class="string"><span class="tag">    height: 152px;</span></span></span><br><span class="line"><span class="string"><span class="tag">    display: flex;</span></span></span><br><span class="line"><span class="string"><span class="tag">    top: 130px;</span></span></span><br><span class="line"><span class="string"><span class="tag">    background-size: cover;</span></span></span><br><span class="line"><span class="string"><span class="tag">  &quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box_4 flex-col&quot;</span> <span class="attr">style</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">    margin-top: 92px;</span></span></span><br><span class="line"><span class="string"><span class="tag">    display: flex;</span></span></span><br><span class="line"><span class="string"><span class="tag">    flex-direction: column;</span></span></span><br><span class="line"><span class="string"><span class="tag">    align-items: center;</span></span></span><br><span class="line"><span class="string"><span class="tag">  &quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;text-group_5 flex-col justify-between&quot;</span> <span class="attr">style</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">    display: flex;</span></span></span><br><span class="line"><span class="string"><span class="tag">    flex-direction: column;</span></span></span><br><span class="line"><span class="string"><span class="tag">    align-items: center;</span></span></span><br><span class="line"><span class="string"><span class="tag">    margin: 0 20px;</span></span></span><br><span class="line"><span class="string"><span class="tag">  &quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;text_1&quot;</span> <span class="attr">style</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">    font-size: 26px;</span></span></span><br><span class="line"><span class="string"><span class="tag">    font-family: PingFang-SC-Bold, PingFang-SC;</span></span></span><br><span class="line"><span class="string"><span class="tag">    font-weight: bold;</span></span></span><br><span class="line"><span class="string"><span class="tag">    color: #000000;</span></span></span><br><span class="line"><span class="string"><span class="tag">    line-height: 37px;</span></span></span><br><span class="line"><span class="string"><span class="tag">    text-align: center;</span></span></span><br><span class="line"><span class="string"><span class="tag">  &quot;</span>&gt;</span>嘿！你在<span class="symbol">&amp;nbsp;</span>&#123;&#123;site.name|safe&#125;&#125;<span class="symbol">&amp;nbsp;</span>博客中收到一条新回复。<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;text_2&quot;</span> <span class="attr">style</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">    font-size: 16px;</span></span></span><br><span class="line"><span class="string"><span class="tag">    font-family: PingFang-SC-Bold, PingFang-SC;</span></span></span><br><span class="line"><span class="string"><span class="tag">    font-weight: bold;</span></span></span><br><span class="line"><span class="string"><span class="tag">    color: #00000030;</span></span></span><br><span class="line"><span class="string"><span class="tag">    line-height: 22px;</span></span></span><br><span class="line"><span class="string"><span class="tag">    margin-top: 21px;</span></span></span><br><span class="line"><span class="string"><span class="tag">    text-align: center;</span></span></span><br><span class="line"><span class="string"><span class="tag">  &quot;</span>&gt;</span>你之前的评论<span class="symbol">&amp;nbsp;</span>在<span class="symbol">&amp;nbsp;</span>&#123;&#123;site.name|safe&#125;&#125; 博客中收到来自<span class="symbol">&amp;nbsp;</span>&#123;&#123;self.nick&#125;&#125;<span class="symbol">&amp;nbsp;</span>的回复<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box_2 flex-row&quot;</span> <span class="attr">style</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">    margin: 0 20px;</span></span></span><br><span class="line"><span class="string"><span class="tag">    min-height: 128px;</span></span></span><br><span class="line"><span class="string"><span class="tag">    background: #F7F7F7;</span></span></span><br><span class="line"><span class="string"><span class="tag">    border-radius: 12px;</span></span></span><br><span class="line"><span class="string"><span class="tag">    margin-top: 34px;</span></span></span><br><span class="line"><span class="string"><span class="tag">    display: flex;</span></span></span><br><span class="line"><span class="string"><span class="tag">    flex-direction: column;</span></span></span><br><span class="line"><span class="string"><span class="tag">    align-items: flex-start;</span></span></span><br><span class="line"><span class="string"><span class="tag">    padding: 32px 16px;</span></span></span><br><span class="line"><span class="string"><span class="tag">    width: calc(100% - 40px);</span></span></span><br><span class="line"><span class="string"><span class="tag">  &quot;</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;text-wrapper_4 flex-col justify-between&quot;</span> <span class="attr">style</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">    display: flex;</span></span></span><br><span class="line"><span class="string"><span class="tag">    flex-direction: column;</span></span></span><br><span class="line"><span class="string"><span class="tag">    margin-left: 30px;</span></span></span><br><span class="line"><span class="string"><span class="tag">    margin-bottom: 16px;</span></span></span><br><span class="line"><span class="string"><span class="tag">  &quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;text_3&quot;</span> <span class="attr">style</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">    height: 22px;</span></span></span><br><span class="line"><span class="string"><span class="tag">    font-size: 16px;</span></span></span><br><span class="line"><span class="string"><span class="tag">    font-family: PingFang-SC-Bold, PingFang-SC;</span></span></span><br><span class="line"><span class="string"><span class="tag">    font-weight: bold;</span></span></span><br><span class="line"><span class="string"><span class="tag">    color: #2a67ce;</span></span></span><br><span class="line"><span class="string"><span class="tag">    line-height: 22px;</span></span></span><br><span class="line"><span class="string"><span class="tag">  &quot;</span>&gt;</span>&#123;&#123;parent.nick|safe&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;text_4&quot;</span> <span class="attr">style</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">    margin-top: 6px;</span></span></span><br><span class="line"><span class="string"><span class="tag">    margin-right: 22px;</span></span></span><br><span class="line"><span class="string"><span class="tag">    font-size: 16px;</span></span></span><br><span class="line"><span class="string"><span class="tag">    font-family: PingFangSC-Regular, PingFang SC;</span></span></span><br><span class="line"><span class="string"><span class="tag">    font-weight: 400;</span></span></span><br><span class="line"><span class="string"><span class="tag">    color: #000000;</span></span></span><br><span class="line"><span class="string"><span class="tag">    line-height: 22px;</span></span></span><br><span class="line"><span class="string"><span class="tag">  &quot;</span>&gt;</span>&#123;&#123;parent.comment|safe&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">hr</span> <span class="attr">style</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">      display: flex;</span></span></span><br><span class="line"><span class="string"><span class="tag">      position: relative;</span></span></span><br><span class="line"><span class="string"><span class="tag">      border: 1px dashed #859cef2e;</span></span></span><br><span class="line"><span class="string"><span class="tag">      box-sizing: content-box;</span></span></span><br><span class="line"><span class="string"><span class="tag">      height: 0px;</span></span></span><br><span class="line"><span class="string"><span class="tag">      overflow: visible;</span></span></span><br><span class="line"><span class="string"><span class="tag">      width: 100%;</span></span></span><br><span class="line"><span class="string"><span class="tag">  &quot;</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;text-wrapper_4 flex-col justify-between&quot;</span> <span class="attr">style</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">    display: flex;</span></span></span><br><span class="line"><span class="string"><span class="tag">    flex-direction: column;</span></span></span><br><span class="line"><span class="string"><span class="tag">    margin-left: 30px;</span></span></span><br><span class="line"><span class="string"><span class="tag">  &quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;text_3&quot;</span> <span class="attr">style</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">    height: 22px;</span></span></span><br><span class="line"><span class="string"><span class="tag">    font-size: 16px;</span></span></span><br><span class="line"><span class="string"><span class="tag">    font-family: PingFang-SC-Bold, PingFang-SC;</span></span></span><br><span class="line"><span class="string"><span class="tag">    font-weight: bold;</span></span></span><br><span class="line"><span class="string"><span class="tag">    color: #2a67ce;</span></span></span><br><span class="line"><span class="string"><span class="tag">    line-height: 22px;</span></span></span><br><span class="line"><span class="string"><span class="tag">  &quot;</span>&gt;</span>&#123;&#123;self.nick|safe&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;text_4&quot;</span> <span class="attr">style</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">    margin-top: 6px;</span></span></span><br><span class="line"><span class="string"><span class="tag">    margin-right: 22px;</span></span></span><br><span class="line"><span class="string"><span class="tag">    font-size: 16px;</span></span></span><br><span class="line"><span class="string"><span class="tag">    font-family: PingFangSC-Regular, PingFang SC;</span></span></span><br><span class="line"><span class="string"><span class="tag">    font-weight: 400;</span></span></span><br><span class="line"><span class="string"><span class="tag">    color: #000000;</span></span></span><br><span class="line"><span class="string"><span class="tag">    line-height: 22px;</span></span></span><br><span class="line"><span class="string"><span class="tag">  &quot;</span>&gt;</span>&#123;&#123;self.comment|safe&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;text-wrapper_2 flex-col&quot;</span> <span class="attr">style</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">    min-width: 106px;</span></span></span><br><span class="line"><span class="string"><span class="tag">    height: 38px;</span></span></span><br><span class="line"><span class="string"><span class="tag">    background: #859cef2e;</span></span></span><br><span class="line"><span class="string"><span class="tag">    border-radius: 32px;</span></span></span><br><span class="line"><span class="string"><span class="tag">    display: flex;</span></span></span><br><span class="line"><span class="string"><span class="tag">    align-items: center;</span></span></span><br><span class="line"><span class="string"><span class="tag">    justify-content: center;</span></span></span><br><span class="line"><span class="string"><span class="tag">    text-decoration: none;</span></span></span><br><span class="line"><span class="string"><span class="tag">    margin: auto;</span></span></span><br><span class="line"><span class="string"><span class="tag">    margin-top: 32px;</span></span></span><br><span class="line"><span class="string"><span class="tag">  &quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://&#123;&#123;site.postUrl&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;text_5&quot;</span> <span class="attr">style</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">    color: #218adb;</span></span></span><br><span class="line"><span class="string"><span class="tag">  &quot;</span>&gt;</span>查看详情<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;text-group_6 flex-col justify-between&quot;</span> <span class="attr">style</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">    display: flex;</span></span></span><br><span class="line"><span class="string"><span class="tag">    flex-direction: column;</span></span></span><br><span class="line"><span class="string"><span class="tag">    align-items: center;</span></span></span><br><span class="line"><span class="string"><span class="tag">    margin-top: 34px;</span></span></span><br><span class="line"><span class="string"><span class="tag">  &quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;text_6&quot;</span> <span class="attr">style</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">    height: 17px;</span></span></span><br><span class="line"><span class="string"><span class="tag">    font-size: 12px;</span></span></span><br><span class="line"><span class="string"><span class="tag">    font-family: PingFangSC-Regular, PingFang SC;</span></span></span><br><span class="line"><span class="string"><span class="tag">    font-weight: 400;</span></span></span><br><span class="line"><span class="string"><span class="tag">    color: #00000045;</span></span></span><br><span class="line"><span class="string"><span class="tag">    line-height: 17px;</span></span></span><br><span class="line"><span class="string"><span class="tag">  &quot;</span>&gt;</span>此邮件由评论服务自动发出，直接回复无效。<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;text_7&quot;</span> <span class="attr">style</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">    height: 17px;</span></span></span><br><span class="line"><span class="string"><span class="tag">    font-size: 12px;</span></span></span><br><span class="line"><span class="string"><span class="tag">    font-family: PingFangSC-Regular, PingFang SC;</span></span></span><br><span class="line"><span class="string"><span class="tag">    font-weight: 400;</span></span></span><br><span class="line"><span class="string"><span class="tag">    color: #218adb;</span></span></span><br><span class="line"><span class="string"><span class="tag">    line-height: 17px;</span></span></span><br><span class="line"><span class="string"><span class="tag">    margin-top: 6px;</span></span></span><br><span class="line"><span class="string"><span class="tag">    text-decoration: none;</span></span></span><br><span class="line"><span class="string"><span class="tag">  &quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://&#123;&#123;site.url&#125;&#125;&quot;</span>&gt;</span>前往博客<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>适配Waline后改动的地方：</p><ul><li>把洪涝示例中变量的形式改成Waline中变量的形式，比如<code>$&#123;NICK&#125;</code>改为<code>&#123;&#123;self.nick&#125;&#125;</code></li><li>评论内容记得加上<code>save</code>，否则信件中显示的是raw html字符。如：<code>&#123;&#123;self.comment|safe&#125;&#125;</code>。参考：[<a href="https://github.com/walinejs/waline/issues/1034">Bug]: 自定义邮件通知模板后评论内容显示问题 · Issue #1034 · walinejs/waline (github.com)</a></li><li>链接地址加上<code>https://</code>，否则点不了。如<code>href=&quot;https://&#123;&#123;site.url&#125;&#125;&quot;</code></li></ul><p>效果：</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-20230429151028085.png" alt="image-20230429151028085"></p><p>其他样例参考：</p><ul><li><a href="https://www.sarakale.top/blog/posts/537344b2.html">waline 邮件通知模板样式一览 | SaraKale’s blog</a></li><li><a href="https://blog.jyhao.cn/posts/17978.html">自定义Waline/Twikoo邮件通知样式 | Night1918 Blog (jyhao.cn)</a></li><li><a href="https://cloud.tencent.com/developer/article/2211729">Fluid -29- 修改 waline 邮箱通知模板 - 腾讯云开发者社区-腾讯云 (tencent.com)</a></li></ul><h1 id="输入QQ邮箱自动获取QQ头像"><a href="#输入QQ邮箱自动获取QQ头像" class="headerlink" title="输入QQ邮箱自动获取QQ头像"></a>输入QQ邮箱自动获取QQ头像</h1><p>如果你的Waline服务端是按照官方推荐的Vercel部署方式，那么你可以打开Vercel对应的Github仓库，修改index.js文件，将以下内容添加至方框位置：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">此方法或传入一个 comment 对象，你可以通过 comment.mail 获取邮箱。若返回值为 string 类型，则会直接调用返回值作为头像地址，否则正常生成 MD5。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">async</span> <span class="title function_">avatarUrl</span>(<span class="params">comment</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> reg = <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;(\\d+)@qq\\.com$&#x27;</span>, <span class="string">&#x27;i&#x27;</span>);</span><br><span class="line">    <span class="keyword">const</span> mail = comment.<span class="property">mail</span>;</span><br><span class="line">    <span class="keyword">if</span> (reg.<span class="title function_">test</span>(mail)) &#123;</span><br><span class="line">      <span class="keyword">const</span> q = mail.<span class="title function_">replace</span>(<span class="regexp">/@qq\.com/i</span>, <span class="string">&#x27;&#x27;</span>).<span class="title function_">toLowerCase</span>();</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&#x27;https://q1.qlogo.cn/headimg_dl?dst_uin=&#x27;</span> + q + <span class="string">&#x27;&amp;spec=4&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-20230428162327261.png" alt="image-20230428162327261"></p><blockquote><p>你也可以试着写一个根据QQ号自动获取头像和邮箱的函数</p></blockquote><p>参考：<a href="https://waline.js.org/reference/server/config.html#afterdelete-commentid">服务端配置 | Waline</a></p><h1 id="评论区美化（客户端配置）"><a href="#评论区美化（客户端配置）" class="headerlink" title="评论区美化（客户端配置）"></a>评论区美化（客户端配置）</h1><blockquote><p>本小结以Hexo的Butterfly主题为例。</p></blockquote><p>Butterfly的主题配置文件中Waline有一个option字段，里面可以定制自己想要的客户端。在Waline官方文档中有很多定制选项。</p><p>如何将Waline官方文档中的内容与option字段结合起来？我的理解是，关注官网js示例中的init字段，把自定义的地方放到option中。那怎么放，放什么，格式是什么，接下来跟着我的示例进行即可。</p><h2 id="自定义显示文字"><a href="#自定义显示文字" class="headerlink" title="自定义显示文字"></a>自定义显示文字</h2><p>打开主题配置文件，在option中进行配置，配置方法：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">waline:</span></span><br><span class="line">  <span class="attr">option:</span></span><br><span class="line">    <span class="attr">locale:</span> &#123;</span><br><span class="line">      <span class="attr">nick:</span> <span class="string">&#x27;昵称&#x27;</span>,</span><br><span class="line">      <span class="attr">mail:</span> <span class="string">&#x27;邮箱&#x27;</span>,</span><br><span class="line">      <span class="attr">link:</span> <span class="string">&#x27;你的网站&#x27;</span>,</span><br><span class="line">      <span class="attr">placeholder:</span> <span class="string">&#x27;填写数字QQ邮箱可以自动获取QQ头像&#x27;</span>,</span><br><span class="line">      <span class="attr">requiredMeta:</span> [],</span><br><span class="line">      <span class="attr">sofa:</span> <span class="string">&#x27;评论区空空如也~呜呜呜&#x27;</span>,</span><br><span class="line">      <span class="attr">anonymous:</span> <span class="string">&#x27;匿名的野猫&#x27;</span>,</span><br><span class="line">      <span class="attr">login:</span> <span class="string">&#x27;登录(可选)&#x27;</span></span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure><p>locale写法参照<a href="https://waline.js.org/cookbook/customize/locale.html#locale-%E9%80%89%E9%A1%B9">自定义语言 | Waline</a></p><p>参考：<a href="https://afish.org/2022/11/01/waline_comment/">Hexo|Butterfly 添加Waline评论系统 | 小鱼のblog (afish.org)</a></p><h2 id="表情选项卡配置"><a href="#表情选项卡配置" class="headerlink" title="表情选项卡配置"></a>表情选项卡配置</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">waline:</span></span><br><span class="line">  <span class="attr">option:</span></span><br><span class="line">    <span class="attr">emoji:</span> </span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;//unpkg.com/@waline/emojis@1.1.0/bilibili&#x27;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;//unpkg.com/@waline/emojis@1.1.0/qq&#x27;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;//unpkg.com/@waline/emojis@1.1.0/tieba&#x27;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;//unpkg.com/@waline/emojis@1.1.0/weibo&#x27;</span></span><br></pre></td></tr></table></figure><p>注意到官网配置中emoji是一个列表的写法，那转写到Butterfly主题配置文件中就以yaml的列表写法。</p><p>emoji写法参照：<a href="https://waline.js.org/guide/features/emoji.html">表情选项卡 | Waline</a></p><h2 id="反应配置"><a href="#反应配置" class="headerlink" title="反应配置"></a>反应配置</h2><p>Waline中反应指的是文章下方的表态：</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-20230429172431151.png" alt="image-20230429172431151"></p><p>写法：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">waline:</span></span><br><span class="line">  <span class="attr">option:</span></span><br><span class="line">    <span class="attr">reaction:</span> <span class="literal">true</span> <span class="comment"># 开启快速反应</span></span><br></pre></td></tr></table></figure><p>或自己自定义反应：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">waline:</span></span><br><span class="line">  <span class="attr">option:</span></span><br><span class="line">    <span class="attr">reaction:</span> </span><br><span class="line">    <span class="bullet">-</span> <span class="string">表情地址1</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">表情地址2</span></span><br><span class="line">    <span class="comment"># 最多支持9个</span></span><br></pre></td></tr></table></figure><p>reaction写法参照：<a href="https://waline.js.org/guide/features/reaction.html">文章反应 | Waline</a></p><h2 id="魔改CSS"><a href="#魔改CSS" class="headerlink" title="魔改CSS"></a>魔改CSS</h2><p>本来涉及CSS的修改，应该另写css文件再通过inject引入的（这也是Waline官方推荐的做法）。但是试了不太成功，所以打算把waline.css下载到本地，再将CDN指向本地位置。不优雅，但能凑合用。</p><h3 id="主题颜色修改"><a href="#主题颜色修改" class="headerlink" title="主题颜色修改"></a>主题颜色修改</h3><p>css下载到了本地就好办了。根据官方给的<a href="https://waline.js.org/reference/client/style.html">CSS 变量</a>说明，我们可以自己更改css文件。</p><h3 id="评论区背景图"><a href="#评论区背景图" class="headerlink" title="评论区背景图"></a>评论区背景图</h3><p>我的做法是在css中加上：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.wl-editor</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">图片地址</span>);</span><br><span class="line">    <span class="attribute">background-size</span>: <span class="number">10%</span>;</span><br><span class="line">    <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">    <span class="attribute">background-position</span>: right bottom;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="attribute">resize</span>: vertical</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.wl-editor</span><span class="selector-pseudo">:focus</span>&#123;</span><br><span class="line">    <span class="attribute">background-position</span>-x: <span class="number">800px</span>;</span><br><span class="line">    <span class="attribute">background-position</span>-y: <span class="number">1000px</span>;</span><br><span class="line">    <span class="attribute">transition</span>: all <span class="number">0.2s</span> ease-in-out <span class="number">0s</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上面代码是从其他人美化Valine改编以适应Waline来的，然而我的前端知识薄弱，不太懂得每个参数的确切含义与整体文件意义，参数是我自己随便调的。</p><p>参考文章：<a href="https://zhuanlan.zhihu.com/p/581640626">Hexo中Buttefly主题Valine评论系统配置以及美化（七） - 知乎 (zhihu.com)</a></p><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><p>输入提示我没能实现：<a href="https://blog.leonus.cn/2022/inputAlert.html">给你的评论添加一个输入提醒吧 | Leonus</a></p>]]></content>
    
    
    <summary type="html">通过修改客户端或服务端的配置定制自己的Waline评论区</summary>
    
    
    
    <category term="计算机" scheme="https://www.uuanqin.top/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/"/>
    
    <category term="Hexo" scheme="https://www.uuanqin.top/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/Hexo/"/>
    
    
    <category term="Waline" scheme="https://www.uuanqin.top/tags/Waline/"/>
    
    <category term="Vercel" scheme="https://www.uuanqin.top/tags/Vercel/"/>
    
    <category term="Github" scheme="https://www.uuanqin.top/tags/Github/"/>
    
  </entry>
  
  <entry>
    <title>Hexo框架Btterfly主题引入Waline评论系统及国内正常访问</title>
    <link href="https://www.uuanqin.top/p/591f2165.html"/>
    <id>https://www.uuanqin.top/p/591f2165.html</id>
    <published>2023-04-27T08:27:09.000Z</published>
    <updated>2023-04-28T11:33:17.039Z</updated>
    
    <content type="html"><![CDATA[<h1 id="引入Waline评论"><a href="#引入Waline评论" class="headerlink" title="引入Waline评论"></a>引入Waline评论</h1><p>Hexo博客框架Butterfly主题中引入Waline评论操作可以参考以下文章解决：</p><ul><li><a href="https://butterfly.js.org/posts/ceeb73f/#%E8%A9%95%E8%AB%96">Butterfly 安裝文檔(四) 主題配置-2 | Butterfly</a></li><li><a href="https://waline.js.org/guide/get-started/">快速上手 | Waline</a></li></ul><p>注意：</p><ul><li><p>在<a href="https://waline.js.org/guide/get-started/">快速上手 | Waline</a>这篇文章中，请按照指引完成Vercel的部署，并完成<strong>域名绑定</strong>小节（虽然它说可选，但我强烈建议你完成，否则你的评论系统只能在严苛的网络环境中运行）</p></li><li><p>在Butterfly的主题配置文件中有两处需要改：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">comments:</span></span><br><span class="line">  <span class="attr">use:</span> <span class="string">Waline</span> <span class="comment"># Valine,Disqus</span></span><br><span class="line">  <span class="comment"># ...</span></span><br><span class="line">  </span><br><span class="line"><span class="attr">waline:</span></span><br><span class="line">  <span class="attr">serverURL:</span> <span class="string">https://pl.uuanqin.top</span> <span class="comment"># Waline server address url</span></span><br></pre></td></tr></table></figure><p>注意serverURL填自己创建子域名</p></li></ul><h1 id="可能遇到的问题"><a href="#可能遇到的问题" class="headerlink" title="可能遇到的问题"></a>可能遇到的问题</h1><p><strong>问题：评论框已经能在博客中显示，但是获取不到评论内容，且无法发布评论。出现Failed to Fetch错误。但使用魔法后评论系统正常运行。</strong></p><p>解决：打开F12控制台并重新加载问题页面，你可能会发现vervel.app无法访问：</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/vercal%E8%AF%84%E8%AE%BA%E9%97%AE%E9%A2%98.png" alt="vercal评论问题"></p><p>注意到页面向vercel.app发送了GET请求，但此时vercel.app在国内环境是无法访问的。</p><p>排查方向：</p><ul><li><p>首先确保按照<a href="https://waline.js.org/guide/get-started/">快速上手 | Waline</a>设置好了评论系统子域名，或再参考一下这篇文章<a href="https://blog.csdn.net/Panzer_Jack/article/details/127418379?spm=1001.2101.3001.6650.13&utm_medium=distribute.pc_relevant.none-task-blog-2~default~OPENSEARCH~Rate-13-127418379-blog-127204331.pc_relevant_recovery_v2&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~OPENSEARCH~Rate-13-127418379-blog-127204331.pc_relevant_recovery_v2&utm_relevant_index=14">关于waline国内无法使用的解决方案 （vercel.app国内无法使用问题）_vercel 国内访问-CSDN博客</a></p><p>在域名服务器商（例如 阿里云&gt;云解析DNS&gt;域名解析&gt;解析设置）处添加新的 <code>CNAME</code> 解析记录：</p><table><thead><tr><th>Type</th><th>Name</th><th>Value</th></tr></thead><tbody><tr><td><strong>CNAME</strong></td><td><em>example</em>（你想要的子域名名称）</td><td><strong>cname.vercel-dns.com</strong> （也可以是<strong>cname-china.vercel-dns.com</strong>）</td></tr></tbody></table></li><li><p>确保在Butterfly的主题配置文件中设置了正确的Waline服务器地址（比如设置为<em>example.yourdomain.com</em>）。</p></li></ul>]]></content>
    
    
    <summary type="html">由于vercel.app国内访问失败，可通过配置子域名的方法解决</summary>
    
    
    
    <category term="计算机" scheme="https://www.uuanqin.top/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/"/>
    
    <category term="Hexo" scheme="https://www.uuanqin.top/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/Hexo/"/>
    
    
    <category term="问题解决" scheme="https://www.uuanqin.top/tags/%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/"/>
    
    <category term="Waline" scheme="https://www.uuanqin.top/tags/Waline/"/>
    
    <category term="Butterfly" scheme="https://www.uuanqin.top/tags/Butterfly/"/>
    
    <category term="Vercel" scheme="https://www.uuanqin.top/tags/Vercel/"/>
    
  </entry>
  
  <entry>
    <title>校园网有线网连接相关问题</title>
    <link href="https://www.uuanqin.top/p/14a6085b.html"/>
    <id>https://www.uuanqin.top/p/14a6085b.html</id>
    <published>2023-04-17T14:48:01.000Z</published>
    <updated>2023-04-28T11:33:17.031Z</updated>
    
    <content type="html"><![CDATA[<h1 id="有线网的连接"><a href="#有线网的连接" class="headerlink" title="有线网的连接"></a>有线网的连接</h1><p>首先仔细查阅本校校园网的有线连接说明。若学校校园网支持PPPoE链接，则可以按照以下步骤进行拨号连接，无需下载其他PPPoE拨号客户端。</p><p>打开网络设置：</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-20230417225031498.png" alt="image-20230417225031498"></p><p>设置新链接：</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-20230417225948370.png" alt="image-20230417225948370"></p><p>选择连接到Internet：</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-20230417230005682.png" alt="image-20230417230005682"></p><p>点击设置新连接：</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-20230417230107904.png" alt="image-20230417230107904"></p><p>点击，下一页：</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-20230417230137355.png" alt="image-20230417230137355"></p><p>输入用户名和密码，具体请查阅本校校园网配置说明。</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-20230417230208019.png" alt="image-20230417230208019"></p><p>以TJU为例：<a href="https://wiki.tjubot.cn/e-life/network">校园网 - 北洋维基 (tjubot.cn)</a></p><p>注意：连接名称推荐设置为英文名称，以避免以后不必要的麻烦。</p><h1 id="开机自动拨号"><a href="#开机自动拨号" class="headerlink" title="开机自动拨号"></a>开机自动拨号</h1><p>PPPoE拨号设置好后，每次开机都需要手动拨号十分麻烦，我们可以在Windows计划中添加自动拨号的计划任务。</p><p>具体操作请参考这篇文章：<a href="https://blog.csdn.net/weixin_43667077/article/details/112468243?ydreferer=aHR0cHM6Ly9jbi5iaW5nLmNvbS8=">WIN10 电脑设置自动拨号联网任务，实现开机、断网自动重连_我才是一卓的博客-CSDN博客</a>。当然，里面的配置按需配置。</p><h1 id="不必要的麻烦"><a href="#不必要的麻烦" class="headerlink" title="不必要的麻烦"></a>不必要的麻烦</h1><h2 id="Clash魔法失效"><a href="#Clash魔法失效" class="headerlink" title="Clash魔法失效"></a>Clash魔法失效</h2><p>问题描述：使用Clash代理服务，在Windows上按照教程配置好时，无法使用魔法。排除订阅的配置文件的问题。</p><p>解决：校园网拨号连接名称改为英文试试。参考：<a href="https://github.com/Fndroid/clash_for_windows_pkg/issues/4182">开启系统代理后无法使用，左上角数据一直显示0 · Issue #4182 · Fndroid/clash_for_windows_pkg (github.com)</a></p>]]></content>
    
    
    <summary type="html">本文涉及PPPoE拨号指导以及开机自动拨号教程</summary>
    
    
    
    <category term="计算机" scheme="https://www.uuanqin.top/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/"/>
    
    
    <category term="Windows" scheme="https://www.uuanqin.top/tags/Windows/"/>
    
    <category term="Clash" scheme="https://www.uuanqin.top/tags/Clash/"/>
    
    <category term="有线网" scheme="https://www.uuanqin.top/tags/%E6%9C%89%E7%BA%BF%E7%BD%91/"/>
    
    <category term="PPPoE" scheme="https://www.uuanqin.top/tags/PPPoE/"/>
    
  </entry>
  
  <entry>
    <title>解决Bing搜索页自动返回顶部的问题</title>
    <link href="https://www.uuanqin.top/p/f3706885.html"/>
    <id>https://www.uuanqin.top/p/f3706885.html</id>
    <published>2023-04-16T09:03:32.000Z</published>
    <updated>2023-04-28T11:33:17.037Z</updated>
    
    <content type="html"><![CDATA[<p>使用Bing搜索你可能会遇到这个问题：点击一条搜索结果后过段时间再返回搜索页面，搜索页自动返回顶部。就这一点问题，如果你没注意到还好说，认为是一个无痛无痒的小Bug。一旦你开始被这个Bug影响，你就会陷入无限抓狂状态！！</p><p>解决方法，Edge下载Tampermonkey插件：<a href="https://microsoftedge.microsoft.com/addons/detail/tampermonkey/iikmkjmpaadaobahmlepeloendndfphd">Tampermonkey - Microsoft Edge Addons</a></p><p>获取新脚本：</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-20230416171417352.png" alt="image-20230416171417352"></p><p>打开“油叉”：</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-20230416171510008.png" alt="image-20230416171510008"></p><p>搜索FIX for “Bing Search returns to the top” !脚本进行安装即可。</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-20230416171521865.png" alt="image-20230416171521865"></p><p>注意，部分用户可能要改一下脚本的代码，全流程看下图：</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-20230416171802268.png" alt="image-20230416171802268"></p><p>参考：<a href="https://tieba.baidu.com/p/8007376009">必应搜索页过一段时间就会自动回到页面开始位置_必应吧_百度贴吧 (baidu.com)</a></p>]]></content>
    
    
    <summary type="html">Stop doing weird things, Bing ! ;)</summary>
    
    
    
    <category term="计算机" scheme="https://www.uuanqin.top/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/"/>
    
    
    <category term="Bing" scheme="https://www.uuanqin.top/tags/Bing/"/>
    
    <category term="Edge" scheme="https://www.uuanqin.top/tags/Edge/"/>
    
    <category term="Tampermonkey" scheme="https://www.uuanqin.top/tags/Tampermonkey/"/>
    
  </entry>
  
  <entry>
    <title>部署Hexo个人博客框架到服务器</title>
    <link href="https://www.uuanqin.top/p/ad28b4a.html"/>
    <id>https://www.uuanqin.top/p/ad28b4a.html</id>
    <published>2023-04-13T10:10:00.000Z</published>
    <updated>2023-04-28T11:33:17.045Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><h2 id="我为什么要从Wordpress换为Hexo"><a href="#我为什么要从Wordpress换为Hexo" class="headerlink" title="我为什么要从Wordpress换为Hexo"></a>我为什么要从Wordpress换为Hexo</h2><p>一个关键字：卡！Wordpress太卡了，十分笨重和不方便。对于小小服务器来说简直是难以承受。况且对于内容为主的博客，Wordpress显得过于臃肿，有大量插件可以用，也意味着你要看更多的广告和垃圾信息。此外，Wordpress用户数量多，社区庞大，但社区内容鱼龙混杂，充斥大量商业化甚至无用的信息，不够纯粹，质量偏低</p><p>Wordpress对于小白来说好上手，无脑后台管理。而拥有一点点编程经验的我完全可以凭一点点知识储备和动手能力砍掉多余的，无用的东西。Hexo相较于Wordpress，更轻，静态页面对SEO更友好，文章数据管理更方便、更让人贴心。</p><h2 id="实现思路和原理"><a href="#实现思路和原理" class="headerlink" title="实现思路和原理"></a>实现思路和原理</h2><p>整个过程实现的原理可以用下图表示。</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/view" alt="preview"></p><p>可参照下文顺序进行配置。</p><h1 id="本地"><a href="#本地" class="headerlink" title="本地"></a>本地</h1><h2 id="Hexo"><a href="#Hexo" class="headerlink" title="Hexo"></a>Hexo</h2><p>本地启用Hexo：按照官方文档搭建基本环境（Node.js，Git），在本地尝试部署并熟悉hexo的写作流程，了解配置文件结构，此处不再赘述。<a href="https://hexo.io/zh-cn/docs/">官方文档 | Hexo</a></p><p>在本地Hexo站点目录下安装hexo-deployer-git插件：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><h2 id="配置SSH密匙"><a href="#配置SSH密匙" class="headerlink" title="配置SSH密匙"></a>配置SSH密匙</h2><p>为了使本地可以跟远程的 github 建立联系，需要在本地配置 SSH 密钥，这样我们就可以在本地直接提交代码到 GitHub 上或者远端 git 仓库。<br>如果是第一次配置 SSH，则配置一下 git 的 username 和 email</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name <span class="string">&quot;你要设置的名字&quot;</span></span><br><span class="line">git config --global user.email <span class="string">&quot;你要设置的邮箱&quot;</span></span><br></pre></td></tr></table></figure><p>之后生成 SSH 密钥：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">&quot;你刚刚设置的邮箱&quot;</span></span><br></pre></td></tr></table></figure><p>如果不需要设置密码的话，连续三个回车就好了。</p><p>复制好公钥后面要用：</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-20230408233136534.png" alt="image-20230408233136534"></p><h1 id="服务器端"><a href="#服务器端" class="headerlink" title="服务器端"></a>服务器端</h1><blockquote><p>重新初始化阿里云盘后进行的演示。</p></blockquote><p>阿里云盘初始化后，再次使用ssh连接时会有<code>WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!</code>的提示。解决方法：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -R &lt;之前连接时的网段IP&gt;</span><br></pre></td></tr></table></figure><p>再次SSL连接：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh root@60.205.223.216</span><br></pre></td></tr></table></figure><p>出现一句：<br>Are you sure you want to continue connecting (yes/no)?</p><p>输入：yes 回车 </p><p>参考：<a href="https://blog.csdn.net/wangguchao/article/details/85614914">问题解决——SSH时出现WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!_口袋里のInit的博客-CSDN博客</a></p><h2 id="Nginx"><a href="#Nginx" class="headerlink" title="Nginx"></a>Nginx</h2><p>安装Nginx并配置好域名（如果有）。具体操作详见我的这篇文章。</p><h2 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h2><h3 id="git的安装与用户创建"><a href="#git的安装与用户创建" class="headerlink" title="git的安装与用户创建"></a>git的安装与用户创建</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装git</span></span><br><span class="line">yum install git</span><br><span class="line"><span class="comment"># 创建git账户</span></span><br><span class="line">adduser git</span><br><span class="line"><span class="comment"># 添加Git账户权限</span></span><br><span class="line"><span class="built_in">chmod</span> 740 /etc/sudoers</span><br><span class="line">vim /etc/sudoers</span><br></pre></td></tr></table></figure><p>在vim编辑模式下，这个地方加上一行<code>git     ALL=(ALL)     ALL</code>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">## Allow root to run any commands anywhere</span><br><span class="line">root    ALL=(ALL)     ALL</span><br><span class="line">git     ALL=(ALL)     ALL</span><br></pre></td></tr></table></figure><p>执行：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> 400 /etc/sudoers  <span class="comment"># 改回权限</span></span><br><span class="line">sudo passwd git<span class="comment"># 设置 git 账户密码</span></span><br></pre></td></tr></table></figure><p>输两次密码即可：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Changing password <span class="keyword">for</span> user git.</span><br><span class="line">New password:<span class="comment"># 输的时候是看不到的</span></span><br><span class="line">Retype new password:</span><br><span class="line">passwd: all authentication tokens updated successfully.</span><br></pre></td></tr></table></figure><p>执行：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">su git<span class="comment"># 切换至 git 用户</span></span><br><span class="line"><span class="comment"># 创建 ~/.ssh 文件夹和 ~/.ssh/authorized_keys 文件，并赋予相应的权限</span></span><br><span class="line"><span class="built_in">mkdir</span> ~/.ssh</span><br><span class="line">vim ~/.ssh/authorized_keys</span><br><span class="line">然后把本地公钥粘贴在authorized_keys里（详见上文）</span><br><span class="line"><span class="built_in">chmod</span> 600 ~/.ssh/authorized_keys</span><br><span class="line"><span class="built_in">chmod</span> 700 ~/.ssh</span><br></pre></td></tr></table></figure><p>这里提一嘴，有时候切换不了git用户，即<code>su git</code>执行不了。其实也没事，就是知道git用户目录是<code>/home/git/</code>就行，即上面命令中的<code>~</code>指的是<code>/home/git/</code></p><p>在本地电脑中，终端执行：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -v git@&lt;你的服务器主机IP&gt;</span><br></pre></td></tr></table></figure><p>如果能免密登录，那就成了。</p><h3 id="仓库创建与钩子创建"><a href="#仓库创建与钩子创建" class="headerlink" title="仓库创建与钩子创建"></a>仓库创建与钩子创建</h3><p>保证之前在Nginx配置里的网站根目录的权限：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chown</span> -R git:git &lt;网站根目录&gt;</span><br><span class="line"><span class="built_in">chmod</span> -R 755 &lt;网站根目录&gt;</span><br></pre></td></tr></table></figure><p>创建仓库：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> repo <span class="comment"># 我选择在git的用户目录下创建</span></span><br><span class="line"><span class="built_in">cd</span> repo   <span class="comment"># 创建空白的git仓库</span></span><br><span class="line">git init --bare hexo.git<span class="comment"># 创建一个空白的 git 仓库</span></span><br><span class="line"><span class="built_in">chown</span> -R git:git hexo.git<span class="comment"># 注意保证权限</span></span><br><span class="line">vim ~/repo/hexo.git/hooks/post-receive</span><br></pre></td></tr></table></figure><p>在post-receive里边输入：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">git --work-tree=/var/www/uuanqin.top --git-dir=/home/git/repo/hexo.git checkout -f</span><br></pre></td></tr></table></figure><p>以上内容建议手打。可以看出第一个参数对应的是网站根目录，第二个参数是代码仓库目录。</p><p>添加权限：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chown</span> -R git:git hexo.git/hooks/post-receive</span><br><span class="line"><span class="built_in">chmod</span> +x hexo.git/hooks/post-receive</span><br></pre></td></tr></table></figure><h1 id="本地-1"><a href="#本地-1" class="headerlink" title="本地"></a>本地</h1><h2 id="Hexo配置"><a href="#Hexo配置" class="headerlink" title="Hexo配置"></a>Hexo配置</h2><p>进入本地电脑 hexo 博客的根目录，编辑<strong>站点配置文件 _config.yml</strong>，找到 deploy，修改成以下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  #repo改为repo: git@&lt;服务器IP&gt;:&lt;服务器端的仓库&gt;</span><br><span class="line">  repo: git@hjxlog.com:/var/repo/hexo.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure><p>最后在本地电脑 hexo 博客的根目录执行命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo d -g</span><br></pre></td></tr></table></figure><p>出现错误记得检查服务器端权限问题：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chown -R git:git &lt;你的仓库&gt;</span><br><span class="line">chown -R git:git &lt;网站根目录&gt;</span><br></pre></td></tr></table></figure><p>在浏览器输入网址即可。</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-20230409160319825.png" alt="image-20230409160319825"></p><p>嫌每次都输入两个命令麻烦，可以在 package.json 中添加 npm 脚本：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;publish&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo clean &amp;&amp; hexo g -d&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;start&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo clean &amp;&amp; hexo g &amp;&amp; hexo s&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>下次执行时可以直接：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run publish</span><br></pre></td></tr></table></figure><h1 id="其他问题"><a href="#其他问题" class="headerlink" title="其他问题"></a>其他问题</h1><h2 id="钩子不起作用"><a href="#钩子不起作用" class="headerlink" title="钩子不起作用"></a>钩子不起作用</h2><p>出现已经推送到服务器但是钩子不起作用，且出现cannot run hooks/post-receive: No such file or directory的提示：</p><p>请重新创建并<strong>手打</strong>post-receive文件，保证该文件有可执行权。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +x post-receive</span><br><span class="line"><span class="built_in">chown</span> -R git:git post-receive</span><br></pre></td></tr></table></figure><p>参考：<a href="https://blog.csdn.net/qq_48736958/article/details/113444533"> cannot run hooks/post-receive: No such file or directory_渣渣林的博客-CSDN博客</a></p><h2 id="hexo-d命令报错"><a href="#hexo-d命令报错" class="headerlink" title="hexo d命令报错"></a>hexo d命令报错</h2><p>hexo d命令报错 ERROR Deployer not found: git</p><p>解决方案</p><p>这是因为没安装<code>hexo-deployer-git</code>插件，在<strong>站点目录</strong>下输入下面的插件安装就好了：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><p>然后在使用<code>Hexo d</code>命令就可以推送了。</p><p>参考：<a href="https://blog.csdn.net/qq_21808961/article/details/84476504">hexo d命令报错 ERROR Deployer not found: git_蓝蓝223的博客-CSDN博客</a></p><p>文章参考：<a href="https://blog.csdn.net/qq_44706030/article/details/112759634">将 Hexo 部署到阿里云轻量服务器_hexo部署到阿里云_小阳coding的博客-CSDN博客</a></p>]]></content>
    
    
    <summary type="html">将博客框架Hexo部署到ECS服务器。</summary>
    
    
    
    <category term="计算机" scheme="https://www.uuanqin.top/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/"/>
    
    <category term="Hexo" scheme="https://www.uuanqin.top/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/Hexo/"/>
    
    
    <category term="Linux" scheme="https://www.uuanqin.top/tags/Linux/"/>
    
    <category term="ECS" scheme="https://www.uuanqin.top/tags/ECS/"/>
    
  </entry>
  
  <entry>
    <title>Nginx的安装与配置</title>
    <link href="https://www.uuanqin.top/p/661ecc9.html"/>
    <id>https://www.uuanqin.top/p/661ecc9.html</id>
    <published>2023-04-13T10:05:00.000Z</published>
    <updated>2023-04-28T11:33:17.029Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><strong>环境信息</strong>：<br>CPU&amp;内存：1核(vCPU)2 GiB<br>操作系统：Alibaba Cloud Linux 3.2104 64位<br>实例规格：ecs.n4.small<br>实例规格族：共享计算型<br>刚刚初始化云盘的ECS服务器。</p></blockquote><h1 id="安装Nginx"><a href="#安装Nginx" class="headerlink" title="安装Nginx"></a>安装Nginx</h1><p>运行以下命令安装Nginx</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dnf -y install http://nginx.org/packages/centos/8/x86_64/RPMS/nginx-1.22.1-1.el8.ngx.x86_64.rpm </span><br></pre></td></tr></table></figure><p>您可以访问<a href="https://nginx.org/packages/centos/8/x86_64/RPMS/">Nginx官方安装包</a>获取适用于CentOS 8系统的多版本的Nginx安装包。</p><p>运行以下命令查看Nginx版本。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx -v</span><br></pre></td></tr></table></figure><p>启动Nginx服务：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start nginx</span><br></pre></td></tr></table></figure><p>在本地电脑的浏览器输入主机地址并访问，出现Nginx默认页面即成功。</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-20230409141117412.png" alt="image-20230409141117412"></p><h1 id="配置Nginx"><a href="#配置Nginx" class="headerlink" title="配置Nginx"></a>配置Nginx</h1><p>找到nginx.conf文件进行配置，一般在<code>/etc/nginx</code>目录下。但我遇到一个问题，就是配置文件没有server字段。于是我参考了这篇文章：<a href="https://blog.csdn.net/qq_37283570/article/details/112854376">nginx.conf文件里没有server字段无法添加_nginxconf没有server_猴子奔跑的博客-CSDN博客</a>。最终在<code>/etc/nginx/conf.d/default.conf</code>中找到了。</p><p>修改配置文件，设定好网站的根目录：</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-20230408205637757.png" alt="image-20230408205637757"></p><p>重启Nginx：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart nginx</span><br></pre></td></tr></table></figure><p>你可以在服务器上对应自己设置的根目录创建文本文件，如<code>xiazai.txt</code>，然后浏览器访问网址<code>&lt;服务器主机IP&gt;/xiazai.txt</code>进行测试。</p><p>参考：</p><p><a href="https://help.aliyun.com/document_detail/464754.html?spm=a2c4g.472049.0.0.6a8d4de5bhOeVO">CentOS 8 自建安装 Nginx+Mysql环境+PHP环境 (aliyun.com)</a></p><p><a href="https://blog.csdn.net/github_38336924/article/details/82756779">Linux Nginx 配置/绑定域名_nginx配置域名_dadeity的博客-CSDN博客</a></p>]]></content>
    
    
    <summary type="html">阿里云安装与配置Nginx。</summary>
    
    
    
    <category term="计算机" scheme="https://www.uuanqin.top/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/"/>
    
    
    <category term="Linux" scheme="https://www.uuanqin.top/tags/Linux/"/>
    
    <category term="ECS" scheme="https://www.uuanqin.top/tags/ECS/"/>
    
    <category term="Nginx" scheme="https://www.uuanqin.top/tags/Nginx/"/>
    
    <category term="安装" scheme="https://www.uuanqin.top/tags/%E5%AE%89%E8%A3%85/"/>
    
  </entry>
  
  <entry>
    <title>多端同步Xmind思维导图</title>
    <link href="https://www.uuanqin.top/p/cce6330b.html"/>
    <id>https://www.uuanqin.top/p/cce6330b.html</id>
    <published>2022-07-25T07:00:30.000Z</published>
    <updated>2023-04-28T11:33:17.017Z</updated>
    
    <content type="html"><![CDATA[<p>使用软件：Xmind+OneDrive+foldersync pro</p><ul><li>  电脑端：OneDrive，Xmind</li><li>  安卓（鸿蒙）端（手机/平板）：Xmind，foldersync pro</li></ul><h4 id="操作方法"><a href="#操作方法" class="headerlink" title="操作方法"></a>操作方法</h4><p>基本原理：</p><ul><li>  电脑端上，在Onedrive创建文件夹（这个文件夹是OneDrive里的），里面放置需要实时同步的文件。</li><li>  安卓端上，使用Xmind时软件会引导你指定一个文件夹是的Xmind拥有读写权限。假设这个文件夹在手机里名为/Xmind。使用foldersync pro软件可以将手机的一个文件夹与OneDrive里的文件夹进行实时同步。</li></ul><p>bilibili视频：<a href="https://www.bilibili.com/video/BV1bu411k74U/?spm_id_from=888.80997.embed_other.whitelist">https://www.bilibili.com/video/BV1bu411k74U/?spm_id_from=888.80997.embed_other.whitelist</a></p><h4 id="安卓端额外的设置"><a href="#安卓端额外的设置" class="headerlink" title="安卓端额外的设置"></a>安卓端额外的设置</h4><p>Xmind记得取消它的联网权限，这样防止它总是弹出自动更新的提示框。</p><p>foldersync pro除了一开始它引导的设置之外，还需要自己手动在（鸿蒙系统）“应用启动管理”中选择手动管理，并把三个选项都选上。</p>]]></content>
    
    
    <summary type="html">实现Xmind思维导图的三端同步。</summary>
    
    
    
    <category term="计算机" scheme="https://www.uuanqin.top/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/"/>
    
    <category term="安卓" scheme="https://www.uuanqin.top/categories/%E5%AE%89%E5%8D%93/"/>
    
    
    <category term="实现" scheme="https://www.uuanqin.top/tags/%E5%AE%9E%E7%8E%B0/"/>
    
    <category term="foldersync" scheme="https://www.uuanqin.top/tags/foldersync/"/>
    
    <category term="OneDrive" scheme="https://www.uuanqin.top/tags/OneDrive/"/>
    
    <category term="Xmind" scheme="https://www.uuanqin.top/tags/Xmind/"/>
    
    <category term="鸿蒙" scheme="https://www.uuanqin.top/tags/%E9%B8%BF%E8%92%99/"/>
    
  </entry>
  
  <entry>
    <title>感谢篇</title>
    <link href="https://www.uuanqin.top/p/9a8851cf.html"/>
    <id>https://www.uuanqin.top/p/9a8851cf.html</id>
    <published>2022-07-01T10:00:31.000Z</published>
    <updated>2023-04-28T11:33:17.081Z</updated>
    
    <content type="html"><![CDATA[<p>本文章为闲聊心得文。</p><h1 id="技术备忘"><a href="#技术备忘" class="headerlink" title="技术备忘"></a>技术备忘</h1><p>关于大项目开发中有几个技术核心点是值得学习和利用的：</p><ul><li>  PyQt UI界面设计</li><li>  跳转设计</li><li>  样式设计</li><li>  合作开发模式</li><li>  Pyqt子窗口嵌入</li><li>  终端嵌入的实现方法</li></ul><h1 id="未来可探究"><a href="#未来可探究" class="headerlink" title="未来可探究"></a>未来可探究</h1><p>项目还存在发展空间（我们还可以做到更好的点）：</p><ul><li>  UI用例显示</li><li>  UI日志友好回显</li><li>  成功打包、安装、运行PyQt项目</li><li>  打开目录时不卡顿的解决</li></ul><h1 id="答辩"><a href="#答辩" class="headerlink" title="答辩"></a>答辩</h1><p>当初见面时，自己定的目标是“成就”，后改口“成长”。毕竟实训只是一个平台，能实现“成就”的平台还要自己探索，取得“成就”的能力还需要自己去培养。</p><p>导师问题：</p><ul><li>  这次实训，你的目标达成了百分之多少？还需要做哪些努力以达到这个目标？</li><li>  对于这次实训你有什么想说的？有什么想吐槽的？</li><li>  如果大项目再重新做，你会怎样做？项目还有哪些需要改进的地方？</li></ul><hr><h1 id="总结与回顾"><a href="#总结与回顾" class="headerlink" title="总结与回顾"></a>总结与回顾</h1><p>两个多月的共同工作，对于我来说是收获了许多经验的。</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-20220701173447198.png" alt="image-20220701173447198"></p><p>期间做了许多工作，了解到了许多工作流程。</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-20220701173528924.png" alt="image-20220701173528924"></p><p>不管是画图还是代码、文档，有始有终做完一件事情是十分有成就感的。</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-20220701173710136.png" alt="image-20220701173710136"></p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-20220701173731781.png" alt="image-20220701173731781"></p><p>期间，自己开辟新战线。自我钻研时我感觉十分自由。当然团队合作时对每个人也是一个考验。</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-20220701173923859.png" alt="image-20220701173923859"></p><p>交到玩的不错的新朋友、体验一次十分不错的团队合作也是我的重要收获之一。</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-20220701174025478.png" alt="image-20220701174025478"></p><p>有成就，也有遗憾。希望未来的我们都在自己的道路上发光发热。</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-20220701174237168.png" alt="image-20220701174237168"></p><p>十分感谢一起合作的同学们，以及陪伴我们成长的导师们！</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/%E5%9B%BE%E7%89%87202207011726.jpg" alt="image"></p><p>有缘再聚！</p>]]></content>
    
    
    <summary type="html">实训结束，未来可期。</summary>
    
    
    
    <category term="计算机" scheme="https://www.uuanqin.top/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/"/>
    
    <category term="麒麟实训" scheme="https://www.uuanqin.top/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E9%BA%92%E9%BA%9F%E5%AE%9E%E8%AE%AD/"/>
    
    
    <category term="PyQt" scheme="https://www.uuanqin.top/tags/PyQt/"/>
    
  </entry>
  
  <entry>
    <title>撷英3 - Python执行Linux命令公共方法</title>
    <link href="https://www.uuanqin.top/p/d2d14e2a.html"/>
    <id>https://www.uuanqin.top/p/d2d14e2a.html</id>
    <published>2022-07-01T09:20:53.000Z</published>
    <updated>2023-04-28T11:33:17.074Z</updated>
    
    <content type="html"><![CDATA[<p>废话不说，show you my code，自己看。</p><p>这些公共方法可以直接用于<strong>执行sudo指令、验证用户密码、以及执行普通命令</strong>。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">sudo_verify</span>(<span class="params">password:<span class="built_in">str</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    在使用sudo命令之前最好调用一次该程序验证sudo密码的正确性。</span></span><br><span class="line"><span class="string">    :param password: 需要验证的密码</span></span><br><span class="line"><span class="string">    :return: 布尔类型 表示通过与否，字符串类型表示返回信息。（密码正确时返回空串）</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    test_str = <span class="string">&#x27;sudo test&#x27;</span></span><br><span class="line"></span><br><span class="line">    echo = subprocess.Popen([<span class="string">&#x27;echo&#x27;</span>, password], stdout=subprocess.PIPE, )</span><br><span class="line"></span><br><span class="line">    sudo = subprocess.Popen([<span class="string">&#x27;sudo&#x27;</span>, <span class="string">&#x27;-S&#x27;</span>, <span class="string">&#x27;echo&#x27;</span>, test_str],</span><br><span class="line">                            stdin=echo.stdout,</span><br><span class="line">                            stdout=subprocess.PIPE,</span><br><span class="line">                            <span class="comment"># stderr=subprocess.PIPE</span></span><br><span class="line">                            )</span><br><span class="line"></span><br><span class="line">    return_str = sudo.stdout.read().decode().replace(<span class="string">&quot;\n&quot;</span>,<span class="string">&quot;&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> return_str == test_str:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span>,<span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span>,return_str.replace(<span class="string">&quot;\n&quot;</span>,<span class="string">&quot;&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">sudo_do_something</span>(<span class="params">password:<span class="built_in">str</span>,command:<span class="built_in">list</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    调用此方法以执行需要加sudo的命令。</span></span><br><span class="line"><span class="string">    :param password: 密码</span></span><br><span class="line"><span class="string">    :param command: 列表,如：[&#x27;./run.sh&#x27;, test_type, debpkg]</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    is_pass,rtstring=sudo_verify(password)</span><br><span class="line">    <span class="keyword">if</span> is_pass:</span><br><span class="line">        echo = subprocess.Popen([<span class="string">&#x27;echo&#x27;</span>, password], stdout=subprocess.PIPE, )</span><br><span class="line">        sudo = subprocess.Popen([<span class="string">&#x27;sudo&#x27;</span>, <span class="string">&#x27;-S&#x27;</span>] + command,</span><br><span class="line">                                stdin=echo.stdout,</span><br><span class="line">                                stdout=subprocess.PIPE,</span><br><span class="line">                                <span class="comment"># stderr=subprocess.PIPE</span></span><br><span class="line">                                )</span><br><span class="line"></span><br><span class="line">        rtstring = sudo.stdout.read().decode()</span><br><span class="line">    <span class="keyword">return</span> is_pass,rtstring</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">command</span>(<span class="params">command</span>):</span><br><span class="line">    p = subprocess.Popen(command,</span><br><span class="line">                            <span class="comment"># stdin=echo.stdout,</span></span><br><span class="line">                            stdout=subprocess.PIPE,</span><br><span class="line">                            <span class="comment"># stderr=subprocess.PIPE</span></span><br><span class="line">                            )</span><br><span class="line"></span><br><span class="line">    rtstring = p.stdout.read().decode()</span><br><span class="line">    <span class="keyword">return</span> rtstring</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">Linux下使用Python执行命令。</summary>
    
    
    
    <category term="计算机" scheme="https://www.uuanqin.top/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/"/>
    
    <category term="麒麟实训" scheme="https://www.uuanqin.top/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E9%BA%92%E9%BA%9F%E5%AE%9E%E8%AE%AD/"/>
    
    
    <category term="Linux" scheme="https://www.uuanqin.top/tags/Linux/"/>
    
    <category term="实现" scheme="https://www.uuanqin.top/tags/%E5%AE%9E%E7%8E%B0/"/>
    
    <category term="Python" scheme="https://www.uuanqin.top/tags/Python/"/>
    
    <category term="subprocess" scheme="https://www.uuanqin.top/tags/subprocess/"/>
    
  </entry>
  
  <entry>
    <title>撷英2 - Python代码控制word文档模板</title>
    <link href="https://www.uuanqin.top/p/88ab6731.html"/>
    <id>https://www.uuanqin.top/p/88ab6731.html</id>
    <published>2022-07-01T09:13:49.000Z</published>
    <updated>2023-04-28T11:33:17.075Z</updated>
    
    <content type="html"><![CDATA[<p>通过python是可以控制word文档内容的，本篇文章简要介绍其原理，具体实现与实际案例可看我的开源项目。详细文档可查看我的<strong>飞书文档&gt;麒麟实训&gt;大作业-文档生成工具</strong>。</p><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>文档生成工具主要通过对自动化适配工具生成的csv报告、html报告进行读取、解析、整理，进而生成指定的word总报告。</p><p>项目地址：<a href="https://gitee.com/uuanqin/report_generator.git">https://gitee.com/uuanqin/report_generator.git</a></p><h3 id="基本原理"><a href="#基本原理" class="headerlink" title="基本原理"></a>基本原理</h3><p>每一个word文档都可以通过xml表示，这个xml中包含文字信息和格式信息。通过给定的doc报告模板，我们可以以xml的方式进行操作，在实现增删改查xml元素的同时保持原有给定的格式基本不变。</p><h3 id="业务流程"><a href="#业务流程" class="headerlink" title="业务流程"></a>业务流程</h3><p>伪代码：</p><ul><li>  获取所有生成最终报告需要的源报告路径</li><li>  根据路径对文件及文件夹进行读取</li><li>  对每个文件中的数据提取、解析、整理</li><li>  读取报告模板，填写每个部分的word表格</li><li>  “FAIL”,”PASS”字体染色</li><li>  保存为中间文件_temp.xml_</li><li>  读取_temp.xml_，替换其中的变量，保存为中间文件 <em>麒麟操作系统适配认证自动化测试报告.xml</em></li><li>  移动 <em>麒麟操作系统适配认证自动化测试报告.xml</em> 到目标文件夹中，修改后缀为.doc</li></ul><h3 id="效果示例"><a href="#效果示例" class="headerlink" title="效果示例"></a>效果示例</h3><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-20220701160509387.png" alt="image-20220701160509387"></p><h3 id="文档对象插入"><a href="#文档对象插入" class="headerlink" title="文档对象插入"></a>文档对象插入</h3><p>关于python控制word中的文档对象可查看以下方法：</p><p><a href="https://blog.csdn.net/u011420268/article/details/106402153/">python在word文档里插入文件对象_奶爸大山的博客-CSDN博客_python word附件</a></p><p>经我与导师们实际调研与操作得到以下结论：</p><ul><li>  需要事先在word插入好文档对象，我们才可能通过代码改变这个文档对象。</li><li>  python代码中只能改变文档对象指向的内容，新增加文档对象。</li><li>  支持改变的文档对象只能是xlsx格式或docx格式，其他格式的文档对象插入时，生成的ole.bin文件暂时没找到办法进行生成。</li></ul>]]></content>
    
    
    <summary type="html">Python实现填充Word文档模板。</summary>
    
    
    
    <category term="计算机" scheme="https://www.uuanqin.top/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/"/>
    
    <category term="麒麟实训" scheme="https://www.uuanqin.top/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E9%BA%92%E9%BA%9F%E5%AE%9E%E8%AE%AD/"/>
    
    
    <category term="实现" scheme="https://www.uuanqin.top/tags/%E5%AE%9E%E7%8E%B0/"/>
    
    <category term="Python" scheme="https://www.uuanqin.top/tags/Python/"/>
    
    <category term="CSV" scheme="https://www.uuanqin.top/tags/CSV/"/>
    
    <category term="html" scheme="https://www.uuanqin.top/tags/html/"/>
    
    <category term="lxml" scheme="https://www.uuanqin.top/tags/lxml/"/>
    
    <category term="OLE" scheme="https://www.uuanqin.top/tags/OLE/"/>
    
    <category term="Word" scheme="https://www.uuanqin.top/tags/Word/"/>
    
    <category term="XML" scheme="https://www.uuanqin.top/tags/XML/"/>
    
  </entry>
  
  <entry>
    <title>撷英1 - Pyqt程序编译与打包探索</title>
    <link href="https://www.uuanqin.top/p/43259c9d.html"/>
    <id>https://www.uuanqin.top/p/43259c9d.html</id>
    <published>2022-07-01T09:00:26.000Z</published>
    <updated>2023-04-28T11:33:17.077Z</updated>
    
    <content type="html"><![CDATA[<p>本篇文章内容仅供简略参考。</p><p>文章内容来源于我的<strong>飞书文档&gt;麒麟实训&gt;大作业-编译与打包</strong>，更多问题的详细记录、示例文件以及调研文档请参看源文档。</p><h1 id="Python源码编译"><a href="#Python源码编译" class="headerlink" title="Python源码编译"></a>Python源码编译</h1><p>python编译<br>安装pyinstaller:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install https://github.com/pyinstaller/pyinstaller/tarball/develop</span><br></pre></td></tr></table></figure><p>只需对入口文件执行命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 两种打包方式</span></span><br><span class="line">pyinstaller -F run.py <span class="comment"># 打包成一个二进制文件，但启动速度慢</span></span><br><span class="line">pyinstaller -D run.py <span class="comment"># 打包出多个文件，程序启动速度快</span></span><br></pre></td></tr></table></figure><p>参考：<br><a href="http://c.biancheng.net/view/2690.html">Python PyInstaller安装和使用教程（详解版） (biancheng.net)</a><br><a href="https://blog.csdn.net/qq_38316721/article/details/122599987">PyQt5软件打包_王火火的博客-CSDN博客_pyqt打包</a></p><h1 id="Pyqt窗口图标"><a href="#Pyqt窗口图标" class="headerlink" title="Pyqt窗口图标"></a>Pyqt窗口图标</h1><p>关于应用程序窗口图标显示问题可参考：<a href="http://t.zoukankan.com/jingsupo-p-13536449.html">http://t.zoukankan.com/jingsupo-p-13536449.html</a><br>加代码的地方：在ui转成的.py文件</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">self.setWindowIcon(QIcon(<span class="string">&#x27;:/signal-slot-demo.ico&#x27;</span>))</span><br></pre></td></tr></table></figure><p>打包后，编译生成的二进制文件的同级目录需要放上图标。</p><h1 id="打包过程总览"><a href="#打包过程总览" class="headerlink" title="打包过程总览"></a>打包过程总览</h1><ol><li> 按照《麒麟软件打包规范》构造deb包目录</li><li> 打开源码项目执行<code>pyinstaller -D run.py -n signal-slot-demo</code></li><li> 在pyinstaller中生成的signal-slot-demo文件夹中添加icon图标。并将该文件夹放入构造好的deb包目录下的/opt/apps/中</li></ol><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.cos.ap-nanjing.myqcloud.com/img/asynccode" alt="img"></p><ol start="4"><li> 进入构造好的目录，执行命令：<code>debuild -i -us -uc -b</code></li><li> 返回上一级目录执行：<code>sudo dpkg -i signal-slot-demo_1.0.0-1_all.deb</code></li></ol><p>结果：运行正常。窗口图标、任务栏图标、开始菜单栏图标运行正常。（开始菜单栏中的图标是.desktop文件中Icon指定的svg图标。程序窗口以及任务栏图标是Pyqt中代码指定的图标。）</p><h1 id="具体文件示例"><a href="#具体文件示例" class="headerlink" title="具体文件示例"></a>具体文件示例</h1><p>Control 文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Source: signal-slot-demo</span><br><span class="line">Version: 1.0.0</span><br><span class="line">Maintainer: Wu WanQin &lt;wuanqin@tju.edu.cn&gt;</span><br><span class="line">Section: unknown</span><br><span class="line">Priority: optional</span><br><span class="line">Build-Depends: debhelper</span><br><span class="line">Standards-Version: 4.4.1</span><br><span class="line">Homepage: https://uuanqin.top</span><br><span class="line"></span><br><span class="line">Package:signal-slot-demo</span><br><span class="line">Multi-Arch: foreign</span><br><span class="line">Architecture: all</span><br><span class="line">Depends: $&#123;shlibs:Depends&#125;, $&#123;misc:Depends&#125;</span><br><span class="line">Description: 信号与信号槽示例。</span><br></pre></td></tr></table></figure><p>Install 文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">opt/apps/signal-slot-demo/ /opt/apps</span><br><span class="line">usr/share /usr/</span><br></pre></td></tr></table></figure><p>.desktop 文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[Desktop Entry]</span><br><span class="line">Name=Signal-Slot-Demo</span><br><span class="line">Comment=An example</span><br><span class="line">Exec=/opt/apps/signal-slot-demo/signal-slot-demo %F</span><br><span class="line">Icon=/usr/share/icons/scalable/apps/signal-slot-demo.svg</span><br><span class="line">Terminal=false</span><br><span class="line">Type=Application</span><br><span class="line">X-Ubuntu-Touch=true</span><br><span class="line">Categories=Office</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">pyqt程序的编译与打包基本流程与示例。</summary>
    
    
    
    <category term="计算机" scheme="https://www.uuanqin.top/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/"/>
    
    <category term="麒麟实训" scheme="https://www.uuanqin.top/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E9%BA%92%E9%BA%9F%E5%AE%9E%E8%AE%AD/"/>
    
    
    <category term="Python" scheme="https://www.uuanqin.top/tags/Python/"/>
    
    <category term="Deb包" scheme="https://www.uuanqin.top/tags/Deb%E5%8C%85/"/>
    
    <category term="pyinstaller" scheme="https://www.uuanqin.top/tags/pyinstaller/"/>
    
    <category term="PyQt" scheme="https://www.uuanqin.top/tags/PyQt/"/>
    
    <category term="编译" scheme="https://www.uuanqin.top/tags/%E7%BC%96%E8%AF%91/"/>
    
  </entry>
  
  <entry>
    <title>设备管理器网卡属性没有电源管理选项卡的解决方法</title>
    <link href="https://www.uuanqin.top/p/dec4b8f.html"/>
    <id>https://www.uuanqin.top/p/dec4b8f.html</id>
    <published>2022-07-01T02:48:17.000Z</published>
    <updated>2023-04-28T11:33:17.035Z</updated>
    
    <content type="html"><![CDATA[<p>在设置网卡属性时，有时候（比如在设置WOL时）需要在“电源管理”选项卡中进行相应设置。</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-20220627115459612.png" alt="image-20220627115459612"></p><p>但在某些情况下并没有这个选项卡。这里提供一个修改注册表的方法。</p><p><strong>注意：修改注册表有风险，容易引起系统的不稳定，建议在修改前备份注册表！！</strong></p><p>打开注册表编辑器，在对应位置增加字段：</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-20220627120834579.png" alt="image-20220627120834579"></p><p>关机重启电脑即可。</p><h1 id="疑似副作用"><a href="#疑似副作用" class="headerlink" title="疑似副作用"></a>疑似副作用</h1><p>关机按钮没有睡眠这一项。轻按键盘关机键原本是直接睡眠，不关电脑。现在直接关电脑，但重启时仍保持关闭时的布局。</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-20220627121017453.png" alt="image-20220627121017453"></p><p>参考链接：<a href="https://answers.microsoft.com/en-us/windows/forum/all/power-management-tab-is-missing-in-device-manager/f84fe229-fb66-4aa1-a397-e9ac65f791e5">Power management tab is missing in device manager! - Microsoft Community</a></p>]]></content>
    
    
    <summary type="html">通过修改注册表的方式显示网卡的“电源管理”选项卡。</summary>
    
    
    
    <category term="计算机" scheme="https://www.uuanqin.top/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/"/>
    
    
    <category term="注册表" scheme="https://www.uuanqin.top/tags/%E6%B3%A8%E5%86%8C%E8%A1%A8/"/>
    
    <category term="WOL" scheme="https://www.uuanqin.top/tags/WOL/"/>
    
    <category term="网卡" scheme="https://www.uuanqin.top/tags/%E7%BD%91%E5%8D%A1/"/>
    
    <category term="设备管理器" scheme="https://www.uuanqin.top/tags/%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86%E5%99%A8/"/>
    
    <category term="问题解决" scheme="https://www.uuanqin.top/tags/%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/"/>
    
  </entry>
  
  <entry>
    <title>Deb的打包（小练习分享）</title>
    <link href="https://www.uuanqin.top/p/556f2cfc.html"/>
    <id>https://www.uuanqin.top/p/556f2cfc.html</id>
    <published>2022-04-26T14:25:43.000Z</published>
    <updated>2023-04-28T11:33:17.070Z</updated>
    
    <content type="html"><![CDATA[<p>练习Deb的打包流程。<strong>本文章为一次小练习的记录，操作过程多少有瑕疵，可能不适合实践参考。</strong>“实训撷英”专栏将有更专门的打包介绍。</p><p>文章部分内容来源于我的实训工作文档：<strong>《练习1过程文档（改进）》、《练习2过程文档（改进）》</strong>。规范的打包过程请参考《麒麟软件打包规范》。</p><h1 id="Deb的二进制文件打包"><a href="#Deb的二进制文件打包" class="headerlink" title="Deb的二进制文件打包"></a>Deb的二进制文件打包</h1><p>创建DEBIAN文件夹、etc、opt、usr文件夹。</p><p>目录格式：</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-64.png"></p><p>在DEBIAN文件夹下创建control文件：</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-65.png"></p><blockquote><p>企业老师给出的意见：</p><p><strong>control文件中包含空的关键字，应该删除，如section无对应信息则不存在。</strong></p></blockquote><p>最终的目录结构：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── DEBIAN</span><br><span class="line">│   └── control</span><br><span class="line">├── etc</span><br><span class="line">├── opt</span><br><span class="line">│   └── sublime-text</span><br><span class="line">│       ├── changelog.txt</span><br><span class="line">│       ├── crash_reporter</span><br><span class="line">│       ├── Lib</span><br><span class="line">│       ├── libcrypto.so.1.1</span><br><span class="line">│       ├── libssl.so.1.1</span><br><span class="line">│       ├── Packages</span><br><span class="line">│       ├── plugin_host-3.3</span><br><span class="line">│       ├── plugin_host-3.8</span><br><span class="line">|       ├── Icon </span><br><span class="line">│       └── sublime_text</span><br><span class="line">└── usr</span><br><span class="line">    └── share</span><br><span class="line">        └── applications</span><br><span class="line">        │   └── sublime_text.desktop</span><br><span class="line">        └──icons</span><br><span class="line">        └── hicolor</span><br><span class="line">        ├──128x128</span><br><span class="line">            │   └── apps</span><br><span class="line">            │   └── sublime-text.png</span><br><span class="line">            └──256x256</span><br><span class="line">            ... ...</span><br></pre></td></tr></table></figure><p>打包：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dpkg -b project project_v1.0.0_amd64.deb</span><br></pre></td></tr></table></figure><p>安装：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dpkg -i project_v1.0.0_amd64.deb</span><br></pre></td></tr></table></figure><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-66.png"></p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/3419d8f19c789d4a0df5853d710f223.png"></p><p>新程序</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-20220427112054890.png"></p><p>运行效果</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-69.png"></p><p>卸载：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo dpkg -r project</span><br><span class="line"></span><br><span class="line"><span class="comment"># 干净卸载：</span></span><br><span class="line">sudo dpkg -P sublime-text</span><br></pre></td></tr></table></figure><p>参考：<a href="https://blog.csdn.net/LvJzzZ/article/details/109452895">deb打包流程步骤_逐渐江江江江化的博客-CSDN博客_deb打包</a></p><h1 id="问题解决"><a href="#问题解决" class="headerlink" title="问题解决"></a>问题解决</h1><h2 id="开始菜单图标显示不出来的问题"><a href="#开始菜单图标显示不出来的问题" class="headerlink" title="开始菜单图标显示不出来的问题"></a>开始菜单图标显示不出来的问题</h2><p>请注意：图标目录<strong>Icons</strong>的名称和位置进行正确的设置、以及放置。参看上文给的目录树。</p><p>比如正确的放置方法时：icons/hicolor/128x128/下，还需要建立apps文件夹，里面放置png图标。</p><h2 id="打包报错：软件包名字错误"><a href="#打包报错：软件包名字错误" class="headerlink" title="打包报错：软件包名字错误"></a>打包报错：软件包名字错误</h2><p>注意，“Package”字段的内容，用“-”（减号）不用“_“（下划线）哦，否则会报以下错误：</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/b1019d44efa1006555b419258d254b2.png"></p><p>借shibo同学的图</p><h2 id="打包报错：与本机架构不符"><a href="#打包报错：与本机架构不符" class="headerlink" title="打包报错：与本机架构不符"></a>打包报错：与本机架构不符</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dpkg --add-architecture amd64</span><br></pre></td></tr></table></figure><p>参考：<a href="https://blog.csdn.net/qiuchangyong/article/details/97505379">Ubuntu使用dpkg查看与修改architecture的用法_qiuchangyong的博客-CSDN博客</a></p><h1 id="Deb源码打包"><a href="#Deb源码打包" class="headerlink" title="Deb源码打包"></a>Deb源码打包</h1><p>下载源码压缩包，解压。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar zxvf p7zip.tar.gz</span><br></pre></td></tr></table></figure><p>将解压后的文件移动到构造好的目录中，得到以下目录结构：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── opt</span><br><span class="line">│   └── apps</span><br><span class="line">│       └── p7zip</span><br><span class="line">│           ├── Asm</span><br><span class="line">│           │   └── x86</span><br><span class="line">│           ├── C</span><br><span class="line">│           ├── check</span><br><span class="line">│           ├── contrib</span><br><span class="line">│           ├── CPP</span><br><span class="line">│           ├── DOC</span><br><span class="line">│           ├── GUI</span><br><span class="line">│           ├── man1</span><br><span class="line">│           └── Utils     // 不应该存放源码</span><br><span class="line">└── usr</span><br><span class="line">    └── share</span><br><span class="line">        ├── applications</span><br><span class="line">        └── icons</span><br><span class="line">            └── hicolor</span><br></pre></td></tr></table></figure><blockquote><p>企业老师给出的意见：</p><p>_不应该_将源码文件全部存放到/opt/apps/p7zip目录下（因为是二进制软件包，不应该将源码存放到对应目录下）；不应该有空目录/usr/share/icons/hicolor</p></blockquote><p>在/p7zip-16.02目录下执行指令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dh_make --createorig -s</span><br></pre></td></tr></table></figure><p>生成debian文件夹。</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-20220506102802357.png" alt="image-20220506102802357"></p><p>修改debian/control</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-20220506104427558.png" alt="image-20220506104427558"></p><p>在rules中添加Override：</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-20220506104934917.png" alt="image-20220506104934917"></p><p>在debian下创建install文件，并写入以下内容：</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-20220506110213565.png" alt="image-20220506110213565"></p><p>执行debuild命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">debuild -i -us -uc -b</span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成过程需要补充安装以下软件（Build-Depends）</span></span><br><span class="line">sudo apt-get install debhelper</span><br></pre></td></tr></table></figure><p>这时，在源码文件的上一级目录会多出几个文件，其中就包括deb包：</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-20220506110901935.png" alt="image-20220506110901935"></p><p>执行安装：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dpkg -i p7zip_16.02_all.deb</span><br></pre></td></tr></table></figure><p>查看安装效果：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dpkg -l p7zip</span><br></pre></td></tr></table></figure><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-20220506111049159.png" alt="image-20220428215252343"></p><p>可以正常卸载：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dpkg -P p7zip</span><br></pre></td></tr></table></figure><p>卸载后查找不到p7zip。</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-20220506111234325.png" alt="image-20220506111234325"></p><h1 id="Deb源码打包（野生方法）"><a href="#Deb源码打包（野生方法）" class="headerlink" title="Deb源码打包（野生方法）"></a>Deb源码打包（野生方法）</h1><p>从网上找来的自己摸索的方法。可能不符合麒麟软件的打包规范。这是初次练习的成果。</p><p>安装需要的工具：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install debmake</span><br><span class="line">sudo apt-get install python3-debia</span><br><span class="line">sudo apt-get install build-essential</span><br></pre></td></tr></table></figure><p>生成debian文件夹配置文件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">debmake -e unknow@unknow.cn -p p7zip -u 16.02 -f &quot;unknow unknow&quot; -n</span><br></pre></td></tr></table></figure><p>命令解释：</p><ul><li>  邮件地址 <a href="mailto:&#x75;&#x6e;&#x6b;&#110;&#x6f;&#x77;&#64;&#x75;&#110;&#107;&#110;&#x6f;&#x77;&#x2e;&#99;&#110;">&#x75;&#x6e;&#x6b;&#110;&#x6f;&#x77;&#64;&#x75;&#110;&#107;&#110;&#x6f;&#x77;&#x2e;&#99;&#110;</a></li><li>  软件包名 p7zip</li><li>  软件版本号 16.02</li><li>  作者全名 unknow unknow</li></ul><p>命令执行后，会多出debian文件夹：</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/QQ%E6%88%AA%E5%9B%BE20220427123914.png" alt="QQ截图20220427123914"></p><p>编辑debian/control</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/QQ%E6%88%AA%E5%9B%BE20220427235600.png" alt="QQ截图20220427235600"></p><p>生成deb包：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo dpkg-buildpackage -us -uc -tc</span><br><span class="line"></span><br><span class="line"># 生成过程需要补充安装以下软件（Build-Depends）</span><br><span class="line">sudo apt-get install debhelper</span><br></pre></td></tr></table></figure><p>这是，在源码文件的上一级目录会多出几个文件，其中就包括deb包：</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/QQ%E6%88%AA%E5%9B%BE20220427230246.png" alt="QQ截图20220427230246"></p><p>执行安装：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dpkg -i p7zip_16.02_amd64.deb</span><br></pre></td></tr></table></figure><p>查看安装效果：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dpkg -l p7zip</span><br></pre></td></tr></table></figure><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/QQ%E6%88%AA%E5%9B%BE20220427235449.png" alt="QQ截图20220427235449"></p><p>参考：<a href="https://www.csdn.net/tags/NtjaEg0sNjY5NDMtYmxvZwO0O0OO0O0O.html">debmake - CSDN</a></p><h1 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h1><h2 id="虚拟机Kylin系统的安装"><a href="#虚拟机Kylin系统的安装" class="headerlink" title="虚拟机Kylin系统的安装"></a>虚拟机Kylin系统的安装</h2><p>请参看：<a href="https://www.jianshu.com/p/24a52d78d5a6">使用VirtualBox安装Kylin桌面版操作系统 - 简书 (jianshu.com)</a></p><p>屏幕调大的命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xrandr -s 1920x1200_60 # 在麒麟终端输入</span><br></pre></td></tr></table></figure><p>自己多试一下：</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-70.png"></p><p>或者在麒麟桌面设置那里调，一劳永逸。</p><h2 id="tree命令"><a href="#tree命令" class="headerlink" title="tree命令"></a>tree命令</h2><p>安装：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install tree</span><br></pre></td></tr></table></figure><p>使用：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ tree</span><br><span class="line">$ tree -d # 仅列出目录</span><br></pre></td></tr></table></figure><p>参考：<a href="https://blog.csdn.net/weixin_31445091/article/details/116543595">linux tree命令,Linux tree命令实例详解_章鱼老师的博客-CSDN博客</a></p>]]></content>
    
    
    <summary type="html">Deb的两种打包方法小练习。附虚拟机安装Kylin的简要方法。</summary>
    
    
    
    <category term="计算机" scheme="https://www.uuanqin.top/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/"/>
    
    <category term="麒麟实训" scheme="https://www.uuanqin.top/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E9%BA%92%E9%BA%9F%E5%AE%9E%E8%AE%AD/"/>
    
    
    <category term="Deb包" scheme="https://www.uuanqin.top/tags/Deb%E5%8C%85/"/>
    
    <category term="Kylin" scheme="https://www.uuanqin.top/tags/Kylin/"/>
    
  </entry>
  
  <entry>
    <title>我想在这次的实训项目中，达成怎样的目的？</title>
    <link href="https://www.uuanqin.top/p/75a45466.html"/>
    <id>https://www.uuanqin.top/p/75a45466.html</id>
    <published>2022-04-26T13:46:10.000Z</published>
    <updated>2023-04-28T11:33:17.079Z</updated>
    
    <content type="html"><![CDATA[<h1 id="面试"><a href="#面试" class="headerlink" title="面试"></a>面试</h1><p>虽然只是实训面试，但这也算我第一次感受到企业面试的思路和流程。本次面试我面试的是麒麟的生态运营部。</p><p>关注内容：</p><ul><li>  你的简历。</li><li>  你写在简历上的项目。在这之前问你还有没有补充，有补充的赶紧补充，接下来她要问项目了。</li><li>  你的某个详细项目。你的角色和作用。</li></ul><p>知识与经验：</p><ul><li>  Java水平，Python水平</li><li>  面向对象的特点</li><li>  是否了解交叉编译</li><li>  浏览器输入网址后，点击确认键。之后发生了什么。</li></ul><p>善后：</p><ul><li>  为什么选择这个部门</li><li>  还有什么想问的</li></ul><h1 id="第一天"><a href="#第一天" class="headerlink" title="第一天"></a>第一天</h1><p>我想在这次的实训项目中，达成怎样的目的？</p><ol><li> 我想积累项目经验。不管是在学业上还是在以后找工作上，有一份真实的经验</li><li> 学到开发知识，提高自己的编程能力。</li><li> 初步体验工作环境</li><li> 感受团队氛围。和大家在一起工作，认识几个新朋友，共同努力完成一份工作。这也是一个很不错的体验。</li></ol><hr><h1 id="实训结束"><a href="#实训结束" class="headerlink" title="实训结束"></a>实训结束</h1><p>这个问题贯穿整个实训过程的重要环节。线下见面时，每个人都需要谈论整个问题，同时也需要用一个关键词描述自己对于这次实训所期待达成的目标。最后的答辩时，这个问题也是重要的考核问题。</p>]]></content>
    
    
    <summary type="html">这是实训的第一个作业，贯穿我们实训整个过程的重要环节。</summary>
    
    
    
    <category term="计算机" scheme="https://www.uuanqin.top/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/"/>
    
    <category term="麒麟实训" scheme="https://www.uuanqin.top/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E9%BA%92%E9%BA%9F%E5%AE%9E%E8%AE%AD/"/>
    
    
    <category term="面试" scheme="https://www.uuanqin.top/tags/%E9%9D%A2%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>Linux下为Apache服务器添加SSL证书 ＆ 腾讯云CDN、WordPress中HTTPS相关配置</title>
    <link href="https://www.uuanqin.top/p/6f54b93a.html"/>
    <id>https://www.uuanqin.top/p/6f54b93a.html</id>
    <published>2022-04-21T06:43:30.000Z</published>
    <updated>2023-04-28T11:33:17.008Z</updated>
    
    <content type="html"><![CDATA[<p>为了让本网站加上一个小锁，探索了好久，终于弄成功了。先展示未安装证书之前：</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-6as2.png"></p><p>现描述配置步骤如下。</p><h1 id="获取SSL免费证书"><a href="#获取SSL免费证书" class="headerlink" title="获取SSL免费证书"></a>获取SSL免费证书</h1><p>在云服务商上申请免费证书。证书有效期为1年。现以阿里云免费证书<a href="https://common-buy.aliyun.com/?spm=5176.13785142.commonbuy2container.9.73fd778bO616lz&commodityCode=cas_dv_public_cn&request=%7B%22ord_time%22:%221:Year%22,%22order_num%22:1,%22product%22:%22free_product%22,%22certCount%22:%2220%22%7D">云盾证书服务 (aliyun.com)</a>购买示例：</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/HTTPS-1024x476.png"></p><p>在控制台下载证书：</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-49-1024x280.png"></p><p>选择Apache服务器类型的证书进行下载：</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-5as1.png"></p><p>得到一个压缩文件，文件包含以下内容：</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-as50.png"></p><ul><li>  证书文件：以.crt为后缀或文件类型。</li><li>  证书链文件：以.crt为后缀或文件类型。</li><li>  密钥文件：以.key为后缀或文件类型。</li></ul><p>文档链接：<a href="https://help.aliyun.com/document_detail/98727.html?spm=5176.b657008.help.dexternal.7c2a799dBOiNbI">在Apache服务器上安装SSL证书 (aliyun.com)</a></p><h1 id="安装证书到Apache"><a href="#安装证书到Apache" class="headerlink" title="安装证书到Apache"></a>安装证书到Apache</h1><p>接下来请根据这篇指引进行配置安装：<a href="https://help.aliyun.com/document_detail/98727.html?spm=5176.b657008.help.dexternal.7c2a799dBOiNbI">在Apache服务器上安装SSL证书 (aliyun.com)</a></p><p>在实际操作中，我和指引中不同的是，mod_ssl.so不需要在httpd.conf里进行引用。阿里云文档里的http-ssl.conf，实际上就是/etc/httpd/conf.d/ssl.conf（安装好mod_ssl.so模块后，ssl.conf文件就会产生）。</p><p>通过FTP传输工具把证书上传到指定位置，在配置时就用这个位置（右图）。</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-52-1024x416.png"></p><p>httpd.conf</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/imageas-53.png"></p><p>ssl.conf</p><p>弄好后记得重启Apache服务器：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apachectl restart</span><br></pre></td></tr></table></figure><p>服务器的安全组记得开放443端口：</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-5asasd4.png"></p><h1 id="CDN中的HTTPS设置"><a href="#CDN中的HTTPS设置" class="headerlink" title="CDN中的HTTPS设置"></a>CDN中的HTTPS设置</h1><p>我一开始遇到的问题是这个：Apache安装好证书后还是无法生效。Chrome浏览器提醒的是证书不匹配，一看详情，他竟然在匹配腾讯云的cdn的证书……所以我认为CDN环节中还需要相应设置。（和我遇到同样的问题：<a href="https://cloud.tencent.com/developer/ask/21141">https://cloud.tencent.com/developer/ask/21141</a>）</p><p>解决方法如下所述。</p><p>如果你的网站开启了CDN，比如我使用的是腾讯云的CDN，那么需要在腾讯云控制台中进行设置：</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-55-1024x86.png"></p><p>按照指引上传证书进行托管：</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-56-1024x268.png"></p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-5sad7.png"></p><p>上传成功后部署即可。</p><p>参考文档：<a href="https://cloud.tencent.com/document/product/400/51804">SSL 证书 安装部署 SSL 证书到内容分发网络（CDN）指引 - 证书安装 - 文档中心 - 腾讯云 (tencent.com)</a></p><h1 id="WordPress使用HTTPS"><a href="#WordPress使用HTTPS" class="headerlink" title="WordPress使用HTTPS"></a>WordPress使用HTTPS</h1><p>到这里，使用HTTPS访问时，浏览器还是会提醒该站点“并非完全安全”。</p><p>WordPress设置中修改地址：</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-5sad8.png"></p><p>http修改为https</p><p>如果修改不成功（比如页面不安全什么的），可以通过数据库修改：</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-59asda.png"></p><p>登录服务器，修改文件：</p><p>1，修改的路径：\wp-includes\functions.php文件<br>2，打开修改functions.php文件，找到代码 require( ABSPATH . WPINC . ‘/option.php’ ); 在下方添加：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">add_filter</span>(<span class="string">&#x27;script_loader_src&#x27;</span>, <span class="string">&#x27;agnostic_script_loader_src&#x27;</span>, <span class="number">20</span>,<span class="number">2</span>); </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">agnostic_script_loader_src</span>(<span class="params"><span class="variable">$src</span>, <span class="variable">$handle</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_ invoke__">preg_replace</span>(<span class="string">&#x27;/^(httphttps):/&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="variable">$src</span>); </span><br><span class="line">&#125; </span><br><span class="line"><span class="title function_ invoke__">add_filter</span>(<span class="string">&#x27;style_loader_src&#x27;</span>, <span class="string">&#x27;agnostic_style_loader_src&#x27;</span>, <span class="number">20</span>,<span class="number">2</span>); </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">agnostic_style_loader_src</span>(<span class="params"><span class="variable">$src</span>, <span class="variable">$handle</span></span>) </span>&#123; </span><br><span class="line">  <span class="keyword">return</span> <span class="title function_ invoke__">preg_replace</span>(<span class="string">&#x27;/^(httphttps):/&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="variable">$src</span>); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>再修改配置文件：</p><p>在<a href="https://so.csdn.net/so/search?q=wordpress&spm=1001.2101.3001.7020">wordpress</a>网站根目录中找到，wp-config.php文件，</p><p>在文件开头位置中，添加如下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$_SERVER[&#x27;HTTPS&#x27;] = &#x27;on&#x27;;</span><br><span class="line">define(&#x27;FORCE_SSL_LOGIN&#x27;, true);</span><br><span class="line">define(&#x27;FORCE_SSL_ADMIN&#x27;, true);</span><br></pre></td></tr></table></figure><h2 id="成果"><a href="#成果" class="headerlink" title="成果"></a>成果</h2><p>可以使用检查工具检查：<a href="https://decoder.link/sslchecker/www.uuanqin.top/443">SSL Checker (decoder.link)</a></p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/imageas-60.png"></p><p>Edge</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-61asda.png"></p><p>Chrome</p><h2 id="后续"><a href="#后续" class="headerlink" title="后续"></a>后续</h2><h3 id="强制跳转HTTPS"><a href="#强制跳转HTTPS" class="headerlink" title="强制跳转HTTPS"></a>强制跳转HTTPS</h3><p>在腾讯云域名控制台开启这个：</p><p><img src= "/image/loading.gif" data-lazy-src="https://typora-1301301520.file.myqcloud.com/img/image-63-1024x584.png"></p><h1 id="其他链接"><a href="#其他链接" class="headerlink" title="其他链接"></a>其他链接</h1><p>参考：<a href="https://blog.csdn.net/weixin_43983960/article/details/120096009?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_title~default-1.pc_relevant_paycolumn_v3&spm=1001.2101.3001.4242.2&utm_relevant_index=2">【亲测】wordpress如何开启全站https-真实有效_前端小罗的博客-CSDN博客_wordpress设置https</a></p><p>我走过的弯路：</p><ul><li>  <a href="https://www.ssls.com/knowledgebase/how-to-install-an-ssl-certificate-on-apache/?msclkid=525823b0c11911ec963df80c642b2f69">How to install an SSL Certificate on Apache – HelpDesk SSLs.com</a></li></ul>]]></content>
    
    
    <summary type="html">拥有SSL证书后，如何安装到Apache服务器？如果网站使用了CDN又如何配置？如果网站是WordPress网站？这篇文章提供了以上问题的解决方案。</summary>
    
    
    
    <category term="计算机" scheme="https://www.uuanqin.top/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/"/>
    
    
    <category term="Apache" scheme="https://www.uuanqin.top/tags/Apache/"/>
    
    <category term="CDN" scheme="https://www.uuanqin.top/tags/CDN/"/>
    
    <category term="HTTPS" scheme="https://www.uuanqin.top/tags/HTTPS/"/>
    
    <category term="Linux" scheme="https://www.uuanqin.top/tags/Linux/"/>
    
    <category term="SSL" scheme="https://www.uuanqin.top/tags/SSL/"/>
    
    <category term="WordPress" scheme="https://www.uuanqin.top/tags/WordPress/"/>
    
    <category term="腾讯云" scheme="https://www.uuanqin.top/tags/%E8%85%BE%E8%AE%AF%E4%BA%91/"/>
    
  </entry>
  
</feed>
