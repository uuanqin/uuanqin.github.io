{"data":{"title":"","description":"function randomPost(){fetch(&#39;&#x2F;baidusitemap.xml&#39;).then(res&#x3D;&gt;res.text()).then(str&#x3D;&gt;(new window.DOMParser).parseFromString(str,&#39;text&#x2F;xml&#39;)).then(data&#x3D;&gt;{for(var ls&#x3D;data.querySelectorAll(&#39;url loc&#39;);;){var","date":"2024-11-24T19:52:46.399Z","updated":"2024-11-24T19:52:46.399Z","language":"zh-CN","comments":true,"url":"js/random.js","cover":null,"images":[],"content":"function randomPost(){fetch('/baidusitemap.xml').then(res=>res.text()).then(str=>(new window.DOMParser).parseFromString(str,'text/xml')).then(data=>{for(var ls=data.querySelectorAll('url loc');;){var url=ls[Math.floor(Math.random()*ls.length)].innerHTML,url=new URL(url).pathname;if(location.pathname!==url)return void(location.pathname=url)}})}","raw":"// 由张洪 Heo 的代码改动而来\nfunction randomPost() {\n    fetch('/baidusitemap.xml')\n        .then(res => res.text())\n        .then(str => (new window.DOMParser()).parseFromString(str, \"text/xml\"))\n        .then(data => {\n            let ls = data.querySelectorAll('url loc');\n            while (true) {\n                let url = ls[Math.floor(Math.random() * ls.length)].innerHTML;\n                let path = new URL(url).pathname; // 提取路径部分\n                if (location.pathname === path) continue;\n                location.pathname = path;\n                return;\n            }\n        })\n}"},"api":"api/pages/js.json"}