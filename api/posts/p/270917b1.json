{"data":{"title":"ç¼“å­˜ç½®æ¢ç®—æ³•çš„å®ç°ä¸ Java ä¸­ç›¸å…³çš„æ•°æ®ç»“æ„","slug":"ç®—æ³•ä¸æ•°æ®ç»“æ„/ç¼“å­˜ç½®æ¢ç®—æ³•çš„å®ç°ä¸ Java ä¸­ç›¸å…³çš„æ•°æ®ç»“æ„","description":"OPTã€LRUã€LFU ä¸å†æƒ§æ€•","date":"2025-09-13T10:15:18.000Z","updated":"2026-02-01T08:42:41.927Z","language":"zh-CN","comments":true,"url":"p/270917b1/","cover":"https://cdn.gallery.uuanqin.top/img/202509131825096.webp","images":[],"content":"\n<details class=\"callout\" data-callout=\"note\" data-callout-fold=\"-\">\n<summary class=\"callout-title\">\n<div class=\"callout-title-icon\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-pencil\"><path d=\"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z\"/><path d=\"m15 5 4 4\"/></svg>\n</div>\n<div class=\"callout-title-inner\">æ–‡ç« ç¿»æ–° <code>250913</code></div>\n<div class=\"callout-fold\"></div>\n</summary>\n<div class=\"callout-content\"><p></p>\n<ul>\n<li>è¡¥å…… Java ç›¸å…³æ•°æ®ç»“æ„ <code>LinkedList</code>ã€<code>LinkedHashMap</code>ã€<code>PriorityQueue</code> ä¿¡æ¯</li>\n<li>è¡¥å…… OPTã€LFU ç®—æ³•é¢˜ä¸è§£æ</li>\n</ul>\n<p>æ–‡ç« æœ€åˆå‘è¡¨äº <code>240903</code>ï¼ŒåŸæ ‡é¢˜ï¼šæ‰‹å†™ LRU ç¼“å­˜ä»¥ç†è§£ Java ä¸­çš„ LinkedHashMapï¼Œ<a href=\"https://cdn.gallery.uuanqin.top/img/202409050003261.webp\">åŸå°é¢</a>ã€‚</p>\n</div></details><p>åœ¨æ“ä½œç³»ç»Ÿçš„å­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¼šåœ¨ä¸åŒçš„å†…å®¹ä¸­ï¼ˆé¡µé¢ç½®æ¢ç®—æ³•ã€é«˜é€Ÿç¼“å†²å™¨æ›¿æ¢ç®—æ³•ï¼‰æ¥è§¦åˆ°å„ç§ç¼“å­˜ç½®æ¢ç®—æ³•ï¼š</p>\n<table>\n<thead>\n<tr>\n<th>ç®—æ³•</th>\n<th>åç§°</th>\n<th>è¯´æ˜</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>OPT</td>\n<td>æœ€ä½³ç½®æ¢ç®—æ³•</td>\n<td>æ­¤ç®—æ³•åœ¨å·²çŸ¥æœªæ¥æ‰€æœ‰è®¿é—®è®°å½•çš„å‰æä¸‹ï¼Œæ¯æ¬¡éƒ½æ›¿æ¢æœªæ¥ä¸å†è¢«è®¿é—®/æœ€è¿œè¢«è®¿é—®çš„ç°å­˜æ•°æ®ã€‚è¯¥ç®—æ³•æ˜¯ç†è®ºä¸Šçš„æœ€ä¼˜ç®—æ³•ã€‚</td>\n</tr>\n<tr>\n<td>FIFO</td>\n<td>å…ˆè¿›å…ˆå‡ºç½®æ¢ç®—æ³•</td>\n<td>æ¯æ¬¡æ›¿æ¢æœ€å…ˆè¿›å…¥ç¼“å­˜çš„æ•°æ®ï¼Œè¯¥ç®—æ³•è®¤ä¸ºæœ€å…ˆè¿›å…¥çš„æ•°æ®åœ¨å°†æ¥è¢«è®¿é—®åˆ°çš„å¯èƒ½æ€§æœ€å°ã€‚FIFO ç®—æ³•å­˜åœ¨ Belady ç°è±¡ã€‚</td>\n</tr>\n<tr>\n<td>LRU</td>\n<td>æœ€è¿‘æœ€å°‘ä½¿ç”¨ç½®æ¢ç®—æ³•</td>\n<td>æ¯æ¬¡æ›¿æ¢æœ€ä¹…æœªè¢«è®¿é—®çš„æ•°æ®ï¼Œè¯¥ç®—æ³•è®¤ä¸ºæœ€è¿‘ä¸€æ®µæ—¶é—´æ²¡æœ‰è¢«è®¿é—®åˆ°çš„æ•°æ®åœ¨å°†æ¥è¢«è®¿é—®çš„å¯èƒ½æ€§æœ€å°ï¼Œè¿™ç§ç­–ç•¥åœ¨å®é™…ä¸­åº”ç”¨è¾ƒå¹¿ã€‚</td>\n</tr>\n<tr>\n<td>LFU</td>\n<td>æœ€å°‘ä½¿ç”¨ç½®æ¢ç®—æ³•</td>\n<td>æ¯æ¬¡æ›¿æ¢è®¿é—®æ¬¡æ•°æœ€å°çš„æ•°æ®ï¼Œè¯¥ç®—æ³•çš„æ€æƒ³æ˜¯æœ€è¿‘ä¸€æ®µæ—¶é—´è¢«è®¿é—®æ¬¡æ•°æœ€å°çš„æ•°æ®åœ¨å°†æ¥è¢«è®¿é—®çš„å¯èƒ½æ€§æœ€å°ã€‚</td>\n</tr>\n<tr>\n<td>RAND</td>\n<td>éšæœºç®—æ³•</td>\n<td>ä»ç°å­˜æ•°æ®ä¸­éšæœºé€‰æ‹©ä¸€ä¸ªå…ƒç´ è¿›è¡Œæ›¿æ¢ï¼Œè¯¥ç®—æ³•ä¸éœ€è¦ç»´æŠ¤å†å²è®¿é—®è®°å½•çš„ä»»ä½•ä¿¡æ¯ï¼Œå®ç°ä¸Šç®€å•é«˜æ•ˆï¼Œä½†å‘½ä¸­ç‡é€šå¸¸ä¸€èˆ¬ã€‚</td>\n</tr>\n</tbody>\n</table>\n\n<details class=\"callout\" data-callout=\"note\" data-callout-fold=\"-\">\n<summary class=\"callout-title\">\n<div class=\"callout-title-icon\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-pencil\"><path d=\"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z\"/><path d=\"m15 5 4 4\"/></svg>\n</div>\n<div class=\"callout-title-inner\">Belady ç°è±¡</div>\n<div class=\"callout-fold\"></div>\n</summary>\n<div class=\"callout-content\"><p>Belady ç°è±¡æ˜¯è®¡ç®—æœºç³»ç»Ÿä¸­é‡‡ç”¨å…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰é¡µé¢ç½®æ¢ç®—æ³•æ—¶å‡ºç°çš„å¼‚å¸¸ç°è±¡ï¼Œè¡¨ç°ä¸ºå½“åˆ†é…ç»™è¿›ç¨‹çš„ç‰©ç†é¡µé¢æ•°å¢åŠ æ—¶ï¼Œç¼ºé¡µç‡ä¸é™åå‡ã€‚è´æ‹‰è¿ªé€šè¿‡å®éªŒå‘ç°ï¼Œå½“æ“ä½œç³»ç»Ÿæœªæ»¡è¶³è¿›ç¨‹å…¨éƒ¨é¡µé¢éœ€æ±‚æ—¶ï¼ŒFIFO ç®—æ³•å¯èƒ½å› è¿‡æ—©ç½®æ¢ä»å°†è¢«é¢‘ç¹è®¿é—®çš„é¡µé¢ï¼Œå¼•å‘æ›´å¤šç¼ºé¡µä¸­æ–­ã€‚è¿™ä¸€å‘ç°æ‰“ç ´äº† ã€Œå¢åŠ å†…å­˜å¿…ç„¶é™ä½ç¼ºé¡µç‡ã€çš„ä¼ ç»Ÿè®¤çŸ¥ã€‚</p>\n</div></details><p>ç¼“å­˜æ›¿æ¢ç®—æ³•ç”¨äºç®¡ç†æœ‰é™çš„ç¼“å­˜ç©ºé—´ï¼Œå†³å®šå“ªäº›æ•°æ®éœ€è¦è¢«ç§»é™¤ä»¥è…¾å‡ºç©ºé—´ã€‚ç°åœ¨ç¼–ç¨‹é¢˜ä¹Ÿå–œæ¬¢è€ƒå¯Ÿå¯¹äºè¿™äº›ç®—æ³•çš„å®ç°èƒ½åŠ›ã€‚</p>\n<p>æœ¬æ–‡ç»“åˆçœŸå®é¢˜ç›®ï¼Œè®²è§£ç”¨ Java è¯­è¨€å®ç° OPTã€LRUã€LFU ç®—æ³•ï¼Œå¹¶äº†è§£ç›¸å…³çš„ Java æ•°æ®ç»“æ„ã€‚è‡³äº FIFOã€RAND å¾ˆç®€å•ï¼Œè¯»è€…å¯è‡ªè¡Œå®ç°ã€‚</p>\n<p>æœ¬æ–‡é¢˜ç›®éš¾åº¦æ ‡è¯†ï¼šğŸŸ©ç®€å•ï¼ŒğŸŸ¨ä¸­ç­‰ï¼ŒğŸŸ¥å›°éš¾ã€‚</p>\n<h1 id=\"java-ä¸­ç›¸å…³çš„æ•°æ®ç»“æ„\"><a class=\"markdownIt-Anchor\" href=\"#java-ä¸­ç›¸å…³çš„æ•°æ®ç»“æ„\"></a> Java ä¸­ç›¸å…³çš„æ•°æ®ç»“æ„</h1>\n<h2 id=\"linkedlist-åŒå‘é“¾è¡¨\"><a class=\"markdownIt-Anchor\" href=\"#linkedlist-åŒå‘é“¾è¡¨\"></a> <code>LinkedList</code> åŒå‘é“¾è¡¨</h2>\n<blockquote>\n<p>ä» JDK1.7 å¼€å§‹ï¼Œ<code>LinkedList</code> ç”±åŒå‘å¾ªç¯é“¾è¡¨æ”¹ä¸º<strong>åŒå‘é“¾è¡¨</strong>ã€‚</p>\n</blockquote>\n<p><code>LinkedList</code> æ˜¯ä¸€ä¸ªåŸºäºåŒå‘é“¾è¡¨å®ç°çš„é›†åˆç±»ã€‚</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/202509130013613.webp\" alt=\"image.png\" width=\"400px\" /></p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/202509130016033.webp\" alt=\"image.png\" width=\"425px\" /></p>\n<p>ä¸€äº›æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ï¼š</p>\n<table>\n<thead>\n<tr>\n<th>API</th>\n<th>æ“ä½œ</th>\n<th>æ—¶é—´å¤æ‚åº¦</th>\n<th>æºç åšæ³•</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>add(e)</code><br><code>addFirst(e)</code><br><code>addLast(e)</code></td>\n<td>å¤´å°¾æ’å…¥</td>\n<td><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span></td>\n<td>åŒå‘é“¾è¡¨å¸¸è§„åšæ³•</td>\n</tr>\n<tr>\n<td><code>add(index,e)</code></td>\n<td>æŒ‡å®šä½ç½®æ’å…¥</td>\n<td><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span></td>\n<td>é€‰æ‹©é è¿‘çš„ä¸€ç«¯å‘ä¸­é—´éå†</td>\n</tr>\n<tr>\n<td><code>remove()</code><br><code>removeFirst()</code><br><code>removeLast()</code></td>\n<td>å¤´å°¾åˆ é™¤</td>\n<td><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span></td>\n<td>åŒå‘é“¾è¡¨å¸¸è§„åšæ³•</td>\n</tr>\n<tr>\n<td><code>remove(E e)</code></td>\n<td>æŒ‡å®šå…ƒç´ åˆ é™¤ï¼ˆåˆ é™¤é¦–æ¬¡å‡ºç°å…ƒç´ ï¼‰</td>\n<td rowspan=\"2\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span></td>\n<td>ä»å¤´åˆ°å°¾éå†é“¾è¡¨</td>\n</tr>\n<tr>\n<td><code>remove(index)</code></td>\n<td>æŒ‡å®šä½ç½®åˆ é™¤</td>\n<td>é€‰æ‹©é è¿‘çš„ä¸€ç«¯å‘ä¸­é—´éå†</td>\n</tr>\n<tr>\n<td><code>getFirst()</code><br><code>getLast()</code></td>\n<td>è·å–å¤´å°¾å…ƒç´ </td>\n<td><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span></td>\n<td>åŒå‘é“¾è¡¨å¸¸è§„åšæ³•</td>\n</tr>\n<tr>\n<td><code>get(int index)</code></td>\n<td>è·å–é“¾è¡¨æŒ‡å®šä½ç½®çš„å…ƒç´ </td>\n<td rowspan=\"3\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span></td>\n<td>é€‰æ‹©é è¿‘çš„ä¸€ç«¯å‘ä¸­é—´éå†</td>\n</tr>\n<tr>\n<td><code>clear()</code></td>\n<td>ç§»é™¤æ­¤é“¾è¡¨ä¸­çš„æ‰€æœ‰å…ƒç´ </td>\n<td rowspan=\"2\">ä»å¤´åˆ°å°¾éå†é“¾è¡¨</td>\n</tr>\n<tr>\n<td><code>contains(e)</code></td>\n<td>æŸ¥è¯¢æŒ‡å®šå…ƒç´ æ˜¯å¦å­˜äºé“¾è¡¨</td>\n</tr>\n</tbody>\n</table>\n\n<div class=\"callout\" data-callout=\"question\">\n<div class=\"callout-title\">\n<div class=\"callout-title-icon\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-help-circle\"><circle cx=\"12\" cy=\"12\" r=\"10\"/><path d=\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\"/><path d=\"M12 17h.01\"/></svg>\n</div>\n<div class=\"callout-title-inner\">å¾ªç¯ä½¿ç”¨ <code>remove(int index)</code> çš„æ—¶é—´å¤æ‚åº¦ã€‚</div>\n</div>\n<div class=\"callout-content\"><p>Qï¼šåœ¨ä¸€ä¸ª <code>LinkedList</code> ç±»å‹çš„å˜é‡è¿›è¡Œ <code>for</code> å¾ªç¯éå†æ—¶ï¼Œæ¯è½®è¿­ä»£æ‰§è¡Œä¸€æ¬¡ <code>remove(index)</code> æ“ä½œï¼Œè¯·é—®è¯¥å¾ªç¯æ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘ï¼Ÿ</p>\n<p>Aï¼š<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n^2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span>ï¼Œå› ä¸ºä¸€æ¬¡ <code>remove(int index)</code> å°±éœ€è¦ <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span>ã€‚</p>\n</div></div><h2 id=\"linkedhashmap-å«åŒå‘é“¾è¡¨çš„å“ˆå¸Œé›†åˆ\"><a class=\"markdownIt-Anchor\" href=\"#linkedhashmap-å«åŒå‘é“¾è¡¨çš„å“ˆå¸Œé›†åˆ\"></a> <code>LinkedHashMap</code> å«åŒå‘é“¾è¡¨çš„å“ˆå¸Œé›†åˆ</h2>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/202408310204657.webp\" alt=\"image.png\" width=\"350px\" /></p>\n<p><code>LinkedHashMap</code> æ˜¯ Java æä¾›çš„ä¸€ä¸ªé›†åˆç±»ï¼Œå®ƒç»§æ‰¿è‡ª <code>HashMap</code>ï¼Œå¹¶åœ¨ <code>HashMap</code> åŸºç¡€ä¸Šç»´æŠ¤ä¸€æ¡<strong>åŒå‘é“¾è¡¨</strong>ã€‚</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/202509130057327.webp\" alt=\"image.png\" width=\"325px\" /></p>\n<p><code>LinkedHashMap</code> ç‰¹æ€§ï¼š</p>\n<ul>\n<li>æ”¯æŒéå†æ—¶ä¼šæŒ‰ç…§æ’å…¥é¡ºåºæœ‰åºè¿›è¡Œè¿­ä»£ã€‚<strong>ï¼ˆä¸ <code>HashMap</code> çš„æœ€å¤§åŒºåˆ«ï¼‰</strong></li>\n<li>æ”¯æŒæŒ‰ç…§å…ƒç´ è®¿é—®é¡ºåºæ’åºï¼Œé€‚ç”¨äºå°è£… LRU ç¼“å­˜å·¥å…·ã€‚</li>\n<li>å› ä¸ºå†…éƒ¨ä½¿ç”¨åŒå‘é“¾è¡¨ç»´æŠ¤å„ä¸ªèŠ‚ç‚¹ï¼Œæ‰€ä»¥éå†æ—¶çš„æ•ˆç‡å’Œå…ƒç´ ä¸ªæ•°æˆæ­£æ¯”ï¼Œç›¸è¾ƒäºå’Œå®¹é‡æˆæ­£æ¯”çš„ <code>HashMap</code> æ¥è¯´ï¼Œè¿­ä»£æ•ˆç‡ä¼šé«˜å¾ˆå¤šã€‚<strong>ç”±äºåŒå‘é“¾è¡¨çš„å­˜åœ¨ï¼Œå…¶æ’å…¥æ€§èƒ½å¯èƒ½ä¼šæ¯” <code>HashMap</code> ç•¥ä½ã€‚</strong></li>\n</ul>\n<h3 id=\"åŸºæœ¬ç‰¹æ€§-linkedhashmap-è¿­ä»£é¡ºåºå’Œæ’å…¥é¡ºåºä¸€è‡´\"><a class=\"markdownIt-Anchor\" href=\"#åŸºæœ¬ç‰¹æ€§-linkedhashmap-è¿­ä»£é¡ºåºå’Œæ’å…¥é¡ºåºä¸€è‡´\"></a> åŸºæœ¬ç‰¹æ€§ <code>LinkedHashMap</code> è¿­ä»£é¡ºåºå’Œæ’å…¥é¡ºåºä¸€è‡´</h3>\n<p>å®ƒçš„ç”¨æ³•å’Œ <code>HashMap</code> ä¸€è‡´ã€‚ç‰¹ç‚¹åœ¨äº <code>LinkedHashMap</code> çš„ä»å¤´åˆ°å°¾è¿­ä»£é¡ºåºæ˜¯å’Œæ’å…¥é¡ºåºä¸€è‡´çš„ï¼Œè€Œ <code>HashMap</code> ä¸­æ˜¯éšæœºçš„ã€‚</p>\n<h3 id=\"å¯åœ¨æ„é€ å‡½æ•°ä¸­å¼€å¯è®¿é—®é¡ºåº-accessorder\"><a class=\"markdownIt-Anchor\" href=\"#å¯åœ¨æ„é€ å‡½æ•°ä¸­å¼€å¯è®¿é—®é¡ºåº-accessorder\"></a> å¯åœ¨æ„é€ å‡½æ•°ä¸­å¼€å¯è®¿é—®é¡ºåº <code>accessOrder</code></h3>\n<p><code>LinkedHashMap</code> å®šä¹‰äº†æ’åºæ¨¡å¼ <code>boolean accessOrder = false</code>ã€‚å½“ <code>accessOrder</code> ä¸º <code>true</code> æ—¶ï¼Œè¢«è®¿é—®çš„å…ƒç´ å°†é‡æ–°æ‹¿å‡ºæ¥æ”¾åˆ°<strong>é“¾è¡¨å°¾éƒ¨</strong>ã€‚</p>\n<p>è®¾ç½®æ–¹å¼ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// åˆå§‹å®¹é‡ã€è´Ÿè½½å› å­ã€è®¿é—®é¡ºåº</span></span><br><span class=\"line\">LinkedHashMap&lt;Integer, String&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">LinkedHashMap</span>&lt;&gt;(<span class=\"number\">16</span>, <span class=\"number\">0.75f</span>, <span class=\"literal\">true</span>);</span><br></pre></td></tr></table></figure>\n<h3 id=\"é‡å†™-removeeldestentry-æ–¹æ³•\"><a class=\"markdownIt-Anchor\" href=\"#é‡å†™-removeeldestentry-æ–¹æ³•\"></a> é‡å†™ <code>removeEldestEntry</code> æ–¹æ³•</h3>\n<p><code>removeEldestEntry</code> å°†è¿”å›ä¸€ä¸ª <code>boolean</code> å€¼ï¼Œå‘ŠçŸ¥ <code>LinkedHashMap</code> æ˜¯å¦éœ€è¦ç§»é™¤é“¾è¡¨é¦–å…ƒç´ ã€‚æˆ‘ä»¬éœ€è¦åœ¨ç»§æ‰¿ <code>LinkedHashMap</code> çš„å­ç±»ä¸­é‡å†™è¯¥æ–¹æ³•ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyMap</span>&lt;K, V&gt; <span class=\"keyword\">extends</span> <span class=\"title class_\">LinkedHashMap</span>&lt;K, V&gt; &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">MyMap</span><span class=\"params\">(<span class=\"type\">int</span> capacity)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">super</span>(capacity, <span class=\"number\">0.75f</span>, <span class=\"literal\">true</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"type\">boolean</span> <span class=\"title function_\">removeEldestEntry</span><span class=\"params\">(Map.Entry&lt;K, V&gt; eldest)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"comment\">/* ç¼–å†™åˆ¤æ–­é€»è¾‘ */</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"priorityqueue-ä¼˜å…ˆé˜Ÿåˆ—äºŒé¡¹å †\"><a class=\"markdownIt-Anchor\" href=\"#priorityqueue-ä¼˜å…ˆé˜Ÿåˆ—äºŒé¡¹å †\"></a> <code>PriorityQueue</code> ä¼˜å…ˆé˜Ÿåˆ—ï¼ˆäºŒé¡¹å †ï¼‰</h2>\n<p>ä¼˜å…ˆé˜Ÿåˆ—åŸºäºäºŒé¡¹å †ï¼Œç”¨æ³•è¯¦è§ï¼š<a class=\"uuanqin-bilink\" target=\"_blank\" href=\"/p/182af697/\"><span class=\"bilink-pop-up\">ç«™å†…æ–‡ç« </span>Java é›†åˆçš„ä½¿ç”¨</a>ã€‚</p>\n<h1 id=\"æœ€ä½³ç½®æ¢ç®—æ³•-opt\"><a class=\"markdownIt-Anchor\" href=\"#æœ€ä½³ç½®æ¢ç®—æ³•-opt\"></a> æœ€ä½³ç½®æ¢ç®—æ³• OPT</h1>\n<p>ç¼“å­˜æ›¿æ¢çš„æœ€ä¼˜ç®—æ³•ï¼ˆMIN/OPTï¼ŒOptimalï¼‰åœ¨ 1966 å¹´ç”± Laszlo A.Belady æå‡ºï¼Œæ­¤ç®—æ³•åœ¨å·²çŸ¥æœªæ¥æ‰€æœ‰è®¿é—®è®°å½•çš„å‰æä¸‹ï¼Œæ¯æ¬¡éƒ½æ›¿æ¢æœªæ¥ä¸å†è¢«è®¿é—®/æœ€è¿œè¢«è®¿é—®çš„ç°å­˜æ•°æ®ã€‚è¯¥ç®—æ³•æ˜¯ç†è®ºä¸Šçš„æœ€ä¼˜ç®—æ³•ï¼Œå› ä¸ºéœ€è¦å·²çŸ¥æœªæ¥æ‰€æœ‰è®¿é—®è®°å½•ï¼Œå¹¶ä¸å…·å¤‡å¯å®ç°æ€§ï¼Œé€šå¸¸ç”¨äºè¡¡é‡å…¶å®ƒç¼“å­˜æ›¿æ¢ç®—æ³•çš„ä¼˜åŠ£ã€‚</p>\n\n<div class=\"callout\" data-callout=\"example\">\n<div class=\"callout-title\">\n<div class=\"callout-title-icon\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-list\"><line x1=\"8\" x2=\"21\" y1=\"6\" y2=\"6\"/><line x1=\"8\" x2=\"21\" y1=\"12\" y2=\"12\"/><line x1=\"8\" x2=\"21\" y1=\"18\" y2=\"18\"/><line x1=\"3\" x2=\"3.01\" y1=\"6\" y2=\"6\"/><line x1=\"3\" x2=\"3.01\" y1=\"12\" y2=\"12\"/><line x1=\"3\" x2=\"3.01\" y1=\"18\" y2=\"18\"/></svg>\n</div>\n<div class=\"callout-title-inner\">ğŸŸ¨ <a href=\"https://www.luogu.com.cn/problem/P4404#ide\">P4404 [JSOI2010] ç¼“å­˜äº¤æ¢ - æ´›è°·</a></div>\n</div>\n<div class=\"callout-content\"><p></p>\n<p>åœ¨è®¡ç®—æœºä¸­ï¼ŒCPU åªèƒ½å’Œé«˜é€Ÿç¼“å­˜ Cache ç›´æ¥äº¤æ¢æ•°æ®ã€‚å½“æ‰€éœ€çš„å†…å­˜å•å…ƒä¸åœ¨ Cache ä¸­æ—¶ï¼Œåˆ™éœ€è¦ä»ä¸»å­˜é‡ŒæŠŠæ•°æ®è°ƒå…¥ Cacheã€‚æ­¤æ—¶ï¼Œå¦‚æœ Cache å®¹é‡å·²æ»¡ï¼Œåˆ™å¿…é¡»å…ˆä»ä¸­åˆ é™¤ä¸€ä¸ªã€‚</p>\n<p>åœ¨ç°ä»£è®¡ç®—æœºä¸­ï¼Œå¾€å¾€é‡‡ç”¨ LRU(æœ€è¿‘æœ€å°‘ä½¿ç”¨) çš„ç®—æ³•æ¥è¿›è¡Œ Cache è°ƒåº¦â€”â€”å¯æ˜¯ï¼Œä»ä¸Šä¸€ä¸ªä¾‹å­å°±èƒ½çœ‹å‡ºï¼Œè¿™å¹¶ä¸æ˜¯æœ€ä¼˜çš„ç®—æ³•ã€‚ å¯¹äºä¸€ä¸ªå›ºå®šå®¹é‡çš„ç©º Cache å’Œè¿ç»­çš„è‹¥å¹²ä¸»å­˜è®¿é—®è¯·æ±‚ï¼Œèªèªæƒ³çŸ¥é“å¦‚ä½•åœ¨æ¯æ¬¡ Cache ç¼ºå¤±æ—¶æ¢å‡ºæ­£ç¡®çš„ä¸»å­˜å•å…ƒï¼Œä»¥è¾¾åˆ°æœ€å°‘çš„ Cache ç¼ºå¤±æ¬¡æ•°ã€‚</p>\n</div></div><p>æ€è·¯ï¼šé‡‡ç”¨ OPTï¼Œå³æ·˜æ±°åœ¨ä¹‹åçš„è®¿é—®ä¸­ï¼Œå‡ºç°æœ€æ™šï¼ˆç”šè‡³ä¸å‡ºç°ï¼‰çš„å…ƒç´ ã€‚</p>\n<p>æˆ‘çš„è§£æ³•ï¼š</p>\n<ul>\n<li>ä½¿ç”¨åˆ°çš„æ•°æ®ç»“æ„æœ‰å“ˆå¸Œè¡¨å’Œä¼˜å…ˆé˜Ÿåˆ—ã€‚</li>\n<li>å“ˆå¸Œè¡¨ç”¨äºå¿«é€Ÿåˆ¤æ–­ç¼“å­˜ä¸­æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„ <code>key</code>ã€‚</li>\n<li>ä¼˜å…ˆé˜Ÿåˆ—å¯å¿«é€Ÿå¾—å‡ºå¾…åˆ å…ƒç´ ã€‚</li>\n<li>æ›´æ–°é”®å€¼æ—¶ï¼Œä»ä¼˜å…ˆé˜Ÿåˆ—ä¸­æ‰¾å‡ºç›¸åº”å…ƒç´ å¹¶åˆ é™¤çš„ <code>remove(obj)</code> æ“ä½œå¯èƒ½æœ‰ä¸€å®šçš„æ—¶é—´å¤æ‚åº¦ã€‚</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.util.Scanner;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Arrays;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Map;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.HashMap;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.PriorityQueue;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Main</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String args[])</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">Scanner</span> <span class=\"variable\">in</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Scanner</span>(System.in);</span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">N</span> <span class=\"operator\">=</span> in.nextInt();</span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">M</span> <span class=\"operator\">=</span> in.nextInt();</span><br><span class=\"line\">        <span class=\"type\">int</span>[] dataIds = <span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[N];</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">0</span>;i&lt;N;i++)&#123;</span><br><span class=\"line\">            dataIds[i]=in.nextInt();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">ans</span> <span class=\"operator\">=</span> f(N,M,dataIds);</span><br><span class=\"line\">        System.out.println(ans);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"type\">int</span> <span class=\"title function_\">f</span><span class=\"params\">(<span class=\"type\">int</span> n,<span class=\"type\">int</span> capacity,<span class=\"type\">int</span>[] dataIds)</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">int</span>[] next = <span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[n]; <span class=\"comment\">// è¡¨ç¤ºå½“å‰ id ä¸‹ä¸€æ¬¡å‡ºç°çš„ä½ç½®</span></span><br><span class=\"line\">        Arrays.fill(next,Integer.MAX_VALUE);</span><br><span class=\"line\">        Map&lt;Integer,Integer&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;(); <span class=\"comment\">// id-&gt;lastIdx</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">0</span>;i&lt;n;i++)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(map.containsKey(dataIds[i]))&#123;</span><br><span class=\"line\">                <span class=\"type\">int</span> <span class=\"variable\">lastIdx</span> <span class=\"operator\">=</span> map.get(dataIds[i]);</span><br><span class=\"line\">                next[lastIdx] = i;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            map.put(dataIds[i],i);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        PriorityQueue&lt;Node&gt; q = <span class=\"keyword\">new</span> <span class=\"title class_\">PriorityQueue</span>&lt;&gt;((n1,n2)-&gt;&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> n2.next-n1.next;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        Map&lt;Integer,Node&gt; keyMap = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;(); <span class=\"comment\">// ä¸ºäº†æ›´å¿«åˆ¤æ–­ç¼“å­˜ä¸­æ˜¯å¦å­˜åœ¨å¯¹åº”çš„é”®</span></span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">miss</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">0</span>;i&lt;n;i++)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(keyMap.containsKey(dataIds[i]))&#123;</span><br><span class=\"line\">                <span class=\"type\">Node</span> <span class=\"variable\">node</span> <span class=\"operator\">=</span> keyMap.get(dataIds[i]);</span><br><span class=\"line\">                q.remove(node);</span><br><span class=\"line\">                node.next = next[i];</span><br><span class=\"line\">                q.offer(node);</span><br><span class=\"line\">                <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(q.size()==capacity)&#123;</span><br><span class=\"line\">                <span class=\"type\">Node</span> <span class=\"variable\">oldNode</span> <span class=\"operator\">=</span> q.poll();</span><br><span class=\"line\">                keyMap.remove(oldNode.id);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"type\">Node</span> <span class=\"variable\">newNode</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Node</span>(dataIds[i],next[i]);</span><br><span class=\"line\">            q.offer(newNode);</span><br><span class=\"line\">            keyMap.put(dataIds[i],newNode);</span><br><span class=\"line\">            miss++;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> miss;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Node</span>&#123;</span><br><span class=\"line\">    Integer id;</span><br><span class=\"line\">    <span class=\"type\">int</span> next;</span><br><span class=\"line\">    Node(Integer id,<span class=\"type\">int</span> next)&#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.id= id;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.next = next;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"æœ€è¿‘æœ€å°‘ä½¿ç”¨-lru\"><a class=\"markdownIt-Anchor\" href=\"#æœ€è¿‘æœ€å°‘ä½¿ç”¨-lru\"></a> æœ€è¿‘æœ€å°‘ä½¿ç”¨ LRU</h1>\n<p>æœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼ˆLeast Recently Usedï¼ŒLRUï¼‰ï¼Œæ˜¯ä¸€ç§å¸¸ç”¨çš„é¡µé¢ç½®æ¢ç®—æ³•ï¼Œé€‰æ‹©æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨çš„é¡µé¢äºˆä»¥æ·˜æ±°ã€‚è¯¥ç®—æ³•èµ‹äºˆæ¯ä¸ªé¡µé¢ä¸€ä¸ªè®¿é—®å­—æ®µï¼Œç”¨æ¥è®°å½•ä¸€ä¸ªé¡µé¢è‡ªä¸Šæ¬¡è¢«è®¿é—®ä»¥æ¥æ‰€ç»å†çš„æ—¶é—´ tï¼Œå½“é¡»æ·˜æ±°ä¸€ä¸ªé¡µé¢æ—¶ï¼Œé€‰æ‹©ç°æœ‰é¡µé¢ä¸­å…¶ t å€¼æœ€å¤§çš„ï¼Œå³æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„é¡µé¢äºˆä»¥æ·˜æ±°ã€‚</p>\n\n<div class=\"callout\" data-callout=\"example\">\n<div class=\"callout-title\">\n<div class=\"callout-title-icon\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-list\"><line x1=\"8\" x2=\"21\" y1=\"6\" y2=\"6\"/><line x1=\"8\" x2=\"21\" y1=\"12\" y2=\"12\"/><line x1=\"8\" x2=\"21\" y1=\"18\" y2=\"18\"/><line x1=\"3\" x2=\"3.01\" y1=\"6\" y2=\"6\"/><line x1=\"3\" x2=\"3.01\" y1=\"12\" y2=\"12\"/><line x1=\"3\" x2=\"3.01\" y1=\"18\" y2=\"18\"/></svg>\n</div>\n<div class=\"callout-title-inner\">é¢˜ç›®ï¼šğŸŸ¨ <a href=\"https://leetcode.cn/problems/lru-cache/description/?envType=study-plan-v2&amp;envId=top-interview-150\">146. LRU ç¼“å­˜ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></div>\n</div>\n<div class=\"callout-content\"><p>è¯·ä½ è®¾è®¡å¹¶å®ç°ä¸€ä¸ªæ»¡è¶³ LRUï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼‰ç¼“å­˜ çº¦æŸçš„æ•°æ®ç»“æ„ã€‚<br />\nå®ç° <code>LRUCache</code> ç±»ï¼š</p>\n<ul>\n<li><code>LRUCache(int capacity)</code> ä»¥ æ­£æ•´æ•° ä½œä¸ºå®¹é‡ <code>capacity</code> åˆå§‹åŒ– LRU ç¼“å­˜</li>\n<li><code>int get(int key)</code> å¦‚æœå…³é”®å­— <code>key</code> å­˜åœ¨äºç¼“å­˜ä¸­ï¼Œåˆ™è¿”å›å…³é”®å­—çš„å€¼ï¼Œå¦åˆ™è¿”å› -1 ã€‚</li>\n<li><code>void put(int key, int value)</code>\n<ul>\n<li>å¦‚æœå…³é”®å­— <code>key</code> å·²ç»å­˜åœ¨ï¼Œåˆ™å˜æ›´å…¶æ•°æ®å€¼ <code>value</code></li>\n<li>å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™å‘ç¼“å­˜ä¸­æ’å…¥è¯¥ç»„ key-value ã€‚å¦‚æœæ’å…¥æ“ä½œå¯¼è‡´å…³é”®å­—æ•°é‡è¶…è¿‡ <code>capacity</code> ï¼Œåˆ™åº”è¯¥ é€å‡º æœ€ä¹…æœªä½¿ç”¨çš„å…³é”®å­—ã€‚</li>\n</ul>\n</li>\n</ul>\n<p>å‡½æ•° <code>get</code> å’Œ <code>put</code> å¿…é¡»ä»¥ <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span> çš„å¹³å‡æ—¶é—´å¤æ‚åº¦è¿è¡Œã€‚</p>\n</div></div><p>é¦–å…ˆä»‹ç»ç›´æ¥ä½¿ç”¨ Java API çš„å†™æ³•ã€‚Java ä¸­ <code>LinkedHashMap</code> çš„ç‰¹æ€§ä½¿å…¶å¤©ç„¶åœ°æˆä¸ºè½»æ¾å®ç° LRU ç¼“å­˜çš„æ•°æ®ç»“æ„ã€‚å…·ä½“å®ç°æ€è·¯å¦‚ä¸‹ï¼š</p>\n<ul>\n<li>ç»§æ‰¿ <code>LinkedHashMap</code>ï¼›</li>\n<li>æ„é€ æ–¹æ³•ä¸­æŒ‡å®š <code>accessOrder</code> ä¸º <code>true</code> ï¼Œè¿™æ ·åœ¨è®¿é—®å…ƒç´ æ—¶å°±ä¼šæŠŠè¯¥å…ƒç´ ç§»åŠ¨åˆ°é“¾è¡¨å°¾éƒ¨ï¼Œé“¾è¡¨é¦–å…ƒç´ å°±æ˜¯æœ€è¿‘æœ€å°‘è¢«è®¿é—®çš„å…ƒç´ ï¼›</li>\n<li>é‡å†™ <code>removeEldestEntry</code> æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ª <code>boolean</code> å€¼ï¼Œå‘ŠçŸ¥ <code>LinkedHashMap</code> æ˜¯å¦éœ€è¦ç§»é™¤é“¾è¡¨é¦–å…ƒç´ ï¼ˆç¼“å­˜å®¹é‡æœ‰é™ï¼‰ã€‚</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">LRUCache</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">LinkedHashMap</span>&lt;Integer,Integer&gt;&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> capacity;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">LRUCache</span><span class=\"params\">(<span class=\"type\">int</span> capacity)</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">super</span>(capacity,<span class=\"number\">0.75f</span>,<span class=\"literal\">true</span>);</span><br><span class=\"line\">\t\t<span class=\"built_in\">this</span>.capacity = capacity;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// ç”±äºé¢˜ç›®å¯¹getè¿”å›å€¼è¦æ±‚ï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦è¿›è¡Œä¸€äº›è°ƒæ•´ï¼Œä¸ç„¶æˆ‘ä»¬éƒ½å¯ä»¥å¹²è„†ä¸å†™ã€‚</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> <span class=\"title function_\">get</span><span class=\"params\">(<span class=\"type\">int</span> key)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">super</span>.getOrDefault(key, -<span class=\"number\">1</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">/* é¢˜ç›®ä¸­ put æ–¹æ³•ç›´æ¥äº¤ç»™ LinkedHashMap */</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"type\">boolean</span> <span class=\"title function_\">removeEldestEntry</span><span class=\"params\">(Map.Entry&lt;Integer,Integer&gt; eldest)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> size() &gt; capacity;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>å¦‚æœé¢è¯•æ‰‹æ’•ç¯èŠ‚è¿™é“é¢˜ç›®è¿™æ ·å†™ï¼Œä¼°è®¡é¢è¯•å®˜å°±ä¼šå«ä½ åœ¨å®¶ç­‰é€šçŸ¥äº†ã€‚<code>LinkedHashMap</code> æ— å¤–ä¹å°±æ˜¯å“ˆå¸Œè¡¨ <code>HashMap</code> + åŒå‘é“¾è¡¨ <code>LinkedList</code>ã€‚æŠŠå®ƒæ‹†å¼€æ¥ï¼Œå°±ä¼šæœ‰ä»¥ä¸‹å®ç°ï¼š</p>\n<ul>\n<li><code>HashMap</code> + <code>LinkedList</code>ã€‚<code>HashMap</code> ç”¨äºå¿«é€Ÿå®šä½åŒå‘é“¾è¡¨ä¸­çš„ç»“ç‚¹ï¼›<code>LinkedList</code> ç”¨äºåŒºåˆ†ç¼“å­˜ <code>key</code> çš„è®¿é—®é¡ºåºã€‚</li>\n<li>åŒå‘é“¾è¡¨å¿…é¡»è‡ªå·±æ‰‹åŠ¨å»ºç«‹å¹¶ç»´æŠ¤å„ç§ç»“ç‚¹æ“ä½œ</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">LRUCache</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> List&lt;Node&gt; list = <span class=\"keyword\">new</span> <span class=\"title class_\">LinkedList</span>&lt;&gt;();</span><br><span class=\"line\">    <span class=\"keyword\">public</span> Map&lt;Integer,Node&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> capacity;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">LRUCache</span><span class=\"params\">(<span class=\"type\">int</span> capacity)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.capacity = capacity;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> <span class=\"title function_\">get</span><span class=\"params\">(<span class=\"type\">int</span> key)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!map.containsKey(key))&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> -<span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"type\">Node</span> <span class=\"variable\">node</span> <span class=\"operator\">=</span> map.get(key);</span><br><span class=\"line\">        list.remove(node);</span><br><span class=\"line\">        list.addLast(node);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> node.value;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">put</span><span class=\"params\">(<span class=\"type\">int</span> key, <span class=\"type\">int</span> value)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(map.containsKey(key))&#123;</span><br><span class=\"line\">            <span class=\"type\">Node</span> <span class=\"variable\">node</span> <span class=\"operator\">=</span> map.get(key);</span><br><span class=\"line\">            list.remove(node);</span><br><span class=\"line\">            node.value = value;</span><br><span class=\"line\">            list.addLast(node);</span><br><span class=\"line\">            <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">if</span>(map.size()==capacity)&#123;</span><br><span class=\"line\">            <span class=\"type\">Node</span> <span class=\"variable\">oldNode</span> <span class=\"operator\">=</span> list.removeFirst();</span><br><span class=\"line\">            map.remove(oldNode.key);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"type\">Node</span> <span class=\"variable\">newNode</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Node</span>(key,value);</span><br><span class=\"line\">        list.addLast(newNode);</span><br><span class=\"line\">        map.put(key,newNode);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Node</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> key;</span><br><span class=\"line\">    <span class=\"type\">int</span> value;</span><br><span class=\"line\">    Node pre,next;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">Node</span><span class=\"params\">()</span>&#123;&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">Node</span><span class=\"params\">(<span class=\"type\">int</span> key,<span class=\"type\">int</span> value)</span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.key = key;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.value = value;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ä½†æ˜¯ï¼Œä¸Šé¢çš„å®ç°æ–¹æ³•ä¸­ä½¿ç”¨äº† <code>LinkedList</code> çš„ <code>remove(obj)</code> æ“ä½œï¼Œè¿™ä¸ªæ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸º <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span>ï¼Œä¸ç¬¦åˆé¢˜ç›®çš„æ—¶é—´å¤æ‚åº¦è¦æ±‚ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦è‡ªå·±æ‰‹å†™åŒå‘é“¾è¡¨æ”¹è¿›è¿™å—çš„æ—¶é—´å¤æ‚åº¦ã€‚åœ¨æ¥ä¸‹æ¥çš„å®ç°ä¸­ï¼š</p>\n<ul>\n<li>ä½¿ç”¨<strong>å¾ªç¯åŒå‘é“¾è¡¨</strong>ï¼Œç®€åŒ–ä»£ç ç¼–å†™</li>\n<li>åˆ©ç”¨ <code>HashMap</code> ç›´æ¥å®šä½é“¾è¡¨ä¸­å¾…åˆ é™¤çš„ <code>node</code>ï¼Œä¼˜åŒ– <code>remove(obj)</code> çš„æ—¶é—´å¤æ‚åº¦</li>\n<li>åªä¼šç¼–å†™å¿…è¦çš„é“¾è¡¨æ“ä½œã€‚</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">LRUCache</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">Node</span> <span class=\"variable\">head</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Node</span>();</span><br><span class=\"line\">    <span class=\"keyword\">public</span> Map&lt;Integer,Node&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> capacity;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">LRUCache</span><span class=\"params\">(<span class=\"type\">int</span> capacity)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.capacity = capacity;</span><br><span class=\"line\">        head.next=head;</span><br><span class=\"line\">        head.pre = head;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> <span class=\"title function_\">get</span><span class=\"params\">(<span class=\"type\">int</span> key)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!map.containsKey(key))&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> -<span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"type\">Node</span> <span class=\"variable\">node</span> <span class=\"operator\">=</span> map.get(key);</span><br><span class=\"line\">        remove(node);</span><br><span class=\"line\">        addLast(node);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> node.value;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">put</span><span class=\"params\">(<span class=\"type\">int</span> key, <span class=\"type\">int</span> value)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(map.containsKey(key))&#123;</span><br><span class=\"line\">            <span class=\"type\">Node</span> <span class=\"variable\">node</span> <span class=\"operator\">=</span> remove(map.get(key));</span><br><span class=\"line\">            node.value = value;</span><br><span class=\"line\">            addLast(node);</span><br><span class=\"line\">            <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        </span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">if</span>(map.size()==capacity)&#123;</span><br><span class=\"line\">            <span class=\"type\">Node</span> <span class=\"variable\">oldNode</span> <span class=\"operator\">=</span> removeFirst();</span><br><span class=\"line\">            map.remove(oldNode.key);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"type\">Node</span> <span class=\"variable\">newNode</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Node</span>(key,value);</span><br><span class=\"line\">        addLast(newNode);</span><br><span class=\"line\">        map.put(key,newNode);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// æ—¶é—´å¤æ‚åº¦ç¼©çŸ­è‡³ O(1)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Node <span class=\"title function_\">remove</span><span class=\"params\">(Node node)</span>&#123;</span><br><span class=\"line\">        node.pre.next = node.next;</span><br><span class=\"line\">        node.next.pre = node.pre;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> node;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> Node <span class=\"title function_\">removeFirst</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> remove(head.next);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">addLast</span><span class=\"params\">(Node node)</span>&#123;</span><br><span class=\"line\">        node.pre = head.pre;</span><br><span class=\"line\">        node.next = head;</span><br><span class=\"line\">        head.pre.next = node;</span><br><span class=\"line\">        head.pre = node;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Node</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> key;</span><br><span class=\"line\">    <span class=\"type\">int</span> value;</span><br><span class=\"line\">    Node pre,next;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">Node</span><span class=\"params\">()</span>&#123;&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">Node</span><span class=\"params\">(<span class=\"type\">int</span> key,<span class=\"type\">int</span> value)</span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.key = key;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.value = value;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"æœ€å°‘ä½¿ç”¨ç½®æ¢ç®—æ³•-lfu\"><a class=\"markdownIt-Anchor\" href=\"#æœ€å°‘ä½¿ç”¨ç½®æ¢ç®—æ³•-lfu\"></a> æœ€å°‘ä½¿ç”¨ç½®æ¢ç®—æ³• LFU</h1>\n<p>æœ€è¿‘æœ€ä¸å¸¸ç”¨ç®—æ³•ï¼ˆLFUï¼ŒLeast Frequently Usedï¼‰æ¯æ¬¡æ›¿æ¢è®¿é—®æ¬¡æ•°æœ€å°çš„æ•°æ®ï¼Œè¯¥ç®—æ³•çš„æ€æƒ³æ˜¯æœ€è¿‘ä¸€æ®µæ—¶é—´è¢«è®¿é—®æ¬¡æ•°æœ€å°çš„æ•°æ®åœ¨å°†æ¥è¢«è®¿é—®çš„å¯èƒ½æ€§æœ€å°ã€‚</p>\n\n<div class=\"callout\" data-callout=\"example\">\n<div class=\"callout-title\">\n<div class=\"callout-title-icon\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-list\"><line x1=\"8\" x2=\"21\" y1=\"6\" y2=\"6\"/><line x1=\"8\" x2=\"21\" y1=\"12\" y2=\"12\"/><line x1=\"8\" x2=\"21\" y1=\"18\" y2=\"18\"/><line x1=\"3\" x2=\"3.01\" y1=\"6\" y2=\"6\"/><line x1=\"3\" x2=\"3.01\" y1=\"12\" y2=\"12\"/><line x1=\"3\" x2=\"3.01\" y1=\"18\" y2=\"18\"/></svg>\n</div>\n<div class=\"callout-title-inner\">ğŸŸ¥ <a href=\"https://leetcode.cn/problems/lfu-cache/description/\">460. LFU ç¼“å­˜ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></div>\n</div>\n<div class=\"callout-content\"><p>è¯·ä½ ä¸º æœ€ä¸ç»å¸¸ä½¿ç”¨ï¼ˆLFUï¼‰ç¼“å­˜ç®—æ³•è®¾è®¡å¹¶å®ç°æ•°æ®ç»“æ„ã€‚</p>\n<p>å®ç° <code>LFUCache</code> ç±»ï¼š</p>\n<ul>\n<li><code>LFUCache(int capacity)</code> - ç”¨æ•°æ®ç»“æ„çš„å®¹é‡ <code>capacity</code> åˆå§‹åŒ–å¯¹è±¡</li>\n<li><code>int get(int key)</code> - å¦‚æœé”® <code>key</code> å­˜åœ¨äºç¼“å­˜ä¸­ï¼Œåˆ™è·å–é”®çš„å€¼ï¼Œå¦åˆ™è¿”å› <code>-1</code> ã€‚</li>\n<li><code>void put(int key, int value)</code> å¦‚æœé”® <code>key</code> å·²å­˜åœ¨ï¼Œåˆ™å˜æ›´å…¶å€¼ï¼›å¦‚æœé”®ä¸å­˜åœ¨ï¼Œè¯·æ’å…¥é”®å€¼å¯¹ã€‚å½“ç¼“å­˜è¾¾åˆ°å…¶å®¹é‡ <code>capacity</code> æ—¶ï¼Œåˆ™åº”è¯¥åœ¨æ’å…¥æ–°é¡¹ä¹‹å‰ï¼Œç§»é™¤æœ€ä¸ç»å¸¸ä½¿ç”¨çš„é¡¹ã€‚åœ¨æ­¤é—®é¢˜ä¸­ï¼Œå½“å­˜åœ¨å¹³å±€ï¼ˆå³ä¸¤ä¸ªæˆ–æ›´å¤šä¸ªé”®å…·æœ‰ç›¸åŒä½¿ç”¨é¢‘ç‡ï¼‰æ—¶ï¼Œåº”è¯¥å»é™¤ <strong>æœ€ä¹…æœªä½¿ç”¨</strong> çš„é”®ã€‚</li>\n</ul>\n<p>ä¸ºäº†ç¡®å®šæœ€ä¸å¸¸ä½¿ç”¨çš„é”®ï¼Œå¯ä»¥ä¸ºç¼“å­˜ä¸­çš„æ¯ä¸ªé”®ç»´æŠ¤ä¸€ä¸ª ä½¿ç”¨è®¡æ•°å™¨ ã€‚ä½¿ç”¨è®¡æ•°æœ€å°çš„é”®æ˜¯æœ€ä¹…æœªä½¿ç”¨çš„é”®ã€‚</p>\n<p>å½“ä¸€ä¸ªé”®é¦–æ¬¡æ’å…¥åˆ°ç¼“å­˜ä¸­æ—¶ï¼Œå®ƒçš„ä½¿ç”¨è®¡æ•°å™¨è¢«è®¾ç½®ä¸º 1ï¼ˆç”±äº <code>put</code> æ“ä½œï¼‰ã€‚å¯¹ç¼“å­˜ä¸­çš„é”®æ‰§è¡Œ <code>get</code> æˆ– <code>put</code> æ“ä½œï¼Œä½¿ç”¨è®¡æ•°å™¨çš„å€¼å°†ä¼šé€’å¢ã€‚</p>\n<p>å‡½æ•° <code>get</code> å’Œ <code>put</code> å¿…é¡»ä»¥ <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span> çš„å¹³å‡æ—¶é—´å¤æ‚åº¦è¿è¡Œã€‚</p>\n</div></div><p>åŒ LRU ä¸­è¯´æ˜çš„é¡ºåºä¸€æ ·ï¼Œæˆ‘ä»¬è¿˜æ˜¯å…ˆä» API ç”¨æ³•å¼€å§‹ä»‹ç»ï¼Œå†æ…¢æ…¢æ”¹é€ ä¸ºæ‰‹å·¥å®ç°ã€‚</p>\n<p>å®ç°è¦ç‚¹ï¼š</p>\n<ul>\n<li>åŒ <code>HashMap</code>ï¼Œä¸€ä¸ªä¿å­˜ <code>key</code> å¯¹åº”çš„é¢‘æ•°ï¼ˆé¢‘æ•°ç”¨äºç´¢å¼•é“¾è¡¨ä»¥åŠå¿«é€Ÿåˆ¤ç©ºï¼‰ï¼Œä¸€ä¸ªä¿å­˜ä¸åŒé¢‘æ•°ä¸‹ä¿å­˜çš„é“¾è¡¨ç»“æ„ã€‚</li>\n<li>é“¾è¡¨ç»“æ„é€‰ç”¨ <code>LinkedHashMap</code>ï¼Œä½¿ç”¨å®ƒçš„ä¸€äº›ç‰¹æ€§ï¼š\n<ul>\n<li>é“¾è¡¨ç‰¹æ€§ï¼šåœ¨å¹³å±€æƒ…å†µæ—¶å¿«é€Ÿè·å–æœ€ä¹…æœªä½¿ç”¨çš„ç»“ç‚¹ï¼ˆè¡¨å¤´ç»“ç‚¹ï¼‰ï¼›æ’å…¥é”®æ—¶è‡ªåŠ¨æ’å…¥é“¾è¡¨æœ«ç«¯ã€‚</li>\n<li>å“ˆå¸Œè¡¨ç‰¹æ€§ï¼šåˆ é™¤å…ƒç´ æ—¶èƒ½è¾¾åˆ° <code>O(1)</code> æ—¶é—´å¤æ‚åº¦</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">LFUCache</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> Map&lt;Integer,Map&lt;Integer,Integer&gt;&gt; freq2map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    <span class=\"keyword\">public</span> Map&lt;Integer,Integer&gt; key2freq = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> capacity;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> <span class=\"variable\">minfreq</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">LFUCache</span><span class=\"params\">(<span class=\"type\">int</span> capacity)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.capacity = capacity;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> <span class=\"title function_\">get</span><span class=\"params\">(<span class=\"type\">int</span> key)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> move(key,<span class=\"literal\">null</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">put</span><span class=\"params\">(<span class=\"type\">int</span> key, <span class=\"type\">int</span> value)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(move(key,value)!=-<span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(key2freq.size()==capacity)&#123;</span><br><span class=\"line\">            Map&lt;Integer,Integer&gt; map = freq2map.get(minfreq);</span><br><span class=\"line\">            <span class=\"type\">Integer</span> <span class=\"variable\">k</span> <span class=\"operator\">=</span> map.keySet().iterator().next();</span><br><span class=\"line\">            map.remove(k);</span><br><span class=\"line\">            key2freq.remove(k);   </span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        key2freq.put(key,<span class=\"number\">1</span>);</span><br><span class=\"line\">        freq2map.computeIfAbsent(<span class=\"number\">1</span>,k-&gt;<span class=\"keyword\">new</span> <span class=\"title class_\">LinkedHashMap</span>&lt;&gt;()).put(key,value);</span><br><span class=\"line\">        minfreq = <span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> Integer <span class=\"title function_\">move</span><span class=\"params\">(Integer key, Integer value)</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">Integer</span> <span class=\"variable\">freq</span> <span class=\"operator\">=</span> key2freq.getOrDefault(key,<span class=\"literal\">null</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(freq==<span class=\"literal\">null</span>)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> -<span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">// Integer value = freq2map.get(freq).remove(key);</span></span><br><span class=\"line\">        Map&lt;Integer,Integer&gt; map = freq2map.get(freq);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(value==<span class=\"literal\">null</span>)&#123;</span><br><span class=\"line\">            value = map.get(key);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        map.remove(key);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(map.size()==<span class=\"number\">0</span> &amp;&amp; minfreq==freq)&#123;</span><br><span class=\"line\">            minfreq++;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">        </span><br><span class=\"line\">        Integer newFreq= freq+<span class=\"number\">1</span>;</span><br><span class=\"line\">        key2freq.put(key,newFreq);</span><br><span class=\"line\">        freq2map.computeIfAbsent(newFreq,k-&gt;<span class=\"keyword\">new</span> <span class=\"title class_\">LinkedHashMap</span>&lt;&gt;()).put(key,value);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> value;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¼€å§‹ç”¨ <code>LinkedList</code> æ›¿æ¢ <code>LinkedHashMap</code>ã€‚å˜åŒ–ç‚¹ï¼š</p>\n<ul>\n<li>æˆ‘ä»¬åˆ›å»ºäº† <code>Node</code> ç»“ç‚¹ï¼ŒæŠŠé¢‘æ•°å†…åŒ–åˆ° <code>Node</code> ä¸­ã€‚</li>\n<li>æŠŠé¢‘æ•°å“ˆå¸Œè¡¨å˜ä¸º <code>key2Node</code>ï¼Œè¦è·å–é¢‘æ•°å¯ä»¥å…ˆå¾—åˆ° <code>Node</code>ï¼Œåœ¨é€šè¿‡ <code>node.freq</code> è·å–ã€‚</li>\n<li>ä½¿ç”¨ <code>LinkedList</code> è¿›è¡Œé“¾è¡¨æ“ä½œï¼Œè‡ªè¡Œæ¨¡æ‹Ÿé“¾è¡¨æ’å…¥ã€åˆ é™¤æ“ä½œç»´æŠ¤é“¾è¡¨é¡ºåºã€‚</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">LFUCache</span> &#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> Map&lt;Integer,LinkedList&lt;Node&gt;&gt; freq2list = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    <span class=\"keyword\">public</span> Map&lt;Integer,Node&gt; key2node = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> capacity;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> <span class=\"variable\">minfreq</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">LFUCache</span><span class=\"params\">(<span class=\"type\">int</span> capacity)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.capacity = capacity;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> <span class=\"title function_\">get</span><span class=\"params\">(<span class=\"type\">int</span> key)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> move(key,<span class=\"literal\">null</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">put</span><span class=\"params\">(<span class=\"type\">int</span> key, <span class=\"type\">int</span> value)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(move(key,value)!=-<span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(key2node.size()==capacity)&#123;</span><br><span class=\"line\">            List&lt;Node&gt; list = freq2list.get(minfreq);</span><br><span class=\"line\">            <span class=\"type\">Node</span> <span class=\"variable\">oldNode</span> <span class=\"operator\">=</span> list.removeFirst();</span><br><span class=\"line\">            key2node.remove(oldNode.key);   </span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"type\">Node</span> <span class=\"variable\">newNode</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Node</span>(key,value,<span class=\"number\">1</span>);</span><br><span class=\"line\">        key2node.put(key,newNode);</span><br><span class=\"line\">        freq2list.computeIfAbsent(<span class=\"number\">1</span>,k-&gt;<span class=\"keyword\">new</span> <span class=\"title class_\">LinkedList</span>&lt;&gt;()).add(newNode);</span><br><span class=\"line\">        minfreq = <span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> Integer <span class=\"title function_\">move</span><span class=\"params\">(Integer key, Integer value)</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">Node</span> <span class=\"variable\">node</span> <span class=\"operator\">=</span> key2node.getOrDefault(key,<span class=\"literal\">null</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(node==<span class=\"literal\">null</span>)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> -<span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        </span><br><span class=\"line\">        LinkedList&lt;Node&gt; list = freq2list.get(node.freq);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(value==<span class=\"literal\">null</span>)&#123;</span><br><span class=\"line\">            value = node.value;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        list.remove(node); <span class=\"comment\">// ä¸ä¸º O(1)</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(list.size()==<span class=\"number\">0</span> &amp;&amp; minfreq==node.freq)&#123;</span><br><span class=\"line\">            minfreq++;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">        node.freq++;</span><br><span class=\"line\">        node.value = value;</span><br><span class=\"line\">        freq2list.computeIfAbsent(node.freq,k-&gt;<span class=\"keyword\">new</span> <span class=\"title class_\">LinkedList</span>&lt;&gt;()).add(node);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> value;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Node</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> key;</span><br><span class=\"line\">    <span class=\"type\">int</span> value;</span><br><span class=\"line\">    <span class=\"type\">int</span> freq;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">Node</span><span class=\"params\">()</span>&#123;&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">Node</span><span class=\"params\">(<span class=\"type\">int</span> key,<span class=\"type\">int</span> value,<span class=\"type\">int</span> freq)</span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.key = key;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.value = value;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.freq = freq;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>åœ¨ä¸Šé¢çš„å®ç°ä¸­ï¼Œè¿˜æ˜¯å­˜åœ¨ <code>LinkedList</code> çš„ <code>remove(obj)</code> çš„æ—¶é—´å¤æ‚åº¦è¿‡é«˜çš„é—®é¢˜ã€‚æˆ‘ä»¬éœ€è¦è‡ªå·±å†™åŒå‘é“¾è¡¨ã€‚è¦ç‚¹ï¼š</p>\n<ul>\n<li>è‡ªå†™<strong>å¾ªç¯åŒå‘é“¾è¡¨</strong>ï¼Œé™ä½ä»£ç å®ç°éš¾åº¦</li>\n<li>åˆ©ç”¨ <code>key2Node</code> å“ˆå¸Œè¡¨èƒ½åœ¨ <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span> æ—¶é—´å†…å®šä½å¾…åˆ ç»“ç‚¹ï¼Œé™ä½æ—¶é—´å¤æ‚åº¦ã€‚</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">LFUCache</span> &#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> Map&lt;Integer,MyLinkedList&gt; freq2list = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    <span class=\"keyword\">public</span> Map&lt;Integer,Node&gt; key2node = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> capacity;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> <span class=\"variable\">minfreq</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">LFUCache</span><span class=\"params\">(<span class=\"type\">int</span> capacity)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.capacity = capacity;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> <span class=\"title function_\">get</span><span class=\"params\">(<span class=\"type\">int</span> key)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> move(key,<span class=\"literal\">null</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">put</span><span class=\"params\">(<span class=\"type\">int</span> key, <span class=\"type\">int</span> value)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(move(key,value)!=-<span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(key2node.size()==capacity)&#123;</span><br><span class=\"line\">            <span class=\"type\">MyLinkedList</span> <span class=\"variable\">list</span> <span class=\"operator\">=</span> freq2list.get(minfreq);</span><br><span class=\"line\">            <span class=\"type\">Node</span> <span class=\"variable\">oldNode</span> <span class=\"operator\">=</span> list.removeFirst();</span><br><span class=\"line\">            key2node.remove(oldNode.key);   </span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"type\">Node</span> <span class=\"variable\">newNode</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Node</span>(key,value,<span class=\"number\">1</span>);</span><br><span class=\"line\">        key2node.put(key,newNode);</span><br><span class=\"line\">        freq2list.computeIfAbsent(<span class=\"number\">1</span>,k-&gt;<span class=\"keyword\">new</span> <span class=\"title class_\">MyLinkedList</span>()).add(newNode);</span><br><span class=\"line\">        minfreq = <span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> Integer <span class=\"title function_\">move</span><span class=\"params\">(Integer key, Integer value)</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">Node</span> <span class=\"variable\">node</span> <span class=\"operator\">=</span> key2node.getOrDefault(key,<span class=\"literal\">null</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(node==<span class=\"literal\">null</span>)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> -<span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"type\">MyLinkedList</span> <span class=\"variable\">list</span> <span class=\"operator\">=</span> freq2list.get(node.freq);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(value==<span class=\"literal\">null</span>)&#123;</span><br><span class=\"line\">            value = node.value;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        list.remove(node);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(list.size==<span class=\"number\">0</span> &amp;&amp; minfreq==node.freq)&#123;</span><br><span class=\"line\">            minfreq++;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">        node.freq++;</span><br><span class=\"line\">        node.value = value;</span><br><span class=\"line\">        freq2list.computeIfAbsent(node.freq,k-&gt;<span class=\"keyword\">new</span> <span class=\"title class_\">MyLinkedList</span>()).add(node);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> value;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Node</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> key;</span><br><span class=\"line\">    <span class=\"type\">int</span> value;</span><br><span class=\"line\">    <span class=\"type\">int</span> freq;</span><br><span class=\"line\">    Node pre;</span><br><span class=\"line\">    Node next;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">Node</span><span class=\"params\">()</span>&#123;&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">Node</span><span class=\"params\">(Node pre,Node next)</span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.pre = pre;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.next = next;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">Node</span><span class=\"params\">(<span class=\"type\">int</span> key,<span class=\"type\">int</span> value,<span class=\"type\">int</span> freq)</span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.key = key;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.value = value;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.freq = freq;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MyLinkedList</span>&#123;</span><br><span class=\"line\">    Node dummy;</span><br><span class=\"line\">    <span class=\"type\">int</span> size=<span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">MyLinkedList</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.dummy = <span class=\"keyword\">new</span> <span class=\"title class_\">Node</span>();</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.dummy.next = <span class=\"built_in\">this</span>.dummy;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.dummy.pre = <span class=\"built_in\">this</span>.dummy;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">add</span><span class=\"params\">(Node node)</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">Node</span> <span class=\"variable\">lastNode</span> <span class=\"operator\">=</span> dummy.pre;</span><br><span class=\"line\">        lastNode.next = node;</span><br><span class=\"line\">        dummy.pre = node;</span><br><span class=\"line\">        node.pre = lastNode;</span><br><span class=\"line\">        node.next = dummy;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.size++;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> Node <span class=\"title function_\">remove</span><span class=\"params\">(Node node)</span>&#123;</span><br><span class=\"line\">        node.pre.next = node.next;</span><br><span class=\"line\">        node.next.pre = node.pre;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.size--;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> node;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> Node <span class=\"title function_\">removeFirst</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> remove(<span class=\"built_in\">this</span>.dummy.next);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">   </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Your LFUCache object will be instantiated and called as such:</span></span><br><span class=\"line\"><span class=\"comment\"> * LFUCache obj = new LFUCache(capacity);</span></span><br><span class=\"line\"><span class=\"comment\"> * int param_1 = obj.get(key);</span></span><br><span class=\"line\"><span class=\"comment\"> * obj.put(key,value);</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"æœ¬æ–‡å‚è€ƒ\"><a class=\"markdownIt-Anchor\" href=\"#æœ¬æ–‡å‚è€ƒ\"></a> æœ¬æ–‡å‚è€ƒ</h1>\n<ul>\n<li>ç‹é“ 2023ã€Š408 æ•°æ®ç»“æ„ã€‹</li>\n<li><a href=\"https://baike.baidu.com/item/LRU\">LRU_ç™¾åº¦ç™¾ç§‘ (baidu.com)</a></li>\n<li><a href=\"https://leetcode.cn/problems/lru-cache/solutions/259678/lruhuan-cun-ji-zhi-by-leetcode-solution/?envType=study-plan-v2&amp;envId=top-interview-150\">146. LRU ç¼“å­˜ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></li>\n<li><a href=\"https://javaguide.cn/java/collection/linkedhashmap-source-code.html#linkedhashmap-%E7%AE%80%E4%BB%8B\">LinkedHashMap æºç åˆ†æ | JavaGuide</a></li>\n<li><a href=\"https://www.mianshiya.com/bank/1788408712975282177/question/1780933294783754241\">ä»€ä¹ˆæ˜¯ Java çš„ LinkedHashMapï¼Ÿ - Java é›†åˆé¢è¯•é¢˜ - é¢è¯•é¸­ - ç¨‹åºå‘˜æ±‚èŒé¢è¯•åˆ·é¢˜ç¥å™¨ (mianshiya.com)</a></li>\n<li><a href=\"https://leetcode.cn/problems/lfu-cache/solutions/2457716/tu-jie-yi-zhang-tu-miao-dong-lfupythonja-f56h/\">ã€å›¾è§£ã€‘ä¸€å¼ å›¾ç§’æ‡‚ LFUï¼ï¼ˆPython/Java/C++/Go/JS/Rustï¼‰-@çµèŒ¶å±±è‰¾åºœ- åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></li>\n<li><a href=\"https://www.cnblogs.com/NickyYe/p/4461454.html\">Javaä¸­LinkedListçš„removeæ–¹æ³•çœŸçš„è€—æ—¶O(1)å—ï¼Ÿ - NickyYe - åšå®¢å›­</a></li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/591436083\">ç»å…¸è®ºæ–‡è§£è¯»â€”â€”Cache æ›¿æ¢ç®—æ³• - çŸ¥ä¹</a></li>\n<li><a href=\"https://baike.baidu.com/item/belady/4808156\">belady_ç™¾åº¦ç™¾ç§‘</a></li>\n</ul>\n","raw":"---\ntitle: ç¼“å­˜ç½®æ¢ç®—æ³•çš„å®ç°ä¸ Java ä¸­ç›¸å…³çš„æ•°æ®ç»“æ„\ntags:\n  - LRU\n  - LFU\n  - OPT\n  - Java\n  - ç¼“å­˜\n  - é¡µé¢ç½®æ¢\n  - LeetCode\n  - æ“ä½œç³»ç»Ÿ\ncover: https://cdn.gallery.uuanqin.top/img/202509131825096.webp\ndescription: OPTã€LRUã€LFU ä¸å†æƒ§æ€•\ncategories:\n  - ç®—æ³•ä¸æ•°æ®ç»“æ„\nabbrlink: 270917b1\nkatex: true\nsummary: >-\n  æœ¬æ–‡ä¸»è¦ä»‹ç»äº†ç¼“å­˜ç½®æ¢ç®—æ³•çš„å®ç°ä»¥åŠJavaä¸­çš„ç›¸å…³æ•°æ®ç»“æ„ã€‚æ–‡ç« é¦–å…ˆå›é¡¾äº†æ“ä½œç³»ç»Ÿä¸­å¸¸è§çš„é¡µé¢ç½®æ¢ç®—æ³•ï¼Œå¦‚Beladyç°è±¡ï¼Œå¹¶è§£é‡Šäº†ç¼“å­˜æ›¿æ¢ç®—æ³•çš„åŸºæœ¬æ¦‚å¿µã€‚æ¥ç€ï¼Œæ–‡ç« è¯¦ç»†è®²è§£äº†å¦‚ä½•ä½¿ç”¨Javaè¯­è¨€å®ç°OPTã€LRUå’ŒLFUç®—æ³•ï¼Œå¹¶åˆ†æäº†ç›¸å…³çš„Javaæ•°æ®ç»“æ„ï¼ŒåŒ…æ‹¬LinkedListã€LinkedHashMapå’ŒPriorityQueueã€‚æ–‡ç« è¿˜æä¾›äº†å…³äºBeladyç°è±¡çš„è§£é‡Šï¼Œè¯´æ˜äº†FIFOç®—æ³•åœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½å¯¼è‡´ç¼ºé¡µç‡ä¸Šå‡çš„ç°è±¡ã€‚æ­¤å¤–ï¼Œæ–‡ç« é€šè¿‡ä¸€ä¸ªå®é™…çš„ç®—æ³•é¢˜ç›®ï¼Œå±•ç¤ºäº†å¦‚ä½•åº”ç”¨è¿™äº›ç®—æ³•æ¥è®¾è®¡ä¸€ä¸ªLRUç¼“å­˜ï¼Œå¹¶è®¨è®ºäº†å®ç°çš„å…³é”®ç‚¹å’ŒæŒ‘æˆ˜ã€‚æœ€åï¼Œæ–‡ç« é€šè¿‡ä»£ç ç¤ºä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨Javaä¸­çš„LinkedHashMapæ¥å®ç°ä¸€ä¸ªLRUç¼“å­˜ï¼Œå¹¶è§£é‡Šäº†ä»£ç çš„å·¥ä½œåŸç†å’Œå…³é”®æ­¥éª¤ã€‚æ•´ä½“ä¸Šï¼Œæ–‡ç« ä¸ºè¯»è€…æä¾›äº†ä¸€ä¸ªæ¸…æ™°çš„å­¦ä¹ è·¯å¾„ï¼Œä»ç†è®ºåˆ°å®è·µï¼Œå¸®åŠ©è¯»è€…ç†è§£å’ŒæŒæ¡ç¼“å­˜ç½®æ¢ç®—æ³•åŠå…¶åœ¨Javaä¸­çš„åº”ç”¨ã€‚\ndate: 2025-09-13 18:15:18\ntop_img:\n---\n\n> [!note]- æ–‡ç« ç¿»æ–° `250913`\n> - è¡¥å…… Java ç›¸å…³æ•°æ®ç»“æ„ `LinkedList`ã€`LinkedHashMap`ã€`PriorityQueue` ä¿¡æ¯\n> - è¡¥å…… OPTã€LFU ç®—æ³•é¢˜ä¸è§£æ\n>\n> æ–‡ç« æœ€åˆå‘è¡¨äº `240903`ï¼ŒåŸæ ‡é¢˜ï¼šæ‰‹å†™ LRU ç¼“å­˜ä»¥ç†è§£ Java ä¸­çš„ LinkedHashMapï¼Œ[åŸå°é¢](https://cdn.gallery.uuanqin.top/img/202409050003261.webp)ã€‚\n\nåœ¨æ“ä½œç³»ç»Ÿçš„å­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¼šåœ¨ä¸åŒçš„å†…å®¹ä¸­ï¼ˆé¡µé¢ç½®æ¢ç®—æ³•ã€é«˜é€Ÿç¼“å†²å™¨æ›¿æ¢ç®—æ³•ï¼‰æ¥è§¦åˆ°å„ç§ç¼“å­˜ç½®æ¢ç®—æ³•ï¼š\n\n| ç®—æ³•   | åç§°         | è¯´æ˜                                                           |\n| ---- | ---------- | ------------------------------------------------------------ |\n| OPT  | æœ€ä½³ç½®æ¢ç®—æ³•     | æ­¤ç®—æ³•åœ¨å·²çŸ¥æœªæ¥æ‰€æœ‰è®¿é—®è®°å½•çš„å‰æä¸‹ï¼Œæ¯æ¬¡éƒ½æ›¿æ¢æœªæ¥ä¸å†è¢«è®¿é—®/æœ€è¿œè¢«è®¿é—®çš„ç°å­˜æ•°æ®ã€‚è¯¥ç®—æ³•æ˜¯ç†è®ºä¸Šçš„æœ€ä¼˜ç®—æ³•ã€‚     |\n| FIFO | å…ˆè¿›å…ˆå‡ºç½®æ¢ç®—æ³•   | æ¯æ¬¡æ›¿æ¢æœ€å…ˆè¿›å…¥ç¼“å­˜çš„æ•°æ®ï¼Œè¯¥ç®—æ³•è®¤ä¸ºæœ€å…ˆè¿›å…¥çš„æ•°æ®åœ¨å°†æ¥è¢«è®¿é—®åˆ°çš„å¯èƒ½æ€§æœ€å°ã€‚FIFO ç®—æ³•å­˜åœ¨ Belady ç°è±¡ã€‚ |\n| LRU  | æœ€è¿‘æœ€å°‘ä½¿ç”¨ç½®æ¢ç®—æ³• | æ¯æ¬¡æ›¿æ¢æœ€ä¹…æœªè¢«è®¿é—®çš„æ•°æ®ï¼Œè¯¥ç®—æ³•è®¤ä¸ºæœ€è¿‘ä¸€æ®µæ—¶é—´æ²¡æœ‰è¢«è®¿é—®åˆ°çš„æ•°æ®åœ¨å°†æ¥è¢«è®¿é—®çš„å¯èƒ½æ€§æœ€å°ï¼Œè¿™ç§ç­–ç•¥åœ¨å®é™…ä¸­åº”ç”¨è¾ƒå¹¿ã€‚ |\n| LFU  | æœ€å°‘ä½¿ç”¨ç½®æ¢ç®—æ³•   | æ¯æ¬¡æ›¿æ¢è®¿é—®æ¬¡æ•°æœ€å°çš„æ•°æ®ï¼Œè¯¥ç®—æ³•çš„æ€æƒ³æ˜¯æœ€è¿‘ä¸€æ®µæ—¶é—´è¢«è®¿é—®æ¬¡æ•°æœ€å°çš„æ•°æ®åœ¨å°†æ¥è¢«è®¿é—®çš„å¯èƒ½æ€§æœ€å°ã€‚           |\n| RAND | éšæœºç®—æ³•       | ä»ç°å­˜æ•°æ®ä¸­éšæœºé€‰æ‹©ä¸€ä¸ªå…ƒç´ è¿›è¡Œæ›¿æ¢ï¼Œè¯¥ç®—æ³•ä¸éœ€è¦ç»´æŠ¤å†å²è®¿é—®è®°å½•çš„ä»»ä½•ä¿¡æ¯ï¼Œå®ç°ä¸Šç®€å•é«˜æ•ˆï¼Œä½†å‘½ä¸­ç‡é€šå¸¸ä¸€èˆ¬ã€‚     |\n\n> [!note]- Belady ç°è±¡\n> Belady ç°è±¡æ˜¯è®¡ç®—æœºç³»ç»Ÿä¸­é‡‡ç”¨å…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰é¡µé¢ç½®æ¢ç®—æ³•æ—¶å‡ºç°çš„å¼‚å¸¸ç°è±¡ï¼Œè¡¨ç°ä¸ºå½“åˆ†é…ç»™è¿›ç¨‹çš„ç‰©ç†é¡µé¢æ•°å¢åŠ æ—¶ï¼Œç¼ºé¡µç‡ä¸é™åå‡ã€‚è´æ‹‰è¿ªé€šè¿‡å®éªŒå‘ç°ï¼Œå½“æ“ä½œç³»ç»Ÿæœªæ»¡è¶³è¿›ç¨‹å…¨éƒ¨é¡µé¢éœ€æ±‚æ—¶ï¼ŒFIFO ç®—æ³•å¯èƒ½å› è¿‡æ—©ç½®æ¢ä»å°†è¢«é¢‘ç¹è®¿é—®çš„é¡µé¢ï¼Œå¼•å‘æ›´å¤šç¼ºé¡µä¸­æ–­ã€‚è¿™ä¸€å‘ç°æ‰“ç ´äº† ã€Œå¢åŠ å†…å­˜å¿…ç„¶é™ä½ç¼ºé¡µç‡ã€çš„ä¼ ç»Ÿè®¤çŸ¥ã€‚\n\nç¼“å­˜æ›¿æ¢ç®—æ³•ç”¨äºç®¡ç†æœ‰é™çš„ç¼“å­˜ç©ºé—´ï¼Œå†³å®šå“ªäº›æ•°æ®éœ€è¦è¢«ç§»é™¤ä»¥è…¾å‡ºç©ºé—´ã€‚ç°åœ¨ç¼–ç¨‹é¢˜ä¹Ÿå–œæ¬¢è€ƒå¯Ÿå¯¹äºè¿™äº›ç®—æ³•çš„å®ç°èƒ½åŠ›ã€‚\n\næœ¬æ–‡ç»“åˆçœŸå®é¢˜ç›®ï¼Œè®²è§£ç”¨ Java è¯­è¨€å®ç° OPTã€LRUã€LFU ç®—æ³•ï¼Œå¹¶äº†è§£ç›¸å…³çš„ Java æ•°æ®ç»“æ„ã€‚è‡³äº FIFOã€RAND å¾ˆç®€å•ï¼Œè¯»è€…å¯è‡ªè¡Œå®ç°ã€‚\n\næœ¬æ–‡é¢˜ç›®éš¾åº¦æ ‡è¯†ï¼šğŸŸ©ç®€å•ï¼ŒğŸŸ¨ä¸­ç­‰ï¼ŒğŸŸ¥å›°éš¾ã€‚\n\n# Java ä¸­ç›¸å…³çš„æ•°æ®ç»“æ„\n\n## `LinkedList` åŒå‘é“¾è¡¨\n\n> ä» JDK1.7 å¼€å§‹ï¼Œ`LinkedList` ç”±åŒå‘å¾ªç¯é“¾è¡¨æ”¹ä¸º**åŒå‘é“¾è¡¨**ã€‚\n\n`LinkedList` æ˜¯ä¸€ä¸ªåŸºäºåŒå‘é“¾è¡¨å®ç°çš„é›†åˆç±»ã€‚\n\n![image.png|400](https://cdn.gallery.uuanqin.top/img/202509130013613.webp)\n\n![image.png|425](https://cdn.gallery.uuanqin.top/img/202509130016033.webp)\n\nä¸€äº›æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ï¼š\n\n| API                                             | æ“ä½œ               | æ—¶é—´å¤æ‚åº¦  | æºç åšæ³•         |\n| ----------------------------------------------- | ---------------- | ------ | ------------ |\n| `add(e)`<br>`addFirst(e)`<br>`addLast(e)`       | å¤´å°¾æ’å…¥             | $O(1)$ | åŒå‘é“¾è¡¨å¸¸è§„åšæ³•     |\n| `add(index,e)`                                  | æŒ‡å®šä½ç½®æ’å…¥           | $O(n)$ | é€‰æ‹©é è¿‘çš„ä¸€ç«¯å‘ä¸­é—´éå† |\n| `remove()`<br>`removeFirst()`<br>`removeLast()` | å¤´å°¾åˆ é™¤             | $O(1)$ | åŒå‘é“¾è¡¨å¸¸è§„åšæ³•     |\n| `remove(E e)`                                   | æŒ‡å®šå…ƒç´ åˆ é™¤ï¼ˆåˆ é™¤é¦–æ¬¡å‡ºç°å…ƒç´ ï¼‰ | $O(n)$ | ä»å¤´åˆ°å°¾éå†é“¾è¡¨     |\n| `remove(index)`                                 | æŒ‡å®šä½ç½®åˆ é™¤           | $O(n)$ | é€‰æ‹©é è¿‘çš„ä¸€ç«¯å‘ä¸­é—´éå† |\n| `getFirst()`<br>`getLast()`                     | è·å–å¤´å°¾å…ƒç´            | $O(1)$ | åŒå‘é“¾è¡¨å¸¸è§„åšæ³•     |\n| `get(int index)`                                | è·å–é“¾è¡¨æŒ‡å®šä½ç½®çš„å…ƒç´       | $O(n)$ | é€‰æ‹©é è¿‘çš„ä¸€ç«¯å‘ä¸­é—´éå† |\n| `clear()`                                       | ç§»é™¤æ­¤é“¾è¡¨ä¸­çš„æ‰€æœ‰å…ƒç´       | $O(n)$ | ä»å¤´åˆ°å°¾éå†é“¾è¡¨     |\n| `contains(e)`                                   | æŸ¥è¯¢æŒ‡å®šå…ƒç´ æ˜¯å¦å­˜äºé“¾è¡¨     | $O(n)$ | ä»å¤´åˆ°å°¾éå†é“¾è¡¨     |\n\n> [!question] å¾ªç¯ä½¿ç”¨ `remove(int index)` çš„æ—¶é—´å¤æ‚åº¦ã€‚\n> Qï¼šåœ¨ä¸€ä¸ª `LinkedList` ç±»å‹çš„å˜é‡è¿›è¡Œ `for` å¾ªç¯éå†æ—¶ï¼Œæ¯è½®è¿­ä»£æ‰§è¡Œä¸€æ¬¡ `remove(index)` æ“ä½œï¼Œè¯·é—®è¯¥å¾ªç¯æ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘ï¼Ÿ\n>\n> Aï¼š$O(n^2)$ï¼Œå› ä¸ºä¸€æ¬¡ `remove(int index)` å°±éœ€è¦ $O(n)$ã€‚\n\n## `LinkedHashMap` å«åŒå‘é“¾è¡¨çš„å“ˆå¸Œé›†åˆ\n\n![image.png|350](https://cdn.gallery.uuanqin.top/img/202408310204657.webp)\n\n`LinkedHashMap` æ˜¯ Java æä¾›çš„ä¸€ä¸ªé›†åˆç±»ï¼Œå®ƒç»§æ‰¿è‡ª `HashMap`ï¼Œå¹¶åœ¨ `HashMap` åŸºç¡€ä¸Šç»´æŠ¤ä¸€æ¡**åŒå‘é“¾è¡¨**ã€‚\n\n![image.png|325](https://cdn.gallery.uuanqin.top/img/202509130057327.webp)\n\n`LinkedHashMap` ç‰¹æ€§ï¼š\n\n- æ”¯æŒéå†æ—¶ä¼šæŒ‰ç…§æ’å…¥é¡ºåºæœ‰åºè¿›è¡Œè¿­ä»£ã€‚**ï¼ˆä¸ `HashMap` çš„æœ€å¤§åŒºåˆ«ï¼‰**\n- æ”¯æŒæŒ‰ç…§å…ƒç´ è®¿é—®é¡ºåºæ’åºï¼Œé€‚ç”¨äºå°è£… LRU ç¼“å­˜å·¥å…·ã€‚\n- å› ä¸ºå†…éƒ¨ä½¿ç”¨åŒå‘é“¾è¡¨ç»´æŠ¤å„ä¸ªèŠ‚ç‚¹ï¼Œæ‰€ä»¥éå†æ—¶çš„æ•ˆç‡å’Œå…ƒç´ ä¸ªæ•°æˆæ­£æ¯”ï¼Œç›¸è¾ƒäºå’Œå®¹é‡æˆæ­£æ¯”çš„ `HashMap` æ¥è¯´ï¼Œè¿­ä»£æ•ˆç‡ä¼šé«˜å¾ˆå¤šã€‚**ç”±äºåŒå‘é“¾è¡¨çš„å­˜åœ¨ï¼Œå…¶æ’å…¥æ€§èƒ½å¯èƒ½ä¼šæ¯” `HashMap` ç•¥ä½ã€‚**\n\n### åŸºæœ¬ç‰¹æ€§ `LinkedHashMap` è¿­ä»£é¡ºåºå’Œæ’å…¥é¡ºåºä¸€è‡´\n\nå®ƒçš„ç”¨æ³•å’Œ `HashMap` ä¸€è‡´ã€‚ç‰¹ç‚¹åœ¨äº `LinkedHashMap` çš„ä»å¤´åˆ°å°¾è¿­ä»£é¡ºåºæ˜¯å’Œæ’å…¥é¡ºåºä¸€è‡´çš„ï¼Œè€Œ `HashMap` ä¸­æ˜¯éšæœºçš„ã€‚\n\n### å¯åœ¨æ„é€ å‡½æ•°ä¸­å¼€å¯è®¿é—®é¡ºåº `accessOrder`\n\n`LinkedHashMap` å®šä¹‰äº†æ’åºæ¨¡å¼ `boolean accessOrder = false`ã€‚å½“ `accessOrder` ä¸º `true` æ—¶ï¼Œè¢«è®¿é—®çš„å…ƒç´ å°†é‡æ–°æ‹¿å‡ºæ¥æ”¾åˆ°**é“¾è¡¨å°¾éƒ¨**ã€‚\n\nè®¾ç½®æ–¹å¼ï¼š\n\n```java\n// åˆå§‹å®¹é‡ã€è´Ÿè½½å› å­ã€è®¿é—®é¡ºåº\nLinkedHashMap<Integer, String> map = new LinkedHashMap<>(16, 0.75f, true);\n```\n\n### é‡å†™ `removeEldestEntry` æ–¹æ³•\n\n`removeEldestEntry` å°†è¿”å›ä¸€ä¸ª `boolean` å€¼ï¼Œå‘ŠçŸ¥ `LinkedHashMap` æ˜¯å¦éœ€è¦ç§»é™¤é“¾è¡¨é¦–å…ƒç´ ã€‚æˆ‘ä»¬éœ€è¦åœ¨ç»§æ‰¿ `LinkedHashMap` çš„å­ç±»ä¸­é‡å†™è¯¥æ–¹æ³•ï¼š\n\n```java\npublic class MyMap<K, V> extends LinkedHashMap<K, V> {\n\n    public MyMap(int capacity) {\n        super(capacity, 0.75f, true);\n    }\n\n    @Override\n    protected boolean removeEldestEntry(Map.Entry<K, V> eldest) {\n        return /* ç¼–å†™åˆ¤æ–­é€»è¾‘ */;\n    }\n}\n```\n\n## `PriorityQueue` ä¼˜å…ˆé˜Ÿåˆ—ï¼ˆäºŒé¡¹å †ï¼‰\n\nä¼˜å…ˆé˜Ÿåˆ—åŸºäºäºŒé¡¹å †ï¼Œç”¨æ³•è¯¦è§ï¼š[[Java é›†åˆçš„ä½¿ç”¨]]ã€‚\n\n# æœ€ä½³ç½®æ¢ç®—æ³• OPT\n\nç¼“å­˜æ›¿æ¢çš„æœ€ä¼˜ç®—æ³•ï¼ˆMIN/OPTï¼ŒOptimalï¼‰åœ¨ 1966 å¹´ç”± Laszlo A.Belady æå‡ºï¼Œæ­¤ç®—æ³•åœ¨å·²çŸ¥æœªæ¥æ‰€æœ‰è®¿é—®è®°å½•çš„å‰æä¸‹ï¼Œæ¯æ¬¡éƒ½æ›¿æ¢æœªæ¥ä¸å†è¢«è®¿é—®/æœ€è¿œè¢«è®¿é—®çš„ç°å­˜æ•°æ®ã€‚è¯¥ç®—æ³•æ˜¯ç†è®ºä¸Šçš„æœ€ä¼˜ç®—æ³•ï¼Œå› ä¸ºéœ€è¦å·²çŸ¥æœªæ¥æ‰€æœ‰è®¿é—®è®°å½•ï¼Œå¹¶ä¸å…·å¤‡å¯å®ç°æ€§ï¼Œé€šå¸¸ç”¨äºè¡¡é‡å…¶å®ƒç¼“å­˜æ›¿æ¢ç®—æ³•çš„ä¼˜åŠ£ã€‚\n\n> [!example] ğŸŸ¨ [P4404 [JSOI2010] ç¼“å­˜äº¤æ¢ - æ´›è°·](https://www.luogu.com.cn/problem/P4404#ide)\n>\n> åœ¨è®¡ç®—æœºä¸­ï¼ŒCPU åªèƒ½å’Œé«˜é€Ÿç¼“å­˜ Cache ç›´æ¥äº¤æ¢æ•°æ®ã€‚å½“æ‰€éœ€çš„å†…å­˜å•å…ƒä¸åœ¨ Cache ä¸­æ—¶ï¼Œåˆ™éœ€è¦ä»ä¸»å­˜é‡ŒæŠŠæ•°æ®è°ƒå…¥ Cacheã€‚æ­¤æ—¶ï¼Œå¦‚æœ Cache å®¹é‡å·²æ»¡ï¼Œåˆ™å¿…é¡»å…ˆä»ä¸­åˆ é™¤ä¸€ä¸ªã€‚\n>\n> åœ¨ç°ä»£è®¡ç®—æœºä¸­ï¼Œå¾€å¾€é‡‡ç”¨ LRU(æœ€è¿‘æœ€å°‘ä½¿ç”¨) çš„ç®—æ³•æ¥è¿›è¡Œ Cache è°ƒåº¦â€”â€”å¯æ˜¯ï¼Œä»ä¸Šä¸€ä¸ªä¾‹å­å°±èƒ½çœ‹å‡ºï¼Œè¿™å¹¶ä¸æ˜¯æœ€ä¼˜çš„ç®—æ³•ã€‚ å¯¹äºä¸€ä¸ªå›ºå®šå®¹é‡çš„ç©º Cache å’Œè¿ç»­çš„è‹¥å¹²ä¸»å­˜è®¿é—®è¯·æ±‚ï¼Œèªèªæƒ³çŸ¥é“å¦‚ä½•åœ¨æ¯æ¬¡ Cache ç¼ºå¤±æ—¶æ¢å‡ºæ­£ç¡®çš„ä¸»å­˜å•å…ƒï¼Œä»¥è¾¾åˆ°æœ€å°‘çš„ Cache ç¼ºå¤±æ¬¡æ•°ã€‚\n\næ€è·¯ï¼šé‡‡ç”¨ OPTï¼Œå³æ·˜æ±°åœ¨ä¹‹åçš„è®¿é—®ä¸­ï¼Œå‡ºç°æœ€æ™šï¼ˆç”šè‡³ä¸å‡ºç°ï¼‰çš„å…ƒç´ ã€‚\n\næˆ‘çš„è§£æ³•ï¼š\n\n- ä½¿ç”¨åˆ°çš„æ•°æ®ç»“æ„æœ‰å“ˆå¸Œè¡¨å’Œä¼˜å…ˆé˜Ÿåˆ—ã€‚\n- å“ˆå¸Œè¡¨ç”¨äºå¿«é€Ÿåˆ¤æ–­ç¼“å­˜ä¸­æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„ `key`ã€‚\n- ä¼˜å…ˆé˜Ÿåˆ—å¯å¿«é€Ÿå¾—å‡ºå¾…åˆ å…ƒç´ ã€‚\n- æ›´æ–°é”®å€¼æ—¶ï¼Œä»ä¼˜å…ˆé˜Ÿåˆ—ä¸­æ‰¾å‡ºç›¸åº”å…ƒç´ å¹¶åˆ é™¤çš„ `remove(obj)` æ“ä½œå¯èƒ½æœ‰ä¸€å®šçš„æ—¶é—´å¤æ‚åº¦ã€‚\n\n```java\nimport java.util.Scanner;\nimport java.util.Arrays;\nimport java.util.Map;\nimport java.util.HashMap;\nimport java.util.PriorityQueue;\n\npublic class Main{\n    public static void main(String args[]){\n        Scanner in = new Scanner(System.in);\n        int N = in.nextInt();\n        int M = in.nextInt();\n        int[] dataIds = new int[N];\n        for(int i=0;i<N;i++){\n            dataIds[i]=in.nextInt();\n        }\n\n        int ans = f(N,M,dataIds);\n        System.out.println(ans);\n    }\n\n    public static int f(int n,int capacity,int[] dataIds){\n        int[] next = new int[n]; // è¡¨ç¤ºå½“å‰ id ä¸‹ä¸€æ¬¡å‡ºç°çš„ä½ç½®\n        Arrays.fill(next,Integer.MAX_VALUE);\n        Map<Integer,Integer> map = new HashMap<>(); // id->lastIdx\n        for(int i=0;i<n;i++){\n            if(map.containsKey(dataIds[i])){\n                int lastIdx = map.get(dataIds[i]);\n                next[lastIdx] = i;\n            }\n            map.put(dataIds[i],i);\n        }\n        PriorityQueue<Node> q = new PriorityQueue<>((n1,n2)->{\n            return n2.next-n1.next;\n        });\n        Map<Integer,Node> keyMap = new HashMap<>(); // ä¸ºäº†æ›´å¿«åˆ¤æ–­ç¼“å­˜ä¸­æ˜¯å¦å­˜åœ¨å¯¹åº”çš„é”®\n        int miss = 0;\n        for(int i=0;i<n;i++){\n            if(keyMap.containsKey(dataIds[i])){\n                Node node = keyMap.get(dataIds[i]);\n                q.remove(node);\n                node.next = next[i];\n                q.offer(node);\n                continue;\n            }\n            if(q.size()==capacity){\n                Node oldNode = q.poll();\n                keyMap.remove(oldNode.id);\n            }\n            Node newNode = new Node(dataIds[i],next[i]);\n            q.offer(newNode);\n            keyMap.put(dataIds[i],newNode);\n            miss++;\n        }\n        return miss;\n    }\n}\n\nclass Node{\n    Integer id;\n    int next;\n    Node(Integer id,int next){\n        this.id= id;\n        this.next = next;\n    }\n}\n```\n\n# æœ€è¿‘æœ€å°‘ä½¿ç”¨ LRU\n\næœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼ˆLeast Recently Usedï¼ŒLRUï¼‰ï¼Œæ˜¯ä¸€ç§å¸¸ç”¨çš„é¡µé¢ç½®æ¢ç®—æ³•ï¼Œé€‰æ‹©æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨çš„é¡µé¢äºˆä»¥æ·˜æ±°ã€‚è¯¥ç®—æ³•èµ‹äºˆæ¯ä¸ªé¡µé¢ä¸€ä¸ªè®¿é—®å­—æ®µï¼Œç”¨æ¥è®°å½•ä¸€ä¸ªé¡µé¢è‡ªä¸Šæ¬¡è¢«è®¿é—®ä»¥æ¥æ‰€ç»å†çš„æ—¶é—´ tï¼Œå½“é¡»æ·˜æ±°ä¸€ä¸ªé¡µé¢æ—¶ï¼Œé€‰æ‹©ç°æœ‰é¡µé¢ä¸­å…¶ t å€¼æœ€å¤§çš„ï¼Œå³æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„é¡µé¢äºˆä»¥æ·˜æ±°ã€‚\n\n> [!example] é¢˜ç›®ï¼šğŸŸ¨ [146. LRU ç¼“å­˜ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/lru-cache/description/?envType=study-plan-v2&envId=top-interview-150)\n> è¯·ä½ è®¾è®¡å¹¶å®ç°ä¸€ä¸ªæ»¡è¶³ LRUï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼‰ç¼“å­˜ çº¦æŸçš„æ•°æ®ç»“æ„ã€‚\n> å®ç° `LRUCache` ç±»ï¼š\n> - `LRUCache(int capacity)` ä»¥ æ­£æ•´æ•° ä½œä¸ºå®¹é‡ `capacity` åˆå§‹åŒ– LRU ç¼“å­˜\n> - `int get(int key)` å¦‚æœå…³é”®å­— `key` å­˜åœ¨äºç¼“å­˜ä¸­ï¼Œåˆ™è¿”å›å…³é”®å­—çš„å€¼ï¼Œå¦åˆ™è¿”å› -1 ã€‚\n> - `void put(int key, int value)`\n> \t- å¦‚æœå…³é”®å­— `key` å·²ç»å­˜åœ¨ï¼Œåˆ™å˜æ›´å…¶æ•°æ®å€¼ `value`\n> \t- å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™å‘ç¼“å­˜ä¸­æ’å…¥è¯¥ç»„ key-value ã€‚å¦‚æœæ’å…¥æ“ä½œå¯¼è‡´å…³é”®å­—æ•°é‡è¶…è¿‡ `capacity` ï¼Œåˆ™åº”è¯¥ é€å‡º æœ€ä¹…æœªä½¿ç”¨çš„å…³é”®å­—ã€‚\n>\n> å‡½æ•° `get` å’Œ `put` å¿…é¡»ä»¥ $O(1)$ çš„å¹³å‡æ—¶é—´å¤æ‚åº¦è¿è¡Œã€‚\n\né¦–å…ˆä»‹ç»ç›´æ¥ä½¿ç”¨ Java API çš„å†™æ³•ã€‚Java ä¸­ `LinkedHashMap` çš„ç‰¹æ€§ä½¿å…¶å¤©ç„¶åœ°æˆä¸ºè½»æ¾å®ç° LRU ç¼“å­˜çš„æ•°æ®ç»“æ„ã€‚å…·ä½“å®ç°æ€è·¯å¦‚ä¸‹ï¼š\n\n- ç»§æ‰¿ `LinkedHashMap`ï¼›\n- æ„é€ æ–¹æ³•ä¸­æŒ‡å®š `accessOrder` ä¸º `true` ï¼Œè¿™æ ·åœ¨è®¿é—®å…ƒç´ æ—¶å°±ä¼šæŠŠè¯¥å…ƒç´ ç§»åŠ¨åˆ°é“¾è¡¨å°¾éƒ¨ï¼Œé“¾è¡¨é¦–å…ƒç´ å°±æ˜¯æœ€è¿‘æœ€å°‘è¢«è®¿é—®çš„å…ƒç´ ï¼›\n- é‡å†™ `removeEldestEntry` æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ª `boolean` å€¼ï¼Œå‘ŠçŸ¥ `LinkedHashMap` æ˜¯å¦éœ€è¦ç§»é™¤é“¾è¡¨é¦–å…ƒç´ ï¼ˆç¼“å­˜å®¹é‡æœ‰é™ï¼‰ã€‚\n\n```java\nclass LRUCache extends LinkedHashMap<Integer,Integer>{\n    int capacity;\n    public LRUCache(int capacity) {\n\t\tsuper(capacity,0.75f,true);\n\t\tthis.capacity = capacity;\n    }\n\n\t// ç”±äºé¢˜ç›®å¯¹getè¿”å›å€¼è¦æ±‚ï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦è¿›è¡Œä¸€äº›è°ƒæ•´ï¼Œä¸ç„¶æˆ‘ä»¬éƒ½å¯ä»¥å¹²è„†ä¸å†™ã€‚\n    public int get(int key) {\n        return super.getOrDefault(key, -1);\n    }\n    \n    /* é¢˜ç›®ä¸­ put æ–¹æ³•ç›´æ¥äº¤ç»™ LinkedHashMap */\n\n    @Override\n    protected boolean removeEldestEntry(Map.Entry<Integer,Integer> eldest){\n        return size() > capacity;\n    }\n}\n```\n\nå¦‚æœé¢è¯•æ‰‹æ’•ç¯èŠ‚è¿™é“é¢˜ç›®è¿™æ ·å†™ï¼Œä¼°è®¡é¢è¯•å®˜å°±ä¼šå«ä½ åœ¨å®¶ç­‰é€šçŸ¥äº†ã€‚`LinkedHashMap` æ— å¤–ä¹å°±æ˜¯å“ˆå¸Œè¡¨ `HashMap` + åŒå‘é“¾è¡¨ `LinkedList`ã€‚æŠŠå®ƒæ‹†å¼€æ¥ï¼Œå°±ä¼šæœ‰ä»¥ä¸‹å®ç°ï¼š\n\n- `HashMap` + `LinkedList`ã€‚`HashMap` ç”¨äºå¿«é€Ÿå®šä½åŒå‘é“¾è¡¨ä¸­çš„ç»“ç‚¹ï¼›`LinkedList` ç”¨äºåŒºåˆ†ç¼“å­˜ `key` çš„è®¿é—®é¡ºåºã€‚\n- åŒå‘é“¾è¡¨å¿…é¡»è‡ªå·±æ‰‹åŠ¨å»ºç«‹å¹¶ç»´æŠ¤å„ç§ç»“ç‚¹æ“ä½œ\n\n```java\nclass LRUCache {\n    public List<Node> list = new LinkedList<>();\n    public Map<Integer,Node> map = new HashMap<>();\n    public int capacity;\n    public LRUCache(int capacity) {\n        this.capacity = capacity;\n    }\n    \n    public int get(int key) {\n        if(!map.containsKey(key)){\n            return -1;\n        }\n        Node node = map.get(key);\n        list.remove(node);\n        list.addLast(node);\n        return node.value;\n    }\n    \n    public void put(int key, int value) {\n        if(map.containsKey(key)){\n            Node node = map.get(key);\n            list.remove(node);\n            node.value = value;\n            list.addLast(node);\n            return;\n        }\n        \n        if(map.size()==capacity){\n            Node oldNode = list.removeFirst();\n            map.remove(oldNode.key);\n        }\n        Node newNode = new Node(key,value);\n        list.addLast(newNode);\n        map.put(key,newNode);\n    }\n}\n\nclass Node{\n    int key;\n    int value;\n    Node pre,next;\n    public Node(){};\n    public Node(int key,int value){\n        this.key = key;\n        this.value = value;\n    }\n}\n```\n\nä½†æ˜¯ï¼Œä¸Šé¢çš„å®ç°æ–¹æ³•ä¸­ä½¿ç”¨äº† `LinkedList` çš„ `remove(obj)` æ“ä½œï¼Œè¿™ä¸ªæ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸º $O(n)$ï¼Œä¸ç¬¦åˆé¢˜ç›®çš„æ—¶é—´å¤æ‚åº¦è¦æ±‚ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦è‡ªå·±æ‰‹å†™åŒå‘é“¾è¡¨æ”¹è¿›è¿™å—çš„æ—¶é—´å¤æ‚åº¦ã€‚åœ¨æ¥ä¸‹æ¥çš„å®ç°ä¸­ï¼š\n\n- ä½¿ç”¨**å¾ªç¯åŒå‘é“¾è¡¨**ï¼Œç®€åŒ–ä»£ç ç¼–å†™\n- åˆ©ç”¨ `HashMap` ç›´æ¥å®šä½é“¾è¡¨ä¸­å¾…åˆ é™¤çš„ `node`ï¼Œä¼˜åŒ– `remove(obj)` çš„æ—¶é—´å¤æ‚åº¦\n- åªä¼šç¼–å†™å¿…è¦çš„é“¾è¡¨æ“ä½œã€‚\n\n```java\nclass LRUCache {\n    public Node head = new Node();\n    public Map<Integer,Node> map = new HashMap<>();\n    public int capacity;\n    public LRUCache(int capacity) {\n        this.capacity = capacity;\n        head.next=head;\n        head.pre = head;\n    }\n    \n    public int get(int key) {\n        if(!map.containsKey(key)){\n            return -1;\n        }\n        Node node = map.get(key);\n        remove(node);\n        addLast(node);\n        return node.value;\n    }\n    \n    public void put(int key, int value) {\n        if(map.containsKey(key)){\n            Node node = remove(map.get(key));\n            node.value = value;\n            addLast(node);\n            return;\n        }\n        \n        \n        if(map.size()==capacity){\n            Node oldNode = removeFirst();\n            map.remove(oldNode.key);\n        }\n        Node newNode = new Node(key,value);\n        addLast(newNode);\n        map.put(key,newNode);\n    }\n    \n    // æ—¶é—´å¤æ‚åº¦ç¼©çŸ­è‡³ O(1)\n    public Node remove(Node node){\n        node.pre.next = node.next;\n        node.next.pre = node.pre;\n        return node;\n    }\n    \n    public Node removeFirst(){\n        return remove(head.next);\n    }\n    \n    public void addLast(Node node){\n        node.pre = head.pre;\n        node.next = head;\n        head.pre.next = node;\n        head.pre = node;\n    }\n    \n}\n\nclass Node{\n    int key;\n    int value;\n    Node pre,next;\n    public Node(){};\n    public Node(int key,int value){\n        this.key = key;\n        this.value = value;\n    }\n}\n```\n\n# æœ€å°‘ä½¿ç”¨ç½®æ¢ç®—æ³• LFU\n\næœ€è¿‘æœ€ä¸å¸¸ç”¨ç®—æ³•ï¼ˆLFUï¼ŒLeast Frequently Usedï¼‰æ¯æ¬¡æ›¿æ¢è®¿é—®æ¬¡æ•°æœ€å°çš„æ•°æ®ï¼Œè¯¥ç®—æ³•çš„æ€æƒ³æ˜¯æœ€è¿‘ä¸€æ®µæ—¶é—´è¢«è®¿é—®æ¬¡æ•°æœ€å°çš„æ•°æ®åœ¨å°†æ¥è¢«è®¿é—®çš„å¯èƒ½æ€§æœ€å°ã€‚\n\n> [!example] ğŸŸ¥ [460. LFU ç¼“å­˜ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/lfu-cache/description/)\n> è¯·ä½ ä¸º æœ€ä¸ç»å¸¸ä½¿ç”¨ï¼ˆLFUï¼‰ç¼“å­˜ç®—æ³•è®¾è®¡å¹¶å®ç°æ•°æ®ç»“æ„ã€‚\n>\n> å®ç° `LFUCache` ç±»ï¼š\n>\n> - `LFUCache(int capacity)` - ç”¨æ•°æ®ç»“æ„çš„å®¹é‡ `capacity` åˆå§‹åŒ–å¯¹è±¡\n> - `int get(int key)` - å¦‚æœé”® `key` å­˜åœ¨äºç¼“å­˜ä¸­ï¼Œåˆ™è·å–é”®çš„å€¼ï¼Œå¦åˆ™è¿”å› `-1` ã€‚\n> - `void put(int key, int value)` å¦‚æœé”® `key` å·²å­˜åœ¨ï¼Œåˆ™å˜æ›´å…¶å€¼ï¼›å¦‚æœé”®ä¸å­˜åœ¨ï¼Œè¯·æ’å…¥é”®å€¼å¯¹ã€‚å½“ç¼“å­˜è¾¾åˆ°å…¶å®¹é‡ `capacity` æ—¶ï¼Œåˆ™åº”è¯¥åœ¨æ’å…¥æ–°é¡¹ä¹‹å‰ï¼Œç§»é™¤æœ€ä¸ç»å¸¸ä½¿ç”¨çš„é¡¹ã€‚åœ¨æ­¤é—®é¢˜ä¸­ï¼Œå½“å­˜åœ¨å¹³å±€ï¼ˆå³ä¸¤ä¸ªæˆ–æ›´å¤šä¸ªé”®å…·æœ‰ç›¸åŒä½¿ç”¨é¢‘ç‡ï¼‰æ—¶ï¼Œåº”è¯¥å»é™¤ **æœ€ä¹…æœªä½¿ç”¨** çš„é”®ã€‚\n> \n> ä¸ºäº†ç¡®å®šæœ€ä¸å¸¸ä½¿ç”¨çš„é”®ï¼Œå¯ä»¥ä¸ºç¼“å­˜ä¸­çš„æ¯ä¸ªé”®ç»´æŠ¤ä¸€ä¸ª ä½¿ç”¨è®¡æ•°å™¨ ã€‚ä½¿ç”¨è®¡æ•°æœ€å°çš„é”®æ˜¯æœ€ä¹…æœªä½¿ç”¨çš„é”®ã€‚\n>\n> å½“ä¸€ä¸ªé”®é¦–æ¬¡æ’å…¥åˆ°ç¼“å­˜ä¸­æ—¶ï¼Œå®ƒçš„ä½¿ç”¨è®¡æ•°å™¨è¢«è®¾ç½®ä¸º 1ï¼ˆç”±äº `put` æ“ä½œï¼‰ã€‚å¯¹ç¼“å­˜ä¸­çš„é”®æ‰§è¡Œ `get` æˆ– `put` æ“ä½œï¼Œä½¿ç”¨è®¡æ•°å™¨çš„å€¼å°†ä¼šé€’å¢ã€‚\n>\n> å‡½æ•° `get` å’Œ `put` å¿…é¡»ä»¥ $O(1)$ çš„å¹³å‡æ—¶é—´å¤æ‚åº¦è¿è¡Œã€‚\n\nåŒ LRU ä¸­è¯´æ˜çš„é¡ºåºä¸€æ ·ï¼Œæˆ‘ä»¬è¿˜æ˜¯å…ˆä» API ç”¨æ³•å¼€å§‹ä»‹ç»ï¼Œå†æ…¢æ…¢æ”¹é€ ä¸ºæ‰‹å·¥å®ç°ã€‚\n\nå®ç°è¦ç‚¹ï¼š\n\n- åŒ `HashMap`ï¼Œä¸€ä¸ªä¿å­˜ `key` å¯¹åº”çš„é¢‘æ•°ï¼ˆé¢‘æ•°ç”¨äºç´¢å¼•é“¾è¡¨ä»¥åŠå¿«é€Ÿåˆ¤ç©ºï¼‰ï¼Œä¸€ä¸ªä¿å­˜ä¸åŒé¢‘æ•°ä¸‹ä¿å­˜çš„é“¾è¡¨ç»“æ„ã€‚\n- é“¾è¡¨ç»“æ„é€‰ç”¨ `LinkedHashMap`ï¼Œä½¿ç”¨å®ƒçš„ä¸€äº›ç‰¹æ€§ï¼š\n\t- é“¾è¡¨ç‰¹æ€§ï¼šåœ¨å¹³å±€æƒ…å†µæ—¶å¿«é€Ÿè·å–æœ€ä¹…æœªä½¿ç”¨çš„ç»“ç‚¹ï¼ˆè¡¨å¤´ç»“ç‚¹ï¼‰ï¼›æ’å…¥é”®æ—¶è‡ªåŠ¨æ’å…¥é“¾è¡¨æœ«ç«¯ã€‚\n\t- å“ˆå¸Œè¡¨ç‰¹æ€§ï¼šåˆ é™¤å…ƒç´ æ—¶èƒ½è¾¾åˆ° `O(1)` æ—¶é—´å¤æ‚åº¦\n\n```java\nclass LFUCache {\n    public Map<Integer,Map<Integer,Integer>> freq2map = new HashMap<>();\n    public Map<Integer,Integer> key2freq = new HashMap<>();\n\n    public int capacity;\n    public int minfreq = 0;\n    public LFUCache(int capacity) {\n        this.capacity = capacity;\n    }\n    \n    public int get(int key) {\n        return move(key,null);\n    }\n    \n    public void put(int key, int value) {\n        if(move(key,value)!=-1){\n            return;\n        }\n        if(key2freq.size()==capacity){\n            Map<Integer,Integer> map = freq2map.get(minfreq);\n            Integer k = map.keySet().iterator().next();\n            map.remove(k);\n            key2freq.remove(k);   \n        }\n        key2freq.put(key,1);\n        freq2map.computeIfAbsent(1,k->new LinkedHashMap<>()).put(key,value);\n        minfreq = 1;\n    }\n    \n    public Integer move(Integer key, Integer value){\n        Integer freq = key2freq.getOrDefault(key,null);\n        if(freq==null){\n            return -1;\n        }\n        \n        // Integer value = freq2map.get(freq).remove(key);\n        Map<Integer,Integer> map = freq2map.get(freq);\n        if(value==null){\n            value = map.get(key);\n        }\n        map.remove(key);\n        if(map.size()==0 && minfreq==freq){\n            minfreq++;\n        }\n    \n        \n        Integer newFreq= freq+1;\n        key2freq.put(key,newFreq);\n        freq2map.computeIfAbsent(newFreq,k->new LinkedHashMap<>()).put(key,value);\n        return value;\n    }\n}\n```\n\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¼€å§‹ç”¨ `LinkedList` æ›¿æ¢ `LinkedHashMap`ã€‚å˜åŒ–ç‚¹ï¼š\n\n- æˆ‘ä»¬åˆ›å»ºäº† `Node` ç»“ç‚¹ï¼ŒæŠŠé¢‘æ•°å†…åŒ–åˆ° `Node` ä¸­ã€‚\n- æŠŠé¢‘æ•°å“ˆå¸Œè¡¨å˜ä¸º `key2Node`ï¼Œè¦è·å–é¢‘æ•°å¯ä»¥å…ˆå¾—åˆ° `Node`ï¼Œåœ¨é€šè¿‡ `node.freq` è·å–ã€‚\n- ä½¿ç”¨ `LinkedList` è¿›è¡Œé“¾è¡¨æ“ä½œï¼Œè‡ªè¡Œæ¨¡æ‹Ÿé“¾è¡¨æ’å…¥ã€åˆ é™¤æ“ä½œç»´æŠ¤é“¾è¡¨é¡ºåºã€‚\n\n```java\nclass LFUCache {\n    \n    public Map<Integer,LinkedList<Node>> freq2list = new HashMap<>();\n    public Map<Integer,Node> key2node = new HashMap<>();\n\n    public int capacity;\n    public int minfreq = 0;\n    public LFUCache(int capacity) {\n        this.capacity = capacity;\n    }\n    \n    public int get(int key) {\n        return move(key,null);\n    }\n    \n    public void put(int key, int value) {\n        if(move(key,value)!=-1){\n            return;\n        }\n        if(key2node.size()==capacity){\n            List<Node> list = freq2list.get(minfreq);\n            Node oldNode = list.removeFirst();\n            key2node.remove(oldNode.key);   \n        }\n        Node newNode = new Node(key,value,1);\n        key2node.put(key,newNode);\n        freq2list.computeIfAbsent(1,k->new LinkedList<>()).add(newNode);\n        minfreq = 1;\n    }\n    \n    public Integer move(Integer key, Integer value){\n        Node node = key2node.getOrDefault(key,null);\n        if(node==null){\n            return -1;\n        }\n        \n        LinkedList<Node> list = freq2list.get(node.freq);\n        if(value==null){\n            value = node.value;\n        }\n        list.remove(node); // ä¸ä¸º O(1)\n        if(list.size()==0 && minfreq==node.freq){\n            minfreq++;\n        }\n    \n        node.freq++;\n        node.value = value;\n        freq2list.computeIfAbsent(node.freq,k->new LinkedList<>()).add(node);\n        return value;\n    }\n}\n\nclass Node{\n    int key;\n    int value;\n    int freq;\n    public Node(){};\n    public Node(int key,int value,int freq){\n        this.key = key;\n        this.value = value;\n        this.freq = freq;\n    }\n}\n```\n\nåœ¨ä¸Šé¢çš„å®ç°ä¸­ï¼Œè¿˜æ˜¯å­˜åœ¨ `LinkedList` çš„ `remove(obj)` çš„æ—¶é—´å¤æ‚åº¦è¿‡é«˜çš„é—®é¢˜ã€‚æˆ‘ä»¬éœ€è¦è‡ªå·±å†™åŒå‘é“¾è¡¨ã€‚è¦ç‚¹ï¼š\n\n- è‡ªå†™**å¾ªç¯åŒå‘é“¾è¡¨**ï¼Œé™ä½ä»£ç å®ç°éš¾åº¦\n- åˆ©ç”¨ `key2Node` å“ˆå¸Œè¡¨èƒ½åœ¨ $O(1)$ æ—¶é—´å†…å®šä½å¾…åˆ ç»“ç‚¹ï¼Œé™ä½æ—¶é—´å¤æ‚åº¦ã€‚\n\n```java\nclass LFUCache {\n    \n    public Map<Integer,MyLinkedList> freq2list = new HashMap<>();\n    public Map<Integer,Node> key2node = new HashMap<>();\n\n    public int capacity;\n    public int minfreq = 0;\n    public LFUCache(int capacity) {\n        this.capacity = capacity;\n    }\n    \n    public int get(int key) {\n        return move(key,null);\n    }\n    \n    public void put(int key, int value) {\n        if(move(key,value)!=-1){\n            return;\n        }\n        if(key2node.size()==capacity){\n            MyLinkedList list = freq2list.get(minfreq);\n            Node oldNode = list.removeFirst();\n            key2node.remove(oldNode.key);   \n        }\n        Node newNode = new Node(key,value,1);\n        key2node.put(key,newNode);\n        freq2list.computeIfAbsent(1,k->new MyLinkedList()).add(newNode);\n        minfreq = 1;\n    }\n    \n    public Integer move(Integer key, Integer value){\n        Node node = key2node.getOrDefault(key,null);\n        if(node==null){\n            return -1;\n        }\n        \n        MyLinkedList list = freq2list.get(node.freq);\n        if(value==null){\n            value = node.value;\n        }\n        list.remove(node);\n        if(list.size==0 && minfreq==node.freq){\n            minfreq++;\n        }\n    \n        node.freq++;\n        node.value = value;\n        freq2list.computeIfAbsent(node.freq,k->new MyLinkedList()).add(node);\n        return value;\n    }\n}\n\nclass Node{\n    int key;\n    int value;\n    int freq;\n    Node pre;\n    Node next;\n    public Node(){};\n    public Node(Node pre,Node next){\n        this.pre = pre;\n        this.next = next;\n    }\n    public Node(int key,int value,int freq){\n        this.key = key;\n        this.value = value;\n        this.freq = freq;\n    }\n}\n\nclass MyLinkedList{\n    Node dummy;\n    int size=0;\n    public MyLinkedList(){\n        this.dummy = new Node();\n        this.dummy.next = this.dummy;\n        this.dummy.pre = this.dummy;\n    }\n    \n    public void add(Node node){\n        Node lastNode = dummy.pre;\n        lastNode.next = node;\n        dummy.pre = node;\n        node.pre = lastNode;\n        node.next = dummy;\n        this.size++;\n    }\n    \n    public Node remove(Node node){\n        node.pre.next = node.next;\n        node.next.pre = node.pre;\n        this.size--;\n        return node;\n    }\n    \n    public Node removeFirst(){\n        return remove(this.dummy.next);\n    }\n   \n}\n\n/**\n * Your LFUCache object will be instantiated and called as such:\n * LFUCache obj = new LFUCache(capacity);\n * int param_1 = obj.get(key);\n * obj.put(key,value);\n */\n```\n\n# æœ¬æ–‡å‚è€ƒ\n\n- ç‹é“ 2023ã€Š408 æ•°æ®ç»“æ„ã€‹\n- [LRU_ç™¾åº¦ç™¾ç§‘ (baidu.com)](https://baike.baidu.com/item/LRU)\n- [146. LRU ç¼“å­˜ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/lru-cache/solutions/259678/lruhuan-cun-ji-zhi-by-leetcode-solution/?envType=study-plan-v2&envId=top-interview-150)\n- [LinkedHashMap æºç åˆ†æ | JavaGuide](https://javaguide.cn/java/collection/linkedhashmap-source-code.html#linkedhashmap-%E7%AE%80%E4%BB%8B)\n- [ä»€ä¹ˆæ˜¯ Java çš„ LinkedHashMapï¼Ÿ - Java é›†åˆé¢è¯•é¢˜ - é¢è¯•é¸­ - ç¨‹åºå‘˜æ±‚èŒé¢è¯•åˆ·é¢˜ç¥å™¨ (mianshiya.com)](https://www.mianshiya.com/bank/1788408712975282177/question/1780933294783754241)\n- [ã€å›¾è§£ã€‘ä¸€å¼ å›¾ç§’æ‡‚ LFUï¼ï¼ˆPython/Java/C++/Go/JS/Rustï¼‰-@çµèŒ¶å±±è‰¾åºœ- åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/lfu-cache/solutions/2457716/tu-jie-yi-zhang-tu-miao-dong-lfupythonja-f56h/)\n- [Javaä¸­LinkedListçš„removeæ–¹æ³•çœŸçš„è€—æ—¶O(1)å—ï¼Ÿ - NickyYe - åšå®¢å›­](https://www.cnblogs.com/NickyYe/p/4461454.html)\n- [ç»å…¸è®ºæ–‡è§£è¯»â€”â€”Cache æ›¿æ¢ç®—æ³• - çŸ¥ä¹](https://zhuanlan.zhihu.com/p/591436083)\n- [belady_ç™¾åº¦ç™¾ç§‘](https://baike.baidu.com/item/belady/4808156)","categories":[{"name":"ç®—æ³•ä¸æ•°æ®ç»“æ„","api":"api/categories/ç®—æ³•ä¸æ•°æ®ç»“æ„.json"}],"tags":[{"name":"Java","api":"api/tags/Java.json"},{"name":"LeetCode","api":"api/tags/LeetCode.json"},{"name":"LRU","api":"api/tags/LRU.json"},{"name":"LFU","api":"api/tags/LFU.json"},{"name":"OPT","api":"api/tags/OPT.json"},{"name":"ç¼“å­˜","api":"api/tags/ç¼“å­˜.json"},{"name":"é¡µé¢ç½®æ¢","api":"api/tags/é¡µé¢ç½®æ¢.json"},{"name":"æ“ä½œç³»ç»Ÿ","api":"api/tags/æ“ä½œç³»ç»Ÿ.json"}]},"api":"api/posts/p/270917b1.json"}