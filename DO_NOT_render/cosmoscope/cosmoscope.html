<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="generator" content="Cosma v2.0.4">
    
    <meta name="title" content="半方池水半方田 - 文章关系图谱">
    
    <meta name="author" content="wuanqin">
    
    <meta name="description" content="只能懂一点点">
    
    <meta name="keywords" content="编程,博客,生活">
    
    <meta name="date" content="December 3, 2023 at 3:43:23 PM">
    <title>Cosma — 半方池水半方田 - 文章关系图谱</title>

    <link rel="icon" type="image/png" sizes="16x16" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAIGaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA2LjAuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIgogICAgICAgICAgICB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDxleGlmOlBpeGVsWERpbWVuc2lvbj4xMDI0PC9leGlmOlBpeGVsWERpbWVuc2lvbj4KICAgICAgICAgPGV4aWY6UGl4ZWxZRGltZW5zaW9uPjEwMjQ8L2V4aWY6UGl4ZWxZRGltZW5zaW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KokyVsAAAAAlwSFlzAAALEwAACxMBAJqcGAAAATtQTFRFR3BMDVJzDFx+GHSUAP//DVByCVd3AAAAAAD/AIKBCXKSBFJ0F1x/GFZ2EGCANmF8D2+QGHaXFG6NAFh8EnaXG3aWLHCOE2iIH3mZAEx4AFV6AG2QAXOUOn+dprG8AHGSGmuLGWmJfZqtUoahprrGD1V4CVV4FHeWFnWWLmeIAFp8FWaGAFh7LmeGF2OGUHWNfZapAF+HUHSNfZaoAF6H/////Pz87O7x4uLio6Oj3t7eFWaJE16DGGCEIWuOAFqAGoCiADxyAFyHRG+MHoGjAGeQE3GUEG6S1tvhAH2iRX+cAG2Y5OjrAGWMiqCxoa+7iqGyobXBB2KGCF6DCGGFCl2DE4CiEX2gGXqdEX2fFX+iJHmcGXqcInmbAEx3aIWa193jAE12Z4Sa5ensZ5CmaZCn1t3j5Ons3t7fp3RRZgAAADV0Uk5TAHRwQQFHRAEBAkJ4+3h0eHBudPpy+3V1cvv7+vpy+/v7+/v7+52dmZl1+nX6dXX7+/v7+/siYXfnAAAA2ElEQVQYGQXBy07CUBRA0X1OD9zCQAloS4Nj40ii/gG/7UdoSYwxjowCgo9EQxrpfdS1wA0AAGDgEHcgO8qshw/xN+IscnG9tp6SfCjqp2hheHXrMhO6EB8Wr43Rz/qX2fSe+TbW0m8MlepMdvBVxCJTDHv/vkNulqs3fnaGIpJmqnWnOksiKKVIAoAkcoLR+fEGMWK3OfYJ5SWsJ2XlfVVOtmGFso+tP53AaOzbuMewqt4+Tj9pP0aH0lrJ/87nG1Elpa5cPufiDvTCUJWUGvM4cDkAAOSOf+M3WO+ZgJOzAAAAAElFTkSuQmCC" />

    <style> 
        :root {
            
            --n_zone-of-archive: #4d3300;
            
            --n_核心协同: #84c227;
            
            --n_生活区: #ff274a;
            
            --n_工具箱: #858585;
            
            --n_社会生活: #858585;
            
            --n_hexo: #4095a5;
            
            --n_wordpress: #48565c;
            
            --n_undefined: #858585;
            
            
            --l_undefined: #e1e1e1;
            
            --highlight: #ff6a6a;
        }
        @charset "UTF-8";

/** Global
------------------------------------------------------------*/

:root {
  /* colors */
  --cosma-blue: #147899;
  --cosma-blue-dark: #02385c;
  --border-color: #d8d8d8;
  --border-light-color: #f3f3f3;
  --indicator-background-color: #fafafa;
  --lateral-background-color: white;
  /* typography */
  --sans: system-ui, -apple-system, 'San Francisco', 'Helvetica Neue', 'Segoe UI', 'Arial',
    sans-serif;
  --serif: 'Georgia', 'Garamond', 'Time New Roman', 'Times', serif;
  --mono: 'Consolas', 'Courrier New', 'Courrier', monospace;
  --condensed: 'Avenir Next Condensed', 'Arial Condensed', sans-serif;
  /* global size */
  font-size: 62.5%;
  /* others */
  --shadow: 0 1px 3px rgba(3, 2, 2, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);
  --offblack: rgb(51, 51, 51);
  --offwhite: rgb(253, 252, 251);
  --gray: #d6d6d6;
  --background-gray: rgb(246, 246, 246);
}

* {
  box-sizing: border-box;
}

/** Page
------------------------------------------------------------*/

body {
  overflow: hidden;
  width: 100%;
  margin: 0;
  padding: 0;
  font-family: var(--sans);
  font-size: 1.4rem;
}

/* ---
- Containers
--- */

article {
  padding: 0.8rem 0;
}

article + article:not(.record) {
  border-top: 1px solid var(--border-light-color);
}

/** Elements
------------------------------------------------------------*/

a {
  text-decoration: none;
}

/* ---
- Buttons
--- */

button {
  cursor: pointer;
  margin: 0.5rem 0.2rem;
  font-size: 1.3rem;
}

.btn {
  background-color: white;
  border: 1px solid var(--border-color);
  border-radius: 2px;
}

.btn.active,
.btn[data-active='true'] {
  border: 1px solid black;
}

[onclick] {
  cursor: pointer;
}

/* ---
- Inputs
--- */

.outline {
  outline: var(--cosma-blue) solid 1px;
}

label {
  cursor: pointer;
}

input {
  font-size: 1.3rem;
}

input[type='checkbox'] {
  cursor: pointer;
  width: 1.2rem;
  height: 1.2rem;
  margin: 0 0.8rem 0 0;
}

input[type='range'] {
  cursor: pointer;
  width: 100%;
  margin-top: 0.3rem;
}

/* ---
- Lists
--- */

details {
  padding: 0.5rem 0 1rem 0;
}

details[data-sort] .sort-box:not(.active) {
  display: none;
}

details > summary {
  cursor: pointer;
  text-transform: uppercase;
  font-size: 1.3rem;
  margin: 1rem 0 0.5rem 0;
  font-weight: bold;
  outline: none;
}

summary + button {
  margin: 1rem 0;
}

.list-content-container ul {
  list-style: none;
  margin: 0;
  padding: 0;
}

.list-content-container ul li {
  display: flex;
  align-items: baseline;
  padding: 0.3rem 0 0.3rem 1rem;
}

.list-content-container .menu-controls-list {
  margin-top: 1.3rem;
}

.list-content-container ul li span:last-of-type:not(.badge) {
  line-height: 1.5;
}

.record-type-point {
  /* colored dot before links */
  font-size: 0.8em;
  padding-right: 0.8em;
}

.menu-controls-container p:first-child {
  font-weight: bold;
}

.menu-types-container {
  display: flex;
  flex-direction: column;
}

.filter {
  margin: 0.1em 0;
}

.menu-tags-container {
  display: flex;
  flex-wrap: wrap;
  margin-top: 1em;
}

.menu-tags-container label {
  display: flex;
  align-items: center;
  margin: 0.15em 0.15em 0.15em 0;
}

.menu-tags-container .label {
  margin: 0 0.2em;
}

.menu-tags-container .badge {
  margin: 0.15em 0.15em 0.15em 0;
}

.menu-tags-container input[type='checkbox'] {
  margin: 0.2em;
}

.menu-index-list {
  display: flex;
  flex-direction: column;
}

.menu-index-list.reverse {
  flex-direction: column-reverse;
}

/* ---
- Texts
--- */

a {
  color: inherit;
}

code {
  font-family: var(--mono);
}

/* ---
- Tips
--- */

.badge {
  display: inline-block;
  background-color: var(--indicator-background-color);
  border: 1px solid var(--gray);
  border-radius: 1px;
  padding: 0 0.3rem;
  font-size: 1rem;
  margin-left: 0.2rem;
  text-align: center;
  line-height: 1.5rem;
  white-space: nowrap;
  font-family: var(--mono);
  color: black;
}

.tooltip {
  cursor: pointer;
  position: relative;
  display: inline-block;
  background-color: var(--cosma-blue);
  border-radius: 50%;
  color: white;
  width: 16px;
  text-align: center;
  height: 16px;
  font-weight: normal;
}

.tooltip .tooltiptext {
  visibility: hidden;
  width: 120px;
  line-height: 130%;
  background-color: var(--cosma-blue-dark);
  box-shadow: var(--shadow);
  text-align: center;
  padding: 5px;
  border-radius: 2px;
  position: absolute;
  z-index: 1;
  width: 160px;
  bottom: 130%;
  left: 50%;
  margin-left: -80px;
}

.tooltip:hover .tooltiptext {
  visibility: visible;
}

/** Menu (left side board)
------------------------------------------------------------*/

aside.menu {
  position: relative;
  z-index: 100;
  overflow: auto;
  height: 100vh;
  width: 30rem;
  margin: 0;
  padding: 0 20px 50px 20px;
  background-color: var(--background-gray);
  color: var(--offblack);
  box-shadow: var(--shadow);
}

/* ---
- User title
--- */

.title {
  text-transform: uppercase;
  font-size: 1.8rem;
  color: var(--cosma-blue-dark);
  text-align: center;
}

/* ---
- Toolbar
--- */

#menu-electron {
  display: flex;
  flex-direction: row;
  justify-content: space-evenly;
  align-items: center;
  margin-top: 1.5rem;
}

#menu-electron button {
  padding: 0;
  margin: 0;
  background-color: transparent;
  border: none;
}

#menu-electron button + button {
  margin-left: 7px;
}

#menu-electron button svg {
  height: 25px;
  width: auto;
}

#menu-electron button.icon-chevron svg {
  height: 18px;
}

/* ---
- Spatialization load bar
--- */

.load-bar {
  height: 0.3em;
  padding: 0.1rem;
  display: flex;
  margin: 1rem 0;
  background-color: var(--indicator-background-color);
}

.load-bar #load-bar-value {
  background-color: var(--cosma-blue);
  flex-basis: 100%;
}

/* ---
- Search input & list
--- */

.search-bar {
  width: 100%;
  margin: 0.8rem 0;
}

#search-result-list {
  margin-bottom: 0.8rem;
}

#search-result-list li {
  cursor: pointer;
}

/* ---
- Controls from graph params
--- */

.menu-controls input[type='number'] {
  width: 7rem;
  margin-left: 1rem;
}

.menu-controls-title {
  font-weight: bold;
}

/* ---
- Footer
--- */

aside.menu footer {
  position: fixed;
  bottom: 0px;
  left: 0px;
  width: inherit;
  margin-top: 1.8rem;
  background-color: inherit;
  padding: 0.8rem 0 0.8rem 0.8rem;
  text-transform: uppercase;
  border-top: solid 1px var(--border-color);
  font-size: 1.1rem;
  text-align: center;
}

aside.menu footer span:not(:first-of-type)::before {
  content: '—';
}

/** Record container (right side board)
------------------------------------------------------------*/

main.record-container {
  position: absolute;
  z-index: 100;
  top: 0;
  right: 0;
  padding: 1rem 2rem;
  width: 50rem;
  height: 100vh;
  overflow: auto;
  background-color: var(--offwhite);
  color: var(--offblack);
  box-shadow: var(--shadow);
  transition: transform 0.6s;
  transition-timing-function: cubic-bezier(0.02, 1.18, 0, 0.98);
}

main.record-container:not(.active) {
  /* hide on right when class 'active' removed */
  transform: translate(100%);
}

.record:not(.active) {
  display: none;
}

/* ---
- Record header
--- */

.record header {
  padding-bottom: 1.5rem;
  margin-bottom: 3rem;
  border-bottom: 1px solid var(--gray);
}

.record header div + div,
.record-focus-container {
  margin-top: 0.8rem;
}

.record header div span:first-of-type,
.record-focus-container > span {
  font-size: 1.3rem;
  font-weight: bold;
  text-transform: uppercase;
  margin-right: 0.8rem;
}

.record-last-edit {
  display: none;
}

.record-focus-lever {
  display: none;
}

.record-focus-lever input {
  width: 80%;
}

/* ---
- Record content
--- */

.record-content a {
  text-decoration: underline;
}

.record img {
  height: auto;
  max-width: 100%;
}

.record header img {
  height: auto;
  max-width: 100%;
  margin: 1rem 0;
}

/* From Typesafe.css, by Bradley Taunt */

.record main {
  font-size: 1.6rem;
  line-height: 1.5;
  font-family: var(--serif);
}

.record main h1,
h2,
h3,
h4,
h5,
h6 {
  font-family: var(--sans);
  margin: 3rem 0 0 0;
}

.record main h1 {
  font-size: 1.8rem;
}

.record main h2 {
  font-size: 1.6rem;
}

.record main h3 {
  font-size: 1.4rem;
}

.record main a {
  word-wrap: break-word;
}

.record main a.record-link {
  color: #337ab7;
}

.record main ul,
.record main ol {
  padding: 0;
  list-style-position: inside;
}

.record main ul ul,
.record main ol ol {
  padding-left: 2rem;
}

.record main ul li,
.record ol li {
  margin: 0.5rem 0 0 0;
}

.record main pre {
  overflow: auto;
  font-size: 90%;
}

.record main blockquote {
  border-left: 5px solid var(--border-color);
  margin: 0;
  padding-left: 1rem;
}

.record main table {
  border-collapse: collapse;
  margin: 2rem 0;
  text-align: left;
  width: 100%;
}

.record main tr {
  border-bottom: 1px solid var(--border-color);
}

.record main th,
.record main td {
  padding: 0.5rem;
}

.record main hr {
  background: var(--border-color);
  border: 0;
  height: 1px;
  margin: 2rem 0;
}

/* ---
- Record bibliography
--- */

.record .bibliography div + div {
  margin-top: 1rem;
}

.record div.csl-entry {
  width: inherit;
  text-indent: -2rem;
  padding-left: 2rem;
  margin: 0.75rem 0 0 0;
  line-height: 1.3;
  overflow-wrap: break-word;
  word-wrap: break-word;
  -ms-word-break: break-all;
  word-break: break-word;
}

/* ---
- Record footer
--- */

.record footer {
  margin-top: 3rem;
  border-top: 1px solid var(--gray);
}

.record footer li {
  /* links & backlinks */
  position: relative;
}

.record footer li .record-links-context {
  background: white;
  padding: 0.8rem;
  border-radius: 2px;
  margin-top: 0.8rem;
  bottom: calc(100% + 10px);
  box-shadow: var(--shadow);
  text-indent: 0;
}

.record footer li .record-links-context.hover {
  position: absolute;
  display: none;
}

.record footer li:hover .record-links-context.hover {
  display: block;
}

.record footer li .record-links-context li::before {
  content: '-';
  position: relative;
  left: -5px;
}

.record footer li .record-links-context p,
.record footer li .record-links-context blockquote {
  margin: 0px;
}

.record footer li .record-links-context p + p {
  margin-top: 0.8rem;
}

.id-context {
  font-style: normal;
  background-color: rgba(255, 255, 182, 1);
}

/** Graph
------------------------------------------------------------*/

.graph-wrapper {
  position: absolute;
  top: 0;
  right: 0;
  height: 100vh;
  width: calc(100vw - 30rem);
}

#graph-canvas {
  cursor: move;
  width: 100%;
  height: 100%;
}

/* ---
- Graph elements
--- */

/* nodes */
circle,
text {
  cursor: pointer;
}

g.focus circle {
  stroke: var(--highlight);
}

/* labels */
text {
  font-family: var(--condensed);
  fill: gray;
}

/* arrows */
marker {
  /* set into config.yml file by 'undefined' link type */
  stroke: var(--l_undefined);
  fill: var(--l_undefined);
}

/* ---
- Buttons
--- */

.graph-controls {
  position: absolute;
  display: flex;
  align-items: flex-start;
  flex-direction: column;
  left: 30px;
  bottom: 85px;
  flex-wrap: wrap;
  width: 20rem;
}

.graph-controls::before {
  content: '';
  position: absolute;
  backdrop-filter: blur(7px);
  width: 100%;
  height: 100%;
  border-radius: 5px;
}

.graph-timeline {
  position: absolute;
  display: flex;
  align-items: flex-start;
  flex-direction: column;
  left: 30px;
  bottom: 15px;
  width: 20rem;
}

.graph-controls button {
  margin: 2px, 0;
}

.graph-controls div {
  position: relative;
}

.graph-controls div.graph-controls-zoom {
  display: flex;
  justify-content: space-between;
  position: relative;
}

.graph-controls-focus {
  display: flex;
  justify-content: flex-start;
  flex-flow: row wrap;
}

.graph-controls-focus label {
  display: inline-block;
  margin: 0.8rem 0 0.8rem 0.4rem;
}

.graph-controls-focus input[type='range']:not(.active) {
  visibility: hidden;
}

.graph-controls #reset-isolate {
  display: none;
}

.graph-controls #reset-highlight {
  display: none;
}

.graph-timeline {
  width: calc(100% - 60px);
}

#timeline-form {
  width: 100%;
  backdrop-filter: blur(7px);
}

#timeline-form:not(.active) {
  visibility: hidden;
}

#timeline-form input[type='range'] {
  width: 100%;
}

#timeline-range output[name='timeline_output'] {
  color: gray;
  position: relative;
  text-align: center;
}

#chonos-list {
  display: flex;
  color: gray;
  justify-content: space-between;
}

/* thanks to https://stackoverflow.com/a/62983699/13491646 */

input[type='range'] + datalist {
  display: block;
  margin-top: -4px;
}

input[type='range'] + datalist option {
  cursor: pointer;
  display: inline-block;
  width: calc((100% - 12px) / (var(--list-length) - 1));
  text-align: center;
  font-size: 11px;
  color: gray;
}

input[type='range'] + datalist option:first-child {
  width: calc((100% - 12px) / ((var(--list-length) - 1) * 2) + 6px);
  text-align: left;
}

input[type='range'] + datalist option:last-child {
  width: calc((100% - 12px) / ((var(--list-length) - 1) * 2) + 6px);
  text-align: right;
}

/** Credits
------------------------------------------------------------*/

article#credits {
  text-align: center;
}

article#credits ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
}

article#credits dt {
  font-weight: bold;
}

article#credits dd,
article#credits li {
  margin: 0;
  padding: 0 0 0.5rem 0;
}

article#credits h1.metas-title {
  font-size: 2rem;
}

/* ---
- Logo
--- */

.logo {
  cursor: pointer;
}

.logo svg {
  display: block;
  margin: 0 auto;
  max-width: 300px;
}

@keyframes rotate-center {
  0% {
    transform: rotate(0deg);
  }

  50% {
    transform: rotate(270deg);
  }

  100% {
    transform: rotate(360deg);
  }
}

#cosma-roll {
  transform-origin: 96px 42px;
}

#cosma-roll.anim {
  animation: 3s cubic-bezier(0.2, -0.2, 0.8, 1) 1 rotate-center;
}

/** Help
------------------------------------------------------------*/

#help td:first-child {
  font-weight: bold;
  text-align: right;
}

#help td {
  vertical-align: top;
}

#help tr {
  border-top: 1px solid var(--border-color);
  border-bottom: 1px solid var(--border-color);
}

/** Bibliography references
------------------------------------------------------------*/

#citation-references button {
  margin-bottom: 2rem;
}

#citation-references code {
  display: block;
  word-wrap: break-word;
  font-size: 1.2rem;
  max-height: 75vh;
  overflow: scroll;
  border-top: 1px solid var(--border-color);
  border-bottom: 1px solid var(--border-color);
}

        @media print {
  /* ---
	- Global
	--- */

  :root {
    font-size: 52.5%;
  }

  @page {
    margin: 10mm 20mm;
  }

  body {
    overflow: unset;
  }

  /* ---
	- Elements
	--- */

  p,
  tr,
  li {
    orphans: 3;
  }

  a[href]:not([onclick]):after {
    content: ' (' attr(href) ')';
  }

  /* ---
	- Page containers
	--- */

  aside,
  .graph-wrapper {
    display: none;
  }

  /* ---
	- Record header
	--- */

  .record header {
    margin-bottom: 10mm;
  }

  .record-focus-container,
  .record-btn-close {
    display: none;
  }

  /* ---
	- Record main
	--- */

  main.record-container {
    position: unset;
    width: 100%;
    overflow: unset;
    box-shadow: unset;
  }

  /* ---
	- Record footer
	--- */

  main.record-container footer {
    break-before: page;
  }

  main.record-container footer .record-links-context {
    display: block;
    position: unset;
    box-shadow: unset;
  }

  main.record-container footer li {
    display: block;
    margin-top: 2mm;
  }

  .id-context {
    font-style: normal;
    text-decoration: underline;
  }
}


        
    </style>
</head>

<body>

    

    <aside class="menu list-content-container">

        <header role="banner">
            
            <h1 class="title">半方池水半方田 - 文章关系图谱</h1>
            

            <div class="load-bar" onclick="updateForces()"
                title="Spatialization (Space)">
                <div id="load-bar-value"></div>
            </div>
        </header>

        <section>
            <input class="search-bar" id="search" placeholder="Search… (S)"
                autocomplete="off" role="search" />
            <ul id="search-result-list"></ul>
        </section>

        <details class="menu-types" open="open">
            <summary class="menu-title">
                Types
                <span id="types-counter" class="badge">0</span>
            </summary>

            <form id="types-form" class="menu-types-container">
                
                <label class="filter">
                    <input type="checkbox" name="undefined">
                    <span class="label" style="color: var(--n_undefined);">undefined</span>
                    <span class="badge">31</span>
                </label>
                
                <label class="filter">
                    <input type="checkbox" name="生活区">
                    <span class="label" style="color: var(--n_生活区);">生活区</span>
                    <span class="badge">9</span>
                </label>
                
                <label class="filter">
                    <input type="checkbox" name="核心协同">
                    <span class="label" style="color: var(--n_核心协同);">核心协同</span>
                    <span class="badge">8</span>
                </label>
                
                <label class="filter">
                    <input type="checkbox" name="Hexo">
                    <span class="label" style="color: var(--n_hexo);">Hexo</span>
                    <span class="badge">17</span>
                </label>
                
                <label class="filter">
                    <input type="checkbox" name="工具箱">
                    <span class="label" style="color: var(--n_工具箱);">工具箱</span>
                    <span class="badge">10</span>
                </label>
                
                <label class="filter">
                    <input type="checkbox" name="WordPress">
                    <span class="label" style="color: var(--n_wordpress);">WordPress</span>
                    <span class="badge">9</span>
                </label>
                
                <label class="filter">
                    <input type="checkbox" name="社会生活">
                    <span class="label" style="color: var(--n_社会生活);">社会生活</span>
                    <span class="badge">2</span>
                </label>
                
                <label class="filter">
                    <input type="checkbox" name="Zone of archive">
                    <span class="label" style="color: var(--n_zone-of-archive);">Zone of archive</span>
                    <span class="badge">6</span>
                </label>
                
            </form>
        </details>

        
        <details class="menu-tags" data-sort="tag">
            <summary class="menu-title">
                Keywords
                <span id="tag-counter" class="badge">192</span>
            </summary>

            <select class="sorting-select" name="index_sorting">
                <option value="alphabetical">A-Z</option>
                <option value="alphabetical:reverse">Z-A</option>
                <option value="digital">Croissant</option>
                <option value="digital:reverse">Décroissant</option>
            </select>

            <form id="tags-form" class="menu-tags-container menu-tags-container-prim sort-box active">
                
                <label class="btn" style="order: 1">
                    <input type="checkbox" name="Navicat">
                    <span class="label">Navicat</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 2">
                    <input type="checkbox" name="禅道">
                    <span class="label">禅道</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 3">
                    <input type="checkbox" name="嵌入式">
                    <span class="label">嵌入式</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 4">
                    <input type="checkbox" name="笔记">
                    <span class="label">笔记</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 5">
                    <input type="checkbox" name="多媒体">
                    <span class="label">多媒体</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 6">
                    <input type="checkbox" name="MP3">
                    <span class="label">MP3</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 7">
                    <input type="checkbox" name="AVC">
                    <span class="label">AVC</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 8">
                    <input type="checkbox" name="010编辑器">
                    <span class="label">010编辑器</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 9">
                    <input type="checkbox" name="JPEG">
                    <span class="label">JPEG</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 10">
                    <input type="checkbox" name="WAV">
                    <span class="label">WAV</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 11">
                    <input type="checkbox" name="AVI">
                    <span class="label">AVI</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 12">
                    <input type="checkbox" name="BMP">
                    <span class="label">BMP</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 13">
                    <input type="checkbox" name="DCT">
                    <span class="label">DCT</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 14">
                    <input type="checkbox" name="Kylin">
                    <span class="label">Kylin</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 15">
                    <input type="checkbox" name="总结">
                    <span class="label">总结</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 16">
                    <input type="checkbox" name="面试">
                    <span class="label">面试</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 17">
                    <input type="checkbox" name="pyinstaller">
                    <span class="label">pyinstaller</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 18">
                    <input type="checkbox" name="PyQt">
                    <span class="label">PyQt</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 19">
                    <input type="checkbox" name="编译">
                    <span class="label">编译</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 20">
                    <input type="checkbox" name="CSV">
                    <span class="label">CSV</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 21">
                    <input type="checkbox" name="lxml">
                    <span class="label">lxml</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 22">
                    <input type="checkbox" name="OLE">
                    <span class="label">OLE</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 23">
                    <input type="checkbox" name="Word">
                    <span class="label">Word</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 24">
                    <input type="checkbox" name="XML">
                    <span class="label">XML</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 25">
                    <input type="checkbox" name="subprocess">
                    <span class="label">subprocess</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 26">
                    <input type="checkbox" name="CClose">
                    <span class="label">CClose</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 27">
                    <input type="checkbox" name="快捷键">
                    <span class="label">快捷键</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 28">
                    <input type="checkbox" name="鼠标">
                    <span class="label">鼠标</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 29">
                    <input type="checkbox" name="AutoHotKey">
                    <span class="label">AutoHotKey</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 30">
                    <input type="checkbox" name="Cosma">
                    <span class="label">Cosma</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 31">
                    <input type="checkbox" name="script">
                    <span class="label">script</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 32">
                    <input type="checkbox" name="项目">
                    <span class="label">项目</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 33">
                    <input type="checkbox" name="GitHub">
                    <span class="label">GitHub</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 34">
                    <input type="checkbox" name="Pug">
                    <span class="label">Pug</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 35">
                    <input type="checkbox" name="Epic">
                    <span class="label">Epic</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 36">
                    <input type="checkbox" name="DLC">
                    <span class="label">DLC</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 37">
                    <input type="checkbox" name="Mod">
                    <span class="label">Mod</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 38">
                    <input type="checkbox" name="Steam">
                    <span class="label">Steam</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 39">
                    <input type="checkbox" name="git">
                    <span class="label">git</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 40">
                    <input type="checkbox" name="Git">
                    <span class="label">Git</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 41">
                    <input type="checkbox" name="Gitee">
                    <span class="label">Gitee</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 42">
                    <input type="checkbox" name="cmd">
                    <span class="label">cmd</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 43">
                    <input type="checkbox" name="ButterFly">
                    <span class="label">ButterFly</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 44">
                    <input type="checkbox" name="JMeter">
                    <span class="label">JMeter</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 45">
                    <input type="checkbox" name="MAJOR">
                    <span class="label">MAJOR</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 46">
                    <input type="checkbox" name="WSL">
                    <span class="label">WSL</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 47">
                    <input type="checkbox" name="mujava">
                    <span class="label">mujava</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 48">
                    <input type="checkbox" name="Selenium">
                    <span class="label">Selenium</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 49">
                    <input type="checkbox" name="SeleniumIDE">
                    <span class="label">SeleniumIDE</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 50">
                    <input type="checkbox" name="右键管理">
                    <span class="label">右键管理</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 51">
                    <input type="checkbox" name="软著">
                    <span class="label">软著</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 52">
                    <input type="checkbox" name="AJAX">
                    <span class="label">AJAX</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 53">
                    <input type="checkbox" name="Adobe Premiere Pro">
                    <span class="label">Adobe Premiere Pro</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 54">
                    <input type="checkbox" name="GIF">
                    <span class="label">GIF</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 55">
                    <input type="checkbox" name="WPS">
                    <span class="label">WPS</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 56">
                    <input type="checkbox" name="词云">
                    <span class="label">词云</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 57">
                    <input type="checkbox" name="词频统计">
                    <span class="label">词频统计</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 58">
                    <input type="checkbox" name="QQ">
                    <span class="label">QQ</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 59">
                    <input type="checkbox" name="QQ邮箱">
                    <span class="label">QQ邮箱</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 60">
                    <input type="checkbox" name="DNS">
                    <span class="label">DNS</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 61">
                    <input type="checkbox" name="HSTS">
                    <span class="label">HSTS</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 62">
                    <input type="checkbox" name="HTTP">
                    <span class="label">HTTP</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 63">
                    <input type="checkbox" name="吐槽">
                    <span class="label">吐槽</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 64">
                    <input type="checkbox" name="jsdelivr">
                    <span class="label">jsdelivr</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 65">
                    <input type="checkbox" name="画图">
                    <span class="label">画图</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 66">
                    <input type="checkbox" name="Win10">
                    <span class="label">Win10</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 67">
                    <input type="checkbox" name="图像采集">
                    <span class="label">图像采集</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 68">
                    <input type="checkbox" name="pace">
                    <span class="label">pace</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 69">
                    <input type="checkbox" name="网站想法">
                    <span class="label">网站想法</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 70">
                    <input type="checkbox" name="友链">
                    <span class="label">友链</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 71">
                    <input type="checkbox" name="二十四节气">
                    <span class="label">二十四节气</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 72">
                    <input type="checkbox" name="日食">
                    <span class="label">日食</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 73">
                    <input type="checkbox" name="学习">
                    <span class="label">学习</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 74">
                    <input type="checkbox" name="Canva">
                    <span class="label">Canva</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 75">
                    <input type="checkbox" name="微信">
                    <span class="label">微信</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 76">
                    <input type="checkbox" name="微信公众号">
                    <span class="label">微信公众号</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 77">
                    <input type="checkbox" name="php">
                    <span class="label">php</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 78">
                    <input type="checkbox" name="SDK">
                    <span class="label">SDK</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 79">
                    <input type="checkbox" name="开源">
                    <span class="label">开源</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 80">
                    <input type="checkbox" name="ICP">
                    <span class="label">ICP</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 81">
                    <input type="checkbox" name="LAMP">
                    <span class="label">LAMP</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 82">
                    <input type="checkbox" name="备案">
                    <span class="label">备案</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 83">
                    <input type="checkbox" name="校园">
                    <span class="label">校园</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 84">
                    <input type="checkbox" name="foldersync">
                    <span class="label">foldersync</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 85">
                    <input type="checkbox" name="SyncThing">
                    <span class="label">SyncThing</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 86">
                    <input type="checkbox" name="OneDrive">
                    <span class="label">OneDrive</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 87">
                    <input type="checkbox" name="Android">
                    <span class="label">Android</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 88">
                    <input type="checkbox" name="Harmony">
                    <span class="label">Harmony</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 89">
                    <input type="checkbox" name="坚果云">
                    <span class="label">坚果云</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 90">
                    <input type="checkbox" name="PlantUML">
                    <span class="label">PlantUML</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 91">
                    <input type="checkbox" name="Java">
                    <span class="label">Java</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 92">
                    <input type="checkbox" name="jar">
                    <span class="label">jar</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 93">
                    <input type="checkbox" name="Flask">
                    <span class="label">Flask</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 94">
                    <input type="checkbox" name="Vite">
                    <span class="label">Vite</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 95">
                    <input type="checkbox" name="Vue">
                    <span class="label">Vue</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 96">
                    <input type="checkbox" name="ElementPlus">
                    <span class="label">ElementPlus</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 97">
                    <input type="checkbox" name="Clash">
                    <span class="label">Clash</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 98">
                    <input type="checkbox" name="有线网">
                    <span class="label">有线网</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 99">
                    <input type="checkbox" name="PPPoE">
                    <span class="label">PPPoE</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 100">
                    <input type="checkbox" name="开发杂记">
                    <span class="label">开发杂记</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 101">
                    <input type="checkbox" name="绿植养护">
                    <span class="label">绿植养护</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 102">
                    <input type="checkbox" name="markdown-it">
                    <span class="label">markdown-it</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 103">
                    <input type="checkbox" name="css">
                    <span class="label">css</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 104">
                    <input type="checkbox" name="RSS">
                    <span class="label">RSS</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 105">
                    <input type="checkbox" name="iconfont">
                    <span class="label">iconfont</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 106">
                    <input type="checkbox" name="CentOS">
                    <span class="label">CentOS</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 107">
                    <input type="checkbox" name="php-gd">
                    <span class="label">php-gd</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 108">
                    <input type="checkbox" name="PNG">
                    <span class="label">PNG</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 109">
                    <input type="checkbox" name="Bing">
                    <span class="label">Bing</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 110">
                    <input type="checkbox" name="WOL">
                    <span class="label">WOL</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 111">
                    <input type="checkbox" name="网卡">
                    <span class="label">网卡</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 112">
                    <input type="checkbox" name="设备管理器">
                    <span class="label">设备管理器</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 113">
                    <input type="checkbox" name="Eclemma">
                    <span class="label">Eclemma</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 114">
                    <input type="checkbox" name="Hamcrest">
                    <span class="label">Hamcrest</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 115">
                    <input type="checkbox" name="IDEA">
                    <span class="label">IDEA</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 116">
                    <input type="checkbox" name="考研">
                    <span class="label">考研</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 117">
                    <input type="checkbox" name="暑假">
                    <span class="label">暑假</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 118">
                    <input type="checkbox" name="计算机">
                    <span class="label">计算机</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 119">
                    <input type="checkbox" name="文明6">
                    <span class="label">文明6</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 120">
                    <input type="checkbox" name="飞书">
                    <span class="label">飞书</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 121">
                    <input type="checkbox" name="Bilibili">
                    <span class="label">Bilibili</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 122">
                    <input type="checkbox" name="软件工程">
                    <span class="label">软件工程</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 123">
                    <input type="checkbox" name="云盘">
                    <span class="label">云盘</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 124">
                    <input type="checkbox" name="日记">
                    <span class="label">日记</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 125">
                    <input type="checkbox" name="效率">
                    <span class="label">效率</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 126">
                    <input type="checkbox" name="SSH">
                    <span class="label">SSH</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 127">
                    <input type="checkbox" name="UA">
                    <span class="label">UA</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 128">
                    <input type="checkbox" name="BibTeX">
                    <span class="label">BibTeX</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 129">
                    <input type="checkbox" name="知网">
                    <span class="label">知网</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 130">
                    <input type="checkbox" name="Greasy Fork">
                    <span class="label">Greasy Fork</span>
                    <span class="badge">1</span>
                </label>
                
                <label class="btn" style="order: 131">
                    <input type="checkbox" name="USTC">
                    <span class="label">USTC</span>
                    <span class="badge">2</span>
                </label>
                
                <label class="btn" style="order: 132">
                    <input type="checkbox" name="Deb包">
                    <span class="label">Deb包</span>
                    <span class="badge">2</span>
                </label>
                
                <label class="btn" style="order: 133">
                    <input type="checkbox" name="YAML">
                    <span class="label">YAML</span>
                    <span class="badge">2</span>
                </label>
                
                <label class="btn" style="order: 134">
                    <input type="checkbox" name="CodePen">
                    <span class="label">CodePen</span>
                    <span class="badge">2</span>
                </label>
                
                <label class="btn" style="order: 135">
                    <input type="checkbox" name="游戏">
                    <span class="label">游戏</span>
                    <span class="badge">2</span>
                </label>
                
                <label class="btn" style="order: 136">
                    <input type="checkbox" name="Cities Skylines">
                    <span class="label">Cities Skylines</span>
                    <span class="badge">2</span>
                </label>
                
                <label class="btn" style="order: 137">
                    <input type="checkbox" name="Node.js">
                    <span class="label">Node.js</span>
                    <span class="badge">2</span>
                </label>
                
                <label class="btn" style="order: 138">
                    <input type="checkbox" name="GFM">
                    <span class="label">GFM</span>
                    <span class="badge">2</span>
                </label>
                
                <label class="btn" style="order: 139">
                    <input type="checkbox" name="OFM">
                    <span class="label">OFM</span>
                    <span class="badge">2</span>
                </label>
                
                <label class="btn" style="order: 140">
                    <input type="checkbox" name="Vercel">
                    <span class="label">Vercel</span>
                    <span class="badge">2</span>
                </label>
                
                <label class="btn" style="order: 141">
                    <input type="checkbox" name="Apache">
                    <span class="label">Apache</span>
                    <span class="badge">2</span>
                </label>
                
                <label class="btn" style="order: 142">
                    <input type="checkbox" name="Eclipse">
                    <span class="label">Eclipse</span>
                    <span class="badge">2</span>
                </label>
                
                <label class="btn" style="order: 143">
                    <input type="checkbox" name="Junit">
                    <span class="label">Junit</span>
                    <span class="badge">2</span>
                </label>
                
                <label class="btn" style="order: 144">
                    <input type="checkbox" name="图床">
                    <span class="label">图床</span>
                    <span class="badge">2</span>
                </label>
                
                <label class="btn" style="order: 145">
                    <input type="checkbox" name="step-by-step">
                    <span class="label">step-by-step</span>
                    <span class="badge">2</span>
                </label>
                
                <label class="btn" style="order: 146">
                    <input type="checkbox" name="SQLite">
                    <span class="label">SQLite</span>
                    <span class="badge">2</span>
                </label>
                
                <label class="btn" style="order: 147">
                    <input type="checkbox" name="VSCode">
                    <span class="label">VSCode</span>
                    <span class="badge">2</span>
                </label>
                
                <label class="btn" style="order: 148">
                    <input type="checkbox" name="注册表">
                    <span class="label">注册表</span>
                    <span class="badge">2</span>
                </label>
                
                <label class="btn" style="order: 149">
                    <input type="checkbox" name="PHP">
                    <span class="label">PHP</span>
                    <span class="badge">2</span>
                </label>
                
                <label class="btn" style="order: 150">
                    <input type="checkbox" name="WordPress">
                    <span class="label">WordPress</span>
                    <span class="badge">2</span>
                </label>
                
                <label class="btn" style="order: 151">
                    <input type="checkbox" name="PPT">
                    <span class="label">PPT</span>
                    <span class="badge">2</span>
                </label>
                
                <label class="btn" style="order: 152">
                    <input type="checkbox" name="对象存储">
                    <span class="label">对象存储</span>
                    <span class="badge">2</span>
                </label>
                
                <label class="btn" style="order: 153">
                    <input type="checkbox" name="Edge">
                    <span class="label">Edge</span>
                    <span class="badge">2</span>
                </label>
                
                <label class="btn" style="order: 154">
                    <input type="checkbox" name="疫情">
                    <span class="label">疫情</span>
                    <span class="badge">2</span>
                </label>
                
                <label class="btn" style="order: 155">
                    <input type="checkbox" name="API">
                    <span class="label">API</span>
                    <span class="badge">2</span>
                </label>
                
                <label class="btn" style="order: 156">
                    <input type="checkbox" name="Xmind">
                    <span class="label">Xmind</span>
                    <span class="badge">2</span>
                </label>
                
                <label class="btn" style="order: 157">
                    <input type="checkbox" name="碎碎念">
                    <span class="label">碎碎念</span>
                    <span class="badge">2</span>
                </label>
                
                <label class="btn" style="order: 158">
                    <input type="checkbox" name="Codepen">
                    <span class="label">Codepen</span>
                    <span class="badge">2</span>
                </label>
                
                <label class="btn" style="order: 159">
                    <input type="checkbox" name="Javascript">
                    <span class="label">Javascript</span>
                    <span class="badge">2</span>
                </label>
                
                <label class="btn" style="order: 160">
                    <input type="checkbox" name="Tampermonkey">
                    <span class="label">Tampermonkey</span>
                    <span class="badge">2</span>
                </label>
                
                <label class="btn" style="order: 161">
                    <input type="checkbox" name="IP">
                    <span class="label">IP</span>
                    <span class="badge">2</span>
                </label>
                
                <label class="btn" style="order: 162">
                    <input type="checkbox" name="MySQL">
                    <span class="label">MySQL</span>
                    <span class="badge">3</span>
                </label>
                
                <label class="btn" style="order: 163">
                    <input type="checkbox" name="Github">
                    <span class="label">Github</span>
                    <span class="badge">3</span>
                </label>
                
                <label class="btn" style="order: 164">
                    <input type="checkbox" name="Nginx">
                    <span class="label">Nginx</span>
                    <span class="badge">3</span>
                </label>
                
                <label class="btn" style="order: 165">
                    <input type="checkbox" name="Hexo">
                    <span class="label">Hexo</span>
                    <span class="badge">3</span>
                </label>
                
                <label class="btn" style="order: 166">
                    <input type="checkbox" name="JavaScript">
                    <span class="label">JavaScript</span>
                    <span class="badge">3</span>
                </label>
                
                <label class="btn" style="order: 167">
                    <input type="checkbox" name="HTTPS">
                    <span class="label">HTTPS</span>
                    <span class="badge">3</span>
                </label>
                
                <label class="btn" style="order: 168">
                    <input type="checkbox" name="SSL">
                    <span class="label">SSL</span>
                    <span class="badge">3</span>
                </label>
                
                <label class="btn" style="order: 169">
                    <input type="checkbox" name="源码案例驱动">
                    <span class="label">源码案例驱动</span>
                    <span class="badge">3</span>
                </label>
                
                <label class="btn" style="order: 170">
                    <input type="checkbox" name="Typora">
                    <span class="label">Typora</span>
                    <span class="badge">3</span>
                </label>
                
                <label class="btn" style="order: 171">
                    <input type="checkbox" name="COS">
                    <span class="label">COS</span>
                    <span class="badge">3</span>
                </label>
                
                <label class="btn" style="order: 172">
                    <input type="checkbox" name="PicGo">
                    <span class="label">PicGo</span>
                    <span class="badge">3</span>
                </label>
                
                <label class="btn" style="order: 173">
                    <input type="checkbox" name="Windows">
                    <span class="label">Windows</span>
                    <span class="badge">3</span>
                </label>
                
                <label class="btn" style="order: 174">
                    <input type="checkbox" name="搬运">
                    <span class="label">搬运</span>
                    <span class="badge">3</span>
                </label>
                
                <label class="btn" style="order: 175">
                    <input type="checkbox" name="Obsidian">
                    <span class="label">Obsidian</span>
                    <span class="badge">4</span>
                </label>
                
                <label class="btn" style="order: 176">
                    <input type="checkbox" name="npm">
                    <span class="label">npm</span>
                    <span class="badge">4</span>
                </label>
                
                <label class="btn" style="order: 177">
                    <input type="checkbox" name="Waline">
                    <span class="label">Waline</span>
                    <span class="badge">4</span>
                </label>
                
                <label class="btn" style="order: 178">
                    <input type="checkbox" name="阿里云">
                    <span class="label">阿里云</span>
                    <span class="badge">4</span>
                </label>
                
                <label class="btn" style="order: 179">
                    <input type="checkbox" name="TJU">
                    <span class="label">TJU</span>
                    <span class="badge">4</span>
                </label>
                
                <label class="btn" style="order: 180">
                    <input type="checkbox" name="HTML">
                    <span class="label">HTML</span>
                    <span class="badge">5</span>
                </label>
                
                <label class="btn" style="order: 181">
                    <input type="checkbox" name="Markdown">
                    <span class="label">Markdown</span>
                    <span class="badge">5</span>
                </label>
                
                <label class="btn" style="order: 182">
                    <input type="checkbox" name="CDN">
                    <span class="label">CDN</span>
                    <span class="badge">5</span>
                </label>
                
                <label class="btn" style="order: 183">
                    <input type="checkbox" name="腾讯云">
                    <span class="label">腾讯云</span>
                    <span class="badge">5</span>
                </label>
                
                <label class="btn" style="order: 184">
                    <input type="checkbox" name="ECS">
                    <span class="label">ECS</span>
                    <span class="badge">5</span>
                </label>
                
                <label class="btn" style="order: 185">
                    <input type="checkbox" name="麒麟实训">
                    <span class="label">麒麟实训</span>
                    <span class="badge">6</span>
                </label>
                
                <label class="btn" style="order: 186">
                    <input type="checkbox" name="安装">
                    <span class="label">安装</span>
                    <span class="badge">6</span>
                </label>
                
                <label class="btn" style="order: 187">
                    <input type="checkbox" name="Python">
                    <span class="label">Python</span>
                    <span class="badge">7</span>
                </label>
                
                <label class="btn" style="order: 188">
                    <input type="checkbox" name="实现">
                    <span class="label">实现</span>
                    <span class="badge">8</span>
                </label>
                
                <label class="btn" style="order: 189">
                    <input type="checkbox" name="Butterfly">
                    <span class="label">Butterfly</span>
                    <span class="badge">8</span>
                </label>
                
                <label class="btn" style="order: 190">
                    <input type="checkbox" name="CSS">
                    <span class="label">CSS</span>
                    <span class="badge">8</span>
                </label>
                
                <label class="btn" style="order: 191">
                    <input type="checkbox" name="Linux">
                    <span class="label">Linux</span>
                    <span class="badge">9</span>
                </label>
                
                <label class="btn" style="order: 192">
                    <input type="checkbox" name="问题解决">
                    <span class="label">问题解决</span>
                    <span class="badge">11</span>
                </label>
                
            </form>
        </details>
        

        <details class="menu-index" id="index">
            <summary class="menu-title">
                Index
                <span id="index-counter" class="badge">81</span>
            </summary>

            <select class="sorting-select" name="index_sorting">
                <option value="alphabetical">A-Z</option>
                <option value="alphabetical:reverse">Z-A</option>
                <option value="chronological">Chronologique</option>
                <option value="chronological:reverse">Antéchronologique</option>
            </select>

            <ul class="menu-index-list">
                
                <li data-index="1355609062" style="order: 1">
                    <a href="#1355609062">
                        <span class="record-type-point" style="color: var(--n_生活区);">⬤</span>
                        <span>家里蹲的二十四节气</span>
                    </a>
                </li>
                
                <li data-index="3096264560" style="order: 2">
                    <a href="#3096264560">
                        <span class="record-type-point" style="color: var(--n_zone-of-archive);">⬤</span>
                        <span>旧页面-关于我</span>
                    </a>
                </li>
                
                <li data-index="238315581" style="order: 3">
                    <a href="#238315581">
                        <span class="record-type-point" style="color: var(--n_zone-of-archive);">⬤</span>
                        <span>旧页面-WordPress 站点隐私政策</span>
                    </a>
                </li>
                
                <li data-index="3483842810" style="order: 4">
                    <a href="#3483842810">
                        <span class="record-type-point" style="color: var(--n_wordpress);">⬤</span>
                        <span>WordPress 前台页面空白的解决</span>
                    </a>
                </li>
                
                <li data-index="3992879191" style="order: 5">
                    <a href="#3992879191">
                        <span class="record-type-point" style="color: var(--n_核心协同);">⬤</span>
                        <span>PicGo(app) 配置腾讯云 COS 图床</span>
                    </a>
                </li>
                
                <li data-index="377267818" style="order: 6">
                    <a href="#377267818">
                        <span class="record-type-point" style="color: var(--n_核心协同);">⬤</span>
                        <span>Typora 应用 PicGo(app) 使用图床</span>
                    </a>
                </li>
                
                <li data-index="2653327377" style="order: 7">
                    <a href="#2653327377">
                        <span class="record-type-point" style="color: var(--n_wordpress);">⬤</span>
                        <span>WordPress 上传的文件大小超过定义值问题解决</span>
                    </a>
                </li>
                
                <li data-index="1881411089" style="order: 8">
                    <a href="#1881411089">
                        <span class="record-type-point" style="color: var(--n_zone-of-archive);">⬤</span>
                        <span>关于 QQ 聊天发起与 QQ 邮箱即时写信的链接-即时沟通外链</span>
                    </a>
                </li>
                
                <li data-index="3260727180" style="order: 9">
                    <a href="#3260727180">
                        <span class="record-type-point" style="color: var(--n_工具箱);">⬤</span>
                        <span>软件测试工具Junit、Hamcrest、Eclemma的安装</span>
                    </a>
                </li>
                
                <li data-index="3910313174" style="order: 10">
                    <a href="#3910313174">
                        <span class="record-type-point" style="color: var(--n_工具箱);">⬤</span>
                        <span>免费高效制作精美词云（Python、wordart）</span>
                    </a>
                </li>
                
                <li data-index="2466246546" style="order: 11">
                    <a href="#2466246546">
                        <span class="record-type-point" style="color: var(--n_wordpress);">⬤</span>
                        <span>解决 WordPress「在裁剪您的图像时发生了错误」的问题</span>
                    </a>
                </li>
                
                <li data-index="3538365946" style="order: 12">
                    <a href="#3538365946">
                        <span class="record-type-point" style="color: var(--n_zone-of-archive);">⬤</span>
                        <span>旧页面-友链</span>
                    </a>
                </li>
                
                <li data-index="713171771" style="order: 13">
                    <a href="#713171771">
                        <span class="record-type-point" style="color: var(--n_wordpress);">⬤</span>
                        <span>误操作 WordPress 站点地址的解决方案</span>
                    </a>
                </li>
                
                <li data-index="4244887792" style="order: 14">
                    <a href="#4244887792">
                        <span class="record-type-point" style="color: var(--n_工具箱);">⬤</span>
                        <span>mujava的安装与使用</span>
                    </a>
                </li>
                
                <li data-index="2346883624" style="order: 15">
                    <a href="#2346883624">
                        <span class="record-type-point" style="color: var(--n_社会生活);">⬤</span>
                        <span>成为一名个人博客网站站长</span>
                    </a>
                </li>
                
                <li data-index="930915372" style="order: 16">
                    <a href="#930915372">
                        <span class="record-type-point" style="color: var(--n_wordpress);">⬤</span>
                        <span>在 ECS 中搭建 WordPress</span>
                    </a>
                </li>
                
                <li data-index="2555088146" style="order: 17">
                    <a href="#2555088146">
                        <span class="record-type-point" style="color: var(--n_wordpress);">⬤</span>
                        <span>关于 wordPress 固定链接的修改以及 htaccess 文件不起作用问题的解决</span>
                    </a>
                </li>
                
                <li data-index="1018322944" style="order: 18">
                    <a href="#1018322944">
                        <span class="record-type-point" style="color: var(--n_工具箱);">⬤</span>
                        <span>MAJOR的配置与基本使用</span>
                    </a>
                </li>
                
                <li data-index="3771188998" style="order: 19">
                    <a href="#3771188998">
                        <span class="record-type-point" style="color: var(--n_zone-of-archive);">⬤</span>
                        <span>旧页面-赞赏＆贡献</span>
                    </a>
                </li>
                
                <li data-index="648224007" style="order: 20">
                    <a href="#648224007">
                        <span class="record-type-point" style="color: var(--n_undefined);">⬤</span>
                        <span>博客网站网页变灰的操作方法</span>
                    </a>
                </li>
                
                <li data-index="1780203637" style="order: 21">
                    <a href="#1780203637">
                        <span class="record-type-point" style="color: var(--n_wordpress);">⬤</span>
                        <span>WordPress 修改文章标题前的「私密」和「密码保护」</span>
                    </a>
                </li>
                
                <li data-index="2392872481" style="order: 22">
                    <a href="#2392872481">
                        <span class="record-type-point" style="color: var(--n_工具箱);">⬤</span>
                        <span>Selenium的安装与使用</span>
                    </a>
                </li>
                
                <li data-index="1864583727" style="order: 23">
                    <a href="#1864583727">
                        <span class="record-type-point" style="color: var(--n_工具箱);">⬤</span>
                        <span>Windows管理右键菜单</span>
                    </a>
                </li>
                
                <li data-index="3569684170" style="order: 24">
                    <a href="#3569684170">
                        <span class="record-type-point" style="color: var(--n_工具箱);">⬤</span>
                        <span>JMeter的安装与使用</span>
                    </a>
                </li>
                
                <li data-index="2497000883" style="order: 25">
                    <a href="#2497000883">
                        <span class="record-type-point" style="color: var(--n_wordpress);">⬤</span>
                        <span>WordPress 修改 functions 的方法</span>
                    </a>
                </li>
                
                <li data-index="910498382" style="order: 26">
                    <a href="#910498382">
                        <span class="record-type-point" style="color: var(--n_zone-of-archive);">⬤</span>
                        <span>使用 CDN 加速 WordPress 博客网站</span>
                    </a>
                </li>
                
                <li data-index="3237396916" style="order: 27">
                    <a href="#3237396916">
                        <span class="record-type-point" style="color: var(--n_undefined);">⬤</span>
                        <span>“禅道”的配置与数据库连接</span>
                    </a>
                </li>
                
                <li data-index="1867823418" style="order: 28">
                    <a href="#1867823418">
                        <span class="record-type-point" style="color: var(--n_undefined);">⬤</span>
                        <span>Linux服务器添加SSL证书</span>
                    </a>
                </li>
                
                <li data-index="2062987538" style="order: 29">
                    <a href="#2062987538">
                        <span class="record-type-point" style="color: var(--n_wordpress);">⬤</span>
                        <span>WordPress 使用 HTTPS</span>
                    </a>
                </li>
                
                <li data-index="1973703782" style="order: 30">
                    <a href="#1973703782">
                        <span class="record-type-point" style="color: var(--n_生活区);">⬤</span>
                        <span>【麒麟实训】我想在这次的实训项目中，达成怎样的目的？</span>
                    </a>
                </li>
                
                <li data-index="1433349372" style="order: 31">
                    <a href="#1433349372">
                        <span class="record-type-point" style="color: var(--n_undefined);">⬤</span>
                        <span>【麒麟实训】Deb的打包（小练习分享）</span>
                    </a>
                </li>
                
                <li data-index="4028728107" style="order: 32">
                    <a href="#4028728107">
                        <span class="record-type-point" style="color: var(--n_生活区);">⬤</span>
                        <span>绿萝养殖日记</span>
                    </a>
                </li>
                
                <li data-index="1042" style="order: 33">
                    <a href="#1042">
                        <span class="record-type-point" style="color: var(--n_undefined);">⬤</span>
                        <span>设备管理器网卡属性没有电源管理选项卡的解决方法</span>
                    </a>
                </li>
                
                <li data-index="1126538397" style="order: 34">
                    <a href="#1126538397">
                        <span class="record-type-point" style="color: var(--n_undefined);">⬤</span>
                        <span>【麒麟实训】撷英1 - Pyqt程序编译与打包探索</span>
                    </a>
                </li>
                
                <li data-index="2292934449" style="order: 35">
                    <a href="#2292934449">
                        <span class="record-type-point" style="color: var(--n_undefined);">⬤</span>
                        <span>【麒麟实训】撷英2 - Python代码控制word文档模板</span>
                    </a>
                </li>
                
                <li data-index="3536932394" style="order: 36">
                    <a href="#3536932394">
                        <span class="record-type-point" style="color: var(--n_undefined);">⬤</span>
                        <span>【麒麟实训】撷英3 - Python执行Linux命令公共方法</span>
                    </a>
                </li>
                
                <li data-index="2592625103" style="order: 37">
                    <a href="#2592625103">
                        <span class="record-type-point" style="color: var(--n_生活区);">⬤</span>
                        <span>【麒麟实训】实训结束 - 感谢篇</span>
                    </a>
                </li>
                
                <li data-index="3567162190" style="order: 38">
                    <a href="#3567162190">
                        <span class="record-type-point" style="color: var(--n_生活区);">⬤</span>
                        <span>那一年的暑假剪影</span>
                    </a>
                </li>
                
                <li data-index="107080905" style="order: 39">
                    <a href="#107080905">
                        <span class="record-type-point" style="color: var(--n_undefined);">⬤</span>
                        <span>Nginx 的安装与配置</span>
                    </a>
                </li>
                
                <li data-index="181570378" style="order: 40">
                    <a href="#181570378">
                        <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                        <span>部署 Hexo 个人博客框架到服务器</span>
                    </a>
                </li>
                
                <li data-index="4084230277" style="order: 41">
                    <a href="#4084230277">
                        <span class="record-type-point" style="color: var(--n_undefined);">⬤</span>
                        <span>解决Bing搜索页自动返回顶部的问题</span>
                    </a>
                </li>
                
                <li data-index="346425435" style="order: 42">
                    <a href="#346425435">
                        <span class="record-type-point" style="color: var(--n_undefined);">⬤</span>
                        <span>校园网有线网连接相关问题</span>
                    </a>
                </li>
                
                <li data-index="1495212389" style="order: 43">
                    <a href="#1495212389">
                        <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                        <span>Hexo 框架 Btterfly 主题引入 Waline 评论系统及国内正常访问</span>
                    </a>
                </li>
                
                <li data-index="3709373237" style="order: 44">
                    <a href="#3709373237">
                        <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                        <span>定制自己的 Waline 评论系统</span>
                    </a>
                </li>
                
                <li data-index="2065118013" style="order: 45">
                    <a href="#2065118013">
                        <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                        <span>国内访问Hexo优化加速-替换jsdelivr的CDN链接</span>
                    </a>
                </li>
                
                <li data-index="1308325830" style="order: 46">
                    <a href="#1308325830">
                        <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                        <span>在你的Hexo博客上加入进度条</span>
                    </a>
                </li>
                
                <li data-index="681885666" style="order: 47">
                    <a href="#681885666">
                        <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                        <span>Hexo博客添加漂浮物效果（可定制显示页面）</span>
                    </a>
                </li>
                
                <li data-index="2958737902" style="order: 48">
                    <a href="#2958737902">
                        <span class="record-type-point" style="color: var(--n_核心协同);">⬤</span>
                        <span>将 CDN 缓存自动刷新加入到博客发布的工作流（Hexo、WordPress）</span>
                    </a>
                </li>
                
                <li data-index="2052246699" style="order: 49">
                    <a href="#2052246699">
                        <span class="record-type-point" style="color: var(--n_工具箱);">⬤</span>
                        <span>使用 Adobe Premiere Pro 实现 GIF 动图画面拼接</span>
                    </a>
                </li>
                
                <li data-index="2676514221" style="order: 50">
                    <a href="#2676514221">
                        <span class="record-type-point" style="color: var(--n_undefined);">⬤</span>
                        <span>代码驱动学习-快速入门AJAX</span>
                    </a>
                </li>
                
                <li data-index="2737438580" style="order: 51">
                    <a href="#2737438580">
                        <span class="record-type-point" style="color: var(--n_undefined);">⬤</span>
                        <span>极简图书管理系统，快速上手Flask-Vue前后端开发</span>
                    </a>
                </li>
                
                <li data-index="2226004458" style="order: 52">
                    <a href="#2226004458">
                        <span class="record-type-point" style="color: var(--n_工具箱);">⬤</span>
                        <span>魔改脚本实现知网导出Bibtex参考格式</span>
                    </a>
                </li>
                
                <li data-index="3103663518" style="order: 53">
                    <a href="#3103663518">
                        <span class="record-type-point" style="color: var(--n_工具箱);">⬤</span>
                        <span>开源工具推荐</span>
                    </a>
                </li>
                
                <li data-index="3273167773" style="order: 54">
                    <a href="#3273167773">
                        <span class="record-type-point" style="color: var(--n_核心协同);">⬤</span>
                        <span>AHK 鼠标增强（CClose 源码撷英）</span>
                    </a>
                </li>
                
                <li data-index="1886753501" style="order: 55">
                    <a href="#1886753501">
                        <span class="record-type-point" style="color: var(--n_undefined);">⬤</span>
                        <span>Git基本操作学习</span>
                    </a>
                </li>
                
                <li data-index="1857161372" style="order: 56">
                    <a href="#1857161372">
                        <span class="record-type-point" style="color: var(--n_undefined);">⬤</span>
                        <span>Git-flow：git的分支管理策略</span>
                    </a>
                </li>
                
                <li data-index="1360801971" style="order: 57">
                    <a href="#1360801971">
                        <span class="record-type-point" style="color: var(--n_社会生活);">⬤</span>
                        <span>个人独立申请软件著作权申请记录</span>
                    </a>
                </li>
                
                <li data-index="90746120" style="order: 58">
                    <a href="#90746120">
                        <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                        <span>Butterfly不改动主题源码实现自定义侧边栏</span>
                    </a>
                </li>
                
                <li data-index="1011516134" style="order: 59">
                    <a href="#1011516134">
                        <span class="record-type-point" style="color: var(--n_核心协同);">⬤</span>
                        <span>Markdown 渲染测试</span>
                    </a>
                </li>
                
                <li data-index="85495977" style="order: 60">
                    <a href="#85495977">
                        <span class="record-type-point" style="color: var(--n_核心协同);">⬤</span>
                        <span>构建 Obsidian 的 Hexo 写作工作流</span>
                    </a>
                </li>
                
                <li data-index="1215492985" style="order: 61">
                    <a href="#1215492985">
                        <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                        <span>装点你的 Butterfly 博客</span>
                    </a>
                </li>
                
                <li data-index="414962704" style="order: 62">
                    <a href="#414962704">
                        <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                        <span>Hexo 博客的写作与装饰</span>
                    </a>
                </li>
                
                <li data-index="152796589" style="order: 63">
                    <a href="#152796589">
                        <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                        <span>Butterfly 自定义页脚（不修改主题源码）</span>
                    </a>
                </li>
                
                <li data-index="4033695206" style="order: 64">
                    <a href="#4033695206">
                        <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                        <span>Butterfly 夜间模式变换顶部网站图标</span>
                    </a>
                </li>
                
                <li data-index="3015602463" style="order: 65">
                    <a href="#3015602463">
                        <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                        <span>为评论系统增加输入提醒【Waline】</span>
                    </a>
                </li>
                
                <li data-index="2201181434" style="order: 66">
                    <a href="#2201181434">
                        <span class="record-type-point" style="color: var(--n_undefined);">⬤</span>
                        <span>博客域名解析管理与网站CDN加速域名配置</span>
                    </a>
                </li>
                
                <li data-index="3569112562" style="order: 67">
                    <a href="#3569112562">
                        <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                        <span>Hexo 博客适配 Obsidian 新语法</span>
                    </a>
                </li>
                
                <li data-index="4139834099" style="order: 68">
                    <a href="#4139834099">
                        <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                        <span>Butterfly 侧边栏实现 Obsidian 关系图谱</span>
                    </a>
                </li>
                
                <li data-index="2966071784" style="order: 69">
                    <a href="#2966071784">
                        <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                        <span>server、sqlite朋友圈部署方案</span>
                    </a>
                </li>
                
                <li data-index="657793374" style="order: 70">
                    <a href="#657793374">
                        <span class="record-type-point" style="color: var(--n_undefined);">⬤</span>
                        <span>Epic城市天际线 DLC 全破解与模组安装</span>
                    </a>
                </li>
                
                <li data-index="1309833614" style="order: 71">
                    <a href="#1309833614">
                        <span class="record-type-point" style="color: var(--n_生活区);">⬤</span>
                        <span>原来是 Edge 默默作祟</span>
                    </a>
                </li>
                
                <li data-index="127992739" style="order: 72">
                    <a href="#127992739">
                        <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                        <span>自定义文章内外链接样式的另一种方法（使用markdown-it插件）</span>
                    </a>
                </li>
                
                <li data-index="636905579" style="order: 73">
                    <a href="#636905579">
                        <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                        <span>页面展示用户 IP 地址及地理位置信息</span>
                    </a>
                </li>
                
                <li data-index="1129186507" style="order: 74">
                    <a href="#1129186507">
                        <span class="record-type-point" style="color: var(--n_undefined);">⬤</span>
                        <span>阿里云ECS主机可ping通但拒绝连接的解决办法</span>
                    </a>
                </li>
                
                <li data-index="4272386753" style="order: 75">
                    <a href="#4272386753">
                        <span class="record-type-point" style="color: var(--n_核心协同);">⬤</span>
                        <span>本地部署 PlantUML</span>
                    </a>
                </li>
                
                <li data-index="3607632637" style="order: 76">
                    <a href="#3607632637">
                        <span class="record-type-point" style="color: var(--n_生活区);">⬤</span>
                        <span>我上钩了——一次被钓鱼邮件受骗经历</span>
                    </a>
                </li>
                
                <li data-index="3395837292" style="order: 77">
                    <a href="#3395837292">
                        <span class="record-type-point" style="color: var(--n_生活区);">⬤</span>
                        <span>第一次开发 npm 插件</span>
                    </a>
                </li>
                
                <li data-index="1735498523" style="order: 78">
                    <a href="#1735498523">
                        <span class="record-type-point" style="color: var(--n_生活区);">⬤</span>
                        <span>好像我应该也是个生活区博主</span>
                    </a>
                </li>
                
                <li data-index="1218172081" style="order: 79">
                    <a href="#1218172081">
                        <span class="record-type-point" style="color: var(--n_undefined);">⬤</span>
                        <span>图像采集头顶到顶部距离不通过？就用 Windows 自带的画图解决</span>
                    </a>
                </li>
                
                <li data-index="3437638411" style="order: 80">
                    <a href="#3437638411">
                        <span class="record-type-point" style="color: var(--n_核心协同);">⬤</span>
                        <span>本地文件夹的多端同步</span>
                    </a>
                </li>
                
                <li data-index="1813820909" style="order: 81">
                    <a href="#1813820909">
                        <span class="record-type-point" style="color: var(--n_undefined);">⬤</span>
                        <span>「多媒体与信号处理」课程笔记</span>
                    </a>
                </li>
                
            </ul>
        </details>

        <details class="menu-view" open="open">
            <summary class="menu-title">
                Views
                <span class="badge">0</span>
            </summary>

            <button onclick="window.location.replace(window.location.pathname)">
                Back to default view
            </button>

            <button id="view-save">
                
                Set the view to URL
                
            </button>

            <span class="tooltip">?
                <span class="tooltiptext">Save the current state of the interface (selected node, types and keywords, focus) and creates a shortcut to this state in the Views section.
</span>
            </span>

            <div class="menu-view-container" id="views-container">
            
                
            
            </div>
        </details>

        <details class="menu-controls">
            <summary class="menu-title">
                Graph parameters
            </summary>

            <ul class="menu-controls-list">
                <li>
                    <label>
                        <input type="checkbox" checked onchange="linksDisplayToggle(this.checked)">
                        Display links
                        <span class="badge">48</span>
                    </label>
                </li>
                <li>
                    <label>
                        <input type="checkbox" checked onchange="labelDisplayToggle(this.checked)">
                        Display labels
                    </label>
                </li>
                <li>
                    <label>
                        <input type="checkbox" checked
                            onchange="graphProperties.graph_highlight_on_hover = this.checked">
                        Highlight on hover
                    </label>
                </li>
            </ul>

            

            <article class="menu-controls-container">
                <p class="menu-controls-title">
                    Forces
                    <span class="tooltip">?
                        <span class="tooltiptext"></span>
                    </span>
                </p>
                
            <form oninput="graphProperties.attraction_force = range.value; updateForces()">
                <label>repulsion</label>
                <input type="number" value="600" name="number" min="50" max="600" oninput="range.value = number.value"/>
                <input type="range" min="50" max="600" value="600" name="range" step="0.1" oninput="number.value = range.value"/>
            </form>
            
                
            <form oninput="graphProperties.attraction_distance_max = range.value; updateForces()">
                <label>max distance</label>
                <input type="number" value="507" name="number" min="200" max="800" oninput="range.value = number.value"/>
                <input type="range" min="200" max="800" value="507" name="range" step="0.1" oninput="number.value = range.value"/>
            </form>
            
                
            <form oninput="graphProperties.attraction_vertical = range.value; updateForces()">
                <label>vertical attraction</label>
                <input type="number" value="0.36" name="number" min="0" max="1" oninput="range.value = number.value"/>
                <input type="range" min="0" max="1" value="0.36" name="range" step="0.01" oninput="number.value = range.value"/>
            </form>
            
                
            <form oninput="graphProperties.attraction_horizontal = range.value; updateForces()">
                <label>horizontal attraction</label>
                <input type="number" value="0.36" name="number" min="0" max="1" oninput="range.value = number.value"/>
                <input type="range" min="0" max="1" value="0.36" name="range" step="0.01" oninput="number.value = range.value"/>
            </form>
            
            </article>

            <article class="menu-controls-container">
                <p class="menu-controls-title">
                    Labels
                </p>
                
            <form oninput="graphProperties.text_size = range.value; updateFontsize()">
                <label>font size</label>
                <input type="number" value="6" name="number" min="2" max="15" oninput="range.value = number.value"/>
                <input type="range" min="2" max="15" value="6" name="range" step="0.5" oninput="number.value = range.value"/>
            </form>
            
            </article>

            
            <article class="menu-controls-container">
                <p class="menu-controls-title">Mode de focus</p>
                <select name="focus_mode" id="focus-mode-select">
                    <option value="directed">Tous</option>
                    <option value="inbound">Entrant</option>
                    <option value="outbound">Sortant</option>
                </select>
            </article>
            
        </details>

        <footer class="menu-footer">
            

            <button class="btn-help" onclick="openRecord('help', false)">
                Help
            </button>

            <button class="btn-about" onclick="openRecord('credits', false)">
                
                    Made with Cosma – About
                
            </button>
        </footer>
    </aside>

    

    <main id="record-container" class="record-container">
        <button class="record-btn-close" onclick="closeRecord()">
            Close (Escape)
        </button>

        
        <article id="1355609062" class="record">
            <header>
                <h1 class="record-title">家里蹲的二十四节气</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>1355609062</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>生活区</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('二十四节气');">二十四节气</button>
                    
                    <button class="btn" onclick="activeTag('疫情');">疫情</button>
                    
                    <button class="btn" onclick="activeTag('日食');">日食</button>
                    
                    <button class="btn" onclick="activeTag('学习');">学习</button>
                    
                    <button class="btn" onclick="activeTag('TJU');">TJU</button>
                    
                    <button class="btn" onclick="activeTag('Canva');">Canva</button>
                    
                    <button class="btn" onclick="activeTag('PPT');">PPT</button>
                    
                    <button class="btn" onclick="activeTag('微信');">微信</button>
                    
                    <button class="btn" onclick="activeTag('微信公众号');">微信公众号</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>8/22/2020</span>
                </div>
                

                

                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/20231021170856.webp</span>
                </div>
                
                <div class="record-description">
                    <span>description :</span>
                    <span>整天呆在家的人多少出现点问题</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>50ccf3e6</span>
                </div>
                
                <div class="record-top_img">
                    <span>top_img :</span>
                    <span></span>
                </div>
                
            </header>

            <main class="record-content">
                <blockquote>
<p>[!hint] 导读提示<br>
2020 年初，疫情开始实质性影响我们的生活，我的大一下学期在家里度过。家里蹲期间，整个人的状态很松散随性，对线上学习事物动力不足，导致这期间天天焦虑，所以才会产生下文各种各样自我感动的留言。但也是这段时期给我许多自由探索的空间，我使用 VB 编写了 Excel 项目，深入了解 PPT 制作，上手平面设计、视频剪辑，接触并捣鼓自己的 Golly 小项目，以及微信公众号等等。</p>
<p>下文就是微信公众号中按 24 节气勉励自己的 9 篇文章。由文章封面和文本内容组成。大部分图文组合均由自己组合创作。</p>
<p>本文创建时间为 2023 年 10 月 22 日，除了新增「导读提示」外还增加「更多信息」章节。本文正文文本格式直接使用原文 HTML 内容，图片直接使用素材除去水印，<em>阅读原文</em>链接整理到「更多信息」章节中。</p>
</blockquote>
<h1>谷雨——雨生百谷</h1>
<p><em>2020-04-19 07:10</em></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/%E5%B0%81%E9%9D%A2-%E8%B0%B7%E9%9B%A820200417.webp" alt="封面-谷雨20200417.png|475"></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/%E8%B0%B7%E9%9B%A8-%E4%B8%8D%E8%A6%81%E8%B7%8C%E5%85%A5%E6%B7%B1%E6%B8%8A%E3%80%82.webp" alt="谷雨-不要跌入深渊。.png|475"></p>
<div class="rich_media_content js_underline_content
                       " id="js_content" style="visibility: visible;"><p style="text-align: center;"><span style="color: rgb(64, 118, 0);"><strong>从今天起，每个二十四节气，</strong></span></p><p style="text-align: center;"><span style="color: rgb(64, 118, 0);"><strong>将推送个人的时段格言</strong></span></p><p style="text-align: center;"><strong style="color: rgb(64, 118, 0);">一年也许会有很多不同，但是最起码，</strong></p><p style="text-align: center;"><strong style="color: rgb(64, 118, 0);">有这二十四个改变</strong><span style="color: rgb(64, 118, 0);"><strong><br></strong></span></p><p style="text-align: center;"><strong style="color: rgb(64, 118, 0);"><br></strong></p><p style="text-align: center;"><span style="color: rgb(64, 118, 0);"><strong>激励自己，也是激励大家<br></strong></span></p><p style="text-align: center;"><br></p><p style="text-align: center;"><span style="color: rgb(64, 118, 0);"><strong>共勉</strong></span><br></p><p style="text-align: center;"><span style="color: rgb(64, 118, 0);"><strong><br></strong></span></p><p style="text-align: center;"><span style="color: rgb(64, 118, 0);"><strong><br></strong></span></p><p style="text-align: center;"><span style="color: rgb(64, 118, 0);"><strong><br></strong></span></p><p style="text-align: center;"><span style="color: rgb(64, 118, 0);"><strong>。</strong></span></p></div>
<h1>立夏——万物至此皆长大</h1>
<p><em>2020-05-05 07:00</em></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/lixia.webp" alt="lixia.png|475"></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/%E4%B8%83%20(1).webp" alt="七 (1).png|475"></p>
<p><span style="color: rgb(61, 167, 66);"><strong>五月，此时的青年应是朝气蓬勃。</strong></span><br></p>
<h1>小满——小满江河满</h1>
<p><em>2020-05-20 09:24</em></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/%E6%9C%AA%E5%91%BD%E5%90%8D%E7%9A%84%E8%AE%BE%E8%AE%A1.webp" alt="未命名的设计.png|475"></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20200520%E5%B0%8F%E6%BB%A1.webp" alt="20200520小满.png|475"></p>
<p style="text-align: center;"><span style="font-size: 18px;color: rgb(214, 168, 65);"><strong><span style="color: rgb(214, 168, 65);font-size: 18px;font-family: arial, 宋体, sans-serif;text-align: start;text-indent: 28px;background-color: rgb(255, 255, 255);">从今天起，做一个幸福的人</span></strong></span></p>
<h1>芒种——播种有芒之谷</h1>
<p><em>2020-06-05 07:04</em></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/%E6%9C%AA%E5%91%BD%E5%90%8D%E7%9A%84%E8%AE%BE%E8%AE%A1%20(2).webp" alt="未命名的设计 (2).png|475"></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/%E7%AC%AC2%20%E7%82%B9%205%E5%AD%A6%E6%9C%9F%20%E3%80%82.webp" alt="第2 点 5学期 。.png|475"></p>
<p style="text-align: center;"><strong><span style="color: rgb(255, 169, 0);">暑假仍需努力！</span></strong><br></p>
<h1>夏至——日长之至，日影短至</h1>
<p><em>2020-06-21 17:13</em></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/%E5%A4%8F%E8%87%B3%E6%97%A5.webp" alt="夏至日.png|475"></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/%E5%A4%8F%E8%87%B3%E5%AD%A6%E4%B9%A0%E4%B8%8D%E3%80%82.webp" alt="夏至学习不。.png|475"></p>
<p style="text-align: center;"><strong>临近期末，暑假还是有课要学习的。</strong><br></p>
<p>今日有日食，时隔 11 年，再次“张目对日”（⚠ 此举危险）</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231021165704.webp" alt="image.png|425"></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231021165713.webp" alt="image.png|425"></p>
<p>愿世界和平。</p>
<h1>小暑——上蒸下煮</h1>
<p><em>2020-07-06 14:44</em></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/%E6%96%B0%E5%BB%BA%20Microsoft%20PowerPoint%20%E6%BC%94%E7%A4%BA%E6%96%87%E7%A8%BF.webp" alt="新建 Microsoft PowerPoint 演示文稿.jpg|475"></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/rwrwwew.webp" alt="rwrwwew.jpg|475"></p>
<div class="rich_media_content js_underline_content
                       " id="js_content" style="visibility: visible;"><p style="text-align: center;"><span style="color: rgb(61, 167, 66);"><strong>学习进行时<br></strong></span></p><p style="text-align: center;"><span style="color: rgb(61, 167, 66);"><strong>本篇文章由PPT制作，现学现用</strong></span><br></p></div>
<h1>大暑——炎热至极</h1>
<p><em>2020-07-22 23:38</em></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231021170856.webp" alt="image.png|475"></p>
<p>愿今年的高考生在明天能有当时的我一样的好运气。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231021170100.webp" alt="image.png|425"></p>
<p>暑假快乐。</p>
<h1>立秋——阴气始下，万物收</h1>
<p><em>2020-08-07 00:09</em></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231021170954.webp" alt="image.png|475"></p>
<p>倒计时的勤勉。</p>
<p>最后 20 天，追赶吧！</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231021170139.webp" alt="image.png|450"></p>
<h1>处暑——防秋老虎</h1>
<p><em>2020-08-22 17:33</em></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231021171049.webp" alt="image.png|475"></p>
<p>调整作息，预热学习，准备出发！</p>
<p>不做完美主义，但求跟紧实际，稳追稳打争第一！</p>
<h1>更多信息</h1>
<ul>
<li>文章中阅读原文链接：
<ul>
<li><a href="https://baike.baidu.com/item/%E8%B0%B7%E9%9B%A8/6959?fr=aladdin">谷雨（二十四节气之一）_百度百科 (baidu.com)</a></li>
<li><a href="https://baike.baidu.com/item/%E7%AB%8B%E5%A4%8F/7587?fr=aladdin">立夏（二十四节气之一）_百度百科 (baidu.com)</a></li>
<li><a href="https://baike.baidu.com/item/%E5%B0%8F%E6%BB%A1/35961?fr=aladdin">小满（二十四节气之一）_百度百科 (baidu.com)</a></li>
<li><a href="https://baike.baidu.com/item/%E8%8A%92%E7%A7%8D/487968?from=kg_qa">芒种（二十四节气之一）_百度百科 (baidu.com)</a></li>
<li><a href="https://baike.baidu.com/item/%E5%A4%8F%E8%87%B3/12033?fr=aladdin">夏至（二十四节气之一）_百度百科 (baidu.com)</a></li>
<li><a href="https://baike.baidu.com/item/%E5%B0%8F%E6%9A%91/488269?fr=aladdin">小暑（二十四节气之一）_百度百科 (baidu.com)</a></li>
</ul>
</li>
<li>除了小满文章忘记署名「二十四只」外，每篇文章均以「二十四只   小钦钦 qin」作为文章抬头。</li>
<li>这些文章占据了目前 9/19 的公众号文章。</li>
<li>「处暑——防秋老虎」文章为公众号最后一篇文章。</li>
</ul>


                
            </main>

            <footer class="list-content-container">
                

                
            </footer>
        </article>
        
        <article id="3096264560" class="record">
            <header>
                <h1 class="record-title">旧页面-关于我</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>3096264560</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>Zone of archive, undefined</span>
                </div>

                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>3/10/2022</span>
                </div>
                

                

                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>b88d3f70</span>
                </div>
                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/achived-cover.png</span>
                </div>
                
            </header>

            <main class="record-content">
                <blockquote>
<p>[!Warning] 这是一篇归档文章<br>
本页面已停止更新，仅起历史归档作用。</p>
</blockquote>
<h1>Hexo 建站版</h1>
<blockquote>
<p>修改时间：2023</p>
</blockquote>
<p>Hello！😀</p>
<p>我是一枚在校大学生🏫，目前就读于海棠花盛开的地方。平时喜欢搞事，也喜欢分享生活！在这短短几年的代码生涯里，从之前的“懵懂”到现在的刚刚“入门”，中间经历了许多的困难。但是，在解决困难的过程中，我发现至今仍有一条我摸索出来的“铁律”没有违背，那就是<strong>只要你肯花时间，疑惑与错误总会逐渐减少，不会一成不变地成为堵路石</strong>。</p>
<p>程序员的交流社区是庞大的，在中国更不用说。但是，在中国互联网上鲜有优质的社区与优秀的方案。网络上总是充斥着重复、无用、过时、繁琐的帖子，一个人想在中文互联网找到答案，大概率的情况是会淹没在茫茫的无效的回答当中。</p>
<p>为了改善这种情况，我将尽自己微薄的力量，去缓解这个现状。在这个网站中，我会分享自己在大学学习中整理的学习笔记，随时更新自己遇到困难后所采取的解决方案，给自己留下一份记录，也互联网上的其他人提供帮助。</p>
<p>同时，我也将我自己空闲时捣鼓的玩意分享出来，涉及的领域包括但不限于编程、游戏、设计、音乐、艺术。欢迎大家的围观和评论。虽然我不是什么大神大鬼，但我还是不要脸的在个人品牌上不断探索。</p>
<p>就酱，have a nice day！😋❤</p>
<h1>WordPress 建站版</h1>
<blockquote>
<p>建立时间：2022-03-10 23:38:40</p>
</blockquote>
<p>Hello！😀</p>
<p>我是一枚在校大学生🏫，就读于海棠花盛开的地方。平时我乐于学习计算机知识，也喜欢分享生活！在这短短几年的代码生涯里，从之前的“懵懂”到现在的刚刚“入门”，中间经历了许多的困难。但是，在解决困难的过程中，我发现至今仍有一条我摸索出来的“铁律”没有违背，那就是<strong>只要你肯花时间，疑惑与错误总会逐渐减少，不会一成不变地成为堵路石</strong>。</p>
<p>程序员的交流社区是庞大的，在中国更不用说。但是，在中国互联网上鲜有优质的社区与优秀的方案。网络上总是充斥着重复、无用、过时、繁琐的帖子，一个人想在中文互联网找到答案，大概率的情况是会淹没在茫茫的无效的回答当中。（这个过程据说叫💩里掏金）</p>
<p>为了改善这种情况，我将尽自己微薄的力量，去缓解这个现状。在这个网站中，我会分享自己在大学学习中整理的学习笔记，随时更新自己遇到困难后所采取的解决方案，给自己留下一份记录，也互联网上的其他人提供帮助。</p>
<p>同时，我也将我自己空闲时捣鼓的玩意分享出来，涉及的领域包括但不限于编程、游戏、设计、音乐、艺术。欢迎大家的围观和评论。虽然我不是什么大神大鬼，但我还是不要脸的在个人品牌上不断探索。所以......欢迎大家关注我的个人公众号“小钦钦qin”，里边的内容将会不断完善，相信有一天他会同样精彩！</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/QRCode%E9%80%8F%E6%98%8E.png" alt="|172"></p>
<p>小钦钦qin</p>
<p>这个网站是租用云服务器，并自己配置LAMP环境而建立的，加上买域名啥的花了不少小钱钱。希望各位看客可以多多支(zan)持(zhu)，多多交(biao)流(yang)，咱们互相学习！</p>
<p>就酱，have a nice day！😋❤</p>


                
            </main>

            <footer class="list-content-container">
                

                
            </footer>
        </article>
        
        <article id="238315581" class="record">
            <header>
                <h1 class="record-title">旧页面-WordPress 站点隐私政策</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>238315581</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>Zone of archive, undefined</span>
                </div>

                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>3/10/2022</span>
                </div>
                

                

                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>e34683d</span>
                </div>
                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/achived-cover.png</span>
                </div>
                
            </header>

            <main class="record-content">
                <blockquote>
<p>[!Warning] 这是一篇归档文章<br>
本页面已停止更新，仅起历史归档作用。</p>
</blockquote>
<p>目录</p>
<ul>
<li><a href="#%E6%88%91%E4%BB%AC%E6%98%AF%E8%B0%81">我们是谁</a></li>
<li><a href="#%E8%AF%84%E8%AE%BA">评论</a></li>
<li><a href="#%E5%AA%92%E4%BD%93">媒体</a></li>
<li><a href="#cookies">Cookies</a></li>
<li><a href="#%E6%9D%A5%E8%87%AA%E5%85%B6%E4%BB%96%E7%BD%91%E7%AB%99%E7%9A%84%E5%B5%8C%E5%85%A5%E5%86%85%E5%AE%B9">来自其他网站的嵌入内容</a></li>
<li><a href="#%E6%88%91%E4%BB%AC%E4%B8%8E%E8%B0%81%E5%85%B1%E4%BA%AB%E6%82%A8%E7%9A%84%E4%BF%A1%E6%81%AF">我们与谁共享您的信息</a></li>
<li><a href="#%E6%88%91%E4%BB%AC%E4%BF%9D%E7%95%99%E5%A4%9A%E4%B9%85%E6%82%A8%E7%9A%84%E4%BF%A1%E6%81%AF">我们保留多久您的信息</a></li>
<li><a href="#%E6%82%A8%E5%AF%B9%E6%82%A8%E7%9A%84%E4%BF%A1%E6%81%AF%E6%9C%89%E4%BB%80%E4%B9%88%E6%9D%83%E5%88%A9">您对您的信息有什么权利</a></li>
<li><a href="#%E6%88%91%E4%BB%AC%E5%B0%86%E6%82%A8%E7%9A%84%E4%BF%A1%E6%81%AF%E5%8F%91%E9%80%81%E5%88%B0%E5%93%AA">我们将您的信息发送到哪</a></li>
<li><a href="#%E7%AC%AC%E4%B8%89%E6%96%B9%E6%9C%8D%E5%8A%A1%E9%9A%90%E7%A7%81%E6%94%BF%E7%AD%96">第三方服务隐私政策</a></li>
<li><a href="#akismet%E5%8F%8D%E5%9E%83%E5%9C%BE%E8%AF%84%E8%AE%BA%E6%9C%8D%E5%8A%A1%E6%8F%92%E4%BB%B6">Akismet反垃圾评论服务插件</a></li>
<li><a href="#clarity">Clarity</a></li>
<li><a href="#popup--maker">Popup Maker</a></li>
<li><a href="#%E7%99%BE%E5%BA%A6%E7%BB%9F%E8%AE%A1">百度统计</a></li>
<li><a href="#%E5%BC%80%E5%BE%80-%E5%8F%8B%E9%93%BE%E6%8E%A5%E5%8A%9B">开往-友链接力</a></li>
</ul>
<p>本隐私政策最后更新时间：<strong><em>2022年4月22日</em></strong></p>
<h4>我们是谁</h4>
<p>站点地址：<a href="http://uuanqin.top">http://uuanqin.top</a><br>
ICP备案号：<a href="https://beian.miit.gov.cn/">津ICP备2022002156号</a><br>
公安联网备案：<a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=12011202000621">津公网安备 12011202000621号</a></p>
<h4>评论</h4>
<p>当访客留下评论时，我们会收集<strong>评论表单所显示的数据</strong>，和<strong>访客的IP地址及浏览器的user agent字符串</strong>来帮助检查垃圾评论。所收集的**电子邮箱信息仅用于接收评论提醒：回复提醒、审核通过提醒等，不会对外公布。**如果您是网站的注册用户，电子邮箱还将用于接收密码重置信息。</p>
<p>由您的电子邮箱地址所生成的匿名化字符串（又称为哈希）可能会被提供给Gravatar服务确认您是否有使用该服务。Gravatar服务的隐私政策可在<a href="https://automattic.com/privacy/">此处</a>查询。当您的评论审核通过后，您的资料图片将在您的评论旁公开展示。</p>
<h4>媒体</h4>
<p>如果您向此网站上传图片，您应当避免上传那些有嵌入地理位置信息（EXIF GPS）的图片。此网站的访客将可以下载并提取此网站的图片中的位置信息。</p>
<h4>Cookies</h4>
<p>如果您在我们的站点上留下评论，您可以选择用cookies保存您的名字、电子邮箱地址和网站地址。它可以让您可以不用在评论时再次填写相关内容而向您提供方便。这些cookies会<strong>保留一年</strong>。</p>
<p>如果您访问我们的登录页，我们会设置一个临时的cookie来确认您的浏览器是否接受cookies。此cookie不包含个人数据，且会在您关闭浏览器时被丢弃。</p>
<p>当您登录时，我们也会设置多个cookies来保存您的登录信息及屏幕显示选项。登录cookies会<strong>保留两天</strong>，而屏幕显示选项cookies会<strong>保留一年</strong>。如果您选择了“记住我”，您的登录状态则会<strong>保留两周</strong>。如果您注销登陆了您的账户，用于登录的cookies将会被移除。</p>
<p>如果您编辑或发布文章，我们会在您的浏览器中保存一个额外的cookie。这个cookie不包含个人数据而只记录了您刚才编辑的文章的ID。这个cookie会<strong>保留一天</strong>。</p>
<p>关于第三方插件使用的cookies信息详见<a href="#%E7%AC%AC%E4%B8%89%E6%96%B9%E6%8F%92%E4%BB%B6%E9%9A%90%E7%A7%81%E6%94%BF%E7%AD%96">第三方插件隐私政策</a>。</p>
<h4>来自其他网站的嵌入内容</h4>
<p>此站点上的文章可能会包含嵌入的内容（如视频、图片、文章等）。来自其他站点的嵌入内容的行为和您直接访问这些其他站点没有区别。</p>
<p>这些站点可能会收集关于您的数据、使用cookies、嵌入额外的第三方跟踪程序及监视您与这些嵌入内容的交互，包括在您有这些站点的账户并登录了这些站点时，跟踪您与嵌入内容的交互。</p>
<h4>我们与谁共享您的信息</h4>
<p>网站服务器部署在阿里云，部分媒体文件（<strong>仅存储网页图片，不包含用户数据</strong>）在腾讯云中托管。所有的用户数据将存储在中国大陆<strong>境内</strong>。</p>
<p>若您请求重置密码，您的<strong>IP地址</strong>将包含于密码重置邮件中。</p>
<h4>我们保留多久您的信息</h4>
<p>如果您留下评论，<strong>评论和其元数据</strong>将被无限期保存。我们这样做以便能识别并自动批准任何后续评论，而不用将这些后续评论加入待审队列。</p>
<p>对于本网站的注册用户，我们也会保存用户在个人资料中提供的个人信息。所有用户可以在任何时候查看、编辑或删除他们的个人信息（除了不能变更用户名外）、站点管理员也可以查看及编辑那些信息。</p>
<h4>您对您的信息有什么权利</h4>
<p>如果您有此站点的账户，或曾经留下评论，您可以请求我们提供我们所拥有的您的个人数据的导出文件，这也包括了所有您提供给我们的数据。您也可以要求我们抹除所有关于您的个人数据。这不包括我们因管理、法规或安全需要而必须保留的数据。</p>
<h4>我们将您的信息发送到哪</h4>
<p>访客评论可能会被自动垃圾评论监测服务检查。</p>
<h4>第三方服务隐私政策</h4>
<h5>Akismet反垃圾评论服务插件</h5>
<p>我们收集关于在使用我们的Akismet反垃圾评论服务的站点处评论的访客的信息。我们收集的信息取决于用户如何为站点设置Akismet，但通常包括了评论者的<strong>IP地址、user agent、referrer及站点URL</strong>（和其他由评论者直接提供的信息如<strong>姓名、用户名、电子邮箱地址和评论内容</strong>）。</p>
<h5>Clarity</h5>
<p>本站使用微软Clarity工具分析用户访问数据，旨在提升页面设计、提高交互体验。您需要知道的信息是：</p>
<ul>
<li>Clarity是遵守《通用数据保护条例》的，详情见Microsoft隐私声明。</li>
<li>Clarity收集用户交互数据，如：<strong>页面渲染数据，用户鼠标移动、点击、滚轮等数据</strong>。详情见“Clarity收集的数据”页面。</li>
<li>收集的数据存储在微软Azure云服务。</li>
<li>Microsoft/Clarity有权访问这些数据。</li>
<li>用户不拥有不被Clarity记录的选择权。</li>
<li>Clarity不会将数据售卖出去。</li>
</ul>
<p>Clarity收集的数据：<a href="https://docs.microsoft.com/en-us/clarity/clarity-data">Clarity data Microsoft Docs</a><br>
Clarity使用条款：<a href="https://clarity.microsoft.com/terms">Microsoft Clarity - Free Heatmaps &amp; Session Recordings</a><br>
Microsoft隐私声明：<a href="https://privacy.microsoft.com/zh-CN/privacystatement">Microsoft 隐私声明 - Microsoft 隐私</a></p>
<h5>Popup Maker</h5>
<p>Cookies主要用于记录弹窗操作。这些Cookie会<strong>保留1周</strong>。</p>
<h5>百度统计</h5>
<p>本站使用了百度统计提供的统计代码。关于其隐私政策请看<a href="https://tongji.baidu.com/web/help/article?id=330&amp;type=0&amp;from_query=%E9%9A%90%E7%A7%81&amp;index=0">百度统计隐私政策 (baidu.com)</a>。</p>
<h5>开往-友链接力</h5>
<blockquote>
<p>开往是否安全？</p>
<p>安全，不侵犯隐私。全部 https 抗劫持；开源<strong>无统计代码</strong>*，不侵犯隐私；镜像自动部署，无人工干预。加入开往的网页全部经过人工筛选，确保流量从源头就是干净优质的</p>
</blockquote>
<p>“开往-友链接力”的隐私说明详看：<a href="https://github.com/travellings-link/travellings#q%E5%BC%80%E5%BE%80%E6%98%AF%E5%90%A6%E5%AE%89%E5%85%A8%E4%BC%9A%E4%B8%8D%E4%BC%9A%E4%BE%B5%E7%8A%AF%E9%9A%90%E7%A7%81">travellings-link/travellings: 开往-友链接力 (github.com)</a></p>


                
            </main>

            <footer class="list-content-container">
                

                
            </footer>
        </article>
        
        <article id="3483842810" class="record">
            <header>
                <h1 class="record-title">WordPress 前台页面空白的解决</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>3483842810</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>WordPress</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('问题解决');">问题解决</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>3/10/2022</span>
                </div>
                

                

                
                <div class="record-description">
                    <span>description :</span>
                    <span>修改为Wordpress默认的index.php。</span>
                </div>
                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/WPPIC.png</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>cfa738fa</span>
                </div>
                
            </header>

            <main class="record-content">
                <p>在LAMP环境搭好，且Wordpress已经安装好后，访问/wp-admin页可以正常访问。但是就是前台页面为空，或者显示了网页文件夹另一个index页面的内容。</p>
<p>当时我也意识到，这是个小得不能再小的问题，但如果对问题不理解时它有会显得很难。</p>
<p>在安装Wordpress后，默认的index.php已经在里面了。但是我的那份里面是不完整的代码，甚至注解里面还有英文“沉默是金”的字样。这时候，只要正确创建好index.php就行了。</p>
<p>正确的index.php内容（即Wordpress安装时默认内容）如下：</p>
<pre><code class="language-php">&lt;?php
/**
 * Front to the WordPress application. This file doesn't do anything, but loads
 * wp-blog-header.php which does and tells WordPress to load the theme.
 *
 * @package WordPress
 */

/**
 * Tells WordPress to load the WordPress theme and output it.
 *
 * @var bool
 */
define('WP_USE_THEMES', true);

/** Loads the WordPress Environment and Template */
require('./wp-blog-header.php');
?&gt;
</code></pre>
<p>注意，Wordpress设置里站点位置不要弄错。</p>
<p>参考：<a href="https://ryans.dream.press/wordpress-2/default-wordpress-index-php-file/#:~:text=Default%20WordPress%20index.php%20code%20.%20This%20is%20the,fresh%20copy%20of%20the%20index.php%20file%20for%20WordPress.">Default WordPress index.php file – Ryan's Guides (dream.press)</a></p>


                
            </main>

            <footer class="list-content-container">
                

                
            </footer>
        </article>
        
        <article id="3992879191" class="record">
            <header>
                <h1 class="record-title">PicGo(app) 配置腾讯云 COS 图床</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>3992879191</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>核心协同</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('COS');">COS</button>
                    
                    <button class="btn" onclick="activeTag('PicGo');">PicGo</button>
                    
                    <button class="btn" onclick="activeTag('图床');">图床</button>
                    
                    <button class="btn" onclick="activeTag('实现');">实现</button>
                    
                    <button class="btn" onclick="activeTag('腾讯云');">腾讯云</button>
                    
                    <button class="btn" onclick="activeTag('step-by-step');">step-by-step</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>3/12/2022</span>
                </div>
                

                

                
                <div class="record-description">
                    <span>description :</span>
                    <span>保姆级解释PicGo配置腾讯云的步骤。</span>
                </div>
                
                <div class="record-cover">
                    <span>cover :</span>
                    <span></span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>edfe8057</span>
                </div>
                
            </header>

            <main class="record-content">
                <p>PicGo 是图床管理的开源软件，以 PicGo 为窗口使用 COS 作为图床将使我们更好的对图片进行管理。</p>
<p>利用 PicGo，我们在使用 Typora、Obsidian 等编辑器编写 Markdown 文档时将更为方便。</p>
<h1>安装 PicGo（App）</h1>
<p>这里我选择安装 PicGo 应用进行实现，如果选择 PicGo-Core（Command line），可参考<a href="https://www.cnblogs.com/locustree/p/15371982.html">Typora+picGo-core+云对象存储+以时间戳命名图片存储 - 槐下 - 博客园 (cnblogs.com)</a> 。</p>
<p>官网安装：<a href="https://molunerfinn.com/PicGo/">PicGo (molunerfinn.com)</a></p>
<p>我这里安装的是 PicGo - 2.3.0 版本。通过一般途径从 GitHub 上安装，速度巨慢！想直接下载的点链接：<a href="https://www.aliyundrive.com/s/hG2B4onmYNv">https://www.aliyundrive.com/s/hG2B4onmYNv</a></p>
<h1>购买腾讯云对象存储 COS 产品</h1>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-1024x293.png" alt="|520"></p>
<p><strong>已拥有的可忽略、直接看下一章</strong>。</p>
<p>首先登录腾讯云账户，直接微信扫一扫就行了。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/imagasde-1.png" alt=""></p>
<p>登录后找到对象存储的相关页面</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/imagewed-2.png" alt=""></p>
<p>根据需要进行选购</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-3-102s4x452.png" alt=""></p>
<p>我当时是参与了一个新用户的活动，实名认证后 1 块钱得标准存储容量-50G, 12 个月。随便点点又送了一些资源包。总的来说还是挺划算的。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/imagesa-4.png" alt=""></p>
<p>购买成功后来到控制台：<a href="https://console.cloud.tencent.com/cos/bucket">存储桶列表 - 对象存储 - 控制台 (tencent.com)</a></p>
<p>控制台在这里：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-27-1024xs144.png" alt=""></p>
<p>在云产品菜单下找对象存储的控制台：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/imagse-28.png" alt=""></p>
<p>在存储桶列表一栏新建存储桶。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-s5.png" alt=""></p>
<p>按图片中的步骤进行填写</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-s6.png" alt=""></p>
<p>后续直接点下一步、创建，即可。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-7-1024x573.png" alt=""></p>
<p>进入这个新的存储桶后，创建一个新的文件夹，专门用于存储图片（可选步骤）</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-8-1024x430.png" alt=""></p>
<p>第三步到这里就完成了！如果之前存储桶的访问权限设错了，可以点击存储桶，在这里改：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/%E6%94%B9%E6%9D%83%E9%99%90-1024x451.png" alt=""></p>
<h1>COS 权限配置</h1>
<p>这个步骤用于配置用户权限。</p>
<p>打开访问管理页。在用户列表下新建用户</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/imasge-9.png" alt=""></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-10s.png" alt=""></p>
<p>选择自定义创建</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-1s1.png" alt=""></p>
<p>按步骤设置：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/imsage-12.png" alt=""></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/imagse-13.png" alt=""></p>
<p>用户权限这一步需要在搜索框搜索相应权限。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-14-1024x508.png" alt=""></p>
<p>最后再确认信息即可。</p>
<h1>配置 PicGo</h1>
<p>终于来到第五步了！现在需要做的就是记录相关参数。</p>
<p>进入密钥管理，记录<strong>APPID、SecretID、SecretKey</strong>。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-15-1024x714.png" alt=""></p>
<p>返回刚才存储桶页面，记录存储桶信息：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-16-1024x422.png" alt=""></p>
<p>这里的地域信息就是像<strong>ap-nanjing</strong>这种。</p>
<p>打开 PicGo（APP），把刚才记录的信息填写进去。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/imag9e-17.png" alt=""></p>
<blockquote>
<p>[!Hint] 版本提示<br>
PicGo 2.3.0 版本的配置中容易忽略对 COS 版本的选择，它是区分“左”“右”的。目前新版本改为下拉框，不存在 UI 歧义问题。</p>
</blockquote>
<p>然后就 OK 了。你可以拖几张图片测试一下。</p>
<h1>额外提醒</h1>
<p>如果 COS 采用 CDN 加速，PicGo 可通过填写自定义域名进行设置。</p>


                
            </main>

            <footer class="list-content-container">
                

                
                <details class="record-backlinks" open="open">
                    <summary class="menu-title">
                        backlinks
                        <span class="badge">3</span>
                    </summary>

                    <ul class="record-backlinks-list">
                        
                        <li data-target-id="377267818">
                            <a href="#377267818">
                                <span class="record-type-point" style="color: var(--n_核心协同);">⬤</span>
                                
                                <span>Typora 应用 PicGo(app) 使用图床</span>
                                <div class="record-links-context hover">
                                    <p>请移步这篇文章<span class="id-context" data-target-id="3992879191">PicGo(app) 配置腾讯云 COS 图床</span></p>

                                </div>
                            </a>
                        </li>
                        
                        <li data-target-id="3103663518">
                            <a href="#3103663518">
                                <span class="record-type-point" style="color: var(--n_工具箱);">⬤</span>
                                
                                <span>开源工具推荐</span>
                                <div class="record-links-context hover">
                                    <p>本站相关文章：</p>
<ul>
<li>Typora 应用 PicGo(app) 使用图床</li>
<li><span class="id-context" data-target-id="3992879191">PicGo(app) 配置腾讯云 COS 图床</span></li>
</ul>

                                </div>
                            </a>
                        </li>
                        
                        <li data-target-id="85495977">
                            <a href="#85495977">
                                <span class="record-type-point" style="color: var(--n_核心协同);">⬤</span>
                                
                                <span>构建 Obsidian 的 Hexo 写作工作流</span>
                                <div class="record-links-context hover">
                                    <p>[^图床配置教程]: <span class="id-context" data-target-id="3992879191">PicGo(app) 配置腾讯云 COS 图床</span></p>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                
            </footer>
        </article>
        
        <article id="377267818" class="record">
            <header>
                <h1 class="record-title">Typora 应用 PicGo(app) 使用图床</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>377267818</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>核心协同</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('PicGo');">PicGo</button>
                    
                    <button class="btn" onclick="activeTag('Typora');">Typora</button>
                    
                    <button class="btn" onclick="activeTag('图床');">图床</button>
                    
                    <button class="btn" onclick="activeTag('实现');">实现</button>
                    
                    <button class="btn" onclick="activeTag('step-by-step');">step-by-step</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>3/12/2022</span>
                </div>
                

                

                
                <div class="record-description">
                    <span>description :</span>
                    <span>Typora联动PicGo APP实现图床。简单、有效、花费少。</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>167ca66a</span>
                </div>
                
                <div class="record-cover">
                    <span>cover :</span>
                    <span></span>
                </div>
                
            </header>

            <main class="record-content">
                <p>每次使用 Typora，最麻烦的就是图片插入问题。稍微改个路径，或不小心把图删除，图就挂了。虽说新增一个文件夹，用来专门放置某个 Markdown 文档中的图片是一个方法，但是这未免也太麻烦。</p>
<p>现介绍 PicGo APP 配合 Typora 的使用，可以直接拖拽图片进入 Markdown 文档，无需另外找地方保存图片的方法。整个过程顺畅且优雅~（如需通过其他方式实现，请直接查看最后的参考链接）</p>
<p>具体实现步骤如下：</p>
<h1>拥有 PicGo 并配置图床</h1>
<p>请移步这篇文章<a href="#3992879191" title="PicGo(app) 配置腾讯云 COS 图床" class="record-link">PicGo(app) 配置腾讯云 COS 图床</a></p>
<h1>安装 Typora</h1>
<p>官网下载：<a href="https://www.typora.net/">TyporaTypora 中文 typora 下载 typora 主题</a></p>
<p>Typora 是 Markdown 的文件编辑器，秉承”所见即所得“的特点，深受大家的喜爱。它简洁且免费（beta 版本）。</p>
<p>Typora 正式版发布之后，就需要收费了，不过作者也并不限制历史版本的下载，以前版本的下载链接还可以找到。</p>
<p>打开 Typora。（<a href="http://xn--4gqvdz8cd00ap9ltmp9m5cfhl.md">就是随便点进一个.md</a> 文件，或者新建一个.txt，<a href="http://xn--siqw5l25ntscyw0c.md">把后缀改为.md</a> 再用 Typora 打开就行），打开偏好设置：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-18-editeed.png" alt=""></p>
<p>设置就按照下面图片那样设置</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-1r9.png" alt=""></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/imagse-20.png" alt=""></p>
<p>路径选择 PicGo 安装目录下的可执行文件。然后再进行验证。</p>
<p>如果出现下图的结果，则说明验证成功：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-2d1.png" alt=""></p>
<p>如果出现失败，比如下面的例子。记得检查前面的步骤是否做好，特别是参数配置部分。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/%E5%A4%B1%E8%B4%A51.png" alt=""></p>
<p>Typora 的提示</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-24-1024x300.png" alt=""></p>
<p>（日志内容）</p>
<p>如果出现问题记得仔细查阅 PicGo 的配置手册：<a href="https://picgo.github.io/PicGo-Doc/zh/guide/config.html#%E8%85%BE%E8%AE%AF%E4%BA%91cos">配置手册 PicGo</a></p>
<h1>成果展示</h1>
<p>拖拽图片进入 Typora，图片将自动上传。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-2s2.png" alt=""></p>
<p>图片上传中</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-2s3.png" alt=""></p>
<p>上传成功。</p>
<h1>参考链接</h1>
<ul>
<li>最近才发现官方的教程：<a href="https://cloud.tencent.com/document/product/436/74373">对象存储 使用 PicGo+Typora+COS 搭建图床服务-最佳实践-文档中心-腾讯云 (tencent.com)</a></li>
<li>Sfgg 采用 PicGo-core 进行配置，并对图片进行了重命名<a href="https://www.cnblogs.com/locustree/p/15371982.html">Typora+picGo-core+云对象存储+以时间戳命名图片存储 - 槐下 - 博客园 (cnblogs.com)</a>。</li>
<li><a href="https://blog.csdn.net/qq_37924905/article/details/118440244">typora+picGo+阿里云对象存储 OSS 和 typora+picGo+gitee 的相关配置_水巷石子的博客-CSDN 博客</a> 这篇文章采用了阿里云的对象存储，许多操作大同小异。我基本是仿照着它来的。</li>
<li><a href="https://baijiahao.baidu.com/s?id=1722650278458327580&amp;wfr=spider&amp;for=pc">解决 typora picgo 图片上传失败问题 (baidu.com)</a> 这篇文章采用了 <a href="http://SM.MS">SM.MS</a> 图床，官网：<a href="https://sm.ms/">Image Upload - SM.MS - Simple Free Image Hosting</a>。更多图床的使用方法在 PicGo 的配置手册里都有：<a href="https://picgo.github.io/PicGo-Doc/zh/guide/config.html#%E5%9B%BE%E5%BA%8A%E5%8C%BA">配置手册 PicG</a></li>
</ul>


                
            </main>

            <footer class="list-content-container">
                
                <details class="record-links">
                    <summary class="menu-title">
                        links
                        <span class="badge">1</span>
                    </summary>

                    <ul class="record-links-list">
                        
                        <li data-target-id="3992879191">
                            <a href="#3992879191">
                                <span class="record-type-point" style="color: var(--n_核心协同);">⬤</span>
                                
                                <span>PicGo(app) 配置腾讯云 COS 图床</span>
                                <div class="record-links-context hover">
                                    <p>请移步这篇文章<span class="id-context" data-target-id="3992879191">PicGo(app) 配置腾讯云 COS 图床</span></p>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                

                
                <details class="record-backlinks" open="open">
                    <summary class="menu-title">
                        backlinks
                        <span class="badge">1</span>
                    </summary>

                    <ul class="record-backlinks-list">
                        
                        <li data-target-id="3103663518">
                            <a href="#3103663518">
                                <span class="record-type-point" style="color: var(--n_工具箱);">⬤</span>
                                
                                <span>开源工具推荐</span>
                                <div class="record-links-context hover">
                                    <p>本站相关文章：</p>
<ul>
<li><span class="id-context" data-target-id="377267818">Typora 应用 PicGo(app) 使用图床</span></li>
<li>PicGo(app) 配置腾讯云 COS 图床</li>
</ul>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                
            </footer>
        </article>
        
        <article id="2653327377" class="record">
            <header>
                <h1 class="record-title">WordPress 上传的文件大小超过定义值问题解决</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>2653327377</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>WordPress</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('PHP');">PHP</button>
                    
                    <button class="btn" onclick="activeTag('问题解决');">问题解决</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>3/13/2022</span>
                </div>
                

                

                
                <div class="record-description">
                    <span>description :</span>
                    <span>找到php.ini文件并修改相应数值。</span>
                </div>
                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/WPPIC.png</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>9e269011</span>
                </div>
                
            </header>

            <main class="record-content">
                <p>我在上传 Wordpress 插件时出现了错误：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/%E9%94%99%E8%AF%AFd1.png" alt=""></p>
<p>根据它的提示找到以下解决方法：</p>
<p>打开 Linux 服务器命令行，找到这个文件所在目录：</p>
<pre><code class="language-bash">find / -name php.ini
</code></pre>
<p>使用 vim 编辑 upload_max_filesize 的值：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-d25.png" alt=""></p>
<p>保存后退出。</p>
<p>重启 Apache 和 php-fpm 即可。</p>
<pre><code class="language-bash"> service httpd restart
 service php-fpm restart
</code></pre>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-2d6.png" alt=""></p>
<h1>本文参考</h1>
<ul>
<li><a href="https://www.suxing.me/wp-courses/1336.html">WordPress 上传的文件尺寸超过 php.ini 中定义的 upload_max_filesize 值解决方法 - 苏醒 (suxing.me)</a></li>
<li><a href="https://www.cnblogs.com/lvfish/p/10248835.html">linux 下 apache 停止、重启等操作 - LvFish - 博客园 (cnblogs.com)</a></li>
</ul>


                
            </main>

            <footer class="list-content-container">
                

                
            </footer>
        </article>
        
        <article id="1881411089" class="record">
            <header>
                <h1 class="record-title">关于 QQ 聊天发起与 QQ 邮箱即时写信的链接-即时沟通外链</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>1881411089</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>Zone of archive, undefined</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('QQ');">QQ</button>
                    
                    <button class="btn" onclick="activeTag('QQ邮箱');">QQ邮箱</button>
                    
                    <button class="btn" onclick="activeTag('实现');">实现</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>3/13/2022</span>
                </div>
                

                

                
                <div class="record-description">
                    <span>description :</span>
                    <span>即时沟通外链。添加QQ、邮箱外链的做法。</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>70240e11</span>
                </div>
                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/new-out-of-date-cover.png</span>
                </div>
                
            </header>

            <main class="record-content">
                <blockquote>
<p>[!warning] 这是一篇过期文章[2023.05.03]<br>
本篇文章已过期。</p>
<ul>
<li>由于 <em>QQ 推广</em> 产品策略调整，即时沟通外链已不可用</li>
<li>QQ 邮我功能目前还在设置，但点击链接已达不到想要的效果</li>
</ul>
</blockquote>
<p>网页中插入联系方式，可以直接写下 QQ 号和微信号，也可以放二维码。不过，我印象中还有一种更快、更便捷的方式，就是通过即时沟通外链（反正我没想到什么好词）直接打开聊天窗口或发信窗口。微信暂时弄不了，这里就先提供 QQ 和 QQ 邮箱的方法。</p>
<h4>一、先上答案</h4>
<p>发起 QQ 聊天的链接：</p>
<pre><code>http://wpa.qq.com/msgrd?v=3&amp;uin=&lt;your_QQ_number&gt;&amp;site=qq&amp;menu=ye
</code></pre>
<p>发起 QQ 邮箱的写信功能：</p>
<pre><code>https://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&amp;email=&lt;your_mail&gt;
</code></pre>
<p>注意：&lt;your_QQ_number&gt;，&lt;your_mail&gt;部分是自己账号的可替换内容。发起 QQ 聊天时需要注意电脑上已经登录好自己的 QQ 了。QQ 邮箱写信最好是在网页端已经登陆过 QQ 邮箱的情况下使用。</p>
<p>上面这些功能本质就是平台对外公布的组件。即使是这样，我光是找就找了好久。毕竟这些功能在上个 10+年推出的。光看官方网页和指导也能知道多久没有维护了。</p>
<p>接下来的部分就详细探讨我所发现的更多相关内容。</p>
<h4>二、QQ 推广</h4>
<p>官网：<a href="https://shang.qq.com/v3/widget.html">QQ 推广</a></p>
<p>看官方给出的代码，提取链接利用就行。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230503192749818.png" alt="image-20230503192749818"></p>
<p>试试代码：</p>
<blockquote>
<p>[!warning] 此处出现了链接格式错误[2023.09.30]<br>
可能由于Obsidian的更新，把形如<code>&lt;a&gt;&lt;img /&gt;&lt;/a&gt;</code>的HTML自主替换为**[![]()]()**的形式。从而又导致某些Hexo渲染器渲染出错。因此现把出错部分用代码块框起来。（反正这东西过时了，原图片你也预览不到了）</p>
</blockquote>
<pre><code>[![点击这里给我发消息](http://wpa.qq.com/pa?p=2:2472963374:52 &quot;点击这里给我发消息&quot;)](http://wpa.qq.com/msgrd?v=3&amp;uin=2472963374&amp;site=qq&amp;menu=yes)

[![点击这里给我发消息](http://wpa.qq.com/pa?p=2:2472963374:51 &quot;点击这里给我发消息&quot;)](http://wpa.qq.com/msgrd?v=3&amp;uin=2472963374&amp;site=qq&amp;menu=yes)

[![点击这里给我发消息](http://wpa.qq.com/pa?p=2:2472963374:53 &quot;点击这里给我发消息&quot;)](http://wpa.qq.com/msgrd?v=3&amp;uin=2472963374&amp;site=qq&amp;menu=yes)
</code></pre>
<p>效果是这样的：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/imageee-36.png" alt=""></p>
<h4>三、QQ 邮箱-邮我</h4>
<p>QQ 邮箱首页：<a href="http://mail.qq.com">mail.qq.com</a></p>
<p>QQ 邮箱也有相应的组件，设置方法如下图所示：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/imagse-30.png" alt=""></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/imagse-31.png" alt=""></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-3s2.png" alt=""></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-as33.png" alt=""></p>
<p>点击“获取代码”，得到以下代码：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-s34.png" alt=""></p>
<p>可以发现，地址的部分是这样的：</p>
<p><a href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&amp;email=bRoaHF9dX1wtCwIVAAwEAUMOAgA">http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&amp;email=bRoaHF9dX1wtCwIVAAwEAUMOAgA</a></p>
<p>但是这个链接有一个不好的地方，就是用户的登录状态没有同步过来，导致需要重新点击登录入口进行登录，并且还会跳转到登录用户的邮箱首页，这样就把收信人给弄丢了。</p>
<p>效果如下：</p>
<p><a href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&amp;email=bRoaHF9dX1wtCwIVAAwEAUMOAgA"><img src="http://rescdn.qqmail.com/zh_CN/htmledition/images/function/qm_open/ico_mailme_22.png" alt=""></a></p>
<p>QQ 邮箱-邮我还有这样的一种链接：<a href="https://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&amp;email=wwq2021@foxmail.com">https://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&amp;email=wwq2021@foxmail.com</a></p>
<p>这种链接可读性好，而且还会保存登录状态。他的效果是这样的：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-3f5.png" alt=""></p>
<p>直接在输入框中写信，可随时发送。</p>


                
            </main>

            <footer class="list-content-container">
                

                
            </footer>
        </article>
        
        <article id="3260727180" class="record">
            <header>
                <h1 class="record-title">软件测试工具Junit、Hamcrest、Eclemma的安装</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>3260727180</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>工具箱, undefined</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('Eclemma');">Eclemma</button>
                    
                    <button class="btn" onclick="activeTag('Eclipse');">Eclipse</button>
                    
                    <button class="btn" onclick="activeTag('Hamcrest');">Hamcrest</button>
                    
                    <button class="btn" onclick="activeTag('IDEA');">IDEA</button>
                    
                    <button class="btn" onclick="activeTag('Junit');">Junit</button>
                    
                    <button class="btn" onclick="activeTag('安装');">安装</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>3/14/2022</span>
                </div>
                

                

                
                <div class="record-description">
                    <span>description :</span>
                    <span>在Eclipse、IDEA平台下，安装软件测试工具Junit、Hamcrest、Eclemma。</span>
                </div>
                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://typora-1301301520.cos.ap-nanjing.myqcloud.com/img/Junit.jpeg</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>c25abf8c</span>
                </div>
                
            </header>

            <main class="record-content">
                <h1>IDEA Junit和Hamcrest的安装</h1>
<p>下载Junit和hamcrest的.jar包。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-3s7.png" alt=""></p>
<p>打开IntelliJ IDEA 2021.1.2 (Community Edition)，打开文件菜单下的Project Structure：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220314154252.png" alt=""></p>
<p>选择添加依赖：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220314154616.png" alt=""></p>
<p>选择需要添加的jar包。</p>
<blockquote>
<p>[!error] 图片失效<br>
此处原图片地址为<a href="http://60.205.223.216/wp-content/uploads/2022/03/QQ%E6%88%AA%E5%9B%BE20220314154509.png">http://60.205.223.216/wp-content/uploads/2022/03/QQ截图20220314154509.png</a></p>
</blockquote>
<p>点击“OK”确认即可。同理添加hamcrest。添加完成后，点击“应用”、“OK”即可。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220314154723.png" alt=""></p>
<h1>Eclipse中Junit、Hamcrest的安装</h1>
<p>右击项目文件夹，打开Properties。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE-2022-03-14-195204.png" alt=""></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220314195402.png" alt=""></p>
<p>按照图示添加.jar文件即可。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220314195704.png" alt=""></p>
<h1>Eclipse中Eclemma的安装</h1>
<p>Eclemma的安装方式，在插件官网上提供了三种：<a href="https://www.eclemma.org/installation.html">EclEmma - Installation</a>。现介绍线上安装方法和本地安装方法：</p>
<h2>通过Eclipse Marketplace进行安装</h2>
<p>打开Eclipse Marketplace：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE-2022-03-14-202523.png" alt=""></p>
<p>搜索插件并安装：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220314202635.png" alt=""></p>
<h2>使用手工的方式进行安装</h2>
<p>把下载好的压缩包解压至Eclipse安装目录下dropins文件夹中，效果如下：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-3d8.png" alt=""></p>
<p>文件结构如下：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/imagre-39.png" alt=""></p>
<p>重启Eclipse，发现新增图标即说明安装成功。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-4asd0.png" alt=""></p>
<p>参考：</p>
<p><a href="https://blog.csdn.net/lee_x_lee/article/details/108024258">IDEA 导入Junit.jar 包 ，使用 Junit 单元测试过程_lee_x_lee的博客-CSDN博客_idea导入junit包</a></p>
<p><a href="https://blog.csdn.net/weixin_35676745/article/details/114105390">java junit安装_Eclipse中安装和配置使用Junit_大圣南佳境的博客-CSDN博客</a></p>
<p><a href="https://blog.csdn.net/lnpypy/article/details/52447097">Eclipse安装EclEmma插件_lnpypy的博客-CSDN博客</a></p>


                
            </main>

            <footer class="list-content-container">
                

                
            </footer>
        </article>
        
        <article id="3910313174" class="record">
            <header>
                <h1 class="record-title">免费高效制作精美词云（Python、wordart）</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>3910313174</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>工具箱</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('Python');">Python</button>
                    
                    <button class="btn" onclick="activeTag('实现');">实现</button>
                    
                    <button class="btn" onclick="activeTag('词云');">词云</button>
                    
                    <button class="btn" onclick="activeTag('词频统计');">词频统计</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>3/17/2022</span>
                </div>
                

                

                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://typora-1301301520.cos.ap-nanjing.myqcloud.com/img/wordcloud-cover.png</span>
                </div>
                
                <div class="record-description">
                    <span>description :</span>
                    <span>使用Python进行词频统计后，进入第三方网站导入统计数据生成词云。</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>e912a4d6</span>
                </div>
                
            </header>

            <main class="record-content">
                <p>现在网上制作词云的工具太多，但是存在一个问题，就是免费的词云网站制作得丑、不支持中文、没有词频统计，收费的又感觉没那必要。现提供以下简单的词频统计+词云制作的方法。</p>
<p>首先，用到免费的词云制作网站为<a href="http://wordart.com">wordart.com</a>，是个外国网站，需要导入词频统计数据。里面包含的词云调整功能丰富，可以自定义的地方很多，大家可以自己探索。</p>
<p>关于中文词频统计，则采用Python库进行。这里用到的是jieba第三方库，分词较准，灵活操作性强。脚本我已经编写好了，大家只需照做即可 。</p>
<p>[TOC]</p>
<h4>一、中文词频统计</h4>
<p>编写以下Python脚本：</p>
<pre><code class="language-python">import csv
import re
import jieba
import jieba.posseg as pseg

in_file_name = &quot;text.txt&quot;                   # 要分析的文本
user_dict_name = &quot;user_dict.txt&quot;            # 用户自定义词典
block_words_name = &quot;block_words.txt&quot;        # 屏蔽词
out_file_name = 'out.csv'                   # 词频统计数据的输出
block_word_class = [&quot;c&quot;,&quot;uj&quot;,&quot;p&quot;,&quot;r&quot;,&quot;ul&quot;]  # 屏蔽词性
regex = '^[\u4E00-\u9FA5A-Za-z0-9]+$'       # 除去标点符号，只保留中英文和数字

data = open(in_file_name, &quot;r&quot;, encoding='utf-8').read()     # 打开文件
jieba.load_userdict(user_dict_name)                         # 加载用户自定义词典
seg_list = pseg.cut(data,use_paddle=True)                   # 默认是精确模式
block_words_file = open(block_words_name,&quot;r&quot;,encoding=&quot;utf-8&quot;)  # 打开屏蔽词库
reader = csv.reader(block_words_file)
block_words = [w[0] for w in reader]                        # 生成屏蔽词列表
words = {}

# 统计
for str,flag in seg_list:
    # 屏蔽词、屏蔽词性
    if flag in block_word_class or str in block_words:
        continue
    if re.search(regex, str):
        try:
            words[str]
        except KeyError:
            words[str] = 0
        words[str] = words[str] + 1

# 写
out = open(out_file_name, 'w', newline=&quot;&quot;, encoding=&quot;utf-8&quot;)  # 注意，这里使用&quot;w&quot;不是&quot;wb&quot;，否则报错
writer = csv.writer(out,delimiter=&quot;\t&quot;)
for k, v in sorted(words.items(), key=lambda k: k[1], reverse=True):
    writer.writerow([k,v])
</code></pre>
<p>代码的第一段可根据自己的需求进行更改。现对这些参数进行解释。</p>
<h5>1. 需要分析的文本文件 in_file_name</h5>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220317163304.png" alt=""></p>
<p>在同目录下准备以下三个文件：需要分析的文本文件、用户自定义词典、屏蔽词库。将需要分析的文本文件名填入in_file_name中。</p>
<p>示例中，test.txt包含需要词频统计的内容。</p>
<h5>2. 用户自定义词典 user_dict_name</h5>
<p>此处脚本中，使用jieba默认的精确模式，会自动识别新词。但如果自己想添加自定义的词，可以在新的文本文件（utf-8）中按照以下方式进行添加：</p>
<pre><code>创新办 3 i
云计算 5
凱特琳 nz
台中
</code></pre>
<p>一个词占一行；每一行分三部分：词语、词频（可省略）、词性（可省略），用空格隔开，顺序不可颠倒。</p>
<p>词性表参见<a href="https://github.com/fxsjy/jieba">fxsjy/jieba: 结巴中文分词 (github.com)</a></p>
<p>比如：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220317163312.png" alt=""></p>
<p>关于jieba库的使用参见：<a href="https://github.com/fxsjy/jieba">fxsjy/jieba: 结巴中文分词 (github.com)</a></p>
<h5>3. 屏蔽词库 block_words_name</h5>
<p>新建一个文本文件，在里面添加不需要进行词频统计的词。一行一词。</p>
<p>比如：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220317163322.png" alt=""></p>
<h5>4. 输出的.csv文件名 out_file_name</h5>
<p>指定输出的.csv文件名。</p>
<h5>5.（可选）屏蔽词性block_word_class</h5>
<p>指定不需要进行词频统计的词的词性。词性列表参见下文。这里默认屏蔽连词、助词、介词、代词。</p>
<h5>6.（可选）保留词的正则表达式 regex</h5>
<p>指定需要进行词频统计的词的正则表达式。这里默认为中文、英文和数字。</p>
<p>当一切准备好后，运行脚本。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220317163500.png" alt=""></p>
<p>输出：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220317163340.png" alt=""></p>
<h4>二、WordArt网站设置</h4>
<p>运行以上脚本，复制输出的内容后。打开网站<a href="https://wordart.com/create">Word Art - Edit - WordArt.com</a>。</p>
<h5>1. 导入统计信息</h5>
<p>点击导入：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220317163024.png" alt=""></p>
<p>粘贴，并按照以下设置：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220317163052.png" alt=""></p>
<p>导入成功：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220317163100.png" alt=""></p>
<p>其他自定义操作可自行在网站上操作。</p>
<h5>2. 导入字体</h5>
<p>网站支持英文词云。如果想让中文词云也能生成，就必须上传一款中文字体。中文字体可以在系统字体（Fonts文件夹）中找：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/%E9%80%89%E6%8B%A9%E5%AD%97%E4%BD%93-1024x360.png" alt=""></p>
<p>导入字体后：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220317162823.png" alt=""></p>
<h5>3. 选择形状</h5>
<p>可以在网站图库中选。这里我采用自己上传的方式。注意，上传PNG图片更好。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220317162957-1024x753.png" alt=""></p>
<p>至于词云中其他自定义设定可以自行探索。</p>
<h5>4. 生成</h5>
<p>准备好了之后，点击生成按钮。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220317162704.png" alt=""></p>
<p>当当当当！生成成功。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/res.png" alt=""></p>
<h4>参考连接</h4>
<p>不同的词频统计第三方库：<a href="https://www.jianshu.com/p/7ad0cd33005e">Python中文分词及词频统计 - 简书 (jianshu.com)</a></p>
<p>csv库官方文档：<a href="https://docs.python.org/3/library/csv.html">csv — CSV File Reading and Writing — Python 3.10.2 documentation</a></p>


                
            </main>

            <footer class="list-content-container">
                

                
            </footer>
        </article>
        
        <article id="2466246546" class="record">
            <header>
                <h1 class="record-title">解决 WordPress「在裁剪您的图像时发生了错误」的问题</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>2466246546</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>WordPress</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('CentOS');">CentOS</button>
                    
                    <button class="btn" onclick="activeTag('PHP');">PHP</button>
                    
                    <button class="btn" onclick="activeTag('php-gd');">php-gd</button>
                    
                    <button class="btn" onclick="activeTag('PNG');">PNG</button>
                    
                    <button class="btn" onclick="activeTag('问题解决');">问题解决</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>3/17/2022</span>
                </div>
                

                

                
                <div class="record-description">
                    <span>description :</span>
                    <span>注意安装php-gd库后，检查你上传文件的大小。</span>
                </div>
                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/WPPIC.png</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>92ffef92</span>
                </div>
                
            </header>

            <main class="record-content">
                <p>一开始出现“裁剪图像发生错误”这个问题，其实是因为没装 php-gd 库导致的。</p>
<p>在 CentOS 下运行：</p>
<pre><code class="language-shell">yum install php-gd
</code></pre>
<p>然后重启 Apache 即可。</p>
<p>但这解决了一部分问题而已。我试着上传 PNG 网站图标，还是出现“<strong>裁剪您的图像时发生了错误</strong>。”，但是 jpg 类型的又可以。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/imagasde-42.png" alt=""></p>
<p>百思不得其解，后来才发现，注意图片大小就行了。。。。。最后我上传了 512*512 的 PNG 图片。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/imagasde-41%20(1).png" alt=""></p>
<h1>本文参考</h1>
<ul>
<li><a href="https://blog.csdn.net/wbryfl/article/details/82750929">WordPress 提示&quot;在裁剪您的图像时发生了错误&quot;解决方案_wbryfl 的博客-CSDN 博客_wordpress 裁剪图像发生错误</a></li>
<li><a href="https://wordpress.stackexchange.com/questions/302291/there-has-been-an-error-cropping-your-image-when-cropping-image">&quot;There has been an error cropping your image&quot; when cropping image - WordPress Development Stack Exchange</a></li>
</ul>


                
            </main>

            <footer class="list-content-container">
                

                
            </footer>
        </article>
        
        <article id="3538365946" class="record">
            <header>
                <h1 class="record-title">旧页面-友链</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>3538365946</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>Zone of archive, undefined</span>
                </div>

                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>3/18/2022</span>
                </div>
                

                

                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>d2e72dfa</span>
                </div>
                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/achived-cover.png</span>
                </div>
                
            </header>

            <main class="record-content">
                <blockquote>
<p>[!Warning] 这是一篇归档文章<br>
本页面已停止更新，仅起历史归档作用。</p>
</blockquote>
<h1>想加uuanqin.top为友链</h1>
<p>欢迎各位大佬、爱好者添加uuanqin.top为友情链接！</p>
<p><strong>本网站地址为：<a href="http://uuanqin.top/">uuanqin.top</a></strong></p>
<p><strong>网站名称：半方池水半方田。</strong></p>
<p><strong>简介：一个技术分享及生活分享的个人博客网站。</strong></p>
<p>如果想要显示本网站logo，需遵循基本的视觉系统（详看文章尾）。</p>
<p>基本HTML框架：</p>
<pre><code class="language-html">&lt;a href=&quot;https://www.uuanqin.top&quot;&gt;&lt;img src=&quot;https://cdn.gallery.uuanqin.top/img/logo-bc.png&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;
</code></pre>
<h1>想让自己的网站放在uuanqin.top“友情链接”栏中</h1>
<h2>下方发评论</h2>
<p>直接评论以下内容即可：</p>
<ul>
<li>网站名称</li>
<li>网址（最好是HTTPS哦）</li>
<li>图标地址（可选）</li>
<li>简介</li>
</ul>
<h2>其他方式</h2>
<p>通过右侧联系方式发送以下内容：</p>
<ul>
<li>主题。备注<strong>加友链</strong>。</li>
<li>网站链接、网站名称、网站主要内容（一两句话介绍）</li>
<li>站长</li>
<li>（可选）Logo及其图片代码</li>
<li>（可选）其他补充说明。网站详细介绍，模板添加等。</li>
</ul>
<p>很快我会回复并着手添加~期待你的来信~！</p>
<h1>附：本站视觉系统</h1>
<p>使用的图片链接即为下方的图片链接。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/logo-bc.png" alt="标准网站标识（彩），适合浅底背景"></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/logo-dc.png" alt="彩色，适合深色背景"></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/logo-dw.png" alt="单色（浅色），适合深色背景"></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/A%E5%85%A8%E5%BD%A9%E6%97%A0%E5%AD%97.png" alt="单一标识，各种场景均可灵活使用"></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/A%E5%85%A8%E7%99%BD%E6%97%A0%E5%AD%97.png" alt="其他款式（白）"></p>


                
            </main>

            <footer class="list-content-container">
                

                
            </footer>
        </article>
        
        <article id="713171771" class="record">
            <header>
                <h1 class="record-title">误操作 WordPress 站点地址的解决方案</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>713171771</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>WordPress</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('MySQL');">MySQL</button>
                    
                    <button class="btn" onclick="activeTag('搬运');">搬运</button>
                    
                    <button class="btn" onclick="activeTag('问题解决');">问题解决</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>3/18/2022</span>
                </div>
                

                

                
                <div class="record-description">
                    <span>description :</span>
                    <span>登录MySQL修改WordPress设置即可。</span>
                </div>
                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/WPPIC.png</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>2a82233b</span>
                </div>
                
            </header>

            <main class="record-content">
                <p>刚才不小心改了站点地址。改成uuanqin.top。因为没有备案，所有网站登不上去了。现找到解决方法留作备忘，同时加深WordPress与MySQL的理解。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-44-1024x167.png" alt=""></p>
<p>WordPress地址(URL)，不能随便更改！</p>
<p>在后台的设置里，WordPress地址（URL）是不能随便更改的，只有站点地址（URL）可以随意动。如果更改了WordPress地址（URL），主页面可能就丢失了。</p>
<h4>解决方案</h4>
<p>1、使用ssh登录服务</p>
<p>2、登录MySQL数据库</p>
<p>使用如下指令后，输入密码，打开mysql数据库：</p>
<pre><code class="language-sh">mysql -u root -p
</code></pre>
<p>3、选中wordpress的数据库</p>
<p>USE wordpress;（如果你没改名）</p>
<p>4、查看wp_contens表单</p>
<pre><code class="language-sql">select * from wp_options limit 1;
</code></pre>
<p>可以看到option_value这个属性值，如果WordPress地址（URL）修改错误，这个option_value就会变成那个错误的地址而无法再从后台更改，我们可以在数据库中对齐更改。</p>
<p>5、更改option_values</p>
<p>使用如下指令即可完成更改。your_wordpress_url为正确的WordPress地址（URL）。</p>
<pre><code class="language-sql">UPDATE wp_options SET option_value=&quot;your_wordpress_url&quot; WHERE option_name=&quot;siteurl&quot;;
</code></pre>
<p>更改完，就可以正常登陆主页了。</p>
<p>搬运：<a href="https://www.cnblogs.com/cfsxgogogo/p/11779327.html">误操作WordPress地址(URL)，主页丢失解决方案 - 菜风少侠 - 博客园 (cnblogs.com)</a></p>


                
            </main>

            <footer class="list-content-container">
                

                
            </footer>
        </article>
        
        <article id="4244887792" class="record">
            <header>
                <h1 class="record-title">mujava的安装与使用</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>4244887792</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>工具箱, undefined</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('Eclipse');">Eclipse</button>
                    
                    <button class="btn" onclick="activeTag('Junit');">Junit</button>
                    
                    <button class="btn" onclick="activeTag('mujava');">mujava</button>
                    
                    <button class="btn" onclick="activeTag('安装');">安装</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>3/19/2022</span>
                </div>
                

                

                
                <div class="record-description">
                    <span>description :</span>
                    <span>mujava的详细安装与使用方法，以及各种问题的解决。</span>
                </div>
                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://typora-1301301520.cos.ap-nanjing.myqcloud.com/img/mujava.png</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>fd03d8f0</span>
                </div>
                
            </header>

            <main class="record-content">
                <p>mujava是一款用于变异测试的工具，官网上附有完整的安装和使用教程：<a href="https://cs.gmu.edu/~offutt/mujava/">muJava Home Page (gmu.edu)</a>。但在实际操作中，还是会遇到许多种问题。现将我实践过的安装教程详述如下。</p>
<h4>文件下载</h4>
<p>官网上下载这些东西：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-4as5.png" alt=""></p>
<p>实际上，mujava.config里面就一句话。自己复制过来在新建一个就行。</p>
<p>mujava.config里的默认内容：</p>
<pre><code>MuJava_HOME=C:\offutt\mujava
</code></pre>
<h4>目录准备</h4>
<p>这部分主要是动手环节（官网上就是动手.......）。在你想让mujava安装的地方，新建一个目录。比如：D:\mujava。</p>
<p>在D:\mujava里新建4个文件夹：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-asd46.png" alt=""></p>
<p>classes：存放编译好的Java源程序.class文件</p>
<p>result：mujava生成的结果文件（变异体）</p>
<p>src：待测的Java程序代码</p>
<p>testset：JUnit测试用例的.class文件</p>
<p>把mujava.config放到D:\mujava中。里边的内容改为：</p>
<pre><code>MuJava_HOME=D:\mujava
</code></pre>
<p>在D:\mujava中新建两个.txt文件，编写后续用到的命令。写好后改为.cmd文件。（注意，这里保证运行的mujava目录要包含mujava.config）</p>
<pre><code>GenMutants.cmd: java mujava.gui.GenMutantsMain
RunTest.cmd: java mujava.gui.RunTestMain &gt; TestResult.txt
</code></pre>
<p>把涉及到的包全部放进来（D:\mujava下）：JUnit、Hamcrest、mujava.java、openjava.java、tools.java。</p>
<p>JUnit、Hamcrest包另外在相应官网上下载；mujava.java、openjava.java是刚刚在mujava官网上下的；tools.jar在你配置的Java环境中自带的包（是Java的标准文件）。</p>
<p>比如我的tools.jar在这里（我的Java版本为1.8，据说Java版本过高可能导致失败）：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-4asd7.png" alt=""></p>
<p>关于这部分，官网是这样描述的：</p>
<blockquote>
<p><a href="https://cs.gmu.edu/~offutt/mujava/">muJava Home Page (gmu.edu)</a>:</p>
<p>The Java CLASSPATH must include two <strong><em>µJava</em></strong> jar files and one standard Java jar file. <strong>tools.jar</strong> is standard with Java (JDK) compilers and is probably located in the &quot;JavaHome/lib/&quot; directory. The two <strong><em>µJava</em></strong> files are <strong>mujava.jar</strong> and <strong>openjava.jar</strong>, which are downloaded from this site.</p>
</blockquote>
<p>上述引用中，所谓的_JavaHome_可以在环境变量里查询，一般你安装Java环境时都会配的。</p>
<p>这样，最终你的D:\mujava会是这样的：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-sa48.png" alt=""></p>
<h4>环境</h4>
<p>打开控制面板，搜索环境变量：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-49-1024x453.png" alt=""></p>
<p>编辑系统环境变量。如果没有CLASSPATH就新建一个：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/imageas-50.png" alt=""></p>
<p>比如这样：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-51as.png" alt=""></p>
<h4>使用</h4>
<p>在src放入需要测试的Java源文件，<strong>注意包结构</strong>！</p>
<p>在classes放入待测试文件编译好的.class文件，<strong>注意包结构</strong>！</p>
<p>在testset放入JUnit测试文件编译好的.class文件，<strong>注意包结构</strong>！</p>
<p>双击运行GenMutants.cmd，出现以下GUI界面：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-52as.png" alt=""></p>
<p>运行结果：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-56-1024x473.png" alt=""></p>
<p>双击运行RunTest.cmd，弹出另外一个GUI界面。开始进行测试：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-5as3.png" alt=""></p>
<p>点击RUN即可运行。等待电脑风扇猛转后，结果就生成了。</p>
<p>（不知为什么，JUnit测试用例采用参数化的方式的话会报错。。。）</p>
<p>注意，小黑框里面会显示程序的运行状态，如果报错（比如找不到JUnit、Hamcrest包时）记得检查环境变量有没有配置好。</p>
<p>运行结果：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/imageasd-57.png" alt=""></p>
<p>详细的测试结果可在TestResult.txt中查看。</p>
<h4>其他问题</h4>
<h5>目录结构问题</h5>
<p>关于目录结构问题，就是你在测试文件、被测试文件的包的关系，复制到mujava相应文件夹时要一致。否则会报错。下图是正确的例子：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-5asd4.png" alt=""></p>
<blockquote>
<p>[!error] 图片缺失<br>
此位置图片缺失，原图片地址为 <a href="http://60.205.223.216/wp-content/uploads/2022/03/image-55.png">http://60.205.223.216/wp-content/uploads/2022/03/image-55.png</a></p>
</blockquote>
<p>如果在运行测试用例杀死变异体过程中，出现诸如找不到类、空指针异常，可以试试重新运行命令多试几次。。</p>
<h5>检查Java版本</h5>
<blockquote>
<p>官网：Potential problems**: We have identified several potential problems with installing <em>µJava</em>.**</p>
<p>It is important that the MuJava_HOME variable <strong>NOT</strong> have a trailing slash. This will confuse <strong><em>µJava</em></strong>.<br>
If you have a different version of the java compiler and the JVM, <strong><em>µJava</em></strong> may get confused. This happens sometimes when a new application on your computer updates the JVM. If you have problems compiling or killing mutants, we suggest deleting all Java components and reinstalling the latest version.<br>
If your tools.jar file is out of date (pre Java 1.4, we think), parts of <strong><em>µJava</em></strong> may not work.</p>
</blockquote>
<h5>杀不死变异体</h5>
<p>有少数童鞋反映测试用例杀不死变异体，MS得分为0%。</p>
<p>在确认你的测试类编写对的情况下，请再次做这个检查：检查你的环境变量里，是不是把classes文件夹写了进去。请确保CLASSPATH里边<strong>没有</strong>D:/mujava/classes文件夹。</p>
<h4>参考链接</h4>
<p>mujava官网：<a href="https://cs.gmu.edu/~offutt/mujava/">muJava Home Page (gmu.edu)</a></p>
<p>安装和使用方法（中文）：<a href="https://blog.csdn.net/wkw1125/article/details/51967630">使用muJava进行变异测试_wkw1125的博客-CSDN博客_mujava</a></p>


                
            </main>

            <footer class="list-content-container">
                

                
            </footer>
        </article>
        
        <article id="2346883624" class="record">
            <header>
                <h1 class="record-title">成为一名个人博客网站站长</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>2346883624</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>社会生活</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('ECS');">ECS</button>
                    
                    <button class="btn" onclick="activeTag('ICP');">ICP</button>
                    
                    <button class="btn" onclick="activeTag('LAMP');">LAMP</button>
                    
                    <button class="btn" onclick="activeTag('备案');">备案</button>
                    
                    <button class="btn" onclick="activeTag('实现');">实现</button>
                    
                    <button class="btn" onclick="activeTag('阿里云');">阿里云</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>3/21/2022</span>
                </div>
                

                

                
                <div class="record-description">
                    <span>description :</span>
                    <span>个人博客网站建站的全流程以及要点提醒，以ECS阿里云服务器申请为例。</span>
                </div>
                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/pexels-pixabay-270700.jpg</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>8be29a28</span>
                </div>
                
            </header>

            <main class="record-content">
                <p>今天（2022 年 3 月 21 日）uuanqin.top 终于通过 ICP 备案了！现分享从 0 建站时我经历的步骤以及参考资料，为大家铺铺路。</p>
<blockquote>
<p>[!hint] 提示<br>
本文章关注于分享本网站建站所需最基本的事项，流程仅供参考。环境、软件、云服务商等服务的选择可自行决定</p>
</blockquote>
<h1>基本准备</h1>
<ul>
<li>
<p>🏹 前置技能：LINUX 基础，HTML 基础。</p>
</li>
<li>
<p>💰 资金：100 元以下/<strong>首年</strong>。（附下表：服务器与域名花费一览）</p>
</li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th>首年</th>
<th>第二年</th>
</tr>
</thead>
<tbody>
<tr>
<td>ECS 花费（元）</td>
<td>87.12</td>
<td>87.12（建议在快到期的时候续费）</td>
</tr>
<tr>
<td>域名花费（元）</td>
<td>1</td>
<td>29</td>
</tr>
<tr>
<td><strong>总计</strong></td>
<td>88.12</td>
<td>116.12</td>
</tr>
</tbody>
</table>
<ul>
<li>📦 其他：满十八岁。身份证正反面照、手持身份证证件照。</li>
</ul>
<h1>购买云服务器</h1>
<p>本站部署在阿里云服务器。阿里云服务器的购买指路：</p>
<p><a href="https://www.aliyun.com/product/ecs?spm=5176.19720258.J_8058803260.30.5c642c4aMBUVZE">云服务器 ECS_云主机_服务器托管_弹性计算-阿里云 (aliyun.com)</a></p>
<p>注意：如果要 ICP 备案，ECS 至少买 <strong>3 个月</strong>以上。关于备案可看<a href="#%E5%9B%9B%E3%80%81icp%E5%A4%87%E6%A1%88">ICP 备案</a>。</p>
<blockquote>
<p>来源于阿里云帮助文档：<a href="https://help.aliyun.com/document_detail/150522.html">使用云市场镜像搭建 WordPress (aliyun.com)</a></p>
<p>如果要备案，您购买的 ECS 实例需包月 3 个月及以上（包含续费），且有公网带宽。</p>
</blockquote>
<p>可以选择的国内云服务商还有：腾讯云、华为云等。</p>
<p>购买服务器后，对 ECS 实例进行初步配置，比如设置密码等：<a href="https://help.aliyun.com/product/25365.html">云服务器 ECS (aliyun.com)</a></p>
<p>若需要安装图形化界面，请参考：<br>
<a href="https://help.aliyun.com/document_detail/151830.htm?spm=a2c4g.11186623.0.0.47b6337bquJalP">如何在 CentOS 8 系统的 ECS 实例中安装图形界面 (aliyun.com)</a><br>
<a href="https://blog.csdn.net/lsbhjshyn/article/details/25652235">yum groupinstall &quot;X Window System&quot; -y 出错，提示 Error Summary 错误解决方法_Logger 的博客-CSDN 博客</a><br>
<a href="https://blog.csdn.net/weixin_43945453/article/details/105700809">安装和卸载 CentOS7 图形界面_● 百点热的博客-CSDN 博客_centos7 卸载图形界面</a></p>
<h1>搭建博客环境</h1>
<p>我想搭一个 Wordpress 博客网站：<a href="#930915372" title="在 ECS 中搭建 WordPress" class="record-link">在 ECS 中搭建 WordPress</a><br>
我想搭一个 Hexo 博客网站：<a href="#181570378" title="部署 Hexo 个人博客框架到服务器" class="record-link">部署 Hexo 个人博客框架到服务器</a></p>
<h1>购买域名</h1>
<p>如果选择在阿里云购买域名，那么首先，需要在阿里云进行身份信息核验。【核验实际用时：当天完成】</p>
<blockquote>
<p>来源：<a href="https://help.aliyun.com/noticelist/articleid/1060990693.html?spm=5176.100251.111252.38.421a4f15wxgFAp">阿里云帮助中心-阿里云，领先的云计算服务提供商 (aliyun.com)</a></p>
<p>自 2022 年 2 月 15 日起，域名注册将采用先完成域名持有者身份信息核验、再注册域名的方式。即在域名新注时，必须选择已完成实名核验的<a href="https://help.aliyun.com/document_detail/35898.html">域名注册信息模板</a>，否则将无法提交域名注册订单。</p>
</blockquote>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-61-1024x260.png" alt=""></p>
<p>域名注册：<a href="https://wanwang.aliyun.com/domain/?spm=5176.100251.111252.14.421a4f15wxgFAp">域名注册_域名查询_域名申请_域名购买_域名续费_国际域名-万网-阿里云旗下品牌 (aliyun.com)</a></p>
<p>域名注册成功后记得设置域名解析：<a href="https://help.aliyun.com/document_detail/29716.html?spm=a2c4g.11186623.0.0.37fc1f12nXmqC1">新手引导 (aliyun.com)</a></p>
<p>如果需要域名转入等其他操作，请详细查看阿里云的帮助手册。</p>
<h1>ICP 备案</h1>
<p>阿里云可以免费帮你提交备案申请。</p>
<p>备案前准备：下载<strong>阿里云 APP</strong>，准备好身份证。不管是在 PC 端备案还是在 APP 备案，最后还是会回到手机 APP 上，因为需要人脸核验和上传身份证图片。</p>
<p>注意：域名剩余有效期至少大于 <strong>3 个月</strong>，ECS 实例剩余有效期至少大于 <strong>3 个月</strong>。</p>
<p>基本流程：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-59.png" alt=""></p>
<p>阿里云初审：约 3 个工作日之后，会有阿里云售后客服打电话过来确认信息。确认身份证号、备案网站、应急联系电话等信息。【实际用时：提交备案后 1 个非工作日（在这里点赞阿里云）】</p>
<p>工信部短信核验：工信部会发来验证码，需要在 24 小时内到它的网站上进行核验。【实际用时：打电话过来后的下一天】</p>
<p>管局审核：等待通过的短信。【实际用时：7 天】</p>
<p>备案成功后，悬挂备案号：<a href="https://help.aliyun.com/document_detail/146190.html?spm=a2c4g.11174386.n2.5.1bb94c07c6Tdwj#title-1oz-nkb-91m">ICP 备案后处理 (aliyun.com)</a></p>
<p>懂点 HTML 的自己挂就好，不用花钱请别人挂。。。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220321112508-1024x413.png" alt=""></p>
<p>不要花这个钱</p>
<p>提交备案到成功备案中间经过的时间，阿里云会补偿到服务器中（此处点赞阿里云 again）。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-60.png" alt=""></p>
<p>随后将进行公安联网备案。</p>
<h1>公安联网备案</h1>
<p><a href="https://help.aliyun.com/document_detail/43898.html?spm=5176.21213303.J_6704733920.7.662453c9QlATVe&amp;scm=20140722.S_help%40%40%E6%96%87%E6%A1%A3%40%4043898.S_0%2Bos.ID_43898-RL_%E5%85%AC%E5%AE%89-LOC_helpmain-OR_ser-V_2-P0_0">公安联网备案 (aliyun.com)</a></p>
<p>准备好身份证正反面照片、手持身份证件照、域名证书。注意调整文件大小。</p>
<p>进入<a href="http://www.beian.gov.cn/portal/index.do">全国互联网安全管理服务平台</a>，在<strong>下载中心</strong>找到并下载  《互联网站安全服务平台操作指南》，按照操作指南进行备案。</p>
<p>提交审核后，静候佳音。【实际用时：5 天】</p>
<p>它这里不会发短信或邮件提醒你备案情况，你要自己到网站上查看消息。个人网站的话，即使是交互式网站，也没有人开视频联系你进行核实。点击已备案的网站，查看详情。接下来就要悬挂备案号：</p>
<blockquote>
<p>全国互联网安全管理服务平台</p>
<p>请务必在 30 个工作日之内“复制备案编号 HTML 代码”，粘贴到您网页源代码中的底部位置；“下载备案编号图标”，放在备案编号之前。</p>
</blockquote>
<p>它提供备案编号图标（小小的警徽）和 HTML 代码。悬挂格式如下：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-7sdf0.png" alt=""></p>
<p>它提供的代码真的很复杂，不如自己写。图片链接要自己加。点击链接会 自动跳到查询页面，并贴心地为你填好备案号。</p>
<p><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=12011202000621"><img src="https://cdn.gallery.uuanqin.top/img/%E5%A4%87%E6%A1%88%E5%9B%BE%E6%A0%87.png" alt="">津公网安备 12011202000621 号</a></p>
<pre><code class="language-html">&lt;div style=&quot;width:300px;margin:0 auto; padding:20px 0;&quot;&gt;
&lt;a target=&quot;_blank&quot; href=&quot;http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=12011202000621&quot; style=&quot;display:inline-block;text-decoration:none;height:20px;line-height:20px;&quot;&gt;&lt;img src=&quot;&quot; style=&quot;float:left;&quot;/&gt;&lt;p style=&quot;float:left;height:20px;line-height:20px;margin: 0px 0px 0px 5px; color:#939393;&quot;&gt;津公网安备 12011202000621号&lt;/p&gt;&lt;/a&gt;
&lt;/div&gt;
</code></pre>
<h1>成功</h1>
<p>OK，一切手续似乎都办妥啦！可以尽情探索建站乐趣了。</p>
<h1>结语</h1>
<p>下面介绍的就是小小站长维护和建设自己网站需要了解的内容。</p>
<h2>站长管理工具</h2>
<ul>
<li>
<p>百度：<a href="https://ziyuan.baidu.com/indexs/index?site=http://www.uuanqin.top/">搜索资源平台</a></p>
</li>
<li>
<p>必应：<a href="https://www.bing.com/webmasters?siteUrl=http%3A%2F%2Fwww.uuanqin.top%2F">WebMaster</a></p>
</li>
<li>
<p>谷歌：<a href="https://search.google.com/search-console?resource_id=http%3A%2F%2Fwww.uuanqin.top%2F">Google Search Central（前身为“Google 网站站长”）</a></p>
</li>
<li>
<p>百度统计：<a href="https://tongji.baidu.com/web/10000451814/overview/index?siteId=17892348">百度统计 - 网站概况 (baidu.com)</a></p>
</li>
<li>
<p>微软的这个 Clarity 挺好玩的：<a href="https://clarity.microsoft.com/projects">Microsoft Clarity - Free Heatmaps &amp; Session Recordings</a></p>
</li>
</ul>
<p>注意维护友链、提高网站访问速度也有利于 SEO 排名。</p>
<h2>网站加速</h2>
<p>使用 CDN。</p>
<p>Wordpress： <a href="https://blog.csdn.net/lieweihan0913/article/details/95631632">【WordPress】 网站打开速度太慢了，两招解决_wordpress 太慢_辉哥笔记的博客-CSDN 博客</a></p>
<p>Hexo：<a href="#2065118013" title="国内访问Hexo优化加速-替换jsdelivr的CDN链接" class="record-link">国内访问Hexo优化加速-替换jsdelivr的CDN链接</a></p>
<h2>SSL 证书的获取与安装</h2>
<p>参看我的另一篇文章：<a href="#1867823418" title="Linux服务器添加SSL证书" class="record-link">Linux服务器添加SSL证书</a><br>
精华文章：<a href="#2201181434" title="博客域名解析管理与网站CDN加速域名配置" class="record-link">博客域名解析管理与网站CDN加速域名配置</a></p>
<h2>PHP 的更新</h2>
<p><a href="https://www.cnblogs.com/cinlap/p/12801076.html">CentOS8 下安装、卸载、切换 PHP 版本 - Cinlap Soft - 博客园 (cnblogs.com)</a></p>


                
            </main>

            <footer class="list-content-container">
                
                <details class="record-links">
                    <summary class="menu-title">
                        links
                        <span class="badge">5</span>
                    </summary>

                    <ul class="record-links-list">
                        
                        <li data-target-id="181570378">
                            <a href="#181570378">
                                <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                                
                                <span>部署 Hexo 个人博客框架到服务器</span>
                                <div class="record-links-context hover">
                                    <p>我想搭一个 Wordpress 博客网站：在 ECS 中搭建 WordPress<br>
我想搭一个 Hexo 博客网站：<span class="id-context" data-target-id="181570378">部署 Hexo 个人博客框架到服务器</span></p>

                                </div>
                            </a>
                        </li>
                        
                        <li data-target-id="930915372">
                            <a href="#930915372">
                                <span class="record-type-point" style="color: var(--n_wordpress);">⬤</span>
                                
                                <span>在 ECS 中搭建 WordPress</span>
                                <div class="record-links-context hover">
                                    <p>我想搭一个 Wordpress 博客网站：<span class="id-context" data-target-id="930915372">在 ECS 中搭建 WordPress</span><br>
我想搭一个 Hexo 博客网站：部署 Hexo 个人博客框架到服务器</p>

                                </div>
                            </a>
                        </li>
                        
                        <li data-target-id="1867823418">
                            <a href="#1867823418">
                                <span class="record-type-point" style="color: var(--n_undefined);">⬤</span>
                                
                                <span>Linux服务器添加SSL证书</span>
                                <div class="record-links-context hover">
                                    <p>参看我的另一篇文章：<span class="id-context" data-target-id="1867823418">Linux服务器添加SSL证书</span><br>
精华文章：博客域名解析管理与网站CDN加速域名配置</p>

                                </div>
                            </a>
                        </li>
                        
                        <li data-target-id="2065118013">
                            <a href="#2065118013">
                                <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                                
                                <span>国内访问Hexo优化加速-替换jsdelivr的CDN链接</span>
                                <div class="record-links-context hover">
                                    <p>Hexo：<span class="id-context" data-target-id="2065118013">国内访问Hexo优化加速-替换jsdelivr的CDN链接</span></p>

                                </div>
                            </a>
                        </li>
                        
                        <li data-target-id="2201181434">
                            <a href="#2201181434">
                                <span class="record-type-point" style="color: var(--n_undefined);">⬤</span>
                                
                                <span>博客域名解析管理与网站CDN加速域名配置</span>
                                <div class="record-links-context hover">
                                    <p>参看我的另一篇文章：Linux服务器添加SSL证书<br>
精华文章：<span class="id-context" data-target-id="2201181434">博客域名解析管理与网站CDN加速域名配置</span></p>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                

                
            </footer>
        </article>
        
        <article id="930915372" class="record">
            <header>
                <h1 class="record-title">在 ECS 中搭建 WordPress</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>930915372</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>WordPress</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('ECS');">ECS</button>
                    
                    <button class="btn" onclick="activeTag('阿里云');">阿里云</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>3/21/2022</span>
                </div>
                

                

                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/WPPIC.png</span>
                </div>
                
                <div class="record-description">
                    <span>description :</span>
                    <span>简要介绍ECS中Wordpress的搭建</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>377ca42c</span>
                </div>
                
                <div class="record-top_img">
                    <span>top_img :</span>
                    <span></span>
                </div>
                
            </header>

            <main class="record-content">
                <h1>环境搭建</h1>
<blockquote>
<p>你已经有了一台ECS，那么如何搭建Wordpress博客网站？</p>
</blockquote>
<p>本站通过手工安装的方式搭建开源组合LAMP环境：<a href="https://help.aliyun.com/document_detail/50774.html">部署LAMP环境（CentOS 7） (aliyun.com)</a> 其实也可以按照阿里云的教程使用WordPress镜像进行建站。</p>
<p>Wordpress的安装部署：<a href="https://help.aliyun.com/document_detail/151691.html">手动搭建WordPress（CentOS 7） (aliyun.com)</a> 包含设置域名、域名解析等步骤。</p>
<p>如果ICP未备案完成，WordPress中的设置中的站点地址和Wordpress地址为服务器的公网ip。ICP备案成功后再同时改过来。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-58-1024x231.png" alt=""></p>
<p>以下这种打开WordPress自定义时出现的错误就是WordPress地址和站点地址不一样导致的：<a href="https://developer.aliyun.com/ask/102267?spm=a2c6h.13159736">wordpress无法动态预览更改 显示Non-existent changeset UUID.-问答-阿里云开发者社区-阿里云 (aliyun.com)</a></p>
<h1>其他内容</h1>
<h2>SEO</h2>
<p>在wordpress，可以安装一款SEO插件，由它可指导关键词的安排与文章写作。然后向各搜索引擎提交网站的收录。</p>
<p><a href="https://blog.csdn.net/u013365886/article/details/80403100">如何让百度快速收录WordPress网站？_小柯2319184669的博客-CSDN博客</a></p>
<p><a href="https://yoast.com/what-is-an-xml-sitemap-and-why-should-you-have-one/#utm_source=yoast-seo&amp;utm_medium=software&amp;utm_term=features-xml-sitemap&amp;utm_content=dashboard&amp;utm_campaign=wordpress-general&amp;php_version=7.4&amp;platform=wordpress&amp;platform_version=5.9.1&amp;software=free&amp;software_version=18.4.1&amp;days_active=6-30&amp;screen=wpseo_dashboard">What is an XML sitemap and why should you have one? • Yoast</a></p>
<h2>Wordpress自动更新失效</h2>
<p>一个排查方向：登录后台&gt;工具&gt;站点健康，会有wordpress不能正常更新的说明。我的原因主要是wordpress没有权限写入文件夹内容。<code>chmod -R 777 &lt;文件夹&gt;</code>就好了。</p>
<h2>腾讯云COS工具</h2>
<p>大坑！使用腾讯云COS工具将附件上传到COS后（一般包括你的主体样式），找不到方法逆转。这意味着你删掉COS中的文件后，即使服务器保留有，也不懂有什么办法逆转。（暂时找不到办法）</p>


                
            </main>

            <footer class="list-content-container">
                

                
                <details class="record-backlinks" open="open">
                    <summary class="menu-title">
                        backlinks
                        <span class="badge">1</span>
                    </summary>

                    <ul class="record-backlinks-list">
                        
                        <li data-target-id="2346883624">
                            <a href="#2346883624">
                                <span class="record-type-point" style="color: var(--n_社会生活);">⬤</span>
                                
                                <span>成为一名个人博客网站站长</span>
                                <div class="record-links-context hover">
                                    <p>我想搭一个 Wordpress 博客网站：<span class="id-context" data-target-id="930915372">在 ECS 中搭建 WordPress</span><br>
我想搭一个 Hexo 博客网站：部署 Hexo 个人博客框架到服务器</p>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                
            </footer>
        </article>
        
        <article id="2555088146" class="record">
            <header>
                <h1 class="record-title">关于 wordPress 固定链接的修改以及 htaccess 文件不起作用问题的解决</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>2555088146</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>WordPress</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('Apache');">Apache</button>
                    
                    <button class="btn" onclick="activeTag('问题解决');">问题解决</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>3/23/2022</span>
                </div>
                

                

                
                <div class="record-description">
                    <span>description :</span>
                    <span>自己新建一个，注意设置好权限。如果失效，需要修改httpd的配置。</span>
                </div>
                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/WPPIC.png</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>984b8d12</span>
                </div>
                
            </header>

            <main class="record-content">
                <blockquote>
<p>[!warning] 注意<br>
修改固定链接可能会影响网站的 SEO 排名。请准备好解决方案并谨慎修改！</p>
</blockquote>
<p>因为安装了一个 WordPress 缓存插件，需要更改 WordPress 的固定链接。但是，WordPress 固定链接的更改出现了以下问题：</p>
<h1>无法写入.htaccess 文件</h1>
<p>这是由于权限设置所导致的。打开服务器，进入到 wordpress 的根目录，粘贴 wordpress 提供的内容到 .htaccess 文件。注意，开头带点的文件为隐藏文件，在 linux 下使用 ls 时注意加上选项 -a 以查看隐藏文件：</p>
<pre><code class="language-shell">ls -a
</code></pre>
<p>要查看隐藏文件的权限可以再加上-l 选项：</p>
<pre><code class="language-sh">ls -al
</code></pre>
<p>把.htaccess 的权限设置为 777：</p>
<pre><code class="language-sh">chmod -v 777 .htaccess
</code></pre>
<h1>没有.htaccess 文件</h1>
<p>如果没有 .htaccess 文件，可以自己新建一个（建在 wordpress 根目录下）。把 .htaccess 的权限设置为 777。这样 WordPress 就可以更改你的 .htaccess 文件了。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/conf%E5%86%85%E5%AE%B9%E5%A4%A7%E8%87%B4%E6%98%AF%E8%BF%99%E6%A0%B7%E7%9A%84-1024x543.png" alt=""></p>
<p>.htaccess 文件应该像这样</p>
<h1>.htaccess 文件不起作用</h1>
<p>即使 .htaccess 文件更改好了，检查之后也没有问题，但 .htaccess 就是不起作用。这时需要更改 httpd.conf。</p>
<p>找到 httpd.conf 位置：</p>
<pre><code class="language-bash">find / -name httpd.conf
</code></pre>
<p>vim 进行编辑，搜索 AllowOverride 参数。找到 https 站点的 Directory 设置 AllowOverride <strong>All</strong>。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220323225800-1024x637.png" alt=""></p>
<p>重启 httpd：</p>
<pre><code class="language-bash">service httpd restart
</code></pre>
<p>重新再 wordpress 固定链接设置里再保存一遍即可。</p>
<h1>参考链接</h1>
<ul>
<li><a href="https://www.wpbeginner.com/beginners-guide/why-you-cant-find-htaccess-file-on-your-wordpress-site/#:~:text=WordPress%20automatically%20generates.htaccess%20file%20because%20it%20is%20required,now%20try%20to%20generate%20the.htaccess%20file%20for%20you.">Why You Can't Find .htaccess File on Your WordPress Site (wpbeginner.com)</a></li>
<li><a href="https://blog.csdn.net/laoqiming/article/details/84311744">.htaccess 设置不起作用_劳启的博客-CSDN 博客_htaccess 不起作用</a></li>
</ul>


                
            </main>

            <footer class="list-content-container">
                

                
            </footer>
        </article>
        
        <article id="1018322944" class="record">
            <header>
                <h1 class="record-title">MAJOR的配置与基本使用</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>1018322944</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>工具箱, undefined</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('MAJOR');">MAJOR</button>
                    
                    <button class="btn" onclick="activeTag('WSL');">WSL</button>
                    
                    <button class="btn" onclick="activeTag('安装');">安装</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>3/24/2022</span>
                </div>
                

                

                
                <div class="record-description">
                    <span>description :</span>
                    <span>需要在Linux环境下才不会出现错误。请仔细研读MAJOR官方的PDF。</span>
                </div>
                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://typora-1301301520.cos.ap-nanjing.myqcloud.com/img/MAJOR.png</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>3cb26000</span>
                </div>
                
            </header>

            <main class="record-content">
                <p>MAJOR今天捣鼓了很久，呕心沥血才弄出来。。。没力气详述了。<strong>如果对major里的命令和文件有疑惑，请详详细细看MAJOR的PDF进行学习！</strong></p>
<p>在开始之前，首先获取MAJOR的指导文件：<a href="http://mutation-testing.org/doc/major.pdf">http://mutation-testing.org/doc/major.pdf</a>，详细阅读后如有问题可看接下来的简单操作使用。</p>
<h1>环境与配置</h1>
<p>下载好压缩包后，解压到你想安装的地方即可，比如<strong>D:/major</strong>下。文件结构如图：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-62.png" alt=""></p>
<p>配置好系统的环境变量：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-63-1024x447.png" alt=""></p>
<p>注意哦，确保在新配的这个路径里，有javac、ant等这些程序哦</p>
<p>输入命令：</p>
<pre><code class="language-shell">javac -version
</code></pre>
<p>这里不是说你在Windows命令行输入命令返回出内容就可以了。</p>
<p>比如返回：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-644.png" alt=""></p>
<p>这里返回的不是MAJOR里的javac程序。由于未知原因，即使配置好了环境变量，但是Windows下无法执行D:\major\bin下的javac（它总是弹出打开方式的选择框）。这里我换成了LINUX环境。</p>
<p><strong>【以下操作均在WSL配合下进行。Ubuntu-20.04】</strong>（当然使用虚拟机是可以的。附：<a href="https://www.cnblogs.com/lepeCoder/p/wsl_dir.html">windows10 ubuntu子系统 WSL文件位置</a>）</p>
<p>[wpdiscuz-feedback id=&quot;ssas9ftfam&quot; question=&quot;有疑惑？请对此提供反馈&quot; opened=&quot;0&quot;][/wpdiscuz-feedback]</p>
<p>首先在Linux下准备好Java环境。下图展示无Java环境情形：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220324170844.png" alt=""></p>
<p>附安装过程中出现<strong>E: Unable to locate package openjdk-8-jre</strong> 失败的解决（下图）:<br>
<a href="https://blog.csdn.net/u012956987/article/details/107448548">E: Unable to locate package openjdk-8-jre ubuntu 20.04安装jdk 失败_学无止境qwer的博客-CSDN博客</a><br>
<a href="https://blog.csdn.net/appleyuchi/article/details/105103293">Errors were encountered while processing 解决方法_微电子学与固体电子学-俞驰的博客-CSDN博客</a></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220324170858.png" alt=""></p>
<p>Java安装失败示例</p>
<p>安装成功检查：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220324170821.png" alt=""></p>
<p>这时候再检查javac：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220324170809.png" alt=""></p>
<p>这才和官方的pdf中显示得差不多，才算成功。</p>
<p>**新增：**再做以下检查</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-71-1024x104.png" alt=""></p>
<p><strong>注意：<strong>如果在过程中，中途有修正过环境变量，请</strong>新建一个终端</strong>或<strong>退出终端后重新进来</strong>再试一试！如果还不行，请<strong>卸载Linux里的Java再重新安装</strong>！亲测有效。</p>
<h1>复制</h1>
<p>MAJOR文件夹里边example是两个例子，我们需要把例子里边的一些东西复制到我们待测试的Java项目中来。你的Java项目应该是这个样子：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-6555.png" alt=""></p>
<p>把all.mml（在mml文件夹下）、build.xml（在example/ant下）搬过来。</p>
<p>执行：(感谢日日快乐童鞋指正)</p>
<pre><code class="language-bash">$ mmlc all.mml all.mml.bin
</code></pre>
<p>生成了一个all.mml.bin文件。build.xml需要进行修改。</p>
<p>（例子中的这个all.mml指的是生成所有种类的变异算子。如果MML自己写的话，通过mmlc可以自己生成这个.bin文件。）</p>
<p>注意，测试类不要使用参数化编程。会有未知错误。</p>
<p>[wpdiscuz-feedback id=&quot;ssas9ftfam&quot; question=&quot;有疑惑？请对此提供反馈&quot; opened=&quot;0&quot;][/wpdiscuz-feedback]</p>
<p>下面是跟据我的项目目录结构，按需修改build.xml。（考验你洞察力的时候到了！！😲）</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-66666.png" alt=""></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-6567.png" alt=""></p>
<p>更正图片文字：“根据你的测试文件位置按需修改”</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-ssa68.png" alt=""></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-asd72.png" alt=""></p>
<h1>使用</h1>
<p>还记得MAJOR那两个例子吗。在D:/major/example/ant文件夹下，有一个run.sh的例子。以它作为参考，我们做这些执行：</p>
<pre><code class="language-shell">$ ant -DmutOp=&quot;=all.mml.bin&quot; clean compile
$ ant compile.tests
$ ant mutation.test
</code></pre>
<p>注意：执行命令的位置和build.xml是同一个目录。</p>
<p>最后的结果大图：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-69-1024x794.png" alt=""></p>
<h1>其他问题</h1>
<p>有童鞋出现了以下问题，对部分问题提供了解决思路。供参考：</p>
<ul>
<li>ant -version 查到的不是major自带的那个。解决方法，删掉Linux里的那个ant。</li>
<li>在复制Windows的major到WSL里，没在Linux里配环境变量的话，javac、ant总有一个在命令行找不到。只有在Windows里边原有的项目，打开Linux环境，按照与我一样的做法才行。</li>
<li>如果一个变异体都杀不死/没覆盖，请尝试检查mutants.log是否有变异体生成，然后再检查build.xml有没有改好。</li>
</ul>
<h1>更多参考</h1>
<p>关于Ant里的Junit各种属性手册：<a href="https://ant.apache.org/manual/Tasks/junit.html">JUnit Task (apache.org)</a></p>


                
            </main>

            <footer class="list-content-container">
                

                
            </footer>
        </article>
        
        <article id="3771188998" class="record">
            <header>
                <h1 class="record-title">旧页面-赞赏＆贡献</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>3771188998</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>Zone of archive, undefined</span>
                </div>

                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>3/26/2022</span>
                </div>
                

                

                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>e0c7c706</span>
                </div>
                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/achived-cover.png</span>
                </div>
                
            </header>

            <main class="record-content">
                <blockquote>
<p>[!Warning] 这是一篇归档文章<br>
本页面已停止更新，仅起历史归档作用。</p>
</blockquote>
<p>感谢你能来到这个页面！小站建设不易，需要你的帮助！小钱钱将全部用于<strong>建设本网站、强健身体</strong>以提供更优质的内容！</p>
<p><img src="https://typora-1301301520.cos.ap-nanjing.myqcloud.com/img/wxzs.png" alt=""></p>
<p><img src="https://typora-1301301520.cos.ap-nanjing.myqcloud.com/img/zfbzs.jpg" alt=""></p>
<p>金主 BaBa 将会被登榜感谢 😙😙😙！</p>
<p>如果你想为网站贡献更多的优质内容，并<strong>成为网站作者</strong>，请通过 <strong>QQ、微信、邮箱</strong>联系我！（联系方式见网站页面底部右侧）</p>
<p>祝你生活愉快！</p>


                
            </main>

            <footer class="list-content-container">
                

                
            </footer>
        </article>
        
        <article id="648224007" class="record">
            <header>
                <h1 class="record-title">博客网站网页变灰的操作方法</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>648224007</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>undefined</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('CSS');">CSS</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>3/26/2022</span>
                </div>
                

                

                
                <div class="record-description">
                    <span>description :</span>
                    <span>在“额外CSS”中加入代码。</span>
                </div>
                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/1ff4099a6177a54d86cf9d60314eff95.jpeg</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>26a31d07</span>
                </div>
                
            </header>

            <main class="record-content">
                <h1>核心代码</h1>
<pre><code class="language-css">html {
    -webkit-filter: grayscale(100%);
    -moz-filter: grayscale(100%);
    -ms-filter: grayscale(100%);
    -o-filter: grayscale(100%);
    filter: grayscale(100%);
    filter: progid:DXImageTransform.Microsoft.BasicImage(grayscale=1);
}
</code></pre>
<h1>Hexo</h1>
<p>这里以 Butterfly 主题为例。新建 css 文件，包含以上代码内容，然后在主题配置文件中 inject 即可。</p>
<pre><code class="language-yaml">inject:
  head:
    # - &lt;link rel=&quot;stylesheet&quot; href=&quot;/xxx.css&quot;&gt;
    # 网页变灰CSS
    - &lt;link rel=&quot;stylesheet&quot; href=&quot;/css/gray.css&quot;&gt;
</code></pre>
<p>参考：<a href="https://zhuanlan.zhihu.com/p/125708748">用代码如何实现整个网站变灰？ - 知乎 (zhihu.com)</a></p>
<h1>Wordpress 博客网站</h1>
<h2>让所有网页变灰</h2>
<p>在主题自定义中，找到“额外 CSS”选项，加入上方代码片段。</p>
<h2>仅让首页变灰</h2>
<p>打开仪表盘，进入外观中的主题文件编辑器中，找到 functions.php 文件。在其最末尾添加上：</p>
<pre><code class="language-php">function nicetheme_global_greyscale() {
    if ( is_home() ){
        echo '&lt;style type=&quot;text/css&quot;&gt;html{-webkit-filter:grayscale(1);-webkit-filter:grayscale(100%);filter:grayscale(100%);-webkit-filter:gray;filter:gray;filter:progid:DXImageTransform.Microsoft.BasicImage(grayscale=1);}&lt;/style&gt;';
    }
}
add_action('wp_head', 'nicetheme_global_greyscale');
</code></pre>
<p>更多情形，详见以下参考链接：</p>
<p><a href="https://cloud.tencent.com/developer/article/1944792">wordpress 如何让网站变成灰色 - 云+社区 - 腾讯云 (tencent.com)</a></p>
<p><a href="https://www.ourboke.com/1749.html">用代码轻松实现 WordPress 网站全站变灰教程 Ourboke 联盟</a></p>
<p><a href="http://www.maqingxi.com/archives/4901.html">WordPress 网站如何实现全站变灰？ - 醒悟的凡灵 (maqingxi.com)</a></p>
<p><a href="https://www.mbx0.com/4117.html">wordpress 网站全站变灰教程 - 墨白社区 (mbx0.com)</a></p>


                
            </main>

            <footer class="list-content-container">
                

                
            </footer>
        </article>
        
        <article id="1780203637" class="record">
            <header>
                <h1 class="record-title">WordPress 修改文章标题前的「私密」和「密码保护」</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>1780203637</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>WordPress</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('搬运');">搬运</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>4/1/2022</span>
                </div>
                

                

                
                <div class="record-description">
                    <span>description :</span>
                    <span>在functions.php添加自定义函数。</span>
                </div>
                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/WPPIC.png</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>6a1bc075</span>
                </div>
                
            </header>

            <main class="record-content">
                <p>打开仪表盘&gt;外观&gt;主题文件编辑器，找到functions.php，添加以下代码：</p>
<pre><code class="language-php">add_filter( 'private_title_format', 'your_private_title_format' ); //私密
add_filter( 'protected_title_format', 'your_private_title_format' ); //密码保护

function your_private_title_format( $format ) {
	return '%s'; //这个不能省略
}
</code></pre>
<p><code>return '%s'</code> 表示直接返回标题，也可以根据自己的需要，分别为 私密 和 密码保护 撰写不同的函数，定义返回的标题格式即可。比如：</p>
<pre><code class="language-php">//私密
add_filter( 'private_title_format', 'your_private_title_format' );
function your_private_title_format( $format ) {
	return '[私密] %s';
}

//密码保护
add_filter( 'protected_title_format', 'your_protected_title_format' );
function your_protected_title_format( $format ) {
	return '[密码保护] %s';
}
</code></pre>
<p>来源：<a href="http://yangjunwei.com/1557.html">WordPress修改标题前的”私密”和”密码保护” - YangJunwei</a></p>


                
            </main>

            <footer class="list-content-container">
                

                
            </footer>
        </article>
        
        <article id="2392872481" class="record">
            <header>
                <h1 class="record-title">Selenium的安装与使用</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>2392872481</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>工具箱, undefined</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('Selenium');">Selenium</button>
                    
                    <button class="btn" onclick="activeTag('SeleniumIDE');">SeleniumIDE</button>
                    
                    <button class="btn" onclick="activeTag('安装');">安装</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>4/2/2022</span>
                </div>
                

                

                
                <div class="record-description">
                    <span>description :</span>
                    <span>Selenium的测试过程简述。</span>
                </div>
                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/se.webp</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>8ea05621</span>
                </div>
                
            </header>

            <main class="record-content">
                <p>这篇文章主要介绍 Selenium 的安装与简单使用。</p>
<p>标记说明：带 🎈 标记表示本教程所使用的方法或软件。</p>
<h1>浏览器下载</h1>
<p>准备好一款浏览器，Chrome、Firefox、Edge🎈 等。</p>
<h1>下载 Selenium IDE</h1>
<p>Selenium IDE 是一款浏览器插件。通过该插件，测试人员可以模拟需要测试的动作，然后导出为各种语言编写的测试脚本。</p>
<p>请在浏览器对应的应用市场下载插件：</p>
<ul>
<li>Chrome 插件下载：在网络条件允许下，到 Google 应用商店下载。</li>
<li>Firefox 插件下载：在 Add-on 插件商场下载。</li>
<li>Edge 插件下载：在 Edge 外接程序应用市场下载<a href="https://microsoftedge.microsoft.com/addons/detail/selenium-ide/ajdpfmkffanmkhejnopjppegokpogffp">Selenium IDE - Microsoft Edge Addons</a>🎈。（或使用 Edge 打开谷歌应用市场下载）。</li>
</ul>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-4-1024x231.png" alt=""></p>
<p>或者在官网下载，依照官网指南进行安装：<a href="https://www.selenium.dev/selenium-ide/">Selenium IDE · Open source record and playback test automation for the web</a></p>
<h1>下载语言库</h1>
<p>根据你测试打算用的语言，下载对应的库，并导入到你的项目里。</p>
<p>支持语言：</p>
<ul>
<li><a href="https://www.selenium.dev/documentation/webdriver/getting_started/install_library/#tabs-0-0">Java</a>🎈</li>
<li><a href="https://www.selenium.dev/documentation/webdriver/getting_started/install_library/#tabs-0-1">Python</a></li>
<li><a href="https://www.selenium.dev/documentation/webdriver/getting_started/install_library/#tabs-0-2">CSharp</a></li>
<li><a href="https://www.selenium.dev/documentation/webdriver/getting_started/install_library/#tabs-0-3">Ruby</a></li>
<li><a href="https://www.selenium.dev/documentation/webdriver/getting_started/install_library/#tabs-0-4">JavaScript</a></li>
<li><a href="https://www.selenium.dev/documentation/webdriver/getting_started/install_library/#tabs-0-5">Kotlin</a></li>
</ul>
<h1>下载一个 WebDriver 并配置好环境</h1>
<p>下载对应你浏览器的 WebDriver。</p>
<p>ChromeDriver 下载：<a href="https://chromedriver.chromium.org/home">ChromeDriver - WebDriver for Chrome (chromium.org)</a>，注意下载对应你谷歌浏览器版本的那个。</p>
<p>Microsoft Edge WebDriver 下载 🎈：<a href="https://developer.microsoft.com/en-us/microsoft-edge/tools/webdriver/">Microsoft Edge WebDriver - Microsoft Edge Developer</a></p>
<p>其他浏览器 WebDriver 的下载请看官方教程：<a href="https://www.selenium.dev/documentation/webdriver/getting_started/install_drivers/">Install browser drivers Selenium</a></p>
<p>Selenium 文档中提供三种方法：</p>
<ul>
<li>Driver Management Software</li>
<li>设置 Path 环境变量（❔ 亲测设置失败）</li>
<li>在代码中设置 🎈</li>
</ul>
<p>在环境配置这里，我使用官方提供的第三种方法，直接代码写死环境。</p>
<blockquote>
<p><em>3. Hard Coded Location</em> Selenium <a href="https://www.selenium.dev/documentation/webdriver/getting_started/install_drivers/#3-hard-coded-location">官网-环境配置</a></p>
<p>Similar to Option 2 above, you need to manually download the driver (See <a href="https://www.selenium.dev/documentation/webdriver/getting_started/install_drivers/#quick-reference">Quick Reference Section</a> for links). Specifying the location in the code itself has the advantage of not needing to figure out Environment Variables on your system, but has the drawback of making the code much less flexible.</p>
</blockquote>
<p>比如，在设置 Driver 时：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-1024x316.png" alt=""></p>
<h1>使用和测试</h1>
<p>在浏览器中使用 Selenium IDE。一开始，它会让你设置一个基地址，就是你要测试的网页。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-5.png" alt=""></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-6.png" alt=""></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-7-1024x286.png" alt=""></p>
<p>动作录制结束后，你可以进行微调或增删，最后导出脚本：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-1.png" alt=""></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-2.png" alt=""></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-3-1024x502.png" alt=""></p>
<p>查看生成的脚本，挑取所需的片段，复制到你的测试代码中。</p>
<p>提示：关于 driver 的亲测正确配置方法请看上一节的截图。</p>
<h1>本文参考</h1>
<ul>
<li>Selenium 文档：<a href="https://www.selenium.dev/documentation/overview/">Selenium overview Selenium</a></li>
</ul>


                
            </main>

            <footer class="list-content-container">
                

                
            </footer>
        </article>
        
        <article id="1864583727" class="record">
            <header>
                <h1 class="record-title">Windows管理右键菜单</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>1864583727</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>工具箱</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('VSCode');">VSCode</button>
                    
                    <button class="btn" onclick="activeTag('Windows');">Windows</button>
                    
                    <button class="btn" onclick="activeTag('右键管理');">右键管理</button>
                    
                    <button class="btn" onclick="activeTag('搬运');">搬运</button>
                    
                    <button class="btn" onclick="activeTag('注册表');">注册表</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>4/10/2022</span>
                </div>
                

                

                
                <div class="record-description">
                    <span>description :</span>
                    <span>通过操作注册表编辑器进行右键菜单管理操作。</span>
                </div>
                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/%E5%8F%B3%E9%94%AE.png</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>6f234a2f</span>
                </div>
                
            </header>

            <main class="record-content">
                <p>以下列举了 Windows 管理右键菜单的各种操作。</p>
<p><strong>注意：修改注册表有风险，请谨慎操作！</strong></p>
<h1>将“用 VSCode 打开”添加到右键菜单中</h1>
<p>在右键菜单中，添加“Open With Code”的方法。</p>
<p>新建文本文件，在文本文件中填写以下内容：</p>
<pre><code class="language-bash">Windows Registry Editor Version 5.00

[HKEY_CLASSES_ROOT\*\shell\VSCode]
@=&quot;Open with Code&quot;
&quot;Icon&quot;=&quot;D:\\Microsoft VS Code\\Code.exe&quot;

[HKEY_CLASSES_ROOT\*\shell\VSCode\command]
@=&quot;\&quot;D:\\Microsoft VS Code\\Code.exe\&quot; \&quot;%1\&quot;&quot;

Windows Registry Editor Version 5.00

[HKEY_CLASSES_ROOT\Directory\shell\VSCode]
@=&quot;Open with Code&quot;
&quot;Icon&quot;=&quot;D:\\Microsoft VS Code\\Code.exe&quot;

[HKEY_CLASSES_ROOT\Directory\shell\VSCode\command]
@=&quot;\&quot;D:\\Microsoft VS Code\\Code.exe\&quot; \&quot;%V\&quot;&quot;

Windows Registry Editor Version 5.00

[HKEY_CLASSES_ROOT\Directory\Background\shell\VSCode]
@=&quot;Open with Code&quot;
&quot;Icon&quot;=&quot;D:\\Microsoft VS Code\\Code.exe&quot;

[HKEY_CLASSES_ROOT\Directory\Background\shell\VSCode\command]
@=&quot;\&quot;D:\\Microsoft VS Code\\Code.exe\&quot; \&quot;%V\&quot;&quot;
</code></pre>
<p>把其中的”D:\\Microsoft VS Code\\Code.exe“修改为你的 VSCode 的路径。请注意路径中&quot;斜杠”的个数！以及斜杠的位置，特别是**\&quot;**出现的位置！</p>
<p>保存后，将文件重命名为以”.reg“为后缀的名字，重命名后图标会变。像这样：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-e8.png" alt=""></p>
<p>双击运行，并在弹出窗口中选择确认即可。</p>
<p>附：找到 VSCode 的路径方法。桌面快捷方式右键&gt;选择属性&gt;打开文件位置。在开始菜单中则使用如图所示的方法。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-9asd.png" alt=""></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-1asd0.png" alt=""></p>
<p>”目标“字段即是路径。</p>
<p>效果展示：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-1asd1.png" alt=""></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-1asd2.png" alt=""></p>
<p>来源：<a href="https://www.cnblogs.com/jswl/p/9935998.html">将 VSCode 添加至右键菜单（Windows 下） - 菊次郎的秋天 - 博客园 (cnblogs.com)</a></p>
<h1>管理右键菜单中的“新建”菜单</h1>
<p>快捷键 Win+R 打开“运行”窗口，输入 regedit 后回车，打开注册表编辑器。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-1asd4.png" alt=""></p>
<p>在这个目录下，点击 Classes，里面列出了新建文件的格式。</p>
<pre><code>计算机\HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\Discardable\PostSetup\ShellNew
</code></pre>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-1asd3.png" alt=""></p>
<p>考虑好你要删除的格式后，打开：</p>
<pre><code>HKEY_CLASSES_ROOT\.contact
</code></pre>
<p>.contact 替换你想要删除的项目。比如.contact 为新建“联系人”的项目。进入目录后删除下属子项 ShellNew。</p>
<p>来源：<a href="https://www.bbsmax.com/A/Gkz1166GzR/">Win10 自定义右键新建菜单 (bbsmax.com)</a></p>


                
            </main>

            <footer class="list-content-container">
                

                
            </footer>
        </article>
        
        <article id="3569684170" class="record">
            <header>
                <h1 class="record-title">JMeter的安装与使用</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>3569684170</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>工具箱, undefined</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('JMeter');">JMeter</button>
                    
                    <button class="btn" onclick="activeTag('安装');">安装</button>
                    
                    <button class="btn" onclick="activeTag('问题解决');">问题解决</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>4/16/2022</span>
                </div>
                

                

                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/jmetercover.webp</span>
                </div>
                
                <div class="record-description">
                    <span>description :</span>
                    <span>JMeter的安装使用方法介绍，以及“禅道”项目管理系统的部分使用问题解答。内有针对软件工程专业选了《软件测试》这门课的同学的温馨提醒。</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>d4c50eca</span>
                </div>
                
            </header>

            <main class="record-content">
                <h1>安装</h1>
<p>官网下载：<a href="https://jmeter.apache.org/">Apache JMeter - Apache JMeter™</a></p>
<p>下载后直接解压到你想要的位置。进入文件夹中的bin\下，运行批处理文件jmeter.bat。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/%E8%BF%90%E8%A1%8C.png" alt="img"></p>
<p>弹出小黑框后不要关，等一会后GUI界面就会显示出来。</p>
<p>参考：<a href="https://blog.csdn.net/weixin_47227973/article/details/112545558">Jmeter开启_weixin_47227973的博客-CSDN博客_jmeter怎么打开</a></p>
<h1>使用</h1>
<h2>项目的保存和项目的打开操作</h2>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220413153733.png" alt="QQ截图20220413153733.png (429×304) "></p>
<p>项目的打开</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220413000026.png" alt="QQ截图20220413000026.png (238×304) (haha)"></p>
<h2>添加线程组</h2>
<p>打开后，添加线程组。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/%E6%89%93%E5%BC%80-1024x577.png" alt="打开-1024x577.png (1024×577) (haha)"></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220412192551.png" alt="QQ截图20220412192551.png (811×374) (haha)"></p>
<p>在线程组中，可以对线程组的线程数和循环次数进行设置。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220412192702.png" alt="QQ截图20220412192702.png (1007×856) (haha)"></p>
<h2>录制控制器的添加</h2>
<p>录制控制器可以对录制的内容进行操作。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220412231809.png" alt="QQ截图20220412231809.png (707×432) (haha)"></p>
<h2>代理服务器的添加和使用</h2>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220412231948.png" alt="QQ截图20220412231948.png (647×276) (haha)"></p>
<p>通过添加代理服务器实现录制操作。</p>
<p>设置端口，随便设，这里我设8888。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-17-1024x358.png" alt="此图片的alt属性为空；文件名为image-17-1024x358.png"></p>
<p>打开电脑设置中的代理，开启代理：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-16-1024x691.png" alt="此图片的alt属性为空；文件名为image-16-1024x691.png"></p>
<p>开启代理后，你将无法访问互联网。这时把端口设为刚刚在JMeter设置的端口号8888。保存。</p>
<p>返回JMeter的代理服务器，并开启。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220413000009-1024x536.png" alt="QQ截图20220413000009-1024x536.png (1024×536) (haha)"></p>
<p>所有通过代理服务器的网页动作都会被记录。会注意到Recording Controller左侧多了展开符号。如果出现没有操作被录制的问题，请检查自己在每次修改系统“代理”设置后，有没有点击“保存“按钮。</p>
<h2>添加结果树</h2>
<p>录制完成后，保留需要的内容。然后添加结果树以展示执行结果。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220413154123.png" alt="QQ截图20220413154123.png (761×689) (haha)"></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/%E7%BB%93%E6%9E%9C%E6%A0%91.png" alt="结果树.png (1022×698) (haha)"></p>
<p>点击运行绿色的运行按钮，可展示执行结果。（在这个例子里，我只保留登录请求）</p>
<p>温馨提示：录制中如果存在密码输入问题，检查一下这个地方（下图），可能需要将加密内容（MD5）手动改为密码文本。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220413161408-1024x519.png" alt="QQ截图20220413161408-1024x519.png (1024×519) (haha)"></p>
<h2>用户自定义变量的添加与使用</h2>
<p><img src="https://cdn.gallery.uuanqin.top/img/%E7%94%A8%E6%88%B7%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F.png" alt="用户自定义变量.png (667×330) (haha)"></p>
<p>添加自己定义的变量并使用：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-18-1024x705.png" alt="image-18-1024x705.png (1024×705) (haha)"></p>
<p>添加变量</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220413164022-1-1024x493.png" alt="QQ截图20220413164022-1-1024x493.png (1024×493) (haha)"></p>
<p>使用变量</p>
<h2>读取CSV文件</h2>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220413165052.png" alt="QQ截图20220413165052.png (712×219) (haha)"></p>
<p>参数配置如下。注意，csv变量名设置后，可在一个HTTP Request进行使用。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220413165506-1024x349.png" alt="QQ截图20220413165506-1024x349.png (1024×349) (haha)"></p>
<p>调整线程组中线程数，比如你的CSV文件里的记录数，点击绿色的执行按钮，即可在结果树中查看执行结果。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-19.png" alt="image-19.png (569×350) (haha)"></p>
<h2>断言</h2>
<p>添加断言。在这里，我添加的是一个BeanShell Assertion断言。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220413171109.png" alt="QQ截图20220413171109.png (634×170) (haha)"></p>
<p>通过断言我们可以对执行结果进行判断。例如检查登录情况：</p>
<pre><code class="language-java">String response = prev.getResponseDataAsString();
if(!response.contains(&quot;success&quot;)){
	Failure=true;
	FailureMessage=&quot;登录失败&quot;;
}
else{
	Failure=false;
}
</code></pre>
<p>以上代码即检查相应中是否包含“success”文字，不包含即失败。</p>
<h2>聚合报告</h2>
<p>添加聚合报告的方法如下：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-2sad9.png" alt="image-29.png (696×593) (haha)"></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-33-1024x660.png" alt="image-33-1024x660.png (1024×660) (haha)"></p>
<p>附：聚合报告分析<a href="https://blog.csdn.net/weixin_50829653/article/details/118675802">JMeter基础 — JMeter聚合报告详解_测试萌萌的博客-CSDN博客_jmeter聚合报告</a></p>
<h2>生成HTML格式的性能报告</h2>
<p>输入以下命令：</p>
<pre><code class="language-sh"> D:\apache-jmeter-5.4.3\bin\jmeter -n -t &quot;Recording Controller.jmx&quot; -l result.jtl -e -o .\ResultReport
</code></pre>
<ul>
<li>参数D:\apache-jmeter-5.4.3\bin\jmeter表示jmeter可执行文件的路径；</li>
<li>参数&quot;Recording Controller.jmx&quot;表示项目文件，文件名有空格的记得加个双引号；</li>
<li>参数result.jtl表示生成的jtl文件名；</li>
<li>参数.\ResultReport表示生成的目标文件夹。</li>
</ul>
<p>例如，运行：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-30-1024x20.png" alt="image-30-1024x20.png (1024×20) (haha)"></p>
<p>有以下结果：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/images-31.png" alt="image-31.png (697×730) (haha)"></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-32-1024x447.png" alt="image-32-1024x447.png (1024×447) (haha)"></p>
<p>操作及图标信息详解参考：<a href="https://www.cnblogs.com/lirongyang/p/15595206.html">Jmeter(三十七) - 从入门到精通进阶篇 - 输出HTML格式的性能测试报告（详解教程） - 李荣洋 - 博客园 (cnblogs.com)</a></p>
<h1>针对要做《软件测试》课程实验的TJUers温馨提示</h1>
<h2>LAMP</h2>
<p>TJU软件工程专业的《软件测试》课程”实验6-Jmeter压力测试“中要求自己搭建一个LAMP环境。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-1asd5.png" alt="img">实验6 实验指导书节选</p>
<p>这里指路我的另一篇文章《个人（博客）建站经验分享【持续更新-4.12最新】 - 半方池水半方田 》“以供大家参考，里面就是一些阿里云的文档链接，我在服务器上搭LAMP时参考的就是这些内容。</p>
<p>如果你使用接下来介绍的“禅道”，使用一键安装包，不需要亲手搭LAMP（也许）。</p>
<h2>sysstat工具的安装</h2>
<p>Linux下：</p>
<pre><code class="language-sh">wget -c http://pagesperso-orange.fr/sebastien.godard/sysstat-11.7.3-1.x86_64.rpm
rpm -Uvh sysstat-11.7.3-1.x86_64.rpm
</code></pre>
<p>参考：<a href="https://blog.csdn.net/sinat_28317385/article/details/112967462">sysstat命令的安装和使用_安澜仙王的博客-CSDN博客_sysstat</a></p>
<p><a href="https://blog.csdn.net/sixisixsix/article/details/106430379">sysstat 工具详细说明（一）_ⅨⅦ的博客-CSDN博客_syss</a></p>
<h2>禅道</h2>
<p>待测系统部分我采用禅道项目管理软件，安装与操作指南见：<a href="https://www.zentao.net/book/zentaopmshelp/90.html">linux用一键安装包 - 禅道开源版使用帮助 - 禅道开源项目管理软件 (zentao.net)</a>。注意记住你开启的Apache端口和Mysql端口。比如这篇教程的81端口和3307端口。<br>
<strong>突然发现，好像禅道的Linux一键安装包里面有apache, php, mysql，是不是说LAMP其实不用搭......</strong></p>
<p>如果你已经安了LAMP，尝试看这篇安装禅道：<a href="https://www.zentao.net/book/zentaopmshelp/101.html">使用源码包安装(各系统通用) - 禅道开源版使用帮助 - 禅道开源项目管理软件 (zentao.net)</a></p>
<p>正常打开的界面:</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220411234927-1024x549.png" alt="QQ截图20220411234927-1024x549.png (1024×549) (haha)"></p>
<p>如果你在云服务器进行操作，别忘了在安全组打开端口。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220411234940-1024x47.png" alt="QQ截图20220411234940-1024x47.png (1024×47) (haha)"></p>
<h2>增加/编辑项目</h2>
<p>在这个实验中，我遇到的难题就是JMeter不能模拟增加Bug，修改Bug标题的操作。花了一天，我用自己的野生智慧采用野生方法解决了问题。</p>
<p>就是在关键的、填写表单的POST请求中，表头增加Cookie字段即可。<strong>（提醒：此问题为多数童鞋普遍问题！！）</strong></p>
<p>Cookie的获取方法很多，这里提供我突然得到“启示”的步骤供参考：打开禅道管理页面，在准备提交表单之前，借助浏览器的开发者工具进行抓包（你也可以使用其他的抓包工具）：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20-1024x159.png" alt="image-20-1024x159.png (1024×159) (haha)"></p>
<p>在开启开发者模式下，模拟一遍“提Bug”操作，筛选出想要的请求。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-21-1024x546.png" alt="image-21-1024x546.png (1024×546) (haha)"></p>
<p>在JMeter对应的记录中，往Header里再增加一项Cookie：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-22-1024x195.png" alt="img"></p>
<p>正确的返回数据：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-23-1024x123.png" alt="img"></p>
<p>之前错误的返回数据（HTML）：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-24.png" alt="img"></p>
<p>灵感来源：<a href="https://blog.csdn.net/m0_51274044/article/details/123880182">使用fiddler+jmeter写登录禅道、提交bug的脚本_千与学程序的博客-CSDN博客</a> 受到该文章中改Header的操作的启示。</p>
<h2>禅道内批量导入用户数据（选做）</h2>
<p>请看我的另一篇文章：《“禅道”的配置与数据库连接 - 半方池水半方田》</p>
<h1>提醒中的提醒</h1>
<p>使用JMeter录制不成功咋办？</p>
<p>检查JMeter代理服务器选上录制控制器了没<br>
检查本机代理有没有开启成功，试着调换一下JMeter HTTP代理、本机网络代理的开启顺序<br>
录制到的HTTP请求是实时更新在JM</p>
<p>祝大家实验顺利！</p>


                
            </main>

            <footer class="list-content-container">
                

                
            </footer>
        </article>
        
        <article id="2497000883" class="record">
            <header>
                <h1 class="record-title">WordPress 修改 functions 的方法</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>2497000883</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>WordPress</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('问题解决');">问题解决</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>4/17/2022</span>
                </div>
                

                

                
                <div class="record-description">
                    <span>description :</span>
                    <span>提供两种方法。</span>
                </div>
                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/WPPIC.png</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>94d535b3</span>
                </div>
                
            </header>

            <main class="record-content">
                <p>现提供两种方法。</p>
<h1>仪表盘修改</h1>
<p>打开仪表盘&gt;主题文件编辑器&gt;functions.php</p>
<p>直接在代码框进行修改。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-43-1024x358.png" alt=""></p>
<p>如果修改不成功，比如：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-44-1024x57.png" alt=""></p>
<p>可尝试下一个方法。</p>
<h1>在服务器端修改</h1>
<p>位置在<code>/wp-content/themes/**\[你的主题名\]**/functions.php</code></p>
<p><code>[你的主题名]</code>位置为你当前使用的主题名称。</p>
<p>参考：<a href="https://themeforwp.net/archives/wordpress-edit-functions-php/">WordPress修改functions.php教程 - WP主题站 (themeforwp.net)</a></p>


                
            </main>

            <footer class="list-content-container">
                

                
            </footer>
        </article>
        
        <article id="910498382" class="record">
            <header>
                <h1 class="record-title">使用 CDN 加速 WordPress 博客网站</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>910498382</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>Zone of archive, undefined</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('CDN');">CDN</button>
                    
                    <button class="btn" onclick="activeTag('COS');">COS</button>
                    
                    <button class="btn" onclick="activeTag('PicGo');">PicGo</button>
                    
                    <button class="btn" onclick="activeTag('对象存储');">对象存储</button>
                    
                    <button class="btn" onclick="activeTag('腾讯云');">腾讯云</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>4/17/2022</span>
                </div>
                

                

                
                <div class="record-description">
                    <span>description :</span>
                    <span>使用CDN进行资源加速。以腾讯云CDN为例。</span>
                </div>
                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/new-out-of-date-cover.png</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>36451a4e</span>
                </div>
                
            </header>

            <main class="record-content">
                <blockquote>
<p>[!warning] 这是一篇过期文章[2023.08.24]<br>
本篇文章已过期。</p>
<ul>
<li>本文为网站早期文章，内容过于粗糙和简单</li>
<li>PicGo配置已随版本更新而变化</li>
<li>部分内容已整合至其他文章中</li>
</ul>
</blockquote>
<h1>为WordPress博客网站开启CDN加速</h1>
<p>服务器部署在阿里云，使用了腾讯云的CDN加速。</p>
<p>使用CDN：<a href="https://cloud.tencent.com/document/product/228/3149">内容分发网络 CDN 从零开始配置 CDN - 快速入门 - 文档中心 - 腾讯云 (tencent.com)</a></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220412210237.png" alt="QQ截图20220412210237"></p>
<p>源站配置应该像下图这样。如果选择COS，那么还要去腾讯云那里接入备案，接入备案前提还要买它的服务器...</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-47-1024x427.png" alt="image-47-1024x427"></p>
<p>如果网站支持HTTPS，并开启了强制跳转，那么这里回源协议不用选HTTPS。</p>
<p>啊，关于CDN的理解，走了很多弯路，现提供以下网址进行学习：<br>
<a href="https://cloud.tencent.com/developer/article/1959818">使用腾讯CDN加速WordPress - 云+社区 - 腾讯云 (tencent.com)</a><br>
<a href="https://cloud.tencent.com/document/product/228/41334">内容分发网络 CDN 源站配置 - 配置指南 - 文档中心 - 腾讯云 (tencent.com)</a><br>
<a href="https://help.aliyun.com/document_detail/40117.html">CDN的配置回源HOST与源站的区别 (aliyun.com)</a></p>
<p>提示：不管是在对CDN操作也好，还是对域名解析进行操作也好，都要等待一段时间才能生效。控制台提示操作成功了，也是要再等一会的。</p>
<p>开启CDN的过程中，出现了登录问题，解决方案是（腾讯云）：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-42-1024x375.png" alt="image-42-1024x375"></p>
<p>参考：<br>
<a href="https://blog.csdn.net/weixin_35521315/article/details/116098343">php用cdn打不开,开启 CDN 后 wordpress 后台打不开的解决办法_柳不是刘的博客-CSDN博客</a><br>
<a href="https://blog.csdn.net/meiqia888/article/details/115404498">解决WordPress配置百度云CDN，后台无法登录问题_美洽技术的博客-CSDN博客</a><br>
<a href="https://cloud.tencent.com/document/product/228/43672">内容分发网络 CDN 域名接入常见问题 - 快速入门 - 文档中心 - 腾讯云 (tencent.com)</a><br>
<a href="https://www.csdn.net/tags/MtTaIgwsMjQ4MTU3LWJsb2cO0O0O.html">wordpress 不更新 加了CDN 用户购买 - CSDN</a></p>
<h1>为COS开启CDN</h1>
<p>如果需要对COS存储桶进行加速，我采用文档（<a href="https://cloud.tencent.com/document/product/436/18669">对象存储 CDN 加速概述 - 开发者指南 - 文档中心 - 腾讯云 (tencent.com)</a>）提供的第一种方法，使用默认CDN加速域名进行加速。</p>
<p>配置好后的配置图如下：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-45-1024x231.png" alt="image-45-1024x231"></p>
<p>如果平时在粘贴地址时使用了PicGo软件，注意在“使用自定义域名”这一栏填上默认CDN加速域名：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-46.png" alt=""></p>
<p>这样，在PicGo上传图片后得到的地址就是加速域名地址。</p>
<p>参考：<a href="https://cloud.tencent.com/document/product/228/37849">内容分发网络 CDN COS-CDN 计费说明 - 购买指南 - 文档中心 - 腾讯云 (tencent.com)</a></p>
<p>上面两项做完结果：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-48-1024x148.png" alt=""></p>
<h1>问题</h1>
<p>如果页面缓存还是有点问题，比如编辑了文章后，查看文章时并没有刷新。进入文章页面没有显示用户登录等。目前还没想到比较好的解决方法，在腾讯云<a href="https://console.cloud.tencent.com/cdn/refresh">刷新预热-内容分发网络 - 控制台 (tencent.com)</a>这里提交URL可以暂时的解决问题。</p>
<p>尝试的解决方案：在functions.php下添加自动刷新腾讯云控制台CDN缓存的操作。不懂有没有用（来源：<a href="https://www.ly522.com/1506.html">wordpress腾讯CDN缓存实现发布/更新文章/评论自动刷新-轻刻年轮 (ly522.com)</a>）。有用！有用！</p>
<pre><code class="language-php">/* 需要填写你的密钥，访问 https://console.qcloud.com/capi 获取 SecretId 及 $secretKey */
$secretKey = '填写你的密钥';
$secretId = '填写你的密钥';
 
//更新或发布文章清理本文和首页CDN缓存
add_action('publish_post', 'Clean_By_Publish', 0);
 
//提交评论更新本文CDN缓存
add_action('comment_post', 'Clean_By_Comments',0);
 
//评论被审核更新本文CDN缓存
add_action('comment_unapproved_to_approved', 'Clean_By_Approved',0);
 
//发布文章更新CDN缓存函数
function Clean_By_Publish($post_ID){
global $secretKey,$secretId;
$url = get_permalink($post_ID);
$action='RefreshCdnUrl';
/*要清理的页面，默认包含首页和文章页面，需要清理其他页面请自行发挥*/
$PRIVATE_PARAMS = array(
'urls.0' =&gt; home_url(),
'urls.1' =&gt; $url ,
);
$HttpUrl=&quot;cdn.api.qcloud.com&quot;;
/*除非有特殊说明，如MultipartUploadVodFile，其它接口都支持GET及POST*/
$HttpMethod=&quot;POST&quot;;
/*是否https协议，大部分接口都必须为https，只有少部分接口除外（如MultipartUploadVodFile）*/
$isHttps =true;
/*下面这五个参数为所有接口的 公共参数；对于某些接口没有地域概念，则不用传递Region（如DescribeDeals）*/
$COMMON_PARAMS = array(
'Nonce' =&gt; rand(),
'Timestamp' =&gt;time(NULL),
'Action' =&gt;$action,
'SecretId' =&gt; $secretId,
);
/***********************************************************************************/
CreateRequest($HttpUrl,$HttpMethod,$COMMON_PARAMS,$secretKey, $PRIVATE_PARAMS, $isHttps);
}
 
//提交评论清理文章CDN函数
function Clean_By_Comments($comment_id)
{
global $secretKey,$secretId;
$comment = get_comment($comment_id);
$url = get_permalink($comment-&gt;comment_post_ID);
$action='RefreshCdnUrl';
/*参数*/
$PRIVATE_PARAMS = array(
'urls.0' =&gt; $url,
);
$HttpUrl=&quot;cdn.api.qcloud.com&quot;;
/*除非有特殊说明，如MultipartUploadVodFile，其它接口都支持GET及POST*/
$HttpMethod=&quot;POST&quot;;
/*是否https协议，大部分接口都必须为https，只有少部分接口除外（如MultipartUploadVodFile）*/
$isHttps =true;
/*下面这五个参数为所有接口的 公共参数；对于某些接口没有地域概念，则不用传递Region（如DescribeDeals）*/
$COMMON_PARAMS = array(
'Nonce' =&gt; rand(),
'Timestamp' =&gt;time(NULL),
'Action' =&gt;$action,
'SecretId' =&gt; $secretId,
);
/***********************************************************************************/
CreateRequest($HttpUrl,$HttpMethod,$COMMON_PARAMS,$secretKey, $PRIVATE_PARAMS, $isHttps);
}
 
//评论被审核清理CDN缓存函数
function Clean_By_Approved($comment)
{
global $secretKey,$secretId;
$url = get_permalink($comment-&gt;comment_post_ID);
$action='RefreshCdnUrl';
/*参数*/
$PRIVATE_PARAMS = array(
'urls.0' =&gt; $url,
);
$HttpUrl=&quot;cdn.api.qcloud.com&quot;;
/*除非有特殊说明，如MultipartUploadVodFile，其它接口都支持GET及POST*/
$HttpMethod=&quot;POST&quot;;
/*是否https协议，大部分接口都必须为https，只有少部分接口除外（如MultipartUploadVodFile）*/
$isHttps =true;
/*下面这五个参数为所有接口的 公共参数；对于某些接口没有地域概念，则不用传递Region（如DescribeDeals）*/
$COMMON_PARAMS = array(
'Nonce' =&gt; rand(),
'Timestamp' =&gt;time(NULL),
'Action' =&gt;$action,
'SecretId' =&gt; $secretId,
);
/***********************************************************************************/
CreateRequest($HttpUrl,$HttpMethod,$COMMON_PARAMS,$secretKey, $PRIVATE_PARAMS, $isHttps);
}
 
//请求主函数，无需改动
function CreateRequest($HttpUrl,$HttpMethod,$COMMON_PARAMS,$secretKey, $PRIVATE_PARAMS, $isHttps)
{
$FullHttpUrl = $HttpUrl.&quot;/v2/index.php&quot;;
/***************对请求参数 按参数名 做字典序升序排列，注意此排序区分大小写*************/
$ReqParaArray = array_merge($COMMON_PARAMS, $PRIVATE_PARAMS);
ksort($ReqParaArray);
/**********************************生成签名原文**********************************
* 将 请求方法, URI地址,及排序好的请求参数 按照下面格式 拼接在一起, 生成签名原文，此请求中的原文为
* GETcvm.api.qcloud.com/v2/index.php?Action=DescribeInstances&amp;Nonce=345122&amp;Region=gz
* &amp;SecretId=AKIDz8krbsJ5yKBZQ ·1pn74WFkmLPx3gnPhESA&amp;Timestamp=1408704141
* &amp;instanceIds.0=qcvm12345&amp;instanceIds.1=qcvm56789
* ****************************************************************************/
$SigTxt = $HttpMethod.$FullHttpUrl.&quot;?&quot;;
$isFirst = true;
foreach ($ReqParaArray as $key =&gt; $value)
{
if (!$isFirst)
{
$SigTxt = $SigTxt.&quot;&amp;&quot;;
}
$isFirst= false;
/*拼接签名原文时，如果参数名称中携带_，需要替换成.*/
if(strpos($key, '_'))
{
$key = str_replace('_', '.', $key);
}
$SigTxt=$SigTxt.$key.&quot;=&quot;.$value;
}
/*********************根据签名原文字符串 $SigTxt，生成签名 Signature******************/
$Signature = base64_encode(hash_hmac('sha1', $SigTxt, $secretKey, true));
/***************拼接请求串,对于请求参数及签名，需要进行urlencode编码********************/
$Req = &quot;Signature=&quot;.urlencode($Signature);
foreach ($ReqParaArray as $key =&gt; $value)
{
$Req=$Req.&quot;&amp;&quot;.$key.&quot;=&quot;.urlencode($value);
}
/*********************************发送请求********************************/
if($HttpMethod === 'GET')
{
if($isHttps === true)
{
$Req=&quot;https://&quot;.$FullHttpUrl.&quot;?&quot;.$Req;
}
else
{
$Req=&quot;http://&quot;.$FullHttpUrl.&quot;?&quot;.$Req;
}
$Rsp = file_get_contents($Req);
}
else
{
if($isHttps === true)
{
$Rsp= SendPost(&quot;https://&quot;.$FullHttpUrl,$Req,$isHttps);
}
else
{
$Rsp= SendPost(&quot;http://&quot;.$FullHttpUrl,$Req,$isHttps);
}
}
//var_export(json_decode($Rsp,true));
return json_decode($Rsp,true);
}
function SendPost($FullHttpUrl, $Req, $isHttps)
{
$ch = curl_init();
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $Req);
curl_setopt($ch, CURLOPT_URL, $FullHttpUrl);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_TIMEOUT, 1 );
if ($isHttps === true) {
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);
}
$result = curl_exec($ch);
return $result;
}
</code></pre>


                
            </main>

            <footer class="list-content-container">
                

                
            </footer>
        </article>
        
        <article id="3237396916" class="record">
            <header>
                <h1 class="record-title">“禅道”的配置与数据库连接</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>3237396916</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>undefined</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('Linux');">Linux</button>
                    
                    <button class="btn" onclick="activeTag('MySQL');">MySQL</button>
                    
                    <button class="btn" onclick="activeTag('Navicat');">Navicat</button>
                    
                    <button class="btn" onclick="activeTag('禅道');">禅道</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>4/18/2022</span>
                </div>
                

                

                
                <div class="record-description">
                    <span>description :</span>
                    <span>禅道的安装方法与配置、数据库连接与操作。</span>
                </div>
                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/cdcover.webp</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>c0f6c1b4</span>
                </div>
                
            </header>

            <main class="record-content">
                <p>禅道官网镇楼：<a href="https://www.zentao.net/">项目管理软件 开源项目管理软件 免费项目管理软件 - 禅道开源项目管理软件 (zentao.net)</a></p>
<h1>禅道安装</h1>
<p>安装与操作指南见：<a href="https://www.zentao.net/book/zentaopmshelp/90.html">linux 用一键安装包 - 禅道开源版使用帮助 - 禅道开源项目管理软件 (zentao.net)</a>。注意记住你开启的 Apache 端口和 Mysql 端口。比如这篇教程的 81 端口和 3307 端口。</p>
<p>如果你已经安了 LAMP，尝试看这篇安装禅道：<a href="https://www.zentao.net/book/zentaopmshelp/101.html">使用源码包安装(各系统通用) - 禅道开源版使用帮助 - 禅道开源项目管理软件 (zentao.net)</a></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220411234927-1024x549.png" alt=""></p>
<p>正常打开的界面</p>
<p>如果你在云服务器进行操作，别忘了在安全组打开端口。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220411234940-1024x47.png" alt=""></p>
<h1>禅道内批量导入用户数据</h1>
<p>需要进入数据库进行操作。网页登录禅道数据库的方法：<a href="https://www.zentao.net/book/zentaopmshelp/90.html">(推荐)linux 用一键安装包 - 禅道开源版使用帮助 - 禅道开源项目管理软件 (zentao.net)</a></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-35.png" alt=""></p>
<p>网页直接登录：</p>
<ul>
<li>系统：默认选择 MySQL。</li>
<li>服务器：127.0.0.1:mysql 端口（mysql 端口启用的是 3307，那么就填写 127.0.0.1:3307。<strong>注意：ip 只能写 127.0.0.1</strong>）</li>
<li>用户名： root。（禅道默认的数据库用户名是 root）</li>
<li>密码：123456。（禅道默认的数据库密码是 123456）</li>
<li>数据库：zentao。</li>
</ul>
<p>进入数据库，找到表 zt_user 即可进行操作。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-27.png" alt=""></p>
<p>我的批量添加的方法是，按照表的结构，另外在 Excel 中创建一个。参照数据库中的默认数据进行填充。</p>
<p>Password 应填入 MD5 加密后的结果。Excel 使用 MD5 对字符串进行加密请参见我的另一篇文章：《Excel 琐碎 - 半方池水半方田》</p>
<p>构造好后进行 csv 文件的导入即可。</p>
<p>做完这些操作，会发现用户没有权限，这时候就需要看另一张表 zt_usergroup。以同样的方式，构造表，导入即可。</p>
<blockquote>
<p>[!Error]<br>
原文此位置包含图片，现链接已被覆盖造成丢失，且复查时存在疏漏。原图片命名为：image-36.png</p>
</blockquote>
<p>导入数据灵感参考：<a href="https://www.inqingdao.cn/1151.html">禅道用 csv 方式批量导入用户方法 – 在情岛 (inqingdao.cn)</a></p>
<h1>使用 Navicat 连接禅道数据库</h1>
<p>（服务器为 Linux 系统）</p>
<p>导入用户数据还可以使用 Navicat 进行导入。</p>
<p>首先登录 adminer，选择 MySQL 数据库：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220418110939-1024x432.png" alt=""></p>
<p>执行 SQL 命令：</p>
<pre><code class="language-SQL">GRANT ALL ON *.* TO 'zentao'@'%' IDENTIFIED BY '123456' WITH GRANT OPTION;
</code></pre>
<p>你会发现增加了一条记录。用户名 zentao。</p>
<p>进入服务器，找到 mysql 配置目录：</p>
<pre><code>find / -name my.cnf
vim /opt/zbox/etc/mysql/my.cnf
</code></pre>
<p>注释掉 bind-address</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/5ITZPXL8RMSS4ZPU_UYM.png" alt=""></p>
<p>进入禅道的 MySQL，刷新权限。重启禅道。</p>
<pre><code>/opt/zbox/bin/mysql -u root -p # 进入后输入的是禅道配的mysql数据库密码，默认123456
MariaDB [(none)]&gt; FLUSH PRIVILEGES; # 刷新权限（在刚刚打开的网页上执行SQL应该也行）

/opt/zbox/zbox restart
</code></pre>
<p>接下来使用 Navicat 登录即可：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220418111459.png" alt=""></p>
<h1>本文参考</h1>
<ul>
<li><a href="https://blog.51cto.com/u_7034817/3407526">Windows 下使用 Navicat 远程连接禅道 Mysql 数据库_薄心之心的技术博客_51CTO 博客</a></li>
<li><a href="https://blog.csdn.net/lizhiyuan_eagle/article/details/81282893">navicat 远程连接 linux 禅道 mysql 设置_老刀聊 JAVA 的博客-CSDN 博客_navicat 远程连接禅道数据库</a></li>
</ul>


                
            </main>

            <footer class="list-content-container">
                

                
            </footer>
        </article>
        
        <article id="1867823418" class="record">
            <header>
                <h1 class="record-title">Linux服务器添加SSL证书</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>1867823418</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>undefined</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('Apache');">Apache</button>
                    
                    <button class="btn" onclick="activeTag('CDN');">CDN</button>
                    
                    <button class="btn" onclick="activeTag('HTTPS');">HTTPS</button>
                    
                    <button class="btn" onclick="activeTag('Linux');">Linux</button>
                    
                    <button class="btn" onclick="activeTag('SSL');">SSL</button>
                    
                    <button class="btn" onclick="activeTag('腾讯云');">腾讯云</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>4/21/2022</span>
                </div>
                

                

                
                <div class="record-description">
                    <span>description :</span>
                    <span>拥有SSL证书后，如何安装到服务器？如果网站使用了CDN又如何配置？如果网站是WordPress网站？这篇文章提供了以上问题的解决方案。</span>
                </div>
                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/SSL_certificate-1cover.webp</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>6f54b93a</span>
                </div>
                
            </header>

            <main class="record-content">
                <p>为了让本网站加上一个小锁，探索了好久，终于弄成功了。先展示未安装证书之前：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-6as2.png" alt=""></p>
<p>现描述配置步骤如下。</p>
<blockquote>
<p>文章推荐：HTTPS 配置成功后不要错过这篇文章：<a href="#2201181434" title="博客域名解析管理与网站CDN加速域名配置" class="record-link">博客域名解析管理与网站CDN加速域名配置</a></p>
</blockquote>
<h1>获取 SSL 免费证书</h1>
<p>在云服务商上申请免费证书。证书有效期为 1 年。现以阿里云免费证书<a href="https://common-buy.aliyun.com/?spm=5176.13785142.commonbuy2container.9.73fd778bO616lz&amp;commodityCode=cas_dv_public_cn&amp;request=%7B%22ord_time%22:%221:Year%22,%22order_num%22:1,%22product%22:%22free_product%22,%22certCount%22:%2220%22%7D">云盾证书服务 (aliyun.com)</a>购买示例：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/HTTPS-1024x476.png" alt=""></p>
<p>在控制台下载证书：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-49-1024x280.png" alt=""></p>
<p>选择 Apache 服务器类型的证书进行下载（图中以 Apache 为例）：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-5as1.png" alt=""></p>
<p>得到一个压缩文件，文件包含以下内容：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-as50.png" alt=""></p>
<ul>
<li>证书文件：以.crt 为后缀或文件类型。</li>
<li>证书链文件：以.crt 为后缀或文件类型。</li>
<li>密钥文件：以.key 为后缀或文件类型。</li>
</ul>
<p>文档链接：<a href="https://help.aliyun.com/document_detail/98727.html?spm=5176.b657008.help.dexternal.7c2a799dBOiNbI">在 Apache 服务器上安装 SSL 证书 (aliyun.com)</a></p>
<h1>安装证书到 Nginx</h1>
<p><a href="https://help.aliyun.com/document_detail/98728.html?spm=a2c4g.198938.0.0.6c2a763e1G7ZPe">在 Nginx 或 Tengine 服务器安装 SSL 证书 (aliyun.com)</a></p>
<h1>安装证书到 Apache</h1>
<p>接下来请根据这篇指引进行配置安装：<a href="https://help.aliyun.com/document_detail/98727.html?spm=5176.b657008.help.dexternal.7c2a799dBOiNbI">在 Apache 服务器上安装 SSL 证书 (aliyun.com)</a></p>
<p>在实际操作中，我和指引中不同的是，mod_ssl.so 不需要在 httpd.conf 里进行引用。阿里云文档里的 http-ssl.conf，实际上就是/etc/httpd/conf.d/ssl.conf（安装好 mod_ssl.so 模块后，ssl.conf 文件就会产生）。</p>
<p>通过 FTP 传输工具把证书上传到指定位置，在配置时就用这个位置（右图）。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-52-1024x416.png" alt=""></p>
<p>httpd.conf</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/imageas-53.png" alt=""></p>
<p>ssl.conf</p>
<p>弄好后记得重启 Apache 服务器：</p>
<pre><code class="language-sh">apachectl restart
</code></pre>
<p>服务器的安全组记得开放 443 端口：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-5asasd4.png" alt=""></p>
<h1>CDN 中的 HTTPS 设置</h1>
<p>我一开始遇到的问题是这个：Apache 安装好证书后还是无法生效。Chrome 浏览器提醒的是证书不匹配，一看详情，他竟然在匹配腾讯云的 cdn 的证书......所以我认为 CDN 环节中还需要相应设置。（和我遇到同样的问题：<a href="https://cloud.tencent.com/developer/ask/21141">https://cloud.tencent.com/developer/ask/21141</a>）</p>
<p>解决方法如下所述。</p>
<p>如果你的网站开启了 CDN，比如我使用的是腾讯云的 CDN，那么需要在腾讯云控制台中进行设置：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-55-1024x86.png" alt=""></p>
<p>按照指引上传证书进行托管：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-56-1024x268.png" alt=""></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-5sad7.png" alt=""></p>
<p>上传成功后部署即可。</p>
<p>参考文档：<a href="https://cloud.tencent.com/document/product/400/51804">SSL 证书 安装部署 SSL 证书到内容分发网络（CDN）指引 - 证书安装 - 文档中心 - 腾讯云 (tencent.com)</a></p>
<h1>后续</h1>
<h2>WordPress 博客网站使用 HTTPS</h2>
<p>参考：<a href="#2062987538" title="WordPress 使用 HTTPS" class="record-link">WordPress 使用 HTTPS</a></p>
<h2>强制跳转 HTTPS</h2>
<p>在腾讯云域名控制台开启这个：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-63-1024x584.png" alt=""></p>
<h2>301 重定向以及 HSTS 等进阶配置</h2>
<p>精华文章：<a href="#2201181434" title="博客域名解析管理与网站CDN加速域名配置" class="record-link">博客域名解析管理与网站CDN加速域名配置</a></p>
<h1>其他链接</h1>
<p>我走过的弯路：<a href="https://www.ssls.com/knowledgebase/how-to-install-an-ssl-certificate-on-apache/?msclkid=525823b0c11911ec963df80c642b2f69">How to install an SSL Certificate on Apache – HelpDesk SSLs.com</a></p>


                
            </main>

            <footer class="list-content-container">
                
                <details class="record-links">
                    <summary class="menu-title">
                        links
                        <span class="badge">2</span>
                    </summary>

                    <ul class="record-links-list">
                        
                        <li data-target-id="2062987538">
                            <a href="#2062987538">
                                <span class="record-type-point" style="color: var(--n_wordpress);">⬤</span>
                                
                                <span>WordPress 使用 HTTPS</span>
                                <div class="record-links-context hover">
                                    <p>参考：<span class="id-context" data-target-id="2062987538">WordPress 使用 HTTPS</span></p>

                                </div>
                            </a>
                        </li>
                        
                        <li data-target-id="2201181434">
                            <a href="#2201181434">
                                <span class="record-type-point" style="color: var(--n_undefined);">⬤</span>
                                
                                <span>博客域名解析管理与网站CDN加速域名配置</span>
                                <div class="record-links-context hover">
                                    <blockquote>
<p>文章推荐：HTTPS 配置成功后不要错过这篇文章：<span class="id-context" data-target-id="2201181434">博客域名解析管理与网站CDN加速域名配置</span></p>
</blockquote>
<p>精华文章：<span class="id-context" data-target-id="2201181434">博客域名解析管理与网站CDN加速域名配置</span></p>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                

                
                <details class="record-backlinks" open="open">
                    <summary class="menu-title">
                        backlinks
                        <span class="badge">2</span>
                    </summary>

                    <ul class="record-backlinks-list">
                        
                        <li data-target-id="2062987538">
                            <a href="#2062987538">
                                <span class="record-type-point" style="color: var(--n_wordpress);">⬤</span>
                                
                                <span>WordPress 使用 HTTPS</span>
                                <div class="record-links-context hover">
                                    <p>[^1]: 参考<span class="id-context" data-target-id="1867823418">Linux服务器添加SSL证书</span></p>

                                </div>
                            </a>
                        </li>
                        
                        <li data-target-id="2346883624">
                            <a href="#2346883624">
                                <span class="record-type-point" style="color: var(--n_社会生活);">⬤</span>
                                
                                <span>成为一名个人博客网站站长</span>
                                <div class="record-links-context hover">
                                    <p>参看我的另一篇文章：<span class="id-context" data-target-id="1867823418">Linux服务器添加SSL证书</span><br>
精华文章：博客域名解析管理与网站CDN加速域名配置</p>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                
            </footer>
        </article>
        
        <article id="2062987538" class="record">
            <header>
                <h1 class="record-title">WordPress 使用 HTTPS</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>2062987538</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>WordPress</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('HTTPS');">HTTPS</button>
                    
                    <button class="btn" onclick="activeTag('SSL');">SSL</button>
                    
                    <button class="btn" onclick="activeTag('WordPress');">WordPress</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>4/21/2022</span>
                </div>
                

                

                
                <div class="record-description">
                    <span>description :</span>
                    <span>如果网站是WordPress网站，配置好证书后下一步怎么做？</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>7af6b112</span>
                </div>
                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/WPPIC.png</span>
                </div>
                
            </header>

            <main class="record-content">
                <p>服务器安装好证书后[^1]，访问WordPress博客还会提醒该站点“并非完全安全”。</p>
<p>[^1]: 参考<a href="#1867823418" title="Linux服务器添加SSL证书" class="record-link">Linux服务器添加SSL证书</a></p>
<p>WordPress 设置中修改地址：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-5sad8.png" alt=""></p>
<p>将 <code>http</code> 修改为 <code>https</code></p>
<p>如果修改不成功（比如页面不安全什么的），可以通过数据库修改：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-59asda.png" alt=""></p>
<p>登录服务器，修改文件：</p>
<p>1，修改的路径：\wp-includes\functions.php 文件<br>
2，打开修改 functions.php 文件，找到代码 require( ABSPATH . WPINC . ‘/option.php’ ); 在下方添加：</p>
<pre><code class="language-php">add_filter('script_loader_src', 'agnostic_script_loader_src', 20,2);
function agnostic_script_loader_src($src, $handle) {
  return preg_replace('/^(httphttps):/', '', $src);
}
add_filter('style_loader_src', 'agnostic_style_loader_src', 20,2);
function agnostic_style_loader_src($src, $handle) {
  return preg_replace('/^(httphttps):/', '', $src);
}
</code></pre>
<p>再修改配置文件：</p>
<p>在<a href="https://so.csdn.net/so/search?q=wordpress&amp;spm=1001.2101.3001.7020">wordpress</a>网站根目录中找到，<code>wp-config.php</code> 文件，</p>
<p>在文件开头位置中，添加如下代码：</p>
<pre><code>$_SERVER['HTTPS'] = 'on';
define('FORCE_SSL_LOGIN', true);
define('FORCE_SSL_ADMIN', true);
</code></pre>
<h2>成果</h2>
<p>可以使用检查工具检查：<a href="https://decoder.link/sslchecker/www.uuanqin.top/443">SSL Checker (decoder.link)</a></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/imageas-60.png" alt=""></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-61asda.png" alt=""></p>
<h1>本文参考</h1>
<p><a href="https://blog.csdn.net/weixin_43983960/article/details/120096009?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_title~default-1.pc_relevant_paycolumn_v3&amp;spm=1001.2101.3001.4242.2&amp;utm_relevant_index=2">【亲测】wordpress 如何开启全站 https-真实有效_前端小罗的博客-CSDN 博客_wordpress 设置 https</a></p>


                
            </main>

            <footer class="list-content-container">
                
                <details class="record-links">
                    <summary class="menu-title">
                        links
                        <span class="badge">1</span>
                    </summary>

                    <ul class="record-links-list">
                        
                        <li data-target-id="1867823418">
                            <a href="#1867823418">
                                <span class="record-type-point" style="color: var(--n_undefined);">⬤</span>
                                
                                <span>Linux服务器添加SSL证书</span>
                                <div class="record-links-context hover">
                                    <p>[^1]: 参考<span class="id-context" data-target-id="1867823418">Linux服务器添加SSL证书</span></p>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                

                
                <details class="record-backlinks" open="open">
                    <summary class="menu-title">
                        backlinks
                        <span class="badge">1</span>
                    </summary>

                    <ul class="record-backlinks-list">
                        
                        <li data-target-id="1867823418">
                            <a href="#1867823418">
                                <span class="record-type-point" style="color: var(--n_undefined);">⬤</span>
                                
                                <span>Linux服务器添加SSL证书</span>
                                <div class="record-links-context hover">
                                    <p>参考：<span class="id-context" data-target-id="2062987538">WordPress 使用 HTTPS</span></p>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                
            </footer>
        </article>
        
        <article id="1973703782" class="record">
            <header>
                <h1 class="record-title">【麒麟实训】我想在这次的实训项目中，达成怎样的目的？</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>1973703782</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>生活区</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('面试');">面试</button>
                    
                    <button class="btn" onclick="activeTag('麒麟实训');">麒麟实训</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>4/26/2022</span>
                </div>
                

                

                
                <div class="record-description">
                    <span>description :</span>
                    <span>这是实训的第一个作业，贯穿我们实训整个过程的重要环节。</span>
                </div>
                
                <div class="record-top_img">
                    <span>top_img :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/interview220426.png</span>
                </div>
                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/sx1.png</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>75a45466</span>
                </div>
                
            </header>

            <main class="record-content">
                <h1>面试</h1>
<p>虽然只是实训面试，但这也算我第一次感受到企业面试的思路和流程。本次面试我面试的是麒麟的生态运营部。</p>
<p>关注内容：</p>
<ul>
<li>你的简历。</li>
<li>你写在简历上的项目。在这之前问你还有没有补充，有补充的赶紧补充，接下来她要问项目了。</li>
<li>你的某个详细项目。你的角色和作用。</li>
</ul>
<p>知识与经验：</p>
<ul>
<li>Java 水平，Python 水平</li>
<li>面向对象的特点</li>
<li>是否了解交叉编译</li>
<li>浏览器输入网址后，点击确认键。之后发生了什么。</li>
</ul>
<p>善后：</p>
<ul>
<li>为什么选择这个部门</li>
<li>还有什么想问的</li>
</ul>
<h1>第一天</h1>
<p>我想在这次的实训项目中，达成怎样的目的？</p>
<ol>
<li>我想积累项目经验。不管是在学业上还是在以后找工作上，有一份真实的经验</li>
<li>学到开发知识，提高自己的编程能力。</li>
<li>初步体验工作环境</li>
<li>感受团队氛围。和大家在一起工作，认识几个新朋友，共同努力完成一份工作。这也是一个很不错的体验。</li>
</ol>
<h1>实训结束</h1>
<p>这个问题贯穿整个实训过程的重要环节。线下见面时，每个人都需要谈论整个问题，同时也需要用一个关键词描述自己对于这次实训所期待达成的目标。最后的答辩时，这个问题也是重要的考核问题。</p>
<hr>
<h1>附：实训系列</h1>
<p><a href="#1433349372" title="【麒麟实训】Deb的打包（小练习分享）" class="record-link">【麒麟实训】Deb的打包（小练习分享）</a><br>
<a href="#1126538397" title="【麒麟实训】撷英1 - Pyqt程序编译与打包探索" class="record-link">【麒麟实训】撷英1 - Pyqt程序编译与打包探索</a><br>
<a href="#2292934449" title="【麒麟实训】撷英2 - Python代码控制word文档模板" class="record-link">【麒麟实训】撷英2 - Python代码控制word文档模板</a><br>
<a href="#3536932394" title="【麒麟实训】撷英3 - Python执行Linux命令公共方法" class="record-link">【麒麟实训】撷英3 - Python执行Linux命令公共方法</a><br>
<a href="#2592625103" title="【麒麟实训】实训结束 - 感谢篇" class="record-link">【麒麟实训】实训结束 - 感谢篇</a></p>


                
            </main>

            <footer class="list-content-container">
                
                <details class="record-links">
                    <summary class="menu-title">
                        links
                        <span class="badge">5</span>
                    </summary>

                    <ul class="record-links-list">
                        
                        <li data-target-id="1126538397">
                            <a href="#1126538397">
                                <span class="record-type-point" style="color: var(--n_undefined);">⬤</span>
                                
                                <span>【麒麟实训】撷英1 - Pyqt程序编译与打包探索</span>
                                <div class="record-links-context hover">
                                    <p>【麒麟实训】Deb的打包（小练习分享）<br>
<span class="id-context" data-target-id="1126538397">【麒麟实训】撷英1 - Pyqt程序编译与打包探索</span><br>
【麒麟实训】撷英2 - Python代码控制word文档模板<br>
【麒麟实训】撷英3 - Python执行Linux命令公共方法<br>
【麒麟实训】实训结束 - 感谢篇</p>

                                </div>
                            </a>
                        </li>
                        
                        <li data-target-id="1433349372">
                            <a href="#1433349372">
                                <span class="record-type-point" style="color: var(--n_undefined);">⬤</span>
                                
                                <span>【麒麟实训】Deb的打包（小练习分享）</span>
                                <div class="record-links-context hover">
                                    <p><span class="id-context" data-target-id="1433349372">【麒麟实训】Deb的打包（小练习分享）</span><br>
【麒麟实训】撷英1 - Pyqt程序编译与打包探索<br>
【麒麟实训】撷英2 - Python代码控制word文档模板<br>
【麒麟实训】撷英3 - Python执行Linux命令公共方法<br>
【麒麟实训】实训结束 - 感谢篇</p>

                                </div>
                            </a>
                        </li>
                        
                        <li data-target-id="2292934449">
                            <a href="#2292934449">
                                <span class="record-type-point" style="color: var(--n_undefined);">⬤</span>
                                
                                <span>【麒麟实训】撷英2 - Python代码控制word文档模板</span>
                                <div class="record-links-context hover">
                                    <p>【麒麟实训】Deb的打包（小练习分享）<br>
【麒麟实训】撷英1 - Pyqt程序编译与打包探索<br>
<span class="id-context" data-target-id="2292934449">【麒麟实训】撷英2 - Python代码控制word文档模板</span><br>
【麒麟实训】撷英3 - Python执行Linux命令公共方法<br>
【麒麟实训】实训结束 - 感谢篇</p>

                                </div>
                            </a>
                        </li>
                        
                        <li data-target-id="2592625103">
                            <a href="#2592625103">
                                <span class="record-type-point" style="color: var(--n_生活区);">⬤</span>
                                
                                <span>【麒麟实训】实训结束 - 感谢篇</span>
                                <div class="record-links-context hover">
                                    <p>【麒麟实训】Deb的打包（小练习分享）<br>
【麒麟实训】撷英1 - Pyqt程序编译与打包探索<br>
【麒麟实训】撷英2 - Python代码控制word文档模板<br>
【麒麟实训】撷英3 - Python执行Linux命令公共方法<br>
<span class="id-context" data-target-id="2592625103">【麒麟实训】实训结束 - 感谢篇</span></p>

                                </div>
                            </a>
                        </li>
                        
                        <li data-target-id="3536932394">
                            <a href="#3536932394">
                                <span class="record-type-point" style="color: var(--n_undefined);">⬤</span>
                                
                                <span>【麒麟实训】撷英3 - Python执行Linux命令公共方法</span>
                                <div class="record-links-context hover">
                                    <p>【麒麟实训】Deb的打包（小练习分享）<br>
【麒麟实训】撷英1 - Pyqt程序编译与打包探索<br>
【麒麟实训】撷英2 - Python代码控制word文档模板<br>
<span class="id-context" data-target-id="3536932394">【麒麟实训】撷英3 - Python执行Linux命令公共方法</span><br>
【麒麟实训】实训结束 - 感谢篇</p>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                

                
                <details class="record-backlinks" open="open">
                    <summary class="menu-title">
                        backlinks
                        <span class="badge">1</span>
                    </summary>

                    <ul class="record-backlinks-list">
                        
                        <li data-target-id="3567162190">
                            <a href="#3567162190">
                                <span class="record-type-point" style="color: var(--n_生活区);">⬤</span>
                                
                                <span>那一年的暑假剪影</span>
                                <div class="record-links-context hover">
                                    <p>[^Kylin]: 更多内容详见<span class="id-context" data-target-id="1973703782">【麒麟实训】我想在这次的实训项目中，达成怎样的目的？</span></p>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                
            </footer>
        </article>
        
        <article id="1433349372" class="record">
            <header>
                <h1 class="record-title">【麒麟实训】Deb的打包（小练习分享）</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>1433349372</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>undefined</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('Deb包');">Deb包</button>
                    
                    <button class="btn" onclick="activeTag('Kylin');">Kylin</button>
                    
                    <button class="btn" onclick="activeTag('Linux');">Linux</button>
                    
                    <button class="btn" onclick="activeTag('麒麟实训');">麒麟实训</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>4/26/2022</span>
                </div>
                

                

                
                <div class="record-description">
                    <span>description :</span>
                    <span>Deb的两种打包方法小练习。附虚拟机安装Kylin的简要方法。</span>
                </div>
                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/sx2.png</span>
                </div>
                
                <div class="record-top_img">
                    <span>top_img :</span>
                    <span>https://typora-1301301520.cos.ap-nanjing.myqcloud.com/img/yinhekylin.png</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>556f2cfc</span>
                </div>
                
            </header>

            <main class="record-content">
                <p>练习Deb的打包流程。<strong>本文章为一次小练习的记录，操作过程多少有瑕疵，可能不适合实践参考。</strong>“实训撷英”专栏将有更专门的打包介绍。</p>
<p>文章部分内容来源于我的实训工作文档：<strong>《练习1过程文档（改进）》、《练习2过程文档（改进）》</strong>。规范的打包过程请参考《麒麟软件打包规范》。</p>
<h1>Deb的二进制文件打包</h1>
<p>创建DEBIAN文件夹、etc、opt、usr文件夹。</p>
<p>目录格式：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-64.png" alt=""></p>
<p>在DEBIAN文件夹下创建control文件：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-65.png" alt=""></p>
<blockquote>
<p>企业老师给出的意见：</p>
<p><strong>control文件中包含空的关键字，应该删除，如section无对应信息则不存在。</strong></p>
</blockquote>
<p>最终的目录结构：</p>
<pre><code class="language-tree">.
├── DEBIAN
│   └── control
├── etc
├── opt
│   └── sublime-text
│       ├── changelog.txt
│       ├── crash_reporter
│       ├── Lib
│       ├── libcrypto.so.1.1
│       ├── libssl.so.1.1
│       ├── Packages
│       ├── plugin_host-3.3
│       ├── plugin_host-3.8
|       ├── Icon 
│       └── sublime_text
└── usr
    └── share
        └── applications
        │   └── sublime_text.desktop
        └──icons
        └── hicolor
        	├──128x128
            │   └── apps
            │   └── sublime-text.png
            └──256x256
            ... ...
</code></pre>
<p>打包：</p>
<pre><code>sudo dpkg -b project project_v1.0.0_amd64.deb
</code></pre>
<p>安装：</p>
<pre><code>sudo dpkg -i project_v1.0.0_amd64.deb
</code></pre>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-66.png" alt=""></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/3419d8f19c789d4a0df5853d710f223.png" alt=""></p>
<p>新程序</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20220427112054890.png" alt=""></p>
<p>运行效果</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-69.png" alt=""></p>
<p>卸载：</p>
<pre><code class="language-bash">sudo dpkg -r project

# 干净卸载：
sudo dpkg -P sublime-text
</code></pre>
<p>参考：<a href="https://blog.csdn.net/LvJzzZ/article/details/109452895">deb打包流程步骤_逐渐江江江江化的博客-CSDN博客_deb打包</a></p>
<h1>问题解决</h1>
<h2>开始菜单图标显示不出来的问题</h2>
<p>请注意：图标目录<strong>Icons</strong>的名称和位置进行正确的设置、以及放置。参看上文给的目录树。</p>
<p>比如正确的放置方法时：icons/hicolor/128x128/下，还需要建立apps文件夹，里面放置png图标。</p>
<h2>打包报错：软件包名字错误</h2>
<p>注意，“Package”字段的内容，用“-”（减号）不用“_&quot;（下划线）哦，否则会报以下错误：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/b1019d44efa1006555b419258d254b2.png" alt=""></p>
<p>借shibo同学的图</p>
<h2>打包报错：与本机架构不符</h2>
<pre><code>sudo dpkg --add-architecture amd64
</code></pre>
<p>参考：<a href="https://blog.csdn.net/qiuchangyong/article/details/97505379">Ubuntu使用dpkg查看与修改architecture的用法_qiuchangyong的博客-CSDN博客</a></p>
<h1>Deb源码打包</h1>
<p>下载源码压缩包，解压。</p>
<pre><code>tar zxvf p7zip.tar.gz
</code></pre>
<p>将解压后的文件移动到构造好的目录中，得到以下目录结构：</p>
<pre><code>.
├── opt
│   └── apps
│       └── p7zip
│           ├── Asm
│           │   └── x86
│           ├── C
│           ├── check
│           ├── contrib
│           ├── CPP
│           ├── DOC
│           ├── GUI
│           ├── man1
│           └── Utils     // 不应该存放源码
└── usr
    └── share
        ├── applications
        └── icons
            └── hicolor
</code></pre>
<blockquote>
<p>企业老师给出的意见：</p>
<p>_不应该_将源码文件全部存放到/opt/apps/p7zip目录下（因为是二进制软件包，不应该将源码存放到对应目录下）；不应该有空目录/usr/share/icons/hicolor</p>
</blockquote>
<p>在/p7zip-16.02目录下执行指令：</p>
<pre><code>dh_make --createorig -s
</code></pre>
<p>生成debian文件夹。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20220506102802357.png" alt="image-20220506102802357"></p>
<p>修改debian/control</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20220506104427558.png" alt="image-20220506104427558"></p>
<p>在rules中添加Override：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20220506104934917.png" alt="image-20220506104934917"></p>
<p>在debian下创建install文件，并写入以下内容：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20220506110213565.png" alt="image-20220506110213565"></p>
<p>执行debuild命令：</p>
<pre><code class="language-bash">debuild -i -us -uc -b

# 生成过程需要补充安装以下软件（Build-Depends）
sudo apt-get install debhelper
</code></pre>
<p>这时，在源码文件的上一级目录会多出几个文件，其中就包括deb包：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20220506110901935.png" alt="image-20220506110901935"></p>
<p>执行安装：</p>
<pre><code>sudo dpkg -i p7zip_16.02_all.deb
</code></pre>
<p>查看安装效果：</p>
<pre><code>sudo dpkg -l p7zip
</code></pre>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20220506111049159.png" alt="image-20220428215252343"></p>
<p>可以正常卸载：</p>
<pre><code>sudo dpkg -P p7zip
</code></pre>
<p>卸载后查找不到p7zip。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20220506111234325.png" alt="image-20220506111234325"></p>
<h1>Deb源码打包（野生方法）</h1>
<p>从网上找来的自己摸索的方法。可能不符合麒麟软件的打包规范。这是初次练习的成果。</p>
<p>安装需要的工具：</p>
<pre><code>sudo apt-get install debmake
sudo apt-get install python3-debia
sudo apt-get install build-essential
</code></pre>
<p>生成debian文件夹配置文件：</p>
<pre><code>debmake -e unknow@unknow.cn -p p7zip -u 16.02 -f &quot;unknow unknow&quot; -n
</code></pre>
<p>命令解释：</p>
<ul>
<li>邮件地址 <a href="mailto:unknow@unknow.cn">unknow@unknow.cn</a></li>
<li>软件包名 p7zip</li>
<li>软件版本号 16.02</li>
<li>作者全名 unknow unknow</li>
</ul>
<p>命令执行后，会多出debian文件夹：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220427123914.png" alt="QQ截图20220427123914"></p>
<p>编辑debian/control</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220427235600.png" alt="QQ截图20220427235600"></p>
<p>生成deb包：</p>
<pre><code>sudo dpkg-buildpackage -us -uc -tc

# 生成过程需要补充安装以下软件（Build-Depends）
sudo apt-get install debhelper
</code></pre>
<p>这是，在源码文件的上一级目录会多出几个文件，其中就包括deb包：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220427230246.png" alt="QQ截图20220427230246"></p>
<p>执行安装：</p>
<pre><code>sudo dpkg -i p7zip_16.02_amd64.deb
</code></pre>
<p>查看安装效果：</p>
<pre><code>sudo dpkg -l p7zip
</code></pre>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220427235449.png" alt="QQ截图20220427235449"></p>
<p>参考：<a href="https://www.csdn.net/tags/NtjaEg0sNjY5NDMtYmxvZwO0O0OO0O0O.html">debmake - CSDN</a></p>
<h1>其他</h1>
<h2>虚拟机Kylin系统的安装</h2>
<p>请参看：<a href="https://www.jianshu.com/p/24a52d78d5a6">使用VirtualBox安装Kylin桌面版操作系统 - 简书 (jianshu.com)</a></p>
<p>屏幕调大的命令：</p>
<pre><code>xrandr -s 1920x1200_60 # 在麒麟终端输入
</code></pre>
<p>自己多试一下：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-70.png" alt=""></p>
<p>或者在麒麟桌面设置那里调，一劳永逸。</p>
<h2>tree命令</h2>
<p>安装：</p>
<pre><code>$ sudo apt-get install tree
</code></pre>
<p>使用：</p>
<pre><code>$ tree
$ tree -d # 仅列出目录
</code></pre>
<p>参考：<a href="https://blog.csdn.net/weixin_31445091/article/details/116543595">linux tree命令,Linux tree命令实例详解_章鱼老师的博客-CSDN博客</a></p>


                
            </main>

            <footer class="list-content-container">
                

                
                <details class="record-backlinks" open="open">
                    <summary class="menu-title">
                        backlinks
                        <span class="badge">1</span>
                    </summary>

                    <ul class="record-backlinks-list">
                        
                        <li data-target-id="1973703782">
                            <a href="#1973703782">
                                <span class="record-type-point" style="color: var(--n_生活区);">⬤</span>
                                
                                <span>【麒麟实训】我想在这次的实训项目中，达成怎样的目的？</span>
                                <div class="record-links-context hover">
                                    <p><span class="id-context" data-target-id="1433349372">【麒麟实训】Deb的打包（小练习分享）</span><br>
【麒麟实训】撷英1 - Pyqt程序编译与打包探索<br>
【麒麟实训】撷英2 - Python代码控制word文档模板<br>
【麒麟实训】撷英3 - Python执行Linux命令公共方法<br>
【麒麟实训】实训结束 - 感谢篇</p>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                
            </footer>
        </article>
        
        <article id="4028728107" class="record">
            <header>
                <h1 class="record-title">绿萝养殖日记</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>4028728107</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>生活区</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('绿植养护');">绿植养护</button>
                    
                    <button class="btn" onclick="activeTag('TJU');">TJU</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>5/13/2022</span>
                </div>
                

                

                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>f021832b</span>
                </div>
                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/20231022173853.webp</span>
                </div>
                
                <div class="record-description">
                    <span>description :</span>
                    <span>养着玩的，有时上心、有时又不上心</span>
                </div>
                
                <div class="record-top_img">
                    <span>top_img :</span>
                    <span></span>
                </div>
                
            </header>

            <main class="record-content">
                <blockquote>
<p>[!hint] 阅读提示<br>
本篇文章背景为学校学部组织的学部活动，征集植树节期间获得绿苗奖品的同学写的绿苗养护日记。文章的主要内容于 2022 年 5 月 13 日完成，并于 2023 年 10 月 6 日发表于博客。搬迁过程中做了格式修改，并增加本提示与末尾「其他信息」章节。原文部分内容曾在学部公众号公开过，因此被选为本站第一批公开的生活类文章之一。</p>
</blockquote>
<h1>领取我的小绿萝 🌿🌿🌿（3 月 22 日）</h1>
<p>领取我的小绿萝，可能是晚到了一点，精挑细选也是都是病怏怏的 😮（室友戏称蔫菜叶）。没事，一个月后肯定能把它养活，<strong>精神状态</strong>保证上升一个层次！</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231016130039.webp" alt="image.png"></p>
<h1>遭遇不测 一片又一片的叶子枯黄掉落 🍂🍂</h1>
<p>没几天，那些软弱的叶子开始==发蔫发黄==了。某些叶片开始出现黄边，持续扩大，且出现 <strong>“叶传叶”</strong> 的现象，值得警惕！🚨</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231016130103.webp" alt="image.png"></p>
<h1>茂盛一时 🌳</h1>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231016130135.webp" alt="image.png"></p>
<h1>护苗行动 🍀</h1>
<p>😥 下面四张图片记录了最大一片叶子的枯萎过程 🌱🌿🌳🍃🍂：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231016130156.webp" alt="image.png"></p>
<p>再这样下去我的小绿萝<strong>s 了</strong>咋办 😣！从今天开始，执行护苗措施。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231016130222.webp" alt="image.png"></p>
<h1>重获新生 向上生长 🌲</h1>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231016130236.webp" alt="image.png"></p>
<p><strong>展开了！</strong> 它不断地<strong>展开了！</strong> 🙂🙂</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/c311d6ae-3f4d-4046-897c-d7bbb82c5e40.webp" alt="c311d6ae-3f4d-4046-897c-d7bbb82c5e40.jpg|156"></p>
<p>改善之后的花盆好看了许多！新的叶子开始不断展开，向上生长。</p>
<p>至此，绿萝步入了<strong>新时代</strong>！</p>
<h1>成果展示！🌷（5 月 13 日）</h1>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231016130251.webp" alt="image.png"><br>
今日的阶段成果展示！新叶子越长越高，黄叶片也不在出现。黄叶 <strong>“动态清零”</strong> 的措施生效了！在我精心照顾下，绿萝将有一个光明美好的未来 😜！</p>
<h1>小结</h1>
<p>通过这次的养活绿植活动，我收获了许多养护植物的知识，观察到我曾经没有发现的养护注意点。除此之外，我也收获了一个“绿色”伴侣，在百忙的学习和工作中观察 ta，呵护 ta 也是释放压力的好方式。</p>
<h1>其他信息</h1>
<p>相关链接：</p>
<ul>
<li><a href="https://mp.weixin.qq.com/s/_1N7iWjDRYU-NGkwdfBUoQ">&quot;绿植养护日记&quot;评选及分享（上） (qq.com)</a></li>
<li><a href="https://mp.weixin.qq.com/s/vihO9BZXKanakAPovsLYVg">&quot;绿植养护日记&quot;评选及分享（中） (qq.com)</a></li>
</ul>
<p>绿苗后续：</p>
<ul>
<li>当年年底，由于绿苗放置于室外并疏于照顾导致冻死。</li>
<li>次年 6 月，毕业季原盆栽一起丢弃。</li>
</ul>


                
            </main>

            <footer class="list-content-container">
                

                
            </footer>
        </article>
        
        <article id="1042" class="record">
            <header>
                <h1 class="record-title">设备管理器网卡属性没有电源管理选项卡的解决方法</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>1042</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>undefined</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('WOL');">WOL</button>
                    
                    <button class="btn" onclick="activeTag('注册表');">注册表</button>
                    
                    <button class="btn" onclick="activeTag('网卡');">网卡</button>
                    
                    <button class="btn" onclick="activeTag('设备管理器');">设备管理器</button>
                    
                    <button class="btn" onclick="activeTag('问题解决');">问题解决</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>7/1/2022</span>
                </div>
                

                

                
                <div class="record-description">
                    <span>description :</span>
                    <span>通过修改注册表的方式显示网卡的“电源管理”选项卡。</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>dec4b8f</span>
                </div>
                
            </header>

            <main class="record-content">
                <p>在设置网卡属性时，有时候（比如在设置WOL时）需要在“电源管理”选项卡中进行相应设置。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20220627115459612.png" alt="image-20220627115459612"></p>
<p>但在某些情况下并没有这个选项卡。这里提供一个修改注册表的方法。</p>
<p><strong>注意：修改注册表有风险，容易引起系统的不稳定，建议在修改前备份注册表！！</strong></p>
<p>打开注册表编辑器，在对应位置增加字段：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20220627120834579.png" alt="image-20220627120834579"></p>
<p>关机重启电脑即可。</p>
<h1>疑似副作用</h1>
<p>关机按钮没有睡眠这一项。轻按键盘关机键原本是直接睡眠，不关电脑。现在直接关电脑，但重启时仍保持关闭时的布局。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20220627121017453.png" alt="image-20220627121017453"></p>
<p>参考链接：<a href="https://answers.microsoft.com/en-us/windows/forum/all/power-management-tab-is-missing-in-device-manager/f84fe229-fb66-4aa1-a397-e9ac65f791e5">Power management tab is missing in device manager! - Microsoft Community</a></p>


                
            </main>

            <footer class="list-content-container">
                

                
            </footer>
        </article>
        
        <article id="1126538397" class="record">
            <header>
                <h1 class="record-title">【麒麟实训】撷英1 - Pyqt程序编译与打包探索</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>1126538397</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>undefined</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('Deb包');">Deb包</button>
                    
                    <button class="btn" onclick="activeTag('pyinstaller');">pyinstaller</button>
                    
                    <button class="btn" onclick="activeTag('PyQt');">PyQt</button>
                    
                    <button class="btn" onclick="activeTag('Python');">Python</button>
                    
                    <button class="btn" onclick="activeTag('编译');">编译</button>
                    
                    <button class="btn" onclick="activeTag('Linux');">Linux</button>
                    
                    <button class="btn" onclick="activeTag('麒麟实训');">麒麟实训</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>7/1/2022</span>
                </div>
                

                

                
                <div class="record-description">
                    <span>description :</span>
                    <span>pyqt程序的编译与打包基本流程与示例。</span>
                </div>
                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/sx3.png</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>43259c9d</span>
                </div>
                
            </header>

            <main class="record-content">
                <p>本篇文章内容仅供简略参考。</p>
<p>文章内容来源于我的<strong>飞书文档&gt;麒麟实训&gt;大作业-编译与打包</strong>，更多问题的详细记录、示例文件以及调研文档请参看源文档。</p>
<h1>Python源码编译</h1>
<p>python编译<br>
安装pyinstaller:</p>
<pre><code class="language-sh">pip install https://github.com/pyinstaller/pyinstaller/tarball/develop
</code></pre>
<p>只需对入口文件执行命令：</p>
<pre><code class="language-sh"># 两种打包方式
pyinstaller -F run.py # 打包成一个二进制文件，但启动速度慢
pyinstaller -D run.py # 打包出多个文件，程序启动速度快
</code></pre>
<p>参考：<br>
<a href="http://c.biancheng.net/view/2690.html">Python PyInstaller安装和使用教程（详解版） (biancheng.net)</a><br>
<a href="https://blog.csdn.net/qq_38316721/article/details/122599987">PyQt5软件打包_王火火的博客-CSDN博客_pyqt打包</a></p>
<h1>Pyqt窗口图标</h1>
<p>关于应用程序窗口图标显示问题可参考：<a href="http://t.zoukankan.com/jingsupo-p-13536449.html">http://t.zoukankan.com/jingsupo-p-13536449.html</a><br>
加代码的地方：在ui转成的.py文件</p>
<pre><code class="language-python">self.setWindowIcon(QIcon(':/signal-slot-demo.ico'))
</code></pre>
<p>打包后，编译生成的二进制文件的同级目录需要放上图标。</p>
<h1>打包过程总览</h1>
<ol>
<li>按照《麒麟软件打包规范》构造deb包目录</li>
<li>打开源码项目执行<code>pyinstaller -D run.py -n signal-slot-demo</code></li>
<li>在pyinstaller中生成的signal-slot-demo文件夹中添加icon图标。并将该文件夹放入构造好的deb包目录下的/opt/apps/中</li>
</ol>
<p><img src="https://typora-1301301520.cos.ap-nanjing.myqcloud.com/img/asynccode" alt="img"></p>
<ol start="4">
<li>进入构造好的目录，执行命令：<code>debuild -i -us -uc -b</code></li>
<li>返回上一级目录执行：<code>sudo dpkg -i signal-slot-demo_1.0.0-1_all.deb</code></li>
</ol>
<p>结果：运行正常。窗口图标、任务栏图标、开始菜单栏图标运行正常。（开始菜单栏中的图标是.desktop文件中Icon指定的svg图标。程序窗口以及任务栏图标是Pyqt中代码指定的图标。）</p>
<h1>具体文件示例</h1>
<p>Control 文件</p>
<pre><code>Source: signal-slot-demo
Version: 1.0.0
Maintainer: Wu WanQin &lt;wuanqin@tju.edu.cn&gt;
Section: unknown
Priority: optional
Build-Depends: debhelper
Standards-Version: 4.4.1
Homepage: https://uuanqin.top

Package:signal-slot-demo
Multi-Arch: foreign
Architecture: all
Depends: ${shlibs:Depends}, ${misc:Depends}
Description: 信号与信号槽示例。
</code></pre>
<p>Install 文件</p>
<pre><code>opt/apps/signal-slot-demo/ /opt/apps
usr/share /usr/
</code></pre>
<p>.desktop 文件</p>
<pre><code class="language-desktop">[Desktop Entry]
Name=Signal-Slot-Demo
Comment=An example
Exec=/opt/apps/signal-slot-demo/signal-slot-demo %F
Icon=/usr/share/icons/scalable/apps/signal-slot-demo.svg
Terminal=false
Type=Application
X-Ubuntu-Touch=true
Categories=Office
</code></pre>


                
            </main>

            <footer class="list-content-container">
                

                
                <details class="record-backlinks" open="open">
                    <summary class="menu-title">
                        backlinks
                        <span class="badge">1</span>
                    </summary>

                    <ul class="record-backlinks-list">
                        
                        <li data-target-id="1973703782">
                            <a href="#1973703782">
                                <span class="record-type-point" style="color: var(--n_生活区);">⬤</span>
                                
                                <span>【麒麟实训】我想在这次的实训项目中，达成怎样的目的？</span>
                                <div class="record-links-context hover">
                                    <p>【麒麟实训】Deb的打包（小练习分享）<br>
<span class="id-context" data-target-id="1126538397">【麒麟实训】撷英1 - Pyqt程序编译与打包探索</span><br>
【麒麟实训】撷英2 - Python代码控制word文档模板<br>
【麒麟实训】撷英3 - Python执行Linux命令公共方法<br>
【麒麟实训】实训结束 - 感谢篇</p>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                
            </footer>
        </article>
        
        <article id="2292934449" class="record">
            <header>
                <h1 class="record-title">【麒麟实训】撷英2 - Python代码控制word文档模板</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>2292934449</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>undefined</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('CSV');">CSV</button>
                    
                    <button class="btn" onclick="activeTag('HTML');">HTML</button>
                    
                    <button class="btn" onclick="activeTag('lxml');">lxml</button>
                    
                    <button class="btn" onclick="activeTag('OLE');">OLE</button>
                    
                    <button class="btn" onclick="activeTag('Python');">Python</button>
                    
                    <button class="btn" onclick="activeTag('Word');">Word</button>
                    
                    <button class="btn" onclick="activeTag('XML');">XML</button>
                    
                    <button class="btn" onclick="activeTag('实现');">实现</button>
                    
                    <button class="btn" onclick="activeTag('Linux');">Linux</button>
                    
                    <button class="btn" onclick="activeTag('麒麟实训');">麒麟实训</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>7/1/2022</span>
                </div>
                

                

                
                <div class="record-description">
                    <span>description :</span>
                    <span>Python实现填充Word文档模板。</span>
                </div>
                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/sx3.png</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>88ab6731</span>
                </div>
                
            </header>

            <main class="record-content">
                <p>通过python是可以控制word文档内容的，本篇文章简要介绍其原理，具体实现与实际案例可看我的开源项目。详细文档可查看我的<strong>飞书文档&gt;麒麟实训&gt;大作业-文档生成工具</strong>。</p>
<h3>简介</h3>
<p>文档生成工具主要通过对自动化适配工具生成的csv报告、html报告进行读取、解析、整理，进而生成指定的word总报告。</p>
<p>项目地址：<a href="https://gitee.com/uuanqin/report_generator.git">https://gitee.com/uuanqin/report_generator.git</a></p>
<h3>基本原理</h3>
<p>每一个word文档都可以通过xml表示，这个xml中包含文字信息和格式信息。通过给定的doc报告模板，我们可以以xml的方式进行操作，在实现增删改查xml元素的同时保持原有给定的格式基本不变。</p>
<h3>业务流程</h3>
<p>伪代码：</p>
<ul>
<li>获取所有生成最终报告需要的源报告路径</li>
<li>根据路径对文件及文件夹进行读取</li>
<li>对每个文件中的数据提取、解析、整理</li>
<li>读取报告模板，填写每个部分的word表格</li>
<li>“FAIL&quot;,&quot;PASS&quot;字体染色</li>
<li>保存为中间文件_temp.xml_</li>
<li>读取_temp.xml_，替换其中的变量，保存为中间文件 <em>麒麟操作系统适配认证自动化测试报告.xml</em></li>
<li>移动 <em>麒麟操作系统适配认证自动化测试报告.xml</em> 到目标文件夹中，修改后缀为.doc</li>
</ul>
<h3>效果示例</h3>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20220701160509387.png" alt="image-20220701160509387"></p>
<h3>文档对象插入</h3>
<p>关于python控制word中的文档对象可查看以下方法：</p>
<p><a href="https://blog.csdn.net/u011420268/article/details/106402153/">python在word文档里插入文件对象_奶爸大山的博客-CSDN博客_python word附件</a></p>
<p>经我与导师们实际调研与操作得到以下结论：</p>
<ul>
<li>需要事先在word插入好文档对象，我们才可能通过代码改变这个文档对象。</li>
<li>python代码中只能改变文档对象指向的内容，新增加文档对象。</li>
<li>支持改变的文档对象只能是xlsx格式或docx格式，其他格式的文档对象插入时，生成的ole.bin文件暂时没找到办法进行生成。</li>
</ul>


                
            </main>

            <footer class="list-content-container">
                

                
                <details class="record-backlinks" open="open">
                    <summary class="menu-title">
                        backlinks
                        <span class="badge">1</span>
                    </summary>

                    <ul class="record-backlinks-list">
                        
                        <li data-target-id="1973703782">
                            <a href="#1973703782">
                                <span class="record-type-point" style="color: var(--n_生活区);">⬤</span>
                                
                                <span>【麒麟实训】我想在这次的实训项目中，达成怎样的目的？</span>
                                <div class="record-links-context hover">
                                    <p>【麒麟实训】Deb的打包（小练习分享）<br>
【麒麟实训】撷英1 - Pyqt程序编译与打包探索<br>
<span class="id-context" data-target-id="2292934449">【麒麟实训】撷英2 - Python代码控制word文档模板</span><br>
【麒麟实训】撷英3 - Python执行Linux命令公共方法<br>
【麒麟实训】实训结束 - 感谢篇</p>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                
            </footer>
        </article>
        
        <article id="3536932394" class="record">
            <header>
                <h1 class="record-title">【麒麟实训】撷英3 - Python执行Linux命令公共方法</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>3536932394</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>undefined</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('Linux');">Linux</button>
                    
                    <button class="btn" onclick="activeTag('Python');">Python</button>
                    
                    <button class="btn" onclick="activeTag('subprocess');">subprocess</button>
                    
                    <button class="btn" onclick="activeTag('实现');">实现</button>
                    
                    <button class="btn" onclick="activeTag('麒麟实训');">麒麟实训</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>7/1/2022</span>
                </div>
                

                

                
                <div class="record-description">
                    <span>description :</span>
                    <span>Linux下使用Python执行命令。</span>
                </div>
                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/sx4.png</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>d2d14e2a</span>
                </div>
                
            </header>

            <main class="record-content">
                <p>废话不说，show you my code，自己看。</p>
<p>这些公共方法可以直接用于<strong>执行sudo指令、验证用户密码、以及执行普通命令</strong>。</p>
<pre><code class="language-python">def sudo_verify(password:str):
    &quot;&quot;&quot;
    在使用sudo命令之前最好调用一次该程序验证sudo密码的正确性。
    :param password: 需要验证的密码
    :return: 布尔类型 表示通过与否，字符串类型表示返回信息。（密码正确时返回空串）
    &quot;&quot;&quot;
    test_str = 'sudo test'

    echo = subprocess.Popen(['echo', password], stdout=subprocess.PIPE, )

    sudo = subprocess.Popen(['sudo', '-S', 'echo', test_str],
                            stdin=echo.stdout,
                            stdout=subprocess.PIPE,
                            # stderr=subprocess.PIPE
                            )

    return_str = sudo.stdout.read().decode().replace(&quot;\n&quot;,&quot;&quot;)
    if return_str == test_str:
        return True,&quot;&quot;
    else:
        return False,return_str.replace(&quot;\n&quot;,&quot;&quot;)


def sudo_do_something(password:str,command:list):
    &quot;&quot;&quot;
    调用此方法以执行需要加sudo的命令。
    :param password: 密码
    :param command: 列表,如：['./run.sh', test_type, debpkg]
    :return:
    &quot;&quot;&quot;
    is_pass,rtstring=sudo_verify(password)
    if is_pass:
        echo = subprocess.Popen(['echo', password], stdout=subprocess.PIPE, )
        sudo = subprocess.Popen(['sudo', '-S'] + command,
                                stdin=echo.stdout,
                                stdout=subprocess.PIPE,
                                # stderr=subprocess.PIPE
                                )

        rtstring = sudo.stdout.read().decode()
    return is_pass,rtstring

def command(command):
    p = subprocess.Popen(command,
                            # stdin=echo.stdout,
                            stdout=subprocess.PIPE,
                            # stderr=subprocess.PIPE
                            )

    rtstring = p.stdout.read().decode()
    return rtstring
</code></pre>


                
            </main>

            <footer class="list-content-container">
                

                
                <details class="record-backlinks" open="open">
                    <summary class="menu-title">
                        backlinks
                        <span class="badge">1</span>
                    </summary>

                    <ul class="record-backlinks-list">
                        
                        <li data-target-id="1973703782">
                            <a href="#1973703782">
                                <span class="record-type-point" style="color: var(--n_生活区);">⬤</span>
                                
                                <span>【麒麟实训】我想在这次的实训项目中，达成怎样的目的？</span>
                                <div class="record-links-context hover">
                                    <p>【麒麟实训】Deb的打包（小练习分享）<br>
【麒麟实训】撷英1 - Pyqt程序编译与打包探索<br>
【麒麟实训】撷英2 - Python代码控制word文档模板<br>
<span class="id-context" data-target-id="3536932394">【麒麟实训】撷英3 - Python执行Linux命令公共方法</span><br>
【麒麟实训】实训结束 - 感谢篇</p>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                
            </footer>
        </article>
        
        <article id="2592625103" class="record">
            <header>
                <h1 class="record-title">【麒麟实训】实训结束 - 感谢篇</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>2592625103</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>生活区</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('总结');">总结</button>
                    
                    <button class="btn" onclick="activeTag('麒麟实训');">麒麟实训</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>7/1/2022</span>
                </div>
                

                

                
                <div class="record-description">
                    <span>description :</span>
                    <span>实训结束，未来可期。</span>
                </div>
                
                <div class="record-top_img">
                    <span>top_img :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/%25E5%259B%25BE%25E7%2589%2587202207011726.jpg</span>
                </div>
                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/sx6.png</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>9a8851cf</span>
                </div>
                
            </header>

            <main class="record-content">
                <p>本文章为闲聊心得文。</p>
<h1>技术备忘</h1>
<p>关于大项目开发中有几个技术核心点是值得学习和利用的：</p>
<ul>
<li>PyQt UI界面设计</li>
<li>跳转设计</li>
<li>样式设计</li>
<li>合作开发模式</li>
<li>Pyqt子窗口嵌入</li>
<li>终端嵌入的实现方法</li>
</ul>
<h1>未来可探究</h1>
<p>项目还存在发展空间（我们还可以做到更好的点）：</p>
<ul>
<li>UI用例显示</li>
<li>UI日志友好回显</li>
<li>成功打包、安装、运行PyQt项目</li>
<li>打开目录时不卡顿的解决</li>
</ul>
<h1>答辩</h1>
<p>当初见面时，自己定的目标是“成就”，后改口“成长”。毕竟实训只是一个平台，能实现“成就”的平台还要自己探索，取得“成就”的能力还需要自己去培养。</p>
<p>导师问题：</p>
<ul>
<li>这次实训，你的目标达成了百分之多少？还需要做哪些努力以达到这个目标？</li>
<li>对于这次实训你有什么想说的？有什么想吐槽的？</li>
<li>如果大项目再重新做，你会怎样做？项目还有哪些需要改进的地方？</li>
</ul>
<hr>
<h1>总结与回顾</h1>
<p>两个多月的共同工作，对于我来说是收获了许多经验的。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20220701173447198.png" alt="image-20220701173447198"></p>
<p>期间做了许多工作，了解到了许多工作流程。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20220701173528924.png" alt="image-20220701173528924"></p>
<p>不管是画图还是代码、文档，有始有终做完一件事情是十分有成就感的。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20220701173710136.png" alt="image-20220701173710136"></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20220701173731781.png" alt="image-20220701173731781"></p>
<p>期间，自己开辟新战线。自我钻研时我感觉十分自由。当然团队合作时对每个人也是一个考验。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20220701173923859.png" alt="image-20220701173923859"></p>
<p>交到玩的不错的新朋友、体验一次十分不错的团队合作也是我的重要收获之一。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20220701174025478.png" alt="image-20220701174025478"></p>
<p>有成就，也有遗憾。希望未来的我们都在自己的道路上发光发热。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20220701174237168.png" alt="image-20220701174237168"></p>
<p>十分感谢一起合作的同学们，以及陪伴我们成长的导师们！</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/%E5%9B%BE%E7%89%87202207011726.jpg" alt="image"></p>
<p>有缘再聚！</p>


                
            </main>

            <footer class="list-content-container">
                

                
                <details class="record-backlinks" open="open">
                    <summary class="menu-title">
                        backlinks
                        <span class="badge">1</span>
                    </summary>

                    <ul class="record-backlinks-list">
                        
                        <li data-target-id="1973703782">
                            <a href="#1973703782">
                                <span class="record-type-point" style="color: var(--n_生活区);">⬤</span>
                                
                                <span>【麒麟实训】我想在这次的实训项目中，达成怎样的目的？</span>
                                <div class="record-links-context hover">
                                    <p>【麒麟实训】Deb的打包（小练习分享）<br>
【麒麟实训】撷英1 - Pyqt程序编译与打包探索<br>
【麒麟实训】撷英2 - Python代码控制word文档模板<br>
【麒麟实训】撷英3 - Python执行Linux命令公共方法<br>
<span class="id-context" data-target-id="2592625103">【麒麟实训】实训结束 - 感谢篇</span></p>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                
            </footer>
        </article>
        
        <article id="3567162190" class="record">
            <header>
                <h1 class="record-title">那一年的暑假剪影</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>3567162190</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>生活区</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('考研');">考研</button>
                    
                    <button class="btn" onclick="activeTag('暑假');">暑假</button>
                    
                    <button class="btn" onclick="activeTag('计算机');">计算机</button>
                    
                    <button class="btn" onclick="activeTag('TJU');">TJU</button>
                    
                    <button class="btn" onclick="activeTag('USTC');">USTC</button>
                    
                    <button class="btn" onclick="activeTag('文明6');">文明6</button>
                    
                    <button class="btn" onclick="activeTag('Cities Skylines');">Cities Skylines</button>
                    
                    <button class="btn" onclick="activeTag('飞书');">飞书</button>
                    
                    <button class="btn" onclick="activeTag('Xmind');">Xmind</button>
                    
                    <button class="btn" onclick="activeTag('Bilibili');">Bilibili</button>
                    
                    <button class="btn" onclick="activeTag('软件工程');">软件工程</button>
                    
                    <button class="btn" onclick="activeTag('云盘');">云盘</button>
                    
                    <button class="btn" onclick="activeTag('日记');">日记</button>
                    
                    <button class="btn" onclick="activeTag('游戏');">游戏</button>
                    
                    <button class="btn" onclick="activeTag('效率');">效率</button>
                    
                    <button class="btn" onclick="activeTag('碎碎念');">碎碎念</button>
                    
                    <button class="btn" onclick="activeTag('疫情');">疫情</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>8/7/2022</span>
                </div>
                

                

                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/20231016002154.webp</span>
                </div>
                
                <div class="record-description">
                    <span>description :</span>
                    <span>暑假留校备战考研的一段时光剪影</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>d49e934e</span>
                </div>
                
                <div class="record-top_img">
                    <span>top_img :</span>
                    <span></span>
                </div>
                
            </header>

            <main class="record-content">
                <blockquote>
<p>[!hint] 导读提示<br>
2022 年暑假，Bilibili 开启文章专栏活动，鼓励 UP 主们写文字专栏瓜分现金，要求全勤打卡 14 天。当时正值暑假，我留校备战考研。由于文字已经公开于网络一段时间，没有审核与隐私顾虑，所以入选为本站公开的第一批生活类文章。</p>
<p>很久很久没有写过这种日记式的文章，回看那年的文字感觉质量还是挺不错的（毕竟在字数、奖赏与公众目光下写成的，这种模式好像我小学生写日记的样子）。这种感觉是打开了一个密封罐，还能呼吸到夏日银杏树的气息。</p>
<p>14 天的文章于 2022 年 8 月 7 日完成，并在 2023 年 10 月 16 日搬迁到博客网站。搬迁过程中主要做了以下调整：增加本导读提示；新起博客文章标题「那一年的暑假剪影」；对格式进行调整；新增脚注以补充更多内容。</p>
</blockquote>
<h1>day1 备战期间平常的一天</h1>
<p>偶然间看见了哔哩哔哩这个活动，看见参与门槛不高，干脆就来玩玩。毕竟在三年大学生活中也是这样，这儿试试、那儿耍耍，虽然奖励不多，但是写写文字照照相，对身心和思维总是有好处的。</p>
<p>哔哩哔哩的这个日更挑战，估计有以下几个目的：</p>
<ol>
<li>鼓励用户发表专栏文章，进行优质的文字创作</li>
<li>培养用户使用专栏的习惯</li>
<li>丰富专栏生态，打造哔哩哔哩卢浮宫</li>
</ol>
<p>当然在这两周里，我会利用这个机会，对生活中的一些事情进行更加细致的思考，丰富自己搭建的思想内容库。</p>
<p>今天距离考研还有 150 天，目前数学科目基本完成了一轮的复习，专业课完成了 1.5 本书的学习。我对自己目前进度的感觉是处于中下水平进度。数学尤其是高等数学，还需要再进一步加深复习。其实，对于每天早上的时间还是可以更加充分的利用的。白天时间需要严格控制刷短视频的时间，晚上需要早睡。必要时在临睡前两个小时，完成中等强度的有氧运动，比如跑步。</p>
<p>今天干的一件非学习相关的事情是解决了思维导图 Xmind 软件多端同步的问题。详细的解决方案也已经发布在自己的网站上[^Xmind]。</p>
<p>由于某些特殊的原因，家里面要求我斋戒一天。首先明确的一点是，我是一个受教育的唯物主义者，但是我尊重中国的民俗习惯。我对中国的民俗文化非常感兴趣，也有意愿去了解这些古老神秘的事情。在不涉及大是大非问题以及自己和他人的核心利益上，我愿意遵从这种传统习俗。但是实际上，我今天斋戒了，又好像没有斋戒。晚上吃了一碗玉米鱼粉，特意点了素的，后来才意识到，渔粉的汤应该是包含有动物原料做成的。好吧，管他呢-_-||。</p>
<p>今天也是第一天探索这样每天挤出五百字以上文字时需要谈什么内容，并且文字会公开。想来想去，干脆就写一篇不伦不类的小学生日记吧，写流水账什么的最简单了。</p>
<p>嗯，我看我已经说了五百字了（暴露了），那今天就这样～</p>
<p>[^Xmind]: 应该是这篇文章<a href="#3437638411" title="本地文件夹的多端同步" class="record-link">本地文件夹的多端同步</a>，不过现在的文章内容可能有改版和修正。</p>
<h1>day2 我对我所学专业的一点思考</h1>
<p>学了三年的计算机，从一开始的一张白纸，到现在“有点痕迹”的白纸，我对计算机这门专业有自己的思考。就以 408 划分的科目来看，计算机有四大基础板块：</p>
<ul>
<li>数据结构。这是在学一种思维和设计方法。</li>
<li>计算机组成原理。了解底层硬件工作方式。</li>
<li>操作系统。底层软件调度硬件工作方式。</li>
<li>计算机网络。上层基础服务的实现。</li>
</ul>
<p>就我的大学课程而言，还可以总结出以下几个类别：</p>
<ul>
<li>设计与思维：设计模式，面向对象，软件测试，算法</li>
<li>结构管理：数据库，软件体系结构，架构驱动的程序设计</li>
<li>数据处理与表达：图像处理，人工智能</li>
<li>应用：可视化，计算机图形学</li>
<li>开发模式：软件工程</li>
</ul>
<p>关于科研方向主要就是几个方面：</p>
<ul>
<li>把自然物变为数据进行处理与再生表达</li>
<li>对计算机这个工具本身进行组织和优化</li>
<li>对软件体系进行组织和优化</li>
<li>算法设计</li>
<li>(好像没见过对软件工程过程优化的，主要是经验)</li>
</ul>
<p>参加实训[^Kylin]了之后，对大公司做的事情有了部分的了解。他们需要做的就是成果转化，在给定的业务需求下，使用“计算机”这种工具来达到目标。</p>
<p>计算机是人们对微观之物进行组织的外在表现形式。计算机可以感应外物，把外界信息作为数据处理。当设计好的微观组织能嵌入自然物时，自然物就被赋予了可操控的属性。这样，计算机就有了双向交流的特性。</p>
<p>计算机是我唯一要全身心致力其中的学科，我想不到我还能干其他什么事情（音乐和画画还可以）。我喜欢计算机在于我可以用简练的逻辑语言去观察、控制身边的各种事物，就像是人类的一种超能力一样。这种底层逻辑，为属于自己或属于他人的事物赋予了更多的价值。</p>
<p>[^Kylin]: 更多内容详见<a href="#1973703782" title="【麒麟实训】我想在这次的实训项目中，达成怎样的目的？" class="record-link">【麒麟实训】我想在这次的实训项目中，达成怎样的目的？</a></p>
<h1>day3 执念和性格</h1>
<p>今天谈论的话题是进入计算机软件行业的学习后，我对电子设备上的各种执念。</p>
<p>首先就是我有轻微“电子洁癖”。就是看到自己的电脑或手机上，出现不相关的、无用的事物时，我总眼睛痒，想把它处理干净，或优雅地藏起来。比如在电脑上安装 390<a href="%E4%BD%A0%E6%87%82%E7%9A%84">^360</a> 的某个驱动软件时（无奈啊），卸载后有残留；打开了百度共享空间后又关闭时，文件的资源管理器上多的那个图标很碍眼。诸如此类。这时候我不得不上网搜索方法，修改注册表来解决问题。但其实我觉得，这也算不上“洁癖”吧，应该是叫注重”电子卫生“。</p>
<p>第二点就是，无论是写代码或者采用手机/计算机功能时，我都需要关注它的“优雅”程度。如果代码不够优雅，我会想办法尽力改善，优秀的程序员绝不会允许自己的代码是一坨 shi 的（虽然我的代码水平也不是很优秀）。在实现计算机/手机的某些功能时，我也会关注它的实现复杂度，以便对自己设置操作进行了解和掌控。</p>
<p>再一点就是有条理的性格。文件资源管理必须有条理、代码管理必须有条理。这种“条理”性格渗透了我的学习、工作和生活。</p>
<p>最后一点就是对资源保存管理的重视。在使用新的技术、新的功能时，我会关注这个技术的永久持续性、评估他的价格与收费形式、评估自己采用的技术和资源与平台的相称性。在阿里云、腾讯云之间，采用它们各种服务前花了好多心思去研究。在云存储的选择上我也有意去进行评估。</p>
<p>以上对自己总结的几点互相之间其实有重合，我认为“优雅”应该最能概括上面的几个特点。无论在学习工作还是生活中，各种事物能够按照自己的意愿进行或在把控之中，这将是最理想的人生状态。</p>
<h1>day4 找到自己的节奏</h1>
<p>离最终的战争还有不到 150 天了，我的节奏也在稳步推进，同时也在为以后的复习节奏进行规划和管理。</p>
<ol>
<li>错题管理</li>
</ol>
<p>就在昨天，我开发出 feishu 中的一块错题管理方法，利用多维表格进行错题的分类整理。对于实际的错题拍摄到上传到多维表格的方式，还需要进一步简化和探索。feishu 的各种文档主要的特点和优势在于没有循规蹈矩直接使用金山、微软 Office 那套，而是自己开发一款更贴切大部分人习惯和审美的文档格式和工具。在这里，我看到了一个原则，之前在学习 SpringBoot 也接触过，那就是“约定大于配置”。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231016001708.webp" alt="image.png"></p>
<ol start="2">
<li>进度管理</li>
</ol>
<p>在错题管理之前，我还在 feishu 上进行进度的管理，利用多维表格实时展示各种资料的浏览进度，用数据表格绘制完成速率、展示预估完成的时间。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231016001715.webp" alt="image.png"></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231016001725.webp" alt="image.png"></p>
<ol start="3">
<li>作息管理</li>
</ol>
<p>关于每天的日常作息我也正在循序渐进地改变，手机再次检查开启了各项“健康使用手机”的约定。根据舍友的作息时间，综合自身情况，在 8 月 10 日之前，我必须达到晚上 1 点为入睡时间，早上 9 点前清醒，保持足够的睡眠量。与高中备战高考相比，睡眠质量已经有比较大的改善。</p>
<ol start="4">
<li>科目管理</li>
</ol>
<p>每天的复习科目基本上有了定式：每日至少 4 小时数学+其他科目。安排给数学足够多的时间是必要的。</p>
<ol start="5">
<li>态度管理</li>
</ol>
<p>在备战过程中，必须关注的一个点是避免“自我感动”。做题的结果才是检验成果的保证。关于是否购买平板来做辅助学习工具的问题，在这一个月以来我都有详细的思考，也做出了我自己的最终决策。这一年花的钱不要浪费，要把它转变成对未来的投资（赚钱的那种）。</p>
<p>上面写了那么多，主要还是因为有这个活动才自己整理出来的（我没事不会自己写这类“宣言”给自己看得 😥）。今天就这样。</p>
<h1>day5 复习毛概有感</h1>
<p>好像越来越难想出今天的选题了，感觉越来越像写高中作文了咋办哈哈。实在不行干脆把我之前自己写的博客再“复述”一遍？Just Kidding. 主要是在这个板块我想写一些新的内容，激励自己产出文字并使他尽可能的有意义。我打算是把以前只写给自己看的“主题谈”板块应用到这里来，加上每日撰写的属性，这就成了一个“高级版”的日记。通过这个过程也能探索我以后的文字产出方式，并对他们产生的效果进行评估。</p>
<p>近些天来我花了一部分的时间用来整理考研政治的思维导图，结合“肖秀荣”与课本，对这个平时上课不怎么细看细想的科目进行系统的了解和学习，从而也有自己的一些体悟。</p>
<p>一个国家在诞生前多是动荡的，在这其中各种纠葛的利益中与关系中，通过各种实践加上外部因素影响，会诞生最终的赢家。一个国家的建立是对于本国民乃至世界的一个重要事件，在国家建立前期的筹备、建立后的巩固的过程中有数不尽的事情需要处理和决定。一个国家的发展需要愿景，需要自身的改良，需要在了解自身的情况以及外部环境的情况下，站在一个特殊历史结点上眺望远方。通过对《毛概》中各种思想的学习，我对自己国家能够在历史长河中诞生、成长的根本内核有了进一步的认识。</p>
<p>在一定程度上说，领导集体最能够左右国家的发展前途，他们的思想动因与变化反应出当前整个国家目前的基本状况与迫切需求。为何决策、如何选择的过程是这些重大思想中的基本内容，对国家、政党和人民的思考方式是这些思想的核心内涵。每一个能写在课本上的思想，经住了实践的考验，它带领一个民族走过了诸多的坎坷，见证了历史，正因此，他就值得每一个国人及后代铭记、汲取营养。</p>
<p>对于我来说，政治这门学科并不是枯燥的学科。了解到上述的内容后，我对它的兴趣又有了进一步的提升，在整个画思维导图的过程中我都乐在其中。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231016001644.webp" alt="image.png"></p>
<h1>day6 回味积累</h1>
<p>近段时间，我对我高中时期所摘抄的各种文字进行了整理，并再次回味这些文字时隔多年仍带给我的触动。</p>
<blockquote>
<p>吹灭读书灯，一身都是月</p>
</blockquote>
<p>这的意境是我所追求的。努力学习一整天，当走出图书馆自习室那一刻，整个人都是满足的。在最温柔的时刻月光能够给你最后的陪伴。</p>
<blockquote>
<p>浅蓝色的夜溢进窗来 夏斟得太满</p>
</blockquote>
<p>这里的蓝给我更多的感受是故乡的傍晚那种深邃的蓝。学校这里应该改为“亮黄色的光充满屋里，晨来得太早！”。</p>
<blockquote>
<p>记忆既不是短暂易散的云雾，也不是干爽的透明，而是烧焦的生灵在城市表面结成的痂，是浸透了不再流动的生命液体的海绵，是过去、现在与未来混合而成的果酱，把运动中的存在给钙化封存起来。</p>
<p>记忆是一条早已干涸的河流，只在毫无生气的河床中剩下零落的硕石。——《三体》刘慈欣</p>
</blockquote>
<p>两个摘录对记忆的描述都有着共同之处，记忆无非就是轰轰烈烈物质运动与化学反应下剩下的残渣，是多年的建筑或战争扫过剩下的灰尘，是废弃的水库干涸后露出的孕育多年的生灵沉积，是海里的珊瑚，是贝壳中的珍珠。</p>
<p>回看这些高中时期的积累，仿佛也是在解封被钙化的思想，整理孤零零的顽石，触碰那道痂。同时我也反思自己，大学以来纸质文学作品阅读量大幅下降，积累的文摘量大幅减小。考研之后，我将抽取更多的娱乐时间，视文字与游戏、电影、音乐一样同等看待，以这几年积攒的阅历触碰更多的灵魂。</p>
<p>今天的小日记结束，接下来我要去享受“美好崩坏的艺术了（即饮食艺术，梁文道。我的理解就是吃饭）”。</p>
<h1>day 7 休息一天</h1>
<p>早上五点起床做核酸，又注定是劳累困顿的一天。虽然上周也没忙啥，昨天平板刚到。周围很多人都在这个时间点回去了。这对于我来说是一个赶超的好时机，但同时也为自己的松懈找到了一点理由。在接下来的 5 个月中，我应该如何保持自己的节奏？</p>
<ol>
<li>少看短视频，严格遵守健康管理手机的规定</li>
<li>周运动量保持。最好一周 5 天。运动后的时间利用，可以背单词或做自己的自我整理</li>
<li>生理习惯自律，保证良好的睡眠</li>
</ol>
<p>忽然想到一个道理，一个很古老并通常都被人提到的道理，我到现在才有一种醒悟。那就是关于达成目标的问题：</p>
<ol>
<li>达成目标需要拆分出许多个计划</li>
<li>每一个计划要足够细，并且可行</li>
</ol>
<p>相信周围无数人都是这么说的，对于我自己一直以来我也都只是听听而已，但真没有放在心上。参加实训的时候我有感触，就是“领导”更多关注于任务的拆分与风险评估，这样才能够保证任务达到预定的目标。对于我来说，考研上岸似乎是一个模糊但又艰巨的目标，这就需要我每日的计划并严格实施来进行保证。</p>
<p>想到好像是在择业指导中的一门课中提到的一个例子，崭露头角的明星被问到你的目标是什么，她回答到 10 年后我要成为 XXX，但是当设想 5 年后、3 年后、1 年后的自己应该是什么样的时候，她就觉得时间开始紧迫起来了。一样的道理，我要需要紧迫感，为了能在环境中更好的生存，拥有更强的竞争实力，以及完善丰富自己，我还需要不断努力。</p>
<p>最后，为了舒缓一下我对于 💸 的焦虑：💸 你有的是时间赚，现在要抓紧的是正事。当然我不会逼迫自己忘掉这种焦虑的想法，我会与他进行共处，真正的释缓应该是平和解决，因为这样才能够得到真的解决。</p>
<h1>day 8 电子洁癖</h1>
<p>昨天休息了一天是有成果的。买的华为二代笔到了，探索一下笔的使用与手写笔软件的选择。其中，有一大部分时间用来解决笔记的同步问题。</p>
<p>“享做笔记”支持 webdav 协议。我想让它使用微软 onedrive 进行数据备份(保持与 xmind 使用一样的网盘，提高数据整洁)。按照多种教程也没能连接成功(使用上网技巧也不行)。</p>
<p>在哔哩哔哩中搜到一个视频，他使用了一个支持 webdav 协议的日本的网盘，墙内，空间也挺大的。但是我想到自己的笔记数据放在陌生的国外存储器上(何况是日本)，感觉不卫生。</p>
<p>国内坚果云是很不错的，但是缺点就在于流量太少了。免费用户一个月上传流量才 1G，计算下来一天 300 多 M，略少。</p>
<p>兜转来兜转去，最后干脆使用国内的吧。一开始使用百度云，现在想想还是使用华为的吧。百度云对于我来说就是个文件中转站而已，我的重要资料不会放上去(欸，原来我已经把它当成一个“空间大的垃圾桶”看待了)。</p>
<p>想到其实 Xmind 使用 onedrive 的原因解决的是 Xmind 多端同步的问题。备份数据我还指望阿里云进行永久云端保存。享做笔记完全可以直接使用它的备份导出功能，而不需苛求云同步(云同步功能使用不佳)。</p>
<p>至此，我的笔记数据布局应该是这样的：</p>
<ol>
<li>学习笔记目前全在 onenote，以 onedrive 作为数据可靠性的依托</li>
<li>xmind 包含思维导图，以 onedrive 作为媒介与可靠性依托，最终可靠性依赖于阿里云盘</li>
<li>手写笔记依靠华为云盘进行存储。目前而言，并没有产生出重要的手写笔记</li>
</ol>
<p>顺便一提的是，关于我的数据文件。云盘布局目前是这样的：</p>
<ol>
<li>阿里云盘作为日后生活与生产的主力</li>
<li>115 盘暂停上传新文件，但保留相当数量的历史文件</li>
<li>腾讯微云保存一些上古时期的文件</li>
<li>魅族云盘可能有保存残留</li>
<li>百度网盘为随见随捡的垃圾(放错位置的资源)桶</li>
</ol>
<h1>day 9 平板进度(2/3)</h1>
<p>买了个平板键盘，第二天早上就收到了。各项方面都还不错，很遗憾的是触屏版使用不佳，加上试用后发现其实对触屏版的需求不大，遂打算退货。</p>
<p>再逛一圈京东，发现根本没有符合自己要求的键盘。我的要求就是我现在退货的这个键盘再减少一个触屏版功能就行。然而找了一圈，包括目前这个键盘所出售的店都没有。我的关键要求是：</p>
<ul>
<li>有硅胶保护套。保护很重要。</li>
<li>有笔槽。没笔放可不行。</li>
<li>平板可分离，横竖自由放置(一般就是磁吸类型的)。随时取下来写写画画。</li>
<li>不要触控板。不需要，省钱。</li>
</ul>
<p>但是基本上都是只差一个条件 😓。现在就只能进行取舍了。</p>
<p>此外，我的考研计划开始初步完善，每天的学习任务可以用 0️⃣1️⃣2️⃣3️⃣ 进行概括。</p>
<ul>
<li>学 0️⃣ 星内容：政治、英语等课内内容以及课外拓展内容</li>
<li>数学 1️⃣ 大章：尽可能完成一个知识点的复习</li>
<li>专业课 2️⃣ 章：推进两小节进度</li>
<li>英语单词持续^3️⃣^(你也看出来了吧主要就是凑序号)：每天单词不停歇</li>
</ul>
<p>这样的要求符合当前的实际情况，反映出时段的要求，稳步推进复习的进度。不过这三天持续早晨核酸，我的部分睡眠时间搬到了 10 点到 13 点，影响了我的正常午餐时间。在以后无大筛的日子里，还需要保持正常的睡眠时间。</p>
<p>走到今天，我感觉自己的状态开始变好了。睡眠、运动基本保障。心那一块没有异常感觉。继续保持住吧。这开学前的 10 来天可是黄金复习时间！</p>
<h1>day 10 谈谈运动</h1>
<p>近段时间，我每周进行了 2 到 3 次的长跑运动。与以往的时期相比，在暑假里我好像变得更加积极投入到长跑锻炼中。我想主要包括以下原因：</p>
<ul>
<li>在备战阶段我需要更加注意身体，利用 1 个小时的时间锻炼，益脑。</li>
<li>近期不适的警醒。近期出现了心脏部位的不适。考虑到家族史，锻炼十分迫切且必要。此外，这个阶段的锻炼将归为“续命跑”的范畴。</li>
<li>精神动力的支撑。因为自己被一个人深深地影响了，这种内在的动力迫使我改变自己的习惯，塑造更完美的自己。</li>
</ul>
<p>在运动过程中，虽然累，但也谈不上特别累。每次长跑后做完拉伸运动，会有一种成就感。并且现在这个阶段，体育场没有那么多人，没有人踢足球，来跑步的都是真正想要跑步的。</p>
<p>在跑步过程中，我发现酷狗脖挂式的运动耳机很出色，跑的时候很稳固，没有听诊器效应。跑两千米，大概可以完整听 2 至 3 首歌。</p>
<p>以前跑完后都没有做跑后拉伸。这次有意识并按指导做了，虽然动作可能有些地方不到位，但是效果还是不错的，大腿酸胀感消失很快。</p>
<p>关于计划在晚上（入睡前两个小时）进行跑步，有一下好处：</p>
<ul>
<li>气温合适，无阳光影响</li>
<li>人员少，隐蔽性增加</li>
<li>有可能改善睡眠</li>
<li>时间紧迫感，迫使自己提早完成学习计划</li>
</ul>
<p>虽然但是，因为昨晚的事情（tw question）还是有一点小失眠。新的键盘订单已经下了，舍弃了“拥有硅胶保护套”这一要点购买了一款更便宜的键盘。之前我一直担心这样的键盘不能和平板一起放进保护套。但是在这个商品的评论与问答区找到了实实在在的答案。看起来效果也不错，希望今天就能用上，并且体验满意。</p>
<h1>day 11 七夕意识流</h1>
<p>今天七夕节。对于我来说，除了能放假的节日，好像其它节日都与我无关，今天和其它 300 多天一样，就是平平常常的一天。反而，今天我意识到我的专业课复习进度的滞后性。我的专业课进度有点落后了，为了快马加鞭赶回来，我也在夏季学期开学和秋季学期开学中设立两个主要的时间节点，以保证我的进度能够按时完成。上一次这样设置时间节点还是在七月下旬。当时数学进度严重滞后，不得不逼自己每天一章，赶在 8 月前完成基础一轮。从现在来看，当初的任务完成情况是达到预期的，但这样也牺牲了专业课的复习时间。在每日 0️⃣1️⃣2️⃣3️⃣ 目标设立后，各项进度都有所增长，但单项来看并不算高，因此在时间把控和效率上我还需要额外的把控。</p>
<p>昨天一天很劳累，浅浅透支了自己。今天上午断断续续把觉补了回来。今天晚上还需要补一下昨天漏掉的专业课进度，争取超过 50%（35%）那条线。</p>
<p>自从使用了飞书的事项管理功能，感觉生活的条理度又多了点。与其它的事项提醒工具相比，飞书这个更纯粹，更简单。在很多情况下，我们不需要许多复杂的功能。另外它的“重复提醒”功能很好用。说到这，我不得不佩服飞书的产品经理以及背后的研发团队，能用心制造一款好用的工具，到目前为止我还没发现飞书有什么重要的缺点。这已经达到了我愿意付费的满意程度。我觉得一款好工具就应该这样，提供免费使用后，如果工具本身足够优秀，自然会有人愿意消费。</p>
<p>待会就开始鏖战了，感叹一下，5 分钟进入状态这个法则很有用。</p>
<h1>day 12 呼啸</h1>
<p>这两天极其酷热，空气都是闷的，走出室外瞬间感受到口渴。幸好室内空调能续命。昨天晚上走出教室，大风直接把门拉开。天上看不见月亮，还隐约有点云层反射，感受到了一丝雨滴，但我还是决定骑向了体育场。</p>
<p>体育场的风很大，我特地把书包放在雨可能淋不到的地方。天空是不是微闪，多是大雨来临前的前兆。但即使是这样，篮球场还是有人在打篮球，跑道上还是有人在坚持跑步。思考了一下，今天的跑步计划就不变吧，还是两公里，身体最重要。</p>
<p>一路上，乘着风和逆着风的感觉都很酷。戴着耳机，音乐伴随着呼啸声，配上《Mountains》的感觉简直不要太爽。飞舞的安全线与倒下的路锥构成的景象别有风味。虽然为了抗风可能跑步时多做了一点功，但明显感觉身体的带汉感大大减小。跑后拉伸区域里的蚊子也少多了。</p>
<p>所以在大风刮起的半个小时内，还是可以正常安全地完成跑步计划的。</p>
<p>除了昨晚的天气，在设备上我还发现了一个问题，就是耳机的清洁问题。最近的耳朵十分不好受，每天都要戴耳塞和耳机。这些涉耳设备的清洁引起了我的重视。在拆卸蓝牙耳机耳塞时，意外弄掉了一个“网”。一开始我以为是蓝牙耳机的关键部件弄坏了，但在淘宝上搜时，它其实也只是一个需要定时更换的配件：耳机防尘网（点赞一波淘宝搜索功能，多打一个网字就能搜索到）。除了耳机，近期要对耳塞进行一波冲洗，保护用耳卫生。</p>
<p>平板部件 3/3 已经送到学校，期待今天的开箱体验。在平板配件收集完成之后，平板快速输入 Latex 公式的问题就能够解决，整个复习体验将会变得十分顺畅。</p>
<h1>day 13 提前休息，建设城市</h1>
<p>昨天一天玩了一款刚下的游戏，城市·天际线（这名字我老是写错，“都市”，“天地线”排列组合）。</p>
<p>以往我们接触的造城市游戏无非就是那些烂大街的国产“模拟经营”类游戏。但这个游戏和那一些根本就不在一个层次上（steam 原价 292RMB，现价 68RMB）。</p>
<p>这款游戏在于造一个城市。第一局，不会玩，探索，结果濒临破产。知道个大概后，重开第二局（没看攻略）城市蒸蒸日上，其实我也高估了游戏的难度。</p>
<p>它对城市的模拟很真实，尤其是交通。因为各种交通设计我都能在现实世界中找到原型，各种问题的解决方法我都能在现实世界中借鉴到答案。比如单行路、环岛、高速公路的设置，公交、地铁、火车的设置，以及各种过路费的设置……</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231016001526.webp" alt="image.png|300"></p>
<p>每次设置工业区，我也总能想到我所处的城市，我见过的工业区都是怎么安排的。在区域划分上也隐约回忆以前高中所学的地理知识（城市部分）。我也理解了为什么钦州市郊、其他城市的市郊都会预先建设好基础设施，比如不会使用的十字路口、荒郊野岭的地铁站、高新技术开发区、远郊的大学城。我感觉，其实想市长等城市建设者，不也是再玩一盘更大的“游戏”么，只不过这款“游戏”更加复杂，代价更大，需要精心设计好每个环节。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231016001540.webp" alt="image.png"></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231016001548.webp" alt="image.png"></p>
<p>与《文明 6》一样，人类文明模拟器游戏总能给自己一定的启发，加深对我们所处的现实世界的理解。和《缺氧》相比，它不需要复杂的管道、电子、自动化等理工的东西，它需要学习的是统筹管理与规划的方法，是偏人文类的知识。</p>
<p>总得来说，这款游戏加深了我对现实世界城市建设的理解，对我有很大的启发。说实在的，玩的第一局失败时还并没有强烈感受到有多好玩。但是我也隐隐感受到它是一个十分棒的作品，以至于某天我还念念不忘（梦里好像还梦到），从而开启了昨天一天的游玩。</p>
<h1>day 14 在任何地方都应该学到东西</h1>
<p>唉，没错，今天又玩了大半天天际线。在交通上搞了一阵。结束的时候，赶上死亡潮，人一群群死光。我发现，交通规划才是最核心的东西！立交桥的设计是值得学习的，现在想来，有时间我可以好好学习一下各种立交桥的设计、名字、解决痛点以及在我国中应用的案例。</p>
<p>似乎，一个好的游戏作品可以鼓励你学习更多的知识。也许游戏最本初的属性是带给人轻松和快乐，但如果它本应能给你更多，就应该抓住机会钻研。游戏是作品，作品就应该赏析和学习。以后有时间，我应该专门设一个专栏，为这些知识做笔记。</p>
<p>回想自己以前也有过类似的触动：</p>
<ul>
<li>我的世界。（五六年级）红石机制，是我开始接触逻辑电路的学习，打开电子电路的大门。为此我还弄了一本画册记录。大二学习数字逻辑与数字电路时甚至用了红石符号做了笔记。命令机制，简单接触游戏内指令代码编写。</li>
<li>莫斯密码。</li>
</ul>
<p>除此之外，未来我还可以从游戏里学到哪些？对于这些作品我还可以有哪些探讨？</p>
<ul>
<li>纪念碑谷。总结一下使用的视错觉点。学习那个基本三角形，了解它的历史。赏析关卡。</li>
<li>各种解谜游戏涉及的谜题了解。（针对那些小谜题谜题比较通式化的地方）</li>
<li>艾迪芬奇的记忆。族谱与关卡设计总结，赏析。家庭梳理。</li>
<li>城市·地平线中立交桥设计学习</li>
<li>扫雷。什么二一减法。</li>
</ul>
<p>对于游戏我还有一个观点，那就是每一个涉及解谜的游戏背后，有它的套路和数学基础。有些套路紧扣关卡主题，可能不易被挖掘出定式。但我玩的横版过关游戏也不少了，尝试找出来那就最好不过了。</p>
<h1>附：bilibili 专栏暑期日更挑战活动</h1>
<p>活动链接： <a href="https://www.bilibili.com/blackboard/guguking2022-7.html">2022专栏暑假日更挑战 (bilibili.com)</a></p>
<p>打卡过程中每天预估自己能瓜分到的金额：</p>
<table>
<thead>
<tr>
<th>活动天数</th>
<th>前一日完成打卡人数</th>
<th>全勤人数</th>
<th>全勤额外奖预计瓜分</th>
</tr>
</thead>
<tbody>
<tr>
<td>8</td>
<td>1789</td>
<td>568</td>
<td>8.8 ￥</td>
</tr>
<tr>
<td>9</td>
<td>1852</td>
<td>543</td>
<td>9.21 ￥</td>
</tr>
<tr>
<td>10</td>
<td>1481</td>
<td>422</td>
<td>11.85 ￥</td>
</tr>
<tr>
<td>11</td>
<td>1897</td>
<td>409</td>
<td>12.22 ￥</td>
</tr>
<tr>
<td>12</td>
<td>1832</td>
<td>392</td>
<td>12.76 ￥</td>
</tr>
<tr>
<td>13</td>
<td>1868</td>
<td>388</td>
<td>12.89 ￥</td>
</tr>
<tr>
<td>14</td>
<td>1646</td>
<td>379</td>
<td>13.19 ￥</td>
</tr>
<tr>
<td>最终全勤人数</td>
<td></td>
<td>366</td>
<td>13.66 ￥</td>
</tr>
</tbody>
</table>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231016001324.webp" alt="image.png|475"></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231016001418.webp" alt="image.png|475"></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231016001435.webp" alt="image.png|475"></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231016001449.webp" alt="image.png"></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231016001457.webp" alt="image.png|475"></p>


                
            </main>

            <footer class="list-content-container">
                
                <details class="record-links">
                    <summary class="menu-title">
                        links
                        <span class="badge">2</span>
                    </summary>

                    <ul class="record-links-list">
                        
                        <li data-target-id="1973703782">
                            <a href="#1973703782">
                                <span class="record-type-point" style="color: var(--n_生活区);">⬤</span>
                                
                                <span>【麒麟实训】我想在这次的实训项目中，达成怎样的目的？</span>
                                <div class="record-links-context hover">
                                    <p>[^Kylin]: 更多内容详见<span class="id-context" data-target-id="1973703782">【麒麟实训】我想在这次的实训项目中，达成怎样的目的？</span></p>

                                </div>
                            </a>
                        </li>
                        
                        <li data-target-id="3437638411">
                            <a href="#3437638411">
                                <span class="record-type-point" style="color: var(--n_核心协同);">⬤</span>
                                
                                <span>本地文件夹的多端同步</span>
                                <div class="record-links-context hover">
                                    <p>[^Xmind]: 应该是这篇文章<span class="id-context" data-target-id="3437638411">本地文件夹的多端同步</span>，不过现在的文章内容可能有改版和修正。</p>
<h1>day2 我对我所学专业的一点思考</h1>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                

                
            </footer>
        </article>
        
        <article id="107080905" class="record">
            <header>
                <h1 class="record-title">Nginx 的安装与配置</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>107080905</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>undefined</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('Nginx');">Nginx</button>
                    
                    <button class="btn" onclick="activeTag('安装');">安装</button>
                    
                    <button class="btn" onclick="activeTag('ECS');">ECS</button>
                    
                    <button class="btn" onclick="activeTag('Linux');">Linux</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>4/13/2023</span>
                </div>
                

                

                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/nginx1-cover.svg</span>
                </div>
                
                <div class="record-description">
                    <span>description :</span>
                    <span>阿里云安装与配置Nginx。</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>661ecc9</span>
                </div>
                
            </header>

            <main class="record-content">
                <blockquote>
<p><strong>环境信息</strong>：<br>
CPU&amp;内存：1 核 (vCPU)2 GiB<br>
操作系统：Alibaba Cloud Linux 3.2104 64 位<br>
实例规格：ecs.n4.small<br>
实例规格族：共享计算型<br>
刚刚初始化云盘的 ECS 服务器。</p>
</blockquote>
<h1>安装 Nginx</h1>
<p>运行以下命令安装 Nginx</p>
<pre><code class="language-bash">dnf -y install http://nginx.org/packages/centos/8/x86_64/RPMS/nginx-1.22.1-1.el8.ngx.x86_64.rpm 
</code></pre>
<p>您可以访问 <a href="https://nginx.org/packages/centos/8/x86_64/RPMS/">Nginx官方安装包</a> 获取适用于 CentOS 8 系统的多版本的 Nginx 安装包。</p>
<p>运行以下命令查看 Nginx 版本。</p>
<pre><code class="language-sh">nginx -v
</code></pre>
<p>启动 Nginx 服务：</p>
<pre><code class="language-sh">systemctl start nginx
</code></pre>
<p>在本地电脑的浏览器输入主机地址并访问，出现 Nginx 默认页面即成功。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230409141117412.png" alt="image-20230409141117412"></p>
<h1>配置 Nginx</h1>
<p>找到 nginx.conf 文件进行配置，一般在 <code>/etc/nginx</code> 目录下。但我遇到一个问题，就是配置文件没有 server 字段。于是我参考了这篇文章：<a href="https://blog.csdn.net/qq_37283570/article/details/112854376">nginx.conf文件里没有server字段无法添加_nginxconf没有server_猴子奔跑的博客-CSDN博客</a>。最终在 <code>/etc/nginx/conf.d/default.conf</code> 中找到了。</p>
<p>修改配置文件，设定好网站的根目录：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230408205637757.png" alt="image-20230408205637757"></p>
<p>重启 Nginx：</p>
<pre><code class="language-sh">systemctl restart nginx
# 或 nginx -s reload 
# 或 systemctl reload nginx
</code></pre>
<p>你可以在服务器上对应自己设置的根目录创建文本文件，如 <code>xiazai.txt</code>，然后浏览器访问网址 <code>&lt;服务器主机IP&gt;/xiazai.txt</code> 进行测试。</p>
<h1>本文参考</h1>
<ul>
<li><a href="https://help.aliyun.com/document_detail/464754.html?spm=a2c4g.472049.0.0.6a8d4de5bhOeVO">CentOS 8 自建安装 Nginx+Mysql环境+PHP环境 (aliyun.com)</a></li>
<li><a href="https://blog.csdn.net/github_38336924/article/details/82756779">Linux Nginx 配置/绑定域名_nginx配置域名_dadeity的博客-CSDN博客</a></li>
<li><a href="https://www.runoob.com/w3cnote/nginx-setup-intro.html">Nginx 配置详解 | 菜鸟教程 (runoob.com)</a></li>
</ul>


                
            </main>

            <footer class="list-content-container">
                

                
                <details class="record-backlinks" open="open">
                    <summary class="menu-title">
                        backlinks
                        <span class="badge">1</span>
                    </summary>

                    <ul class="record-backlinks-list">
                        
                        <li data-target-id="2201181434">
                            <a href="#2201181434">
                                <span class="record-type-point" style="color: var(--n_undefined);">⬤</span>
                                
                                <span>博客域名解析管理与网站CDN加速域名配置</span>
                                <div class="record-links-context hover">
                                    <p>可参考这篇文章：<span class="id-context" data-target-id="107080905">Nginx 的安装与配置</span></p>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                
            </footer>
        </article>
        
        <article id="181570378" class="record">
            <header>
                <h1 class="record-title">部署 Hexo 个人博客框架到服务器</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>181570378</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>Hexo</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('ECS');">ECS</button>
                    
                    <button class="btn" onclick="activeTag('Linux');">Linux</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>4/13/2023</span>
                </div>
                

                

                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/hexowordpresscover546546.png</span>
                </div>
                
                <div class="record-description">
                    <span>description :</span>
                    <span>将博客框架Hexo部署到ECS服务器。</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>ad28b4a</span>
                </div>
                
            </header>

            <main class="record-content">
                <h1>前言</h1>
<h2>我为什么要从Wordpress换为Hexo</h2>
<p>一个关键字：卡！Wordpress太卡了，十分笨重和不方便。对于小小服务器来说简直是难以承受。况且对于内容为主的博客，Wordpress显得过于臃肿，有大量插件可以用，也意味着你要看更多的广告和垃圾信息。此外，Wordpress用户数量多，社区庞大，但社区内容鱼龙混杂，充斥大量商业化甚至无用的信息，不够纯粹，质量偏低</p>
<p>Wordpress对于小白来说好上手，无脑后台管理。而拥有一点点编程经验的我完全可以凭一点点知识储备和动手能力砍掉多余的，无用的东西。Hexo相较于Wordpress，更轻，静态页面对SEO更友好，文章数据管理更方便、更让人贴心。</p>
<h2>实现思路和原理</h2>
<p>整个过程实现的原理可以用下图表示。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/view.jpg" alt="preview"></p>
<p>可参照下文顺序进行配置。</p>
<h1>本地</h1>
<h2>Hexo</h2>
<p>本地启用Hexo：按照官方文档搭建基本环境（Node.js，Git），在本地尝试部署并熟悉hexo的写作流程，了解配置文件结构，此处不再赘述。<a href="https://hexo.io/zh-cn/docs/">官方文档 | Hexo</a></p>
<p>在本地Hexo站点目录下安装hexo-deployer-git插件：</p>
<pre><code class="language-sh">npm install hexo-deployer-git --save
</code></pre>
<h2>配置SSH密匙</h2>
<p>为了使本地可以跟远程的 github 建立联系，需要在本地配置 SSH 密钥，这样我们就可以在本地直接提交代码到 GitHub 上或者远端 git 仓库。<br>
如果是第一次配置 SSH，则配置一下 git 的 username 和 email</p>
<pre><code class="language-sh">git config --global user.name &quot;你要设置的名字&quot;
git config --global user.email &quot;你要设置的邮箱&quot;
</code></pre>
<p>之后生成 SSH 密钥：</p>
<pre><code class="language-sh">ssh-keygen -t rsa -C &quot;你刚刚设置的邮箱&quot;
</code></pre>
<p>如果不需要设置密码的话，连续三个回车就好了。</p>
<p>复制好公钥后面要用：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230408233136534.png" alt="image-20230408233136534"></p>
<h1>服务器端</h1>
<blockquote>
<p>重新初始化阿里云盘后进行的演示。</p>
</blockquote>
<p>阿里云盘初始化后，再次使用ssh连接时会有<code>WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!</code>的提示。解决方法：</p>
<pre><code class="language-sh">ssh-keygen -R &lt;之前连接时的网段IP&gt;
</code></pre>
<p>再次SSL连接：</p>
<pre><code class="language-sh">ssh root@&lt;服务器公网IP&gt;
</code></pre>
<p>出现一句：<br>
Are you sure you want to continue connecting (yes/no)?</p>
<p>输入：yes 回车</p>
<p>参考：<a href="https://blog.csdn.net/wangguchao/article/details/85614914">问题解决——SSH时出现WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!_口袋里のInit的博客-CSDN博客</a></p>
<h2>Nginx</h2>
<p>安装Nginx并配置好域名（如果有）。具体操作详见我的这篇文章。</p>
<h2>Git</h2>
<h3>git的安装与用户创建</h3>
<pre><code class="language-sh"># 安装git
yum install git
# 创建git账户
adduser git				
# 添加Git账户权限
chmod 740 /etc/sudoers
vim /etc/sudoers
</code></pre>
<p>在vim编辑模式下，这个地方加上一行<code>git     ALL=(ALL)     ALL</code>：</p>
<pre><code>## Allow root to run any commands anywhere
root    ALL=(ALL)     ALL
git     ALL=(ALL)     ALL
</code></pre>
<p>执行：</p>
<pre><code class="language-sh">chmod 400 /etc/sudoers  # 改回权限
sudo passwd git			# 设置 git 账户密码
</code></pre>
<p>输两次密码即可：</p>
<pre><code class="language-sh">Changing password for user git.
New password:						# 输的时候是看不到的
Retype new password:
passwd: all authentication tokens updated successfully.
</code></pre>
<p>执行：</p>
<pre><code class="language-sh">su git	# 切换至 git 用户
# 创建 ~/.ssh 文件夹和 ~/.ssh/authorized_keys 文件，并赋予相应的权限
mkdir ~/.ssh
vim ~/.ssh/authorized_keys
然后把本地公钥粘贴在authorized_keys里（详见上文）
chmod 600 ~/.ssh/authorized_keys
chmod 700 ~/.ssh
</code></pre>
<p>这里提一嘴，有时候切换不了git用户，即<code>su git</code>执行不了。其实也没事，就是知道git用户目录是<code>/home/git/</code>就行，即上面命令中的<code>~</code>指的是<code>/home/git/</code></p>
<p>在本地电脑中，终端执行：</p>
<pre><code>ssh -v git@&lt;你的服务器主机IP&gt;
</code></pre>
<p>如果能免密登录，那就成了。</p>
<h3>仓库创建与钩子创建</h3>
<p>保证之前在Nginx配置里的网站根目录的权限：</p>
<pre><code class="language-sh">chown -R git:git &lt;网站根目录&gt;
chmod -R 755 &lt;网站根目录&gt;
</code></pre>
<p>创建仓库：</p>
<pre><code class="language-sh">mkdir repo # 我选择在git的用户目录下创建
cd repo	   # 创建空白的git仓库
git init --bare hexo.git	# 创建一个空白的 git 仓库
chown -R git:git hexo.git	# 注意保证权限
vim ~/repo/hexo.git/hooks/post-receive
</code></pre>
<p>在post-receive里边输入：</p>
<pre><code class="language-bash">#!/bin/bash
git --work-tree=/var/www/uuanqin.top --git-dir=/home/git/repo/hexo.git checkout -f
</code></pre>
<p>以上内容建议手打。可以看出第一个参数对应的是网站根目录，第二个参数是代码仓库目录。</p>
<p>添加权限：</p>
<pre><code class="language-sh">chown -R git:git hexo.git/hooks/post-receive
chmod +x hexo.git/hooks/post-receive
</code></pre>
<h1>本地</h1>
<h2>Hexo配置</h2>
<p>进入本地电脑 hexo 博客的根目录，编辑<strong>站点配置文件 _config.yml</strong>，找到 deploy，修改成以下：</p>
<pre><code>deploy:
  type: git
  #repo改为repo: git@&lt;服务器IP&gt;:&lt;服务器端的仓库&gt;
  repo: git@hjxlog.com:/var/repo/hexo.git
  branch: master
</code></pre>
<p>最后在本地电脑 hexo 博客的根目录执行命令：</p>
<pre><code>hexo clean
hexo d -g
</code></pre>
<p>出现错误记得检查服务器端权限问题：</p>
<pre><code>chown -R git:git &lt;你的仓库&gt;
chown -R git:git &lt;网站根目录&gt;
</code></pre>
<p>在浏览器输入网址即可。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230409160319825.png" alt="image-20230409160319825"></p>
<p>嫌每次都输入两个命令麻烦，可以在 package.json 中添加 npm 脚本：</p>
<pre><code class="language-json">&quot;scripts&quot;: {
  &quot;publish&quot;: &quot;hexo clean &amp;&amp; hexo g -d&quot;,
  &quot;start&quot;: &quot;hexo clean &amp;&amp; hexo g &amp;&amp; hexo s&quot;
}
</code></pre>
<p>下次执行时可以直接：</p>
<pre><code class="language-sh">npm run publish
</code></pre>
<h1>其他问题</h1>
<h2>钩子不起作用</h2>
<p>出现已经推送到服务器但是钩子不起作用，且出现cannot run hooks/post-receive: No such file or directory的提示：</p>
<p>请重新创建并<strong>手打</strong>post-receive文件，保证该文件有可执行权。</p>
<pre><code class="language-sh">chmod +x post-receive
chown -R git:git post-receive
</code></pre>
<p>参考：<a href="https://blog.csdn.net/qq_48736958/article/details/113444533"> cannot run hooks/post-receive: No such file or directory_渣渣林的博客-CSDN博客</a></p>
<h2>hexo d命令报错</h2>
<p>hexo d命令报错 ERROR Deployer not found: git</p>
<p>解决方案</p>
<p>这是因为没安装<code>hexo-deployer-git</code>插件，在<strong>站点目录</strong>下输入下面的插件安装就好了：</p>
<pre><code>npm install hexo-deployer-git --save
</code></pre>
<p>然后在使用<code>Hexo d</code>命令就可以推送了。</p>
<p>参考：<a href="https://blog.csdn.net/qq_21808961/article/details/84476504">hexo d命令报错 ERROR Deployer not found: git_蓝蓝223的博客-CSDN博客</a></p>
<h1>本文参考</h1>
<p><a href="https://blog.csdn.net/qq_44706030/article/details/112759634">将 Hexo 部署到阿里云轻量服务器_hexo部署到阿里云_小阳coding的博客-CSDN博客</a></p>


                
            </main>

            <footer class="list-content-container">
                

                
                <details class="record-backlinks" open="open">
                    <summary class="menu-title">
                        backlinks
                        <span class="badge">2</span>
                    </summary>

                    <ul class="record-backlinks-list">
                        
                        <li data-target-id="2065118013">
                            <a href="#2065118013">
                                <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                                
                                <span>国内访问Hexo优化加速-替换jsdelivr的CDN链接</span>
                                <div class="record-links-context hover">
                                    <p>[^hexo]: 详看我的这篇文章：<span class="id-context" data-target-id="181570378">部署 Hexo 个人博客框架到服务器</span></p>

                                </div>
                            </a>
                        </li>
                        
                        <li data-target-id="2346883624">
                            <a href="#2346883624">
                                <span class="record-type-point" style="color: var(--n_社会生活);">⬤</span>
                                
                                <span>成为一名个人博客网站站长</span>
                                <div class="record-links-context hover">
                                    <p>我想搭一个 Wordpress 博客网站：在 ECS 中搭建 WordPress<br>
我想搭一个 Hexo 博客网站：<span class="id-context" data-target-id="181570378">部署 Hexo 个人博客框架到服务器</span></p>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                
            </footer>
        </article>
        
        <article id="4084230277" class="record">
            <header>
                <h1 class="record-title">解决Bing搜索页自动返回顶部的问题</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>4084230277</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>undefined</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('Bing');">Bing</button>
                    
                    <button class="btn" onclick="activeTag('Edge');">Edge</button>
                    
                    <button class="btn" onclick="activeTag('Tampermonkey');">Tampermonkey</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>4/16/2023</span>
                </div>
                

                

                
                <div class="record-description">
                    <span>description :</span>
                    <span>Stop doing weird things, Bing ! ;)</span>
                </div>
                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/20231022174222.webp</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>f3706885</span>
                </div>
                
            </header>

            <main class="record-content">
                <p>使用Bing搜索你可能会遇到这个问题：点击一条搜索结果后过段时间再返回搜索页面，搜索页自动返回顶部。就这一点问题，如果你没注意到还好说，认为是一个无痛无痒的小Bug。一旦你开始被这个Bug影响，你就会陷入无限抓狂状态！！</p>
<p>解决方法，Edge下载Tampermonkey插件：<a href="https://microsoftedge.microsoft.com/addons/detail/tampermonkey/iikmkjmpaadaobahmlepeloendndfphd">Tampermonkey - Microsoft Edge Addons</a></p>
<p>获取新脚本：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230416171417352.png" alt="image-20230416171417352"></p>
<p>打开“油叉”：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230416171510008.png" alt="image-20230416171510008"></p>
<p>搜索FIX for &quot;Bing Search returns to the top&quot; !脚本进行安装即可。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230416171521865.png" alt="image-20230416171521865"></p>
<p>注意，部分用户可能要改一下脚本的代码，全流程看下图：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230416171802268.png" alt="image-20230416171802268"></p>
<p>参考：<a href="https://tieba.baidu.com/p/8007376009">必应搜索页过一段时间就会自动回到页面开始位置_必应吧_百度贴吧 (baidu.com)</a></p>


                
            </main>

            <footer class="list-content-container">
                

                
            </footer>
        </article>
        
        <article id="346425435" class="record">
            <header>
                <h1 class="record-title">校园网有线网连接相关问题</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>346425435</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>undefined</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('Clash');">Clash</button>
                    
                    <button class="btn" onclick="activeTag('有线网');">有线网</button>
                    
                    <button class="btn" onclick="activeTag('Windows');">Windows</button>
                    
                    <button class="btn" onclick="activeTag('PPPoE');">PPPoE</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>4/17/2023</span>
                </div>
                

                

                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/problemofwired.png</span>
                </div>
                
                <div class="record-description">
                    <span>description :</span>
                    <span>本文涉及PPPoE拨号指导以及开机自动拨号教程</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>14a6085b</span>
                </div>
                
            </header>

            <main class="record-content">
                <h1>有线网的连接</h1>
<p>首先仔细查阅本校校园网的有线连接说明。若学校校园网支持PPPoE链接，则可以按照以下步骤进行拨号连接，无需下载其他PPPoE拨号客户端。</p>
<p>打开网络设置：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230417225031498.png" alt="image-20230417225031498"></p>
<p>设置新链接：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230417225948370.png" alt="image-20230417225948370"></p>
<p>选择连接到Internet：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230417230005682.png" alt="image-20230417230005682"></p>
<p>点击设置新连接：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230417230107904.png" alt="image-20230417230107904"></p>
<p>点击，下一页：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230417230137355.png" alt="image-20230417230137355"></p>
<p>输入用户名和密码，具体请查阅本校校园网配置说明。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230417230208019.png" alt="image-20230417230208019"></p>
<p>以TJU为例：<a href="https://wiki.tjubot.cn/e-life/network">校园网 - 北洋维基 (tjubot.cn)</a></p>
<p>注意：连接名称推荐设置为英文名称，以避免以后不必要的麻烦。</p>
<h1>开机自动拨号</h1>
<p>PPPoE拨号设置好后，每次开机都需要手动拨号十分麻烦，我们可以在Windows计划中添加自动拨号的计划任务。</p>
<p>具体操作请参考这篇文章：<a href="https://blog.csdn.net/weixin_43667077/article/details/112468243?ydreferer=aHR0cHM6Ly9jbi5iaW5nLmNvbS8%3D">WIN10 电脑设置自动拨号联网任务，实现开机、断网自动重连_我才是一卓的博客-CSDN博客</a>。当然，里面的配置按需配置。</p>
<h1>不必要的麻烦</h1>
<h2>Clash魔法失效</h2>
<p>问题描述：使用Clash代理服务，在Windows上按照教程配置好时，无法使用魔法。排除订阅的配置文件的问题。</p>
<p>解决：校园网拨号连接名称改为英文试试。参考：<a href="https://github.com/Fndroid/clash_for_windows_pkg/issues/4182">开启系统代理后无法使用，左上角数据一直显示0 · Issue #4182 · Fndroid/clash_for_windows_pkg (github.com)</a></p>


                
            </main>

            <footer class="list-content-container">
                

                
            </footer>
        </article>
        
        <article id="1495212389" class="record">
            <header>
                <h1 class="record-title">Hexo 框架 Btterfly 主题引入 Waline 评论系统及国内正常访问</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>1495212389</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>Hexo</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('Waline');">Waline</button>
                    
                    <button class="btn" onclick="activeTag('Butterfly');">Butterfly</button>
                    
                    <button class="btn" onclick="activeTag('Vercel');">Vercel</button>
                    
                    <button class="btn" onclick="activeTag('问题解决');">问题解决</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>4/27/2023</span>
                </div>
                

                

                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/waline-comment.png</span>
                </div>
                
                <div class="record-description">
                    <span>description :</span>
                    <span>由于vercel.app国内访问失败，可通过配置子域名的方法解决</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>591f2165</span>
                </div>
                
            </header>

            <main class="record-content">
                <h1>引入Waline评论</h1>
<p>Hexo博客框架Butterfly主题中引入Waline评论操作可以参考以下文章解决：</p>
<ul>
<li><a href="https://butterfly.js.org/posts/ceeb73f/#%E8%A9%95%E8%AB%96">Butterfly 安裝文檔(四) 主題配置-2 | Butterfly</a></li>
<li><a href="https://waline.js.org/guide/get-started/">快速上手 | Waline</a></li>
</ul>
<p>注意：</p>
<ul>
<li>
<p>在<a href="https://waline.js.org/guide/get-started/">快速上手 | Waline</a>这篇文章中，请按照指引完成Vercel的部署，并完成<strong>域名绑定</strong>小节（虽然它说可选，但我强烈建议你完成，否则你的评论系统只能在严苛的网络环境中运行）</p>
</li>
<li>
<p>在Butterfly的主题配置文件中有两处需要改：</p>
<pre><code class="language-yaml">comments:
  use: Waline # Valine,Disqus
  # ...
  
waline:
  serverURL: https://pl.uuanqin.top # Waline server address url
</code></pre>
<p>注意serverURL填自己创建子域名</p>
</li>
</ul>
<h1>可能遇到的问题</h1>
<p><strong>问题：评论框已经能在博客中显示，但是获取不到评论内容，且无法发布评论。出现Failed to Fetch错误。但使用魔法后评论系统正常运行。</strong></p>
<p>解决：打开F12控制台并重新加载问题页面，你可能会发现vervel.app无法访问：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/vercal%E8%AF%84%E8%AE%BA%E9%97%AE%E9%A2%98.png" alt="vercal评论问题"></p>
<p>注意到页面向vercel.app发送了GET请求，但此时vercel.app在国内环境是无法访问的。</p>
<p>排查方向：</p>
<ul>
<li>
<p>首先确保按照<a href="https://waline.js.org/guide/get-started/">快速上手 | Waline</a>设置好了评论系统子域名，或再参考一下这篇文章<a href="https://blog.csdn.net/Panzer_Jack/article/details/127418379?spm=1001.2101.3001.6650.13&amp;utm_medium=distribute.pc_relevant.none-task-blog-2~default~OPENSEARCH~Rate-13-127418379-blog-127204331.pc_relevant_recovery_v2&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~OPENSEARCH~Rate-13-127418379-blog-127204331.pc_relevant_recovery_v2&amp;utm_relevant_index=14">关于waline国内无法使用的解决方案 （vercel.app国内无法使用问题）_vercel 国内访问-CSDN博客</a></p>
<p>在域名服务器商（例如 阿里云&gt;云解析DNS&gt;域名解析&gt;解析设置）处添加新的 <code>CNAME</code> 解析记录：</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Name</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>CNAME</strong></td>
<td><em>example</em>（你想要的子域名名称）</td>
<td><strong><a href="http://cname.vercel-dns.com">cname.vercel-dns.com</a></strong> （也可以是<strong><a href="http://cname-china.vercel-dns.com">cname-china.vercel-dns.com</a></strong>）</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>确保在Butterfly的主题配置文件中设置了正确的Waline服务器地址（比如设置为<em><a href="http://example.yourdomain.com">example.yourdomain.com</a></em>）。</p>
</li>
</ul>
<h1>更多美化设置</h1>
<p><a href="#3709373237" title="定制自己的 Waline 评论系统" class="record-link">定制自己的 Waline 评论系统</a><br>
<a href="#3015602463" title="为评论系统增加输入提醒【Waline】" class="record-link">为评论系统增加输入提醒【Waline】</a></p>


                
            </main>

            <footer class="list-content-container">
                
                <details class="record-links">
                    <summary class="menu-title">
                        links
                        <span class="badge">2</span>
                    </summary>

                    <ul class="record-links-list">
                        
                        <li data-target-id="3015602463">
                            <a href="#3015602463">
                                <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                                
                                <span>为评论系统增加输入提醒【Waline】</span>
                                <div class="record-links-context hover">
                                    <p>定制自己的 Waline 评论系统<br>
<span class="id-context" data-target-id="3015602463">为评论系统增加输入提醒【Waline】</span></p>

                                </div>
                            </a>
                        </li>
                        
                        <li data-target-id="3709373237">
                            <a href="#3709373237">
                                <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                                
                                <span>定制自己的 Waline 评论系统</span>
                                <div class="record-links-context hover">
                                    <p><span class="id-context" data-target-id="3709373237">定制自己的 Waline 评论系统</span><br>
为评论系统增加输入提醒【Waline】</p>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                

                
                <details class="record-backlinks" open="open">
                    <summary class="menu-title">
                        backlinks
                        <span class="badge">2</span>
                    </summary>

                    <ul class="record-backlinks-list">
                        
                        <li data-target-id="2065118013">
                            <a href="#2065118013">
                                <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                                
                                <span>国内访问Hexo优化加速-替换jsdelivr的CDN链接</span>
                                <div class="record-links-context hover">
                                    <p>[^hb]: fontawesome 可以考虑更换图标库，请看我之前的文章 装点你的 Butterfly 博客<br>
[^bw]: 处理这个问题前请看我之前的文章：<span class="id-context" data-target-id="1495212389">Hexo 框架 Btterfly 主题引入 Waline 评论系统及国内正常访问</span></p>

                                </div>
                            </a>
                        </li>
                        
                        <li data-target-id="1215492985">
                            <a href="#1215492985">
                                <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                                
                                <span>装点你的 Butterfly 博客</span>
                                <div class="record-links-context hover">
                                    <p><span class="id-context" data-target-id="1495212389">Hexo 框架 Btterfly 主题引入 Waline 评论系统及国内正常访问</span></p>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                
            </footer>
        </article>
        
        <article id="3709373237" class="record">
            <header>
                <h1 class="record-title">定制自己的 Waline 评论系统</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>3709373237</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>Hexo</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('Waline');">Waline</button>
                    
                    <button class="btn" onclick="activeTag('Vercel');">Vercel</button>
                    
                    <button class="btn" onclick="activeTag('Github');">Github</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>4/28/2023</span>
                </div>
                

                

                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/diy-waline.png</span>
                </div>
                
                <div class="record-description">
                    <span>description :</span>
                    <span>通过修改客户端或服务端的配置定制自己的Waline评论区</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>dd188b35</span>
                </div>
                
            </header>

            <main class="record-content">
                <h1>Waline 邮件通知</h1>
<p>Waline 发送邮件，首先你得有一个专门发送通知的邮箱，任何支持 STMP 协议的都行。这里以腾讯企业邮作域名邮箱为例。</p>
<h2>拥有域名邮箱</h2>
<p>注册一个企业微信，企业微信完成企业创建后，可以申请域名邮箱：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230428231218707.png" alt="image-20230428231218707"></p>
<h2>解析设置</h2>
<p>然后在阿里云云解析进行设置：（其他云服务商解析设置方法参考：<a href="https://open.work.weixin.qq.com/help2/pc/19814?person_id=1&amp;searchData=">如何确认域名的服务商以及各大域名商的域名设置方法-帮助中心-企业微信 (qq.com)</a>）</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230428230939924.png" alt="image-20230428230939924"></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230428231010712.png" alt="image-20230428231010712"></p>
<h2>邮箱设置好密码</h2>
<p>拥有企业邮箱之后，登录邮箱设置好密码。可参考[成员如何设置邮箱密码？腾讯企业邮箱帮助中心 (<a href="http://qq.com">qq.com</a>)](<a href="https://service.exmail.qq.com/cgi-bin/help?subtype=1&amp;&amp;id=7&amp;&amp;no=1001558#:~:text=%E6%88%90%E5%91%98%E5%A6%82%E4%BD%95%E8%AE%BE%E7%BD%AE%E9%82%AE%E7%AE%B1%E5%AF%86%E7%A0%81%EF%BC%9F">https://service.exmail.qq.com/cgi-bin/help?subtype=1&amp;&amp;id=7&amp;&amp;no=1001558#:~:text=成员如何设置邮箱密码？</a> _腾讯企业邮箱帮助中心 成员如何设置邮箱密码？,注意：成员初次需要使用 “手机号%2B 验证码”方式登录后，便可以自行设置邮箱密码。 登录后，在“设置-帐户-帐户安全”，设置密码即可，后续也可修改密码。)</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230428222407581.png" alt="image-20230428222407581|500"></p>
<h2>环境变量配置</h2>
<p>设置好域名邮箱密码后，打开 Vercel 服务端项目，点击环境变量：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230428223656516.png" alt="image-20230428223656516|500"></p>
<p>然后按照 Waline 官方文档的指导设置好服务端的环境变量：<a href="https://waline.js.org/guide/features/notification.html#%E9%82%AE%E4%BB%B6%E9%80%9A%E7%9F%A5">评论通知 | Waline</a>，腾讯企业邮相关参数如下：</p>
<pre><code class="language-json">&quot;QQex&quot;: {
    &quot;aliases&quot;: [&quot;QQ Enterprise&quot;],
    &quot;domains&quot;: [&quot;exmail.qq.com&quot;],
    &quot;host&quot;: &quot;smtp.exmail.qq.com&quot;,
    &quot;port&quot;: 465,
    &quot;secure&quot;: true
},
</code></pre>
<p>参考：<a href="https://cloud.tencent.com/developer/article/2067294">Fluid -15- Waline 邮件通知 - 腾讯云开发者社区-腾讯云 (tencent.com)</a></p>
<h2>信件模板</h2>
<p>关于邮件内容的模板，即环境变量 <strong>MAIL_TEMPLATE_ADMIN</strong> 如何写，可自行搜索样例。</p>
<p>这里我参考了洪涝（张洪 Heo）的针对 Twikoo 评论系统的示例：<a href="https://blog.zhheo.com/p/169a1abb.html">Twikoo 评论回复邮件模板：Acrylic Mail 粉 | 张洪 Heo (zhheo.com)</a></p>
<h3>效果</h3>
<p>QQ 邮箱网页版：<br>
<img src="https://cdn.gallery.uuanqin.top/img/20230712235714.png" alt="image.png|475"></p>
<p>QQ 邮箱手机（暗黑模式）：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/Screenshot_20230712_235815.jpg" alt="Screenshot_20230712_235815.jpg|225"></p>
<h3>改动</h3>
<p>其实与 Waline 大差不差，只是有一些写法需要注意（适配 Waline 后改动的地方）：</p>
<ul>
<li>把洪涝示例中变量的形式改成 Waline 中变量的形式，比如<code>${NICK}</code>改为<code>{{self.nick}}</code></li>
<li>评论内容记得加上<code>save</code>，否则信件中显示的是 raw html 字符[^字符显示]。如：<code>{{self.comment|safe}}</code>。</li>
<li>链接地址加上<code>https://</code>，否则点不了。如<code>href=&quot;https://{{site.url}}&quot;</code></li>
<li>Bug 修复：主框宽度调整。手机端、电脑端邮件显示正常。暗黑模式显示正常。</li>
</ul>
<p>[^字符显示]: <a href="https://github.com/walinejs/waline/issues/1034">[Bug]: 自定义邮件通知模板后评论内容显示问题 · Issue #1034 · walinejs/waline (github.com)</a></p>
<h3>模板</h3>
<p>以下代码可直接写入 Waline 项目里 Vercel 环境变量：</p>
<pre><code class="language-html">&lt;div class=&quot;page flex-col&quot;&gt;
    &lt;div class=&quot;box_3 flex-col&quot; style=&quot;
    display: flex;
    position: relative;
    width: 100%;
    height: 206px;
    background: #859cef2e;
    top: 0;
    left: 0;
    justify-content: center;
  &quot;&gt;&lt;div class=&quot;section_1 flex-col&quot; style=&quot;
    background-image: url(https://cdn.gallery.uuanqin.top/img/qlogo.png);
    position: absolute;
    width: 152px;
    height: 152px;
    display: flex;
    top: 130px;
    background-size: cover;
  &quot;&gt;&lt;/div&gt;&lt;/div&gt;
    &lt;div class=&quot;box_4 flex-col&quot; style=&quot;
    margin-top: 92px;
    display: flex;
    flex-direction: column;
    align-items: center;
  &quot;&gt;
      &lt;div class=&quot;text-group_5 flex-col justify-between&quot; style=&quot;
    display: flex;
    flex-direction: column;
    align-items: center;
    margin: 0 20px;
  &quot;&gt;
        &lt;span class=&quot;text_1&quot; style=&quot;
    font-size: 26px;
    font-family: PingFang-SC-Bold, PingFang-SC;
    font-weight: bold;
    color: #000000;
    line-height: 37px;
    text-align: center;
  &quot;&gt;嘿！你有一条新的回复&lt;/span&gt;
        &lt;span class=&quot;text_2&quot; style=&quot;
    font-size: 16px;
    font-family: PingFang-SC-Bold, PingFang-SC;
    font-weight: bold;
    color: #00000050;
    line-height: 22px;
    margin-top: 21px;
    text-align: center;
  &quot;&gt;你在&amp;nbsp;{{site.name|safe}} 博客中留下的评论收到来自&amp;nbsp;{{self.nick}}&amp;nbsp;的回复&lt;/span&gt;
      &lt;/div&gt;
      &lt;div class=&quot;box_2 flex-row&quot; style=&quot;
    margin: 0 20px;
    min-height: 128px;
    background: #F7F7F7;
    border-radius: 12px;
    margin-top: 34px;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    padding: 32px 16px;
    width: 95%;
  &quot;&gt;

        &lt;div class=&quot;text-wrapper_4 flex-col justify-between&quot; style=&quot;
    display: flex;
    flex-direction: column;
    margin-left: 30px;
    margin-bottom: 16px;
  &quot;&gt;
          &lt;span class=&quot;text_3&quot; style=&quot;
    height: 22px;
    font-size: 13px;
    font-family: PingFang-SC-Bold, PingFang-SC;
    font-weight: bold;
    color: #2a67ce;
    line-height: 22px;
  &quot;&gt;{{parent.nick|safe}}&lt;/span&gt;
          &lt;span class=&quot;text_4&quot; style=&quot;
    margin-top: 6px;
    margin-right: 22px;
    font-size: 13px;
    font-family: PingFangSC-Regular, PingFang SC;
    font-weight: 400;
    color: #000000;
    line-height: 22px;
  &quot;&gt;{{parent.comment|safe}}&lt;/span&gt;
        &lt;/div&gt;&lt;hr style=&quot;
      display: flex;
      position: relative;
      border: 1px dashed #859cef2e;
      box-sizing: content-box;
      height: 0px;
      overflow: visible;
      width: 100%;
  &quot;&gt;&lt;div class=&quot;text-wrapper_4 flex-col justify-between&quot; style=&quot;
    display: flex;
    flex-direction: column;
    margin-left: 30px;
  &quot;&gt;
  &lt;hr&gt;
          &lt;span class=&quot;text_3&quot; style=&quot;
    height: 22px;
    font-size: 16px;
    font-family: PingFang-SC-Bold, PingFang-SC;
    font-weight: bold;
    color: #2a67ce;
    line-height: 22px;
  &quot;&gt;{{self.nick|safe}}&lt;/span&gt;
          &lt;span class=&quot;text_4&quot; style=&quot;
    margin-top: 6px;
    margin-right: 22px;
    font-size: 16px;
    font-family: PingFangSC-Regular, PingFang SC;
    font-weight: 400;
    color: #000000;
    line-height: 22px;
  &quot;&gt;{{self.comment|safe}}&lt;/span&gt;
        &lt;/div&gt;

        &lt;a class=&quot;text-wrapper_2 flex-col&quot; style=&quot;
    min-width: 106px;
    height: 38px;
    background: #859cef2e;
    border-radius: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    text-decoration: none;
    margin: auto;
    margin-top: 32px;
  &quot; href=&quot;https://{{site.postUrl}}&quot;&gt;
          &lt;span class=&quot;text_5&quot; style=&quot;
    color: #218adb;
  &quot;&gt;查看详情&lt;/span&gt;
        &lt;/a&gt;
      &lt;/div&gt;
      &lt;div class=&quot;text-group_6 flex-col justify-between&quot; style=&quot;
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-top: 34px;
  &quot;&gt;
        &lt;span class=&quot;text_6&quot; style=&quot;
    height: 17px;
    font-size: 12px;
    font-family: PingFangSC-Regular, PingFang SC;
    font-weight: 400;
    color: #00000045;
    line-height: 17px;
  &quot;&gt;此邮件由评论服务自动发出，直接回复无效。&lt;/span&gt;
        &lt;a class=&quot;text_7&quot; style=&quot;
    height: 17px;
    font-size: 12px;
    font-family: PingFangSC-Regular, PingFang SC;
    font-weight: 400;
    color: #218adb;
    line-height: 17px;
    margin-top: 6px;
    text-decoration: none;
  &quot; href=&quot;https://{{site.url}}&quot;&gt;前往博客&lt;/a&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
</code></pre>
<blockquote>
<p><em>站长备忘：2023.10.20 与正在使用的模板比对过。无重要区别。</em></p>
</blockquote>
<h3>其他模板参考链接</h3>
<p>其他样例参考：</p>
<ul>
<li><a href="https://www.sarakale.top/blog/posts/537344b2.html">waline 邮件通知模板样式一览 | SaraKale's blog</a></li>
<li><a href="https://blog.jyhao.cn/posts/17978.html">自定义 Waline/Twikoo 邮件通知样式 | Night1918 Blog (jyhao.cn)</a></li>
<li><a href="https://cloud.tencent.com/developer/article/2211729">Fluid -29- 修改 waline 邮箱通知模板 - 腾讯云开发者社区-腾讯云 (tencent.com)</a></li>
</ul>
<h1>输入 QQ 邮箱自动获取 QQ 头像（服务端配置）</h1>
<p>如果你的 Waline 服务端是按照官方推荐的 Vercel 部署方式，那么你可以打开 Vercel 对应的 Github 仓库，修改 index.js 文件，将以下内容添加至方框位置：</p>
<pre><code class="language-js">/*
此方法或传入一个 comment 对象，你可以通过 comment.mail 获取邮箱。若返回值为 string 类型，则会直接调用返回值作为头像地址，否则正常生成 MD5。
*/
async avatarUrl(comment) {
    const reg = new RegExp('(\\d+)@qq\\.com$', 'i');
    const mail = comment.mail;
    if (reg.test(mail)) {
      const q = mail.replace(/@qq\.com/i, '').toLowerCase();
      return 'https://q1.qlogo.cn/headimg_dl?dst_uin=' + q + '&amp;spec=4';
    }
  },
</code></pre>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230428162327261.png" alt="image-20230428162327261|500"></p>
<blockquote>
<p>你也可以试着写一个根据 QQ 号自动获取头像和邮箱的函数</p>
</blockquote>
<p>参考：<a href="https://waline.js.org/reference/server/config.html#afterdelete-commentid">服务端配置 | Waline</a></p>
<h1>设置违禁词（服务端配置）</h1>
<p>最近苦于梯子广告入侵，设置违禁词可以解决这个问题。</p>
<p>修改在 Github 上 Waline 文件 index.js：</p>
<pre><code class="language-js">module.exports = Application({
  // 违禁词
  forbiddenWords: ['免费节点'],
});
</code></pre>
<p>评论带有违禁词的统一当做垃圾评论处理，存在误判的话可以从垃圾箱中恢复。</p>
<p>参考：<a href="https://waline.js.org/reference/server/config.html#forbiddenwords">服务端配置 | Waline</a></p>
<h1>评论区美化（客户端配置）</h1>
<blockquote>
<p>本小结以 Hexo 的 Butterfly 主题为例。</p>
</blockquote>
<p>Butterfly 的主题配置文件中 Waline 有一个 option 字段，里面可以定制自己想要的客户端。在 Waline 官方文档中有很多定制选项。</p>
<p>如何将 Waline 官方文档中的内容与 option 字段结合起来？我的理解是，关注官网 js 示例中的 init 字段，把自定义的地方放到 option 中。那怎么放，放什么，格式是什么，接下来跟着我的示例进行即可。</p>
<h2>自定义显示文字</h2>
<p>打开主题配置文件，在 option 中进行配置，配置方法：</p>
<pre><code class="language-yaml">waline:
  option:
    locale: {
      nick: '昵称',
      mail: '邮箱',
      link: '你的网站',
      placeholder: '填写数字QQ邮箱可以自动获取QQ头像',
      requiredMeta: [],
      sofa: '评论区空空如也~呜呜呜',
      anonymous: '匿名的野猫',
      login: '登录(可选)'
      }
</code></pre>
<p>locale 写法参照<a href="https://waline.js.org/cookbook/customize/locale.html#locale-%E9%80%89%E9%A1%B9">自定义语言 | Waline</a></p>
<p>参考：<a href="https://afish.org/2022/11/01/waline_comment/">Hexo|Butterfly 添加 Waline 评论系统 | 小鱼の blog (afish.org)</a></p>
<h2>表情选项卡配置</h2>
<pre><code class="language-yaml">waline:
  option:
    emoji:
    - '//unpkg.com/@waline/emojis@1.1.0/bilibili'
    - '//unpkg.com/@waline/emojis@1.1.0/qq'
    - '//unpkg.com/@waline/emojis@1.1.0/tieba'
    - '//unpkg.com/@waline/emojis@1.1.0/weibo'
</code></pre>
<p>注意到官网配置中 emoji 是一个列表的写法，那转写到 Butterfly 主题配置文件中就以 yaml 的列表写法。</p>
<p>emoji 写法参照：<a href="https://waline.js.org/guide/features/emoji.html">表情选项卡 | Waline</a></p>
<h2>反应配置</h2>
<p>Waline 中反应指的是文章下方的表态：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230429172431151.png" alt="image-20230429172431151|375"></p>
<p>写法：</p>
<pre><code class="language-yaml">waline:
  option:
    reaction: true # 开启快速反应
</code></pre>
<p>或自己自定义反应：</p>
<pre><code class="language-yaml">waline:
  option:
    reaction:
    - 表情地址1
    - 表情地址2
    # 最多支持9个
</code></pre>
<p>reaction 写法参照：<a href="https://waline.js.org/guide/features/reaction.html">文章反应 | Waline</a></p>
<h2>魔改 CSS</h2>
<p>本来涉及 CSS 的修改，应该另写 css 文件再通过 inject 引入的（这也是 Waline 官方推荐的做法）。但是试了不太成功，所以打算把 waline.css 下载到本地，再将 CDN 指向本地位置。不优雅，但能凑合用。</p>
<h3>主题颜色修改</h3>
<p>CSS 下载到了本地就好办了。根据官方给的 <a href="https://waline.js.org/reference/client/style.html">CSS 变量</a>说明，我们可以自己更改 css 文件。</p>
<h3>评论区背景图</h3>
<p>我的做法是在 css 中加上：</p>
<pre><code class="language-css">.wl-editor {
    background-image: url(图片地址);
    background-size: 10%;
    background-repeat: no-repeat;
    background-position: right bottom;
    background-color: rgba(255, 255, 255, 0);
    resize: vertical
}
.wl-editor:focus{
    background-position-x: 800px;
    background-position-y: 1000px;
    transition: all 0.2s ease-in-out 0s;
}
</code></pre>
<blockquote>
<p>上面代码是从其他人美化 Valine 改编以适应 Waline 来的，然而我的前端知识薄弱，不太懂得每个参数的确切含义与整体文件意义，参数是我自己随便调的。</p>
</blockquote>
<p>参考文章：<a href="https://zhuanlan.zhihu.com/p/581640626">Hexo 中 Buttefly 主题 Valine 评论系统配置以及美化（七） - 知乎 (zhihu.com)</a></p>


                
            </main>

            <footer class="list-content-container">
                

                
                <details class="record-backlinks" open="open">
                    <summary class="menu-title">
                        backlinks
                        <span class="badge">1</span>
                    </summary>

                    <ul class="record-backlinks-list">
                        
                        <li data-target-id="1495212389">
                            <a href="#1495212389">
                                <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                                
                                <span>Hexo 框架 Btterfly 主题引入 Waline 评论系统及国内正常访问</span>
                                <div class="record-links-context hover">
                                    <p><span class="id-context" data-target-id="3709373237">定制自己的 Waline 评论系统</span><br>
为评论系统增加输入提醒【Waline】</p>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                
            </footer>
        </article>
        
        <article id="2065118013" class="record">
            <header>
                <h1 class="record-title">国内访问Hexo优化加速-替换jsdelivr的CDN链接</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>2065118013</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>Hexo</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('jsdelivr');">jsdelivr</button>
                    
                    <button class="btn" onclick="activeTag('CDN');">CDN</button>
                    
                    <button class="btn" onclick="activeTag('Butterfly');">Butterfly</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>4/28/2023</span>
                </div>
                

                

                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/jsdeliver-banned.png</span>
                </div>
                
                <div class="record-description">
                    <span>description :</span>
                    <span>由于某种原因，jsdelivr的状况时好时坏，本文介绍Butterfly下替换CDN链接的解决方案</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>7b17333d</span>
                </div>
                
                <div class="record-top_img">
                    <span>top_img :</span>
                    <span></span>
                </div>
                
            </header>

            <main class="record-content">
                <p>假设你刚搭建了个人博客，发现网站的访问速度实在堪忧，怎么办？解决方法无非以下几种方法：</p>
<ul>
<li>有经济实力的，考虑提升硬件性能和带宽（购买高级服务器、增大带宽）</li>
<li>正确使用 CDN 加速源站和图片</li>
<li>如果你的个人博客网站是动态网站（如 Wordpress），但实在没有必要必须是动态网站时，可尝试改成静态框架[^hexo]</li>
</ul>
<p>[^hexo]: 详看我的这篇文章：<a href="#181570378" title="部署 Hexo 个人博客框架到服务器" class="record-link">部署 Hexo 个人博客框架到服务器</a></p>
<p>如果以上的方法你都尝试过，但博客网站可能遇到页面卡顿、显示不全、功能异常（图标、评论、搜索等各种异常）等情况，比如：</p>
<ul>
<li>fontawesome 加载迟、卡，拖慢网页加载[^hb]。</li>
<li>algolia 搜索按钮按不出来</li>
<li>Waline 评论系统不显示或评论数据无法获取[^bw]</li>
</ul>
<p>[^hb]: fontawesome 可以考虑更换图标库，请看我之前的文章 <a href="#1215492985" title="装点你的 Butterfly 博客" class="record-link">装点你的 Butterfly 博客</a><br>
[^bw]: 处理这个问题前请看我之前的文章：<a href="#1495212389" title="Hexo 框架 Btterfly 主题引入 Waline 评论系统及国内正常访问" class="record-link">Hexo 框架 Btterfly 主题引入 Waline 评论系统及国内正常访问</a></p>
<p>而使用魔法访问时却一切正常。这时候我们该考虑是不是 CDN 出现问题了。</p>
<p>本地调试自己的博客网站后，打开浏览器的开发者面板（F12）-&gt;禁用缓存-&gt;点击网络选项卡-&gt;刷新页面：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/jsdeliver%E6%83%B9%E7%9A%84%E7%A5%B81.png" alt="jsdeliver惹的祸1"></p>
<p>你会发现一些 js 文件或 css 文件无法被加载，这些文件大多来源于 jsdelivr 的 CDN 连接。</p>
<blockquote>
<p>不熟悉 CDN 的小伙伴可以理解为，jsdelivr 里存放了大量的 js 文件或 css 文件，你的博客网站需要引入这些文件，但是由于某种原因，jsdelivr 结点的链接状况在国内时好时坏（使用魔法就好）。</p>
</blockquote>
<p>这时我们可以考虑把获取这些 js 或 css 文件的链接替换掉。在你的主题配置上进行替换，这里以 Butterfly 主题为例，在主题配置文件下找到：</p>
<pre><code class="language-yaml">CDN:
    option:
        fontawesome: &lt;替换的cdn&gt;
</code></pre>
<p>建议你把涉及 jsdelivr 都替换掉吧，让中国宝宝访问你的博客网站更快更方便。</p>
<p>各种资源 CDN 链接参考：<a href="https://blog.zhheo.com/p/790087d9.html">Butterfly CDN 链接更改指南，替换 jsdelivr 提升访问速度 | 张洪 Heo (zhheo.com)</a></p>
<p>也可以在下面的两个网站找：</p>
<ul>
<li><a href="https://cdnjs.com/">https://cdnjs.com/</a></li>
<li><a href="https://www.bootcdn.cn/">https://www.bootcdn.cn/</a></li>
</ul>
<p>也可以把文件放在自己的存储桶中（注意看好你的钱包）。</p>
<p>参考：</p>
<ul>
<li><a href="https://blog.zhheo.com/p/790087d9.html">Butterfly CDN 链接更改指南，替换 jsdelivr 提升访问速度 | 张洪 Heo (zhheo.com)</a></li>
<li><a href="https://blog.csdn.net/u013014254/article/details/122045331">jsdelivr 炸了如何解决|用这些免费 cdn_地域男孩的博客-CSDN 博客</a></li>
<li><a href="https://butterfly.js.org/posts/ceeb73f/#custom-format">Butterfly 安裝文檔(四) 主題配置-2 | Butterfly</a></li>
<li><a href="https://github.com/jerryc127/hexo-theme-butterfly/issues/1243">fontawesome 图标问题 · Issue #1243 · jerryc127/hexo-theme-butterfly (github.com)</a></li>
</ul>
<blockquote>
<p>其他优化博客网站的好文（我没仔细看，但是他讲的好有道理）：</p>
<ul>
<li><a href="https://akilar.top/posts/7c16c4bb/">Hexo 博客优化蓝图 | Akilar の糖果屋</a></li>
<li><a href="https://blog.mrzefr.cn/posts/hexo-speed/">MrZeFr 的小窝 - Hello World</a></li>
</ul>
</blockquote>


                
            </main>

            <footer class="list-content-container">
                
                <details class="record-links">
                    <summary class="menu-title">
                        links
                        <span class="badge">3</span>
                    </summary>

                    <ul class="record-links-list">
                        
                        <li data-target-id="181570378">
                            <a href="#181570378">
                                <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                                
                                <span>部署 Hexo 个人博客框架到服务器</span>
                                <div class="record-links-context hover">
                                    <p>[^hexo]: 详看我的这篇文章：<span class="id-context" data-target-id="181570378">部署 Hexo 个人博客框架到服务器</span></p>

                                </div>
                            </a>
                        </li>
                        
                        <li data-target-id="1215492985">
                            <a href="#1215492985">
                                <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                                
                                <span>装点你的 Butterfly 博客</span>
                                <div class="record-links-context hover">
                                    <p>[^hb]: fontawesome 可以考虑更换图标库，请看我之前的文章 <span class="id-context" data-target-id="1215492985">装点你的 Butterfly 博客</span><br>
[^bw]: 处理这个问题前请看我之前的文章：Hexo 框架 Btterfly 主题引入 Waline 评论系统及国内正常访问</p>

                                </div>
                            </a>
                        </li>
                        
                        <li data-target-id="1495212389">
                            <a href="#1495212389">
                                <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                                
                                <span>Hexo 框架 Btterfly 主题引入 Waline 评论系统及国内正常访问</span>
                                <div class="record-links-context hover">
                                    <p>[^hb]: fontawesome 可以考虑更换图标库，请看我之前的文章 装点你的 Butterfly 博客<br>
[^bw]: 处理这个问题前请看我之前的文章：<span class="id-context" data-target-id="1495212389">Hexo 框架 Btterfly 主题引入 Waline 评论系统及国内正常访问</span></p>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                

                
                <details class="record-backlinks" open="open">
                    <summary class="menu-title">
                        backlinks
                        <span class="badge">2</span>
                    </summary>

                    <ul class="record-backlinks-list">
                        
                        <li data-target-id="2966071784">
                            <a href="#2966071784">
                                <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                                
                                <span>server、sqlite朋友圈部署方案</span>
                                <div class="record-links-context hover">
                                    <p>[^jsd]: 参考<span class="id-context" data-target-id="2065118013">国内访问Hexo优化加速-替换jsdelivr的CDN链接</span>。</p>

                                </div>
                            </a>
                        </li>
                        
                        <li data-target-id="2346883624">
                            <a href="#2346883624">
                                <span class="record-type-point" style="color: var(--n_社会生活);">⬤</span>
                                
                                <span>成为一名个人博客网站站长</span>
                                <div class="record-links-context hover">
                                    <p>Hexo：<span class="id-context" data-target-id="2065118013">国内访问Hexo优化加速-替换jsdelivr的CDN链接</span></p>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                
            </footer>
        </article>
        
        <article id="1308325830" class="record">
            <header>
                <h1 class="record-title">在你的Hexo博客上加入进度条</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>1308325830</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>Hexo</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('pace');">pace</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>4/28/2023</span>
                </div>
                

                

                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20230428200419(1).jpg</span>
                </div>
                
                <div class="record-description">
                    <span>description :</span>
                    <span>通过进入pace.js以及本地css实现网站顶部进度条</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>4dfb77c6</span>
                </div>
                
            </header>

            <main class="record-content">
                <h1>引入方法</h1>
<p>如果你使用的是 Butterfly 主题，可以在主题配置文件中加入：</p>
<pre><code class="language-yaml">inject:
  head:
      - &lt;script src=&quot;https://npm.elemecdn.com/pace-js@latest/pace.min.js&quot;&gt;&lt;/script&gt; # pace.js文件
      - &lt;link rel=&quot;stylesheet&quot; href=&quot;/css/&lt;your_pace.css&gt;&quot;&gt;
</code></pre>
<blockquote>
<p>新版本 Butterfly 配置文件中有内置的 pace 选项，但是它的 pace.js 使用的 jsdelivr 提供的 CDN，国内访问困难，CDN 项也没有相应更改的地方，建议按照这篇文章的说明使用老方法进行进度条的引入。</p>
</blockquote>
<h1>基本样式</h1>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230428202826301.png" alt="image-20230428202826301"></p>
<p>PACE 官网给出的示例，这里已把官网的 jsdelivr 连接替换掉了：</p>
<pre><code>https://cdn.bootcdn.net/ajax/libs/pace/1.2.4/pace-theme-default.min.css
</code></pre>
<h1>官网样式</h1>
<p>可以在这里挑选你喜欢的样式并下载对应的 CSS 文件：<a href="https://codebyzach.github.io/pace/">PACE — Automatic page load progress bars (codebyzach.github.io)</a></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230428200140054.png" alt="image-20230428200140054"></p>
<h1>其他样式</h1>
<p>也可以尝试这一种：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230428195652087.png" alt="image-20230428195652087"></p>
<h2>基础版本</h2>
<pre><code class="language-css">.pace {
    -webkit-pointer-events: none;
    pointer-events: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
    z-index: 2000;
    position: fixed;
    margin: auto;
    top: 4px;
    left: 0;
    right: 0;
    height: 8px;
    border-radius: 8px;
    width: 4rem;
    background: #eaecf2;
    border: 1px #e3e8f7;
    overflow: hidden
}

.pace-inactive .pace-progress {
    opacity: 0;
    transition: .3s ease-in
}

.pace .pace-progress {
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    -ms-box-sizing: border-box;
    -o-box-sizing: border-box;
    box-sizing: border-box;
    -webkit-transform: translate3d(0, 0, 0);
    -moz-transform: translate3d(0, 0, 0);
    -ms-transform: translate3d(0, 0, 0);
    -o-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
    max-width: 200px;
    position: absolute;
    z-index: 2000;
    display: block;
    top: 0;
    right: 100%;
    height: 100%;
    width: 100%;
    background: linear-gradient(215deg, #05662a 0%, #bffc16 100%);
    animation: gradient 2s ease infinite;
    background-size: 200%
}

.pace.pace-inactive {
    opacity: 0;
    transition: .3s;
    top: -8px
}
</code></pre>
<h2>动态版本</h2>
<pre><code class="language-css">.pace {
    -webkit-pointer-events: none;
    pointer-events: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
    z-index: 2000;
    position: fixed;
    margin: auto;
    top: 4px;
    left: 0;
    right: 0;
    height: 8px;
    border-radius: 8px;
    width: 4rem;
    background: #eaecf2;
    border: 1px #e3e8f7;
    overflow: hidden
}

.pace-inactive .pace-progress {
    opacity: 0;
    transition: .3s ease-in
}

.pace .pace-progress {
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    -ms-box-sizing: border-box;
    -o-box-sizing: border-box;
    box-sizing: border-box;
    -webkit-transform: translate3d(0, 0, 0);
    -moz-transform: translate3d(0, 0, 0);
    -ms-transform: translate3d(0, 0, 0);
    -o-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
    max-width: 200px;
    position: absolute;
    z-index: 2000;
    display: block;
    top: 0;
    right: 100%;
    height: 100%;
    width: 100%;
    background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
    animation: gradient 1.5s ease infinite;
    background-size: 200%
}

.pace.pace-inactive {
    opacity: 0;
    transition: .3s;
    top: -8px
}
@keyframes gradient {
  0% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
  100% {
    background-position: 0% 50%;
  }
}
</code></pre>
<p>对比两个版本的差异，相信你能自定义出一套自己的进度条。</p>
<h1>本文参考</h1>
<ul>
<li><a href="https://blog.trfox.ml/p/81434d957ca9/">给你的网站/博客顶部加上加载进度条 | Teror (trfox.ml)</a></li>
</ul>


                
            </main>

            <footer class="list-content-container">
                

                
                <details class="record-backlinks" open="open">
                    <summary class="menu-title">
                        backlinks
                        <span class="badge">1</span>
                    </summary>

                    <ul class="record-backlinks-list">
                        
                        <li data-target-id="414962704">
                            <a href="#414962704">
                                <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                                
                                <span>Hexo 博客的写作与装饰</span>
                                <div class="record-links-context hover">
                                    <ul>
<li><a href="https://blog.zhheo.com/p/ec57d8b2.html">如何让博客支持 AI 摘要，使用 TianliGPT 自动生成文章的 AI 摘要 | 张洪 Heo</a></li>
<li><a href="https://github.com/qxchuckle/Post-Summary-AI">qxchuckle/Post-Summary-AI: 一个较通用的，生成网站内文章摘要，并推荐相关文章的AI (github.com)</a><br>
加入进度条：<span class="id-context" data-target-id="1308325830">在你的Hexo博客上加入进度条</span></li>
</ul>
<h1>BtterFly 主题相关</h1>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                
            </footer>
        </article>
        
        <article id="681885666" class="record">
            <header>
                <h1 class="record-title">Hexo博客添加漂浮物效果（可定制显示页面）</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>681885666</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>Hexo</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('ButterFly');">ButterFly</button>
                    
                    <button class="btn" onclick="activeTag('JavaScript');">JavaScript</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>4/30/2023</span>
                </div>
                

                

                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/starfloat.png</span>
                </div>
                
                <div class="record-description">
                    <span>description :</span>
                    <span>为博客添加漂浮物效果，并可定制需要显示漂浮物的页面。Hexo优雅改。</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>28a4bfe2</span>
                </div>
                
            </header>

            <main class="record-content">
                <p>本文为Hexo Butterfly主题的优雅改（只引入js文件）。<br>
原码参考自：<a href="https://yisous.xyz/posts/670e47f/#%E8%90%BD%E6%A8%B1%E7%89%B9%E6%95%88%E6%90%AD%E9%85%8D%E5%8D%9A%E5%AE%A2%E8%AE%BE%E7%BD%AE%E9%A3%9F%E7%94%A8">博客魔改日记（3） | Ariasakaの小窝 (yisous.xyz)</a>，在其中做了改动：</p>
<ul>
<li>替换了部分变量和注释名</li>
<li>增加可定制显示漂浮物页面的逻辑<br>
使用方法：</li>
<li>需要所有博客页面都显示漂浮物：将<code>allowAll = true</code></li>
<li>指定显示漂浮物的页面：将<code>allowAll = false</code>，在urlAllowList中列出需要显示漂浮物的网页相对地址。如<code>/about/</code>。<br>
缺点显而易见：<strong>不灵活</strong>。后续将会改进。</li>
</ul>
<p>js代码：</p>
<pre><code class="language-js">// 漂浮物
// 新增函数 
// 首先获取 Url，然后把 Url 通过 // 截成两部分，再从后一部分中截取相对路径。如果截取到的相对路径中有参数，则把参数去掉。
// 获取相对路径
function GetUrlRelativePath()
{
    var url = document.location.toString();
    var arrUrl = url.split(&quot;//&quot;);

    var start = arrUrl[1].indexOf(&quot;/&quot;);
    var relUrl = arrUrl[1].substring(start);//stop省略，截取从start开始到结尾的所有字符

    if(relUrl.indexOf(&quot;?&quot;) != -1){
        relUrl = relUrl.split(&quot;?&quot;)[0];
    }
    return relUrl;
}
var allowAll = false; // true 则允许所有网页存在漂浮物
// 允许显示漂浮物的网址列表
var urlAllowList = [
    &quot;/about/&quot;,
    &quot;/link/friends/&quot;,
]

var isAllowFloat = false;   // 全局变量，允许使用漂浮特效

// 判断
function decide(){
    isAllowFloat = true;
    if(!allowAll){
        // 判断当前页面是否为指定页面
        var url = GetUrlRelativePath();
        var i = 0;
        for(;i&lt;urlAllowList.length;i++){
            if(url===urlAllowList[i]){
                // console.log(i);
                isAllowFloat = true;
                break;
            }
        }
        if(i===urlAllowList.length){
            isAllowFloat = false;
        }
    }
    console.log(isAllowFloat)
    if(isAllowFloat)startFloat();
}

var stop, staticx;
var img = new Image();
img.src = &quot;/image/star_float.png&quot;; // 图片

function Float(x, y, s, r, fn) {
    this.x = x;
    this.y = y;
    this.s = s;
    this.r = r;
    this.fn = fn;
}

Float.prototype.draw = function(cxt) {
    cxt.save();
    var xc = 40 * this.s / 4;
    cxt.translate(this.x, this.y);
    cxt.rotate(this.r);
    cxt.drawImage(img, 0, 0, 35 * this.s, 35 * this.s)
    //漂浮物大小
    cxt.restore();
}

Float.prototype.update = function() {
    this.x = this.fn.x(this.x, this.y);
    this.y = this.fn.y(this.y, this.y);
    this.r = this.fn.r(this.r);
    if (this.x &gt; window.innerWidth || this.x &lt; 0 || this.y &gt; window.innerHeight || this.y &lt; 0) {
        this.r = getRandom('fnr');
        if (Math.random() &gt; 0.4) {
            this.x = getRandom('x');
            this.y = 0;
            this.s = getRandom('s');
            this.r = getRandom('r');
        } else {
            this.x = window.innerWidth;
            this.y = getRandom('y');
            this.s = getRandom('s');
            this.r = getRandom('r');
        }
    }
}

FloatList = function() {
    this.list = [];
}
FloatList.prototype.push = function(float) {
    this.list.push(float);
}
FloatList.prototype.update = function() {
    for (var i = 0, len = this.list.length; i &lt; len; i++) {
        this.list[i].update();
    }
}
FloatList.prototype.draw = function(cxt) {
    for (var i = 0, len = this.list.length; i &lt; len; i++) {
        this.list[i].draw(cxt);
    }
}
FloatList.prototype.get = function(i) {
    return this.list[i];
}
FloatList.prototype.size = function() {
    return this.list.length;
}

function getRandom(option) {
    var ret, random;
    switch (option) {
    case 'x':
        ret = Math.random() * window.innerWidth;
        break;
    case 'y':
        ret = Math.random() * window.innerHeight;
        break;
    case 's':
        ret = Math.random();
        break;
    case 'r':
        ret = Math.random() * 6;
        break;
    case 'fnx':
        random = -0.5 + Math.random() * 1;
        ret = function(x, y) {
            return x + 0.5 * random - 0.6;
            //x轴速度
        }
        ;
        break;
    case 'fny':
        random = 0.8 + Math.random() * 0.7
        //y轴速度
        ret = function(x, y) {
            return y + random;
        }
        ;
        break;
    case 'fnr':
        random = Math.random() * 0.03;
        ret = function(r) {
            return r + random;
        }
        ;
        break;
    }
    return ret;
}

function startFloat() {

    requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame || window.oRequestAnimationFrame;
    var canvas = document.createElement('canvas'), cxt;
    staticx = true;
    canvas.height = window.innerHeight;
    canvas.width = window.innerWidth;
    canvas.setAttribute('style', 'position: fixed;left: 0;top: 0;pointer-events: none;');
    canvas.setAttribute('id', 'canvas_float');
    document.getElementsByTagName('body')[0].appendChild(canvas);
    cxt = canvas.getContext('2d');
    var floatList = new FloatList();
    for (var i = 0; i &lt; 10; i++) {
        //漂浮物数量
        var float, randomX, randomY, randomS, randomR, randomFnx, randomFny;
        randomX = getRandom('x');
        randomY = getRandom('y');
        randomR = getRandom('r');
        randomS = getRandom('s');
        randomFnx = getRandom('fnx');
        randomFny = getRandom('fny');
        randomFnR = getRandom('fnr');
        float = new Float(randomX,randomY,randomS,randomR,{
            x: randomFnx,
            y: randomFny,
            r: randomFnR
        });
        float.draw(cxt);
        floatList.push(float);
    }
    stop = requestAnimationFrame(function() {
        cxt.clearRect(0, 0, canvas.width, canvas.height);
        floatList.update();
        floatList.draw(cxt);
        stop = requestAnimationFrame(arguments.callee);
    })
}

window.onresize = function() {
    if(!isAllowFloat)return;
    var canvasSnow = document.getElementById('canvas_float');
    canvasSnow.width = window.innerWidth;
    canvasSnow.height = window.innerHeight;
}

function stopp(e) {
    if (!e &amp;&amp; document.getElementById(&quot;canvas_float&quot;)) {
        var child = document.getElementById(&quot;canvas_float&quot;);
        child.parentNode.removeChild(child);
        window.cancelAnimationFrame(stop);
    } else if (e &amp;&amp; !document.getElementById(&quot;canvas_float&quot;)) {
        decide();
    }
}

window.addEventListener(&quot;DOMContentLoaded&quot;,decide);
</code></pre>
<p>也许不够优雅，但也够用了。</p>
<p>未来计划：节日触发漂浮物效果，以及优雅进行实现。<a href="https://blog.csdn.net/LEVsunshine/article/details/109069345">js处理时间戳为各种格式/js判断公历/农历/周历节日和节气_js 二十四节气计算_to Zero-的博客-CSDN博客</a></p>


                
            </main>

            <footer class="list-content-container">
                

                
                <details class="record-backlinks" open="open">
                    <summary class="menu-title">
                        backlinks
                        <span class="badge">1</span>
                    </summary>

                    <ul class="record-backlinks-list">
                        
                        <li data-target-id="414962704">
                            <a href="#414962704">
                                <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                                
                                <span>Hexo 博客的写作与装饰</span>
                                <div class="record-links-context hover">
                                    <p>漂浮物的显示：<span class="id-context" data-target-id="681885666">Hexo博客添加漂浮物效果（可定制显示页面）</span></p>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                
            </footer>
        </article>
        
        <article id="2958737902" class="record">
            <header>
                <h1 class="record-title">将 CDN 缓存自动刷新加入到博客发布的工作流（Hexo、WordPress）</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>2958737902</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>核心协同</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('CDN');">CDN</button>
                    
                    <button class="btn" onclick="activeTag('API');">API</button>
                    
                    <button class="btn" onclick="activeTag('Node.js');">Node.js</button>
                    
                    <button class="btn" onclick="activeTag('JavaScript');">JavaScript</button>
                    
                    <button class="btn" onclick="activeTag('Hexo');">Hexo</button>
                    
                    <button class="btn" onclick="activeTag('WordPress');">WordPress</button>
                    
                    <button class="btn" onclick="activeTag('php');">php</button>
                    
                    <button class="btn" onclick="activeTag('SDK');">SDK</button>
                    
                    <button class="btn" onclick="activeTag('腾讯云');">腾讯云</button>
                    
                    <button class="btn" onclick="activeTag('对象存储');">对象存储</button>
                    
                    <button class="btn" onclick="activeTag('COS');">COS</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>5/1/2023</span>
                </div>
                

                

                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/tencentcdn545.jpg</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>b05ac1ee</span>
                </div>
                
                <div class="record-description">
                    <span>description :</span>
                    <span>本文提供两类博客刷新CDN方法，另附有腾讯云SDK的使用介绍以及API KEY安全使用方法</span>
                </div>
                
            </header>

            <main class="record-content">
                <blockquote>
<p>[!success] 本文已收录至 <a href="https://butterfly.zhheo.com/">Butterfly 主题美化教程</a></p>
</blockquote>
<p>使用了 CDN 加速源站的小伙伴可能会遇到一个问题，那就是每次发布博客到服务器后，都需要手动在腾讯云控制台进行节点的缓存刷新，很是麻烦。这里我介绍几种刷新 CDN 缓存的方法，对于 Hexo 博客，将着重介绍通过脚本的思路实现一键发布的具体流程。</p>
<h1>方案一：腾讯云对象存储的 CDN 刷新</h1>
<p>首先介绍官方方案。点击存储桶后可以找到 CDN 缓存刷新函数，这是一项收费服务。有兴趣的小伙伴可以试一试。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230824094657.png" alt="image.png"></p>
<h1>方案二：自写 JS 脚本并利用钩子实现（Hexo 方案）</h1>
<h2>思路（package.json 编写）</h2>
<p>在接触 Hexo 博客建站的时候，你一定会知道 Hexo 三连：</p>
<pre><code class="language-sh">hexo clean &amp;&amp; hexo g &amp;&amp; hexo d
# 当然可以简写成
hexo clean &amp;&amp; hexo d -g
</code></pre>
<blockquote>
<p>命令含义参考：<a href="https://hexo.io/zh-cn/docs/commands">指令 | Hexo</a></p>
</blockquote>
<p>上面的命令可以写进<code>[blog_root]/package.json</code>的<code>scripts</code>中，如：</p>
<pre><code class="language-json">&quot;scripts&quot;: {
	&quot;publish&quot;: &quot;hexo clean &amp;&amp; hexo d -g&quot;,
	&quot;start&quot;: &quot;hexo clean &amp;&amp; hexo g &amp;&amp; hexo s&quot;
},
</code></pre>
<p>这样每次部署我们只需要运行<code>npm run publish</code>即可完成连击。</p>
<p>在完成博客部署连击后，我们可以再执行一个脚本刷新腾讯云 CDN 缓存。我打算写一个 js 脚本<code>auto_flush_cdn.js</code>用 node 运行（毕竟玩 Hexo 总会装有 Node.js 的吧）。</p>
<p>这样我们的部署脚本就会是这样：</p>
<pre><code class="language-json">&quot;scripts&quot;: {
  &quot;publish&quot;: &quot;hexo clean &amp;&amp; hexo d -g &amp;&amp; node .\\auto_flush_cdn.js&quot;,
},
</code></pre>
<p>或者利用钩子：</p>
<pre><code class="language-json">&quot;scripts&quot;: {
	&quot;publish&quot;: &quot;hexo clean &amp;&amp; hexo d -g&quot;,
    &quot;postpublish&quot;: &quot;node .\\auto_flush_cdn.js&quot;,
},
</code></pre>
<p>现在的问题就是 <code>auto_flush_cdn.js</code> 该如何写。</p>
<h2>使用腾讯云 SDK 进行开发</h2>
<p>登录腾讯云后，打开云产品&gt;云 API：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230501153225264.png" alt="image-20230501153225264"></p>
<p>我们要使用腾讯云 SDK，需要先安装依赖：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/%25E4%25BE%259D%25E8%25B5%2596%25E4%25B8%258B%25E8%25BD%25BDdfsdf.jpg" alt="依赖下载dfsdf"></p>
<p>这里我就安装在博客目录了：博客下新建终端运行命令<code>npm install tencentcloud-sdk-nodejs-cdn --save</code></p>
<blockquote>
<p>[!hint] 提示<br>
实践中遇到找不到模块的问题，安装好依赖后记得重启终端、VSCode 甚至电脑。如果不行请另外搜索解决方案。</p>
</blockquote>
<p>然后找到对应的 API，按照平台指示的说明填写好参数，充分利用其诊断工具进行在线调试。（一般不会出什么问题）</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/%25E7%25BA%25BF%25E4%25B8%258A%25E5%25B0%259D%25E8%25AF%2595%25E6%258E%25A5%25E5%258F%25A3dfdff.jpg" alt="线上尝试接口dfdff"></p>
<p>没有问题的话我们就可以把平台代码复制下来了，在代码中改改 API ID 和 API KEY 参数即可。</p>
<blockquote>
<p>[!warning] 注意<br>
此处 API ID 和 API KEY 参数填写仅供演示。为了安全起见，建议不要在代码中写入任何的密匙。详情看下一小节。</p>
</blockquote>
<p>运行一下我们的脚本文件尝试一下：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/%25E6%2588%2590%25E5%258A%259Fddf.jpg" alt="成功ddf"></p>
<p>没有返回错误信息，看了看控制台确实进行了刷新。如果出现问题，可以把 RequestId 粘贴到<a href="https://console.cloud.tencent.com/api/diagnosis">API Doctor(使用诊断) - 云 API - 控制台 (tencent.com)</a>进行诊断。</p>
<p>附控制台看刷新纪录的方法，打开内容分发网络找刷新预热的操作记录：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/%25E6%259F%25A5%25E7%259C%258B%25E6%259C%2589%25E6%25B2%25A1%25E6%259C%2589%25E5%2588%25B7%25E6%2596%25B0%25E6%2588%2590%25E5%258A%259F6546.jpg" alt="查看有没有刷新成功6546"></p>
<h2>安全使用 API KEY</h2>
<p>在使用腾讯云 SDK 进行开发时，不可避免的需要传入 API KEY，但是把密匙硬写在代码中是不安全的。</p>
<blockquote>
<p>[!warning] 注意<br>
代码泄露可能会导致 SecretId 和 SecretKey 泄露，并威胁账号下所有资源的安全性。建议不要在代码中使用持久 SecretId 和 SecretKey。</p>
<p><em>——腾讯云</em></p>
</blockquote>
<p>这里介绍的是通过环境变量读取 SecretId 和 SecretKey 方案。</p>
<p>首先在自己的系统中配置环境变量，把自己的 SecretId 和 SecretKey 填进去：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/%25E7%25A4%25BA%25E4%25BE%258Benv546546.jpg" alt="示例env546546"></p>
<p>我们可以写一个 demo 测试一下：</p>
<p>新建 test_env.js，写入两行代码：</p>
<pre><code class="language-js">var Key = process.env.TENCENT_API_SECRETID;
console.log(Key)
</code></pre>
<p>运行脚本：</p>
<pre><code class="language-sh">node &lt;your test_env.js&gt;
</code></pre>
<p><img src="https://cdn.gallery.uuanqin.top/img/test%2520env%2520%25E6%2588%2590%25E5%258A%259Fdfsdf.jpg" alt="test env 成功dfsdf"></p>
<p>若成功输出即配置成功。</p>
<blockquote>
<p>[!warning] 注意<br>
环境变量配置好后，记得重启你的终端、VSCode（如果你使用 VSCode 的终端）。太玄学的话，你懂的，重启电脑。</p>
</blockquote>
<p>在你刚刚从腾讯云复制下来的代码文件中做以下修改：</p>
<pre><code class="language-diff">const tencentcloud = require(&quot;tencentcloud-sdk-nodejs-cdn&quot;);

const CdnClient = tencentcloud.cdn.v20180606.Client;

+ var secretId = process.env.TENCENT_API_SECRETID;
+ var secretKey = process.env.TENCENT_API_SECRETKEY;
...

const clientConfig = {
  credential: {
-   secretId: &quot;SecretId&quot;,
-   secretKey: &quot;SecretKey&quot;,
+   secretId: secretId,
+   secretKey: secretKey,
  },
  ...
};
</code></pre>
<p>完成。</p>
<h2>脚本</h2>
<p>最后的脚本文件文件：</p>
<pre><code class="language-js">// Depends on tencentcloud-sdk-nodejs version 4.0.3 or higher
const tencentcloud = require(&quot;tencentcloud-sdk-nodejs-cdn&quot;);

const CdnClient = tencentcloud.cdn.v20180606.Client;

var secretId = process.env.TENCENT_API_SECRETID;
var secretKey = process.env.TENCENT_API_SECRETKEY;

// 实例化一个认证对象，入参需要传入腾讯云账户 SecretId 和 SecretKey，此处还需注意密钥对的保密
// 代码泄露可能会导致 SecretId 和 SecretKey 泄露，并威胁账号下所有资源的安全性。以下代码示例仅供参考，建议采用更安全的方式来使用密钥，请参见：https://cloud.tencent.com/document/product/1278/85305
// 密钥可前往官网控制台 https://console.cloud.tencent.com/cam/capi 进行获取
const clientConfig = {
  credential: {
    secretId: secretId,
    secretKey: secretKey,
  },
  region: &quot;&quot;,
  profile: {
    httpProfile: {
      endpoint: &quot;cdn.tencentcloudapi.com&quot;,
    },
  },
};

// 实例化要请求产品的client对象,clientProfile是可选的
const client = new CdnClient(clientConfig);
const params = {
    &quot;Paths&quot;: [
      /* 替换成你的网址 */
        &quot;https://uuanqin.top&quot;,
        &quot;https://www.uuanqin.top&quot;
    ],
    &quot;FlushType&quot;: &quot;delete&quot;
};
client.PurgePathCache(params).then(
  (data) =&gt; {
    console.log(data);
  },
  (err) =&gt; {
    console.error(&quot;error&quot;, err);
  }
);
</code></pre>
<h1>方案三：WordPress 解决方案</h1>
<p>在 <code>functions.php</code> 下添加自动刷新腾讯云控制台 CDN 缓存的操作。</p>
<pre><code class="language-php">/* 需要填写你的密钥，访问 https://console.qcloud.com/capi 获取 SecretId 及 $secretKey */
$secretKey = '填写你的密钥';
$secretId = '填写你的密钥';

//更新或发布文章清理本文和首页CDN缓存
add_action('publish_post', 'Clean_By_Publish', 0);

//提交评论更新本文CDN缓存
add_action('comment_post', 'Clean_By_Comments',0);

//评论被审核更新本文CDN缓存
add_action('comment_unapproved_to_approved', 'Clean_By_Approved',0);

//发布文章更新CDN缓存函数
function Clean_By_Publish($post_ID){
global $secretKey,$secretId;
$url = get_permalink($post_ID);
$action='RefreshCdnUrl';
/*要清理的页面，默认包含首页和文章页面，需要清理其他页面请自行发挥*/
$PRIVATE_PARAMS = array(
'urls.0' =&gt; home_url(),
'urls.1' =&gt; $url ,
);
$HttpUrl=&quot;cdn.api.qcloud.com&quot;;
/*除非有特殊说明，如MultipartUploadVodFile，其它接口都支持GET及POST*/
$HttpMethod=&quot;POST&quot;;
/*是否https协议，大部分接口都必须为https，只有少部分接口除外（如MultipartUploadVodFile）*/
$isHttps =true;
/*下面这五个参数为所有接口的 公共参数；对于某些接口没有地域概念，则不用传递Region（如DescribeDeals）*/
$COMMON_PARAMS = array(
'Nonce' =&gt; rand(),
'Timestamp' =&gt;time(NULL),
'Action' =&gt;$action,
'SecretId' =&gt; $secretId,
);
/***********************************************************************************/
CreateRequest($HttpUrl,$HttpMethod,$COMMON_PARAMS,$secretKey, $PRIVATE_PARAMS, $isHttps);
}

//提交评论清理文章CDN函数
function Clean_By_Comments($comment_id)
{
global $secretKey,$secretId;
$comment = get_comment($comment_id);
$url = get_permalink($comment-&gt;comment_post_ID);
$action='RefreshCdnUrl';
/*参数*/
$PRIVATE_PARAMS = array(
'urls.0' =&gt; $url,
);
$HttpUrl=&quot;cdn.api.qcloud.com&quot;;
/*除非有特殊说明，如MultipartUploadVodFile，其它接口都支持GET及POST*/
$HttpMethod=&quot;POST&quot;;
/*是否https协议，大部分接口都必须为https，只有少部分接口除外（如MultipartUploadVodFile）*/
$isHttps =true;
/*下面这五个参数为所有接口的 公共参数；对于某些接口没有地域概念，则不用传递Region（如DescribeDeals）*/
$COMMON_PARAMS = array(
'Nonce' =&gt; rand(),
'Timestamp' =&gt;time(NULL),
'Action' =&gt;$action,
'SecretId' =&gt; $secretId,
);
/***********************************************************************************/
CreateRequest($HttpUrl,$HttpMethod,$COMMON_PARAMS,$secretKey, $PRIVATE_PARAMS, $isHttps);
}

//评论被审核清理CDN缓存函数
function Clean_By_Approved($comment)
{
global $secretKey,$secretId;
$url = get_permalink($comment-&gt;comment_post_ID);
$action='RefreshCdnUrl';
/*参数*/
$PRIVATE_PARAMS = array(
'urls.0' =&gt; $url,
);
$HttpUrl=&quot;cdn.api.qcloud.com&quot;;
/*除非有特殊说明，如MultipartUploadVodFile，其它接口都支持GET及POST*/
$HttpMethod=&quot;POST&quot;;
/*是否https协议，大部分接口都必须为https，只有少部分接口除外（如MultipartUploadVodFile）*/
$isHttps =true;
/*下面这五个参数为所有接口的 公共参数；对于某些接口没有地域概念，则不用传递Region（如DescribeDeals）*/
$COMMON_PARAMS = array(
'Nonce' =&gt; rand(),
'Timestamp' =&gt;time(NULL),
'Action' =&gt;$action,
'SecretId' =&gt; $secretId,
);
/***********************************************************************************/
CreateRequest($HttpUrl,$HttpMethod,$COMMON_PARAMS,$secretKey, $PRIVATE_PARAMS, $isHttps);
}

//请求主函数，无需改动
function CreateRequest($HttpUrl,$HttpMethod,$COMMON_PARAMS,$secretKey, $PRIVATE_PARAMS, $isHttps)
{
$FullHttpUrl = $HttpUrl.&quot;/v2/index.php&quot;;
/***************对请求参数 按参数名 做字典序升序排列，注意此排序区分大小写*************/
$ReqParaArray = array_merge($COMMON_PARAMS, $PRIVATE_PARAMS);
ksort($ReqParaArray);
/**********************************生成签名原文**********************************
* 将 请求方法, URI地址,及排序好的请求参数 按照下面格式 拼接在一起, 生成签名原文，此请求中的原文为
* GETcvm.api.qcloud.com/v2/index.php?Action=DescribeInstances&amp;Nonce=345122&amp;Region=gz
* &amp;SecretId=AKIDz8krbsJ5yKBZQ ·1pn74WFkmLPx3gnPhESA&amp;Timestamp=1408704141
* &amp;instanceIds.0=qcvm12345&amp;instanceIds.1=qcvm56789
* ****************************************************************************/
$SigTxt = $HttpMethod.$FullHttpUrl.&quot;?&quot;;
$isFirst = true;
foreach ($ReqParaArray as $key =&gt; $value)
{
if (!$isFirst)
{
$SigTxt = $SigTxt.&quot;&amp;&quot;;
}
$isFirst= false;
/*拼接签名原文时，如果参数名称中携带_，需要替换成.*/
if(strpos($key, '_'))
{
$key = str_replace('_', '.', $key);
}
$SigTxt=$SigTxt.$key.&quot;=&quot;.$value;
}
/*********************根据签名原文字符串 $SigTxt，生成签名 Signature******************/
$Signature = base64_encode(hash_hmac('sha1', $SigTxt, $secretKey, true));
/***************拼接请求串,对于请求参数及签名，需要进行urlencode编码********************/
$Req = &quot;Signature=&quot;.urlencode($Signature);
foreach ($ReqParaArray as $key =&gt; $value)
{
$Req=$Req.&quot;&amp;&quot;.$key.&quot;=&quot;.urlencode($value);
}
/*********************************发送请求********************************/
if($HttpMethod === 'GET')
{
if($isHttps === true)
{
$Req=&quot;https://&quot;.$FullHttpUrl.&quot;?&quot;.$Req;
}
else
{
$Req=&quot;http://&quot;.$FullHttpUrl.&quot;?&quot;.$Req;
}
$Rsp = file_get_contents($Req);
}
else
{
if($isHttps === true)
{
$Rsp= SendPost(&quot;https://&quot;.$FullHttpUrl,$Req,$isHttps);
}
else
{
$Rsp= SendPost(&quot;http://&quot;.$FullHttpUrl,$Req,$isHttps);
}
}
//var_export(json_decode($Rsp,true));
return json_decode($Rsp,true);
}
function SendPost($FullHttpUrl, $Req, $isHttps)
{
$ch = curl_init();
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $Req);
curl_setopt($ch, CURLOPT_URL, $FullHttpUrl);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_TIMEOUT, 1 );
if ($isHttps === true) {
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);
}
$result = curl_exec($ch);
return $result;
}
</code></pre>
<h1>本文参考</h1>
<ul>
<li><a href="https://cloud.tencent.com/document/product/1278/46697">云 API 使用 API Explorer-快速入门-文档中心-腾讯云 (tencent.com)</a></li>
<li><a href="https://cloud.tencent.com/document/sdk/Node.js">Node.js-SDK 中心-腾讯云 (tencent.com)</a></li>
<li><a href="https://blog.csdn.net/qq_41684621/article/details/111463672">npm 安装包的路径在哪里<em>npm install 在哪里输入</em>兮动人的博客-CSDN 博客</a></li>
<li><a href="https://blog.csdn.net/sunnyjingqi/article/details/107000607">npm 之安装、更新、卸载本地安装包_samllplum 的博客-CSDN 博客</a></li>
<li><a href="https://www.ly522.com/1506.html">wordpress 腾讯 CDN 缓存实现发布/更新文章/评论自动刷新-轻刻年轮 (ly522.com)</a></li>
<li><a href="https://docs.npmjs.com/cli/v6/using-npm/scripts#special-packagejson-config-object">scripts | npm Docs (npmjs.com)</a></li>
<li><a href="http://ruanyifeng.com/blog/2016/10/npm_scripts.html">npm scripts 使用指南 - 阮一峰的网络日志 (ruanyifeng.com)</a></li>
<li><a href="https://cloud.tencent.com/document/product/1278/85305">云 API 云 API 密钥安全方案推荐-开发指南-文档中心-腾讯云 (tencent.com)</a></li>
</ul>


                
            </main>

            <footer class="list-content-container">
                

                
                <details class="record-backlinks" open="open">
                    <summary class="menu-title">
                        backlinks
                        <span class="badge">2</span>
                    </summary>

                    <ul class="record-backlinks-list">
                        
                        <li data-target-id="4139834099">
                            <a href="#4139834099">
                                <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                                
                                <span>Butterfly 侧边栏实现 Obsidian 关系图谱</span>
                                <div class="record-links-context hover">
                                    <ul>
<li>使用钩子在 Hexo 部署前检查 Obsidian 是否启动：Hexo 博客适配 Obsidian 新语法</li>
<li>Hexo 发布后自动刷新 CDN：<span class="id-context" data-target-id="2958737902">将 CDN 缓存自动刷新加入到博客发布的工作流（Hexo、WordPress）</span></li>
</ul>

                                </div>
                            </a>
                        </li>
                        
                        <li data-target-id="414962704">
                            <a href="#414962704">
                                <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                                
                                <span>Hexo 博客的写作与装饰</span>
                                <div class="record-links-context hover">
                                    <p>我的工作流：<span class="id-context" data-target-id="2958737902">将 CDN 缓存自动刷新加入到博客发布的工作流（Hexo、WordPress）</span>、构建 Obsidian 的 Hexo 写作工作流</p>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                
            </footer>
        </article>
        
        <article id="2052246699" class="record">
            <header>
                <h1 class="record-title">使用 Adobe Premiere Pro 实现 GIF 动图画面拼接</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>2052246699</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>工具箱</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('Adobe Premiere Pro');">Adobe Premiere Pro</button>
                    
                    <button class="btn" onclick="activeTag('GIF');">GIF</button>
                    
                    <button class="btn" onclick="activeTag('WPS');">WPS</button>
                    
                    <button class="btn" onclick="activeTag('PPT');">PPT</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>5/1/2023</span>
                </div>
                

                

                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/gifpngcover.jpg</span>
                </div>
                
                <div class="record-description">
                    <span>description :</span>
                    <span>文章介绍通过素材进行画面拼接和合并的技巧和方法</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>7a52ccab</span>
                </div>
                
            </header>

            <main class="record-content">
                <p>想自己组合一个 GIF，本来以为这种简单的东西交给在线网站做就行了，不必用到 PR 来做，不然有点大材小用的感觉。但是在互联网找一圈后，能成功达到我的要求的根本没有，主要槽点在于：</p>
<ul>
<li>没有符合我需求的 GIF 处理。我要的是<strong>画面上的拼接</strong>，不是 <strong>GIF 前后合并</strong></li>
<li>不能直击痛点。WPS 图像处理也有 GIF 编辑，但是功能少和简陋。一些网站提供图像拼接，但是只能在规定的框架格式下运行（还要关注公众号）</li>
<li>不能逐帧操作。WPS 图像处理可以逐帧操作，但简陋，不好调整图片<br>
额......突然发现我的需求还是挺复杂的。那么，刁钻的要求往往需要专业的软件解决，于是我就打算使用 PR 完成这个需求。<br>
其实到最后，PR 也没能一键解决最后的需求。</li>
</ul>
<h1>需求描述</h1>
<p>我拥有 GIF 图一张，PNG 素材两张（两个气泡框），我需要把他们整合到同一个画面生成 GIF，并且最后生成的 GIF 不同的帧显示我指定的 PNG。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230501182132872.png" alt="image-20230501182132872"></p>
<h1>打开 PR</h1>
<h2>素材导入</h2>
<p>两个气泡框的素材制作完成后，把所需要的文件导进来：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230501182627900.png" alt="image-20230501182627900"></p>
<p>调整好时间轴，刀片切割和拼接这些“视频条”（不懂专业名词）就不用我多说了吧：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230501182750698.png" alt="image-20230501182750698"></p>
<h2>扩展画布</h2>
<p>时间轴上选中 GIF 后，打开序列设置：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230501182849883.png" alt="image-20230501182849883"></p>
<p>调整画布大小：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230501183003235.png" alt="image-20230501183003235"></p>
<h2>素材移动</h2>
<p>为每一个片段添加“变换”效果（双击）：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230501183134619.png" alt="image-20230501183134619"></p>
<p>在效果控件里调整位置、大小等参数：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230501183306716.png" alt="image-20230501183306716"></p>
<h2>导出</h2>
<p>在老版本的 PR 里，GIF 的导出不支持把 Alpha 通道导出，也就是导出的 GIF 是黑色背景的。你可以看这篇文章确定一下你的 PR 是否可以直接导出透明背景的的 GIF：<a href="https://zhuanlan.zhihu.com/p/546279499">Premiere 2022 直接导出带透明通道 GIF 动画 - 知乎 (zhihu.com)</a>，注意，导出格式选择<strong>动画 GIF</strong>，不是<strong>GIF</strong>！</p>
<p>如果你成功导出透明背景的 GIF 了，那么这篇文章就结束了！</p>
<p>如果上面这篇文章不能解决问题，那么你可以试着导出 PNG 序列：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230501183800474.png" alt="image-20230501183800474"></p>
<h1>PNG 序列生成 GIF</h1>
<p>你可以用任何工具把 PNG 序列生成 GIF，如 PS 等。</p>
<h2>WPS 图片处理（不推荐）</h2>
<p>WPS 图片处理：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230501183952279.png" alt="image-20230501183952279"></p>
<p>添加 PNG 文件后调整速度，选择导出即可。</p>
<p>问题是它<strong>把透明底变白底</strong>了！（辣鸡，会员 🐶 都不充）</p>
<h2>第三方网站处理</h2>
<p>这里我使用了在线网站进行处理：<a href="https://ezgif.com/maker">ezgif.com</a></p>
<p>参数参考下图：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230711162645.png" alt="image.png"></p>
<h1>成果展示</h1>
<p>白天模式：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230711162816.png" alt="image.png"></p>
<p>夜间模式：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230711162832.png" alt="image.png"></p>
<p>大功告成！</p>
<h1>本文参考</h1>
<ul>
<li><a href="https://jingyan.baidu.com/article/4853e1e5387e2b5809f726b6.html">pr2020 如何调整画布大小-百度经验 (baidu.com)</a></li>
<li><a href="https://jingyan.baidu.com/article/d5c4b52bb1c48eda570dc542.html">在 PR 中怎么将两个视频内容拼接到一起显示-百度经验 (baidu.com)</a></li>
<li><a href="https://jingyan.baidu.com/article/f3ad7d0f5d39bb09c3345bf1.html">Pr 怎么导出 gif 动图-百度经验 (baidu.com)</a></li>
<li><a href="https://jingyan.baidu.com/article/f0e83a25bcbda463e59101ae.html">Premiere 怎样导出带有透明背景的 GIF 动画-百度经验 (baidu.com)</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/546279499">Premiere 2022 直接导出带透明通道 GIF 动画 - 知乎 (zhihu.com)</a></li>
</ul>


                
            </main>

            <footer class="list-content-container">
                

                
            </footer>
        </article>
        
        <article id="2676514221" class="record">
            <header>
                <h1 class="record-title">代码驱动学习-快速入门AJAX</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>2676514221</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>undefined</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('AJAX');">AJAX</button>
                    
                    <button class="btn" onclick="activeTag('JavaScript');">JavaScript</button>
                    
                    <button class="btn" onclick="activeTag('VSCode');">VSCode</button>
                    
                    <button class="btn" onclick="activeTag('源码案例驱动');">源码案例驱动</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>5/2/2023</span>
                </div>
                

                

                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/ajaxcover.png</span>
                </div>
                
                <div class="record-description">
                    <span>description :</span>
                    <span>通读代码快速理解AJAX原理</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>9f885dad</span>
                </div>
                
            </header>

            <main class="record-content">
                <p>本文附件：【待补充】</p>
<h1>什么是AJAX？</h1>
<p>AJAX，读作”/eɪdʒæks/，也可以念为“阿贾克斯”。最大的特点就是在不刷新网页的情况下向服务端发请求并获取结果。AJAX不是新的编程语言，而是一种将现有的标准组合在一起使用的新方式。</p>
<p><a href="https://www.w3school.com.cn/js/js_ajax_intro.asp">AJAX 简介 (w3school.com.cn)</a></p>
<blockquote>
<p>XML可扩展标记语言，XML被设计用来传输和存储数据。XML和 HTML类似，不同的是HTML中都是预定义标签，而XML中没有预定义标签，全都是自定义标签，用来表示一些数据。不过现在AJAX多使用JSON格式了。</p>
<p>XML简介：<a href="https://www.w3school.com.cn/x.asp">XML系列教程 (w3school.com.cn)</a></p>
</blockquote>
<p>AJAX的优点：</p>
<ul>
<li>可以无需刷新页面而与服务器端进行通信。</li>
<li>允许你根据用户事件来更新部分页面内容。</li>
</ul>
<p>AJAX的缺点：</p>
<ul>
<li>没有浏览历史，不能回退</li>
<li>存在跨域问题(同源)</li>
<li>SEO不友好</li>
</ul>
<h1>学习准备</h1>
<h2>预备知识</h2>
<p>本文章在于通过代码实践快速掌握AJAX基本使用。阅读前你需要具备一定的HTML、CSS、JS知识，了解HTTP协议的请求报文和响应报文的结构。</p>
<ul>
<li>
<p>JS基础请看：<a href="https://developer.mozilla.org/zh-CN/docs/Learn/Getting_started_with_the_web/JavaScript_basics">JavaScript 基础 - 学习 Web 开发 | MDN (mozilla.org)</a></p>
</li>
<li>
<p>HTTP结构：<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Messages">HTTP 消息 - HTTP | MDN (mozilla.org)</a></p>
</li>
</ul>
<p>学习前我们需要懂得使用Chrome、Edge浏览器开发者模式（按F12），查看查看HTTP报文接收和发送情况。</p>
<p>本文章主要通过可运行的案例代码以驱动学习，学习者可以通过理解代码并试图在本机运行以加深理解。建议你在学习时打开F12调试窗口，查看控制台输出与网络请求。</p>
<p>本篇文章的实践内容参考：<a href="https://www.bilibili.com/video/BV1WC4y1b78y%EF%BC%8C%E8%A7%86%E9%A2%91%E6%97%B6%E9%95%BF%E7%BA%A63%E5%B0%8F%E6%97%B6%E3%80%82">https://www.bilibili.com/video/BV1WC4y1b78y，视频时长约3小时。</a></p>
<h2>软件安装</h2>
<h3>Node.js</h3>
<p>安装Node.js：<a href="https://nodejs.org/en">Node.js (nodejs.org)</a>。</p>
<p>安装完毕后在终端输入命令：</p>
<pre><code class="language-sh">node -v
</code></pre>
<p>若显示版本号即安装成功。</p>
<h3>Express服务端框架</h3>
<p>为了更好的演示AJAX操作，我们需要自己启动一个服务端。接下来的实验我们只需要对这个服务端进行消息的发送。在这一小节中，我们只需要了解Express的最小知识。</p>
<p>安装前保证安装了Node.js，输入：</p>
<pre><code class="language-sh">npm i express
</code></pre>
<p>npm是Node.js提供的包管理工具。通过该命令安装express。</p>
<p>新建js文件，可以将其命名为server.js，内容如下：</p>
<pre><code class="language-js">// 1. 引入express
const express = require('express');

// 2. 创建应用对象
const app = express();

// 3. 创建路由规则
// request是对请求报文的封装，response是对响应报文的封装
app.get('/server',(request,response)=&gt;{
    response.setHeader('Access-Control-Allow-Origin',&quot;*&quot;);

    //设置一个简单的响应
    response.send('HELLO AJAX!')
})

// 4. 监听端口启动服务
app.listen(8000,()=&gt;{
    console.log(&quot;服务已经启动，8000端口监听中...&quot;)
})
</code></pre>
<p>打开终端，执行以下命令启动服务：</p>
<pre><code>node &lt;your server.js&gt; 
</code></pre>
<p>终端输出&quot;服务已经启动，8000端口监听中...&quot;。打开浏览器输入127.0.0.1:8000，若显示'‘'HELLO AJAX!'，则服务启动成功。</p>
<p>注意，每次修改server.js文件，<strong>保存后</strong>需要关闭当前正在运行的服务，再次启动server.js才能应用新的更改。如果我们想要每次修改server.js保存后自动重启服务器，我们可以安装modemon进行解决。</p>
<p>常见错误：</p>
<ul>
<li>
<p><strong>启动失败 address already in use :::8000</strong></p>
<p>这表明8000端口已经被占用，你可能忘记中断之前打开的服务，尝试中断之前的服务，或换一个端口号尝试。</p>
</li>
<li>
<p><strong>输入命令后没有反应</strong></p>
<p>检查你是不是粘贴后没有保存。</p>
</li>
</ul>
<h3>nodemon工具安装</h3>
<p>官网链接：<a href="https://www.npmjs.com/package/nodemon">nodemon - npm (npmjs.com)</a></p>
<p>安装前保证安装好了Node.js。安装命令：</p>
<pre><code class="language-sh">npm install -g nodemon
</code></pre>
<p>以后每次启动server.js脚本可以改为使用以下命令：</p>
<pre><code class="language-sh">nodemon &lt;your server.js&gt;
</code></pre>
<h3>axios</h3>
<p>axio是前端热门的AJAX工具库：<a href="https://github.com/axios/axios">axios/axios: Promise based HTTP client for the browser and node.js (github.com)</a></p>
<p>使用axio我们可以直接通过页面链接引用。</p>
<p>但是官网给的CDN链接是在国外的，所以我们可以通过<a href="https://www.bootcdn.cn/">BootCDN</a>查询并替换网址。</p>
<pre><code>https://cdn.bootcdn.net/ajax/libs/axios/1.3.6/axios.min.js
</code></pre>
<h3>【非必须】VSCode插件-Live Server</h3>
<p>如果你是在VSCode环境下进行操作的话，可以安装一个Live Server插件。这个插件右键可以将html网页用服务器打开，以模拟跨域同源实验。</p>
<h1>第一章节：AJAX请求基本实践</h1>
<p>本章节包含两个文件：</p>
<pre><code>server.js 服务器文件
client.html 案例
</code></pre>
<p>案例食用说明：</p>
<ol>
<li>在终端输入命令执行server.js <code>nodemon &lt;your server.js&gt;</code></li>
<li>浏览器打开client.html</li>
</ol>
<p>阅读源码和注解理解即可。</p>
<p>要点提示：</p>
<ul>
<li>
<p>Chapter 1：本章节演示了AJAX操作的基本步骤</p>
</li>
<li>
<p>Chapter 2：演示使用GET方法传参与请求头设置</p>
<p>打开F12查看请求标头，可以发现自定义标头已添加。</p>
</li>
</ul>
<p>​	<img src="https://cdn.gallery.uuanqin.top/img/image-20230426170053196.png" alt="image-20230426170053196"></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230426170810095.png" alt="image-20230426170810095"></p>
<p>小技巧：解决IE缓存问题。神奇的IE浏览器会对AJAX进行缓存，解决方法：在请求地址后加上随机的参数，比如：</p>
<pre><code class="language-js">xhr.open(&quot;GET&quot;,&quot;http://127.0.0.1:8000/server?t=&quot;+Date.now())
</code></pre>
<p>或者在调试器中禁用缓存。</p>
<ul>
<li>
<p>Chapter 3：演示AJAX发送POST请求</p>
</li>
<li>
<p>Chapter 4：演示AJAX超时设置以及设置网络异常时的回调</p>
<p>调试器可以方便地断开网络：</p>
</li>
</ul>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230426183213807.png" alt="image-20230426183213807"></p>
<ul>
<li>Chapter 5：防抖的演示。防抖在于防止用户反复点击按钮发送多个请求，这里的代码可以实现用户每次只能发送一个请求。</li>
<li>Chapter 6：axios演示</li>
<li>Chapter 7：fetch演示</li>
</ul>
<h1>第二章节：跨域/同源</h1>
<p>同源策略(Same-Origin Policy)最早由Netscape公司提出，是浏览器的一种安全策略，也就是当前网页URL和AJAX请求的目标URL必须<strong>同源</strong>（协议、域名、端口号必须完全相同）。AJAX发送请求时默认遵循同源策略。违背同源策略就是<strong>跨域</strong>。</p>
<p>跨域的解决方案有以下两种：</p>
<ul>
<li>
<p>Jsonp：JSONP（JSON with Padding)，是一个非官方的跨域解决方案，只支持get请求。<br>
JSONp怎么工作的？在网页有一些标签天生具有跨域能力，比如：img、link iframe、script。JSONP就是利用script标签的跨域能力来发送请求的。</p>
</li>
<li>
<p>CORS：CORS（Cross-Origin Resource Sharing），跨域资源共享。CORS是官方的跨域解决方案，它的特点是不需要在客户端做任何特殊的操作，完全在服务器中进行处理，支持get和post请求。跨域资源共享标准新增了一组HTTP首部字段，允许服务器声明哪些源站通过浏览器有权限访问哪些资源。CORS怎么工作的？CORS是通过设置一个响应头来告诉浏览器，该请求允许跨域，浏览器收到该响应以后就会对响应放行。</p>
</li>
</ul>
<p>本章节包含两个文件：</p>
<pre><code>server.js 服务器文件（就是上一章节那个）
same-origin-policy.html 案例
handle.js 示例js文件（需保证与server.js放在同一层级下）
</code></pre>
<p>案例食用说明：</p>
<ol>
<li>在终端输入命令执行server.js <code>nodemon &lt;your server.js&gt;</code></li>
<li>使用不同的端口或协议打开same-origin-policy.html</li>
</ol>
<p>阅读源码和注解理解即可。</p>
<p>要点提示：</p>
<ul>
<li>Chapter 1：同源策略示例</li>
<li>Chapter 2：Jsonp简单示例</li>
<li>Chapter 3：原生使用Jsonp</li>
<li>Chapter 4：服务端设置CROS响应头实现跨域</li>
</ul>


                
            </main>

            <footer class="list-content-container">
                

                
            </footer>
        </article>
        
        <article id="2737438580" class="record">
            <header>
                <h1 class="record-title">极简图书管理系统，快速上手Flask-Vue前后端开发</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>2737438580</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>undefined</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('Python');">Python</button>
                    
                    <button class="btn" onclick="activeTag('Flask');">Flask</button>
                    
                    <button class="btn" onclick="activeTag('Vite');">Vite</button>
                    
                    <button class="btn" onclick="activeTag('Vue');">Vue</button>
                    
                    <button class="btn" onclick="activeTag('ElementPlus');">ElementPlus</button>
                    
                    <button class="btn" onclick="activeTag('MySQL');">MySQL</button>
                    
                    <button class="btn" onclick="activeTag('源码案例驱动');">源码案例驱动</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>5/4/2023</span>
                </div>
                

                

                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/tushuguanlixitongcover.png</span>
                </div>
                
                <div class="record-description">
                    <span>description :</span>
                    <span>源码项目学习实践，快速掌握Flask+Vue的前后端开发流程</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>a329ff74</span>
                </div>
                
                <div class="record-top_img">
                    <span>top_img :</span>
                    <span></span>
                </div>
                
            </header>

            <main class="record-content">
                <blockquote>
<p>本文章源代码是经由<a href="https://www.bilibili.com/video/BV1Jr4y1771i">Bilibili视频</a>手敲而来，再经过实际情况做了小的改良（使用MySQL数据库），是视频教程内容的源码部分的补充，强烈建议配合视频食用。</p>
<p>当然有一定相关知识基础，但不愿意看视频的，可以<strong>直接理解源码，读代码注解</strong>即可。</p>
</blockquote>
<p>不管你做过多少的项目，<strong>图书管理系统</strong>你总该做过吧？</p>
<blockquote>
<p><em>面试官：你是我见过的第XXX个做图书管理系统的。</em></p>
</blockquote>
<p>像这种不大不小的前后端开发项目，是最适合个人学习新技术的。这篇文章分享一个极简图书管理系统的前后端开发项目源码学习实践，帮助你快速熟悉Flask+Vue前后端分离的开发流程。适合基本了解Vue与Flask基本功能，但想进行前后端交互实践的学习者，动手体验自己造一个小项目。</p>
<p>前置知识：</p>
<ul>
<li>Python基础，懂python基本的语法</li>
<li>一点点HTML+CSS+Javascript+AJAX基础，不需要特别深入</li>
<li>Vue基础，这里推荐做完互动教程（API风格：组合式）就行：<a href="https://cn.vuejs.org/tutorial/#step-1">教程 | Vue.js (vuejs.org)</a></li>
<li>Flask基础，推荐一边做一边查阅：<a href="https://tutorial.helloflask.com/">Flask 入门教程 (helloflask.com)</a></li>
<li>MySQL基础（非必需）</li>
</ul>
<h1>功能展示</h1>
<p>基本页面：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230504170537219.png" alt="image-20230504170537219"></p>
<p>实现了图书管理系统增删改查功能。</p>
<h1>环境与依赖</h1>
<p>环境：Python 3.10</p>
<p>后端：</p>
<ul>
<li>Python安装Flask</li>
<li>pip安装Flask-Cors、Flask-Cors、PyMySQL</li>
</ul>
<p>前端：Vite、Vue、axios、element-plus</p>
<h1>案例代码使用</h1>
<h2>后端</h2>
<p>创建好Flask项目后，把以下文件放入项目文件夹中即可</p>
<pre><code class="language-test">后端项目
│  .env         # python-dotenv 相关
│  .flaskenv    # python-dotenv 相关
│  app.py       # flask主程序
│  demo.http    # HTTP请求测试文件
│  extension.py # 扩展
│  models.py    # 数据库
</code></pre>
<p>你在PyCharm看到的应该是这样的：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230504174717777.png" alt="image-20230504174717777"></p>
<p>通过以下命令启动后端服务器:</p>
<pre><code class="language-sh">flask run
# 或
python app.py
</code></pre>
<h2>前端</h2>
<p>通过Vite创建Vue项目后，把/src/assets/main.css中的内容注释掉，免得后面网页显示异常。</p>
<p>用本案例的两个文件替换原项目的对应文件：</p>
<pre><code>App.vue
main.js
</code></pre>
<p>你在VSCode看到的应该是这样的：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230504175239052.png" alt="image-20230504175239052"></p>
<p>通过以下命令启动客户端：</p>
<pre><code class="language-sh">npm run dev
</code></pre>
<h1>问题解决记录</h1>
<p>这个板块记录我在参照视频敲代码所遇到的问题。在我提供的代码中，这些问题已被解决。</p>
<p><strong>Q: 我使用的数据库是mysql</strong></p>
<p>A: 安装PyMySQL Python包之后，app.config可以这样写：</p>
<pre><code class="language-python">app.config['SQLALCHEMY_DATABASE_URI'] = 'mysql+pymysql://root:&lt;your mysql key&gt;@localhost:3306/&lt;your database name&gt;?charset=utf8mb4'
</code></pre>
<p>改变上述代码中的：</p>
<ul>
<li>&lt;your mysql key&gt;：你的Mysql数据库密码</li>
<li>&lt;your database name&gt;：你创建的数据库名，记得要预先创建好</li>
</ul>
<p><strong>Q: js中模板字符串 <code>${var}</code> 无效</strong></p>
<p>A: 注意，字符串用`来括住，不是单引号，不是双引号。</p>
<p>参考：<a href="https://bbs.csdn.net/topics/392194597">ES6 模板字符串 ${} 无效-CSDN社区</a></p>
<p><strong>Q: 出现跨域问题</strong></p>
<p>A: 代码里已经解决了跨域问题，请检查请求的URL是否正确</p>
<p>参考：<a href="https://zhuanlan.zhihu.com/p/75738155">flask restful 处理跨域请求 - 知乎 (zhihu.com)</a></p>
<p><strong>Q: 希望服务端的响应报文返回中文而不是Unicode字符串</strong></p>
<p>A: 对服务端的返回结果进行处理，如：</p>
<pre><code class="language-python">ret= { '''your data''' }
return json.dumps(ret, ensure_ascii=False)
</code></pre>
<p>注意，由于Flask版本更新，为Flask app设置变量<code>JSON_AS_ASCII</code>的方法已经失效。</p>
<p>参考：</p>
<ul>
<li>[flask或flask-restful的接口开发，返回的json数据能显示中文的方法_flask 设置json数据显示中文格式_fj_changing的博客-CSDN博客](<a href="https://blog.csdn.net/fj_changing/article/details/116385130#:~:text=%E7%94%A8,flask">https://blog.csdn.net/fj_changing/article/details/116385130#:~:text=用,flask</a> 或flask-restful开发接口时，返回给前端的json数据中若有中文，在postman的raw里或浏览器直接访问，中文会显示成unicode编码之后的形式，下面是使之显示成中文的方法。)</li>
<li><a href="https://flask.palletsprojects.com/en/2.3.x/changes/?highlight=json_as_ascii">Changes — Flask Documentation (2.3.x) (palletsprojects.com)</a></li>
</ul>
<h1>额外收获</h1>
<p>用HTTP文件调试API的技能学习，参考这篇文章学会写http的测试请求：<a href="https://marketplace.visualstudio.com/items?itemName=humao.rest-client">REST Client - Visual Studio Marketplace</a></p>
<p>RESTful风格API：<a href="http://ruanyifeng.com/blog/2014/05/restful_api.html">RESTful API 设计指南 - 阮一峰的网络日志 (ruanyifeng.com)</a></p>


                
            </main>

            <footer class="list-content-container">
                

                
            </footer>
        </article>
        
        <article id="2226004458" class="record">
            <header>
                <h1 class="record-title">魔改脚本实现知网导出Bibtex参考格式</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>2226004458</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>工具箱</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('BibTeX');">BibTeX</button>
                    
                    <button class="btn" onclick="activeTag('知网');">知网</button>
                    
                    <button class="btn" onclick="activeTag('Javascript');">Javascript</button>
                    
                    <button class="btn" onclick="activeTag('Tampermonkey');">Tampermonkey</button>
                    
                    <button class="btn" onclick="activeTag('Greasy Fork');">Greasy Fork</button>
                    
                    <button class="btn" onclick="activeTag('TJU');">TJU</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>5/11/2023</span>
                </div>
                

                

                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/bibtexzhiwangcover554fsd(1).png</span>
                </div>
                
                <div class="record-description">
                    <span>description :</span>
                    <span>修改油叉脚本以适应当前访问知网的网络状况</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>84ae21ea</span>
                </div>
                
                <div class="record-top_img">
                    <span>top_img :</span>
                    <span></span>
                </div>
                
            </header>

            <main class="record-content">
                <blockquote>
<p>这篇文章的脚本已发布到 Greasy Fork（油叉）平台，你可以前往<a href="https://greasyfork.org/zh-CN/scripts/466046-%E7%9F%A5%E7%BD%91-%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE-bibtex-%E5%A4%A9%E6%B4%A5%E5%A4%A7%E5%AD%A6">知网 参考文献 bibtex 天津大学 (greasyfork.org)</a>进行下载安装。后续脚本更新将在该平台更新。20230511<br>
<img src="https://cdn.gallery.uuanqin.top/img/20230828235229.webp" alt="image.png"></p>
</blockquote>
<hr>
<p>最近不是开始写毕业论文了嘛，使用到 LaTeX 进行写作。其中，导入参考文献部分需要以 BibTeX 格式写进模板中。</p>
<p>Google Scholar 网站上存在兼容 BibTeX 的参考文献信息，但是知网里没有这种格式的导出，这时就可以借助脚本实现这个功能。</p>
<p>这里分享我的魔改推导步骤，不想看过程的直接复制后文源码（DIFF 文件，记得删前面的+-号）。</p>
<blockquote>
<p>[!warning] 注意<br>
本篇文章的实现过程适用于天津大学校内登录用户，代码不具有普遍性。各位读者可以根据思路自行改动。</p>
</blockquote>
<h1>不借助脚本实现 Bibtex 参考文献生成及标注方法</h1>
<p>在介绍使用脚本方法之前先简要说明我之前的解决方案。</p>
<h2>使用谷歌学术进行参考文献生成</h2>
<p>通过以下几个步骤，可以轻松完成参考文献的生成。</p>
<ol>
<li>在谷歌学术搜索中，点击学术搜索设置。</li>
<li>页面打开之后，在文献管理软件选项中选择显示导入 BibTeX 的链接，单击保存设置，退出。</li>
<li>在谷歌学术搜索中检索到文献后，在文献条目区域单击导入 BibTeX 选项，页面中出现文献的引用信息。<br>
<img src="https://cdn.gallery.uuanqin.top/img/image-20230511164837738.png" alt="image-20230511164837738"></li>
</ol>
<p>格式是这样的：</p>
<pre><code class="language-tex">@article{刘娟2020基于,
  title={基于 Python 爬虫的职位信息数据分析和可视化系统实现},
  author={刘娟 and 管希东},
  journal={Software Engineering and Applications},
  volume={9},
  pages={317},
  year={2020},
  publisher={中文学术期刊, 汉斯出版社, Hans Publishers}
}
</code></pre>
<h2>转化知网 NoteExpress 文献导出格式</h2>
<p>知网没有直接导出 BibTeX 文献导出格式的功能，但是有一个格式跟它很像。</p>
<ol>
<li>
<p>在文章介绍页面点击导出参考文献</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230511165242045.png" alt="image-20230511165242045"></p>
</li>
<li>
<p>选择“更多引用格式”</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230511165317189.png" alt="image-20230511165317189"></p>
</li>
<li>
<p>选择 NoteExpress</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230511165344333.png" alt="image-20230511165344333"></p>
</li>
</ol>
<p>对应着 BibTeX 的格式，你就可以自己写咯。</p>
<h1>脚本解决</h1>
<p>使用浏览器插件 Tampermonkey，在 Greasy Fork 中搜索脚本：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230511165539516.png" alt="image-20230511165539516"></p>
<blockquote>
<p>读图片的介绍，知道该脚本的原理就是把知网 NodeExpress 格式进行转换，理解这一点方便我们进行后续的魔改</p>
</blockquote>
<p>安装后，在知网文章介绍页面中会多出按钮，点击后 BibTeX 格式的参考文献会自动复制到粘贴板中。如果你试过了没有问题，那么本篇文章到此结束。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230511165810324.png" alt=""></p>
<p>由于我使用的是学校账号打开的知网，知网的网址与相关接口都不一样，这个脚本就不会起作用。那么接下来就是魔改时刻。</p>
<h2>魔改 1-脚本需要匹配对应的网址</h2>
<p>这个脚本只有在特定的地址才发挥作用，不然你会看不到上文图中多出的按钮。</p>
<p>因为我的知网文章首页地址是这样的：</p>
<pre><code>https://&lt;一堆字符&gt;.eds.tju.edu.cn/kcms2/article/abstract&lt;后面省略参数&gt;
</code></pre>
<p>所以我就想办法增加这条规则：</p>
<pre><code>https://&lt;一堆字符&gt;.eds.tju.edu.cn/kcms2/article/abstract*
</code></pre>
<blockquote>
<p>添加的 URL 规则根据你的具体情况进行设计</p>
</blockquote>
<h3>方法 1：js 源代码修改</h3>
<p>在源代码中增加这一行规则，ctrl+s 保存即可。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230511171357098.png" alt="image-20230511171357098"></p>
<h3>方法 2：设置页面增加设定</h3>
<p>打开 TamperMonkey 脚本管理界面，点击设置选项卡增加用户匹配：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230511171717236.png" alt="image-20230511171717236"></p>
<p>保存后重新访问文章简介页试试看，出现 BibTex 按钮此部分就成功了。</p>
<h2>魔改 2-使用正确的接口</h2>
<p>经过上一步后，虽然出现了按钮，但不起作用。打开控制台会出现报错信息：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230511172003104.png" alt="image-20230511172003104"></p>
<p>看了一下脚本的源码，它发送的 POST 请求地址为：</p>
<pre><code>https://kns.cnki.net/kns8/manage/APIGetExport
</code></pre>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230511170918257.png" alt="image-20230511170918257"></p>
<p>这里的接口地址我们可以改一下。之前我们提到脚本原理就是读取知网 NoteExpress 格式进行 BibTeX 的转换。这里我通过抓包，得到接口的地址：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230511172554301.png" alt="image-20230511172554301"></p>
<p>那么我们就可以把这串地址粗暴的写进去。（注意配合通配符使用）</p>
<h2>魔改 3-使用正确的返回数据</h2>
<p>改对了 POST 请求发送的地址还不够，该脚本不能正确解析返回数据。</p>
<p>返回的数据是字符串：</p>
<pre><code>&lt;ul class='literature-list'&gt;
&lt;li&gt;
	{Reference Type}: Journal Article&lt;br&gt;
	{Title}: Flask框架在数据可视化的应用&lt;br&gt;
	{Author}: 陈嘉发;黄宇靖;&lt;br&gt;
	{Author Address}: 惠州卫生职业技术学院教育技术与信息中心;&lt;br&gt;
	{Journal}: 福建电脑&lt;br&gt;
	...
	{Database Provider}: CNKI&lt;br&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;input id=&quot;traceid&quot; type=&quot;hidden&quot; value=&quot;cf4aca8f33f5471f9c383ebf93578d2f.227.16837969341201267&quot;&gt;
</code></pre>
<p>经过调试与源码推测我们需要的是<code>&lt;li&gt;</code>标签中的内容。</p>
<p>对应的正则表达式为：（附工具：<a href="https://c.runoob.com/front-end/854/">正则表达式在线测试 | 菜鸟工具 (runoob.com)</a>）</p>
<pre><code class="language-reg">/(?&lt;=&lt;li&gt;).*(?=&lt;/li&gt;)/g
</code></pre>
<p>对应的 js 语句（多了个转义符<code>\</code>）：</p>
<pre><code class="language-js">var ss = data.match(/(?&lt;=&lt;li&gt;).*(?=&lt;\/li&gt;)/g)
</code></pre>
<p>一顿编辑源码与 BUG 修复就 OK 了（具体编辑看 DIFF 文件）！</p>
<p>使用效果：</p>
<pre><code class="language-tex">@article{cite_label,
   title={flask框架在数据可视化的应用},
   author={陈嘉发;黄宇靖;},
   authoraddress={惠州卫生职业技术学院教育技术与信息中心;},
   journal={福建电脑},
   year={2022},
   volume={38},
   number={12},
   pages={44-48},
   keywords={flask框架;python爬虫;数据可视化图表库},
   abstract={我就省略了，一大串的},
   isbn/issn={1673-2782},
   notes={35-1115/tp},
   doi={10.16707/j.cnki.fjpc.2022.12.009},
   databaseprovider={cnki},
}
</code></pre>
<blockquote>
<p>提一点，在我的模板中，cite_label 不能是中文，否则编译出错。我使用的是天津大学毕业论文模板：<a href="https://gitee.com/tju_embedded/tju_undergraduate_design">嵌入式软件工程实验室/天津大学本科毕业论文 Latex 模板 - 码云 - 开源中国 (gitee.com)</a></p>
</blockquote>
<h1>源码</h1>
<blockquote>
<p>此处不再更新，新版本请前往 Greasy Fork 平台进行下载安装。DIFF 文件进提供修改参考。</p>
</blockquote>
<p>diff 文件。把减号行删除，删除加号行的加号即可得目的源文件。</p>
<pre><code class="language-diff">// ==UserScript==
// @name         知网 参考文献 bibtex
// @namespace    https://github.com/HawkTom
// @require      https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js
// @version      1.1.1
// @description  从知网文献中直接复制bibtex
- // @author       Hao
+ // @author       Hao, uuanqin
// @match        https://kns.cnki.net/kcms/detail/detail.aspx?dbcode=*
// @match        http://kns.cnki.net/kcms/detail/detail.aspx?dbcode=*
+ // @match        https://*.eds.tju.edu.cn/kcms2/article/abstract*
// @grant        none
// ==/UserScript==

(function() {
    'use strict';

    jQuery(document).ready(function($) {

        window.onload = function(){

            var a = document.getElementById(&quot;paramdbname&quot;)
            var b = document.getElementById(&quot;paramfilename&quot;)
            var fileid = a.getAttribute(&quot;value&quot;) + '!' + b.getAttribute(&quot;value&quot;) +'!1!0'

            var x = document.getElementsByClassName(&quot;btn-tool&quot;)
            var input = document.createElement('li')
            input.setAttribute(&quot;id&quot;, &quot;bibbtn&quot;)
            input.setAttribute(&quot;class&quot;, &quot;btn-quote&quot;)
            //input.setAttribute(&quot;type&quot;, &quot;button&quot;)
            input.setAttribute(&quot;title&quot;, &quot;Bibtex&quot;)
            //input.setAttribute(&quot;onclick&quot;, &quot;func(this)&quot;) href=\&quot;javascript:void(0)\&quot; onclick=\&quot;getBib()\
            input.innerHTML = &quot;&lt;a&gt;&lt;i&gt;&lt;/i&gt;Bibtex&lt;/a&gt;&quot;
            x[0].children[0].append(input)

            $(&quot;#bibbtn&quot;).click(function(){
+           	var url = window.location.hostname; // 得到 *.eds.tju.edu.cn
-            	$.post(&quot;https://kns.cnki.net/kns8/manage/APIGetExport&quot;,
+               $.post(`https://${url}/kns8/manage/ShowExport`,
                {
                  filename:fileid,
                  displaymode:&quot;NoteExpress&quot;
                },
                function(data){
                    console.log(data);
                    var bibtext = &quot;&quot;
-                   var ss = data.data[0].value[0]
-                   var ssl = ss.split(&quot;&lt;br&gt;&quot;)
+                   var ss = data.match(/(?&lt;=&lt;li&gt;).*(?=&lt;\/li&gt;)/g) // .data[0].value[0]
+                   console.log(ss); // 输出调试而已
+                   var ssl = ss[0].split(&quot;&lt;br&gt;&quot;)
                    for (var i=0; i&lt;ssl.length-1; i++){
                        var k = ssl[i].toLocaleLowerCase().split(&quot; &quot;).join(&quot;&quot;).split(&quot;:&quot;)
                        var item = k[0]
                        var detail = k[1]
                        if (item == &quot;{referencetype}&quot;){
                            if (detail == &quot;journalarticle&quot;){
                                bibtext = &quot;@article{cite_label ,\n&quot;
                            }
                            else if(detail == &quot;conferenceproceedings&quot;){
                                bibtext = &quot;@inproceedings{cite_label ,\n&quot;
                            }
                        }
                        else if(item == &quot;{issue}&quot;){
-                           bibtext = bibtext + &quot;   {number}={&quot; + detail + &quot;},\n&quot;
+                           bibtext = bibtext + &quot;   number={&quot; + detail + &quot;},\n&quot; // 不明白这里的number为什么要括起来
                        }
                        else {
                            bibtext = bibtext + &quot;   &quot; + item.substr(1, item.length-2) + &quot;={&quot; + detail + &quot;},\n&quot;
                        }
                    }
                    bibtext += &quot;}&quot;
                    //console.log(bibtext)
                    const copad = document.createElement('textarea')
                    copad.value = bibtext
                    document.body.appendChild(copad)
                    copad.select()
                    document.execCommand('Copy')
                    document.body.removeChild(copad)
                });
            })
        };
    })
})();
</code></pre>
<h1>后记</h1>
<p>作者本人已顺利从天大毕业，相关校园网账号已封禁，因此无法再对此脚本进行测试与维护。</p>
<h1>本文参考</h1>
<ul>
<li><a href="https://blog.csdn.net/fegxig1230/article/details/118458288">知网 BibTeX 自动生成（使用 BibTeX 引用中文参考文献）_奕小星的博客-CSDN 博客</a></li>
<li><a href="https://www.w3school.com.cn/js/js_string_search.asp">JavaScript 字符串搜索 (w3school.com.cn)</a></li>
<li><a href="https://c.runoob.com/front-end/854/">正则表达式在线测试 | 菜鸟工具 (runoob.com)</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Regular_Expressions#special-lookahead">正则表达式 - JavaScript | MDN (mozilla.org)</a></li>
<li><a href="https://blog.csdn.net/u013288800/article/details/82787641">使用 JS 获取当前页面的 URL(网址信息)_js 获取 url_Devere 的博客-CSDN 博客</a></li>
</ul>


                
            </main>

            <footer class="list-content-container">
                

                
            </footer>
        </article>
        
        <article id="3103663518" class="record">
            <header>
                <h1 class="record-title">开源工具推荐</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>3103663518</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>工具箱</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('Github');">Github</button>
                    
                    <button class="btn" onclick="activeTag('开源');">开源</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>5/13/2023</span>
                </div>
                

                

                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/opscover.png</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>b8fe259e</span>
                </div>
                
                <div class="record-description">
                    <span>description :</span>
                    <span>我使用过的优秀开源软件</span>
                </div>
                
                <div class="record-top_img">
                    <span>top_img :</span>
                    <span></span>
                </div>
                
            </header>

            <main class="record-content">
                <p>整理一下我使用过的好用的开源软件。</p>
<h1>软件列表</h1>
<h2>PicGo</h2>
<blockquote>
<p>一个用于快速上传图片并获取图片 URL 链接的工具</p>
<p><a href="https://github.com/Molunerfinn/PicGo">Molunerfinn/PicGo: A simple &amp; beautiful tool for pictures uploading built by vue-cli-electron-builder (github.com)</a></p>
</blockquote>
<p>Typora写作助攻神器，拖拽到Markdown的图片自动上传到图床并转为网页链接，极大的方便图片管理。</p>
<p>如果你搭建有使用Markdown写作的博客，那效率直线提升！</p>
<p>本站相关文章：</p>
<ul>
<li><a href="#377267818" title="Typora 应用 PicGo(app) 使用图床" class="record-link">Typora 应用 PicGo(app) 使用图床</a></li>
<li><a href="#3992879191" title="PicGo(app) 配置腾讯云 COS 图床" class="record-link">PicGo(app) 配置腾讯云 COS 图床</a></li>
</ul>
<h2>LocalSend</h2>
<blockquote>
<p>LocalSend是一款免费的开源应用程序，它允许你通过本地网络安全地与附近的设备共享文件和信息，而无需连接互联网。</p>
<p><a href="https://github.com/localsend/localsend">localsend/localsend: An open source cross-platform alternative to AirDrop (github.com)</a></p>
</blockquote>
<p>简洁而功能强大，多平台支持包括Windows、macOS、Linux、Android（鸿蒙）、iOS，我可以使用它而免数据线进行数据传输。手机虚拟机里也可以传输，简直不要太方便。</p>
<h1>其他</h1>
<ul>
<li>
<p><a href="https://github.com/chaohershi/cclose">CClose</a>：CClose是一个用AutoHotKey编写的Windows实用程序。软件挺好用的，可以对我个人习惯进行统一。但是最近我把他核心代码提取并定制了，所以对它我就不依赖了。详看文章：<a href="#3273167773" title="AHK 鼠标增强（CClose 源码撷英）" class="record-link">AHK 鼠标增强（CClose 源码撷英）</a></p>
</li>
<li>
<p>AList（目前正在使用，考察中。注意到部分用户使用阿里云接口会被阿里云封号，感觉有点危险）</p>
</li>
</ul>


                
            </main>

            <footer class="list-content-container">
                
                <details class="record-links">
                    <summary class="menu-title">
                        links
                        <span class="badge">3</span>
                    </summary>

                    <ul class="record-links-list">
                        
                        <li data-target-id="377267818">
                            <a href="#377267818">
                                <span class="record-type-point" style="color: var(--n_核心协同);">⬤</span>
                                
                                <span>Typora 应用 PicGo(app) 使用图床</span>
                                <div class="record-links-context hover">
                                    <p>本站相关文章：</p>
<ul>
<li><span class="id-context" data-target-id="377267818">Typora 应用 PicGo(app) 使用图床</span></li>
<li>PicGo(app) 配置腾讯云 COS 图床</li>
</ul>

                                </div>
                            </a>
                        </li>
                        
                        <li data-target-id="3273167773">
                            <a href="#3273167773">
                                <span class="record-type-point" style="color: var(--n_核心协同);">⬤</span>
                                
                                <span>AHK 鼠标增强（CClose 源码撷英）</span>
                                <div class="record-links-context hover">
                                    <ul>
<li><a href="https://github.com/chaohershi/cclose">CClose</a>：CClose是一个用AutoHotKey编写的Windows实用程序。软件挺好用的，可以对我个人习惯进行统一。但是最近我把他核心代码提取并定制了，所以对它我就不依赖了。详看文章：<span class="id-context" data-target-id="3273167773">AHK 鼠标增强（CClose 源码撷英）</span></li>
</ul>

                                </div>
                            </a>
                        </li>
                        
                        <li data-target-id="3992879191">
                            <a href="#3992879191">
                                <span class="record-type-point" style="color: var(--n_核心协同);">⬤</span>
                                
                                <span>PicGo(app) 配置腾讯云 COS 图床</span>
                                <div class="record-links-context hover">
                                    <p>本站相关文章：</p>
<ul>
<li>Typora 应用 PicGo(app) 使用图床</li>
<li><span class="id-context" data-target-id="3992879191">PicGo(app) 配置腾讯云 COS 图床</span></li>
</ul>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                

                
            </footer>
        </article>
        
        <article id="3273167773" class="record">
            <header>
                <h1 class="record-title">AHK 鼠标增强（CClose 源码撷英）</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>3273167773</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>核心协同</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('CClose');">CClose</button>
                    
                    <button class="btn" onclick="activeTag('快捷键');">快捷键</button>
                    
                    <button class="btn" onclick="activeTag('鼠标');">鼠标</button>
                    
                    <button class="btn" onclick="activeTag('AutoHotKey');">AutoHotKey</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>5/26/2023</span>
                </div>
                

                

                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/cclosecover.png</span>
                </div>
                
                <div class="record-description">
                    <span>description :</span>
                    <span>提取CClose中有用的脚本代码进行解析</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>c318939d</span>
                </div>
                
                <div class="record-top_img">
                    <span>top_img :</span>
                    <span></span>
                </div>
                
            </header>

            <main class="record-content">
                <p>刷抖音刷到一个项目，就是一个可以增加鼠标功能的操作。它为鼠标赋予了以下操作：</p>
<table>
<thead>
<tr>
<th>Action</th>
<th>+ Target</th>
<th>= Result</th>
</tr>
</thead>
<tbody>
<tr>
<td>Middle click</td>
<td>+ title bar</td>
<td>= close window</td>
</tr>
<tr>
<td>Right click</td>
<td>+ title bar</td>
<td>= minimize window</td>
</tr>
<tr>
<td>Hold left click</td>
<td>+ title bar</td>
<td>= toggle window always on top</td>
</tr>
<tr>
<td>Double press</td>
<td>+ Esc key</td>
<td>= close active window</td>
</tr>
<tr>
<td>Right click</td>
<td>+ taskbar button</td>
<td>= move pointer to &quot;Close window&quot;</td>
</tr>
</tbody>
</table>
<p>软件不大，主要使用 AutoHotKey 脚本进行开发。鼠标快捷操作挺好用的，尤其是中键关闭窗口的操作，统一了浏览器关闭标签页的动作。但是我看中了其中的脚本语言 AutoHotKey，感觉它很有用处，遂决定剖析源码，提取其中执行快捷操作的有用脚本进行学习。</p>
<p>以下是原项目的地址：</p>
<blockquote>
<p><a href="https://github.com/chaohershi/cclose/tree/master">chaohershi/cclose: A Windows utility that helps you close windows faster or pin windows always on top. (github.com)</a></p>
</blockquote>
<p>原项目的 AutoHotKey 脚本语言版本应该是 V1，下面我将用 V2 版本进行改写并对其进行了简化 <s>（😥 其实是删去我看不懂但实际影响不大的内容）</s> 。读者可以摘取其中的片段作为自己的脚本。改进点：</p>
<ul>
<li>AutoHotKey 语法升级：从 V1 到 V2</li>
<li>启用部分快捷功能有提示</li>
</ul>
<p>解析开始 🔽</p>
<h1>公共函数部分</h1>
<pre><code class="language-c">#Requires AutoHotkey v2.0

; 检测鼠标是否在指定的WinTitle窗口中
MouseIsOver(WinTitle)
{
	MouseGetPos  , , &amp;win
	return WinExist(WinTitle &quot; ahk_id &quot; win)
}

; 检测鼠标是否悬停在标题
MouseIsOverTitlebar()
{
	CoordMode &quot;Mouse&quot;, &quot;Screen&quot;
	MouseGetPos &amp;x, &amp;y, &amp;win
    ; 用于存储目标窗口左上角的 X 和 Y 坐标的变量的引用
	WinGetPos &amp;xWin, &amp;yWin, , , &quot;ahk_id &quot; win

	if WinExist(&quot;ahk_class Shell_TrayWnd ahk_id &quot; win) || WinExist(&quot;ahk_class Shell_SecondaryTrayWnd ahk_id &quot; win) ; exclude the taskbar
	{
		return false
	}
	else if (y &gt;= yWin &amp;&amp; y &lt; yWin + 30 * A_ScreenDPI / 96)
    ; if within title bar width
	{
        return true
	}
    return false
}

; 展示1s钟的标签
ShowToolTip(msg)
{
    ToolTip msg,,0
    SetTimer () =&gt; ToolTip(), -1000
}
</code></pre>
<h1>第一部分 标题操作</h1>
<table>
<thead>
<tr>
<th>Action</th>
<th>+ Target</th>
<th>= Result</th>
</tr>
</thead>
<tbody>
<tr>
<td>Middle click</td>
<td>+ title bar</td>
<td>= close window</td>
</tr>
<tr>
<td>Right click</td>
<td>+ title bar</td>
<td>= minimize window</td>
</tr>
<tr>
<td>Hold left click</td>
<td>+ title bar</td>
<td>= toggle window always on top</td>
</tr>
</tbody>
</table>
<pre><code class="language-C">#HotIf MouseIsOverTitlebar()
; 功能：鼠标中键点击标题关闭窗口
MButton::
{
    ; alternative to WinClose, as WinClose is a somewhat forceful method, e.g., if multiple Microsoft Excel instances exist, WinClose will close them all at once.
    ; 0x112 = WM_SYSCOMMAND, 0xF060 = SC_CLOSE https://autohotkey.com/docs/commands/WinClose.htm#Remarks
    ; https://learn.microsoft.com/zh-cn/windows/win32/menurc/wm-syscommand
    MouseGetPos  , , &amp;win         ; 我加的，要不然它不起作用
    PostMessage 0x112, 0xF060, , win
    ShowToolTip(&quot;窗口关闭&quot;)
}

; 功能：鼠标右键点击标题最小化窗口
RButton::
{
    err_code := KeyWait(&quot;RButton&quot;, &quot;T0.4&quot;)
    if(err_code = 0) ;超时
    {
        Send &quot;{Click, Right}&quot; ; n.b., do not use Send {RButton}
    }else{
        ; https://learn.microsoft.com/zh-cn/windows/win32/menurc/wm-syscommand
        MouseGetPos  , , &amp;win           ; 我加的，要不然它不起作用
        PostMessage 0x112, 0xF020, ,win ; alternative to WinMinimize
        ShowToolTip(&quot;窗口最小化&quot;)
    }
}

; 窗口置顶功能
~LButton::
{
    CoordMode &quot;Mouse&quot;, &quot;Screen&quot;
    MouseGetPos &amp;xOld, &amp;yOld, &amp;win
    ExStyle := WinGetExStyle(win)
    if (ExStyle &amp; 0x8) ; 0x8 is WS_EX_TOPMOST
    {
        ExStyle := &quot;窗口已取消置顶&quot;
    }
    else
    {
        ExStyle := &quot;窗口已置顶&quot;
    }
    err_code := KeyWait(&quot;LButton&quot;, &quot;T1&quot;) ; wait for the left mouse button to be released with timeout set to 1 second
    MouseGetPos &amp;xNew, &amp;yNew
    if (xOld = xNew &amp;&amp; yOld = yNew &amp;&amp; err_code = 0) ; if the mouse did not move during the timeout period
    {
        WinSetAlwaysOnTop -1, &quot;A&quot; ; toggle window always on top
        ShowToolTip(ExStyle)
    }
}
</code></pre>
<h1>第二部分 双击 Esc 关闭窗口</h1>
<table>
<thead>
<tr>
<th>Action</th>
<th>+ Target</th>
<th>= Result</th>
</tr>
</thead>
<tbody>
<tr>
<td>Double press</td>
<td>+ Esc key</td>
<td>= close active window</td>
</tr>
</tbody>
</table>
<pre><code class="language-C">; 功能：双击Esc关闭窗口
#HotIf
~Esc::
{
    id_old := WinGetID(&quot;A&quot;)
    process_name := WinGetProcessName(&quot;A&quot;)
    KeyWait &quot;Esc&quot; ; wait for the Esc key to be released
    err_code := KeyWait(&quot;Esc&quot;, &quot;D T0.4&quot;)
    if (err_code = 1){
        id_new := WinGetID(&quot;A&quot;) ; get the window id after the Esc key has being pressed again
        win_class := WinGetClass(&quot;A&quot;)
        if (id_old = id_new &amp;&amp; win_class != &quot;Shell_TrayWnd&quot; &amp;&amp; win_class != &quot;Shell_SecondaryTrayWnd&quot; &amp;&amp; win_class != &quot;Progman&quot; &amp;&amp; win_class != &quot;WorkerW&quot;)
        {
            ; if the current window is the same one as before and is not taskbar or desktop
            Send &quot;!{F4}&quot;
        }
    }
}
</code></pre>
<h1>第三部分 右击任务栏</h1>
<table>
<thead>
<tr>
<th>Action</th>
<th>+ Target</th>
<th>= Result</th>
</tr>
</thead>
<tbody>
<tr>
<td>Right click</td>
<td>+ taskbar button</td>
<td>= move pointer to &quot;Close window&quot;</td>
</tr>
</tbody>
</table>
<p>右击任务栏后，如果鼠标自动悬停在关闭窗口上：</p>
<pre><code class="language-C">; 功能，右击任务栏图标鼠标自动跳转到关闭窗口
#HotIf MouseIsOver(&quot;ahk_class Shell_TrayWnd&quot;) || MouseIsOver(&quot;ahk_class Shell_SecondaryTrayWnd&quot;) ; apply the following hotkey only when the mouse is over the taskbar
~RButton:: ; when right clicked
{
    CoordMode &quot;Mouse&quot;, &quot;Screen&quot;
    MouseGetPos &amp;xOld, &amp;yOld
    Sleep 500 ; wait for the Jump List to pop up, n.b., this line also helps to provide a uniform waiting experience
    MouseGetPos &amp;xNew, &amp;yNew
    CoordMode &quot;Mouse&quot;, &quot;Window&quot;
    if (Abs(xNew - xOld) &lt; 8 &amp;&amp; Abs(yNew - yOld) &lt; 8) ; if the mouse did not move much
    {
        Loop 6
        {
            if WinActive(&quot;ahk_class Windows.UI.Core.CoreWindow&quot;) ; if the Jump List pops up (right clicked on the taskbar app buttons)
            {
                WinGetPos , , &amp;width, &amp;height ; get the size of the last found window (Jump List)
                MouseMove (width / 2), (height - 3 * width / 32), 10 ; move the mouse to the bottom of the Jump List (&quot;Close window&quot;)
                break
            }
            Sleep 250 ; wait for more time
        }
    }
}
</code></pre>
<h1>总结</h1>
<p>上面的示例代码可以组成一个.ahk 文件，实现所有 CClose 的基本功能。</p>
<p>开机自启动方法：</p>
<ol>
<li>Win+R 打开运行窗口，输入 shell:startup</li>
<li>把脚本的快捷方式丢到里面即可</li>
</ol>
<p>未来可以改进的地方：</p>
<ul>
<li>[ ] 控制部分功能的启用与禁用（好的，又成 CClose 的轮子版了）</li>
<li>[ ] 进一步，对自己的脚本进行控制和管理</li>
<li>[ ] 对使用了管理员权限运行的系统无效</li>
<li>[ ] 状态栏图标改一下</li>
<li>[ ] 学习制作一个 Windows 软件</li>
</ul>
<p>目前存在的问题：</p>
<ul>
<li>[ ] 在运行《荒野大镖客 2》时部分情况下会触发。估计全屏游戏都会出现这个问题，待修复和改进。</li>
</ul>


                
            </main>

            <footer class="list-content-container">
                

                
                <details class="record-backlinks" open="open">
                    <summary class="menu-title">
                        backlinks
                        <span class="badge">1</span>
                    </summary>

                    <ul class="record-backlinks-list">
                        
                        <li data-target-id="3103663518">
                            <a href="#3103663518">
                                <span class="record-type-point" style="color: var(--n_工具箱);">⬤</span>
                                
                                <span>开源工具推荐</span>
                                <div class="record-links-context hover">
                                    <ul>
<li><a href="https://github.com/chaohershi/cclose">CClose</a>：CClose是一个用AutoHotKey编写的Windows实用程序。软件挺好用的，可以对我个人习惯进行统一。但是最近我把他核心代码提取并定制了，所以对它我就不依赖了。详看文章：<span class="id-context" data-target-id="3273167773">AHK 鼠标增强（CClose 源码撷英）</span></li>
</ul>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                
            </footer>
        </article>
        
        <article id="1886753501" class="record">
            <header>
                <h1 class="record-title">Git基本操作学习</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>1886753501</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>undefined</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('Git');">Git</button>
                    
                    <button class="btn" onclick="activeTag('Github');">Github</button>
                    
                    <button class="btn" onclick="activeTag('Gitee');">Gitee</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>5/27/2023</span>
                </div>
                

                

                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/git-basic-cover.png</span>
                </div>
                
                <div class="record-description">
                    <span>description :</span>
                    <span>包含初学者学习内容与进阶方法论</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>707592dd</span>
                </div>
                
                <div class="record-top_img">
                    <span>top_img :</span>
                    <span></span>
                </div>
                
            </header>

            <main class="record-content">
                <blockquote>
<p>本文为可视化Git学习项目的学习笔记。初级操作可视化学习：<a href="https://learngitbranching.js.org/?locale=zh_CN">Learn Git Branching</a></p>
<p>项目地址：<a href="https://github.com/pcottle/learnGitBranching">pcottle/learnGitBranching: An interactive git visualization and tutorial. Aspiring students of git can use this app to educate and challenge themselves towards mastery of git! (github.com)</a></p>
</blockquote>
<blockquote>
<p>Git文档：<a href="https://git-scm.com/doc">Git - Documentation (git-scm.com)</a></p>
</blockquote>
<h1>Git基本操作</h1>
<h2>基本</h2>
<pre><code class="language-bash">git commit # 新建提交记录
git log    # 查看提交记录的hash值

git branch &lt;branch_name&gt;		 	# 新建分支
git checkout &lt;branch/node&gt; 			# 切换分支或node
git checkout -b &lt;your-branch-name&gt; 	# 新建并切换分支

# 分支合并
git merge &lt;branch_name&gt; 	# 合并branch_name分支到当前分支
git rebase &lt;branch_name&gt; 	# 把当前分支里的工作直接移到branch_name上

# 自由在提交树移动（支持链式操作）
# 相对引用
^ 		# 向上移动一个提交记录
^^ 		# 向上移动两个提交记录
~&lt;num&gt; 	# 向上移动多个提交记录

# 选择父提交记录
^&lt;num&gt;	# 指定合并提交记录的某个父提交。(一个合并提交有两个父提交)

git branch -f &lt;branch&gt; &lt;node&gt; # 强制修改branch分支位置
# e.g. git branch -f main HEAD~3
</code></pre>
<h2>Rebase</h2>
<p>Rebase 实际上就是取出一系列的提交记录，“复制”它们，然后在另外一个地方逐个的放下去。</p>
<p>Rebase 的优势就是可以创造更线性的提交历史，这听上去有些难以理解。如果只允许使用 Rebase 的话，代码库的提交历史将会变得异常清晰。</p>
<h2>HEAD</h2>
<p>HEAD 是一个对当前所在分支的符号引用 —— 也就是指向你正在其基础上进行工作的提交记录。</p>
<p>HEAD 总是指向当前分支上最近一次提交记录。大多数修改提交树的 Git 命令都是从改变 HEAD 的指向开始的。</p>
<p>HEAD 通常情况下是指向分支名的（用*表示）。分离的 HEAD 就是让其指向了某个具体的提交记录而不是分支名。</p>
<h2>撤销变更</h2>
<pre><code class="language-sh">git reset &lt;node&gt;  
</code></pre>
<p>通过把分支记录回退几个提交记录来实现撤销改动（对远程分支无效）。</p>
<p>例如：在C2处执行<code>git reset HEAD~1</code></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230527163230995.png" alt="image-20230527163230995"></p>
<pre><code class="language-sh">git revert &lt;node&gt; 
</code></pre>
<p>例如：在C2处执行<code>git revert HEAD </code></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230527163039945.png" alt="image-20230527163039945"></p>
<p>要撤销的提交记录后面多了一个新提交。新提交记录 C2' 引入了更改 —— 这些更改刚好是用来撤销 C2 这个提交的。也就是说 C2' 的状态与 C1 是相同的。revert 之后就可以把你的更改推送到远程仓库。</p>
<h2>修改分支树</h2>
<pre><code class="language-sh">git cherry-pick &lt;node&gt;...
</code></pre>
<p>将一些提交复制到当前所在位置。cherry-pick 可以将提交树上任何地方的提交记录取过来追加到 HEAD 上（只要不是 HEAD 上游的提交就没问题）。</p>
<pre><code class="language-sh">git rebase --interactive &lt;node&gt;
</code></pre>
<p>如果你在命令后增加了这个选项, Git 会打开一个 UI 界面并列出将要被复制到目标分支的备选提交记录，它还会显示每个提交记录的哈希值和提交说明，提交说明有助于你理解这个提交进行了哪些更改。</p>
<p>可以进行以下操作：</p>
<ul>
<li>
<p>调整记录顺序</p>
</li>
<li>
<p>删除不想要的提交</p>
</li>
<li>
<p>合并提交</p>
</li>
</ul>
<blockquote>
<p>本地栈式提交</p>
<ul>
<li>
<p>一个在开发中经常会遇到的情况：我正在解决某个特别棘手的 Bug，为了便于调试而在代码中添加了一些调试命令并向控制台打印了一些信息。这些调试和打印语句都在它们各自的提交记录里。最后我终于找到了造成这个 Bug 的根本原因。最后就差把 <code>bugFix</code> 分支里的工作合并回 <code>main</code> 分支了。你可以选择通过 fast-forward 快速合并到 <code>main</code> 分支上，但这样的话 <code>main</code> 分支就会包含我这些调试语句了。你肯定不想这样，应该还有更好的方式……<br>
答案：使用上述命令修改分支树</p>
</li>
<li>
<p>接下来这种情况也是很常见的：你之前在 <code>newImage</code> 分支上进行了一次提交，然后又基于它创建了 <code>caption</code> 分支，然后又提交了一次。此时你想对某个以前的提交记录进行一些小小的调整。比如设计师想修改一下 <code>newImage</code> 中图片的分辨率，尽管那个提交记录并不是最新的了。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230527165217947.png" alt="image-20230527165217947"><br>
答案：我们可以通过下面的方法来克服困难：</p>
<ul>
<li>先用 <code>git rebase -i</code> 将提交重新排序，然后把我们想要修改的提交记录挪到最前</li>
<li>然后用 <code>git commit --amend</code> 来进行一些小修改</li>
<li>接着再用 <code>git rebase -i</code> 来将他们调回原来的顺序</li>
<li>最后我们把 main 移到修改的最前端（用你自己喜欢的方法）</li>
</ul>
<p>但这样做就唯一的问题就是要进行两次排序，而这有可能造成由 rebase 而导致的冲突。尝试使用cherry-pick。</p>
</li>
</ul>
</blockquote>
<h2>Tag与Describe</h2>
<pre><code class="language-sh">git tag &lt;your_tag&gt; [node]
</code></pre>
<p>分支很容易被人为移动，并且当有新的提交时，它也会移动。分支很容易被改变，大部分分支还只是临时的，并且还一直在变。</p>
<p>有没有什么可以<em>永远</em>指向某个提交记录的标识呢，比如软件发布新的大版本，或者是修正一些重要的 Bug 或是增加了某些新特性，有没有比分支更好的可以永远指向这些提交的方法呢？</p>
<p>Git 的 tag 可以（在某种程度上 —— 因为标签可以被删除后重新在另外一个位置创建同名的标签）永久地将某个特定的提交命名为里程碑，然后就可以像分支一样引用了。</p>
<p>更难得的是，它们并不会随着新的提交而移动。你也不能切换到某个标签上面进行修改提交，它就像是提交树上的一个锚点，标识了某个特定的位置。</p>
<pre><code class="language-sh">git describe &lt;ref&gt;
# &lt;ref&gt; 可以是任何能被 Git 识别成提交记录的引用，如果你没有指定的话，Git 会使用你目前所在的位置（HEAD）。
# 输出结果：&lt;tag&gt;_&lt;numCommits&gt;_g&lt;hash&gt;
</code></pre>
<p>由于标签在代码库中起着“锚点”的作用，Git 还为此专门设计了一个命令用来<strong>描述</strong>离你最近的锚点（也就是标签），它就是 <code>git describe</code>！</p>
<p>Git Describe 能帮你在提交历史中移动了多次以后找到方向；当你用 <code>git bisect</code>（一个查找产生 Bug 的提交记录的指令）找到某个提交记录时，或者是当你坐在你那刚刚度假回来的同事的电脑前时， 可能会用到这个命令。</p>
<h1>远程仓库操作</h1>
<h2>基本操作</h2>
<p>远程仓库实际上它们只是你的仓库在另个一台计算机上的拷贝。</p>
<p>远程分支反映了远程仓库（在你上次和它通信时）的<strong>状态</strong>。这会有助于你理解本地的工作与公共工作的差别。</p>
<p>远程分支有一个特别的属性，在你切换到远程分支时，自动进入分离 HEAD 状态。Git 这么做是出于不能直接在这些分支上进行操作的原因, 你必须在别的地方完成你的工作, （更新了远程分支之后）再用远程分享你的工作成果。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230527173159602.png" alt="image-20230527173159602"></p>
<p>远程分支有一个命名规范 —— 它们的格式是<code>&lt;remote name&gt;/&lt;branch name&gt;</code></p>
<pre><code class="language-sh">git fetch
</code></pre>
<p><code>git fetch</code> 完成了仅有的但是很重要的两步:</p>
<ul>
<li>从远程仓库下载本地仓库中缺失的提交记录</li>
<li>更新远程分支指针(如 <code>origin/main</code>)</li>
</ul>
<p><code>git fetch</code> 实际上将本地仓库中的远程分支更新成了远程仓库相应分支最新的状态。<code>git fetch</code> 并不会改变你本地仓库的状态。它不会更新你的 <code>main</code> 分支，也不会修改你磁盘上的文件。理解这一点很重要，因为许多开发人员误以为执行了 <code>git fetch</code> 以后，他们本地仓库就与远程仓库同步了。它可能已经将进行这一操作所需的所有数据都下载了下来，但是<strong>并没有</strong>修改你本地的文件。所以, 你可以将 <code>git fetch</code> 的理解为单纯的下载操作。</p>
<pre><code class="language-sh">git pull
# 相当于以下两条命令，pull 就是 fetch + merge
git fetch
git merge origin/main
</code></pre>
<p>实际上，由于先抓取更新再合并到本地分支这个流程很常用，因此 Git 提供了一个专门的命令来完成这两个操作。</p>
<pre><code class="language-sh">git push
</code></pre>
<p><code>git push</code> 负责将<strong>你的</strong>变更上传到指定的远程仓库，并在远程仓库上合并你的新提交记录。<em><code>git push</code> 不带任何参数时的行为与 Git 的一个名为 <code>push.default</code> 的配置有关。它的默认值取决于你正使用的 Git 的版本，但是在教程中我们使用的是 <code>upstream</code>。</em></p>
<h2>冲突处理</h2>
<p>假设你周一克隆了一个仓库，然后开始研发某个新功能。到周五时，你新功能开发测试完毕，可以发布了。但是 —— 天啊！你的同事这周写了一堆代码，还改了许多你的功能中使用的 API，这些变动会导致你新开发的功能变得不可用。但是他们已经将那些提交推送到远程仓库了，因此你的工作就变成了基于项目<strong>旧版</strong>的代码，与远程仓库最新的代码不匹配了。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230527175900652.png" alt="image-20230527175900652"></p>
<p>这种情况下, <code>git push</code> 就不知道该如何操作了。如果你执行 <code>git push</code>，Git 应该让远程仓库回到星期一那天的状态吗？还是直接在新代码的基础上添加你的代码，亦或由于你的提交已经过时而直接忽略你的提交？</p>
<p>因为这情况（历史偏离）有许多的不确定性，Git 是不会允许你 <code>push</code> 变更的。实际上它会强制你先合并远程最新的代码，然后才能分享你的工作。</p>
<p>那该如何解决这个问题呢？很简单，你需要做的就是使你的工作基于最新的远程分支。有许多方法做到这一点呢，不过最直接的方法就是通过 rebase 调整你的工作：</p>
<pre><code class="language-sh">git fetch
git rebase o/main
git push
# 相当于 git pull --rebase; git push
</code></pre>
<p><img src="https://cdn.gallery.uuanqin.top/img/origin_rebase.gif" alt="origin_rebase"></p>
<p>我们还可以使用 <code>merge</code></p>
<p>尽管 <code>git merge</code> 不会移动你的工作（它会创建新的合并提交），但是它会告诉 Git 你已经合并了远程仓库的所有变更。这是因为远程分支现在是你本地分支的祖先，也就是说你的提交已经包含了远程分支的所有变化：</p>
<pre><code class="language-sh">git fetch
git merge o/main
git push
# 相当于 git pull; git push;
</code></pre>
<p><img src="https://cdn.gallery.uuanqin.top/img/origin_merge.gif" alt="origin_merge"></p>
<p>在开发社区里，有许多关于 merge 与 rebase 的讨论。以下是关于 rebase 的优缺点：</p>
<p>优点：Rebase 使你的提交树变得很干净, 所有的提交都在一条线上</p>
<p>缺点：Rebase 修改了提交树的历史</p>
<p>选择哪个，仁者见仁智者见智。</p>
<h2>远程跟踪分支</h2>
<p>跟踪：</p>
<ul>
<li>pull 操作时，提交记录会被先下载到 origin/main 上，之后再合并到本地的 main 分支。隐含的合并目标由这个关联确定的。</li>
<li>push 操作时，我们把工作从 <code>main</code> 推到远程仓库中的 <code>main</code> 分支(同时会更新远程分支 <code>origin/main</code>) 。这个推送的目的地也是由这种关联确定的！</li>
</ul>
<p>当你克隆时, Git 会为远程仓库中的每个分支在本地仓库中创建一个远程分支（比如 <code>origin/main</code>）。然后再创建一个跟踪远程仓库中活动分支的本地分支，默认情况下这个本地分支会被命名为 <code>main</code>。</p>
<p>我们可以自己指定这种属性：</p>
<p>有两种方法：</p>
<p>第一种就是通过远程分支切换到一个新的分支，执行:</p>
<pre><code>git checkout -b totallyNotMain origin/main
</code></pre>
<p>就可以创建一个名为 <code>totallyNotMain</code> 的分支，它跟踪远程分支 <code>origin/main</code>。</p>
<p>第二种工作方法：</p>
<p>另一种设置远程追踪分支的方法就是使用：<code>git branch -u</code> 命令，执行：</p>
<pre><code class="language-sh">git branch -u origin/main foo # 如果当前就在 foo 分支上, 还可以省略 foo
</code></pre>
<h3>Git Push的参数</h3>
<pre><code class="language-sh">git push &lt;remote&gt; &lt;place&gt;
</code></pre>
<p>例子：<code>git push origin main</code></p>
<p>含义：*切到本地仓库中的“main”分支，获取所有的提交，再到远程仓库“origin”中找到“main”分支，将远程仓库中没有的提交记录都添加上去，搞定之后告诉我。*我们通过“place”参数来告诉 Git 提交记录来自于 main, 要推送到远程仓库中的 main。它实际就是要同步的两个仓库的位置。需要注意的是，因为我们通过指定参数告诉了 Git 所有它需要的信息，所以它就忽略了我们所切换分支的属性（就是说不管你的HEAD在哪）！</p>
<p>当为 git push 指定 place 参数为 <code>main</code> 时，我们同时指定了提交记录的<strong>来源</strong>和<strong>去向</strong>。要同时为源和目的地指定 <code>&lt;place&gt;</code> 的话，只需要用冒号 <code>:</code> 将二者连起来就可以了：</p>
<pre><code class="language-sh">git push origin &lt;source&gt;:&lt;destination&gt;
</code></pre>
<p>这个参数实际的值是个 refspec，“refspec” 是一个自造的词，意思是 Git 能识别的位置（比如分支 <code>foo</code> 或者 <code>HEAD~1</code>）。如果你要推送到的目的分支不存在，Git 会在远程仓库中根据你提供的名称帮你创建这个分支。</p>
<h3>Git Fetch的参数</h3>
<p><code>git fetch</code> 的参数和 <code>git push</code> 极其相似。他们的概念是相同的，只是方向相反罢了（因为现在你是下载，而非上传）如果你像如下命令这样为 git fetch 设置 的话：</p>
<pre><code class="language-sh">git fetch origin foo
</code></pre>
<p>Git 会到远程仓库的 <code>foo</code> 分支上，然后获取所有本地不存在的提交，放到本地的 <code>origin/foo</code> 上。</p>
<p>“如果我们指定 <code>&lt;source&gt;:&lt;destination&gt;</code> 会发生什么呢？”</p>
<p>如果你觉得直接更新本地分支很爽，那你就用冒号分隔的 refspec 吧。不过，你不能在当前切换的分支上干这个事，但是其它分支是可以的。</p>
<p>这里有一点是需要注意的 —— <code>source</code> 现在指的是远程仓库中的位置，而 <code>&lt;destination&gt;</code> 才是要放置提交的本地仓库的位置。它与 git push 刚好相反，这是可以讲的通的，因为我们在往相反的方向传送数据。</p>
<p>理论上虽然行的通，但开发人员很少这么做。我在这里介绍它主要是为了从概念上说明 <code>fetch</code> 和 <code>push</code> 的相似性，只是方向相反罢了。</p>
<p>如果执行命令前目标分支不存在，Git 会在 fetch 前自己创建立本地分支，就像是 Git 在 push 时，如果远程仓库中不存在目标分支，会自己在建立一样。</p>
<p>如果 <code>git fetch</code> 没有参数，它会下载所有的提交记录到各个远程分支。</p>
<h3>不指定<code>&lt;source&gt;</code></h3>
<p>在 git push 或 git fetch 时不指定任何 <code>source</code>，方法就是仅保留冒号和 destination 部分，source 部分留空。</p>
<p>例如：<code>git push origin :side</code>和<code>git fetch origin :bugFix</code></p>
<ul>
<li>
<p>给 push 传空值 source，成功删除了远程仓库中的 <code>side</code> 分支</p>
</li>
<li>
<p>如果 fetch 空 到本地，会在本地创建一个新分支。</p>
</li>
</ul>
<h3>Git Pull</h3>
<pre><code class="language-sh">git pull origin foo # git fetch origin foo; git merge origin/foo
git pull origin bar~1:bugFix # git fetch origin bar~1:bugFix; git merge bugFix
</code></pre>


                
            </main>

            <footer class="list-content-container">
                

                
            </footer>
        </article>
        
        <article id="1857161372" class="record">
            <header>
                <h1 class="record-title">Git-flow：git的分支管理策略</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>1857161372</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>undefined</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('git');">git</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>5/27/2023</span>
                </div>
                

                

                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/git-flowcover555555.png</span>
                </div>
                
                <div class="record-description">
                    <span>description :</span>
                    <span>这是一篇对分支管理策略学习和探讨。</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>6eb2089c</span>
                </div>
                
                <div class="record-top_img">
                    <span>top_img :</span>
                    <span></span>
                </div>
                
            </header>

            <main class="record-content">
                <p><a href="https://nvie.com/posts/a-successful-git-branching-model/">A successful Git branching model</a>是一篇有名的分支管理策略（Git-Flow）的学习，下面文章以这篇文章为基础，介绍Git-Flow工作流，顺便练一下英语。这篇不是简单的英文翻译，里面杂合了我的理解与外部参考。</p>
<blockquote>
<p>参考：</p>
<ul>
<li><a href="https://nvie.com/posts/a-successful-git-branching-model/">A successful Git branching model » nvie.com</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2012/07/git.html">Git分支管理策略 - 阮一峰的网络日志 (ruanyifeng.com)</a></li>
</ul>
</blockquote>
<h1>前言</h1>
<p>这篇文章诞生于10年前，那时Git刚诞生不久。在这10年里，许多团队都把它当成了“准则”和“灵丹妙药”。现在，越来越多的软件类型转向了web应用，而这些应用一般是持续交付的，而不是回滚式的，因此不需要支持多版本管理。如果软件开发团队正在做持续交付的软件，那么可以参考更简单的工作流（如<a href="https://docs.github.com/zh/get-started/quickstart/github-flow">GitHub 流</a>）而不是非得使用git-flow。</p>
<p>当然了，学习前需要记住，世界上没有灵丹妙药。要考虑自己的情况选择自己的工作流。</p>
<h1>为什么选择Git</h1>
<p>Git改变了程序员对“合并/分支”的看法。以前（CVS/Subversion时代），“合并/分支”有点可怕：小心合并冲突，不然它会咬你！但有了Git，这些操作将变得成本低廉和简单。由于其简单和可重复性的特性，“合并/分支”不再可怕。</p>
<h1>“去中心化”了但是还要“中心化”</h1>
<p>因为Git是DVCS（分布式管理系统），在技术层面上就没有诸如”中心化“仓库的东西。但是要让我们的模型工作得好，首先就得有一个“中心”的“真实”的仓库。这个中心化的仓库我们称为<code>origin</code>（这个名字对Git用户来说比较熟悉）</p>
<img src="https://cdn.gallery.uuanqin.top/img/centr-decentr@2x.png" style="zoom:50%;" />
<p>每一个开发人员都从<code>origin</code>中拉取和推送，与此同时成员之间也互相拉取形成子团队。这适用于2到3个开发人员在对一个软件的重要特性的进行开发的场景。</p>
<p>上图中，alice和bob、alice和david、david和clair组成了子团队，这意味着Alice定义了一个远程Git仓库名为bob，反之亦然。</p>
<h1>主分支</h1>
<p>中心仓库掌握两个主要的分支，它们有着无限的生命周期：</p>
<ul>
<li>master分支：主要分支，<code>HEAD</code>总是指向一个“可以作为产品发布”的状态。</li>
<li>develop分支：主要分支，<code>HEAD</code>总是指向为下一个版本做准备的最新交付开发版本，它包含了一些针对下一个版本的更改。</li>
</ul>
<img src="https://cdn.gallery.uuanqin.top/img/main-branches@2x.png" alt="img" style="zoom:50%;" />
<p>当develop中的源代码趋向稳定且做好发布准备时，所有的改变都应以某种方法“合并”回master，并打上版本标签。因此，每一次把所有改变合并回master，根据定义，这将是一个全新的发行版本。对于这一点，我们应严格遵守。所以从理论上来讲，每一次master分支存在提交，我们编写的Git Hook脚本会自动构建并导出我们的软件产品到产品服务器。</p>
<h1>辅助分支</h1>
<p>次于master和develop两个主分支，我们的开发模型使用许多辅助分支以帮助团队成员之间的平行开发、简化特性的追踪、为版本发行做好准备以及对产品临时出现的问题进行修复。与主分支不同，这些分支总是有着有限的生存周期，它们最终将会被永久地移除。</p>
<p>我们可能会用到的不同辅助分支：</p>
<ul>
<li>特性分支（Feature branches）</li>
<li>预发行分支（Release branches）</li>
<li>热修复分支（Hotfix branches）</li>
</ul>
<p>这些分支有不同的目的，且各自有严格规则约束，这些规则规定了它们原分支和目的分支。从技术上来讲，这些分支并不十分“特殊”，它们都是一般的Git分支，只不过我们以“使用它的方式”进行分类罢了。</p>
<h3>特性分支</h3>
<table>
<thead>
<tr>
<th>可能从哪个分支分出来</th>
<th>必须合并回哪个分支去</th>
<th>习惯命名</th>
</tr>
</thead>
<tbody>
<tr>
<td>develop</td>
<td>develop</td>
<td>除了叫master、develop、release-*或hotfix-*，其他都可以</td>
</tr>
</tbody>
</table>
<p>特性分支（有时也称主题分支）是用来开发即将到来或远期发行版本新特性的分支。当我们开始开发一个特性时，包含这个特性的发行版本是未知的。特性分支的本质是，只要这个特性还在开发中，它就一直存在，但最终会合并回develop（这就决定了新特性将加入即将发行的版本之中）或丢弃（以防最终的结果令人失望）。</p>
<p>特性分支一般只存在于开发中的仓库，而不在<code>origin</code>。</p>
<img src="https://cdn.gallery.uuanqin.top/img/fb@2x.png" alt="img" style="zoom:50%;" />
<h4>创建特性分支</h4>
<p>当我们开始在新特性上进行开发时，我们从develop中分出新分支</p>
<pre><code class="language-sh">git checkout -b myfeature develop
# git checkout [-b &lt;new-branch&gt;] [&lt;start-point&gt;]
# Create a new branch named &lt;new-branch&gt;, start it at &lt;start-point&gt;, and check the resulting branch out
</code></pre>
<h4>在develop分支中合并完成的特性</h4>
<p>开发完成的特性将合并到develop分支中，这就决定了即将发行的版本将包含这个特性。</p>
<pre><code class="language-sh"># 合并新特性
git checkout develop	# Switched to branch 'develop'
git merge --no-ff myfeature
# 删除特性分支
git branch -d myfeature
# git branch -d &lt;branchname&gt;
# Delete a branch. 
git push origin develop
</code></pre>
<p>--no-ff参数解释：</p>
<p>默认情况下，Git执行&quot;快进式合并&quot;（fast-farward merge，参考<a href="https://sandofsky.com/static/images/fast_forward.pdf">fast_forward</a>），会直接将Master分支指向Develop分支。使用--no-ff参数后，会执行正常合并，在Master分支上生成一个新节点。为了保证版本演进的清晰，我们希望采用这种做法（即使这样做会产生空的commit结点，但利大于弊）。</p>
<img src="https://cdn.gallery.uuanqin.top/img/--no-ff-awdwdwedwad.png" alt="img" style="zoom: 50%;" />
<h3>预发行分支</h3>
<table>
<thead>
<tr>
<th>可能从哪个分支分出来</th>
<th>必须合并回哪个分支去</th>
<th>习惯命名</th>
</tr>
</thead>
<tbody>
<tr>
<td>develop</td>
<td>develop，master</td>
<td>release-*</td>
</tr>
</tbody>
</table>
<p>预发布分支，它是指发布正式版本之前（即合并到Master分支之前），我们可能需要有一个预发布的版本进行测试。</p>
<p>预发行分支辅助新产品发行的准备工作，They allow for last-minute dotting of i’s and crossing t’s. 此外，它允许小错误的修复且为一个发行版本准备元数据（版本号、构建日期等）。通过所有在预发行分支所做的工作，develop分支将被清除以接收下一个大版本的发行。</p>
<p>从develop分支分叉处新的预发行分支的时刻，就是develop（几乎）反应新发行版本的理想状态的时刻，至少此时所有指向正在构建的发行版本的特性已经合并到develop中（但是指向未来发行版本的特性也许还没有合并进去，它们必须等到那个版本被分出来后，才考虑进行合并）。</p>
<p>正是在预发行分支存在开始，预发布的版本将被指定一个版本号（不会更早），一直到develop分支反映下一个发行版本变动的那一刻。但是，预发行版本的版本号最终是0.3还是1.0我们是不清楚的。版本号的决定是从预发行分支开始，并由项目的版本号制定规则决定。</p>
<h4>创建一个预发行分支</h4>
<p>预发行分支从develop分支分流出来的。例如，现在的产品版本为1.1.5，我们将有一个大的发行版本出现，develop分支也已经为下一个发行版本准备好了，而且我们决定这个版本将为1.2（而不是1.1.6或2.0）。所以我们分出一条预发行版本分支，其名字反映了新的版本号：</p>
<pre><code class="language-sh">git checkout -b release-1.2 develop # 切换到新分支 &quot;release-1.2&quot;
./bump-version.sh 1.2 # 文件修改成功，版本升级至1.2
git commit -a -m &quot;Bumped version number to 1.2&quot;
# --all: Tell the command to automatically stage files that have been modified and deleted, but new files you have not told Git about are not affected.
# -m &lt;msg&gt;: Use the given &lt;msg&gt; as the commit message.
</code></pre>
<p>在创建新分支并切换到它之后，我们提升了版本号。<code>./bump-version.sh</code>在这里是一个虚构的shell脚本，他将改变当前工作中的文件（副本）以反映新的版本（当然，你可以自己手动更改，就是一些文件的更改）。最后，提升的版本号将被提交。</p>
<p>新的分支也许会存在一段时间，直到这个发行版被推出。在这段时间中，release分支会有很多bug修复（而不是在develop分支中），但严格禁止在这里增加大的特性。大的特性应该合并到develop分支中，并等待下一个发行版本。</p>
<h4>完成一个预发行分支</h4>
<p>当预发行分支准备好发行时，我们必须进行一些操作。首先，预发行分支合并到master分支中（别忘了，master中的每次提交代表的是一个新的发行版本）。其次，master中的提交必须被贴上标签以便未来对这个历史版本的参考。最后，预发行分支中的改变需要合并回develop，这样未来的发行版本中将会包含这些bug修复。</p>
<p>在Git中提交的步骤：</p>
<pre><code class="language-sh">git checkout master
git merge --no-ff release-1.2
git tag -a 1.2
# -a: Make an unsigned, annotated tag object
# 你还可以使用以下标签
# -s: Make a GPG-signed tag, using the default e-mail address’s key. 
# -u &lt;key-id&gt;: Make a GPG-signed tag, using the given key.
</code></pre>
<p>预发行已经完成，且进行了标签标注以便未来的参考。</p>
<p>为了保证预发行分支中的改变得到保留，我们需要将其合并到develop分支。在Git中这样做：</p>
<pre><code class="language-sh">git checkout develop # Switched to branch 'develop'
git merge --no-ff release-1.2
</code></pre>
<p>这个步骤可能会导致合并冲突（或者说是必定冲突，因为我们改变了版本号），如果真的这样那就修复它然后提交。</p>
<p>现在我们真的要完事了，这个分支我们已经不需要了，把它删掉：</p>
<pre><code class="language-sh">git branch -d release-1.2
</code></pre>
<h3>热修复分支</h3>
<table>
<thead>
<tr>
<th>可能从哪个分支分出来</th>
<th>必须合并回哪个分支去</th>
<th>习惯命名</th>
</tr>
</thead>
<tbody>
<tr>
<td>master</td>
<td>develop，master</td>
<td>hotfix-*</td>
</tr>
</tbody>
</table>
<img src="https://cdn.gallery.uuanqin.top/img/hotfix-branches@2x.png" alt="img" style="zoom:50%;" />
<p>热修复分支非常像预发行分支，因为它也是为新产品发行做准备。它的出现是为了应对当前版本中出现的错误情况。当现行发行的产品出现一个紧急的Bug，它必须立即修复，这时热修复分支会从master分支中对应版本的tag分流出来。</p>
<p>它的本质就是要在develop进行开发的工作团队继续它们的工作，要另一个人去准备好修复这个Bug。</p>
<h4>创建热修复分支</h4>
<p>热修复分支可以从master分支中创建。例如，版本1.2是当前产品发行版本，然而出现了严重Bug。但是develop分支中的改变还是不稳定的，我们需要分支出热修复分支并着手开始解决问题。</p>
<pre><code class="language-sh">git checkout -b hotfix-1.2.1 master # Switched to a new branch &quot;hotfix-1.2.1&quot;
./bump-version.sh 1.2.1 # 文件修改成功，版本升级至1.2.1
git commit -a -m &quot;Bumped version number to 1.2.1&quot;
</code></pre>
<p>别忘了分支出热修复分支后提升版本号。</p>
<p>大约提交几次commit后，修复好Bug。</p>
<pre><code class="language-sh">git commit -m &quot;Fixed severe production problem&quot;
</code></pre>
<h4>完成热修复分支</h4>
<p>完成Bug修复后，需要把热修复分支合并到master中以及develop中，这是为了保证修复后的内容也被下一个版本包含。这就很像预发布分支完成后的操作。</p>
<p>首先，更新master并标注发行版本：</p>
<pre><code class="language-sh">git checkout master
git merge --no-ff hotfix-1.2.1
git tag -a 1.2.1
# 你还可以使用以下标签
# -s: Make a GPG-signed tag, using the default e-mail address’s key. 
# -u &lt;key-id&gt;: Make a GPG-signed tag, using the given key.
</code></pre>
<p>然后，把Bug的修复也合并到develop中：</p>
<pre><code class="language-sh">git checkout develop # Switched to branch 'develop'
git merge --no-ff hotfix-1.2.1
</code></pre>
<p>有一个例外规则是：<strong>当预发布分支存在时，热修复中的改变需要合并到这个预发布分支，而不是develop</strong>。合并的预发布分支的修复，会在预发布分支完成后最终合并到develop中。当然，如果develop分支急需这个修复，你也可以安全的合并到develop中。</p>
<p>最后，移除热修复分支这个临时分支。</p>
<pre><code class="language-sh">git branch -d hotfix-1.2.1
</code></pre>
<h1>总结</h1>
<p>如果这个分支模型没有什么重大改变，下面这张图将对你的项目非常有用。<img src="https://cdn.gallery.uuanqin.top/img/git-model@2x.png" alt="img" style="zoom: 67%;" /></p>
<blockquote>
<p>Author: Vincent Driessen</p>
<p>Original blog post: <a href="http://nvie.com/posts/a-succesful-git-branching-model">http://nvie.com/posts/a-succesful-git-branching-model</a></p>
<p>License: Creative Commons BY-SA</p>
</blockquote>
<h1>推荐阅读</h1>
<p><a href="https://www.conventionalcommits.org/zh-hans/v1.0.0/">约定式提交 (conventionalcommits.org)</a></p>


                
            </main>

            <footer class="list-content-container">
                

                
            </footer>
        </article>
        
        <article id="1360801971" class="record">
            <header>
                <h1 class="record-title">个人独立申请软件著作权申请记录</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>1360801971</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>社会生活</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('软著');">软著</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>5/31/2023</span>
                </div>
                

                

                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/cpcccover.webp</span>
                </div>
                
                <div class="record-description">
                    <span>description :</span>
                    <span>分享个人申请独立开发软件的软件著作权过程。</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>511c30b3</span>
                </div>
                
                <div class="record-top_img">
                    <span>top_img :</span>
                    <span></span>
                </div>
                
            </header>

            <main class="record-content">
                <p>写毕业设计之前就有个想法为我自己开发的系统申请软件著作权，现在动手尝试，将主要步骤记录如下。</p>
<blockquote>
<p>[!hint]<br>
本篇文章以个人申请方式（个人开发）介绍过程，合作开发、学校署名等问题不在本文范围内。</p>
</blockquote>
<p>官网：<a href="https://www.ccopyright.com.cn/">中国版权保护中心 (ccopyright.com.cn)</a></p>
<h1>前言：新的申请流程</h1>
<p>我发现这个官网会莫名抽风，各种连接错误、系统错误和卡顿。然后在登记过程（5 月 31 日）中，每一次提交的申请会出现不同的流程和页面 UI。有时候给你邮寄提示，有时候又没有，并多出签章页打印环节而取消。当我隐隐约约觉察是不是流程改了，就随手翻翻通知。发现 5 月 25 日新通知[^new]：</p>
<p>[^new]: <a href="https://www.ccopyright.com.cn/index.php?optionid=998&amp;method=view&amp;optionid=998&amp;auto_id=1005">关于软件版权登记网上办理试运行的通知-中心公告-中国版权保护中心 (ccopyright.com.cn)</a>：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230601115747781.png" alt="image-20230601115747781"></p>
<p>woc🤬，怪不得服务器抽风一阵后系统大变样。流程确实改了，这也说明网上的经验全没用了，接下来我的探索成果将是最早一批的改版经验！（后果：白花 10 块钱印了一堆废纸）</p>
<p>以下是一张未改版前宝贵截图：</p>
<img src="https://cdn.gallery.uuanqin.top/img/image-20230601120140239.png" alt="image-20230601120140239" style="zoom:50%;" />
<h1>注册账号并实名认证（新用户）</h1>
<p>首先登录官网<a href="https://www.ccopyright.com.cn/">中国版权保护中心 (ccopyright.com.cn)</a>注册账号。</p>
<p>注册成功后会有实名认证提示，也可以在账号管理-&gt;实名认证处进行认证。</p>
<p>需要准备好：身份证人像照、身份证国徽照、手持身份证自拍三张电子照片，要上传。</p>
<blockquote>
<p>实名认证填写的信息要和照片相符，不管你实际户籍移到哪里，身份证上写你是哪里的就填哪里的。我就是因为这个原因被“退货”了一下。</p>
</blockquote>
<p>认证失败也没关系，修正好资料就行。</p>
<h1>准备好文档</h1>
<p>请详细阅读：<a href="https://www.ccopyright.com.cn/index.php?optionid=1080">所需文件-中国版权保护中心 (ccopyright.com.cn)</a></p>
<p>我准备的材料：</p>
<ul>
<li>文档鉴别材料 pdf x1 份</li>
<li>源代码 pdf x1 份</li>
</ul>
<p>再提醒一些注意事项：</p>
<ul>
<li>除封面外每页有页眉，页眉标文章标题</li>
<li>右上角为页码</li>
<li>版本号 1.0、V1.0 要分清</li>
<li>格式为 pdf</li>
</ul>
<p>源代码文档如何保证一页 50 行：</p>
<ul>
<li>
<p>查看行数：word 中全选一页内容，点击左下角字数统计信息查看</p>
<img src="https://cdn.gallery.uuanqin.top/img/image-20230531183332051.png" alt="image-20230531183332051" style="zoom: 80%;" />
</li>
<li>
<p>格式：字体 Time New Roman 五号，间距 固定值 13.9 磅</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230531183623863.png" alt="image-20230531183623863"></p>
</li>
</ul>
<p>页眉设置分享：</p>
<ul>
<li>
<p>Word 中页眉“文档标题和页码同时存在”的设置方法：双击页眉进入页眉编辑后，输入文章标题。打开菜单：插入-&gt;页码当前位置，即可插入页码。控制空格使得页码和页眉同时存在。</p>
</li>
<li>
<p>Latex 页眉。因为我是套用 TJU 论文模板的，我也搞不清楚，弄着弄着就得了：</p>
<pre><code class="language-latex">\pagestyle{fancy}                             	% 设置正文眉页脚风格
    \fancyhead[R]{\thepage}            			% 页眉格式
    \fancyhead[C]{XXX系统~V1.0~设计文档}
    \fancyhead[L]{}
    \fancyfoot[C]{}           					% 页脚格式
    \renewcommand{\headrulewidth}{0.5pt}
    \renewcommand{\footrulewidth}{0pt}

\fancypagestyle{plain}{					% 设置章首眉页脚风格
  \pagestyle{fancy}{
    \fancyhead[R]{\thepage}           	% 页眉格式
    \fancyhead[C]{XXX系统~V1.0~设计文档}
    \fancyhead[L]{}
    \fancyfoot[C]{}           			% 页脚格式
    \renewcommand{\headrulewidth}{0.5pt}
    \renewcommand{\footrulewidth}{0pt}
  }
</code></pre>
</li>
</ul>
<h1>网上申请</h1>
<p>按提示填好信息。</p>
<p>申请完成后，会有打印签章页环节（2023 年 6 月新流程）。<br>
<img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20230601114103.png" alt="QQ截图20230601114103.png"></p>
<img src="https://cdn.gallery.uuanqin.top/img/image-20230601121053373.png" alt="image-20230601121053373" style="zoom:67%;" />
<p>我的做法是现在签章页后使用电子签名，之后上传并提交申请就行。</p>
<img src="https://cdn.gallery.uuanqin.top/img/image-20230601142559534.png" alt="image-20230601142559534" style="zoom:80%;" />
<blockquote>
<p>注意到，新版本中删除申请更方便了</p>
</blockquote>
<p>20 天后进入受理流程：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230622110009.png" alt="image.png"><br>
<img src="https://cdn.gallery.uuanqin.top/img/20230622110043.png" alt="image.png"></p>
<h1>接收</h1>
<p>经过漫长的等待，与 2023 年 8 月 1 日受理并审查完成，不过它颁发的是一个电子件。怪不得之前整个 7 月份查看时收件人地址变得不可更改了，最后直接就消失了。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230801215656.png" alt="image.png"></p>
<p>这么说来整个无纸化流程方便很多，我也算是第一批使用新流程的用户了吧。</p>
<p>当当当当！</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/rzzz.jpg" alt="rzzz.jpg"></p>
<h1>后记</h1>
<p>注意到网站 Logo 换了，丑了。由于网站处于改版期，整个网站功能板块、交互、界面半新半旧的，弄得我好别扭。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230801221819.png" alt="image.png"></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230801221807.png" alt="image.png"></p>
<p>看了通知，原来是热乎的[^hot]。</p>
<p>[^hot]: <a href="https://www.ccopyright.com.cn/index.php?optionid=998&amp;method=view&amp;optionid=998&amp;auto_id=1026">中国版权保护中心发布新形象标识-中心公告-中国版权保护中心 (ccopyright.com.cn)</a></p>
<h1>本文参考</h1>
<ul>
<li><a href="https://www.zhihu.com/search?q=%E4%B8%AA%E4%BA%BA%E7%94%B3%E8%AF%B7%E8%BD%AF%E4%BB%B6%E8%91%97%E4%BD%9C%E6%9D%83&amp;utm_content=search_history&amp;type=content">个人申请软件著作权 - 搜索结果 - 知乎 (zhihu.com)</a></li>
<li><a href="https://github.com/zephms/ccopyright-software-copyright-application/tree/main">zephms/ccopyright-software-copyright-application: 中国版权保护中心 软件著作权申请教程 (github.com)</a></li>
<li><a href="https://zhidao.baidu.com/question/274830328.html">如何让页眉和页码同时显示_百度知道 (baidu.com)</a></li>
<li><a href="https://blog.csdn.net/m0_57028150/article/details/129690954">latex 章首添加页眉<em>latex 首页页眉</em>玛莎拉蒂的车轮的博客-CSDN 博客</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/114676221">Latex 的页脚和页眉 - 知乎 (zhihu.com)</a></li>
</ul>


                
            </main>

            <footer class="list-content-container">
                

                
            </footer>
        </article>
        
        <article id="90746120" class="record">
            <header>
                <h1 class="record-title">Butterfly不改动主题源码实现自定义侧边栏</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>90746120</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>Hexo</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('HTML');">HTML</button>
                    
                    <button class="btn" onclick="activeTag('CSS');">CSS</button>
                    
                    <button class="btn" onclick="activeTag('Butterfly');">Butterfly</button>
                    
                    <button class="btn" onclick="activeTag('Pug');">Pug</button>
                    
                    <button class="btn" onclick="activeTag('CodePen');">CodePen</button>
                    
                    <button class="btn" onclick="activeTag('YAML');">YAML</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>6/1/2023</span>
                </div>
                

                

                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/crowdcover46546.png</span>
                </div>
                
                <div class="record-description">
                    <span>description :</span>
                    <span>侧边栏定制举一反三，手把手教你实现自己的侧边栏</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>568ad08</span>
                </div>
                
                <div class="record-top_img">
                    <span>top_img :</span>
                    <span></span>
                </div>
                
            </header>

            <main class="record-content">
                <blockquote>
<p>[!success] 本文已收录至 <a href="https://butterfly.zhheo.com/">Butterfly 主题美化教程</a></p>
</blockquote>
<p>侧边栏是 Butterfly 主题的一大功能亮点，在 Butterfly 3.8.0 版本前是不支持自定义侧边栏的，只能通过魔改实现。这也因此诞生了许多优质的魔改教程，效果也很惊艳，比如 <a href="https://blog.zhheo.com/">Heo</a> 收录的：<a href="https://butterfly.zhheo.com/docs/aside.html">侧边栏 | Butterfly 主题美化教程 (zhheo.com)</a>。</p>
<p>Butterfly 3.8.0 以后，主题支持自定义侧边栏，这也使我们可以通过不修改主题源码的方式自定义想要的侧边栏。（主题官方文档参考：<a href="https://butterfly.js.org/posts/ea33ab97/">自定義側邊欄 | Butterfly</a>）</p>
<p><strong>授人以鱼不如授人以渔</strong>。本篇文章将以这个特性为基础，结合 CodePen 中的项目，以三个例子展示定制侧边栏过程：</p>
<ul>
<li>小风车：这是对主题官方文档示例的举一反三，提供与 CodePen 项目结合的思路。<br>
<img src="https://cdn.gallery.uuanqin.top/img/image-20230530224311630.png" alt="image-20230530224311630|223"></li>
<li>Crowd Simulator 人潮涌动模拟器：引入 CSS 文件去掉侧边栏容器的边框，嵌入 iframe 页面<br>
<img src="https://cdn.gallery.uuanqin.top/img/crowdsimudemo.gif" alt="crowdsimudemo.gif"></li>
<li>Car 小汽车：上例的举一反三<br>
<img src="https://cdn.gallery.uuanqin.top/img/cardemo-min.gif" alt="cardemo-min.gif|275"></li>
</ul>
<blockquote>
<p>本人前端水平有限，欢迎各位博主互相交流！</p>
</blockquote>
<h1>小风车</h1>
<p>首先，在 <a href="https://codepen.io/trending">Trending - CodePen</a> 找到自己想要的小组件，以小风车为例 <a href="https://codepen.io/FilipVitas/pen/zWWmbo">Windmill (codepen.io)</a>，进入代码编辑界面，里面有 HTML 代码和 CSS 代码。</p>
<h2>引入 CSS</h2>
<p>点击代码框右上小箭头，编译 css 文件：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230530222130344.png" alt="image-20230530222130344|500"></p>
<p>复制里面的的代码到新文件 windmill.css。并将该 CSS 文件引入主题中。Butterfly 主题的方法为在主题配置文件的 inject 部分引入 CSS，如：</p>
<pre><code class="language-yaml">inject:
  head:
    - &lt;link rel=&quot;stylesheet&quot; href=&quot;your css&quot;&gt;
  bottom:
    - &lt;script src=&quot;your js&quot;&gt;&lt;/script&gt;
</code></pre>
<p>删除不必要代码（否则导致博客异常）并稍微修改一下类选择器（以防万一）：</p>
<pre><code class="language-diff">- *,
- *:before,
- *:after {
-   ...
- }
- body {
-   ...
- }
- .inspiration {
- 	...
- }
- .center {
- ...
- }
- @media screen and (max-height: 500px) {
- ...
- }
+ /* 这是为了让svg居中 */
+ .windmill {
+     display: flex;
+     align-items: center;
+     justify-content: center;
+ }

+ /* 以下关于svg类选择器加上.windmill */
- svg {
+ svg.windmill {
  overflow: visible;
}
- svg .blades {
+ svg .blades.windmill {
	...
}
- svg .clouds path:nth-child(1) {
+ svg .clouds.windmill path:nth-child(1) {
	...
}
- svg .clouds path:nth-child(2) {
+ svg .clouds.windmill path:nth-child(2) {
	...
}
...
</code></pre>
<h2>widget.yml 放入关键 HTML 代码</h2>
<p>只提取代码中第一个 div 元素，并对相关元素增加 windmill 类：</p>
<pre><code class="language-diff">-&lt;div class=&quot;center&quot;&gt;
+&lt;div class=&quot;windmill&quot;&gt;
-  &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; viewBox=&quot;615.66 311.71 271.03 207.66&quot; width=&quot;271.03&quot; height=&quot;207.66&quot;&gt;
-   &lt;g class=&quot;clouds&quot; fill=&quot;none&quot; stroke-width=&quot;3&quot; stroke=&quot;#BED3CF&quot; stroke-linejoin=&quot;round&quot; stroke-linecap=&quot;round&quot; stroke-miterlimit=&quot;3&quot;&gt;
+ &lt;svg class=&quot;windmill&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; viewBox=&quot;615.66 311.71 271.03 207.66&quot; width=&quot;271.03&quot; height=&quot;207.66&quot;&gt;
+ &lt;g class=&quot;clouds windmill&quot; fill=&quot;none&quot; stroke-width=&quot;3&quot; stroke=&quot;#BED3CF&quot; stroke-linejoin=&quot;round&quot; stroke-linecap=&quot;round&quot; stroke-miterlimit=&quot;3&quot;&gt;
        ...
    &lt;/g&gt;
	...
- &lt;g class=&quot;blades&quot; fill=&quot;#FFF&quot; stroke-width=&quot;3&quot; stroke=&quot;#4A5370&quot; stroke-linejoin=&quot;round&quot; stroke-miterlimit=&quot;3&quot;&gt;
+ &lt;g class=&quot;blades windmill&quot; fill=&quot;#FFF&quot; stroke-width=&quot;3&quot; stroke=&quot;#4A5370&quot; stroke-linejoin=&quot;round&quot; stroke-miterlimit=&quot;3&quot;&gt;
	...
  &lt;/g&gt;
&lt;/svg&gt;
&lt;/div&gt;
</code></pre>
<p>在 widget.yml 中是这样的：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230530223905933.png" alt="image-20230530223905933|500"></p>
<p>注意 YAML 文件中的缩进！否则会报这样的错误：</p>
<pre><code>can not read a block mapping entry; a multiline key may not be an implicit key
</code></pre>
<h1>Crowd Simulator 人潮涌动模拟器</h1>
<p>逛了许多博主的网站，发现了这个卡片：<a href="https://codepen.io/zadvorsky/pen/xxwbBQV">Crowd Simulator (codepen.io)</a>。想尝试一下是不是可以放到侧边栏，试了一晚上成功了。现分享步骤。</p>
<h2>新建 HTML 文件</h2>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;

&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;人潮汹涌 Crowd Simulator&lt;/title&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;/css/people.css&quot;&gt;
&lt;/head&gt;

&lt;body&gt;&lt;canvas id=&quot;canvas&quot;&gt;&lt;/canvas&gt;
    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;

&lt;style&gt;
    body,
    html {
        height: 100%;
        background-color: #fff
    }

    body {
        margin: 0
    }

    #canvas {
        width: 100%;
        height: 100%
    }

    body::-webkit-scrollbar {
        display: none
    }

&lt;/style&gt;

&lt;script&gt;

const config = {
  src:
    &quot;https://s3-us-west-2.amazonaws.com/s.cdpn.io/175711/open-peeps-sheet.png&quot;,
  rows: 15,
  cols: 7
};

// UTILS

const randomRange = (min, max) =&gt; min + Math.random() * (max - min);

const randomIndex = (array) =&gt; randomRange(0, array.length) | 0;

const removeFromArray = (array, i) =&gt; array.splice(i, 1)[0];

const removeItemFromArray = (array, item) =&gt;
  removeFromArray(array, array.indexOf(item));

const removeRandomFromArray = (array) =&gt;
  removeFromArray(array, randomIndex(array));

const getRandomFromArray = (array) =&gt; array[randomIndex(array) | 0];

// TWEEN FACTORIES

const resetPeep = ({ stage, peep }) =&gt; {
  const direction = Math.random() &gt; 0.5 ? 1 : -1;
  // using an ease function to skew random to lower values to help hide that peeps have no legs
  const offsetY = 100 - 250 * gsap.parseEase(&quot;power2.in&quot;)(Math.random());
  const startY = stage.height - peep.height + offsetY;
  let startX;
  let endX;

  if (direction === 1) {
    startX = -peep.width;
    endX = stage.width;
    peep.scaleX = 1;
  } else {
    startX = stage.width + peep.width;
    endX = 0;
    peep.scaleX = -1;
  }

  peep.x = startX;
  peep.y = startY;
  peep.anchorY = startY;

  return {
    startX,
    startY,
    endX
  };
};

const normalWalk = ({ peep, props }) =&gt; {
  const { startX, startY, endX } = props;

  const xDuration = 10;
  const yDuration = 0.25;

  const tl = gsap.timeline();
  tl.timeScale(randomRange(0.5, 1.5));
  tl.to(
    peep,
    {
      duration: xDuration,
      x: endX,
      ease: &quot;none&quot;
    },
    0
  );
  tl.to(
    peep,
    {
      duration: yDuration,
      repeat: xDuration / yDuration,
      yoyo: true,
      y: startY - 10
    },
    0
  );

  return tl;
};

const walks = [normalWalk];

// CLASSES

class Peep {
  constructor({ image, rect }) {
    this.image = image;
    this.setRect(rect);

    this.x = 0;
    this.y = 0;
    this.anchorY = 0;
    this.scaleX = 1;
    this.walk = null;
  }

  setRect(rect) {
    this.rect = rect;
    this.width = rect[2];
    this.height = rect[3];

    this.drawArgs = [this.image, ...rect, 0, 0, this.width, this.height];
  }

  render(ctx) {
    ctx.save();
    ctx.translate(this.x, this.y);
    ctx.scale(this.scaleX, 1);
    ctx.drawImage(...this.drawArgs);
    ctx.restore();
  }
}

// MAIN

const img_crowd = document.createElement(&quot;img&quot;);
img_crowd.onload = init;
img_crowd.src = config.src;

const canvas = document.querySelector(&quot;#canvas&quot;);
const ctx = canvas.getContext(&quot;2d&quot;);

const stage = {
  width: 0,
  height: 0
};

var allPeeps = [];
const availablePeeps = [];
const crowd = [];

function init() {
  createPeeps();

  // resize also (re)populates the stage
  resize();

  gsap.ticker.add(render);
  window.addEventListener(&quot;resize&quot;, resize);
}

function createPeeps() {
  const { rows, cols } = config;
  const { naturalWidth: width, naturalHeight: height } = img_crowd;
  const total = rows * cols;
  const rectWidth = width / rows;
  const rectHeight = height / cols;

  for (let i = 0; i &lt; total; i++) {
    allPeeps.push(
      new Peep({
        image: img_crowd,
        rect: [
          (i % rows) * rectWidth,
          ((i / rows) | 0) * rectHeight,
          rectWidth,
          rectHeight
        ]
      })
    );
  }
}

function resize() {
  stage.width = canvas.clientWidth;
  stage.height = canvas.clientHeight;
  canvas.width = stage.width * devicePixelRatio;
  canvas.height = stage.height * devicePixelRatio;

  crowd.forEach((peep) =&gt; {
    peep.walk.kill();
  });

  crowd.length = 0;
  availablePeeps.length = 0;
  availablePeeps.push(...allPeeps);

  initCrowd();
}

function initCrowd() {
  while (availablePeeps.length) {
    // setting random tween progress spreads the peeps out
    addPeepToCrowd().walk.progress(Math.random());
  }
}

function addPeepToCrowd() {
  const peep = removeRandomFromArray(availablePeeps);
  const walk = getRandomFromArray(walks)({
    peep,
    props: resetPeep({
      peep,
      stage
    })
  }).eventCallback(&quot;onComplete&quot;, () =&gt; {
    removePeepFromCrowd(peep);
    addPeepToCrowd();
  });

  peep.walk = walk;

  crowd.push(peep);
  crowd.sort((a, b) =&gt; a.anchorY - b.anchorY);

  return peep;
}

function removePeepFromCrowd(peep) {
  removeItemFromArray(crowd, peep);
  availablePeeps.push(peep);
}

function render() {
  canvas.width = canvas.width;
  ctx.save();
  ctx.scale(devicePixelRatio, devicePixelRatio);

  crowd.forEach((peep) =&gt; {
    peep.render(ctx);
  });

  ctx.restore();
}

&lt;/script&gt;

&lt;/html&gt;

</code></pre>
<p>这个 HTML 模板很简单：</p>
<ul>
<li>body 部分放<a href="https://codepen.io/zadvorsky/pen/xxwbBQV">Crowd Simulator (codepen.io)</a>中 HTML 的内容</li>
<li>style 部分放 CSS 内容。增加一点样式隐藏滚动条。</li>
</ul>
<pre><code class="language-css">	body::-webkit-scrollbar {
        display: none
    }
</code></pre>
<ul>
<li>js 做了写优化（我调错调试出来的）
<ul>
<li>引入其他 js：gsap.min.js</li>
<li>改了一个变量名：img-&gt;img_crowd 防冲突</li>
</ul>
</li>
</ul>
<p>将新建的 HTML 放到<strong>你博客目录 Sourse 文件夹</strong>下的合适位置。这里我单独放到<code>DO_NOT_render</code>文件夹下，以便后续设置 Hexo 忽略对该文件夹的渲染。注意<code>DO_NOT_render</code>文件夹是<code>sourse</code>的子文件夹。<br>
在<code>_config.yaml</code>中设置禁止渲染：</p>
<pre><code class="language-yaml">skip_render:
  - DO_NOT_render/people.html
</code></pre>
<h2>引入 CSS</h2>
<p>Butterfly 主题配置文件 inject 以下 CSS：</p>
<pre><code class="language-css">#effect_shade{
    /* width:40%!important; */
    height: 200px;
    background-color: var(--lyx-white-acrylic1)!important;
    border-radius: 8px;
    /* margin-right: 10px !important; */
    font-family: PingFang,微软雅黑,HYTMR,SimSun;
    background-size:cover;
    color: #00000000;
    font-size:40px; /*觉得小可以开大一点*/
    position: relative;
}
#effect_shade-banner{
    width:100%!important;
    height:100%!important;
    border-radius:8px;
}
#effect_shade-hover{
    position:absolute;
    right:0%;
    height:100%!important;
    color:var(--lyx-0);
    border-radius: 8px;
    padding-left: 5%;
    padding-top: 5%;
}
#effect_shade-hover:hover{
   color:#ffffff;
   background-color: #669900dd;
   backdrop-filter: blur(10px) saturate(180%);
   -webkit-backdrop-filter: blur(10px) saturate(180%);
}

/* 这是为了无缝侧边栏 */
.seamless-card{
    padding: 0px!important;
}
.seamless-card .item-headline{
    padding-bottom: 0px!important;
    height: 0px!important;
}

</code></pre>
<p>从上面的 CSS 中注意到：</p>
<pre><code class="language-CSS">/* 这是为了无缝侧边栏 */
.seamless-card{
    padding: 0px!important;
}
.seamless-card .item-headline{
    padding-bottom: 0px!important;
    height: 0px!important;
}
</code></pre>
<p>这是为了覆盖 Butterfly 主题侧边栏样式，实现对目标侧边栏卡片进行调整，达到无缝的效果。</p>
<h2>自定义侧边栏 widget.yml</h2>
<blockquote>
<p>[!hint] 再次提醒<br>
关于自定义侧边栏（widget.yml）信息详看 Butterfly 主题官方文档 <a href="https://butterfly.js.org/posts/ea33ab97/#%E6%A0%BC%E5%BC%8F">自定義側邊欄 | Butterfly</a></p>
</blockquote>
<pre><code class="language-yaml">top:
  - class_name: seamless-card
    id_name:
    name:
    icon:
    order:
    html: |
      &lt;div id=&quot;effect_shade&quot;&gt;
      &lt;iframe id=&quot;effect_shade-banner&quot; src=&quot;/DO_NOT_render/people.html&quot; frameborder=&quot;no&quot;&gt;&lt;/iframe&gt;
      &lt;a id=&quot;effect_shade-hover&quot; style=&quot;width:100%;height:auto;&quot; href=&quot;javascript:randomPost()&quot;&gt;
          &lt;span&gt;&amp;nbsp&lt;/span&gt;&lt;i class=&quot;fa fa-paper-plane&quot;&gt;&lt;/i&gt;
        &lt;div&gt;&amp;nbsp随便逛逛→&lt;/div&gt;&lt;/a&gt;
      &lt;/div&gt;
</code></pre>
<p><code>seamless-card</code>呼应上文的无缝效果。<strong>无边框的关键就在于这</strong>！</p>
<p>注意到，</p>
<pre><code class="language-html">&lt;a id=&quot;random-hover&quot; style=&quot;width:100%;height:auto;&quot; href=&quot;javascript:randomPost()&quot;&gt;
</code></pre>
<p>中的 js 函数为之前写的随机跳转函数[^ram]，你可以执行你想要的函数。</p>
<p>从这个例子中，我们学到，HTML 是实现画面内容，CSS 是实现鼠标悬停动效，widget.yaml 可以配置侧边栏效果。以这种方式我们很快就能做出第二个例子。</p>
<p>[^ram]: 随机访问一篇文章：<a href="https://blog.leonus.cn/2022/randomPost.html">随机访问一篇文章的实现 | Leonus</a></p>
<h1>Car 小汽车</h1>
<p>项目：<a href="https://codepen.io/abxlfazl/pen/NWrOBzg">car (codepen.io)</a></p>
<p>这个项目里只有 css 代码，那这个页面就简单了。新建 HTML 放入<code>DO_NOT_render</code>文件夹。</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;zh&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;小车&lt;/title&gt;
&lt;/head&gt;
&lt;script&gt;
	// 这里放项目的CSS
&lt;/script&gt;
&lt;/html&gt;
</code></pre>
<p>widget.yml 几乎不用变：</p>
<pre><code class="language-diff"> - class_name: seamless-card
    id_name:
    name:
    icon:
    order:
    html: |
      &lt;div id=&quot;effect_shade&quot;&gt;
-     &lt;iframe id=&quot;effect_shade-banner&quot; src=&quot;/DO_NOT_render/people.html&quot; frameborder=&quot;no&quot;&gt;&lt;/iframe&gt;
+     &lt;iframe id=&quot;effect_shade-banner&quot; src=&quot;/DO_NOT_render/car/car.html&quot; frameborder=&quot;no&quot;&gt;&lt;/iframe&gt;
      &lt;a id=&quot;effect_shade-hover&quot; style=&quot;width:100%;height:auto;&quot; href=&quot;javascript:randomPost()&quot;&gt;
          &lt;span&gt;&amp;nbsp&lt;/span&gt;&lt;i class=&quot;fa fa-paper-plane&quot;&gt;&lt;/i&gt;
        &lt;div&gt;&amp;nbsp随便逛逛→&lt;/div&gt;&lt;/a&gt;
      &lt;/div&gt;
</code></pre>
<p>就 OK 了。</p>
<h1>其他侧边栏定制文章</h1>
<p><a href="#4139834099" title="Butterfly 侧边栏实现 Obsidian 关系图谱" class="record-link">Butterfly 侧边栏实现 Obsidian 关系图谱</a></p>
<h1>本文参考</h1>
<ul>
<li><a href="https://yisous.xyz/posts/bd7ef112/">Hexo butterfly 首页随便逛逛 banner 教程 | Ariasaka の小窝 (yisous.xyz)</a></li>
<li><a href="https://codebeautify.org/pug-to-html-converter">PUG to HTML Converter Online tool (codebeautify.org)</a></li>
<li><a href="https://blog.zhheo.com/p/8148ca95.html">Hexo 魔改：Codepen 项目组件移植教程，将 Codepen 项目移植到博客 | 张洪 Heo (zhheo.com)</a></li>
</ul>


                
            </main>

            <footer class="list-content-container">
                
                <details class="record-links">
                    <summary class="menu-title">
                        links
                        <span class="badge">1</span>
                    </summary>

                    <ul class="record-links-list">
                        
                        <li data-target-id="4139834099">
                            <a href="#4139834099">
                                <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                                
                                <span>Butterfly 侧边栏实现 Obsidian 关系图谱</span>
                                <div class="record-links-context hover">
                                    <p><span class="id-context" data-target-id="4139834099">Butterfly 侧边栏实现 Obsidian 关系图谱</span></p>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                

                
                <details class="record-backlinks" open="open">
                    <summary class="menu-title">
                        backlinks
                        <span class="badge">2</span>
                    </summary>

                    <ul class="record-backlinks-list">
                        
                        <li data-target-id="4139834099">
                            <a href="#4139834099">
                                <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                                
                                <span>Butterfly 侧边栏实现 Obsidian 关系图谱</span>
                                <div class="record-links-context hover">
                                    <p>实现无缝侧边栏参考我这篇教程：<span class="id-context" data-target-id="90746120">Butterfly不改动主题源码实现自定义侧边栏</span></p>

                                </div>
                            </a>
                        </li>
                        
                        <li data-target-id="1215492985">
                            <a href="#1215492985">
                                <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                                
                                <span>装点你的 Butterfly 博客</span>
                                <div class="record-links-context hover">
                                    <p>自定义侧边栏：<span class="id-context" data-target-id="90746120">Butterfly不改动主题源码实现自定义侧边栏</span><br>
自定义页脚：Butterfly 自定义页脚（不修改主题源码）<br>
夜间模式更改网站图标：Butterfly 夜间模式变换顶部网站图标</p>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                
            </footer>
        </article>
        
        <article id="1011516134" class="record">
            <header>
                <h1 class="record-title">Markdown 渲染测试</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>1011516134</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>核心协同</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('源码案例驱动');">源码案例驱动</button>
                    
                    <button class="btn" onclick="activeTag('Markdown');">Markdown</button>
                    
                    <button class="btn" onclick="activeTag('Typora');">Typora</button>
                    
                    <button class="btn" onclick="activeTag('GFM');">GFM</button>
                    
                    <button class="btn" onclick="activeTag('OFM');">OFM</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>6/1/2023</span>
                </div>
                

                

                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>3c4a82e6</span>
                </div>
                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/mdcover65465.png</span>
                </div>
                
                <div class="record-description">
                    <span>description :</span>
                    <span>以CommonMark、GFM标准为基础进行测试。</span>
                </div>
                
                <div class="record-top_img">
                    <span>top_img :</span>
                    <span></span>
                </div>
                
            </header>

            <main class="record-content">
                <p>【提示：Github中Front-matter以表格形式显示】</p>
<h1>简介</h1>
<h2>文章使用方法</h2>
<p>这原本是一篇Typora下使用Markdown语法的案例实践分享，最早创建于2021年11月之前，于2023年6月大改。本篇文章使用Markdown标记语法编写而成，汇聚了常用Markdown语法标注。对于不同目标人群有不同的作用：</p>
<ul>
<li>对于Markdown学习者。可以获取文章源码（Github地址如下），并使用你的本地编辑器打开。通过对比标记语言与渲染结果直接学习。如果你不喜欢这种MarkDown学习方式，你可以参考GitHub学习相关Markdown规范：<a href="https://docs.github.com/zh/get-started/writing-on-github/getting-started-with-writing-and-formatting-on-github/basic-writing-and-formatting-syntax">基本撰写和格式语法 - GitHub 文档</a></li>
<li>对于其他人。这篇文章包含不同标准Markdown语法，你可以在任何Markdown编辑器打开以测试其渲染效果。
<ul>
<li>比如说——你。你使用什么方式看到这篇文章，就了解到你所用的软件对Markdown语言的支持情况。如果你通过我的博客打开，那么你看到的就是Hexo渲染后的结果（至少2023年时是这样）。</li>
<li>比如说——我，笔记重度依赖。我需要对比本地编辑器的渲染器与Hexo各类渲染器和插件对Markdown的支持程度，以培养合适的写作习惯，加强核心工作流的可移植性。</li>
</ul>
</li>
</ul>
<p>文章目前可预览的在线版本：</p>
<ul>
<li>Hexo渲染网页：<a href="https://uuanqin.top/p/3c4a82e6/">Markdown渲染测试 | 半方池水半方田 (uuanqin.top)</a>。源文件直接通过Hexo渲染生成的静态网页。</li>
<li>Github仓库： <a href="https://github.com/uuanqin/Markdown-Grammar-Rendering-Test">https://github.com/uuanqin/Markdown-Grammar-Rendering-Test</a> 。源文件的副本，定期与Hexo本地同步。</li>
</ul>
<h2>Markdown标准</h2>
<p>约翰·格鲁伯在2004年创造了Markdown语言，<a href="https://daringfireball.net/projects/markdown/">Daring Fireball: Markdown</a>。格鲁伯认为不应完全标准化：“不同的网站（和人们）有不同的需求。没有一种语法可以让所有人满意。[^satisfy]”</p>
<p>[satisfy]: <a href="https://zh.wikipedia.org/wiki/Markdown">Markdown - 维基百科，自由的百科全书 (wikipedia.org)</a></p>
<p>下文将从Commonmark、GFM为基础分板块进行Markdown渲染测试。<br>
此外，对一些Markdown编辑器语法进行展示。其中，Typora版本为最后一个免费版本（0.11.18），Obsidian版本为1.3.4。</p>
<h1>基础（CommonMark）</h1>
<p>这一部分测试Markdown基础语法，参考自<a href="https://commonmark.org/">CommonMark</a>。这部分内容的成功渲染（除了下面的段落部分）是本文结构不至于散乱的基础（比如上文的标题、超链接、列表等的正确渲染）。</p>
<p>（第一段）这是一个很长很长很长很长的段落。<br>
只有隔一个空行才能分锻，有点像Latex。<br>
在CommonMark语法中这三句话是一长句的。<br>
【提示】在Typora、Obsidian中是换行了，这样做是有好处的。</p>
<p>（第二段）这是一个很长很长很长很长的段落。</p>
<p>与上一段之间隔了一个空行。</p>
<p>（第三段）这是一个很长很长很长很长的段落。<br>
反斜杠也能起到换行的作用。<br>
【提示】Typora、Obsidian不需要这个符号，这样做会很方便。</p>
<h1>一级标题（类 Atx 形式）</h1>
<h2>二级标题（类 Atx 形式）</h2>
<h3>三级标题（类 Atx 形式）</h3>
<h1>一级标题（类 Setext 形式）</h1>
<h2>二级标题（类 Setext 形式）</h2>
<p>【提示】Obsidian支持类 Setext 形式的标题，请在浏览模式下查看。</p>
<p><em>斜体（星号表示）</em>  <em>斜体（下划线表示）</em></p>
<p><strong>粗体（星号表示）</strong> <strong>粗体（下划线表示）</strong></p>
<blockquote>
<p>引言</p>
<blockquote>
<p>二级引言</p>
</blockquote>
<p>引言</p>
</blockquote>
<ul>
<li>无序列表 使用横线</li>
</ul>
<ul>
<li>无序列表 使用星号</li>
</ul>
<ol>
<li>有序列表 使用数字加点</li>
</ol>
<ol start="2">
<li>有序列表 使用数字加右括号</li>
</ol>
<p>【提示】Obsidian中有序列表有区别。</p>
<ul>
<li>网状列表
<ol>
<li>元素1</li>
<li>元素2</li>
</ol>
</li>
<li>网状列表
<ul>
<li>使用横线</li>
</ul>
<ul>
<li>使用星号</li>
</ul>
</li>
</ul>
<p><a href="http://b.org">链接（方括号后加圆括号）</a></p>
<p><a href="http://b.org">带参考的链接1</a> 链接外文字 <a href="http://b.org">带参考链接2</a> 链接外文字</p>
<p><img src="https://commonmark.org/help/images/favicon.png" alt="图片链接"></p>
<p><img src="https://commonmark.org/help/images/favicon.png" alt="图片链接带脚注" title="图片标题"></p>
<p>【提示】Obsidian在浏览模式下正常，在编辑模式有点迷惑，这是由它们的链接特色决定的。</p>
<p>行内代码<code>Inline Code</code>行内代码（单个反引号包裹）</p>
<pre><code># 代码块（三个反引号包裹）
</code></pre>
<pre><code>代码块（四个空格开头）
代码块（紧挨上一行）
</code></pre>
<p>【提示】Obsidian这里的代码块在浏览模式下没有区别</p>
<p>减号式下划线：</p>
<hr>
<p>星号式下划线：</p>
<hr>
<h1>GitHub Flavored Markdown（GFM）</h1>
<p>GitHub Flavored Markdown, often shortened as GFM, is the dialect of Markdown that is currently supported for user content on <a href="http://GitHub.com">GitHub.com</a> and GitHub Enterprise.</p>
<h2>基本格式语法</h2>
<p>这里只介绍<a href="https://docs.github.com/zh/get-started/writing-on-github/getting-started-with-writing-and-formatting-on-github/basic-writing-and-formatting-syntax">基本撰写和格式语法 - GitHub 文档</a>提及的规范。</p>
<p>与CommonMark对比新增了以下语法：</p>
<h4>支持四级标题（类 Atx 形式，井号方式）</h4>
<h5>支持五级标题（类 Atx 形式，井号方式）</h5>
<h6>支持六级标题（类 Atx 形式，井号方式）</h6>
<p><s>删除线（两条波浪线）</s></p>
<p><strong>粗体和嵌入_斜体_</strong>   两个星号内下划线括住。【提示】Obsidian支持内嵌斜体，请在浏览模式打开。</p>
<p><em><strong>全部粗体和斜体（三个星号）</strong></em></p>
<p>使用<sub>下标</sub></p>
<p>使用<sup>上标</sup></p>
<ul>
<li>加号创建的无序列表</li>
</ul>
<p>任务列表展示：</p>
<ul>
<li>[x] 任务列表</li>
<li>[ ] 任务列表</li>
</ul>
<p>表情符号（使用冒号括住） :+1:   :smile:【提示】Obsidian不支持，但是可以直接输入😯</p>
<p>脚注。使用此括号[^11]语法为您的内容[^12]添加脚注。</p>
<p>[^11]: My reference.<br>
[^12]: To add line breaks within a footnote, prefix new lines with 2 spaces.<br>
This is a second line. （然而Typora不支持这种方式换行）</p>
<p>【提示】Obsidian会把脚注自动放到页面后。</p>
<p>支持转义符（反引号）忽略Markdown格式。<br>
以下符号可以转义（<a href="https://daringfireball.net/projects/markdown/syntax">Daring Fireball: Markdown Syntax Documentation</a>）</p>
<p>\   backslash<br>
`   backtick<br>
*   asterisk<br>
_   underscore<br>
{}  curly braces<br>
[]  square brackets<br>
()  parentheses</p>
<p>支持Markdown的隐藏渲染：</p>
<!-- This content will not appear in the rendered Markdown -->
<p>【提示】Typora处理仅仅是标黄，Obsidian支持。</p>
<h2>高级格式</h2>
<p>如果你正在使用Typora预览，建议打开偏好设置调整以支持更多语法。</p>
<h3>表格</h3>
<p>表格末尾的竖线可选。单元格的宽度可以不同，无需在列内准确对齐。 标题行的第一列中必须至少有三个横线。可借助<a href="https://www.tablesgenerator.com/markdown_tables">在线表格生成工具</a>生成表格。</p>
<p>可以在表格中使用格式，例如链接、内联代码块和文本样式。</p>
<table>
<thead>
<tr>
<th>First Header</th>
<th>Second Header</th>
</tr>
</thead>
<tbody>
<tr>
<td>Content Cell</td>
<td>Content <strong>Cell</strong></td>
</tr>
<tr>
<td><a href="https://docs.github.com/zh/get-started/writing-on-github/working-with-advanced-formatting/organizing-information-with-tables">Content Cell</a></td>
<td><em>Content</em> Cell</td>
</tr>
<tr>
<td><code>Content Cell</code></td>
<td><em><strong>Content</strong></em> Cell</td>
</tr>
</tbody>
</table>
<p>可以通过在标题行中连字符的左侧、右侧或两侧添加冒号<code> :</code>，来靠左、靠右或居中对齐列中的文本。</p>
<p>若要包含竖线<code>|</code>作为单元格中的内容，请在竖线前使用<code> \</code></p>
<table>
<thead>
<tr>
<th style="text-align:left">Left-aligned</th>
<th style="text-align:center">Center-aligned</th>
<th style="text-align:right">Right-aligned</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">git status</td>
<td style="text-align:center">git status</td>
<td style="text-align:right">git status</td>
</tr>
<tr>
<td style="text-align:left">git diff</td>
<td style="text-align:center">`</td>
<td style="text-align:right">git diff |</td>
</tr>
</tbody>
</table>
<h3>折叠部分</h3>
<details><summary>CLICK ME</summary>
<p>
<h4>We can hide anything, even code!</h4>
<pre><code class="language-ruby">   puts &quot;Hello World&quot;
</code></pre>
</p>
</details>
<p>【提示】Typora看起来不支持，Obsidian支持。</p>
<h3>代码块</h3>
<p>要在围栏代码块中显示三重倒引号，请将其包在四个倒引号内。</p>
<pre><code>```
Look! You can see my backticks.
```
</code></pre>
<p>支持语法高亮（使用<a href="https://github.com/github-linguist/linguist">github-linguist/linguist: Language Savant. </a>）</p>
<pre><code class="language-python">def main():
	print(&quot;Hello World!&quot;)
</code></pre>
<p>使用代码块在 Markdown 中创建关系图。 GitHub 支持 Mermaid、GeoJSON、TopoJSON 和 ASCII STL 语法。</p>
<p>Mermaid 是一款受 Markdown 启发的工具，可将文本呈现为关系图。 例如，Mermaid 可以呈现流程图、序列图、饼图等。 有关详细信息，请参阅 <a href="https://mermaid-js.github.io/mermaid/#/">Mermaid 文档</a>。如果你的Markdown渲染器支持渲染的话，你应该看到下面流程图。</p>
<pre><code class="language-mermaid">graph TD;
    A--&gt;B;
    A--&gt;C;
    B--&gt;D;
    C--&gt;D;
</code></pre>
<p>可使用 GeoJSON 或 TopoJSON 语法创建交互式地图。 若要创建地图，请使用 <code>geojson</code> 或 <code>topojson</code> 语法标识符在围栏代码块中添加 GeoJSON 或 TopoJSON。如果你的Markdown渲染器支持渲染的话，你应该看到下面两幅图。</p>
<pre><code class="language-geojson">{
  &quot;type&quot;: &quot;FeatureCollection&quot;,
  &quot;features&quot;: [
    {
      &quot;type&quot;: &quot;Feature&quot;,
      &quot;id&quot;: 1,
      &quot;properties&quot;: {
        &quot;ID&quot;: 0
      },
      &quot;geometry&quot;: {
        &quot;type&quot;: &quot;Polygon&quot;,
        &quot;coordinates&quot;: [
          [
              [-90,35],
              [-90,30],
              [-85,30],
              [-85,35],
              [-90,35]
          ]
        ]
      }
    }
  ]
}
</code></pre>
<pre><code class="language-topojson">{
  &quot;type&quot;: &quot;Topology&quot;,
  &quot;transform&quot;: {
    &quot;scale&quot;: [0.0005000500050005, 0.00010001000100010001],
    &quot;translate&quot;: [100, 0]
  },
  &quot;objects&quot;: {
    &quot;example&quot;: {
      &quot;type&quot;: &quot;GeometryCollection&quot;,
      &quot;geometries&quot;: [
        {
          &quot;type&quot;: &quot;Point&quot;,
          &quot;properties&quot;: {&quot;prop0&quot;: &quot;value0&quot;},
          &quot;coordinates&quot;: [4000, 5000]
        },
        {
          &quot;type&quot;: &quot;LineString&quot;,
          &quot;properties&quot;: {&quot;prop0&quot;: &quot;value0&quot;, &quot;prop1&quot;: 0},
          &quot;arcs&quot;: [0]
        },
        {
          &quot;type&quot;: &quot;Polygon&quot;,
          &quot;properties&quot;: {&quot;prop0&quot;: &quot;value0&quot;,
            &quot;prop1&quot;: {&quot;this&quot;: &quot;that&quot;}
          },
          &quot;arcs&quot;: [[1]]
        }
      ]
    }
  },
  &quot;arcs&quot;: [[[4000, 0], [1999, 9999], [2000, -9999], [2000, 9999]],[[0, 0], [0, 9999], [2000, 0], [0, -9999], [-2000, 0]]]
}
</code></pre>
<p>GFM 可以直接在 Markdown 中使用 ASCII STL 语法来创建交互式 3D 模型。 若要显示模型，请使用 <code>stl</code> 语法标识符在围栏代码块中添加 ASCII STL 语法。如果你的Markdown渲染器支持渲染的话，应该看到一个立方体而不是代码块。</p>
<pre><code class="language-stl">solid cube_corner
  facet normal 0.0 -1.0 0.0
    outer loop
      vertex 0.0 0.0 0.0
      vertex 1.0 0.0 0.0
      vertex 0.0 0.0 1.0
    endloop
  endfacet
  facet normal 0.0 0.0 -1.0
    outer loop
      vertex 0.0 0.0 0.0
      vertex 0.0 1.0 0.0
      vertex 1.0 0.0 0.0
    endloop
  endfacet
  facet normal -1.0 0.0 0.0
    outer loop
      vertex 0.0 0.0 0.0
      vertex 0.0 0.0 1.0
      vertex 0.0 1.0 0.0
    endloop
  endfacet
  facet normal 0.577 0.577 0.577
    outer loop
      vertex 1.0 0.0 0.0
      vertex 0.0 1.0 0.0
      vertex 0.0 0.0 1.0
    endloop
  endfacet
endsolid
</code></pre>
<p>【提示】Typora、Obsidian不支持<code>geojson</code> 、 <code>topojson</code> 或 <code>ASCII STL </code>语法。</p>
<h3>数学表达式</h3>
<p>内联表达式：This sentence uses <code>$</code> delimiters to show math inline:  $\sqrt{3x-1}+(1+x)^2$</p>
<p>要以块的形式添加数学表达式，请启动一个新行，并使用两个美元符号 <code>$$</code> 分隔表达式。<br>
$$<br>
\left( \sum_{k=1}^n a_k b_k \right)^2 \leq \left( \sum_{k=1}^n a_k^2 \right) \left( \sum_{k=1}^n b_k^2 \right)<br>
$$<br>
或者，可以使用 <code>math</code> 代码块语法将数学表达式显示为块。 使用此语法时，无需使用 <code>$$</code> 分隔符。【提示】Typora、Obsidian不支持。</p>
<pre><code class="language-math">\sqrt{3}
</code></pre>
<p>表示美元符号：</p>
<ul>
<li>
<p>在数学表达式内，在显式 <code>$</code> 之前添加一个 <code>\</code> 符号。</p>
<ul>
<li>This expression uses <code>\$</code> to display a dollar sign: $\sqrt{$4}$</li>
</ul>
</li>
<li>
<p>在数学表达式之外，但在同一行上，在显式 <code>$</code> 两边使用 span 标记。</p>
<ul>
<li>To split <span>$</span>100 in half, we calculate $100/2$</li>
</ul>
</li>
</ul>
<p>如果你还想学习更多，请看<a href="https://github.github.com/gfm/">GitHub Flavored Markdown Spec</a></p>
<h1>Typora</h1>
<p><strong>Typora</strong> 使用 GFM，其特色在于“WYSIWYG”，其有自己特色的语法渲染。</p>
<p>使用类 Setext 形式(<a href="https://en.wikipedia.org/wiki/Setext">Setext - Wikipedia</a>)创建标题。注意使用Shift+Enter换行。（有线）</p>
<p>使用类 Atx 形式创建标题，一共可以有6个级别。（井号）</p>
<p>使用<code>[TOC]</code>创建目录：</p>
<p>[TOC]</p>
<p>分割线使用三个以上符号（最后一个使用了标签）。符号中间可以插入空格。</p>
<hr>
<hr>
<hr>
<hr>
<hr>
<hr>
<hr />
<p><kbd>Esc</kbd></p>
<p>段落的换行是使用两个以上的空格加回车（在Typora编辑器里是<kbd>Shift</kbd>+<kbd>Enter</kbd>）<br>
或者使用HTML标签<br>进行换行<br>
不要吝惜回车，在一些情况下回车会被吞掉！</p>
<p>代码块内还能高亮：</p>
<pre><code class="language-gfm">Here's an example:

```js
function test() {
  console.log(&quot;notice the blank line before this function?&quot;);
}
```

syntax highlighting:
```ruby
require 'redcarpet'
markdown = Redcarpet.new(&quot;Hello World!&quot;)
puts markdown.to_html
```
</code></pre>
<p>Typora now supports <a href="http://jekyllrb.com/docs/frontmatter/">YAML Front Matter</a>. Input <code>---</code> at the top of the article and then press <code>Return</code> to introduce a metadata block. Alternatively, you can insert a metadata block from the top menu of Typora. 这里就不演示了哈，弄Hexo的喜闻乐见。</p>
<p>支持有标题的Link，试试鼠标停留在上面：<a href="http://example.com/" title="Title">an example</a></p>
<p>Typora allows you to insert URLs as links, wrapped by <code>&lt;</code>brackets<code>&gt;</code>.</p>
<p><code>&lt;i@typora.io&gt;</code> becomes <a href="mailto:i@typora.io">i@typora.io</a>.</p>
<p>Typora will also automatically link standard URLs. e.g: <a href="http://www.google.com">www.google.com</a>. 就是没有任何标记也解析出地址了。</p>
<p>Underline is powered by raw HTML.</p>
<p>支持下划线：<code>&lt;u&gt;下划线&lt;/u&gt;</code> becomes <u>下划线</u>.</p>
<p>支持上下标（在偏好设置中设置）：H~2~O  X^2^</p>
<p>支持高亮：==highlight==</p>
<h1>Obsidian Flavored Markdown（OFM）</h1>
<p>Obsidian 是一个基于 Markdown 进行记录的知识库软件，特点在于支持笔记的双向链接。因此，有自己的独特语法。</p>
<p>Obsidian 努力让 Obsidian 的语法不偏离正统的 Markdown 语法太多。总的来看，Obsidian 的语法大多还是基于 CommonMark，包括了一些 GitHub Flavored Markdown（GFM）和 LaTeX，以及Obsidian<strong>特有的</strong>语法。</p>
<table>
<thead>
<tr>
<th>Syntax</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>[[ ]]</strong></td>
<td><a href="https://help.obsidian.md/Linking+notes+and+files/Internal+links">Internal links</a></td>
</tr>
<tr>
<td><strong>![[ ]]</strong></td>
<td><a href="https://help.obsidian.md/Linking+notes+and+files/Embedding+files">Embedding files</a></td>
</tr>
<tr>
<td><code>%%</code></td>
<td><a href="https://help.obsidian.md/Editing+and+formatting/Basic+formatting+syntax#Comments">Comments</a></td>
</tr>
<tr>
<td><code>&gt; [!note]</code></td>
<td><a href="https://help.obsidian.md/Editing+and+formatting/Callouts">Callouts</a></td>
</tr>
<tr>
<td>提示：为防止其他插件影响，Embedding files的示例含转义字符。</td>
<td></td>
</tr>
</tbody>
</table>
<p>Obsidian doesn't support Markdown syntax or blank lines within HTML blocks.</p>
<p>参考：</p>
<ul>
<li><a href="https://publish.obsidian.md/help-zh/%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/%E6%A0%BC%E5%BC%8F%E5%8C%96%E4%BD%A0%E7%9A%84%E7%AC%94%E8%AE%B0">格式化你的笔记 - Obsidian 中文帮助 - Obsidian Publish</a></li>
<li><a href="https://help.obsidian.md/Editing+and+formatting/Obsidian+Flavored+Markdown">Obsidian Flavored Markdown - Obsidian Help</a></li>
</ul>
<h2>Internal links 内部链接</h2>
<p>通过 <strong>[[ ]]</strong> 来链接库中任意一个文件。</p>
<pre><code class="language-markdown">链接一篇笔记：[[内部链接]]。
</code></pre>
<p>你可以将图片或者音频等附件嵌入到你的笔记中。嵌入文件的语法为 <strong>![[文件名.png]]</strong></p>
<p>你可以通过相同的语法将 PDF 文件嵌入到你的笔记中。除此之外，你可以通过 <strong>![[My File.pdf#page=number]]</strong> 这样的形式直接指定嵌入 PDF 文件的页码。</p>
<p>由于 Markdown 兼容 HTML，因此你可以使用“iframe”将网页嵌入到笔记中。</p>
<blockquote>
<p>这个语法实际受到了 Markdown 相关语法的启发：</p>
<ol>
<li>在 Markdown 中，[Image](link.png) 可以让链接指向图片，而 ![Image](link.png) 能让图片嵌入到当前文档中。</li>
<li>而<a href="https://publish.obsidian.md/help-zh/%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/%E5%86%85%E9%83%A8%E9%93%BE%E6%8E%A5">内部链接</a>的语法则基于以下设定：[[My page]] 是 [My page](My page) 的一个便捷写法（或者是“语法糖”）。</li>
</ol>
<p>综上，我们可以得到 ![[My page]] 应该等效于 ![My page](My page)。</p>
<p>当然，我们也可以使用其他形式的语法。比如，Roam Research 的嵌入语法为 <code>{{embed: ((NODE_ID))}}</code>。我们曾经想过使用 <code>((Page name))</code> 这样的形式来表示嵌入，但后来我们认为还是 <strong>![[Page Name]]</strong> 的形式能更好地与其他语法保持一致，便于记忆，同时也能减少符号的占用，让其他符号能够表示其他含义。</p>
</blockquote>
<p>你可以通过以下语法调整嵌入到笔记中的图片的大小：</p>
<p>Markdown 风格的嵌入，使用 <strong>![AltText|100x100](<a href="https://url/to/image.png%5C">https://url/to/image.png\</a>)</strong> 这样的语法。</p>
<p>一般的嵌入，使用 <strong>![[image.png|100x100]]</strong> 这样的语法。</p>
<p>如果要根据图像的宽高比例进行缩放，请省略高度，如 <strong>![[image.png|100]]</strong>。</p>
<p><a href="https://publish.obsidian.md/help-zh/%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95/%E4%BD%BF%E7%94%A8+obsidian+URI">Obsidian URI</a> 可以让你在其他应用或 Obsidian 的其他库中打开当前库的某篇笔记。</p>
<p>比如，你可以通过以下方式跳转到某个库中的某篇笔记（请注意 <a href="https://publish.obsidian.md/help-zh/%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95/%E4%BD%BF%E7%94%A8+obsidian+URI#%E7%BC%96%E7%A0%81">URI 的编码</a>）：</p>
<pre><code class="language-md">[打开某篇笔记](obsidian://open?path=D:%2Fpath%2Fto%2Ffile.md)
</code></pre>
<p>如果 url 中含有空格的话，空格需要转义为 <code>%20</code>，如：</p>
<pre><code class="language-md">[Export options](Pasted%20image)
</code></pre>
<p>示例：<a href="Pasted%20image">Export options</a></p>
<p>当然，你也可以用 <code>&lt;&gt;</code> 将空格包含起来，如：</p>
<pre><code class="language-md">[Slides Demo](&lt;Slides Demo&gt;)
</code></pre>
<p>示例：<a href="Slides%20Demo">Slides Demo</a></p>
<h2>Comments 注释</h2>
<p>所谓注释，指的是会在编辑模式中显示，但不会在预览模式中显示的内容。使用 <code>%%</code> 可以将内容变为注释。以下为语法：</p>
<pre><code class="language-md">这里是行内注释：%%预览模式下你将看不到这句话%%

这里是跨行注释：
%%
所谓跨行
就是可以有很多行
%%
</code></pre>
<p>以下为示例：</p>
<p>这里是行内注释：%%预览模式下你将看不到这句话%%</p>
<p>这里是跨行注释：<br>
%%<br>
所谓跨行<br>
就是可以有很多行<br>
%%</p>
<h2>标注 Callouts</h2>
<p>在不打断笔记流的情况下使用标注附加内容。</p>
<blockquote>
<p>[!info]<br>
Here's a callout block.<br>
It supports <strong>Markdown</strong>, Wikilinks and embeds!<br>
（这里就不演示后两种了）</p>
</blockquote>
<blockquote>
<p>[!tip] Callouts can have custom titles<br>
Like this one.</p>
</blockquote>
<blockquote>
<p>[!question] Can callouts be nested?</p>
<blockquote>
<p>[!todo] Yes!, they can.</p>
<blockquote>
<p>[!example]  You can even use multiple layers of nesting.</p>
</blockquote>
</blockquote>
</blockquote>
<p>支持以下类型：</p>
<ul>
<li>note</li>
<li>abstract, summary, tldr</li>
<li>info</li>
<li>todo</li>
<li>tip, hint, important</li>
<li>success, check, done</li>
<li>question, help, faq</li>
<li>warning, caution, attention</li>
<li>failure, fail, missing</li>
<li>danger, error</li>
<li>bug</li>
<li>example</li>
<li>quote, cite</li>
</ul>
<blockquote>
<p>[!note]<br>
Lorem ipsum dolor sit amet</p>
</blockquote>
<blockquote>
<p>[!abstract]<br>
Lorem ipsum dolor sit amet</p>
</blockquote>
<blockquote>
<p>[!summary]<br>
Lorem ipsum dolor sit amet</p>
</blockquote>
<blockquote>
<p>[!tldr]<br>
Lorem ipsum dolor sit amet</p>
</blockquote>
<blockquote>
<p>[!info]<br>
Lorem ipsum dolor sit amet</p>
</blockquote>
<blockquote>
<p>[!todo]<br>
Lorem ipsum dolor sit amet</p>
</blockquote>
<blockquote>
<p>[!tip]<br>
Lorem ipsum dolor sit amet</p>
</blockquote>
<blockquote>
<p>[!hint]<br>
Lorem ipsum dolor sit amet</p>
</blockquote>
<blockquote>
<p>[!important]<br>
Lorem ipsum dolor sit amet</p>
</blockquote>
<blockquote>
<p>[!success]<br>
Lorem ipsum dolor sit amet</p>
</blockquote>
<blockquote>
<p>[!check]<br>
Lorem ipsum dolor sit amet</p>
</blockquote>
<blockquote>
<p>[!done]<br>
Lorem ipsum dolor sit amet</p>
</blockquote>
<blockquote>
<p>[!question]<br>
Lorem ipsum dolor sit amet</p>
</blockquote>
<blockquote>
<p>[!help]<br>
Lorem ipsum dolor sit amet</p>
</blockquote>
<blockquote>
<p>[!faq]<br>
Lorem ipsum dolor sit amet</p>
</blockquote>
<blockquote>
<p>[!warning]<br>
Lorem ipsum dolor sit amet</p>
</blockquote>
<blockquote>
<p>[!caution]<br>
Lorem ipsum dolor sit amet</p>
</blockquote>
<blockquote>
<p>[!attention]<br>
Lorem ipsum dolor sit amet</p>
</blockquote>
<blockquote>
<p>[!failure]<br>
Lorem ipsum dolor sit amet</p>
</blockquote>
<blockquote>
<p>[!fail]<br>
Lorem ipsum dolor sit amet</p>
</blockquote>
<blockquote>
<p>[!missing]<br>
Lorem ipsum dolor sit amet</p>
</blockquote>
<blockquote>
<p>[!danger]<br>
Lorem ipsum dolor sit amet</p>
</blockquote>
<blockquote>
<p>[!error]<br>
Lorem ipsum dolor sit amet</p>
</blockquote>
<blockquote>
<p>[!bug]<br>
Lorem ipsum dolor sit amet</p>
</blockquote>
<blockquote>
<p>[!example]<br>
Lorem ipsum dolor sit amet</p>
</blockquote>
<blockquote>
<p>[!quote]<br>
Lorem ipsum dolor sit amet</p>
</blockquote>
<blockquote>
<p>[!cite]<br>
Lorem ipsum dolor sit amet</p>
</blockquote>
<h2>其他</h2>
<h3>图表</h3>
<p>Obsidian 通过 <a href="https://mermaid-js.github.io/">Mermaid</a> 及其所提供的<a href="https://mermaid-js.github.io/mermaid-live-editor">编译器</a>来为用户提供图表的绘制功能。</p>
<h1>Microsoft Learn</h1>
<p>Microsoft Learn 还支持自定义 Markdown 扩展。</p>
<p>例如：警报（备注、提示、重要提示、提醒、警告）</p>
<blockquote>
<p>[!NOTE]<br>
Information the user should notice even if skimming.</p>
</blockquote>
<blockquote>
<p>[!TIP]<br>
Optional information to help a user be more successful.</p>
</blockquote>
<blockquote>
<p>[!IMPORTANT]<br>
Essential information required for user success.</p>
</blockquote>
<blockquote>
<p>[!CAUTION]<br>
Negative potential consequences of an action.</p>
</blockquote>
<blockquote>
<p>[!WARNING]<br>
Dangerous certain consequences of an action.</p>
</blockquote>
<p>其他语法详见文档：<a href="https://learn.microsoft.com/zh-cn/contribute/markdown-reference">Microsoft Learn 的 Markdown 参考 - Contributor guide | Microsoft Learn</a></p>
<p>【提示：与OFM的Callouts语法一致，具体详看OFM】</p>
<h1>附</h1>
<h2>HTML支持情况</h2>
<iframe height='265' scrolling='no' title='Fancy Animated SVG Menu' src='http://codepen.io/jeangontijo/embed/OxVywj/?height=265&theme-id=0&default-tab=css,result&embed-version=2' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'></iframe>
<pre><code>&lt;video src=&quot;xxx.mp4&quot; /&gt;  # 这个放在Hexo会使后文无法显示，故此处以代码块包围
</code></pre>
<p>可以使用普通的<code>&lt;img&gt;</code>标签指定图片的高度与宽度：<br>
<img src="https://commonmark.org/help/images/favicon.png" width="30%"></p>
<h3>一般标签</h3>
<p>不在Markdown涵盖范围之内的标签，都可以直接在文档里面用HTML撰写。</p>
<p>使用<kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>A</kbd>快速打开QQ截屏工具，这里使用了<code>&lt;kbd&gt;</code>标签</p>
<p>这是<sub>下标</sub>   这是<sup>上标</sup>    换行标签<br>换行了</p>
<p>标签：<br>
<em>强调的内容(好像和斜体差不多)</em> [^斜体]   <strong>语气更强(粗体？)</strong>[^加粗]    <code>代码scanf()</code>    <var>变量</var>    <cite>引用</cite></p>
<h3>字体、颜色和大小</h3>
<p><b>粗体文本</b>    <i>斜体文本</i>    <big>大号字体</big>    <small>小号字体</small>    <tt>等宽文本</tt>  <u>下划线</u></p>
<p><font face="黑体">黑体</font>  <font face="微软雅黑">微软雅黑</font>  <font face="STCAIYUN">华文彩云</font>  <font face="华文行楷" >华文行楷</font>  <font face="时尚中黑" >时尚中黑</font>  （我猜你电脑里装有什么字体就能用什么字体）</p>
<p><mark>黄色高亮</mark></p>
<p><font color=#00ffff size=3>#00ffff</font>   <font color=gray size=3>gray色</font>    <font color=#0099ff size=5 face="黑体">#0099ff size=5 黑体</font><br>
<a href='#color'>附录：颜色名列表</a></p>
<h3>折叠段落</h3>
<details><summary>Title</summary>
content
</details>
<h3>设置锚点</h3>
<p><a href='#jump'>点我跳转（Typora下按住Ctrl键点击）</a></p>
<p><a href="#jump_two">点我跳转2</a></p>
<p>这里给出两种方法实现锚点</p>
<p><a name='jump'>跳转到这里</a></p>
<p><span id = "jump_two">跳转到这里2</span></p>
<h3>表格</h3>
<table><tbody>
    <tr>
        <th rowspan="3">我占了三行</th>
        <th><font color="Green">第一列</font></th>
        <th>第二列</th>
        <th>第三列</th>
    </tr>
    <tr>
        <td bgcolor="Tomato">第一列</td>
        <td>第二列</td>
        <td>第三列</td>
    </tr>
    <tr>
        <td>第一列</td>
        <td>第二列</td>
        <td>第三列</td>
    </tr>
</table>  
<h3>段首缩进</h3>
<p>使用特殊占位符，不同占位符所占空白是不一样大的（请在源码模式下查看）：</p>
<p> 或者   表示一个半角的空格<br>
 或者   表示一个全角的空格<br>
 或者   两个全角的空格（用的比较多）<br>
 或者   不断行的空白格</p>
<h3>特殊符号</h3>
<p>©  ™  &amp;  &lt;  &gt;  £ ¥ € ® ± §  X² Y³ ¾ « » 37.2ºC</p>
<h2>Mermaid图示例</h2>
<h3>流程图</h3>
<h4>横向流程图</h4>
<pre><code class="language-mermaid">graph LR
A[方形] --&gt;B(圆角)
    B --&gt; C{条件a}
    C --&gt;|a=1| D[结果1]
    C --&gt;|a=2| E[结果2]
    F[横向流程图]
</code></pre>
<h4>竖向流程图</h4>
<pre><code class="language-mermaid">graph TD
A[方形] --&gt; B(圆角)
    B --&gt; C{条件a}
    C --&gt; |a=1| D[结果1]
    C --&gt; |a=2| E[结果2]
    F[竖向流程图]
</code></pre>
<h3>UML标准时序图</h3>
<pre><code class="language-mermaid">%% 时序图例子,-&gt; 直线，--&gt;虚线，-&gt;&gt;实线箭头
  sequenceDiagram
    participant 张三
    participant 李四
    张三-&gt;王五: 王五你好吗？
    loop 健康检查
        王五-&gt;王五: 与疾病战斗
    end
    Note right of 王五: 合理 食物 &lt;br/&gt;看医生...
    李四--&gt;&gt;张三: 很好!
    王五-&gt;李四: 你怎么样?
    李四--&gt;王五: 很好!
</code></pre>
<h3>甘特图</h3>
<pre><code class="language-mermaid">%% 语法示例
        gantt
        dateFormat  YYYY-MM-DD
        title 软件开发甘特图
        section 设计
        需求                      :done,    des1, 2014-01-06,2014-01-08
        原型                      :active,  des2, 2014-01-09, 3d
        UI设计                     :         des3, after des2, 5d
    未来任务                     :         des4, after des3, 5d
        section 开发
        学习准备理解需求                      :crit, done, 2014-01-06,24h
        设计框架                             :crit, done, after des2, 2d
        开发                                 :crit, active, 3d
        未来任务                              :crit, 5d
        耍                                   :2d
        section 测试
        功能测试                              :active, a1, after des3, 3d
        压力测试                               :after a1  , 20h
        测试报告                               : 48h
</code></pre>
<p>【提示】Obsidian报语法错误。</p>
<h2>sequence图示例</h2>
<p>【提示】Obsidian不支持。</p>
<h3>UML时序图</h3>
<pre><code class="language-sequence">对象A-&gt;对象B: 对象B你好吗?（请求）
Note right of 对象B: 对象B的描述
Note left of 对象A: 对象A的描述(提示)
对象B--&gt;对象A: 我很好(响应)
对象A-&gt;对象B: 你真的好吗？
</code></pre>
<h3>UML标准时序图复杂</h3>
<pre><code class="language-sequence">Title: 标题：复杂使用
对象A-&gt;对象B: 对象B你好吗?（请求）
Note right of 对象B: 对象B的描述
Note left of 对象A: 对象A的描述(提示)
对象B--&gt;对象A: 我很好(响应)
对象B-&gt;小三: 你好吗
小三--&gt;&gt;对象A: 对象B找我了
对象A-&gt;对象B: 你真的好吗？
Note over 小三,对象B: 我们是朋友
participant C
Note right of C: 没人陪我玩
</code></pre>
<h2>flow图</h2>
<p>流程图代码分两块，上面一块是创建你的流程（创建元素），然后隔一行，创建流程的走向(连接元素)。</p>
<ul>
<li>创建流程（元素）：tag=&gt;type: content:&gt;url
<ul>
<li>tag 是流程图中的标签，在第二段连接元素时会用到。名称可以任意，一般为流程的英文缩写和数字的组合。</li>
<li>type 用来确定标签的类型，<code>=&gt;</code>后面表示类型。由于标签的名称可以任意指定，所以要依赖type来确定标签的类型（start、end、operation、subroutine、condition、inputoutput）</li>
<li>content 是流程图文本框中的描述内容，<code>:</code> 后面表示内容，中英文均可。特别注意，<strong>冒号与文本之间一定要有个空格</strong></li>
<li>url是一个连接，与框框中的文本相绑定，<code>:&gt;</code>后面就是对应的 url 链接，点击文本时可以通过链接跳转到 url 指定页面</li>
</ul>
</li>
<li>指向流程(连接元素)：标识（类别）-&gt;下一个标识
<ul>
<li>使用 -&gt; 来连接两个元素</li>
<li>对于condition类型，有yes和no两个分支，如示例中的cond(yes)和cond(no)</li>
<li>每个元素可以制定分支走向，默认向下，也可以用right指向右边，如示例中cond2(yes,right)。</li>
</ul>
</li>
</ul>
<p>【提示】Obsidian不支持。</p>
<h3>标准流程图（横向）</h3>
<pre><code class="language-flow">st=&gt;start: 开始框
op=&gt;operation: 处理框
cond=&gt;condition: 判断框(是或否?)
sub1=&gt;subroutine: 子流程
io=&gt;inputoutput: 输入输出框
e=&gt;end: 结束框
st(right)-&gt;op(right)-&gt;cond
cond(yes)-&gt;io(bottom)-&gt;e
cond(no)-&gt;sub1(right)-&gt;op
</code></pre>
<h3>标准流程图</h3>
<pre><code class="language-flow">st=&gt;start: 开始框
op=&gt;operation: 处理框
cond=&gt;condition: 判断框(是或否?)
sub1=&gt;subroutine: 子流程
io=&gt;inputoutput: 输入输出框
e=&gt;end: 结束框
st-&gt;op-&gt;cond
cond(yes)-&gt;io-&gt;e
cond(no)-&gt;sub1(right)-&gt;op
</code></pre>


                
            </main>

            <footer class="list-content-container">
                

                
                <details class="record-backlinks" open="open">
                    <summary class="menu-title">
                        backlinks
                        <span class="badge">1</span>
                    </summary>

                    <ul class="record-backlinks-list">
                        
                        <li data-target-id="3569112562">
                            <a href="#3569112562">
                                <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                                
                                <span>Hexo 博客适配 Obsidian 新语法</span>
                                <div class="record-links-context hover">
                                    <p>[^gfm]: Markdown 相关语法规范详见<span class="id-context" data-target-id="1011516134">Markdown 渲染测试</span></p>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                
            </footer>
        </article>
        
        <article id="85495977" class="record">
            <header>
                <h1 class="record-title">构建 Obsidian 的 Hexo 写作工作流</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>85495977</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>核心协同</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('Typora');">Typora</button>
                    
                    <button class="btn" onclick="activeTag('Obsidian');">Obsidian</button>
                    
                    <button class="btn" onclick="activeTag('Hexo');">Hexo</button>
                    
                    <button class="btn" onclick="activeTag('Markdown');">Markdown</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>6/1/2023</span>
                </div>
                

                

                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/hexoobsidian-cowork.webp</span>
                </div>
                
                <div class="record-description">
                    <span>description :</span>
                    <span>切换到Obsidian写作的快速指南</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>51890a9</span>
                </div>
                
                <div class="record-top_img">
                    <span>top_img :</span>
                    <span></span>
                </div>
                
            </header>

            <main class="record-content">
                <blockquote>
<p>[!success] 本文已收录至 <a href="https://butterfly.zhheo.com/">Butterfly 主题美化教程</a></p>
</blockquote>
<h1>为什么选择 Obsidian</h1>
<p>放弃 Typora 的理由：</p>
<ul>
<li>Typora 已经收费，目前使用的免费版本已长久不更新，且偶尔出现 Bug。</li>
<li>Typora 适合关注于一个 Markdown 文件，不适合文件之间的链接与知识库管理。对于博客或笔记来说，互相链接将有助于加强内容联系，形成自己的知识体系</li>
<li>插件？没听说过也没用过</li>
</ul>
<p>选择 Obsidian：</p>
<ul>
<li>关注于知识库的整理，有双向链接的特色</li>
<li>Obsidian 对个人用户免费（也有付费方案）并时常维护</li>
<li>有活跃的社区和第三方插件市场</li>
<li>半 WYSIWYG，写文档不至于预览困难</li>
<li>在于博客框架 Hexo 协同工作中有潜力</li>
<li>不影响 Markdown 核心语法的情况下也有很多提高编写效率插件</li>
</ul>
<p>下文将介绍如何无缝把写作工具迁移到 Obsidian 中。</p>
<h1>写作习惯继承及效率提升</h1>
<h2>快捷键——指尖习惯复刻</h2>
<p>一些快捷键先设置好：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230602001347.png" alt="image.png"></p>
<p>Ctrl + num 的快捷键 Obsidian 给了跳转，刚好 Ctrl + Alt + num 的小标题设置快捷键符合主流编辑器的设置。Typora 的快捷键有点反人类。</p>
<h2>文章模板——免写 Font-Matter 或在 Hexo 中敲命令</h2>
<p>Obsidian 新建文章时可以快速使用模板。</p>
<p>打开设置 -&gt;模板，插入模板文件夹位置（巧合的是，Hexo 有专门放模板的地方，scaffolds。不过这个需要自己创建，详情查看这篇文章 <a href="https://hexo.io/zh-cn/docs/writing#%E6%A8%A1%E7%89%88%EF%BC%88Scaffold%EF%BC%89">写作 | Hexo</a></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230601235734.png" alt="image.png"></p>
<p>一般 scaffolds 文件夹包含这三个 Markdown 文件：</p>
<ul>
<li>draft</li>
<li>page</li>
<li>post</li>
</ul>
<p>它们分别对应不同的模板。</p>
<p>post 可以这样写：</p>
<pre><code class="language-markdown">	---
	title: 
	date: {{date}} {{time}}
	tags:
	category:
	cover:
	description:
	top_img:
	---
</code></pre>
<p>安装相关插件后 <code>category</code> 还可以免写，后文将提到。</p>
<p>因此创建新文章的流程就是：</p>
<ol>
<li>新建页面</li>
<li>输入标题</li>
<li>点击 Obsidian 左侧的模板按钮</li>
<li>选择响应的模板即可</li>
</ol>
<p>当然，可以使用 hexo 原生命令。但是由于模板更改可能还需手动修改部分内容。</p>
<h2>图床——和 Typora 图片上传方法一致 易嵌入</h2>
<p>配置好 PicGo 图床后 [^图床配置教程]，安装 Obsidian 第三方插件：<a href="https://github.com/renmu123/obsidian-image-auto-upload-plugin">renmu123/obsidian-image-auto-upload-plugin: auto upload image with picgo (github.com)</a>，记得还要点一下启用插件。</p>
<p>依照说明进行配置 PicGo。然后试着上传图片就行。</p>
<p>[^图床配置教程]: <a href="#3992879191" title="PicGo(app) 配置腾讯云 COS 图床" class="record-link">PicGo(app) 配置腾讯云 COS 图床</a></p>
<h2>文件夹分类——省去手写相关 Font-Matter</h2>
<p>Hexo 中安装这个插件即可：<a href="https://github.com/xu-song/hexo-auto-category">xu-song/hexo-auto-category: Generate categories automatically for each post in Hexo (github.com)</a></p>
<h2>Obsidian 第三方插件——用更少的时间写 Markdown</h2>
<p>以下插件不会对 Markdown 核心语法造成影响、不会引入奇奇怪怪的语句，但它们可以提升你的写作速度，或以更少的时间排版出更好的版面。</p>
<p>使用此插件可以更方便绘制 Markdown 表格（准确来说属于 GFM）：<a href="https://github.com/tgrosinger/advanced-tables-obsidian">tgrosinger/advanced-tables-obsidian: Improved table navigation, formatting, and manipulation in Obsidian.md (github.com)</a> 至少我觉得比 Typora 鼠标点来点去方便</p>
<p>文本规范化插件：</p>
<ul>
<li>中英文之间迅速加空格，满足文字洁癖党：<a href="https://github.com/Natumsol/obsidian-pangu">Natumsol/obsidian-pangu: 为 Obsidian 笔记加上「盘古之白」，排版强迫症者的福音。 </a></li>
<li>比盘古更强大：<a href="https://github.com/platers/obsidian-linter">platers/obsidian-linter: An Obsidian plugin that formats and styles your notes with a focus on configurability and extensibility. (github.com)</a></li>
</ul>
<p>让列表支持鼠标拖动以及键盘顺畅调整：<a href="https://github.com/vslinko/obsidian-outliner">vslinko/obsidian-outliner: Work with your lists like in Workflowy or RoamResearch (github.com)</a></p>
<p>选中文字可直接复制网址：<a href="https://github.com/denolehov/obsidian-url-into-selection">denolehov/obsidian-url-into-selection: Paste URLs into selected text &quot;notion style&quot; (github.com)</a></p>
<h1>Hexo 与 Obsidian 的所见即所得</h1>
<p>其实做到上面的内容后，使用原先 Markdown 语法写作就可以了。在基本的 Markdown 写作之上，我们可能还有更多的语法、样式、功能需求。如果能将 <strong>Obsidian 里看到的</strong>和 <strong>Hexo 博客网页中看到的</strong>基本达成一致，那么我们的写作习惯进行统一，并可将其语法的运用纳入到我们长期的使用习惯中。</p>
<p>也正是因为追求这种统一，我才会 <em>忌讳</em> 使用所谓 Hexo 特有的<strong>标签语法</strong>[^tags]，导致很多功能的实现都有所限制。以下小节将针对这种<strong>一致性</strong>进行努力探索。</p>
<p>[^tags]: <a href="https://hexo.io/zh-cn/docs/tag-plugins">标签插件（Tag Plugins） | Hexo</a>。搞笑的是，我发现 <a href="https://github.com/bmwant/hexo-post-link">部分插件开发者</a> 称其为「Ugly」的 😂</p>
<h2>Hexo 对于 Obsidian Flavored Markdown 的渲染</h2>
<p>如果想将 OFM 运用于 Hexo 中，提示文本丰富性，那么可以试试这篇文章：<a href="#3569112562" title="Hexo 博客适配 Obsidian 新语法" class="record-link">Hexo 博客适配 Obsidian 新语法</a></p>
<h2>Plant UML 支持</h2>
<h3>安装与使用</h3>
<p>语法：</p>
<pre><code>```plantuml
@startuml
Bob -&gt; Alice : hello
Alice -&gt; Wonderland: hello
Wonderland -&gt; next: hello
next -&gt; Last: hello
Last -&gt; next: hello
next -&gt; Wonderland : hello
Wonderland -&gt; Alice : hello
Alice -&gt; Bob: hello
@enduml
```
</code></pre>
<pre><code class="language-plantuml">@startuml
Bob -&gt; Alice : hello
Alice -&gt; Wonderland: hello
Wonderland -&gt; next: hello
next -&gt; Last: hello
Last -&gt; next: hello
next -&gt; Wonderland : hello
Wonderland -&gt; Alice : hello
Alice -&gt; Bob: hello
@enduml
</code></pre>
<p>两端端各自插件实现：</p>
<ul>
<li>Obsidian：在第三方插件市场搜索 PlantUML，项目地址 <a href="https://github.com/joethei/obsidian-plantuml">joethei/obsidian-plantuml: Generate PlantUML Diagrams inside Obsidian.md (github.com)</a></li>
<li>Hexo：下载第三方插件 <a href="https://github.com/miao1007/hexo-filter-plantuml">miao1007/hexo-filter-plantuml: Using PlantUML to generate UML Diagram for hexo (github.com)</a></li>
</ul>
<p>两端插件的部分不同之处：</p>
<table>
<thead>
<tr>
<th></th>
<th>Obsidian</th>
<th>Hexo</th>
</tr>
</thead>
<tbody>
<tr>
<td>语法使用</td>
<td>只支持 Markdown 的代码语法块</td>
<td>支持 Markdown 语法块外还支持标签语法</td>
</tr>
<tr>
<td>PlantUML</td>
<td>不一定需要 <code>@startuml</code> 括住内容</td>
<td>必须使用 <code>@startuml</code></td>
</tr>
</tbody>
</table>
<h3>本地部署</h3>
<p>使用 Hexo 插件 <code>miao1007/hexo-filter-plantuml</code> 需注意，当安装该插件并不做任何配置时，插件需要联网使用 PlantUML 接口，且并不是所有国内的 IP 地址都能成功访问这个接口，这就导致了平时 Hexo 本地部署调试时会出错。</p>
<p>错误例子如：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/%E9%83%A8%E7%BD%B2%E5%A4%B1%E8%B4%A56546565132.webp" alt="部署失败6546565132.png"></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230910155117.webp" alt="image.png"></p>
<p>我的解决方法是将 Plantuml 部署在本地。具体本地部署 Plantuml 的方法详见：<a href="#4272386753" title="本地部署 PlantUML" class="record-link">本地部署 PlantUML</a></p>
<blockquote>
<p>[!warning] 注意<br>
本地使用 PlantUML 的效率相较于使用服务器 API 的效率低</p>
</blockquote>
<p>如果选择了本地部署，记得在配置文件 <code>_config.yml</code> 中新增：</p>
<pre><code class="language-yaml">plantuml:
	# Local or PlantUMLServer.
	render: &quot;Local&quot;

	# &quot;inline&quot;: &lt;svg&gt;xxx&lt;svg/&gt;
	# &quot;inlineUrlEncode&quot;: &lt;img src='data:image/svg+xml;&gt;
	# &quot;inlineBase64&quot;: &lt;img src='data:image/svg+xml;base64&gt;
	# &quot;localLink&quot;: &lt;img src=&quot;/assert/puml/xxxx.svg&quot;&gt;
	link: &quot;inline&quot;

	# where your dot binary
	# GraphvizDotFile: &quot;/usr/local/bin/dot&quot;  # 不需要此项配置
	# where your jar
	PlantJar: &quot;你的plantuml.jar&quot; 路径

	# common options: svg/png
	outputFormat: &quot;svg&quot;

	# class-name for element style. The default style is center-aligned block
	className: &quot;plantuml&quot;
</code></pre>
<p>Obsidian 插件 <code>joethei/obsidian-plantuml</code> 使用本地 jar 包配置方法：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230910153438.webp" alt="image.png"></p>
<h1>本文参考</h1>
<ul>
<li><a href="https://juejin.cn/post/7120189614660255781">Hexo + Obsidian + Git 完美的博客部署与编辑方案 - 掘金 (juejin.cn)</a></li>
</ul>
<ul>
<li><a href="http://ruanyifeng.com/blog/2016/10/npm_scripts.html">ruanyifeng.com/blog/2016/10/npm_scripts.html</a></li>
</ul>


                
            </main>

            <footer class="list-content-container">
                
                <details class="record-links">
                    <summary class="menu-title">
                        links
                        <span class="badge">3</span>
                    </summary>

                    <ul class="record-links-list">
                        
                        <li data-target-id="3569112562">
                            <a href="#3569112562">
                                <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                                
                                <span>Hexo 博客适配 Obsidian 新语法</span>
                                <div class="record-links-context hover">
                                    <p>如果想将 OFM 运用于 Hexo 中，提示文本丰富性，那么可以试试这篇文章：<span class="id-context" data-target-id="3569112562">Hexo 博客适配 Obsidian 新语法</span></p>

                                </div>
                            </a>
                        </li>
                        
                        <li data-target-id="3992879191">
                            <a href="#3992879191">
                                <span class="record-type-point" style="color: var(--n_核心协同);">⬤</span>
                                
                                <span>PicGo(app) 配置腾讯云 COS 图床</span>
                                <div class="record-links-context hover">
                                    <p>[^图床配置教程]: <span class="id-context" data-target-id="3992879191">PicGo(app) 配置腾讯云 COS 图床</span></p>

                                </div>
                            </a>
                        </li>
                        
                        <li data-target-id="4272386753">
                            <a href="#4272386753">
                                <span class="record-type-point" style="color: var(--n_核心协同);">⬤</span>
                                
                                <span>本地部署 PlantUML</span>
                                <div class="record-links-context hover">
                                    <p>我的解决方法是将 Plantuml 部署在本地。具体本地部署 Plantuml 的方法详见：<span class="id-context" data-target-id="4272386753">本地部署 PlantUML</span></p>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                

                
                <details class="record-backlinks" open="open">
                    <summary class="menu-title">
                        backlinks
                        <span class="badge">1</span>
                    </summary>

                    <ul class="record-backlinks-list">
                        
                        <li data-target-id="414962704">
                            <a href="#414962704">
                                <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                                
                                <span>Hexo 博客的写作与装饰</span>
                                <div class="record-links-context hover">
                                    <p>我的工作流：将 CDN 缓存自动刷新加入到博客发布的工作流（Hexo、WordPress）、<span class="id-context" data-target-id="85495977">构建 Obsidian 的 Hexo 写作工作流</span></p>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                
            </footer>
        </article>
        
        <article id="1215492985" class="record">
            <header>
                <h1 class="record-title">装点你的 Butterfly 博客</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>1215492985</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>Hexo</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('Butterfly');">Butterfly</button>
                    
                    <button class="btn" onclick="activeTag('CSS');">CSS</button>
                    
                    <button class="btn" onclick="activeTag('HTML');">HTML</button>
                    
                    <button class="btn" onclick="activeTag('Javascript');">Javascript</button>
                    
                    <button class="btn" onclick="activeTag('RSS');">RSS</button>
                    
                    <button class="btn" onclick="activeTag('Waline');">Waline</button>
                    
                    <button class="btn" onclick="activeTag('iconfont');">iconfont</button>
                    
                    <button class="btn" onclick="activeTag('npm');">npm</button>
                    
                    <button class="btn" onclick="activeTag('Codepen');">Codepen</button>
                    
                    <button class="btn" onclick="activeTag('SQLite');">SQLite</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>6/2/2023</span>
                </div>
                

                

                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/butterflybeautifycover.webp</span>
                </div>
                
                <div class="record-description">
                    <span>description :</span>
                    <span>既然选择了Butterfly主题，那就好好装点一下吧</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>4872f379</span>
                </div>
                
                <div class="record-top_img">
                    <span>top_img :</span>
                    <span></span>
                </div>
                
            </header>

            <main class="record-content">
                <blockquote>
<p>[!Example] 这也许是一篇索引文章<br>
温馨提示，文章包含大量站内站外链接，建议加入收藏夹/集锦以备不时之需。</p>
</blockquote>
<p>本文由原<a href="#414962704" title="Hexo 博客的写作与装饰" class="record-link">Hexo 博客的写作与装饰</a>拆分而来。</p>
<h1>主题升级</h1>
<ul>
<li>主题文件夹拉取最新分支即可。注意查看更新日志以调整主题配置文件。如果有魔改的自己注意合并一下。</li>
<li>参考：<a href="https://butterfly.js.org/posts/21cfbf15/">Butterfly 安裝文檔(一) 快速開始 | Butterfly</a></li>
</ul>
<h1>评论系统的部署</h1>
<p><a href="#1495212389" title="Hexo 框架 Btterfly 主题引入 Waline 评论系统及国内正常访问" class="record-link">Hexo 框架 Btterfly 主题引入 Waline 评论系统及国内正常访问</a></p>
<h1>搜索</h1>
<ul>
<li><a href="https://blog.jersite.gq/post/3cafefd4.html">Algolia 在线搜索使用 | Jer's blog (jersite.gq)</a></li>
<li><a href="https://butterfly.js.org/posts/ceeb73f/#%E6%90%9C%E7%B4%A2">Butterfly 安裝文檔(四) 主題配置-2 | Butterfly</a></li>
<li><a href="https://github.com/LouisBarranqueiro/hexo-algoliasearch">LouisBarranqueiro/hexo-algoliasearch: A plugin to index posts of your Hexo blog on Algolia (github.com)</a></li>
</ul>
<h1>各平台站长管理工具配置</h1>
<p><a href="https://cloud.tencent.com/developer/article/2023058">hexo-butterfly-数据统计相关引入 - 腾讯云开发者社区-腾讯云 (tencent.com)</a></p>
<h1>优雅改</h1>
<p>我定义的优雅改是指仅在主题配置文件<code>inject</code>处添加自定义 css 和 js 文件，不修改主题源码。</p>
<h2>Hexo 博客添加自定义 css 和 js 文件方法</h2>
<ol>
<li>打开主题配置文件（butterfly.yml）</li>
<li>定位搜索 inject</li>
<li>其中 head 是用来引入 css 的。bottom 是用来引入 js 的。（有时候也没有那么严格区分）</li>
</ol>
<p>示例</p>
<pre><code class="language-yaml">inject:
  head:
    - &lt;link rel=&quot;stylesheet&quot; href=&quot;your css&quot;&gt;
  bottom:
    - &lt;script src=&quot;your js&quot;&gt;&lt;/script&gt;
</code></pre>
<p>参考：<a href="https://blog.leonus.cn/2022/custom.html">Hexo 博客添加自定义 css 和 js 文件 | Leonus</a></p>
<h2>自定义滚动条</h2>
<p>引入新的 css 文件，文件内容为：</p>
<pre><code class="language-css">/* 滚动条 */
::-webkit-scrollbar {
    width: 15px;        /* 滚动条的宽度 */
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    background-color: rgba(73, 177, 245, 0.2);
    border-radius: 2em;
  }

  ::-webkit-scrollbar-thumb {
    background-color: #49b1f5;
    background-image: -webkit-linear-gradient(
      45deg,
      rgba(255, 255, 255, 0.4) 25%,
      transparent 25%,
      transparent 50%,
      rgba(255, 255, 255, 0.4) 50%,
      rgba(255, 255, 255, 0.4) 75%,
      transparent 75%,
      transparent
    );
    border-radius: 2em;
  }

  ::-webkit-scrollbar-corner {
    background-color: transparent;
  }

  ::-moz-selection {
    color: #fff;
    background-color: #49b1f5;
  }
</code></pre>
<p>参考：<a href="https://www.cnblogs.com/antmoe/p/12846393.html">Hexo 博客之 butterfly 主题优雅魔改系列（持续更新） - antmoe - 博客园 (cnblogs.com)</a></p>
<h2>使用 iconfont 图标库</h2>
<p>使用之前首先阅读官方说明：<a href="https://butterfly.js.org/posts/4073eda/#iconfont">Butterfly 安裝文檔(六) 進階教程 | Butterfly</a></p>
<p>然后参考这篇文章：<a href="https://www.antmoe.com/posts/80c43671/index.html">Hexo 博客之优雅使用阿里 iconfont 图标 | 小康博客 (antmoe.com)</a></p>
<p>其实可以像我这样实践，我觉得这样更方便：</p>
<pre><code class="language-yaml">inject:
  head:
    # iconfont
    # 放iconfont自己项目的链接，注意，每次iconfont中的项目更新后，连接就会不一样
    - &lt;link rel=&quot;stylesheet&quot; href=&quot;//at.alicdn.com/t/c/yourcsslink.css&quot;&gt;
    # 放自己额外定义的css
    - &lt;link rel=&quot;stylesheet&quot; href=&quot;/css/iconfont_custom.css&quot;&gt;
</code></pre>
<p>当然也可以把图标下载到本地，方法：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230427194929460.png" alt="image-20230427194929460"></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230427195048627.png" alt="image-20230427195048627|450"></p>
<h2>其他优雅改</h2>
<blockquote>
<p>[!success] 以下文章均已收录至 <a href="https://butterfly.zhheo.com/">Butterfly 主题美化教程</a></p>
</blockquote>
<p>自定义侧边栏：<a href="#90746120" title="Butterfly不改动主题源码实现自定义侧边栏" class="record-link">Butterfly不改动主题源码实现自定义侧边栏</a><br>
自定义页脚：<a href="#152796589" title="Butterfly 自定义页脚（不修改主题源码）" class="record-link">Butterfly 自定义页脚（不修改主题源码）</a><br>
夜间模式更改网站图标：<a href="#4033695206" title="Butterfly 夜间模式变换顶部网站图标" class="record-link">Butterfly 夜间模式变换顶部网站图标</a></p>
<h2>Butterfly 问题解决</h2>
<h3>BtterFly 主题不显示封面？</h3>
<p>确保主题配置文件中 cover 的相关配置已经配置正确。</p>
<h3>配置好了但某些文章不显示默认封面？</h3>
<p>如果某些文章没有显示默认封面，试试在 Front-matter 加上 description 字段。</p>


                
            </main>

            <footer class="list-content-container">
                
                <details class="record-links">
                    <summary class="menu-title">
                        links
                        <span class="badge">5</span>
                    </summary>

                    <ul class="record-links-list">
                        
                        <li data-target-id="90746120">
                            <a href="#90746120">
                                <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                                
                                <span>Butterfly不改动主题源码实现自定义侧边栏</span>
                                <div class="record-links-context hover">
                                    <p>自定义侧边栏：<span class="id-context" data-target-id="90746120">Butterfly不改动主题源码实现自定义侧边栏</span><br>
自定义页脚：Butterfly 自定义页脚（不修改主题源码）<br>
夜间模式更改网站图标：Butterfly 夜间模式变换顶部网站图标</p>

                                </div>
                            </a>
                        </li>
                        
                        <li data-target-id="152796589">
                            <a href="#152796589">
                                <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                                
                                <span>Butterfly 自定义页脚（不修改主题源码）</span>
                                <div class="record-links-context hover">
                                    <p>自定义侧边栏：Butterfly不改动主题源码实现自定义侧边栏<br>
自定义页脚：<span class="id-context" data-target-id="152796589">Butterfly 自定义页脚（不修改主题源码）</span><br>
夜间模式更改网站图标：Butterfly 夜间模式变换顶部网站图标</p>

                                </div>
                            </a>
                        </li>
                        
                        <li data-target-id="414962704">
                            <a href="#414962704">
                                <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                                
                                <span>Hexo 博客的写作与装饰</span>
                                <div class="record-links-context hover">
                                    <p>本文由原<span class="id-context" data-target-id="414962704">Hexo 博客的写作与装饰</span>拆分而来。</p>
<h1>主题升级</h1>

                                </div>
                            </a>
                        </li>
                        
                        <li data-target-id="1495212389">
                            <a href="#1495212389">
                                <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                                
                                <span>Hexo 框架 Btterfly 主题引入 Waline 评论系统及国内正常访问</span>
                                <div class="record-links-context hover">
                                    <p><span class="id-context" data-target-id="1495212389">Hexo 框架 Btterfly 主题引入 Waline 评论系统及国内正常访问</span></p>

                                </div>
                            </a>
                        </li>
                        
                        <li data-target-id="4033695206">
                            <a href="#4033695206">
                                <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                                
                                <span>Butterfly 夜间模式变换顶部网站图标</span>
                                <div class="record-links-context hover">
                                    <p>自定义侧边栏：Butterfly不改动主题源码实现自定义侧边栏<br>
自定义页脚：Butterfly 自定义页脚（不修改主题源码）<br>
夜间模式更改网站图标：<span class="id-context" data-target-id="4033695206">Butterfly 夜间模式变换顶部网站图标</span></p>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                

                
                <details class="record-backlinks" open="open">
                    <summary class="menu-title">
                        backlinks
                        <span class="badge">2</span>
                    </summary>

                    <ul class="record-backlinks-list">
                        
                        <li data-target-id="414962704">
                            <a href="#414962704">
                                <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                                
                                <span>Hexo 博客的写作与装饰</span>
                                <div class="record-links-context hover">
                                    <p>详见文章：<span class="id-context" data-target-id="1215492985">装点你的 Butterfly 博客</span></p>

                                </div>
                            </a>
                        </li>
                        
                        <li data-target-id="2065118013">
                            <a href="#2065118013">
                                <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                                
                                <span>国内访问Hexo优化加速-替换jsdelivr的CDN链接</span>
                                <div class="record-links-context hover">
                                    <p>[^hb]: fontawesome 可以考虑更换图标库，请看我之前的文章 <span class="id-context" data-target-id="1215492985">装点你的 Butterfly 博客</span><br>
[^bw]: 处理这个问题前请看我之前的文章：Hexo 框架 Btterfly 主题引入 Waline 评论系统及国内正常访问</p>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                
            </footer>
        </article>
        
        <article id="414962704" class="record">
            <header>
                <h1 class="record-title">Hexo 博客的写作与装饰</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>414962704</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>Hexo</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('Butterfly');">Butterfly</button>
                    
                    <button class="btn" onclick="activeTag('Nginx');">Nginx</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>6/2/2023</span>
                </div>
                

                

                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/hexobutifycover.webp</span>
                </div>
                
                <div class="record-description">
                    <span>description :</span>
                    <span>部署完Hexo，选择一个好的主题进行更加个性化的定制。</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>18bbd410</span>
                </div>
                
            </header>

            <main class="record-content">
                <blockquote>
<p>[!Example] 这也许是一篇索引文章<br>
温馨提示，文章包含大量站内站外链接，建议加入收藏夹/集锦以备不时之需。</p>
</blockquote>
<h1>Hexo 博客基本使用</h1>
<p>请认真研读 <a href="https://hexo.io/zh-cn/docs/">官方文档 | Hexo</a></p>
<p>默认网站图标位置：<code>\&lt;Hexo根目录\&gt;\\themes\\&lt;主题名字&gt;\\source\\img\favicon.png</code></p>
<p>文章永久连接配置：<a href="https://imbhj.com/b6a99401/">Hexo 博客生成永久链接 | Ordis'Blog (imbhj.com)</a></p>
<blockquote>
<p>[!Warning] 建议<br>
强烈建议您马上更改 Hexo 默认的永久链接，否则链接过长会导致一些奇奇怪怪的错误（<a href="https://github.com/overtrue/share.js/issues/127">代码长度溢出 · Issue #127 · overtrue/share.js (github.com)</a>）</p>
</blockquote>
<p>插件地址与使用说明：<a href="https://github.com/Rozbo/hexo-abbrlink">rozbo/hexo-abbrlink: create one and only link for every post for hexo (github.com)</a></p>
<h2>工作流</h2>
<p>我的工作流：<a href="#2958737902" title="将 CDN 缓存自动刷新加入到博客发布的工作流（Hexo、WordPress）" class="record-link">将 CDN 缓存自动刷新加入到博客发布的工作流（Hexo、WordPress）</a>、<a href="#85495977" title="构建 Obsidian 的 Hexo 写作工作流" class="record-link">构建 Obsidian 的 Hexo 写作工作流</a></p>
<p>其他：<a href="https://github.com/lxl80/hexo-deployer-cos-cdn">lxl80/hexo-deployer-cos-cdn: Hexo部署插件，支持将静态博客发布到腾讯云对象存储中，并同步刷新被更新文件的CDN缓存。 (github.com)</a></p>
<h2>404 页面配置</h2>
<p>在 Hexo 项目 Sourse 文件夹下创建 <a href="http://404.md">404.md</a>，编辑这个页面创建自己想要的 404 页。</p>
<p>修改 Nginx 配置。在服务武器编辑配置文件：</p>
<pre><code class="language-sh">vim /etc/nginx/conf.d/default.conf
</code></pre>
<p>把这行取消注释：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230414144414596.png" alt="image-20230414144414596|500"></p>
<p>保存后重启 Nginx 即可。</p>
<h2>使用 Hexo 写作注意</h2>
<p><strong>tag 后的冒号记得加空格</strong>（参考：<a href="https://www.cnblogs.com/tiankx/p/13889074.html">can not read a block mapping entry</a>）</p>
<p>不要在标题开头用 <code>[内容]</code>、在内容里 <code>#</code> 不要与 <code>{</code> 紧挨着：比如 <code>[长文预警]JMeter的安装与使用＆实验中有用的提示（for TJUers）</code></p>
<p>这种标题容易报错，报的还是 tag 的错：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230409165141489.png" alt="image-20230409165141489"></p>
<p>详见：<a href="https://www.jianshu.com/p/1d91c507c1dd">Hexo 踩坑 - 简书 (jianshu.com)</a></p>
<h2>插件推荐</h2>
<h3>功能类</h3>
<ul>
<li>RSS 订阅：<a href="https://dclef.icu/2022/09/24/%E5%9C%A8butterfly%E4%B8%BB%E9%A2%98%E4%B8%AD%E6%B7%BB%E5%8A%A0rss%E8%AE%A2%E9%98%85/">在 butterfly 主题中添加 rss 订阅 | 老猫的博客 (dclef.icu)</a></li>
<li>自动添加分类：<a href="https://github.com/xu-song/hexo-auto-category">xu-song/hexo-auto-category: Generate categories automatically for each post in Hexo (github.com)</a></li>
<li>自动统一 tag：<a href="https://github.com/dailyrandomphoto/hexo-easy-tags-plugin">dailyrandomphoto/hexo-easy-tags-plugin: A Hexo plugin that automatically corrects tag names. (github.com)</a></li>
</ul>
<h3>装饰类</h3>
<ul>
<li>主页的分类/标签磁贴：<a href="https://github.com/Zfour/hexo-magnet">Zfour/hexo-magnet: 基于hexo的magnet插件 (github.com)</a></li>
</ul>
<h2>解锁更多玩法</h2>
<p>换更高级的渲染器：<a href="https://zsyyblog.com/b73ceb85.html">Hexo 多种 Markdown 渲染器对比分析 | 竹山一叶 (zsyyblog.com)</a></p>
<p>部署友链朋友圈：<a href="#2966071784" title="server、sqlite朋友圈部署方案" class="record-link">server、sqlite朋友圈部署方案</a></p>
<p>随机访问一篇文章：<a href="https://blog.leonus.cn/2022/randomPost.html">随机访问一篇文章的实现 | Leonus</a></p>
<p>漂浮物的显示：<a href="#681885666" title="Hexo博客添加漂浮物效果（可定制显示页面）" class="record-link">Hexo博客添加漂浮物效果（可定制显示页面）</a></p>
<p>生成 AI 摘要（付费）：</p>
<ul>
<li><a href="https://blog.zhheo.com/p/ec57d8b2.html">如何让博客支持 AI 摘要，使用 TianliGPT 自动生成文章的 AI 摘要 | 张洪 Heo</a></li>
<li><a href="https://github.com/qxchuckle/Post-Summary-AI">qxchuckle/Post-Summary-AI: 一个较通用的，生成网站内文章摘要，并推荐相关文章的AI (github.com)</a><br>
加入进度条：<a href="#1308325830" title="在你的Hexo博客上加入进度条" class="record-link">在你的Hexo博客上加入进度条</a></li>
</ul>
<h1>BtterFly 主题相关</h1>
<p>详见文章：<a href="#1215492985" title="装点你的 Butterfly 博客" class="record-link">装点你的 Butterfly 博客</a></p>


                
            </main>

            <footer class="list-content-container">
                
                <details class="record-links">
                    <summary class="menu-title">
                        links
                        <span class="badge">6</span>
                    </summary>

                    <ul class="record-links-list">
                        
                        <li data-target-id="85495977">
                            <a href="#85495977">
                                <span class="record-type-point" style="color: var(--n_核心协同);">⬤</span>
                                
                                <span>构建 Obsidian 的 Hexo 写作工作流</span>
                                <div class="record-links-context hover">
                                    <p>我的工作流：将 CDN 缓存自动刷新加入到博客发布的工作流（Hexo、WordPress）、<span class="id-context" data-target-id="85495977">构建 Obsidian 的 Hexo 写作工作流</span></p>

                                </div>
                            </a>
                        </li>
                        
                        <li data-target-id="681885666">
                            <a href="#681885666">
                                <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                                
                                <span>Hexo博客添加漂浮物效果（可定制显示页面）</span>
                                <div class="record-links-context hover">
                                    <p>漂浮物的显示：<span class="id-context" data-target-id="681885666">Hexo博客添加漂浮物效果（可定制显示页面）</span></p>

                                </div>
                            </a>
                        </li>
                        
                        <li data-target-id="1215492985">
                            <a href="#1215492985">
                                <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                                
                                <span>装点你的 Butterfly 博客</span>
                                <div class="record-links-context hover">
                                    <p>详见文章：<span class="id-context" data-target-id="1215492985">装点你的 Butterfly 博客</span></p>

                                </div>
                            </a>
                        </li>
                        
                        <li data-target-id="1308325830">
                            <a href="#1308325830">
                                <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                                
                                <span>在你的Hexo博客上加入进度条</span>
                                <div class="record-links-context hover">
                                    <ul>
<li><a href="https://blog.zhheo.com/p/ec57d8b2.html">如何让博客支持 AI 摘要，使用 TianliGPT 自动生成文章的 AI 摘要 | 张洪 Heo</a></li>
<li><a href="https://github.com/qxchuckle/Post-Summary-AI">qxchuckle/Post-Summary-AI: 一个较通用的，生成网站内文章摘要，并推荐相关文章的AI (github.com)</a><br>
加入进度条：<span class="id-context" data-target-id="1308325830">在你的Hexo博客上加入进度条</span></li>
</ul>
<h1>BtterFly 主题相关</h1>

                                </div>
                            </a>
                        </li>
                        
                        <li data-target-id="2958737902">
                            <a href="#2958737902">
                                <span class="record-type-point" style="color: var(--n_核心协同);">⬤</span>
                                
                                <span>将 CDN 缓存自动刷新加入到博客发布的工作流（Hexo、WordPress）</span>
                                <div class="record-links-context hover">
                                    <p>我的工作流：<span class="id-context" data-target-id="2958737902">将 CDN 缓存自动刷新加入到博客发布的工作流（Hexo、WordPress）</span>、构建 Obsidian 的 Hexo 写作工作流</p>

                                </div>
                            </a>
                        </li>
                        
                        <li data-target-id="2966071784">
                            <a href="#2966071784">
                                <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                                
                                <span>server、sqlite朋友圈部署方案</span>
                                <div class="record-links-context hover">
                                    <p>部署友链朋友圈：<span class="id-context" data-target-id="2966071784">server、sqlite朋友圈部署方案</span></p>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                

                
                <details class="record-backlinks" open="open">
                    <summary class="menu-title">
                        backlinks
                        <span class="badge">1</span>
                    </summary>

                    <ul class="record-backlinks-list">
                        
                        <li data-target-id="1215492985">
                            <a href="#1215492985">
                                <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                                
                                <span>装点你的 Butterfly 博客</span>
                                <div class="record-links-context hover">
                                    <p>本文由原<span class="id-context" data-target-id="414962704">Hexo 博客的写作与装饰</span>拆分而来。</p>
<h1>主题升级</h1>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                
            </footer>
        </article>
        
        <article id="152796589" class="record">
            <header>
                <h1 class="record-title">Butterfly 自定义页脚（不修改主题源码）</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>152796589</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>Hexo</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('CodePen');">CodePen</button>
                    
                    <button class="btn" onclick="activeTag('CSS');">CSS</button>
                    
                    <button class="btn" onclick="activeTag('HTML');">HTML</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>7/10/2023</span>
                </div>
                

                

                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/fffootercover.png</span>
                </div>
                
                <div class="record-description">
                    <span>description :</span>
                    <span>利用CodePen项目美化主题的页脚，不修改主题代码。</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>91b7dad</span>
                </div>
                
                <div class="record-top_img">
                    <span>top_img :</span>
                    <span></span>
                </div>
                
            </header>

            <main class="record-content">
                <blockquote>
<p>[!success] 本文已收录至 <a href="https://butterfly.zhheo.com/">Butterfly 主题美化教程</a></p>
</blockquote>
<p><a href="https://codepen.io/trending">Trending - CodePen</a> 是个好东西，利用里面现成的项目，我们可以尝试更换 Butterfly 主题的页脚。</p>
<p>在官方文档中 <a href="https://butterfly.js.org/posts/4aa8abbe/#%E9%A0%81%E8%85%B3%E8%87%AA%E5%AE%9A%E7%BE%A9%E6%96%87%E6%9C%AC">Butterfly 安裝文檔(三) 主題配置-1 | Butterfly</a>（阅读本文务必先阅读这一部分），给出了自定义页脚的修改方式，但这种方法只适合写写版权信息、备案号这些，不适合高级定制。接下来我将介绍利用 CodePen 项目定制页脚的方法。</p>
<p>本文使用的项目：<a href="https://codepen.io/poojanahelia/pen/Exabvdy">Responsive footer, Responsive footer with social media icons, Attractive responsive footer (codepen.io)</a></p>
<p>项目预览：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230710235028.png" alt="image.png"></p>
<p>移植到本博客后预览：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230710235141.png" alt="image.png"></p>
<h1>基本操作</h1>
<p>把 CodePen 项目中 footer 内的内容填入主题配置文件 custom_text 字段（详看 <a href="https://butterfly.js.org/posts/4aa8abbe/#%E9%A0%81%E8%85%B3%E8%87%AA%E5%AE%9A%E7%BE%A9%E6%96%87%E6%9C%AC">Butterfly 安裝文檔(三) 主題配置-1 | Butterfly</a>）</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230711000055.png" alt="image.png|500"></p>
<p>挑选项目样式内容，复制到新建的 CSS 文件中并将其引入你的主题。Butterfly 主题的方法为在主题配置文件的 inject 部分引入 CSS，如：</p>
<pre><code class="language-yaml">inject:
  head:
    - &lt;link rel=&quot;stylesheet&quot; href=&quot;your css&quot;&gt;
  bottom:
    - &lt;script src=&quot;your js&quot;&gt;&lt;/script&gt;
</code></pre>
<p>下文附我的 CSS 文件更改处。</p>
<h1>CSS 样式修改</h1>
<p>一开始我们想当然地想把项目代码直接写入主题配置文件中 custom_text，但这行不通，原因如下。</p>
<p>观察 Butterfly 渲染后的 HTML 代码，自定义 HTML 嵌入与某些容器中。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230710235719.png" alt="image.png|405"></p>
<p>容器本身的 padding 会导致这样的结果：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230710235846.png" alt="image.png"></p>
<p>我的解决方法是选择相应容器，设置其 <code>padding</code> 为 0。</p>
<pre><code class="language-diff">/* 项目上面的就不要复制过来了 */

-.pg-footer {
+#footer-wrap {
  font-family: 'Roboto', sans-serif;
+ padding: 0;
}

/* 对应的选择器改一下 */
-.footer {
+#footer {
    background-color: #004658;
    color: #fff;
+   padding: 0;
}

/* 后面的照抄 */
.footer-wave-svg {
    ...
}
...
</code></pre>
<h1>夜间模式</h1>
<p>Butterfly 有夜间模式，为了实现更好的波浪效果，建议这里的颜色改一下：</p>
<pre><code class="language-diff">.footer-wave-path {
-    fill: #fffff2;
+    fill: var(--global-bg);
}
</code></pre>
<p><code>var(--global-bg)</code> 是 Butterfly 中页面背景的变量。</p>
<p>预览：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230711005624.png" alt="image.png"></p>
<h1>更换社交图标</h1>
<p>对应着项目 HTML 代码自己替换 SVG 代码更改社交图标。如果你是在 fontawesome 复制过来的话，注意几个地方：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230711001735.png" alt="image.png"></p>
<p>反正跟原来的对上就行。</p>
<h1>按需更改</h1>
<p>关于颜色、内容等其他方面的定制，就自己慢慢摸索咯。</p>
<p>完成了 😁！</p>
<h1>已知问题</h1>
<ul>
<li>[ ] 目前仅适用于<strong>博客背景为默认色</strong>（白天白，夜晚黑）的情况</li>
<li>[ ] 移动端 Edge 打开应用的夜间模式时，页脚波浪顶部有白条 <code>230816</code></li>
</ul>


                
            </main>

            <footer class="list-content-container">
                

                
                <details class="record-backlinks" open="open">
                    <summary class="menu-title">
                        backlinks
                        <span class="badge">1</span>
                    </summary>

                    <ul class="record-backlinks-list">
                        
                        <li data-target-id="1215492985">
                            <a href="#1215492985">
                                <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                                
                                <span>装点你的 Butterfly 博客</span>
                                <div class="record-links-context hover">
                                    <p>自定义侧边栏：Butterfly不改动主题源码实现自定义侧边栏<br>
自定义页脚：<span class="id-context" data-target-id="152796589">Butterfly 自定义页脚（不修改主题源码）</span><br>
夜间模式更改网站图标：Butterfly 夜间模式变换顶部网站图标</p>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                
            </footer>
        </article>
        
        <article id="4033695206" class="record">
            <header>
                <h1 class="record-title">Butterfly 夜间模式变换顶部网站图标</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>4033695206</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>Hexo</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('CSS');">CSS</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>7/11/2023</span>
                </div>
                

                

                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/dncover.webp</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>f06d4de6</span>
                </div>
                
                <div class="record-description">
                    <span>description :</span>
                    <span>使用CSS设定夜间模式时img使用的图片。</span>
                </div>
                
                <div class="record-top_img">
                    <span>top_img :</span>
                    <span></span>
                </div>
                
            </header>

            <main class="record-content">
                <blockquote>
<p>[!success] 本文已收录至 <a href="https://butterfly.zhheo.com/">Butterfly 主题美化教程</a></p>
</blockquote>
<p>Butterfly 主题中提供了夜间模式，夜间模式下，字体颜色、图片亮度等都会有所变化。</p>
<p>Butterfly 主题中没有提供网站 Logo 的夜间模式版本，本文章将给出解决方案。可以直接看实操部分节约你的时间。</p>
<h1>原理</h1>
<p>图标元素 HTML 代码如下：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230711015010.png" alt="image.png"></p>
<p>我们可以通过选择出夜间模式的这个<code>img</code>元素，更改它的图片源即可达到目的。</p>
<h1>实操</h1>
<p>在主题配置文件中，你可能设置了网站的 logo：</p>
<pre><code class="language-yaml">nav:
  logo: https://cdn.gallery.uuanqin.top/img/logo-bc.png
</code></pre>
<p>如果想要在夜间模式下换个 Logo，可以新建 CSS 写入以下内容：</p>
<pre><code class="language-css">[data-theme='dark'] img.site-icon {
    content: url(https://cdn.gallery.uuanqin.top/img/logo-dw.png);
}
</code></pre>
<p>url 里填的是你想在夜间模式显示的 Logo。</p>
<p>将此 CSS 文件 引入主题中。Butterfly 主题的方法为在主题配置文件的 inject 部分引入 CSS，如：</p>
<pre><code class="language-yaml">inject:
  head:
    - &lt;link rel=&quot;stylesheet&quot; href=&quot;your css&quot;&gt;
  bottom:
    - &lt;script src=&quot;your js&quot;&gt;&lt;/script&gt;
</code></pre>
<h1>效果</h1>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230711205253.png" alt="image.png"></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230711205240.png" alt="image.png"></p>
<p>大功告成！</p>
<h1>举一反三</h1>
<p>只要你的 CSS 筛选器定位到图片，就可以进行在夜间模式替换图片。</p>
<p>效果：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230711205050.png" alt="image.png"></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230711205108.png" alt="image.png"></p>
<p>高级多了~😍</p>
<p>此外，理论上讲，利用这一点不管是不是图片，只要被 CSS 选择器选中就可以设置其夜间模式效果。基于此我把与夜间模式相关的调整都放在了 darktheme_modify.css 中，再进行 inject。</p>
<h1>本文参考</h1>
<ul>
<li><a href="https://blog.csdn.net/qq_31279347/article/details/88653807"> css 如何定义 img 的 src_lizhi_ma 的博客-CSDN 博客</a></li>
</ul>


                
            </main>

            <footer class="list-content-container">
                

                
                <details class="record-backlinks" open="open">
                    <summary class="menu-title">
                        backlinks
                        <span class="badge">1</span>
                    </summary>

                    <ul class="record-backlinks-list">
                        
                        <li data-target-id="1215492985">
                            <a href="#1215492985">
                                <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                                
                                <span>装点你的 Butterfly 博客</span>
                                <div class="record-links-context hover">
                                    <p>自定义侧边栏：Butterfly不改动主题源码实现自定义侧边栏<br>
自定义页脚：Butterfly 自定义页脚（不修改主题源码）<br>
夜间模式更改网站图标：<span class="id-context" data-target-id="4033695206">Butterfly 夜间模式变换顶部网站图标</span></p>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                
            </footer>
        </article>
        
        <article id="3015602463" class="record">
            <header>
                <h1 class="record-title">为评论系统增加输入提醒【Waline】</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>3015602463</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>Hexo</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('Waline');">Waline</button>
                    
                    <button class="btn" onclick="activeTag('CSS');">CSS</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>7/11/2023</span>
                </div>
                

                

                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>b3be711f</span>
                </div>
                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/promptcover.webp</span>
                </div>
                
                <div class="record-description">
                    <span>description :</span>
                    <span>通过CSS设置实现信息输入提示。</span>
                </div>
                
                <div class="record-top_img">
                    <span>top_img :</span>
                    <span></span>
                </div>
                
            </header>

            <main class="record-content">
                <blockquote>
<p>[!success] 本文已收录至 <a href="https://butterfly.zhheo.com/">Butterfly 主题美化教程</a></p>
</blockquote>
<p>文章参考自 Leonus 文章<a href="https://blog.leonus.cn/2022/inputAlert.html">给你的评论添加一个输入提醒吧 | Leonus</a>，文章原文的实现方案是针对于<strong>Twikoo</strong>评论系统的。本文以此为灵感摸索出针对<strong>Waline</strong>评论系统的实现方案。</p>
<blockquote>
<p>在这里再次感谢 <a href="https://blog.leonus.cn/">Leonus</a>的优质教程以及对我实践过程中的疑惑解答！❤❤❤</p>
</blockquote>
<h1>效果</h1>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230711234615.png" alt="image.png"></p>
<h1>操作</h1>
<p><strong>Twikoo</strong> 评论系统实现方案参见 Leonus 的文章：<a href="https://blog.leonus.cn/2022/inputAlert.html">给你的评论添加一个输入提醒吧 | Leonus</a>，如有疑问直接与 Leonus 沟通。</p>
<p>下文将介绍 <strong>Waline</strong> 评论系统的实现方案。</p>
<p>引入以下 CSS：</p>
<pre><code class="language-css">/* waline 评论系统关键部分，不然会出现提示框均在同一位置的问题 */

.wl-header {
    overflow: visible;
}
.wl-header-item {
    position: relative;
}

/* end */

.wl-header-item:nth-child(1):before {
    content: '输入QQ号会自动获取昵称和头像🐧';
}

.wl-header-item:nth-child(2):before {
    content: '收到回复将通过的邮箱提醒您📧';
}

.wl-header-item:nth-child(3):before {
    content: '可以通过昵称访问您的网站🔗';
}

.wl-header-item:focus-within::before{
    display: block;
}

/* 主内容区 */
.wl-header-item::before {
    /* 先隐藏起来 */
    display: none;
    /* 绝对定位 */
    position: absolute;
    /* 向上移动60像素 */
    top: -31px;
    /* 文字强制不换行，防止left:50%导致的文字换行 */
    white-space: nowrap;
    /* 圆角 */
    border-radius: 10px;
    /* 距离左边50% */
    left: 50%;
    /* 然后再向左边挪动自身的一半，即可实现居中 */
    transform: translate(-50%);
    /* 填充 */
    padding: 0px 18px;
    background: #669900;
    color: #fff;
}
</code></pre>
<h1>更多</h1>
<p>如果想要实现下图效果，可参见文章<a href="https://blog.leonus.cn/2022/inputAlert.html">给你的评论添加一个输入提醒吧 | Leonus</a></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230711235642.png" alt="image.png"><br>
(图源原文)</p>


                
            </main>

            <footer class="list-content-container">
                

                
                <details class="record-backlinks" open="open">
                    <summary class="menu-title">
                        backlinks
                        <span class="badge">1</span>
                    </summary>

                    <ul class="record-backlinks-list">
                        
                        <li data-target-id="1495212389">
                            <a href="#1495212389">
                                <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                                
                                <span>Hexo 框架 Btterfly 主题引入 Waline 评论系统及国内正常访问</span>
                                <div class="record-links-context hover">
                                    <p>定制自己的 Waline 评论系统<br>
<span class="id-context" data-target-id="3015602463">为评论系统增加输入提醒【Waline】</span></p>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                
            </footer>
        </article>
        
        <article id="2201181434" class="record">
            <header>
                <h1 class="record-title">博客域名解析管理与网站CDN加速域名配置</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>2201181434</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>undefined</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('Nginx');">Nginx</button>
                    
                    <button class="btn" onclick="activeTag('CDN');">CDN</button>
                    
                    <button class="btn" onclick="activeTag('阿里云');">阿里云</button>
                    
                    <button class="btn" onclick="activeTag('腾讯云');">腾讯云</button>
                    
                    <button class="btn" onclick="activeTag('DNS');">DNS</button>
                    
                    <button class="btn" onclick="activeTag('HSTS');">HSTS</button>
                    
                    <button class="btn" onclick="activeTag('HTTP');">HTTP</button>
                    
                    <button class="btn" onclick="activeTag('HTTPS');">HTTPS</button>
                    
                    <button class="btn" onclick="activeTag('SSL');">SSL</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>7/24/2023</span>
                </div>
                

                

                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/%E7%BD%91%E7%AB%99%E9%85%8D%E7%BD%AEcover.png</span>
                </div>
                
                <div class="record-description">
                    <span>description :</span>
                    <span>精解本博客域名配置，建议熟悉CDN、HTTPS配置后参考。</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>83335cfa</span>
                </div>
                
                <div class="record-top_img">
                    <span>top_img :</span>
                    <span></span>
                </div>
                
            </header>

            <main class="record-content">
                <p>今天填了一个一直想填的坑，就是把博客域名的重定向、CDN 回源设置给弄好和捋顺了。以前的做法是www.uuanqin.top和uuanqin.top同时使用，CDN也配置两条域名，但我总感觉不优雅、也不安全。通过学习一些<strong>网络相关知识</strong>，我自己尝试动手实验，绘制了<strong>域名解析流程图</strong>。此外把一些关键的<strong>具体配置分享</strong>出来并简要分析。</p>
<p>镇楼图先放出来：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230724025849.png" alt="image.png"></p>
<p>上图即为本站域名跳转关系，呕心沥血绘制......看着很复杂，实际也不太复杂。这张图体现的配置我还是感觉不太完美，限于目前的知识储备也就这样了，希望路过的大佬们在评论区指点迷津！！</p>
<blockquote>
<p>本文目的在于<strong>分享交流</strong>，所有操作仅供参考。</p>
</blockquote>
<blockquote>
<p>如果你是萌新站长，建议不要直接上手本篇文章内容，先弄明白这几篇文章循序渐进开始：</p>
<ol>
<li>拥有了域名，配置主机 A 记录，直接指向源站：<a href="https://help.aliyun.com/document_detail/29716.html?spm=a2c4g.11186623.0.0.37fc1f12nXmqC1">新手引导 (aliyun.com)</a></li>
<li>使用 CDN 服务，并加速域名：<a href="https://cloud.tencent.com/document/product/228/3149">内容分发网络 CDN 从零开始配置 CDN-快速入门-文档中心-腾讯云 (tencent.com)</a></li>
<li>网站使用 HTTPS：<a href="https://help.aliyun.com/document_detail/28534.html?spm=a2c4g.98728.0.0.4aa6115dQ3KtyS">SSL 证书使用指南 (aliyun.com)</a></li>
</ol>
</blockquote>
<h1>环境</h1>
<p>我的整个博客项目不同服务由不同服务商提供，之所以没选择 All in one 除了想自己边折腾边学习外，还是想让各种服务松耦合起来。</p>
<p>博客使用的服务以及部分软件系统版本如下：</p>
<table>
<thead>
<tr>
<th style="text-align:center">DNS 域名解析</th>
<th style="text-align:center">SSL 证书</th>
<th style="text-align:center">CDN 服务</th>
<th style="text-align:center">云服务器</th>
<th style="text-align:center">Web 服务</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">阿里云</td>
<td style="text-align:center">阿里云</td>
<td style="text-align:center">腾讯云</td>
<td style="text-align:center">阿里云 ECS Linux</td>
<td style="text-align:center">Nginx 1.22.1</td>
</tr>
</tbody>
</table>
<p>不管是阿里云还是腾讯云，相关服务的使用大差不差，本文只是给个思路。</p>
<h1>配置效果与原因</h1>
<p>理想的域名配置效果应该是这样的：</p>
<ol>
<li>用户在地址栏输入www.uuanqin.top时会直接重定向到uuanqin.top，地址栏不显示www地址</li>
<li>所有 http 不安全链接自动指向 https 链接</li>
<li>使用 HSTS 在尽可能保证安全的同时减少重定向次数</li>
<li>精简 CDN 回源配置</li>
</ol>
<p>如果想直接看操作过程的跳下一节，想看原因的请继续往下阅读。</p>
<h2>301 重定向的优点（www 重定向到不带 www 的地址）</h2>
<p>你会发现互联网上一些网站的输入 www 开头网址跳转后，地址栏 www 会消失（或相反：不输 www 反而跳到显示 www，例如 <a href="http://baidu.com">baidu.com</a>）。它们都使用了一种非常重要的「自动转向」技术——301 重定向。</p>
<p>301 重定向（301 Move Permanently），指<strong>页面永久性转移</strong>，表示为资源或页面永久性地转移到了另一个位置。301 是 HTTP 协议中的一种<strong>状态码</strong>，当用户或搜索引擎向服务器发出浏览请求时，服务器返回的 HTTP 数据流中头信息（header）中包含状态码 301 ，表示该资源已经永久改变了位置。</p>
<p>过程如图：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230724020428.png" alt="image.png"></p>
<p>利用 301 重定向设置网站别名有利于网站首选域的确定，对于同一资源页面多条路径的 301 重定向有助于 URL 权重的集中，利于网站 SEO。</p>
<p>302 重定向（302 Move Temporarily），指页面<strong>暂时性转移</strong>，表示资源或页面暂时转移到另一个位置，常被用作网址劫持，容易导致网站降权，严重时网站会被封掉，不推荐使用。</p>
<p>搜索引擎是这样对待两种重定向的：</p>
<table>
<thead>
<tr>
<th style="text-align:center">重定向方式</th>
<th style="text-align:center">搜索引擎抓取操作</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">301 页面永久性转移</td>
<td style="text-align:center">抓取新内容的同时也将旧的网址替换成重定向之后的网址</td>
</tr>
<tr>
<td style="text-align:center">302 页面暂时性转移</td>
<td style="text-align:center">抓取新的内容而保存旧的网址并认为新的网址只是暂时的</td>
</tr>
</tbody>
</table>
<h2>HTTP 跳转到 HTTPS</h2>
<p>HTTP 协议也就是超文本传输协议，是一种使用<strong>明文数据</strong>传输的网络协议，不提供任何方式的数据加密。如果攻击者截取了 Web 浏览器和网站服务器之间的传输报文，就可以直接读懂其中的信息。</p>
<p>为了数据传输的安全，另一种协议 HTTPS（安全套接字层超文本传输协议）诞生。HTTPS 在 HTTP 的基础上加入了 SSL/TLS 协议，SSL/TLS 依靠证书来验证服务器的身份，并为浏览器和服务器之间的通信加密。</p>
<p>HTTP 和 HTTPS 使用的是完全不同的连接方式，同时使用的端口也不同，网络模型工作层不同：</p>
<table>
<thead>
<tr>
<th style="text-align:center">协议</th>
<th style="text-align:center">传输方式</th>
<th style="text-align:center">端口</th>
<th style="text-align:center">工作层</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">HTTP 超文本传输协议</td>
<td style="text-align:center">明文传输</td>
<td style="text-align:center">80</td>
<td style="text-align:center">应用层</td>
</tr>
<tr>
<td style="text-align:center">HTTPS 安全套接字层超文本传输协议</td>
<td style="text-align:center">SSL/TLS 协议加密</td>
<td style="text-align:center">443</td>
<td style="text-align:center">传输层</td>
</tr>
</tbody>
</table>
<p>HTTPS 有利于搜索排名的提升。百度和谷歌两大搜索引擎都已经明确表示，HTTPS 网站将会作为搜索排名的一个重要权重指标。也就是说 HTTPS 网站比起 HTTP 网站在搜索排名中更有优势。</p>
<h2>为什么使用 CDN？</h2>
<p>当用户直接访问源站中的静态内容时，可能面临的体验问题：</p>
<ul>
<li>客户离服务器越远，访问速度越慢。</li>
<li>客户数量越多，网络带宽费用越高。</li>
<li>跨境用户访问体验较差。</li>
</ul>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230724022324.png" alt="image.png"></p>
<p>CDN 如何改善您的网络体验：</p>
<ul>
<li>CDN 缓存内容后，用户仅需要访问就近的 CDN 节点即可获取静态内容。</li>
<li>缓解源站带宽压力，网络费用更低。</li>
<li>分布全球的跨境节点提升跨境访问体验。</li>
</ul>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230724022332.png" alt="image.png"></p>
<h2>HSTS 是什么？</h2>
<p>上文提到 HTTPS 可以提高安全性，是“更加安全的 HTTP”，但 HTTPS 提供服务也不是安全的。</p>
<p>最初网站是通过 HTTP 协议提供服务，为了安全起见，网站升级为 HTTPS 协议，可是当用户在浏览器中输入网址时，例如 www.uuanqin.top ，而不是输入完整的 www.uuanqin.top ，浏览器会向网站<strong>发起一次 HTTP 请求</strong>，这时浏览器获取到一个重定向到 HTTPS 的请求（就像上文我们说的 301 重定向），然后再使用 HTTPS 协议通信。在这个过程中，我们使用了一次明文的 HTTP 请求和重定向，而这个过程很容易被攻击者利用，攻击者可以以中间人的方式劫持这次请求，从而进行后续的攻击，例如窃听数据，篡改请求和响应，跳转到钓鱼网站等。</p>
<p>为了避免这个问题，我们希望<strong>浏览器</strong>做到：当用户输入网址时（不带 https:// ）将其转换成 HTTPS 请求，从而绕过明文的 HTTP 请求和重定向。我们使用 HSTS 可以告诉浏览器这个网站是否是使用的 HTTPS。</p>
<p>HSTS 的全称是 HTTP Strict-Transport-Security，它是一个 Web 安全策略机制。HSTS 的核心是<strong>HTTP 响应头</strong>（HTTP Response Header），它告诉浏览器在接下来的一段时间，这个域名只能通过 HTTPS 进行访问，如果该域名在浏览器中出现不安全访问，HSTS 会强制用户的访问。</p>
<p>HSTS Header 中可以设置其过期时间，比如 1 年。注意如果网站 SSL 证书出现问题，那么用户在一年的时间里都没法正常访问你的网站了，当然，除非用户清除了浏览器缓存。</p>
<p>HSTS 也并不安全。假设浏览器中没有该域名的 HSTS 信息时，用户第一次访问该网站时，依然需要使用明文的 HTTP 请求和重定向，解决方法是 Preload List，感兴趣的同学可以自己搜索，这里就不再赘述。</p>
<h1>网址转换过程</h1>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230724025849.png" alt="image.png"></p>
<p>过程图解析：</p>
<table>
<thead>
<tr>
<th style="text-align:center">浏览器有无 HSTS 缓存</th>
<th>用户在地址栏输入</th>
<th>路径</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">❌</td>
<td><a href="http://uuanqin.top">http://uuanqin.top</a></td>
<td>腾讯云 CDN 将其重定向至 HTTPS 再访问 CDN 边缘节点，同时浏览器存储 HSTS 缓存</td>
</tr>
<tr>
<td style="text-align:center">✅</td>
<td><a href="http://uuanqin.top">http://uuanqin.top</a></td>
<td>浏览器直接转换成 HTTPS 访问 CDN</td>
</tr>
<tr>
<td style="text-align:center">-</td>
<td>http<strong>s</strong>: <a href="//uuanqin.top">//uuanqin.top</a></td>
<td>直接访问 CDN</td>
</tr>
<tr>
<td style="text-align:center">❌</td>
<td>http:// <strong>www.</strong> uuanqin.top</td>
<td>直接访问到服务器主机，Nginx 重定向至 <a href="https://uuanqin.top">https://uuanqin.top</a> 进行访问。过程中浏览器会存储 HSTS 缓存</td>
</tr>
<tr>
<td style="text-align:center">✅</td>
<td>http:// <strong>www.</strong> uuanqin.top</td>
<td>浏览器直接转换成 HTTPS，并直接访问到服务器主机，Nginx 重定向至 <a href="https://uuanqin.top">https://uuanqin.top</a> 进行访问</td>
</tr>
<tr>
<td style="text-align:center">-</td>
<td>http<strong>s</strong>: // <strong>www.</strong> uuanqin.top</td>
<td>直接访问到服务器主机，Nginx 重定向至 <a href="https://uuanqin.top">https://uuanqin.top</a> 进行访问</td>
</tr>
</tbody>
</table>
<p>其中 uuanqin.top 为 CDN 加速域名。通常第一次访问时没有 HSTS 缓存。</p>
<blockquote>
<p>[!example] Q&amp;A<br>
<strong>为什么不在 CDN 同时设置两个加速域名？</strong></p>
<p>很长一段时间以来一直都是这样设置，但是我觉得每次刷新都要同时刷新两个域名很不优雅，且耗费更多回源流量。此外还无法设置 301 重定向，造成 www 与不含 www 的域名同时存在。</p>
<p>当然，流程图这种方式可能会暴露公网 IP，这是我认为本篇配置需要改变的原因。</p>
<p><strong>为什么 www 域名不使用 CNAME 指向？</strong></p>
<p>CNAME 不能达到“用户浏览器只显示无 www 网址”的目的。<s>（虽然这点好像不太重要，但我总是有这个执念）</s></p>
</blockquote>
<h1>操作</h1>
<p>作为新站长，一口气配置正确是不可能的，本文开头给出了循序渐进的配置参考，每一步都做正确了，配置才能逐渐成型。</p>
<p>我们可以将上一小节的目标简要拆解成以下三个配置任务：<br>
a. 用户输入<a href="http://uuanqin.xn--top-bk2ey43dwl9dofc990a">http://uuanqin.top必须跳转到</a> https: <a href="//uuanqin.top">//uuanqin.top</a><br>
b. 用户输入 http://<strong>www</strong>.uuanqin.top 必须跳转到 https: <a href="//uuanqin.top">//uuanqin.top</a><br>
c. 用户输入 http<strong>s</strong>: //<strong>www</strong>.uuanqin.top 必须跳转到 https: <a href="//uuanqin.top">//uuanqin.top</a></p>
<h2>DNS 解析配置</h2>
<p>DNS 解析设置了这两条记录：</p>
<table>
<thead>
<tr>
<th>主机记录</th>
<th>记录类型</th>
<th>记录值</th>
</tr>
</thead>
<tbody>
<tr>
<td>@</td>
<td>A</td>
<td>服务器 IP 地址</td>
</tr>
<tr>
<td>www</td>
<td>CNAME</td>
<td>CDN 结点地址</td>
</tr>
</tbody>
</table>
<p>CNAME 记录的配置详看 CDN 中的要求。</p>
<h2>CDN 加速设置</h2>
<p>我假设你已经尝试过 CDN 了，你应该懂得啥是加速域名了吧。CDN 我只设置一个加速域名 uuanqin.top</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230724170143.png" alt="image.png"></p>
<p>在 HTTPS 设置中开启 301 强制跳转和 HSTS：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230724170240.png" alt="image.png"></p>
<p>到此则完成了<strong>任务 a.</strong></p>
<h2>Nginx 配置</h2>
<p>打开 Nginx 的配置文件（不同版本的 Nginx 配置文件路径不太一样，1.22.1 的在/etc/nginx/conf.d/default.conf 中）</p>
<p>处理 CDN 在进行源站回源时的请求：</p>
<pre><code class="language-conf">server {
     #HTTPS的默认访问端口443。
     #如果未在此处配置HTTPS的默认访问端口，可能会造成Nginx无法启动。
     listen 443 ssl;

     #填写证书绑定的域名
     server_name  localhost;

    #access_log  /var/log/nginx/host.access.log  main;

    location / {
        root   /var/www/uuanqin.top;
        index  index.html index.htm;
    }
    #404页面配置，别忘记了
    error_page  404              /404.html;

     #填写证书文件名称
     ssl_certificate conf.d/cert/www.uuanqin.top.pem;
     #填写证书私钥文件名称
     ssl_certificate_key conf.d/cert/www.uuanqin.top.key;

     ssl_session_cache shared:SSL:1m;
     ssl_session_timeout 5m;

     #默认加密套件
     ssl_ciphers HIGH:!aNULL:!MD5;

     #自定义设置使用的TLS协议的类型以及加密套件（以下为配置示例，请您自行评估是否需要配置）
     #TLS协议版本越高，HTTPS通信的安全性越高，但是相较于低版本TLS协议，高版本TLS协议对浏览器的兼容性较差。
     #ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;
     #ssl_protocols TLSv1.1 TLSv1.2 TLSv1.3;

     #表示优先使用服务端加密套件。默认开启
     ssl_prefer_server_ciphers on;
}
</code></pre>
<p>将 http<strong>s</strong>: //<strong>www.</strong> uuanqin.top 重定向到 http<strong>s</strong>: <a href="//uuanqin.top">//uuanqin.top</a>，完成<strong>任务 c.</strong>：</p>
<pre><code class="language-conf">server {
     #HTTPS的默认访问端口443。
     #如果未在此处配置HTTPS的默认访问端口，可能会造成Nginx无法启动。
     listen 443 ssl;

     #填写证书绑定的域名
     server_name www.uuanqin.top;

     rewrite ^(.*) https://uuanqin.top$1 permanent;

     #填写证书文件名称
     ssl_certificate conf.d/cert/www.uuanqin.top.pem;
     #填写证书私钥文件名称
     ssl_certificate_key conf.d/cert/www.uuanqin.top.key;

     ssl_session_cache shared:SSL:1m;
     ssl_session_timeout 5m;

     #默认加密套件
     ssl_ciphers HIGH:!aNULL:!MD5;

     #自定义设置使用的TLS协议的类型以及加密套件（以下为配置示例，请您自行评估是否需要配置）
     #TLS协议版本越高，HTTPS通信的安全性越高，但是相较于低版本TLS协议，高版本TLS协议对浏览器的兼容性较差。
     #ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;
     #ssl_protocols TLSv1.1 TLSv1.2 TLSv1.3;

     #表示优先使用服务端加密套件。默认开启
     ssl_prefer_server_ciphers on;

    #HSTS配置
    add_header Strict-Transport-Security &quot;max-age=3001&quot;;
}
</code></pre>
<p>其中 301 重定向关键：<code>rewrite ^(.*) https://uuanqin.top$1 permanent;</code></p>
<p>HSTS 配置：<code>add_header Strict-Transport-Security &quot;max-age=3001&quot;;</code>，解释：</p>
<ul>
<li>添加一个名为 <code>Strict-Transport-Security</code> 的 HTTP 响应头，并设置了 HSTS 的相关选项</li>
<li><code>max-age</code>是必选参数，是一个以秒为单位的数值，它代表着 HSTS Header 的过期时间</li>
<li><code>includeSubDomains</code>是可选参数，如果包含它，则意味着当前域名及其子域名均开启 HSTS 保护</li>
<li><code>preload</code>是可选参数，只有当你申请将自己的域名加入到浏览器内置列表的时候才需要使用到，指示浏览器将网站添加到 HSTS 预加载列表中，以便所有浏览器都将始终使用 HTTPS 与网站建立连接。</li>
</ul>
<p>将 http: //<strong>www.</strong> uuanqin.top 重定向到 http<strong>s</strong>: <a href="//uuanqin.top">//uuanqin.top</a>，完成<strong>任务 b.</strong>。</p>
<pre><code class="language-conf"># 首次访问
server {
    listen 80;
    #填写证书绑定的域名
    server_name www.uuanqin.top;

    #将所有HTTP请求通过rewrite指令重定向到HTTPS。
    rewrite ^(.*) https://uuanqin.top$1 permanent;
}
</code></pre>
<h1>其他操作提示</h1>
<h2>清除浏览器（Chrome、Edge）的 HSTS 307 缓存</h2>
<p>配置 HSTS 后我们可以打开浏览器开发者工具，监视网络中包发送情况即可。有时候我们也需要清除 HSTS 的缓存。</p>
<p><strong>Chrome 浏览器</strong>打开 chrome://net-internals/#hsts （<strong>Edge 浏览器</strong>直接点这个链接也没问题，它会自动重定向）</p>
<p>先在 <strong>Query HSTS/PKP domain</strong> 查你被 307 Internal Redirect 的域名</p>
<ul>
<li>如果是 Not Found，这个就不是你要的答案</li>
<li>如果有內容，如下图，那就到 Delete domain security policies 输入你被 307 Internal Redirect 的网址，然后 Delete 它。</li>
</ul>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230724035022.png" alt="image.png"></p>
<p>现在你能使用 HTTP 访问该网址了。</p>
<h1>Nginx 安装配置</h1>
<p>可参考这篇文章：<a href="#107080905" title="Nginx 的安装与配置" class="record-link">Nginx 的安装与配置</a></p>
<h2>百度站长</h2>
<p>弄好之后可以在百度站长弄个 HTTPS 认证，测试自己的成果。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230724224936.png" alt="image.png"></p>
<h1>后记</h1>
<p>网站的图床也可以自定义域名和 HTTPS 等设置。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230824094234.png" alt="image.png"></p>
<h1>本文参考</h1>
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/558171809#:~:text=%E5%93%AA%E4%BA%9B%E6%83%85%E5%86%B5%E9%9C%80%E8%A6%81%E5%81%9A301%E9%87%8D%E5%AE%9A%E5%90%91%EF%BC%9F%20%E7%BD%91%E9%A1%B5%E5%BC%80%E5%8F%91%E8%BF%87%E7%A8%8B%E4%B8%AD%EF%BC%8C%E6%97%B6%E5%B8%B8%E4%BC%9A%E9%81%87%E5%88%B0%E7%BD%91%E7%AB%99%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84%E7%9A%84%E8%B0%83%E6%95%B4%EF%BC%8C%E5%B0%86%E9%A1%B5%E9%9D%A2%E8%BD%AC%E7%A7%BB%E5%88%B0%E4%B8%80%E4%B8%AA%E6%96%B0%E5%9C%B0%E5%9D%80%EF%BC%9B%E7%BD%91%E9%A1%B5%E6%89%A9%E5%B1%95%E5%90%8D%E7%9A%84%E6%94%B9%E5%8F%98%EF%BC%8C%E8%BF%99%E4%BA%9B%E5%8F%98%E5%8C%96%E9%83%BD%E4%BC%9A%E5%AF%BC%E8%87%B4%E7%BD%91%E9%A1%B5%E5%9C%B0%E5%9D%80%E5%8F%91%E7%94%9F%E6%94%B9%E5%8F%98%EF%BC%8C%E6%AD%A4%E6%97%B6%E7%94%A8%E6%88%B7%E6%94%B6%E8%97%8F%E5%A4%B9%E5%92%8C%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E7%9A%84%E6%97%A7%E5%9C%B0%E5%9D%80%E6%98%AF%E4%B8%80%E4%B8%AA%E9%94%99%E8%AF%AF%E7%9A%84%E5%9C%B0%E5%9D%80%EF%BC%8C%E8%AE%BF%E9%97%AE%E4%B9%8B%E5%90%8E%E4%BC%9A%E5%87%BA%E7%8E%B0404%E9%A1%B5%E9%9D%A2%EF%BC%8C%E7%9B%B4%E6%8E%A5%E5%AF%BC%E8%87%B4%E7%BD%91%E7%AB%99%E6%B5%81%E9%87%8F%E7%9A%84%E6%8D%9F%E5%A4%B1%E3%80%82%20%E6%88%96%E8%80%85%E6%98%AF%E6%88%91%E4%BB%AC%E9%9C%80%E8%A6%81%E5%A4%9A%E4%B8%AA%E5%9F%9F%E5%90%8D%E8%B7%B3%E8%BD%AC%E8%87%B3%E5%90%8C%E4%B8%80%E4%B8%AA%E5%9F%9F%E5%90%8D%EF%BC%8C%E4%BE%8B%E5%A6%82%E6%9C%AC%E7%AB%99%E4%B8%BB%E7%AB%99%E7%82%B9%E5%9F%9F%E5%90%8D%E4%B8%BA%20www.conimi.com%20%EF%BC%8C%E8%80%8C%E8%BF%98%E6%9C%89%E4%B8%80%E4%B8%AA%E5%9F%9F%E5%90%8D%20www.nico.cc%20%EF%BC%8C%E7%94%B1%E4%BA%8E%E5%AF%B9%E8%AF%A5%E5%9F%9F%E5%90%8D%E8%AE%BE%E7%BD%AE%E4%BA%86301%E9%87%8D%E5%AE%9A%E5%90%91%EF%BC%8C%E5%BD%93%E8%BE%93%E5%85%A5,www.nico.cc%20%E6%97%B6%EF%BC%8C%E8%87%AA%E5%8A%A8%E8%B7%B3%E8%BD%AC%E8%87%B3%20www.conimi.com%20%E3%80%82%20%E4%B8%89.%20301%E9%87%8D%E5%AE%9A%E5%90%91%E6%9C%89%E4%BB%80%E4%B9%88%E4%BC%98%E7%82%B9%EF%BC%9F%20%E6%9C%89%E5%88%A9%E4%BA%8E%E7%BD%91%E7%AB%99%E9%A6%96%E9%80%89%E5%9F%9F%E7%9A%84%E7%A1%AE%E5%AE%9A%EF%BC%8C%E5%AF%B9%E4%BA%8E%E5%90%8C%E4%B8%80%E8%B5%84%E6%BA%90%E9%A1%B5%E9%9D%A2%E5%A4%9A%E6%9D%A1%E8%B7%AF%E5%BE%84%E7%9A%84301%E9%87%8D%E5%AE%9A%E5%90%91%E6%9C%89%E5%8A%A9%E4%BA%8EURL%E6%9D%83%E9%87%8D%E7%9A%84%E9%9B%86%E4%B8%AD%E3%80%82">什么是 301 和 302 重定向，都有哪些用途？ - 知乎 (zhihu.com)</a></li>
<li><a href="https://cloud.tencent.com/developer/article/1762070">搞懂 HTTP 重定向 - 如何优雅地使用 301-腾讯云开发者社区-腾讯云 (tencent.com)</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/151764515">HTTP 和 HTTPS 有什么区别？ - 知乎 (zhihu.com)</a></li>
<li><a href="https://cloud.tencent.com/document/product/228/43827">内容分发网络 CDN 新手指引-文档中心-腾讯云 (tencent.com)</a></li>
<li><a href="https://xinshouzhanzhang.com/hsts.html">HSTS 详解原理及配置 HTTP 到 HTTPS 再到 HSTS - 新手站长网 (xinshouzhanzhang.com)</a></li>
<li><a href="https://segmentfault.com/a/1190000019745269">清除 chrome 的 HSTS 307 缓存 - 前端小记 - SegmentFault 思否</a></li>
<li><a href="https://cloud.tencent.com/developer/article/2301990">如何在 Nginx 中启用 HSTS？-腾讯云开发者社区-腾讯云 (tencent.com)</a></li>
<li><a href="https://cloud.tencent.com/developer/article/1852437">Nginx 环境开启 ssl 后强制 https 301 全部指向 www 的方法-腾讯云开发者社区-腾讯云 (tencent.com)</a></li>
</ul>


                
            </main>

            <footer class="list-content-container">
                
                <details class="record-links">
                    <summary class="menu-title">
                        links
                        <span class="badge">1</span>
                    </summary>

                    <ul class="record-links-list">
                        
                        <li data-target-id="107080905">
                            <a href="#107080905">
                                <span class="record-type-point" style="color: var(--n_undefined);">⬤</span>
                                
                                <span>Nginx 的安装与配置</span>
                                <div class="record-links-context hover">
                                    <p>可参考这篇文章：<span class="id-context" data-target-id="107080905">Nginx 的安装与配置</span></p>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                

                
                <details class="record-backlinks" open="open">
                    <summary class="menu-title">
                        backlinks
                        <span class="badge">3</span>
                    </summary>

                    <ul class="record-backlinks-list">
                        
                        <li data-target-id="1867823418">
                            <a href="#1867823418">
                                <span class="record-type-point" style="color: var(--n_undefined);">⬤</span>
                                
                                <span>Linux服务器添加SSL证书</span>
                                <div class="record-links-context hover">
                                    <blockquote>
<p>文章推荐：HTTPS 配置成功后不要错过这篇文章：<span class="id-context" data-target-id="2201181434">博客域名解析管理与网站CDN加速域名配置</span></p>
</blockquote>
<p>精华文章：<span class="id-context" data-target-id="2201181434">博客域名解析管理与网站CDN加速域名配置</span></p>

                                </div>
                            </a>
                        </li>
                        
                        <li data-target-id="2966071784">
                            <a href="#2966071784">
                                <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                                
                                <span>server、sqlite朋友圈部署方案</span>
                                <div class="record-links-context hover">
                                    <p>[^cdn]: 参见我的折腾过程：<span class="id-context" data-target-id="2201181434">博客域名解析管理与网站CDN加速域名配置</span></p>

                                </div>
                            </a>
                        </li>
                        
                        <li data-target-id="2346883624">
                            <a href="#2346883624">
                                <span class="record-type-point" style="color: var(--n_社会生活);">⬤</span>
                                
                                <span>成为一名个人博客网站站长</span>
                                <div class="record-links-context hover">
                                    <p>参看我的另一篇文章：Linux服务器添加SSL证书<br>
精华文章：<span class="id-context" data-target-id="2201181434">博客域名解析管理与网站CDN加速域名配置</span></p>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                
            </footer>
        </article>
        
        <article id="3569112562" class="record">
            <header>
                <h1 class="record-title">Hexo 博客适配 Obsidian 新语法</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>3569112562</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>Hexo</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('Obsidian');">Obsidian</button>
                    
                    <button class="btn" onclick="activeTag('Markdown');">Markdown</button>
                    
                    <button class="btn" onclick="activeTag('npm');">npm</button>
                    
                    <button class="btn" onclick="activeTag('Node.js');">Node.js</button>
                    
                    <button class="btn" onclick="activeTag('cmd');">cmd</button>
                    
                    <button class="btn" onclick="activeTag('CSS');">CSS</button>
                    
                    <button class="btn" onclick="activeTag('Hexo');">Hexo</button>
                    
                    <button class="btn" onclick="activeTag('Butterfly');">Butterfly</button>
                    
                    <button class="btn" onclick="activeTag('GFM');">GFM</button>
                    
                    <button class="btn" onclick="activeTag('OFM');">OFM</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>8/1/2023</span>
                </div>
                

                

                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>d4bc55f2</span>
                </div>
                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/hexoobsidian-Grammar.webp</span>
                </div>
                
                <div class="record-description">
                    <span>description :</span>
                    <span>本文介绍了使用插件使得Hexo接受部分OFM语法的方法</span>
                </div>
                
                <div class="record-top_img">
                    <span>top_img :</span>
                    <span></span>
                </div>
                
            </header>

            <main class="record-content">
                <blockquote>
<p>[!Cite] 本文包含的项目<br>
<a href="https://github.com/uuanqin/markdown-it-obsidian-imgsize"><img src="https://github-readme-stats.uuanqin.top/api/pin/?username=uuanqin&amp;repo=markdown-it-obsidian-imgsize" alt="Readme Card"></a></p>
</blockquote>
<p>Obsidian 除了支持大部分 CommonMark 语法、部分 GFM 功能以及 LaTeX 外，Obsidian 增加了一些新语法[^新语法]。</p>
<p>[^新语法]: <a href="https://help.obsidian.md/Editing+and+formatting/Obsidian+Flavored+Markdown">Obsidian Flavored Markdown - Obsidian Help</a></p>
<table>
<thead>
<tr>
<th style="text-align:center">Syntax</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><strong>[[ ]]</strong></td>
<td><a href="https://help.obsidian.md/Linking+notes+and+files/Internal+links">Internal links</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>![[ ]]</strong></td>
<td><a href="https://help.obsidian.md/Linking+notes+and+files/Embedding+files">Embedding files</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>![ | width x height ]()</strong></td>
<td><a href="https://help.obsidian.md/Editing+and+formatting/Basic+formatting+syntax#External+images">External images</a> with dimensions</td>
</tr>
<tr>
<td style="text-align:center"><code>%%</code></td>
<td><a href="https://help.obsidian.md/Editing+and+formatting/Basic+formatting+syntax#Comments">Comments</a></td>
</tr>
<tr>
<td style="text-align:center"><code>&gt; [!note]</code></td>
<td><a href="https://help.obsidian.md/Editing+and+formatting/Callouts">Callouts</a></td>
</tr>
</tbody>
</table>
<blockquote>
<p>[!warning] 注意<br>
Obsidian 不支持在 HTML 块中使用 Markdown 语法或空行。</p>
</blockquote>
<p>为了使得这些 Obsidian 语法在 Hexo 中产生作用，我们可以安装插件改进这一点，从而得到更丰富的书写体验。</p>
<blockquote>
<p>[!tip] 温馨提示<br>
使用增强的 Markdown 语法会增加你对特定软件和插件的依赖性，但能提升你的写作体验。在进行相关配置时请酌情考虑。</p>
</blockquote>
<p>介绍解决方案前先简要说明一下我对 Markdown 渲染相关的插件的理解。</p>
<h2>Hexo 里的 Markdown 渲染引擎</h2>
<p>有了 Markdown 渲染引擎，Hexo 才能将 Markdown 格式的内容渲染成 HTML 网页。不同的渲染器支持的语法不同。这里列出以下三种渲染引擎。</p>
<table>
<thead>
<tr>
<th style="text-align:center">渲染引擎</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><a href="https://www.npmjs.com/package/hexo-renderer-marked">hexo-renderer-marked</a></td>
<td>Hexo 预装渲染引擎。不支持复杂的数学公式</td>
</tr>
<tr>
<td style="text-align:center"><a href="https://www.npmjs.com/package/hexo-renderer-markdown-it">hexo-renderer-markdown-it</a></td>
<td>取代第一个的渲染器，渲染更快，更符合 CommonMark 规则</td>
</tr>
<tr>
<td style="text-align:center"><a href="https://github.com/CHENXCHEN/hexo-renderer-markdown-it-plus">hexo-renderer-markdown-it-plus</a></td>
<td>上一个渲染器的分支，可能更好用了吧</td>
</tr>
</tbody>
</table>
<p>上面的渲染引擎中内置不同的插件。我使用的<code>hexo-renderer-markdown-it-plus</code>支持扩展，我们可以在 npm 插件市场选择一款插件用以扩展更多语法（一般名为 markdown-it-xxxx）。</p>
<p>比如我安装的支持任务列表语法（GFM[^gfm]）的插件<a href="https://www.npmjs.com/package/markdown-it-task-lists">markdown-it-task-lists</a>，以及后文讲到的 Callouts 语法（OFM）插件<a href="https://github.com/widcardw/mdit-plugin-callouts#readme">mdit-plugin-callouts</a>。然后配置上去即可（后面有教程）：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230801211426.png" alt="image.png|376"></p>
<p>[^gfm]: Markdown 相关语法规范详见<a href="#1011516134" title="Markdown 渲染测试" class="record-link">Markdown 渲染测试</a></p>
<h2>Internal links 双向链接渲染解决方案</h2>
<h3>相关插件安装</h3>
<p>对于 OFM 语法中的 <strong>[[ ]]</strong>，需安装以下三个插件：</p>
<ul>
<li>确保安装了 Hexo 第三方插件 hexo-abbrlink
<ul>
<li>hexo-abbrlink 是一个生成文章永久链接的插件，平时写博客就很建议你使用</li>
<li>后续插件基于 hexo-abbrlink 进行工作</li>
<li>仓库地址：<a href="https://github.com/rozbo/hexo-abbrlink">rozbo/hexo-abbrlink: create one and only link for every post for hexo (github.com)</a></li>
</ul>
</li>
<li>安装 <strong>Obsidian</strong> 第三方插件 link-info-server
<ul>
<li>从 GitHub 仓库下载压缩包：<a href="https://github.com/moelody/link-to-server">moelody/link-to-server (github.com)</a>（理论上应该在 Obsidian 第三方插件市场找，但是找不到）</li>
<li>安装了插件之后记得启用</li>
</ul>
</li>
<li>安装 <strong>Hexo</strong> 第三方插件 hexo-link-obsidian
<ul>
<li>仓库地址：<a href="https://github.com/moelody/hexo-link-obsidian">moelody/hexo-link-obsidian (github.com)</a></li>
<li>此插件还支持更多双向链接功能，具体可查看仓库说明文档</li>
<li>已知问题：
<ul>
<li>[x] <s><a href="https://github.com/moelody/hexo-link-obsidian/issues/3">关于网络图片的问题 · Issue #3</a></s></li>
<li>[x] <s><a href="https://github.com/moelody/hexo-link-obsidian/issues/5">关于生成的链接问题 · Issue #5</a></s></li>
<li>[x] <s>不支持webp图像的识别 <a href="https://github.com/moelody/hexo-link-obsidian/pull/6">Pull Request #6</a></s></li>
<li>[ ] 必须保证 Obsidian 软件的运行（临时解决方法：详看下一小节）</li>
<li>[ ] 混淆了接口类型的图片（临时解决方法：修改源代码中的图片正则匹配，彻底弃用该插件的图片功能）</li>
<li>[ ] 不支持形如 <strong>[](![]())</strong> 的格式识别。纯文本中存在这种字符就报错，就比如这里我用的是粗体加反斜杠转义而不是使用行内代码格式表示。（临时解决方法：修改源代码中的图片正则匹配，彻底弃用该插件的图片功能）</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>注意到，要想运行正常，得先打开 Obsidian 软件。为了避免疏忽造成链接生成的失误，我写了一个脚本对相关端口和插件进行了检查。</p>
<h3>【可选】自写脚本实现 hexo 静态网页生成前自动检查</h3>
<h4>安装本脚本依赖 npm 包</h4>
<p>也就一个<code>npm inastall -g yamljs</code>，读 yaml 文件用的。</p>
<h4>写好 js 脚本</h4>
<pre><code class="language-js">// Writer: uuanqin
// At: 2023.07.27

const { exit } = require('process');
YAML = require('yamljs');
var exec = require('child_process').exec;
const package_json = require('./package.json')

function execute(cmd){
    return new Promise((resolve, reject)=&gt;{
        exec(cmd, function(error, stdout, stderr) {
            if(error){
                console.error(error);
            }
            else{
                // console.log(stdout)
                console.log(`PRE-CHECK: excuse command - ${cmd}`)
                return resolve(stdout)
            }
            return reject(&quot;err&quot;)
        })
    })
}

// 参考
// https://github.com/moelody/hexo-link-obsidian
// https://github.com/moelody/link-to-server
// 插件默认监听的端口号
var port = 3333

// 查看有没有自定义port
function update_custom_port(){

    // Load yaml file using YAML.load
    nativeObject = YAML.load('_config.yml');
    jsonstr = JSON.stringify(nativeObject);
    jsonTemp = JSON.parse(jsonstr, null);

    // 有没有自定义过监听端口，有则改
    if(jsonTemp.easy_images!==undefined &amp;&amp; jsonTemp.easy_images.port){
        port = jsonTemp.easy_images.port
    }
}

function main(){
    var pid_arr,pid_port_open_arr;
    execute(`tasklist /FI &quot;IMAGENAME eq Obsidian.exe&quot; /NH`)
        // PID 检查程序是否启动
        .then((str)=&gt;{
            const reg1 = RegExp(/obsidian.exe/gi);
            if(str.search(reg1)&lt;0){
                throw &quot;Obsidian.exe is not running.&quot;
            }
            console.log(str)
            pid_arr = str.match(/(?&lt;=obsidian.exe\s+)[0-9]+(?=\s)/gi)
        })
        // Hexo插件安装检查
        .then(()=&gt;{
            var version = package_json.dependencies[&quot;hexo-link-obsidian&quot;]
            if(version !== undefined){
                console.log(`PRE-CHECK: Your hexo-link-obsidian version - ${version}`)
                return;
            }else{
                throw &quot;You haven't install hexo-link-obsidian plugin or just install it in global.&quot;
            }
        })
        // 目标端口更新
        .then(()=&gt;{
            update_custom_port()
            console.log(&quot;PRE-CHECK: Target port - &quot;,port)
        })
        // 查询目标端口对应开放的PID
        .then(()=&gt;{
            // console.log(pid_arr)
            return execute(`netstat -ano | findstr &quot;:${port}&quot;`)
        })
        // PID_PID 匹配
        .then((str)=&gt;{
            console.log(str)
            pid_port_open_arr = str.match(/(?&lt;=\s+)[0-9]+(?=\r)/g)
            // console.log(pid_port_open_arr)
            const pid_set = new Set(pid_arr)
            // console.log(pid_set)
            for (num of pid_port_open_arr){
                if (pid_set.has(num)){
                    return;
                }
            }
            throw &quot;Target port is not listening by Obsidian. Please check your settings.&quot;
        })
        .then(()=&gt;{
            console.log(&quot;PRE-CHECK: All checks are done.&quot;)
            exit(0);
        })
        .catch((error)=&gt;{
            // 命令执行抛出err
            if(error===&quot;err&quot;){
                console.error(`ERROR: Please contact developer to seek for solutions.`)
            }
            else{
                console.error(&quot;ERROR: &quot;,error)
            }
            exit(1);
        })
}

main()

</code></pre>
<p>这个脚本主要做以下事情：</p>
<ul>
<li>检查 Obsidian 程序是否启动</li>
<li>检查 hexo-link-obsidian 插件是否安装</li>
<li>确认 hexo-link-obsidian 插件监听的端口</li>
<li>查询对应端口占用的进程是否为 Obsidian 程序</li>
</ul>
<p>在这里，我将脚本命名为<code>check_obsidian.js</code>。</p>
<h4>package.json 的配置</h4>
<p>package.json 中的 script 有以下特点：</p>
<ul>
<li>具有钩子性质</li>
<li>其中一条命令异常退出（返回非零值）后续命令则终止</li>
</ul>
<p>由于在每一次本地部署和网站发布前我们都需要检查一下 Obsidian 是否打开，我们可以这样设置钩子。</p>
<p>什么是钩子？比如，我们设置的本地部署命令为 hexo 三连<code>&quot;start&quot;: &quot;hexo clean &amp;&amp; hexo g &amp;&amp; hexo s&quot;</code>，那么我们可以新建一个命令：<code>&quot;prestart&quot;: &quot;node check_obsidian.js&quot;</code>。当我们每次执行<code>npm run start</code>时，都会先执行 prestart、再执行 start。</p>
<p>当 prestart 过程出现错误时，start 就不会执行。这样我们就实现了部署前的检查。</p>
<p>分享一下我目前的 script 配置：</p>
<pre><code class="language-json">&quot;scripts&quot;: {
	&quot;build&quot;: &quot;hexo generate&quot;,
	&quot;clean&quot;: &quot;hexo clean&quot;,
	&quot;deploy&quot;: &quot;hexo deploy&quot;,
	&quot;server&quot;: &quot;hexo server&quot;,
	&quot;prepublish&quot;: &quot;npm run check-obsidian &amp;&amp; npm run check-markdown-filename&quot;,
	&quot;publish&quot;: &quot;hexo clean &amp;&amp; hexo g &amp;&amp; npm run gen-cosma &amp;&amp; hexo d&quot;,
	&quot;postpublish&quot;: &quot;hexo algolia &amp;&amp; npm run flush-cdn&quot;,
	&quot;prestart&quot;: &quot;npm run check-obsidian &amp;&amp; npm run check-markdown-filename&quot;,
	&quot;start&quot;: &quot;hexo clean &amp;&amp; hexo g &amp;&amp; npm run gen-cosma &amp;&amp; hexo s&quot;,
	&quot;check-obsidian&quot;: &quot;node my_scripts/check_obsidian.js&quot;,
	...
},
</code></pre>
<blockquote>
<p>[!warning] 注意<br>
hexo algolia 放在 hexo d -g 后，否则报错</p>
</blockquote>
<blockquote>
<p>[!Hint] 提示<br>
<code>&amp;&amp;</code> 表示与，根据“短路效应”。只有前面的命令执行成功，后面的命令才会继续执行。<br>
<code>&amp;</code> 表示两条命令同时执行。</p>
</blockquote>
<h2>Callouts 标注块</h2>
<blockquote>
<p>找了半天终于找到这个宝藏插件，这里默默感谢作者 <a href="https://widcard.win/">widcardw</a></p>
</blockquote>
<p>对于这种需要另外渲染的新语法，我使用一款 npm 插件：<a href="https://www.npmjs.com/package/mdit-plugin-callouts">mdit-plugin-callouts - npm (npmjs.com)</a>，来增强渲染这一部分的内容。</p>
<p>这款插件本身是用于使 vite 博客网站支持 Obsidian 的 Callouts 用的，但稍微调整下也可以运用于 Hexo。</p>
<p>首先打开项目文件夹安装插件：</p>
<pre><code class="language-sh">npm install mdit-plugin-callouts
</code></pre>
<p>Hexo 博客中我安装的渲染器是<code>hexo-renderer-markdown-it-plus</code>，它可以通过配置文件拓展其他 Markdown 渲染插件。</p>
<p>在<code>_config.yml</code>中增加相应配置以添加插件：</p>
<pre><code class="language-yaml"># markdown_it_plus 语法渲染插件选项
markdown_it_plus:
    plugins:
        # Obsidian Callouts
        - plugin:
            name: mdit-plugin-callouts
            enable: true
            options:
                # this is plugin option
</code></pre>
<p>打开<code>mdit-plugin-callouts</code>插件安装位置，复制出两个 css 文件：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230801120730.png" alt="image.png|500"></p>
<p>粘贴到你平时放外部 css 的地方，并<strong>重命名</strong>以免影响到其它 css 文件，比如下图：</p>
<ul>
<li>index.css 重命名为 callout_blocks.css</li>
<li>common.css 重命名为 callout_blocks_common.css</li>
</ul>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230801121242.png" alt="image.png"></p>
<p>打开 callout_blocks.css，把开头的<code>common.css</code>改为对应重命名后的<code>callout_blocks_common.css</code>。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230801121646.png" alt="image.png"></p>
<p>接下来根据你使用的主题的说明，引入外部 CSS 文件<code>callout_blocks.css</code>。Butterfly 主题的做法为在主题配置文件<code>_config.butterfly.yml</code>中插入：</p>
<pre><code class="language-yaml">inject:
  head:
    # callout blocks
    - &lt;link rel=&quot;stylesheet&quot; href=&quot;/css/callout_blocks.css&quot;&gt;
</code></pre>
<p>现在你可以测试一下 Hexo 渲染后的页面正不正常了。但其实 Butterfly 中 Callouts 的 Note 块中 padding-left 属性不太正常，这是 Butterfly 中 CSS 覆盖导致的：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230801122606.png" alt="image.png|450"><br>
<img src="https://cdn.gallery.uuanqin.top/img/20230801122722.png" alt="image.png|475"></p>
<p>解决办法是，把<code>callout_blocks_common.css</code>中所有的<code>note</code>替换为<code>notice</code>或你想要的字符，这样会导致在两种应用的显示情况：</p>
<ul>
<li>Hexo 中成功渲染原<code>note</code>的 Callouts 块，但以后使用该块的语法为：</li>
</ul>
<pre><code class="language-markdown">&gt; [!notice]
&gt; contents
</code></pre>
<ul>
<li>Obsidian 中不受影响，因为任何未指定字符都渲染成原来 Note 块的样子。（得亏只有这个块有问题...）</li>
</ul>
<h1>External images 图片大小</h1>
<p>Obsidian对于图片大小尺寸调整有其自己的一套<a href="https://help.obsidian.md/Editing+and+formatting/Basic+formatting+syntax#External+images">语法</a>：</p>
<pre><code>![img|100x145](path/to/img) // 宽100px，高145px
![img|100](path/to/img)     // 宽100px
</code></pre>
<p>通过搜寻并没有很好的方案解决，于是我就自己手撸一个了......<br>
<a href="https://github.com/uuanqin/markdown-it-obsidian-imgsize"><img src="https://github-readme-stats.uuanqin.top/api/pin/?username=uuanqin&amp;repo=markdown-it-obsidian-imgsize" alt="Readme Card"></a></p>
<p>NPM仓库地址：<a href="https://www.npmjs.com/package/markdown-it-obsidian-imgsize">markdown-it-obsidian-imgsize - npm (npmjs.com)</a><br>
Git仓库地址：<a href="https://github.com/uuanqin/markdown-it-obsidian-imgsize">uuanqin/markdown-it-obsidian-imgsize: Obsidian图片大小处理插件 (github.com)</a></p>
<blockquote>
<p><em>还是那句老话：喜欢的话点个⭐~</em></p>
</blockquote>
<p>使用方法很简单，仿照上一小节Callouts的解决方法，安装这个markdown-it-plugin即可：</p>
<pre><code class="language-sh">npm i markdown-it-obsidian-imgsize --save
</code></pre>
<p>这一层打通以后，你就可以放心使用Obsidian中方便调整图像大小的插件啦，比如我正在用的这个：<a href="https://github.com/nicojeske/mousewheel-image-zoom">nicojeske/mousewheel-image-zoom (github.com)</a>鼠标滚轮调整图片大小。</p>
<h1>后记</h1>
<p>在使用 Hexo 第三方插件 <code>hexo-link-obsidian</code> 发生了许多小插曲，向原作者提了许多 issue，直接改进两个版本。</p>
<p>一开始发现对原本笔记就有的网络图片渲染得不是很好，我就自己改了一下源代码，把插件 index.js 匹配图片的正则表达式改成一个永远不会有的值结果在粘贴下面代码的时候......</p>
<pre><code class="language-js">let pattern = /thestringyouwouldnerverwritekk24oo9669/g
// 傻B了，把改的地方直接复制过来，结果匹配上了。。。原本我还一直想着这个字符串我不会再写第二遍...
</code></pre>
<p>解决Callouts问题的过程中，搜到<a href="https://widcard.win/">widcardw</a>的博客并产生启发，于是我的第一款NPM插件markdown-it-obsidian-imgsize诞生了。开发杂记详见：<a href="#3395837292" title="第一次开发 npm 插件" class="record-link">第一次开发 npm 插件</a>。</p>
<h2>后续考虑改进</h2>
<ul>
<li>[x] <s>写一个 markdown-it 插件 适配 Obsidian 图片大小的语法</s></li>
<li>[ ] 重写 callsout 插件适配 Hexo</li>
<li>[ ] 重写 Hexo-Obsidian 双向链接插件</li>
</ul>
<h1>本文参考</h1>
<ul>
<li><a href="https://blog.csdn.net/qq_42951560/article/details/123596899">【Hexo】选择更高级的 Markdown 渲染器_hexo markdown_Xavier Jiezou 的博客</a></li>
<li><a href="https://blog.csdn.net/qq_36667170/article/details/105846999">hexo 更换 markdown 渲染器 @upupming/hexo-renderer-markdown-it-plus_markdown-it-katex_Ann's Blog 的博客-CSDN 博客</a></li>
<li><a href="https://zsyyblog.com/b73ceb85.html">Hexo 多种 Markdown 渲染器对比分析 | 竹山一叶 (zsyyblog.com)</a></li>
<li><a href="https://docs.npmjs.com/cli/v6/using-npm/scripts/#special-packagejson-config-object">scripts | npm Docs (npmjs.com)</a></li>
<li><a href="https://docs.npmjs.com/cli/v6/configuring-npm/package-json#dependencies">docs.npmjs.com/cli/v6/configuring-npm/package-json#dependencies</a></li>
<li><a href="https://github.com/moelody/link-to-server">moelody/link-to-server (github.com)</a></li>
<li><a href="https://github.com/moelody/hexo-link-obsidian">moelody/hexo-link-obsidian (github.com)</a></li>
<li><a href="https://awsm.page/nodejs/run-shell-scripts-using-npm-script/#:~:text=You%20can%20run%20your%20shell%20script%20through%20a,build.sh%20%2F%2F...%20%22scripts%22%3A%20%7B%20%22build%22%3A%20%22.%2Fbuild.sh%22%20%7D%2C%20%2F%2F">Run shell scripts using npm script (awsm.page)</a></li>
<li><a href="https://blog.csdn.net/az44yao/article/details/107040391">node.js 读取 yaml 文件_js 读取 yaml_az44yao 的博客-CSDN 博客</a></li>
<li><a href="https://blog.csdn.net/gongxifacai_believe/article/details/108950368">JavaScript 中查找指定字符串的几种方式<em>js 查找字符串</em>魏晓蕾的博客-CSDN 博客</a></li>
<li><a href="https://www.runoob.com/regexp/regexp-metachar.html">正则表达式 – 元字符 | 菜鸟教程 (runoob.com)</a></li>
<li><a href="https://www.runoob.com/js/js-promise.html">JavaScript Promise | 菜鸟教程 (runoob.com)</a></li>
<li><a href="https://www.cnblogs.com/xuweili/articles/3943920.html#:~:text=%E5%BC%80%E5%A7%8B--%E8%BF%90%E8%A1%8C--cmd%20%E8%BF%9B%E5%85%A5%E5%91%BD%E4%BB%A4%E6%8F%90%E7%A4%BA%E7%AC%A6%20%E8%BE%93%E5%85%A5netstat%20-ano%20%E5%8D%B3%E5%8F%AF%E7%9C%8B%E5%88%B0%E6%89%80%E6%9C%89%E8%BF%9E%E6%8E%A5%E7%9A%84PID%20%E4%B9%8B%E5%90%8E%E5%9C%A8%E4%BB%BB%E5%8A%A1%E7%AE%A1%E7%90%86%E5%99%A8%E4%B8%AD%E6%89%BE%E5%88%B0%E8%BF%99%E4%B8%AAPID%E6%89%80%E5%AF%B9%E5%BA%94%E7%9A%84%E7%A8%8B%E5%BA%8F%E5%A6%82%E6%9E%9C%E4%BB%BB%E5%8A%A1%E7%AE%A1%E7%90%86%E5%99%A8%E4%B8%AD%20%E6%B2%A1%E6%9C%89PID%20%E8%BF%99%E4%B8%80%E9%A1%B9%2C%E5%8F%AF%E4%BB%A5%E5%9C%A8%E4%BB%BB%E5%8A%A1%E7%AE%A1%E7%90%86%E5%99%A8%E4%B8%AD%E9%80%89%22%E6%9F%A5%E7%9C%8B%22-%22%E9%80%89%E6%8B%A9%E5%88%97%22,C%3A%3E%20netstat%20-ano%20%E5%8D%8F%E8%AE%AE%20%E6%9C%AC%E5%9C%B0%E5%9C%B0%E5%9D%80%20%E5%A4%96%E9%83%A8%E5%9C%B0%E5%9D%80%20%E7%8A%B6%E6%80%81%20PID">windows 中查看端口占用、pid、禁用 - 山顶的鱼 - 博客园 (cnblogs.com)</a></li>
<li><a href="https://blog.csdn.net/nothing_is_imposible/article/details/108315760">JavaScript Set 的用法与理解<em>js set push</em>暮春风的博客-CSDN 博客</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Loops_and_iteration#for...in_%E8%AF%AD%E5%8F%A5">循环与迭代 - JavaScript | MDN (mozilla.org)</a></li>
<li><a href="https://www.npmjs.com/package/mdit-plugin-callouts">mdit-plugin-callouts - npm (npmjs.com)</a></li>
<li>
<ul>
<li><a href="https://widcard.win/posts/write-plugins/write-mdit-plugin">如何编写 Markdown-it 插件 (widcard.win)</a></li>
</ul>
</li>
<li><a href="https://docs.joshuatz.com/cheatsheets/node-and-npm/markdown-it/">Notes on Markdown-it and Building a Plugin | Joshua's Docs (joshuatz.com)</a></li>
<li><a href="https://juejin.cn/post/6996973343280431118">记一次markdown-it插件学习 - 掘金 (juejin.cn)</a></li>
<li><a href="https://markdown-it.github.io/markdown-it/#MarkdownIt.use">markdown-it 13.0.2 API documentation | MarkdownIt (class)</a></li>
<li><a href="https://markdown-it.github.io/">markdown-it demo</a></li>
<li><a href="https://segmentfault.com/a/1190000042104317">javascript - 编写markdown-it的插件和规则 - FE_Framework_and_Engineering - SegmentFault 思否</a></li>
<li><a href="https://www.jianshu.com/p/fb0ee355915c">Markdown-It 的解析过程 - 简书 (jianshu.com)</a></li>
<li><a href="https://www.jianshu.com/p/797df3f614e5">为markdown-it编写插件 - 简书 (jianshu.com)</a></li>
<li><a href="https://github.com/mqyqingfeng/Blog/issues/252">markdown-it 原理解析 · Issue #252 · mqyqingfeng/Blog (github.com)</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/400036665">markdown-it 源码分析及插件编写：parse 和 token（1/3） - 知乎 (zhihu.com)</a></li>
</ul>


                
            </main>

            <footer class="list-content-container">
                
                <details class="record-links">
                    <summary class="menu-title">
                        links
                        <span class="badge">2</span>
                    </summary>

                    <ul class="record-links-list">
                        
                        <li data-target-id="1011516134">
                            <a href="#1011516134">
                                <span class="record-type-point" style="color: var(--n_核心协同);">⬤</span>
                                
                                <span>Markdown 渲染测试</span>
                                <div class="record-links-context hover">
                                    <p>[^gfm]: Markdown 相关语法规范详见<span class="id-context" data-target-id="1011516134">Markdown 渲染测试</span></p>

                                </div>
                            </a>
                        </li>
                        
                        <li data-target-id="3395837292">
                            <a href="#3395837292">
                                <span class="record-type-point" style="color: var(--n_生活区);">⬤</span>
                                
                                <span>第一次开发 npm 插件</span>
                                <div class="record-links-context hover">
                                    <p>解决Callouts问题的过程中，搜到<a href="https://widcard.win/">widcardw</a>的博客并产生启发，于是我的第一款NPM插件markdown-it-obsidian-imgsize诞生了。开发杂记详见：<span class="id-context" data-target-id="3395837292">第一次开发 npm 插件</span>。</p>
<h2>后续考虑改进</h2>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                

                
                <details class="record-backlinks" open="open">
                    <summary class="menu-title">
                        backlinks
                        <span class="badge">3</span>
                    </summary>

                    <ul class="record-backlinks-list">
                        
                        <li data-target-id="4139834099">
                            <a href="#4139834099">
                                <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                                
                                <span>Butterfly 侧边栏实现 Obsidian 关系图谱</span>
                                <div class="record-links-context hover">
                                    <ul>
<li>使用钩子在 Hexo 部署前检查 Obsidian 是否启动：<span class="id-context" data-target-id="3569112562">Hexo 博客适配 Obsidian 新语法</span></li>
<li>Hexo 发布后自动刷新 CDN：将 CDN 缓存自动刷新加入到博客发布的工作流（Hexo、WordPress）</li>
</ul>

                                </div>
                            </a>
                        </li>
                        
                        <li data-target-id="85495977">
                            <a href="#85495977">
                                <span class="record-type-point" style="color: var(--n_核心协同);">⬤</span>
                                
                                <span>构建 Obsidian 的 Hexo 写作工作流</span>
                                <div class="record-links-context hover">
                                    <p>如果想将 OFM 运用于 Hexo 中，提示文本丰富性，那么可以试试这篇文章：<span class="id-context" data-target-id="3569112562">Hexo 博客适配 Obsidian 新语法</span></p>

                                </div>
                            </a>
                        </li>
                        
                        <li data-target-id="127992739">
                            <a href="#127992739">
                                <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                                
                                <span>自定义文章内外链接样式的另一种方法（使用markdown-it插件）</span>
                                <div class="record-links-context hover">
                                    <p>[^mdi]: 关于这两款插件的介绍可以参考：<span class="id-context" data-target-id="3569112562">Hexo 博客适配 Obsidian 新语法</span>中的第一部分</p>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                
            </footer>
        </article>
        
        <article id="4139834099" class="record">
            <header>
                <h1 class="record-title">Butterfly 侧边栏实现 Obsidian 关系图谱</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>4139834099</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>Hexo</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('Butterfly');">Butterfly</button>
                    
                    <button class="btn" onclick="activeTag('Obsidian');">Obsidian</button>
                    
                    <button class="btn" onclick="activeTag('Cosma');">Cosma</button>
                    
                    <button class="btn" onclick="activeTag('Python');">Python</button>
                    
                    <button class="btn" onclick="activeTag('npm');">npm</button>
                    
                    <button class="btn" onclick="activeTag('script');">script</button>
                    
                    <button class="btn" onclick="activeTag('YAML');">YAML</button>
                    
                    <button class="btn" onclick="activeTag('Markdown');">Markdown</button>
                    
                    <button class="btn" onclick="activeTag('HTML');">HTML</button>
                    
                    <button class="btn" onclick="activeTag('CSS');">CSS</button>
                    
                    <button class="btn" onclick="activeTag('项目');">项目</button>
                    
                    <button class="btn" onclick="activeTag('GitHub');">GitHub</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>8/11/2023</span>
                </div>
                

                

                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/relationcover.png</span>
                </div>
                
                <div class="record-description">
                    <span>description :</span>
                    <span>通过自制脚本实现文章关系图绘制以及加入Hexo部署自动化流程中</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>f6c0daf3</span>
                </div>
                
                <div class="record-top_img">
                    <span>top_img :</span>
                    <span></span>
                </div>
                
            </header>

            <main class="record-content">
                <blockquote>
<p>[!Cite] 本文包含的项目<br>
<a href="https://github.com/uuanqin/obsidian2cosma"><img src="https://github-readme-stats.uuanqin.top/api/pin/?username=uuanqin&amp;repo=obsidian2cosma" alt="Readme Card"></a></p>
</blockquote>
<blockquote>
<p>[!hint] 兼容性提示<br>
cosma v2.1.0 版本更新后，原生支持 Obsidian 标题形式的双向链接，但优先识别 id 字段。本脚本执行过程会向输出文件增加 id 元数据，所以脚本在新版本 cosma 下仍能<strong>正确实现</strong>预期的功能。更多信息详见：<a href="https://cosma.arthurperret.fr/changelog.html">Cosma | Changelog (arthurperret.fr)</a></p>
</blockquote>
<h1>挖坑</h1>
<p>由于最近使用 Obsidian 写文章，页面之间的链接越来越丰富，关系图谱越来越复杂。我在想能不能有一种方法可以把 Obsidian 的这张关系图导出放在网站上呢？经历一番探索之后，我发现 Obsidian 官方是推出过关系图生成网页的功能的：<a href="https://obsidian.md/publish">Obsidian Publish</a>，但它是付费服务。</p>
<p>终于，我在 Obsidian 的论坛找到了我想要的：<a href="https://forum.obsidian.md/t/share-the-graph-view-and-notes-as-html-page-for-free-with-obsidian2cosma/51070">Share the graph view and notes as HTML page for free with obsidian2cosma - Share &amp; showcase - Obsidian Forum</a>。在这篇帖子中，作者利用一款可以生成这种关系图的开源 APP <a href="https://cosma.arthurperret.fr/installing.html">Cosma</a>进行生成。Cosma 可以生成一个 HTML 网页，在包含关系图的同时提供对各个结点的交互，让用户在多种视图下审阅知识库的内容。</p>
<p>为了让文章中的双向链接能被 Cosma 识别，帖子作者 <a href="https://github.com/kevinpolisano">Kévin Polisano</a> 还自己编写了一个<a href="https://github.com/kevinpolisano/obsidian2cosma">Python 命令行工具</a>，将 Obsidian 知识库中的文章的 Front-matter、以及双向链接的格式进行替换，以使得 Cosma 能够识别文章。这一点就让我看到了 Hexo 关系图谱实现的可能性，于是耗时一个星期的挖坑开始了......</p>
<h1>效果</h1>
<p>文章在 Obsidian 中显示的关系视图是这样的：<br>
<img src="https://cdn.gallery.uuanqin.top/img/20230811225333.png" alt="image.png|300"></p>
<p>在 Hexo 侧边栏是这样的：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230811225838.png" alt="image.png|350"></p>
<p>主关系图网页是这样的：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230811230008.png" alt="image.png"></p>
<p>包含了各种标签筛选、视图以及文章查看等功能。</p>
<h1>思路</h1>
<p>整个过程分为几个步骤，我的愿景是脚本全自动进行。在 Hexo 进行本地部署或上传至服务器时进行以下操作：</p>
<ol>
<li>使用脚本转换 Hexo 中<code>_posts</code>目录下的文章为 Cosma 可以识别的文章</li>
<li>运行两次 Cosma，根据不同的配置文件生成两个不一样的<code>cosmoscope.html</code>（这就是我说的那个关键的包含关系图谱网页）</li>
<li>将其中一个<code>cosmoscope.html</code>用脚本进行修剪，用做侧边栏的展示</li>
<li>将处理好的<code>cosmoscope.html</code>粘贴到 Hexo 博客<code>source</code>目录下某指定文件夹中</li>
<li>删除转换后的文件，以免 Obsidian 仓库混淆</li>
<li>脚本进行剩余的本地部署或发布操作</li>
</ol>
<h1>操作</h1>
<h2>转换 Obsidian 文章为 Cosma 可识别的文章</h2>
<p>这一步是关键一步。只要能导出 HTML 关系图谱网页那么一切都好办了。</p>
<p>前面提到过 Kévin Polisano 写了一个脚本实现了这样的功能，但是限于这个脚本的诞生条件（Cosma 有未修复的 Bug）以及创作环境（作者是法国人且常用 Linux/IOS，脚本有很多兼容性 Bug），导致它的脚本跑不起来。</p>
<p>在我仔细研读源代码后决定将其重写代码以让它正确工作。项目地址如下：</p>
<p><a href="https://github.com/uuanqin/obsidian2cosma"><img src="https://github-readme-stats.uuanqin.top/api/pin/?username=uuanqin&amp;repo=obsidian2cosma" alt="Readme Card"></a></p>
<blockquote>
<p><em>欢迎大家来捧场 🎉🎉！喜欢可以点个 star ⭐</em></p>
</blockquote>
<p>这个脚本最主要特点：<strong>Windows/Linux/MacOS 适配</strong>、<strong>Cosma/Zettlr 兼容</strong>、<strong>适合 Hexo 类型文章管理</strong>、<strong>语言支持（更适合中国宝宝体质）</strong>。</p>
<p>我在原脚本的基础上修复了一些 Bug 也增加了一些功能以适配我的需求：</p>
<blockquote>
<p>[!Cite] 修复与增强</p>
<ul>
<li>重写了 YAML 解析器，使之可以解析更多格式的 YAML，摆脱特定关键字的依赖。</li>
<li>重写了创建 ID 的逻辑。</li>
<li>功能：更改 front-matter 中的关键字名称。</li>
<li>修复了在 Windows 上复制源文件创建日期时出现的错误。</li>
<li>提高在 Windows 上工作的效率。</li>
<li>为频繁使用脚本提供交互增强。</li>
<li>支持使用 UTF-8 字符集，中文标题文章也能用。</li>
<li>更新 <a href="http://README.md">README.md</a> 并增加其中文版本。</li>
<li>其他：ID 冲突检测、程序运行时间计算等<br>
<em>—— 摘自 <a href="https://github.com/uuanqin/obsidian2cosma/blob/main/README_zh.md">uuanqin/obsidian2cosma(github.com) 中文文档</a></em></li>
</ul>
</blockquote>
<h2>使用 Cosma 生成关系图谱 HTML</h2>
<p>在使用了上述脚本后，输出的 Markdown 文件会在指定的文件夹中，这里假设为<code>data/</code>。接下来我们使用 Cosma 进行读取和转换。</p>
<p>Cosma 的安装与使用请详详细细阅读官网：<a href="https://cosma.arthurperret.fr/about.html">Cosma | About Cosma (arthurperret.fr)</a></p>
<p>我的设想是使用两个不同的 Cosma 配置文件生成两种<code>cosmoscope.html</code>：一个用做侧边栏的基础展示，不需要那么多花里胡哨的功能，视图更清晰一些即可，这里我称之<code>cosmoscope_trim.html</code>；另一个用做正式的交互网页，一般原封不动即可。</p>
<h2>对<code>cosmoscope.html</code>进行修剪与美化</h2>
<p>在上一步中，配置文件只能调一些基本结点样式而已，不能关闭一些功能。这就会导致<code>cosmoscope_trim.html</code>文件很大，在侧边栏中显示不全。因此，这里我通过浏览器 F12 确定删减的标签与更改的样式，在将这个操作新写成另一个 Python 脚本。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230811233922.png" alt="image.png"></p>
<p>此外，我对这个网页增加了一个按钮，让读者可以进入到主关系视图网页。项目来自：<a href="https://codepen.io/jqueryalmeida/pen/ZxmzYe">Css buttom (codepen.io)</a></p>
<p>脚本分享：</p>
<pre><code class="language-python">&quot;&quot;&quot;
此脚本将根据 Cosma CLI2.1.1 生成的关系图谱网页进行修剪。
作者：uuanqin（wuanqin@mail.ustc.edu.cn）
&quot;&quot;&quot;

import os
import re

from bs4 import BeautifulSoup
import sys
from pathlib import Path

def trim(target_html):
&quot;&quot;&quot;
修剪 HTML文件使之能在侧边栏展出
:return:
&quot;&quot;&quot;

soup = BeautifulSoup(open(target_html,&quot;r&quot;,encoding=&quot;utf-8&quot;), 'html.parser')

# 删除多余元素
soup.html.body.aside.decompose()
soup.html.body.main.decompose()
soup.html.body.div.div.decompose()
# cosma 2.1.0 后，只有需要才会产生这个标签
if (soup.html.body.div.div):
soup.html.body.div.div.decompose()

# 修改css，使得图片占据全画面
style_str = soup.html.style.string
style_str = re.sub(r&quot;(width: )calc\(100vw - 30rem\)(;)&quot;,r&quot;\1 100vw\2&quot;,style_str,count=1,flags=re.DOTALL)
soup.html.style.string = style_str

# 项目地址 https://codepen.io/jqueryalmeida/pen/ZxmzYe# CSS部分
css_string = &quot;&quot;&quot;
.btn-b {
position: absolute;
bottom: 9%;
right: 2%;
cursor: pointer;
font-size: 10px;
text-align: left;
background: #a188fc;
background: linear-gradient(to right, #0f4eb4 1%, #07a1e9 100%);
color: #ddffff;
padding: 0rem 0rem 0rem 0rem;
border-radius: 10rem 50rem 50rem 10rem;
-webkit-transition: all 0.7s;
-moz-transition: all 0.7s;
transition: all 0.7s;
display: flex;
align-items: center;
justify-content: space-between;
}
.btn-b:after {
content: &quot;&quot;;
position: absolute;
right: -1px;
margin-left: 1em;
width: 35px;
height: 35px;
border-radius: 50%;
box-shadow: 0px 2px 8px 0px rgba(15, 78, 180, 0.22);
background: #3bc1ff url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj48IS0tISBGb250IEF3ZXNvbWUgUHJvIDYuNC4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlIChDb21tZXJjaWFsIExpY2Vuc2UpIENvcHlyaWdodCAyMDIzIEZvbnRpY29ucywgSW5jLiAtLT48cGF0aCBkPSJNMzQ0IDBINDg4YzEzLjMgMCAyNCAxMC43IDI0IDI0VjE2OGMwIDkuNy01LjggMTguNS0xNC44IDIyLjJzLTE5LjMgMS43LTI2LjItNS4ybC0zOS0zOS04NyA4N2MtOS40IDkuNC0yNC42IDkuNC0zMy45IDBsLTMyLTMyYy05LjQtOS40LTkuNC0yNC42IDAtMzMuOWw4Ny04N0wzMjcgNDFjLTYuOS02LjktOC45LTE3LjItNS4yLTI2LjJTMzM0LjMgMCAzNDQgMHpNMTY4IDUxMkgyNGMtMTMuMyAwLTI0LTEwLjctMjQtMjRWMzQ0YzAtOS43IDUuOC0xOC41IDE0LjgtMjIuMnMxOS4zLTEuNyAyNi4yIDUuMmwzOSAzOSA4Ny04N2M5LjQtOS40IDI0LjYtOS40IDMzLjkgMGwzMiAzMmM5LjQgOS40IDkuNCAyNC42IDAgMzMuOWwtODcgODcgMzkgMzljNi45IDYuOSA4LjkgMTcuMiA1LjIgMjYuMnMtMTIuNSAxNC44LTIyLjIgMTQuOHoiLz48L3N2Zz4=) no-repeat center;
background-size: 50%;
}
&quot;&quot;&quot;
new_style_tag = soup.new_tag(&quot;style&quot;)
new_style_tag.string = css_string
soup.html.head.append(new_style_tag)
# HTML部分
new_div_tag = soup.new_tag(&quot;div&quot;)
new_div_tag[&quot;class&quot;] = &quot;btn-b&quot;
# 链接
new_a_tag = soup.new_tag(&quot;a&quot;)
new_a_tag[&quot;href&quot;] = &quot;/DO_NOT_render/cosmoscope/cosmoscope.html&quot;
new_a_tag[&quot;target&quot;] = &quot;_blank&quot;
new_a_tag.append(new_div_tag)
soup.html.body.div.insert_after(new_a_tag)


# 重新写回
p = Path(target_html)
output_html = os.path.dirname(target_html)+&quot;/&quot;+p.stem+'_trim.html'

with open(output_html,&quot;w&quot;,encoding=&quot;utf-8&quot;) as f:
f.write(soup.prettify())

if __name__ == &quot;__main__&quot;:
# target_html = &quot;cosma_dir/cosmoscope.html&quot;
trim(sys.argv[1])
</code></pre>
<h2>Hexo 侧边栏配置</h2>
<p>实现无缝侧边栏参考我这篇教程：<a href="#90746120" title="Butterfly不改动主题源码实现自定义侧边栏" class="record-link">Butterfly不改动主题源码实现自定义侧边栏</a></p>
<p>widge.yml：</p>
<pre><code class="language-yaml">- class_name: seamless-card
	id_name:
	name:
	icon:
	order:
	html: |
		&lt;div style=&quot;height: 250px&quot;&gt;
		&lt;iframe src=&quot;/DO_NOT_render/cosmoscope/cosmoscope_trim.html&quot; frameborder=&quot;no&quot; style=&quot;width: 100%; height: 100%&quot;&gt;&lt;/iframe&gt;
		&lt;/div&gt;
</code></pre>
<p>可以看到 iframe 指向<code>cosmoscope_trim.html</code>。</p>
<h2>Hexo 部署自动化</h2>
<p>上文<a href="#%E6%80%9D%E8%B7%AF">思路</a>，中提到的自动化步骤，通过了 npm script 及其钩子实现。</p>
<p>以前的文章中我提到过钩子的用法：</p>
<ul>
<li>使用钩子在 Hexo 部署前检查 Obsidian 是否启动：<a href="#3569112562" title="Hexo 博客适配 Obsidian 新语法" class="record-link">Hexo 博客适配 Obsidian 新语法</a></li>
<li>Hexo 发布后自动刷新 CDN：<a href="#2958737902" title="将 CDN 缓存自动刷新加入到博客发布的工作流（Hexo、WordPress）" class="record-link">将 CDN 缓存自动刷新加入到博客发布的工作流（Hexo、WordPress）</a></li>
</ul>
<p>分享我目前的 npm script：</p>
<pre><code class="language-json">&quot;scripts&quot;: {
&quot;build&quot;: &quot;hexo generate&quot;,
&quot;clean&quot;: &quot;hexo clean&quot;,
&quot;deploy&quot;: &quot;hexo deploy&quot;,
&quot;server&quot;: &quot;hexo server&quot;,
&quot;prepublish&quot;: &quot;npm run check-obsidian &amp;&amp; npm run check-markdown-filename&quot;,
&quot;publish&quot;: &quot;hexo clean &amp;&amp; hexo g &amp;&amp; npm run gen-cosma &amp;&amp; hexo d&quot;,
&quot;postpublish&quot;: &quot;hexo algolia &amp;&amp; npm run flush-cdn&quot;,
&quot;prestart&quot;: &quot;npm run check-obsidian &amp;&amp; npm run check-markdown-filename&quot;,
&quot;start&quot;: &quot;hexo clean &amp;&amp; hexo g &amp;&amp; npm run gen-cosma &amp;&amp; hexo s&quot;,
&quot;flush-cdn&quot;: &quot;node my_scripts/auto_flush_cdn.js&quot;,
&quot;check-obsidian&quot;: &quot;node my_scripts/check_obsidian.js&quot;,
&quot;check-markdown-filename&quot;: &quot;python my_scripts/check_md_name.py source/_posts&quot;,
&quot;ob2co&quot;: &quot;python my_scripts/obsidian2cosma.py -i source/_posts -o my_scripts/cosma_dir/data --ignore -f --method abbrlink --attrreplacement categories,types date,begin --verbose&quot;,
&quot;cosma-total&quot;: &quot;cd my_scripts/cosma_dir/dir_total &amp;&amp; cosma m&quot;,
&quot;cosma-trim&quot;: &quot;cd my_scripts/cosma_dir/dir_trim &amp;&amp; cosma m &amp;&amp; python ../../cosmoscope_trim.py ../../cosma_dir/dir_trim/cosmoscope.html&quot;,
&quot;cosma-copy&quot;: &quot;copy \&quot;.\\my_scripts\\cosma_dir\\dir_total\\cosmoscope.html\&quot; \&quot;.\\source\\DO_NOT_render\\cosmoscope\\cosmoscope.html\&quot; &amp; copy \&quot;.\\my_scripts\\cosma_dir\\dir_trim\\cosmoscope_trim.html\&quot; \&quot;.\\source\\DO_NOT_render\\cosmoscope\\cosmoscope_trim.html\&quot;&quot;,
&quot;cosma-rm-output&quot;: &quot;echo \&quot;删除转换后的输出文件 - Cosma\&quot; &amp;&amp; rmdir /s /q .\\my_scripts\\cosma_dir\\data\\&quot;,
&quot;gen-cosma&quot;: &quot;npm run ob2co &amp;&amp; npm run cosma-total &amp;&amp; npm run cosma-trim &amp;&amp; npm run cosma-copy &amp;&amp; npm run cosma-rm-output&quot;
}
</code></pre>
<p>每个步骤保持分开，以方便调试。</p>
<p>obsidian2cosma 脚本指令：</p>
<pre><code class="language-sh">python my_scripts/obsidian2cosma.py
	-i source/_posts
	-o my_scripts/cosma_dir/data
	--ignore
	-f
	--method abbrlink
	--attrreplacement categories,types date,begin
	--verbose
</code></pre>
<h1>后记</h1>
<p>最终能完成这样的效果我也很欣慰，和设想的差不多，<s>似乎感受到了一丢丢程序员改变世界的力量 🤭🤭🤭</s>。很多细节我没有详细写出，但是把最重要的思路理清了，有问题的小伙伴可直接评论。</p>
<h2>后续改进</h2>
<ul>
<li>[x] 事后清洁，删除输出的 Markdown 文档以免混淆 Obsidian</li>
<li>[ ] 处理侧边栏图片报错问题，太吵了（有点困难，因为js有压缩，只能另辟蹊径）</li>
<li>[ ] 研究不同页面 Focus</li>
<li>[ ] 主页面增加原文跳转链接（这可能得深入源码去改，或者编写脚本，统一从源 HTML 创造 N 份版本）</li>
<li>[ ] 攻克侧边栏 Iframe 网页内的夜间模式问题</li>
<li>[ ] 移动端适配不是很友好</li>
<li>[ ] 历史记录 history 臃肿，需要不时删一删</li>
<li>[ ] cosma 2.1.0 侧边栏显示图像过小（只能等更新，脚本暂时无法处理）</li>
</ul>
<h2>踩过的坑</h2>
<ol>
<li>npm script 中使用 copy 命令时，路径用<code>\\</code>分隔，不然会找不到文件</li>
<li>你可能会把 Obsidian2cosma 脚本输出的文档放在了平时用 Obsidian 写作的 Vault 内。请注意，这样的话 Obsidian 仓库中就会出现两个同名但不同文件夹的文章，会导致<strong>以后</strong>平时插入双向链接或修改双向链接时出现双向链接题目不对的问题，进而导致<strong>第二次</strong>使用该脚本时一些链接识别不出的问题。</li>
<li>博客根目录不要创建<code>scripts</code>目录并在里面放自己写的脚本，除非你知道自己在做什么。否则导致<code>hexo clean</code>出错。针对这一点，我似乎找到了根源：<a href="https://hexo.io/zh-cn/docs/plugins.html#%E8%84%9A%E6%9C%AC%EF%BC%88Scripts%EF%BC%89">插件 | Hexo</a></li>
</ol>
<h1>本文参考</h1>
<ul>
<li><a href="https://docs.zettlr.com/en/academic/zkn-method/">Zettelkasten Methods - Zettlr Docs</a></li>
<li><a href="https://cosma.arthurperret.fr/user-manual.html">Cosma | User Manual (arthurperret.fr)</a></li>
<li><a href="https://forum.obsidian.md/t/share-the-graph-view-and-notes-as-html-page-for-free-with-obsidian2cosma/51070">Share the graph view and notes as HTML page for free with obsidian2cosma - Share &amp; showcase - Obsidian Forum</a></li>
<li><a href="https://blog.csdn.net/qq_19934363/article/details/118091299">Python os.system 乱码_输微的博客-CSDN 博客</a></li>
<li><a href="https://stackoverflow.com/questions/4996405/how-do-i-change-the-file-creation-date-of-a-windows-file#:~:text=pip%20install%20win32-setctime%20And%20then%20use%20it%20like,dependency%20other%20that%20the%20built-in%20ctypes%20Python%20library%3A">stackoverflow.com/questions/4996405/how-do-i-change-the-file-creation-date-of-a-windows-file#:~:text=pip install win32-setctime And then use it like,dependency other that the built-in ctypes Python library%3A</a></li>
<li><a href="https://www.winhelponline.com/blog/change-accessed-modified-created-file-date-timestamp-windows/">winhelponline.com/blog/change-accessed-modified-created-file-date-timestamp-windows/</a></li>
<li><a href="https://yaml.org/spec/1.2.2/#a-long-long-long-long-link">YAML Ain’t Markup Language (YAML™) revision 1.2.2</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/429205730">Python 正则表达式细节小记 - 知乎 (zhihu.com)</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Global_attributes/id">id - HTML（超文本标记语言） | MDN (mozilla.org)</a></li>
<li><a href="https://www.windowsdigitals.com/change-file-date-timestamp-cmd-powershell/#:~:text=Set-ItemProperty%20-Path%20%22example.txt%22%20-Name%20CreationTime%20-Value%20%24NewDate,Set-ItemProperty%20-Path%20%22example.txt%22%20-Name%20LastWriteTime%20-Value%20%24NewDate">Change File(s) Date &amp; Timestamp via CMD or PowerShell (windowsdigitals.com)</a></li>
<li><a href="https://blog.csdn.net/yedajiang44/article/details/118176272">powershell 执行多条命令_powershell 执行多条命令_yedajiang44 的博客-CSDN 博客</a></li>
</ul>


                
            </main>

            <footer class="list-content-container">
                
                <details class="record-links">
                    <summary class="menu-title">
                        links
                        <span class="badge">3</span>
                    </summary>

                    <ul class="record-links-list">
                        
                        <li data-target-id="90746120">
                            <a href="#90746120">
                                <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                                
                                <span>Butterfly不改动主题源码实现自定义侧边栏</span>
                                <div class="record-links-context hover">
                                    <p>实现无缝侧边栏参考我这篇教程：<span class="id-context" data-target-id="90746120">Butterfly不改动主题源码实现自定义侧边栏</span></p>

                                </div>
                            </a>
                        </li>
                        
                        <li data-target-id="2958737902">
                            <a href="#2958737902">
                                <span class="record-type-point" style="color: var(--n_核心协同);">⬤</span>
                                
                                <span>将 CDN 缓存自动刷新加入到博客发布的工作流（Hexo、WordPress）</span>
                                <div class="record-links-context hover">
                                    <ul>
<li>使用钩子在 Hexo 部署前检查 Obsidian 是否启动：Hexo 博客适配 Obsidian 新语法</li>
<li>Hexo 发布后自动刷新 CDN：<span class="id-context" data-target-id="2958737902">将 CDN 缓存自动刷新加入到博客发布的工作流（Hexo、WordPress）</span></li>
</ul>

                                </div>
                            </a>
                        </li>
                        
                        <li data-target-id="3569112562">
                            <a href="#3569112562">
                                <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                                
                                <span>Hexo 博客适配 Obsidian 新语法</span>
                                <div class="record-links-context hover">
                                    <ul>
<li>使用钩子在 Hexo 部署前检查 Obsidian 是否启动：<span class="id-context" data-target-id="3569112562">Hexo 博客适配 Obsidian 新语法</span></li>
<li>Hexo 发布后自动刷新 CDN：将 CDN 缓存自动刷新加入到博客发布的工作流（Hexo、WordPress）</li>
</ul>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                

                
                <details class="record-backlinks" open="open">
                    <summary class="menu-title">
                        backlinks
                        <span class="badge">1</span>
                    </summary>

                    <ul class="record-backlinks-list">
                        
                        <li data-target-id="90746120">
                            <a href="#90746120">
                                <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                                
                                <span>Butterfly不改动主题源码实现自定义侧边栏</span>
                                <div class="record-links-context hover">
                                    <p><span class="id-context" data-target-id="4139834099">Butterfly 侧边栏实现 Obsidian 关系图谱</span></p>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                
            </footer>
        </article>
        
        <article id="2966071784" class="record">
            <header>
                <h1 class="record-title">server、sqlite朋友圈部署方案</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>2966071784</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>Hexo</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('Butterfly');">Butterfly</button>
                    
                    <button class="btn" onclick="activeTag('Linux');">Linux</button>
                    
                    <button class="btn" onclick="activeTag('Python');">Python</button>
                    
                    <button class="btn" onclick="activeTag('SQLite');">SQLite</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>8/13/2023</span>
                </div>
                

                

                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/frcirlecover.png</span>
                </div>
                
                <div class="record-description">
                    <span>description :</span>
                    <span>简要介绍我在服务器的部署友链朋友圈过程以示参考</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>b0caa9e8</span>
                </div>
                
                <div class="record-top_img">
                    <span>top_img :</span>
                    <span></span>
                </div>
                
            </header>

            <main class="record-content">
                <p>本来不想写的，觉得自己看文档就能实现。但是实际操作过程出现了很多状况，文档不是太详细，MySQL 部署失败......<s>于是打算水一篇 😓</s>。</p>
<p>官方文档：<a href="https://fcircle-doc.yyyzyyyz.cn/#/">友链朋友圈 - 使用手册</a></p>
<h1>环境</h1>
<p>我采用的方案是 Server + SQLite 的部署方案。</p>
<p>根据文档要求 python 环境为 3.8，原本我的服务器版本为 3.6，需要升级。（此处由于我忽略版本导致踩坑）</p>
<pre><code class="language-bash"># 适用于CentOS系统
yum -y install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gdbm-devel db4-devel libpcap-devel xz-devel libffi-devel yum vim gcc
# 下载Python包
wget https://www.python.org/ftp/python/3.8.8/Python-3.8.8.tgz
# 解压并进入目录
tar -zxf Python-3.8.8.tgz &amp;&amp; cd Python-3.8.8 ./configure --prefix=/usr/local/python3
make &amp;&amp; make install
# 删除原先链接，建立软连接
rm -rf /usr/bin/python3
ln -s /usr/local/python3/bin/python3 /usr/bin/python3
rm -rf /usr/bin/pip3
ln -s /usr/local/python3/bin/pip3 /usr/bin/pip3
# 查看是否安装成功
python3 --version
pip3 --version
# 安装YAML模块
pip3 install pyyaml
</code></pre>
<p>安装 Git：</p>
<pre><code class="language-bash">yum install -y git
</code></pre>
<h1>项目安装</h1>
<p>找个好地方克隆仓库：</p>
<pre><code class="language-bash">git clone https://github.com/Rock-Candy-Tea/hexo-circle-of-friends.git
</code></pre>
<p>编辑<code>/hexo_circle_of_friends/fc_settings.yaml</code>文件：</p>
<pre><code class="language-yaml">LINK: [
	# 友链页地址1，修改为你的友链页地址
	# 因为博客最后生成的网页都在本地，我直接写本地地址
     { link: &quot;http://127.0.0.1/pages/friends/&quot;, theme: &quot;butterfly&quot; },
]
</code></pre>
<p>部署与测试 API：</p>
<pre><code class="language-bash">python3 deploy.py        # 部署
curl 127.0.0.1:8000/all  # 测试接口
</code></pre>
<h1>Nginx 配置</h1>
<p>由于之前[^cdn]弄了好一会这个配置，为的是网站实现全程 HTTPS 访问。现在我也想让外部访问朋友圈接口时也使用 HTTPS。</p>
<p>[^cdn]: 参见我的折腾过程：<a href="#2201181434" title="博客域名解析管理与网站CDN加速域名配置" class="record-link">博客域名解析管理与网站CDN加速域名配置</a></p>
<pre><code class="language-diff">server {
    listen 443 ssl;
    server_name  localhost;
    access_log  /var/log/nginx/host.access.log  main;
    location / {
        root   /var/www/uuanqin.top;
        index  index.html index.htm;
    }
+   # 友链朋友圈 获取后端内容 前端登录（Heo方案）
+   location ^~/fc_backend/ {
+        proxy_set_header    X-FORWARDED-FOR $remote_addr;
+        proxy_set_header    X-FORWARDED-PROTO $scheme;
+        proxy_set_header    Host   $http_host;
+        proxy_pass http://127.0.0.1:8000/;
+    }

    error_page  404              /404.html;
    ssl_certificate conf.d/cert/www.uuanqin.top.pem;
    ssl_certificate_key conf.d/cert/www.uuanqin.top.key;
    ...
}
</code></pre>
<p>通过 location 正则匹配，识别出<code>/fc_backend/</code>开头的链接为朋友圈 API 的请求，并将其转发到端口 8000（朋友圈默认端口）。发送给 8000 端口的地址不包含<code>/fc_backend/</code>。</p>
<p>当然，这里需要前端也要配合发出<code>/fc_backend/</code>开头的请求。</p>
<p>修改配置文件后别忘了重启 Nginx。</p>
<pre><code class="language-bash">nginx -s reload
</code></pre>
<h1>前端部署</h1>
<p>这里我采用了文档方案。</p>
<pre><code class="language-html">&lt;div id=&quot;hexo-circle-of-friends-root&quot;&gt;&lt;/div&gt;
&lt;script&gt;
let UserConfig = {
	// 填写你的api地址
	private_api_url: 'https://uuanqin.top/fc_backend/',
	// 初始加载几篇文章
	page_init_number: 20,
	// 点击加载更多时，一次最多加载几篇文章，默认10
	page_turning_number: 10,
	// 头像加载失败时，默认头像地址
	error_img: 'https://sdn.geekzu.org/avatar/57d8260dfb55501c37dde588e7c3852c',
	// 进入页面时第一次的排序规则
	sort_rule: 'created', // 本地文章缓存数据过期时间（天）
	expire_days: 1
}
&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;https://npm.elemecdn.com/fcircle-theme-yyyz@1.0.13/dist/fcircle.min.js&quot;&gt;&lt;/script&gt;
</code></pre>
<p>注意<code>private_api_url</code>中的设置。</p>
<h1>前端改密码方式</h1>
<p>友链朋友圈项目的前端第一次登录时即设置密码，如果想要改的话则需要自行删除数据库<code>auth</code>、<code>secret</code>表格。</p>
<p>进入服务器<code>hexo-circle-of-friends</code>根目录，找到<code>data.db</code>文件</p>
<pre><code class="language-bash">sqlite3
sqlite&gt; .open data.db # 打开数据库
sqlite&gt; .tables
# auth  friends  posts  secret
sqlite&gt; DROP TABLE auth;
sqlite&gt; DROP TABLE secret;
sqlite&gt; .tables
# friends  posts
sqlite&gt; .exit
</code></pre>
<p>重新部署朋友圈即可。</p>
<h1>【可选】鱼塘 DLC</h1>
<p>与洪涝不同的是，我稍微调整了一下 CSS 以改进页面布局。</p>
<pre><code class="language-html">&lt;div  class=&quot;title-h2-a&quot; style=&quot;overflow: hidden;&quot;&gt;
  &lt;div class=&quot;title-h2-a-left&quot;&gt;
    &lt;div style=&quot;padding-top: 0;margin: 0 8px 0.6rem; font-size: 20px; font-weight:bold;float: left;&quot;&gt;🎣 钓鱼&lt;/div&gt;

  &lt;a class=&quot;random-post-start&quot; href=&quot;javascript:fetchRandomPost();&quot;&gt;&lt;i class=&quot;fa-solid fa-arrow-rotate-right&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;div id=&quot;random-post&quot; style=&quot;min-height: 32px; background: var(--heo-card-bg); border: var(--style-border-always); box-shadow: var(--heo-shadow-border); padding: 20px 30px; border-radius: 12px; margin-top: 8px;&quot;&gt;&lt;/div&gt;
&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;https://cdn.jsdelivr.net/gh/zhheo/JS-Heo@main/moments/random-friends-post.css&quot;&gt;

&lt;script type=&quot;text/javascript&quot;&gt;
  var fdataUser = {
   apiurl: 'https://uuanqin.top/fc_backend/',
  defaultFish: 500,
  hungryFish: 500,
  }
&lt;/script&gt;
</code></pre>
<p>需要注意的是，必须使用<code>jquery.js</code>，记得引入。不要漏掉<code>id</code>为<code>random-post</code>的框，这是回显钓鱼信息用的。</p>
<p>由于其中的 css 和 js 使用了 jsdelivr[^jsd]，为了国内访问，我把他们粘到本地 inject 算了。</p>
<p>[^jsd]: 参考<a href="#2065118013" title="国内访问Hexo优化加速-替换jsdelivr的CDN链接" class="record-link">国内访问Hexo优化加速-替换jsdelivr的CDN链接</a>。</p>
<pre><code class="language-yaml">inject:
  head:
    - &lt;link rel=&quot;stylesheet&quot; href=&quot;your css&quot;&gt;
  bottom:
    - &lt;script src=&quot;your js&quot;&gt;&lt;/script&gt;
</code></pre>
<h1>【可选】设置 CDN 的不缓存规则</h1>
<p>由于本站采取了 CDN，接口<code>https://uuanqin.top/fc_backend/</code>所有请求应该设置不缓存，否则鱼塘、朋友圈刷新了还是一个样。</p>
<p>打开 CDN 加速域名配置页面、增加多一个缓存规则即可：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230814230524.png" alt="image.png"></p>
<h1>后续改进</h1>
<ul>
<li>[ ] 服务器重启后需要自行手动部署</li>
</ul>
<h1>本文参考</h1>
<ul>
<li><a href="https://blog.csdn.net/z736248591/article/details/117124631">CentOS 8 升级 Python3.6 到 Python3.9_雪靡的博客-CSDN 博客</a></li>
<li><a href="https://fcircle-doc.yyyzyyyz.cn/#/problems">常见问题 (yyyzyyyz.cn)</a></li>
<li><a href="https://blog.csdn.net/weixin_44299027/article/details/107286956">【Nginx 用法】nginx location 正则表达式写法，详解 Nginx location 匹配规则（很详细哦）_nginx location 正则_No8g 攻城狮的博客-CSDN 博客</a></li>
<li><a href="https://www.runoob.com/sqlite/sqlite-drop-table.html">SQLite 删除表 | 菜鸟教程 (runoob.com)</a></li>
<li><a href="https://cloud.tencent.com/developer/article/2238065">Hexo -43- 友链朋友圈 后端部署-腾讯云开发者社区-腾讯云 (tencent.com)</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/451825018">Nginx 配置反向代理，一篇搞定！ - 知乎 (zhihu.com)</a></li>
</ul>


                
            </main>

            <footer class="list-content-container">
                
                <details class="record-links">
                    <summary class="menu-title">
                        links
                        <span class="badge">2</span>
                    </summary>

                    <ul class="record-links-list">
                        
                        <li data-target-id="2065118013">
                            <a href="#2065118013">
                                <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                                
                                <span>国内访问Hexo优化加速-替换jsdelivr的CDN链接</span>
                                <div class="record-links-context hover">
                                    <p>[^jsd]: 参考<span class="id-context" data-target-id="2065118013">国内访问Hexo优化加速-替换jsdelivr的CDN链接</span>。</p>

                                </div>
                            </a>
                        </li>
                        
                        <li data-target-id="2201181434">
                            <a href="#2201181434">
                                <span class="record-type-point" style="color: var(--n_undefined);">⬤</span>
                                
                                <span>博客域名解析管理与网站CDN加速域名配置</span>
                                <div class="record-links-context hover">
                                    <p>[^cdn]: 参见我的折腾过程：<span class="id-context" data-target-id="2201181434">博客域名解析管理与网站CDN加速域名配置</span></p>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                

                
                <details class="record-backlinks" open="open">
                    <summary class="menu-title">
                        backlinks
                        <span class="badge">1</span>
                    </summary>

                    <ul class="record-backlinks-list">
                        
                        <li data-target-id="414962704">
                            <a href="#414962704">
                                <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                                
                                <span>Hexo 博客的写作与装饰</span>
                                <div class="record-links-context hover">
                                    <p>部署友链朋友圈：<span class="id-context" data-target-id="2966071784">server、sqlite朋友圈部署方案</span></p>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                
            </footer>
        </article>
        
        <article id="657793374" class="record">
            <header>
                <h1 class="record-title">Epic城市天际线 DLC 全破解与模组安装</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>657793374</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>undefined</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('Epic');">Epic</button>
                    
                    <button class="btn" onclick="activeTag('游戏');">游戏</button>
                    
                    <button class="btn" onclick="activeTag('DLC');">DLC</button>
                    
                    <button class="btn" onclick="activeTag('Mod');">Mod</button>
                    
                    <button class="btn" onclick="activeTag('Steam');">Steam</button>
                    
                    <button class="btn" onclick="activeTag('Cities Skylines');">Cities Skylines</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>8/19/2023</span>
                </div>
                

                

                
                <div class="record-description">
                    <span>description :</span>
                    <span>介绍DLC安装方法以及Steam模组安装，请支持正版游戏</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>2735215e</span>
                </div>
                
                <div class="record-cover">
                    <span>cover :</span>
                    <span></span>
                </div>
                
                <div class="record-top_img">
                    <span>top_img :</span>
                    <span></span>
                </div>
                
            </header>

            <main class="record-content">
                <p>在 Epic 白嫖了《都市·天际线》的游戏本体，怎样才能解锁全 DLC 并安装 steam 创意工坊中的模组？</p>
<blockquote>
<p>[!warning] 提示</p>
<p>本文仅做操作备忘，如果条件允许请支持正版游戏。</p>
</blockquote>
<h1>Epic 安装游戏本体</h1>
<p>将 <code>游戏安装目录\Cities_Data\Plugins</code>内的<code>EOSSDK-Win64-Shipping.dll</code> 文件重命名为 <code>EOSSDK-Win64-Shipping_o.dll</code></p>
<p>将 DLC 破解文件压缩包<a href="%E8%AF%A6%E8%A7%81%E4%BD%A0%E7%9A%84%E9%98%BF%E9%87%8C%E4%BA%91%E7%9B%98">^pan</a>内的两个文件解压到相同目录下解锁全部 DLC</p>
<ul>
<li>EOSSDK-Win64-Shipping.dll</li>
<li>ScreamAPI.ini</li>
</ul>
<p>启动游戏，<strong>等待启动器的更新</strong>。更新完毕后即可看到全 DLC。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230816190041363.png" alt="image-20230816190041363|350"></p>
<blockquote>
<p>[!warning] 注意</p>
<p>需要<strong>联网登录</strong>自己的账号再进入游戏，确保 DLC 加载完毕才进入存档，否则存档会失去模组内容。</p>
<p>启动器<strong>保持最新</strong>，如果 Epic 启动器更新过慢可以自己去官网重新安装。这样以后 Epic 会启动最新那个启动器</p>
<p>建议每次进入游戏时 <strong>选择「开始游戏」</strong> 而不是选择「继续」直接进入上次游玩存档，以防 DLC 未加载。</p>
</blockquote>
<h1>下载 Mod 方法</h1>
<blockquote>
<p>[!warning] 注意<br>
可能需要严苛的网络环境才能访问以下网站</p>
</blockquote>
<h2>方法一</h2>
<p>打开 Steam 创意工坊，进入想要安装的模组页面，右键复制链接。</p>
<p>打开：<a href="https://ggntw.com/steam">GGNETWORK :: Скачать с мастерской Steam (ggntw.com)</a>，粘贴链接下载</p>
<p>解压压缩包文件成一个文件夹，放在<code>游戏安装目录\Files\Mods</code>下，文件夹可以改名字。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/image-20230816190438620.png" alt="image-20230816190438620"></p>
<h2>方法二</h2>
<p>打开 Steam 创意工坊，进入想要安装的模组页面，右键复制链接。</p>
<p>打开： <a href="http://steamworkshop.download/">http://steamworkshop.download/</a></p>
<p>如果点下载出现 <em>free space left</em>，那就是 mod 库里面没有，下不了</p>
<h2>方法三【推荐】</h2>
<p><a href="https://smods.ru/">https://smods.ru/</a> ，搜索模组名即可</p>
<h1>参考</h1>
<ul>
<li><a href="https://www.bilibili.com/read/cv22888523">Epic 版天际线只解锁想要的 DLC，部分 MOD 分享 - 哔哩哔哩 (bilibili.com)</a></li>
<li><a href="https://www.reddit.com/r/PiratedGames/comments/ww4kb5/steamworkshopdownload_free_space_left_error/?onetap_auto=true">Steamworkshop.download &quot;free space left&quot; error : PiratedGames (reddit.com)</a></li>
<li><a href="https://www.bilibili.com/read/cv9114591">Steam 创意工坊 mod 下载攻略（部分游戏可用） - 哔哩哔哩 (bilibili.com)</a></li>
<li><a href="https://www.bilibili.com/video/av894632437/?vd_source=e03d48176855fc5349b27aef691f9cdb">Epic 版本《城市天际线》安装 mod 教程（资产+模组）<em>哔哩哔哩 bilibili</em>城市天际线</a></li>
<li><a href="https://www.bilibili.com/read/cv15638945">建议收藏！2022 版 EPIC·城市天际线 全 DLC 激活教程 - 哔哩哔哩 (bilibili.com)</a></li>
<li><a href="https://www.bilibili.com/read/cv21638001/">解决 P 社启动器(Paradox Launcher)无法更新问题 - 哔哩哔哩 (bilibili.com)</a></li>
</ul>


                
            </main>

            <footer class="list-content-container">
                

                
            </footer>
        </article>
        
        <article id="1309833614" class="record">
            <header>
                <h1 class="record-title">原来是 Edge 默默作祟</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>1309833614</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>生活区</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('Edge');">Edge</button>
                    
                    <button class="btn" onclick="activeTag('问题解决');">问题解决</button>
                    
                    <button class="btn" onclick="activeTag('吐槽');">吐槽</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>8/24/2023</span>
                </div>
                

                

                
                <div class="record-description">
                    <span>description :</span>
                    <span>老是乱搞什么东东</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>4e12798e</span>
                </div>
                
                <div class="record-cover">
                    <span>cover :</span>
                    <span></span>
                </div>
                
                <div class="record-top_img">
                    <span>top_img :</span>
                    <span></span>
                </div>
                
            </header>

            <main class="record-content">
                <p>本篇文章把它归为生活类了，主要是因为内容简单琐碎，就当做是一篇吐槽文章吧。</p>
<p>原标题：突然觉得我的博客主页怪怪的？原来是 Edge 默默作祟</p>
<h1>起因</h1>
<p>就在今天我逛自己博客的一瞬间，感觉页面有点怪，说不出来。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230824230749.webp" alt="image.png"></p>
<p>仔细观察发现，原来是我的博客变窄了。</p>
<p><s>虽然说变窄后的博客显得好像更清爽些，但是</s>文章配图，侧边栏文字什么的都受到影响，看着别扭。</p>
<h1>经过</h1>
<p>这到底是什么时候发生的事，我都回想不起来。我最近也没动过主题配置文件，看了 <kbd>F12</kbd> 也没见有 CSS 冲突，页面没有缩放。</p>
<p>想去看看 Butterfly 主题配置文档，是不是我不小心动了某项设置，去到发现 Jerry 主页发现他的页面宽度跟我的差不多 😂...于是怀疑到浏览器头上。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230824230857.webp" alt="image.png"></p>
<p>果然，Edge 不知道在什么时候默默更新，并在我不知情的情况下<strong>启动了所谓的「全新外观」</strong>。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230824225744.png" alt="image.png"></p>
<h1>结果</h1>
<p>关掉它一切就正常了。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230824230535.png" alt="image.png"></p>
<h1>复盘</h1>
<p>事后想想，这种试用性质的功能不应该是用户知情后主动开的吗？还让我进行评价 😅 有点不知道说啥了。</p>
<p>这种客户端侧的问题我也无能为力，只能怪我没有充足的兼容意识和容错思想了。<s>一想到我要重做所有文章封面整个人就累死了 😫😫😫</s></p>
<p>回看新版本的 Edge「全新外观」指的是什么：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230825010724.webp" alt="image.png|300"></p>
<p>它把原来的网页做成圆角，整出卡片样，以契合新出的「分屏」功能。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230825011221.webp" alt="image.png"></p>
<p>浏览器分屏？？虽然可能提升了一点点分屏体验，但是也不是很必要吧...... Edge 总是在杂合更多的花里胡哨的功能。</p>
<p>已经开始逐步重做封面了。</p>


                
            </main>

            <footer class="list-content-container">
                

                
            </footer>
        </article>
        
        <article id="127992739" class="record">
            <header>
                <h1 class="record-title">自定义文章内外链接样式的另一种方法（使用markdown-it插件）</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>127992739</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>Hexo</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('Markdown');">Markdown</button>
                    
                    <button class="btn" onclick="activeTag('npm');">npm</button>
                    
                    <button class="btn" onclick="activeTag('markdown-it');">markdown-it</button>
                    
                    <button class="btn" onclick="activeTag('css');">css</button>
                    
                    <button class="btn" onclick="activeTag('Codepen');">Codepen</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>8/27/2023</span>
                </div>
                

                

                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/20230827011635.webp</span>
                </div>
                
                <div class="record-description">
                    <span>description :</span>
                    <span>介绍一款markdown-it插件以区分文章中的外部链接和内部链接</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>7a103a3</span>
                </div>
                
                <div class="record-top_img">
                    <span>top_img :</span>
                    <span></span>
                </div>
                
            </header>

            <main class="record-content">
                <p>我们有很多种方式美化我们文章中的链接。在有些情况下，我们可能需要为文章中的外部链接和内部链接进行区分，分别设置它们的样式。</p>
<h1>插件介绍</h1>
<p><a href="https://github.com/rotorz/markdown-it-external-links#readme">markdown-it-external-links</a> 是一款 Markdown 渲染插件，为不同类型的链接增加 CSS class。</p>
<p>例如，你的文章中的链接：</p>
<pre><code class="language-markdown">- [Internal Link A](/)
- [Internal Link B](//example.org)
- [Internal Link C](http://example.org)
- [Internal Link D](other-page.html)
- [Internal Link E](.././other-page.html)
- [External Link A](//example.com)
- [External Link B](http://example.com)
</code></pre>
<p>将会被渲染为：</p>
<pre><code class="language-markdown">&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;/&quot; class=&quot;internal-link&quot;&gt;Internal Link A&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;//example.org&quot; class=&quot;internal-link&quot;&gt;Internal Link B&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://example.org&quot; class=&quot;internal-link&quot;&gt;Internal Link C&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;other-page.html&quot; class=&quot;internal-link&quot;&gt;Internal Link D&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;.././other-page.html&quot; class=&quot;internal-link&quot;&gt;Internal Link E&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;//example.com&quot; class=&quot;external-link&quot;&gt;External Link A&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://example.com&quot; class=&quot;external-link&quot;&gt;External Link B&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</code></pre>
<h1>使用</h1>
<p>在博客项目中安装插件：</p>
<pre><code class="language-sh">npm install --save markdown-it-external-links
</code></pre>
<p>如果你的 Markdown 渲染引擎为 <a href="https://www.npmjs.com/package/hexo-renderer-markdown-it">hexo-renderer-markdown-it</a> 或 <a href="https://github.com/CHENXCHEN/hexo-renderer-markdown-it-plus">hexo-renderer-markdown-it-plus</a> [^mdi]，则在配置文件<code>_config.yml</code>中对应的地方引入该插件。</p>
<pre><code class="language-yaml"># markdown_it_plus 语法渲染插件选项
markdown_it_plus:
	plugins:
		# markdown-it-external-links 外部链接
		- plugin:
			name: markdown-it-external-links
			enable: true
			options:
			# this is plugin option
			externalClassName: link-external
			# internalClassName:
</code></pre>
<p>[^mdi]: 关于这两款插件的介绍可以参考：<a href="#3569112562" title="Hexo 博客适配 Obsidian 新语法" class="record-link">Hexo 博客适配 Obsidian 新语法</a>中的第一部分</p>
<p><code>externalClassName</code> 则允许我们自定义外部链接采用的样式名，这里为<code>link-external</code>。</p>
<p>这里我以 CodePen 项目 <a href="https://codepen.io/decemberly/pen/JOrBxo">Awesome link underlines</a> 为例，将下面的 CSS 引入主题中，注意 CSS 选择器要重命名：</p>
<pre><code class="language-css">.link-external {
	color: black;
	border-bottom: 0.1em solid #669900;
	outline: 1em solid rgba(255, 215, 0, 0);
	text-decoration: none;
	transition: all 0.3s ease;
}
.link-external:hover, .link-external:focus, .link-external:active {
	background: #b5ca4226;
	outline: 0.1em solid #b5ca4226;
}
</code></pre>
<p>Butterfly 的引入方法为：</p>
<ol>
<li>打开主题配置文件（butterfly.yml）</li>
<li>定位搜索 inject</li>
<li>其中 head 是用来引入 css 的</li>
</ol>
<pre><code class="language-yaml">inject:
  head:
    - &lt;link rel=&quot;stylesheet&quot; href=&quot;your css&quot;&gt;
  bottom:
    - &lt;script src=&quot;your js&quot;&gt;&lt;/script&gt;
</code></pre>
<h1>效果预览</h1>
<p><img src="https://cdn.gallery.uuanqin.top/img/hovermousedemo.gif" alt="demo"></p>
<p>当然，我选的这个项目比较简单，你可以设置更复杂的样式分别对两种链接进行美化。</p>
<h1>后续改进</h1>
<ul>
<li>[ ] 由于我的博客写作使用Obsidian，内部链接一般使用双向链接的<strong>双中括号</strong>语法，这个插件暂时还识别不出。后续有时间改进一下。</li>
</ul>


                
            </main>

            <footer class="list-content-container">
                
                <details class="record-links">
                    <summary class="menu-title">
                        links
                        <span class="badge">1</span>
                    </summary>

                    <ul class="record-links-list">
                        
                        <li data-target-id="3569112562">
                            <a href="#3569112562">
                                <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                                
                                <span>Hexo 博客适配 Obsidian 新语法</span>
                                <div class="record-links-context hover">
                                    <p>[^mdi]: 关于这两款插件的介绍可以参考：<span class="id-context" data-target-id="3569112562">Hexo 博客适配 Obsidian 新语法</span>中的第一部分</p>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                

                
            </footer>
        </article>
        
        <article id="636905579" class="record">
            <header>
                <h1 class="record-title">页面展示用户 IP 地址及地理位置信息</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>636905579</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>Hexo</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('API');">API</button>
                    
                    <button class="btn" onclick="activeTag('IP');">IP</button>
                    
                    <button class="btn" onclick="activeTag('UA');">UA</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>9/9/2023</span>
                </div>
                

                

                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/1590736606072ip.webp</span>
                </div>
                
                <div class="record-description">
                    <span>description :</span>
                    <span>利用API获取IP地址信息，这也是对Heo方案的改进</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>25f6686b</span>
                </div>
                
                <div class="record-top_img">
                    <span>top_img :</span>
                    <span></span>
                </div>
                
            </header>

            <main class="record-content">
                <p>最近开始筹备隐私政策的撰写了，注意到洪涝 Heo 的隐私政策有这样一个表格，感觉有趣，尝试借鉴一下：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230909161740.webp" alt=""></p>
<p>Heo 发布过这一教程：<a href="https://blog.zhheo.com/p/70bd84fc.html">js 获取用户 IP 和地理位置信息、UA 并展示 | 张洪 Heo (zhheo.com)</a>但是近期该 API 出现了一些问题（从上图你可以发现其中的问题所在）。下面我通过使用另一个接口： <a href="https://2023.ipchaxun.com/">https://2023.ipchaxun.com/</a> 来尝试实现这个功能。</p>
<h1>实现效果</h1>
<script src="/js/privacy.js"></script>
<table>
<thead>
<tr>
<th style="text-align:center">类型<div style="width:100px"></th>
<th style="text-align:left">信息</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">IP 地址</td>
<td style="text-align:left"><div id="userAgentIp"></div></td>
</tr>
<tr>
<td style="text-align:center">国家</td>
<td style="text-align:left"><div id="userAgentCountry"></div></td>
</tr>
<tr>
<td style="text-align:center">省份</td>
<td style="text-align:left"><div id="userAgentRegion"></div></td>
</tr>
<tr>
<td style="text-align:center">城市</td>
<td style="text-align:left"><div id="userAgentCity"></div></td>
</tr>
<tr>
<td style="text-align:center">运营商</td>
<td style="text-align:left"><div id="userAgentIsp"></div></td>
</tr>
<tr>
<td style="text-align:center">UA</td>
<td style="text-align:left"><div id="userAgent"></div></td>
</tr>
</tbody>
</table>
<script type="text/javascript">getIpInfo()</script>
<h1>编写新的 JS 文件</h1>
<pre><code class="language-js">// 获取ip
function getIpInfo(){
	var path = 'https://2023.ipchaxun.com/';
	if(path !== undefined){
		var httpRequest = new XMLHttpRequest();//第一步：建立所需的对象
		httpRequest.open('GET', path , true);//第二步：打开连接 将请求参数写在url中 ps:&quot;./Ptest.php?name=test&amp;nameone=testone&quot;
		httpRequest.send();//第三步：发送请求 将请求参数写在URL中
		/**
		* 获取数据后的处理程序
		*/
		httpRequest.onreadystatechange = function () {
			if (httpRequest.readyState == 4 &amp;&amp; httpRequest.status == 200) {
				var info = httpRequest.responseText;//获取到json字符串，还需解析
				var obj = JSON.parse(info)
				const ip = obj.ip;
				document.getElementById(&quot;userAgentIp&quot;).innerHTML = obj.ip;
				document.getElementById(&quot;userAgentCountry&quot;).innerHTML = obj.data[0];
				document.getElementById(&quot;userAgentRegion&quot;).innerHTML = obj.data[1];
				document.getElementById(&quot;userAgentCity&quot;).innerHTML = obj.data[2];
				document.getElementById(&quot;userAgentIsp&quot;).innerHTML = obj.data[4];
			}
		};
		}else{
			console.log('获取信息失败');
		}
	var uaInfo = navigator.userAgent;
	document.getElementById(&quot;userAgent&quot;).innerHTML = uaInfo;
}
</code></pre>
<p>这个文件是由洪涝 Heo <a href="https://cdn1.tianli0.top/gh/zhheo/JS-Heo@main/privacy/privacy.js">https://cdn1.tianli0.top/gh/zhheo/JS-Heo@main/privacy/privacy.js</a> 改动而来。我们不妨也将其命名为 privacy.js 吧。</p>
<h1>页面使用</h1>
<p>Hexo 新建页面，写入以下内容即可。</p>
<pre><code class="language-markdown">&lt;script src=&quot;[你的 privacy.js 路径]&quot;&gt;&lt;/script&gt;

| 类型&lt;div style=&quot;width:100px&quot;&gt; | 信息                              |
| :---------------------------: | :-------------------------------- |
|            IP 地址            | &lt;div id=&quot;userAgentIp&quot;&gt;&lt;/div&gt;      |
|             国家              | &lt;div id=&quot;userAgentCountry&quot;&gt;&lt;/div&gt; |
|             省份              | &lt;div id=&quot;userAgentRegion&quot;&gt;&lt;/div&gt;  |
|             城市              | &lt;div id=&quot;userAgentCity&quot;&gt;&lt;/div&gt;    |
|            运营商             | &lt;div id=&quot;userAgentIsp&quot;&gt;&lt;/div&gt;     |
|              UA               | &lt;div id=&quot;userAgent&quot;&gt;&lt;/div&gt;        |

&lt;script type=&quot;text/javascript&quot;&gt;getIpInfo()&lt;/script&gt;
</code></pre>
<p>注意上面的代码中填写你正确的 privacy.js 路径。</p>
<h1>本文参考</h1>
<ul>
<li><a href="https://blog.csdn.net/qq_43762932/article/details/129408876">获取 IP 地址信息的 API 合集_api 地址_psonh 的博客-CSDN 博客</a></li>
<li><a href="https://juejin.cn/post/7183234641816453175">JavaScript 获取用户操作系统信息及浏览器信息 - 掘金 (juejin.cn)</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse">JSON.parse() - JavaScript | MDN (mozilla.org)</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/slice">Array.prototype.slice() - JavaScript | MDN (mozilla.org)</a></li>
<li><a href="https://blog.zhheo.com/privacy/">隐私政策 | 张洪 Heo (zhheo.com)</a></li>
<li><a href="https://blog.zhheo.com/p/70bd84fc.html">js 获取用户 IP 和地理位置信息、UA 并展示 | 张洪 Heo (zhheo.com)</a></li>
</ul>


                
            </main>

            <footer class="list-content-container">
                

                
            </footer>
        </article>
        
        <article id="1129186507" class="record">
            <header>
                <h1 class="record-title">阿里云ECS主机可ping通但拒绝连接的解决办法</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>1129186507</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>undefined</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('ECS');">ECS</button>
                    
                    <button class="btn" onclick="activeTag('SSH');">SSH</button>
                    
                    <button class="btn" onclick="activeTag('IP');">IP</button>
                    
                    <button class="btn" onclick="activeTag('阿里云');">阿里云</button>
                    
                    <button class="btn" onclick="activeTag('问题解决');">问题解决</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>9/10/2023</span>
                </div>
                

                

                
                <div class="record-description">
                    <span>description :</span>
                    <span>将目标IP加入阿里云白名单中</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>434e04cb</span>
                </div>
                
                <div class="record-cover">
                    <span>cover :</span>
                    <span></span>
                </div>
                
                <div class="record-top_img">
                    <span>top_img :</span>
                    <span></span>
                </div>
                
            </header>

            <main class="record-content">
                <h1>问题出现</h1>
<p>开学注册了，最近写了篇博客文章想像往常一样部署服务器，但是出现了连接问题。以前从来没遇到过：</p>
<pre><code>Connection reset by 我的主机IP port 22
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists.
FATAL {
  err: Error: Spawn failed
      at ChildProcess.&lt;anonymous&gt; (D:\uuanqin\Desktop\uuanqin-blogs\node_modules\hexo-util\lib\spawn.js:51:21)
      at ChildProcess.emit (node:events:513:28)
      at cp.emit (D:\uuanqin\Desktop\uuanqin-blogs\node_modules\cross-spawn\lib\enoent.js:34:29)
      at ChildProcess._handle.onexit (node:internal/child_process:291:12) {
    code: 128
  }
} Something's wrong. Maybe you can find the solution here: %s https://hexo.io/docs/troubleshooting.html

Process finished with exit code 2

</code></pre>
<p>想用 XShell 连上服务器看看，结果还是失败：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20230910111157.webp" alt="QQ截图20230910111157.png"></p>
<p>终端使用 SSH 连接也不行：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E5%9B%BE%E7%89%8720230910111113.webp" alt="QQ图片20230910111113.png"></p>
<h1>问题排查</h1>
<p>经过排查发现：</p>
<ul>
<li>服务器公网 IP 可以 Ping 通</li>
<li>安全组设置正确</li>
<li>阿里云 Workbench 工具可以远程连接</li>
<li>换学校热点、手机移动热点正常，唯独<strong>校园有线网</strong>连接出现异常</li>
</ul>
<p>综上判断，有理由怀疑是阿里云屏蔽了一些 IP。</p>
<h1>问题解决</h1>
<p>打开阿里云控制台，点击右上角头像找到安全管控：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230910112630.webp" alt="image.png"><br>
在 IP 白名单中添加当前 IP 即可。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230910112743.webp" alt="image.png"></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230910161416.webp" alt="image.png"></p>
<h1>后记</h1>
<p>取消白名单后，过一段时间就又被ban咯，所以就让它一直存在吧。</p>
<h1>本文参考</h1>
<ul>
<li><a href="https://blog.csdn.net/peng2hui1314/article/details/119756512">采坑阿里云 kex<em>exchange_identification: read: Connection reset by peer</em>阿里云 ecs read econnreset_Roc.Chang 的博客-CSDN 博客</a></li>
<li><a href="https://help.aliyun.com/zh/ecs/support/the-ssh-exchange-identification-read-connection-reset-by-peer-error-is-displayed-when-you-log-on-to-an-ecs-instance-through-ssh#823e130097gyd">提示“ssh<em>exchange_identification:read:Connectionresetbypeer”错误怎么办</em>云服务器 ECS-阿里云帮助中心 (aliyun.com)</a></li>
</ul>


                
            </main>

            <footer class="list-content-container">
                

                
            </footer>
        </article>
        
        <article id="4272386753" class="record">
            <header>
                <h1 class="record-title">本地部署 PlantUML</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>4272386753</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>核心协同</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('PlantUML');">PlantUML</button>
                    
                    <button class="btn" onclick="activeTag('Java');">Java</button>
                    
                    <button class="btn" onclick="activeTag('jar');">jar</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>9/10/2023</span>
                </div>
                

                

                
                <div class="record-description">
                    <span>description :</span>
                    <span>介绍本地部署 PlantUML 的安装及使用方法</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>fea772c1</span>
                </div>
                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/plantumlcover.webp</span>
                </div>
                
                <div class="record-top_img">
                    <span>top_img :</span>
                    <span></span>
                </div>
                
            </header>

            <main class="record-content">
                <p>许多与 PlantUML 有关的插件都利用了官网提供的接口<a href="http://www.plantuml.com/plantuml/uml/SyfFKj2rKt3CoKnELR1Io4ZDoSa70000">PlantUML Web Server</a>来渲染图片，但是由于一些网络问题，我们需要在本地渲染 PlantUML。下面介绍本地安装 PlantUML 的方法。</p>
<blockquote>
<p>[!warning] 注意<br>
本地使用 PlantUML 的效率相较于使用服务器 API 的效率低</p>
</blockquote>
<h1>环境</h1>
<p>你需要有 Java 环境。下载地址：<a href="https://www.java.com/en/download/">Download Java for Windows</a></p>
<h1>安装</h1>
<p>下载 jar 包：<a href="http://sourceforge.net/projects/plantuml/files/plantuml.jar/download">plantuml.jar (sourceforge.net)</a></p>
<h1>启动</h1>
<p><code>plantuml.jar</code>下载完成后，双击是<strong>不能</strong>正确启动的，需要按照以下方式使用。</p>
<h2>方式一：GUI</h2>
<p>准备好一个文件夹，可以将其命名为 PlantumlTest，里面新建文本文件<code>sequenceDiagram.txt</code>以测试：</p>
<pre><code class="language-[此处填写：plantuml]">@startuml
Alice -&gt; Bob: test 
@enduml
</code></pre>
<p>运行命令：</p>
<pre><code class="language-sh">java -jar plantuml.jar -gui
</code></pre>
<p>在 GUI 窗口中选择 PlantumlTest 文件夹，你就会发现<code>sequenceDiagram.png</code>自动生成好了。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230910152649.webp" alt="image.png"></p>
<h2>方式二：命令行</h2>
<pre><code class="language-sh">java -jar plantuml.jar sequenceDiagram.txt
</code></pre>
<h1>本文参考</h1>
<ul>
<li><a href="https://plantuml.com/en/starting">Quick Start Guide (plantuml.com)</a></li>
<li><a href="https://plantuml.com/en/graphviz-dot">Test your GraphViz installation (plantuml.com)</a></li>
<li><a href="https://plantuml.com/en/gui">Standalone tool usage (plantuml.com)</a></li>
</ul>


                
            </main>

            <footer class="list-content-container">
                

                
                <details class="record-backlinks" open="open">
                    <summary class="menu-title">
                        backlinks
                        <span class="badge">1</span>
                    </summary>

                    <ul class="record-backlinks-list">
                        
                        <li data-target-id="85495977">
                            <a href="#85495977">
                                <span class="record-type-point" style="color: var(--n_核心协同);">⬤</span>
                                
                                <span>构建 Obsidian 的 Hexo 写作工作流</span>
                                <div class="record-links-context hover">
                                    <p>我的解决方法是将 Plantuml 部署在本地。具体本地部署 Plantuml 的方法详见：<span class="id-context" data-target-id="4272386753">本地部署 PlantUML</span></p>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                
            </footer>
        </article>
        
        <article id="3607632637" class="record">
            <header>
                <h1 class="record-title">我上钩了——一次被钓鱼邮件受骗经历</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>3607632637</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>生活区</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('校园');">校园</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>9/22/2023</span>
                </div>
                

                

                
                <div class="record-top_img">
                    <span>top_img :</span>
                    <span></span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>d7081afd</span>
                </div>
                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/qb4akV1616727180.webp</span>
                </div>
                
                <div class="record-description">
                    <span>description :</span>
                    <span>吃一蛰，再吃一蛰</span>
                </div>
                
            </header>

            <main class="record-content">
                <p>没错，我被一封钓鱼邮件诈骗了，而且被骗的非常成功。不过庆幸的是，这是学校的一次网络安全周的邮件宣传活动，对我实际上没有什么损失，反而收获一次教训。但因为很久很久没有被诈骗过了，这次「上当」了确实心有不甘。痛定思痛，决定简单写一篇受骗反思。</p>
<h1>上一次被钓鱼诈骗</h1>
<p>这并不是我第一次被钓鱼网站诈骗，上一次被诈骗还是我 11 岁的时候。那时智能手机还不流行，我就拿别人的手机玩上古版本的 QQ。不知道是不是想领一个游戏礼包，点击链接跳转到了类似 QQ 登录界面，然后输入了 QQ 号和密码完成受骗过程。钓鱼网站的 QQ 登录肯定是登录不上的，第二天 QQ 就被盗了，盗号者疯狂在我的 QQ 空间里发布 🟨 信息，小小年纪就体验一把社死的感觉 😭。</p>
<p>最后被盗 Q 号是找回来了，心态也很快平复。不过由于事情影响在被盗的第一时间我换了新 Q 号。在各种因素的影响下，新 Q 号使用至今（可惜了之前的 9️⃣ 位数 Q 号），这算是其中最深远的影响了吧。</p>
<h1>学校的「钓鱼邮件」</h1>
<p>下面就是我的「上钩」经历。在一个平静的白天中，我正在上课，摸鱼之时看手机收到一封邮件。</p>
<p>看了大概意思是这几天内改一下邮箱密码，有截止时间要求。而且想到我已经毕业，邮箱在验证上可能有需求，并且确实出现异地登录情况。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20230922125905.webp" alt="QQ截图20230922125905.png|500"></p>
<p>没细想，我就把它加入我的待办事项中。从此，脑袋里就留下一个「限时任务」的印象。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231014182936.webp" alt="image.png"></p>
<p>几天后，晚上临睡前，手机无意看到待办事项，也看到离截止时间还有几分钟，加上待会还要 🛀，于是想着尽快完事。打开钓鱼网站后，新密码都是当场想的，于是就中招了。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/123QQ%E6%88%AA%E5%9B%BE20230922130029.webp" alt="123QQ截图20230922130029.png|500"></p>
<p>值得一提是，在收到钓鱼邮件前，我曾经看过学校的公告提醒，但我真没细看，也没留下印象：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230923161108.webp" alt="image.png"></p>
<p>更那啥的是，我曾看过去年 <a href="https://mp.weixin.qq.com/s/0m8t1iZBOfchdAonpBbg8w">USTC月饼钓鱼邮件</a> 新闻，以为 TJU 不会又搞这一波 [^lol]。这次受骗属实怪我。</p>
<p>[^lol]: 更搞笑的是，我现在就在 USTC，月饼事件正好一周年。</p>
<h1>受骗因素</h1>
<p>导致一个灾难的发生，需要精确切入各种漏洞之中。受骗也是如此。再此我总结了导致受骗发生的几点因素：</p>
<table>
<thead>
<tr>
<th>受骗因素</th>
<th>心理活动</th>
<th>社会上相关常见诈骗</th>
</tr>
</thead>
<tbody>
<tr>
<td>伪造官方的邮件</td>
<td>忽视检查，轻信</td>
<td>伪造官网 UI、假冒「公检法」的证书诈骗、假冒警官证等。使用户确信对方身份为官方。</td>
</tr>
<tr>
<td>内容确实和自己相关</td>
<td>增加信任</td>
<td>淘宝快递诈骗、疫情密接诈骗等，骗子了解用户相关信息赢取受害者信任。</td>
</tr>
<tr>
<td>紧急期限</td>
<td>慌张而不谨慎</td>
<td>公安上门拘禁诈骗、银行卡冻结诈骗、24 小时执行死刑骗局等，利用受害者慌乱心理，使其失去理智。</td>
</tr>
<tr>
<td>认为诈骗离自己很远</td>
<td>盲目自信</td>
<td></td>
</tr>
</tbody>
</table>
<p>下两图找不同，猜猜哪个是官方的？钓鱼网页共有几处漏洞？</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/123QQ%E6%88%AA%E5%9B%BE20230922132848.webp" alt="123QQ截图20230922132848.png|500"></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/123QQ%E6%88%AA%E5%9B%BE20230922132912.webp" alt="123QQ截图20230922132912.png|500"></p>
<h1>教训</h1>
<p>这次的演练成功惊醒我，虽然可能如果钓鱼网站要获取更多信息的话，我可能会产生怀疑。但不管怎么说，点击了链接我就输了，况且骗子一般不会设计复杂流程，因为「越简单的步骤受骗成功率越高」。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230923155734.webp" alt="image.png|500"></p>
<p>被骗了，除了提高防范意识外，不要太苛责自己，人无完人。遇到困难及时寻求帮助。</p>
<h1>后记</h1>
<p>不过事后想想，这封开「奖」说明其实也可以做成第二重钓鱼的呢。</p>
<p>后续：<a href="https://mp.weixin.qq.com/s/8vQobgXgWp3tuJpe6TDkvw">信网中心关于在全校开展钓鱼邮件演练活动的情况通报 (qq.com)</a>。</p>
<blockquote>
<p>本次活动以师生为演练对象，admln@tju.aduu.cc 作为发件人，以《关于邮箱密码过期请及时更新的通知》作为钓鱼邮件主题，总计发送钓鱼邮件 42922 封。大部分师生都看穿了钓鱼邮件的“伪装”，积极向信网中心反馈和举报，充分体现了我校师生良好的网络安全意识。此次演练旨在提升广大师生的邮件安全意识，演练过程不会记录您的账号密码，也不会对您的系统和设备造成任何影响。——天大信网</p>
</blockquote>
<h2>推荐防范诈骗公众号</h2>
<p>公众号：「<strong>终结诈骗</strong>」</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20230923160444.webp" alt="image.png"></p>


                
            </main>

            <footer class="list-content-container">
                

                
            </footer>
        </article>
        
        <article id="3395837292" class="record">
            <header>
                <h1 class="record-title">第一次开发 npm 插件</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>3395837292</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>生活区</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('碎碎念');">碎碎念</button>
                    
                    <button class="btn" onclick="activeTag('开发杂记');">开发杂记</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>10/20/2023</span>
                </div>
                

                

                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/RTFM_header_2cover.webp</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>ca685d6c</span>
                </div>
                
                <div class="record-description">
                    <span>description :</span>
                    <span>有文档了也看不懂</span>
                </div>
                
                <div class="record-top_img">
                    <span>top_img :</span>
                    <span></span>
                </div>
                
            </header>

            <main class="record-content">
                <p>早些时间就折腾了 Hexo 与 Obsidian 联合工作的问题。将 Obsidian 上好用的新语法移植到 Hexo 往往只差一个 markdown 渲染环节。</p>
<p>在苦苦的搜寻和探索过程中，我解决了 Obsidian 中 Callouts 语法问题，同时接触了 markdown-it-plugin。正是<a href="https://widcard.win/posts/write-plugins/write-mdit-plugin">这篇文章</a>为我打开了一扇新世界的大门。后来，我的目光一直从 hexo-plugin 和 markdown-it-plugin 之间徘徊，甚至萌生脚本全文替换的想法。出于易用性和普遍性的考虑，我最终决定直接开发一款 markdown-it-plugin 解决 Obsidian 语法问题。</p>
<p>入手 markdown-it 插件开发其实并不简单，虽说存在官方文档，但阅读门槛较高。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231020191310.webp" alt="image.png|375"></p>
<p>经过资料查阅，大多数的中英文博客文章（甚至是 markdown-it 本 it）都建议从<strong>模仿</strong>开始入手，官方并没有心思写过于详细的手把手教程（有趣的是，关于这个问题，官方仓库论坛甚至可以看到<a href="https://github.com/markdown-it/markdown-it/issues/711">开发者骂街</a>🤭）</p>
<blockquote>
<p>markdown-it 的官方文档只是给了一部分案例，用于指导如何使用它的 API，将它接入到 Web 程序中，但是光看它的文档，我并没有找到写插件的头绪。因此，写插件的最好办法就是抄别人的代码。——<a href="https://widcard.win/posts/write-plugins/write-mdit-plugin">widcardw</a></p>
<p>Q: <em>There are no any documentation or tutorial on how to write syntax plugins for Markdown-it, neither in this repository nor in internet.</em><br>
A: <em>Yes, at current time it's better to <strong>look into parser src, or existing pugins</strong>. I will add more examples &amp; explanations, but do not expect it to be in top priority.</em><br>
——<a href="https://github.com/markdown-it/markdown-it/issues/10">How to write plugins? #10</a></p>
</blockquote>
<p>有了这条明确的方向，我的插件开发探索开始了。</p>
<ol>
<li>
<p>首先，我需要明白 markdown-it 插件基本结构与开发方法。这一点官方是提供了一个基本概念和文档的。一口气肯定不能读完读懂，但阅读的过程中可以对基本渲染部件有所了解。</p>
</li>
<li>
<p>接下来，开始简单的插件源码阅读。当然是挑最简单的来读啦，我看了官方写的上标插件，看懂了又好像没看懂。复杂的地方就是 state、rule 这些。背后的机理还是没完全明白，不管了我要抓紧时间啊！</p>
</li>
<li>
<p>然后，找到合适的插件进行模仿和修改。我尝试阅读多款功能相近的插件，最终选出<a href="https://www.npmjs.com/package/@peaceroad/markdown-it-renderer-image">@peaceroad/markdown-it-renderer-image</a>作为我大改的目标。</p>
</li>
<li>
<p>有了模仿目标后就着手进行开发。这个项目不算远古项目，近期也有一定的下载量。此外，项目包含测试，以填补我 npm 插件开发盲区。整个程序代码不复杂，有些变量命名和逻辑可以进行优化。我做的工作主要是裁剪不需要的功能，写一个正则替换就行。为了项目二次开发，我把测试用例写得更好看些。</p>
</li>
<li>
<p>完成测试后就是发布环节了。发布流程也很简单，大概十几分钟后，我就能通过 npm 仓库下载自己的包开始用了，整个使用流程也十分顺利。</p>
</li>
</ol>
<p>读源码和写代码的过程中，大模型们（New Bing、ChatGPT3.5、星火认知）确实有参与，但作用不算很大，胡说八道占一半，对它的内容我都半信半疑，不如自己上网搜。</p>
<p>在校学习之余完成插件的整个开发过程，包括调研和总结，耗时 2~3 天。这次的成功也让我产生更多的开发想法，苦于在校没时间，只能期待以后尝试咯。</p>
<p>最后放上本文相关项目：<a href="https://github.com/uuanqin/markdown-it-obsidian-imgsize">uuanqin/markdown-it-obsidian-imgsize: Obsidian图片大小处理插件 (github.com)</a>，期待你的小⭐⭐😋！</p>


                
            </main>

            <footer class="list-content-container">
                

                
                <details class="record-backlinks" open="open">
                    <summary class="menu-title">
                        backlinks
                        <span class="badge">1</span>
                    </summary>

                    <ul class="record-backlinks-list">
                        
                        <li data-target-id="3569112562">
                            <a href="#3569112562">
                                <span class="record-type-point" style="color: var(--n_hexo);">⬤</span>
                                
                                <span>Hexo 博客适配 Obsidian 新语法</span>
                                <div class="record-links-context hover">
                                    <p>解决Callouts问题的过程中，搜到<a href="https://widcard.win/">widcardw</a>的博客并产生启发，于是我的第一款NPM插件markdown-it-obsidian-imgsize诞生了。开发杂记详见：<span class="id-context" data-target-id="3395837292">第一次开发 npm 插件</span>。</p>
<h2>后续考虑改进</h2>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                
            </footer>
        </article>
        
        <article id="1735498523" class="record">
            <header>
                <h1 class="record-title">好像我应该也是个生活区博主</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>1735498523</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>生活区</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('网站想法');">网站想法</button>
                    
                    <button class="btn" onclick="activeTag('友链');">友链</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>10/20/2023</span>
                </div>
                

                

                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/20231022173007.webp</span>
                </div>
                
                <div class="record-description">
                    <span>description :</span>
                    <span>最近才想起来，应该多发轻松一点的文章才对。</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>67719b1b</span>
                </div>
                
                <div class="record-top_img">
                    <span>top_img :</span>
                    <span></span>
                </div>
                
            </header>

            <main class="record-content">
                <p>博客已经建站一年半啦 😍，但是回看 70 几篇博客文章，怎么几乎全是各种<strong>代码、命令</strong>的啊 😮😅？！！我记得我当初的建站宣言包含分享「代码、艺术、游戏、<strong>生活</strong>」的啊~</p>
<p>到现在，部分友链网站对这个博客的<code>descr</code>还依然保留网站最初的愿景「分享技术、分享生活」。比如下图（截自友链<a href="https://blog.zhheo.com/link/">洪佬</a>的朋友圈）：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231020211928.webp" alt="image.png"></p>
<p>猛写代码与操作经验文章，导致一些加我为友链的小伙伴把我归类到「技术」栏里了 🤭🤭🤭......比如下图（截自友链<a href="https://yanyuplus.cn/friends">寒烟志</a>的朋友圈）：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231022173007.webp" alt="image.png"></p>
<p>很多人每天都有创造自己的文字或图画等内容，当然，我也是其中乐于记录个人生活的一员。所以从现在开始我要多多更新生活类的文章啦（况且在校学习阶段也只有生活类文章能保持更新频率 😥）。</p>
<p>在做这项决定之前，我也有很多顾虑。首先就是个人的「公私」界限问题，当前的处理方法就是两个知识库：私人笔记与想法自己维护，公共内容可以发表博客。我不喜欢一个话题维持两个版本，所有我也尽量让公库和私库有机的组成整体脉络网方便管理。</p>
<p>其次就是内容如何在博客中展示的问题。对此我安装了一个简单的首页分类导航插件以便访客快速访问上古生活类文章。目前这些生活类文章都是最近整理更新的，但为了避免在别人的「友链朋友圈」进行过度张扬，我把创建日期调整到文字完成那天了。</p>
<p>目前上新的生活类文章多为曾公开发表过的文章，所以在隐私和话题方面没有什么顾虑。此外，我还意外发现，与自己写给自己看的文章相比，公开发表的文章往往更有条理、主题更集中，在内容排版方面花费有一定的功夫，利于回顾。当然，无拘无束、自由创作的理念还是会一直秉承的~~，发不出来就私下说 🤭~~。</p>
<p>对于现阶段的网站建设来讲，今天算是一个小小的里程碑。未来网站还会继续发布更多有意思的东西。</p>
<p>对了，对于生活区的文章，欢迎大家留言。尤其是喜欢互访小伙伴，欢迎你们在生活区文章中畅所欲言~</p>
<p>感谢各位小伙伴的支持~</p>


                
            </main>

            <footer class="list-content-container">
                

                
            </footer>
        </article>
        
        <article id="1218172081" class="record">
            <header>
                <h1 class="record-title">图像采集头顶到顶部距离不通过？就用 Windows 自带的画图解决</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>1218172081</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>undefined</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('Windows');">Windows</button>
                    
                    <button class="btn" onclick="activeTag('画图');">画图</button>
                    
                    <button class="btn" onclick="activeTag('Win10');">Win10</button>
                    
                    <button class="btn" onclick="activeTag('图像采集');">图像采集</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>10/27/2023</span>
                </div>
                

                

                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/20231027151358.webp</span>
                </div>
                
                <div class="record-description">
                    <span>description :</span>
                    <span>用Windows自带软件简单调整图像的方法</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>489bd4b1</span>
                </div>
                
                <div class="record-top_img">
                    <span>top_img :</span>
                    <span></span>
                </div>
                
            </header>

            <main class="record-content">
                <p>最近开始毕业大学生图像采集，为了节省排队时间，我选择自行上传电子照片完成采集。但是在上传相片时没通过检测（本文示例图片为胖虎，并非作者本人）：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231027144939.webp" alt="image.png"></p>
<p>小问题，PS 就能解决。但如果没有使用 PS 条件，我想到的两种低配方式：</p>
<ul>
<li>PPT。我愿称之为 PS、AI 的超级平替，很多简单操作 PPT 就能完成。</li>
<li>Windows 图画。最容易被忽略的软件，他也是我小时候画板的启蒙。</li>
</ul>
<p>第一种自己弄，这里介绍第二种方法。</p>
<h1>扩大画板</h1>
<p>在开始进行操作之前，先复制一份电子证件照，然后用 Windows 图像打开。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231027145854.webp" alt="image.png"></p>
<p>按住 <kbd>Ctrl</kbd> 键滑动滚轮，缩放视图。</p>
<p>拖动图画尺寸，腾出下移空间：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231027150054.webp" alt="image.png|325"></p>
<p>右侧尽量不要有白边，宽度小 1、2 个像素没事。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231027150219.webp" alt="image.png|325"></p>
<h1>人物下移</h1>
<p>全选图像：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231027150246.webp" alt="image.png"></p>
<p>按方向键下 <kbd>↓</kbd>，将图像下移：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231027150330.webp" alt="image.png|300"></p>
<p>可见上面就露出了白色空间。</p>
<h1>颜色填充</h1>
<p>这部分的白色空间，你可以用颜料桶取色填充：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231027150431.webp" alt="image.png"></p>
<p>也可以复制矩形选区进行填充：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231027150556.webp" alt="image.png"></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231027150653.webp" alt="image.png|450"></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231027150741.webp" alt="image.png|450"></p>
<p>覆盖白色区域后，保存即可：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231027150828.webp" alt="image.png|400"></p>
<h1>比例裁剪</h1>
<p>使用你平时浏览图片的工具进行编辑裁剪，调整为 3:4 比例。</p>
<p>这里我用 Windows 自带图片查看器演示：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231027150951.webp" alt="image.png|450"></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231027151006.webp" alt="image.png|450"></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231027151021.webp" alt="image.png|450"></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231027151056.webp" alt="image.png|450"></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231027151116.webp" alt="image.png|450"></p>
<h1>后记</h1>
<p>没错，我读的是 1 年水硕。有图为证：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231027151816.webp" alt="image.png|500"></p>


                
            </main>

            <footer class="list-content-container">
                

                
            </footer>
        </article>
        
        <article id="3437638411" class="record">
            <header>
                <h1 class="record-title">本地文件夹的多端同步</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>3437638411</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>核心协同</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('foldersync');">foldersync</button>
                    
                    <button class="btn" onclick="activeTag('SyncThing');">SyncThing</button>
                    
                    <button class="btn" onclick="activeTag('OneDrive');">OneDrive</button>
                    
                    <button class="btn" onclick="activeTag('Xmind');">Xmind</button>
                    
                    <button class="btn" onclick="activeTag('Obsidian');">Obsidian</button>
                    
                    <button class="btn" onclick="activeTag('实现');">实现</button>
                    
                    <button class="btn" onclick="activeTag('Android');">Android</button>
                    
                    <button class="btn" onclick="activeTag('Harmony');">Harmony</button>
                    
                    <button class="btn" onclick="activeTag('坚果云');">坚果云</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>11/4/2023</span>
                </div>
                

                

                
                <div class="record-description">
                    <span>description :</span>
                    <span>实现Xmind思维导图的三端同步。</span>
                </div>
                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/synccoverasf.webp</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>cce6330b</span>
                </div>
                
            </header>

            <main class="record-content">
                <blockquote>
<p>[!Notice] 文章重组提示<br>
本文由文章《多端同步 Xmind 思维导图》（于 2022 年 7 月 25 创作）增加新内容完善而来。原文章永久链接不变。</p>
</blockquote>
<p>这篇文章主要介绍本人亲测使用过本地多端文件夹同步方法，这些方法不需要花钱，但有一丢丢的技术成本。在决定阅读下面的方法前你可以先做以下方面的了解，确认它们是否能解决你的需求：</p>
<ul>
<li>百度网盘的「同步空间」功能</li>
<li>阿里云盘的「自动同步文件夹」功能</li>
<li>WPS/WPS 云盘提供的「文档云同步」和「同步文件夹」功能。「文档云同步」需要占用云盘空间，「同步文件夹」普通用户可设置 1 个，会员可设置 5 个。</li>
<li>Obsidian 笔记的官方同步方案。</li>
</ul>
<h1>Foldersync Pro</h1>
<p>Foldersync Pro 是一个手机端同步文件夹的应用程序。</p>
<p>软件特点：</p>
<ul>
<li>依托各大云盘接口进行文件夹同步。</li>
</ul>
<p>本实例使用到的软件：</p>
<ul>
<li>电脑端：以 OneDrive 为例</li>
<li>安卓（鸿蒙）端（手机/平板）：foldersync pro</li>
</ul>
<p>基本原理：</p>
<ul>
<li>电脑端上，在 Onedrive 创建文件夹（这个文件夹是 OneDrive 里的），里面放置需要实时同步的文件。</li>
<li>安卓端上，使用 foldersync pro 软件可以将手机的一个文件夹与 OneDrive 里的文件夹进行实时同步。</li>
</ul>
<p>foldersync pro 软件操作流程：</p>
<ul>
<li>在「账户」标签页中添加一个账户，选择 OneDrive 账户</li>
<li>根据提示进行账户验证，输入 OAUTH 代码</li>
<li>创建文件夹对，选择 OneDrive 账户</li>
<li>根据需要，设置同步类型、远程文件夹、本地文件夹即可</li>
<li>根据需要进行计划任务、同步选项等相应设置</li>
</ul>
<p>除了 OneDrive 外，Foldersync Pro 还支持许多账户类型、WebDAV 协议。国内可以通过这种方法使用坚果云账户进行同步，详看 <a href="https://help.jianguoyun.com/?p=2887">如何使用 FolderSync 在安卓手机上同步文件夹到坚果云？ | 坚果云帮助中心 (jianguoyun.com)</a>。</p>
<p>由于 OneDrive 传输大文件网速极慢，Foldersync 实时同步性较差，导致文件冲突难免发生。为此我转战到下一个软件 SyncThing。</p>
<h1>SyncThing</h1>
<p>软件特点：</p>
<ul>
<li>私密性强。数据只在端到端流转。传输内容加密。</li>
<li>使用时可以进行账户验证。</li>
<li>使用开放协议。软件 <a href="https://github.com/syncthing/syncthing">开源</a>。</li>
<li>支持 Android、MacOC、Windows 端</li>
</ul>
<p>本实例使用到的软件：</p>
<ul>
<li>电脑端：SyncThing</li>
<li>安卓（鸿蒙）端（手机/平板）：SyncThing</li>
</ul>
<p>基本原理：</p>
<ul>
<li>电脑端：选择添加文件夹，根据提示进行创建。手机或平板上安装好 SyncThing 时，电脑端添加一个设备。最后在设备选项选择需要共享的文件夹即可。</li>
<li>移动端：安装好软件后，可进行文件夹或设备管理。按提示操作即可。</li>
</ul>
<p>同步过程中注意暂停使用魔法。</p>
<p>官方手册：<a href="https://docs.syncthing.net/v1.25.0/intro/gui">An Intro to the GUI — Syncthing v1.25.0 documentation</a></p>
<h1>其他问题</h1>
<h2>我要同步 Xmind 文件夹</h2>
<p>使用移动端 Xmind 时软件会引导你指定一个文件夹是的 Xmind 拥有读写权限。接下来就可以直接使用了。如果你的 Xmind 来历不正规，记得取消它的联网权限，这样防止它总是弹出自动更新的提示框。</p>
<h2>我想同步 Obsidian 仓库</h2>
<p>如果不使用 Obsidian 官方同步方案，可以利用前面介绍的两款软件进行仓库的同步，照样能达到理想的效果。</p>
<h2>移动端防后台杀死进程</h2>
<p>为了保证文件同步进程不被杀死，需要赋予这些程序一定的权限，反正都试试。这里以华为鸿蒙 3 举例：</p>
<ul>
<li>关闭省点优化</li>
<li>后台进程加个小锁</li>
<li>“应用启动管理”中选择手动管理，并把三个选项都选上。（我认为最有用）</li>
</ul>
<h2>WPS 移动端并不能实时修改本地文件</h2>
<p>在本地打开文档时，使用 WPS 可以正常编辑和预览。但是 WPS 中做出的更改并不能实时更新到本地的文档中，导致同步软件检测不到文档的更改。</p>
<p>那为什么在资源管理器点击文档是可以看到先前的更改呢？WPS 将这些操作透明化了。在资源管理器点击文档后，WPS 自动打开到另一个文件夹中对应的文件，导致用户以为是本地的文件做出的更改。（这一点真的恶心死我了）</p>
<p>暂时的解决办法：手动「另存为」。</p>
<h1>本文参考</h1>
<ul>
<li><a href="https://www.bilibili.com/video/BV1bu411k74U/?spm_id_from=888.80997.embed_other.whitelist">https://www.bilibili.com/video/BV1bu411k74U/?spm_id_from=888.80997.embed_other.whitelist</a></li>
</ul>


                
            </main>

            <footer class="list-content-container">
                

                
                <details class="record-backlinks" open="open">
                    <summary class="menu-title">
                        backlinks
                        <span class="badge">1</span>
                    </summary>

                    <ul class="record-backlinks-list">
                        
                        <li data-target-id="3567162190">
                            <a href="#3567162190">
                                <span class="record-type-point" style="color: var(--n_生活区);">⬤</span>
                                
                                <span>那一年的暑假剪影</span>
                                <div class="record-links-context hover">
                                    <p>[^Xmind]: 应该是这篇文章<span class="id-context" data-target-id="3437638411">本地文件夹的多端同步</span>，不过现在的文章内容可能有改版和修正。</p>
<h1>day2 我对我所学专业的一点思考</h1>

                                </div>
                            </a>
                        </li>
                        
                    </ul>
                </details>
                
            </footer>
        </article>
        
        <article id="1813820909" class="record">
            <header>
                <h1 class="record-title">「多媒体与信号处理」课程笔记</h1>

                

                <div class="record-id">
                    <span>id :</span>
                    <span>1813820909</span>
                </div>

                <div class="record-type">
                    <span>types :</span>
                    <span>undefined</span>
                </div>

                
                <div class="record-tags">
                    <span>keywords :</span>
                    
                    <button class="btn" onclick="activeTag('嵌入式');">嵌入式</button>
                    
                    <button class="btn" onclick="activeTag('笔记');">笔记</button>
                    
                    <button class="btn" onclick="activeTag('多媒体');">多媒体</button>
                    
                    <button class="btn" onclick="activeTag('MP3');">MP3</button>
                    
                    <button class="btn" onclick="activeTag('AVC');">AVC</button>
                    
                    <button class="btn" onclick="activeTag('010编辑器');">010编辑器</button>
                    
                    <button class="btn" onclick="activeTag('JPEG');">JPEG</button>
                    
                    <button class="btn" onclick="activeTag('WAV');">WAV</button>
                    
                    <button class="btn" onclick="activeTag('AVI');">AVI</button>
                    
                    <button class="btn" onclick="activeTag('BMP');">BMP</button>
                    
                    <button class="btn" onclick="activeTag('DCT');">DCT</button>
                    
                    <button class="btn" onclick="activeTag('USTC');">USTC</button>
                    
                </div>
                

                
                <div class="record-begin">
                    <span>Begin :</span>
                    <span>11/22/2023</span>
                </div>
                

                

                
                <div class="record-description">
                    <span>description :</span>
                    <span>科软嵌入式必选课程笔记</span>
                </div>
                
                <div class="record-abbrlink">
                    <span>abbrlink :</span>
                    <span>6c1cb5ed</span>
                </div>
                
                <div class="record-cover">
                    <span>cover :</span>
                    <span>https://cdn.gallery.uuanqin.top/img/jshkcover.webp</span>
                </div>
                
                <div class="record-top_img">
                    <span>top_img :</span>
                    <span></span>
                </div>
                
            </header>

            <main class="record-content">
                <h1>笔记说明</h1>
<p>这是 USTC 软件学院 - 苏州 2023 秋季学期课程笔记（互联网版本）。本着藏着掖着发霉不如对外分享发光的精神，现将其公布。<a href="https://github.com/uuanqin/multimedia-signal-processing-notes">原本的笔记</a> 是卡片式的，为了便于互联网传播与收藏，现整合到同一篇文章当中。</p>
<p>这篇笔记的特点在于：</p>
<ul>
<li>有机涵盖 PPT 内容，精心编排，存在本人的理解消化过程</li>
<li>有重点标识、考点标识、实际考察标识</li>
<li>存在一些习题以供复习</li>
<li>部分图片为作者手工制作，便于知识的理解和掌握</li>
</ul>
<p>本笔记存在以下的符号定义：</p>
<ul>
<li>🔺表示老师经常在课上提，为考试重点。</li>
<li><span style="color:#ff0000">红色字体</span>为 <em>部分</em> 实际考察内容（指的是 2023 秋季学期考试）。</li>
</ul>
<p>本笔记的内容来源：</p>
<ul>
<li>主要来源：课程 PPT。注意，笔记的章节顺序是经过梳理调整的，顺序不一定与 PPT 讲授过程相符。</li>
<li>参考补充：<a href="https://blog.csdn.net/qq_39266065/article/details/106225637">秃头学长的笔记</a>，补充了一些练习题。</li>
</ul>
<p>笔记共分为 12 个章节。由于作者水平、精力与时间有限，「时频映射」的两个 Slices 以及「H.264」的 PPT 仅记录部分关键内容，内容也较粗糙（打上了「落叶🍂」标记）。由于当时考试不考「MP4」，所以笔记里也不包含这个章节。</p>
<p>临考前老师列出了多媒体信号处理课程知识点（详看 本课知识点 小节）。在后续的章节中这些知识点将以「考点」标注，如下示例：</p>
<blockquote>
<p>[!hint] 考点 X：[考点内容]</p>
</blockquote>
<p>如果你有以下需求：</p>
<ul>
<li>查看笔记源码</li>
<li>想导入到自己的双向笔记库中</li>
<li>习惯在 Github 上阅读</li>
<li>为笔记做贡献</li>
</ul>
<p>可以访问 <a href="https://github.com/uuanqin/USTC-SSE-multimedia-signal-processing-notes">本项目</a>：</p>
<p><a href="https://github.com/uuanqin/USTC-SSE-multimedia-signal-processing-notes"><img src="https://github-readme-stats.uuanqin.top/api/pin/?username=uuanqin&amp;repo=USTC-SSE-multimedia-signal-processing-notes" alt="Readme Card"></a></p>
<p>任何贡献都 Welcome！🎉🎉如果你有更新本笔记的想法（或者仅仅是纠错）可以通过邮件或评论区联系我！同时也期待你的 star~</p>
<hr>
<h1>导论（格式概览）</h1>
<p>什么是多媒体？包括文字、视频、静态图像、动画、交互内容。应用于广告、艺术、教育</p>
<p>什么是信号处理？</p>
<ul>
<li>系统工程、电子工程和应用数学领域</li>
<li>操作、分析模拟信号和数字信号</li>
<li>代表时空变化的物理量</li>
<li>典型的操作和应用：信号获取与重构、信号压缩、特征提取、质量提升（降噪，图像增强等）</li>
</ul>
<h2>🔺 数据压缩</h2>
<p>无损压缩：识别并消除统计冗余，无信息丢失</p>
<ul>
<li>LZW、Huffman coding（哈夫曼编码）、Arithmetic coding（算数编码）</li>
</ul>
<p>有损压缩：识别并移除不重要的信息</p>
<ul>
<li>Quantization（量化）、JPEG</li>
</ul>
<h2>数字容器格式 Digital Container Format</h2>
<blockquote>
<p>[!hint] 考点 1：音频、图像和视频的格式与容器</p>
</blockquote>
<p><strong>容器文件用做识别并交织不同数据形式。</strong></p>
<p>容器格式部件的不同名称：</p>
<ul>
<li>RIFF、PNG：chunks 块</li>
<li>QuickTime/MP4：atoms 原子</li>
<li>MPEG-TS：packets 包 （来自通信术语）</li>
<li>JPEG：段</li>
</ul>
<p>🎵 音频独有的容器：</p>
<ul>
<li>AIFF（IFF 文件格式，在 Mac OS 平台上广泛使用）</li>
<li>WAV（RIFF 文件格式，在 Windows 平台上广泛使用）</li>
<li>XMF（可扩展音乐格式）</li>
</ul>
<p>🖼 静态图像独有的容器：</p>
<ul>
<li><strong>TIFF</strong> (Tagged Image File Format，标记图像文件格式) 静止图像和关联的元数据。</li>
</ul>
<p>其他可以接纳多种音视频类型或其他媒体的容器：</p>
<ul>
<li><strong>3GP</strong> (在许多手机中使用；基于 ISO 基本媒体文件格式，是 MP4 的变种）</li>
<li><strong>ASF</strong>（Microsoft WMA 和 WMV 的容器）</li>
<li><strong>AVI</strong>（标准的 Microsoft Windows 容器）</li>
<li>Flash Video (<span style="color:#ff0000">FLV</span>, F4V) （来自 Adobe Systems 的视频和音频容器）</li>
<li>Matroska (MKV) （不限于任何编解码器或系统）</li>
<li>MJ2-Motion JPEG 2000 文件格式.</li>
<li><strong>QuickTime</strong> File Format（Apple 的标准 QuickTime 视频容器）</li>
<li>MPEG program stream (standard container for MPEG-1 and MPEG-2 elementary streams)</li>
<li>MPEG-2 transport stream (a.k.a. MPEG-TS) (standard container for digital broadcasting and for transportation over unreliable media; used also on Blu-ray Disc video)</li>
<li><strong>MP4</strong> (standard audio and video container for the MPEG-4 multimedia portfolio)</li>
<li>Ogg (standard container for <a href="http://Xiph.org">Xiph.org</a> audio format Vorbis and video format Theora)</li>
<li>RM (RealMedia; standard container for RealVideo and RealAudio)</li>
</ul>
<p>其他：SWF、RMVB</p>
<h2>音频格式 🎵</h2>
<p>非压缩的音频格式：WAVE、AIFF、Raw PCM</p>
<p>无损压缩格式：FLAC、<span style="color:#ff0000">Monkey’s audio (APE extension)</span>, Shorten, WMA Lossless</p>
<p>有损压缩格式：MP3, AAC, <strong>WMA</strong>, AC3</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231101184441.webp" alt="image.png|475"></p>
<h2>图像格式 🖼</h2>
<p>RAW、BMP、JPEG、JPEG2000、GIF、PNG</p>
<h2>视频格式 🎞</h2>
<p>MPEG-1、MPEG-2、MPEG-4 visual/AVC、H.261、H.263、H.264</p>
<ul>
<li>Advanced Video Coding（ISO）=H.264（ITO）</li>
</ul>
<blockquote>
<p>tea：H 开头一般和电信相关</p>
</blockquote>
<p>视频压缩标准的历史详看 视频编码 小节。</p>
<h1>BMP、WAV、AVI 格式</h1>
<h2>Windows Bitmap🖼</h2>
<h3>文件结构</h3>
<blockquote>
<p>[!hint] 考点 4：Windows Bitmap 文件结构</p>
</blockquote>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231104183213.webp" alt="image.png"></p>
<p>bfOffBits：是从位图文件头到位图数据的偏移量。即位图信息头 (BITMAPINFOHEADER)+ 全部颜色对照表 (RGBQUAD) 的字节数。</p>
<p>数据由代表位图的连续行或扫描线的字节值数组组成。每条扫描线由连续的字节组成，这些字节按从左到右的顺序代表扫描线中的像素。</p>
<p>代表扫描线的字节数取决于位图的宽度。</p>
<p><span style="color:#ff0000">扫描线以 32bit 为边界</span>，必须用 0 填充至末尾。</p>
<ul>
<li>这意味着宽度为 8 位，20 位或 30 位的单色位图将具有相同的扫描线大小：32 位</li>
<li>40 位宽的单色位图将具有 64 位的扫描线大小。</li>
</ul>
<p>Bitmap 中的扫描线是<strong>自底向上</strong>存的</p>
<ul>
<li>数组中的第一个字节代表 bitmap 左下角</li>
<li>数组中的最后一个字节代表 bitmap 右上角</li>
</ul>
<h3>位图种类</h3>
<h4>灰度位图</h4>
<ul>
<li>每个像素使用 <strong>8 个比特（1 字节）</strong>。Info Header 中的 biBitCount 将为 8。</li>
<li>每个字节代表 256 种灰度阴影。白色为 FF，黑色为 00</li>
<li>实质上是 8-bit 彩色位图的特例。存在一个颜色表，其中条目 0 指向黑色，条目 255 指向白色，而介于两者之间的条目指向灰色阴影。对于一个给定大小的图像来说，8-bit 灰度位图和 8-bit 彩色位图是一样的</li>
</ul>
<h4>24-Bit 彩色位图</h4>
<ul>
<li>每个像素使用 <strong>24 个比特（3 个字节）</strong>。Info Header 中的 biBitCount 将为 24。</li>
<li>每个像素 3 个字节代表红绿蓝。白色 FFFFFF，黑色 000000，红色 FF0000，绿色 00FF00，蓝色 0000FF</li>
</ul>
<h4>8-Bit 彩色位图</h4>
<ul>
<li>每个像素使用 8 个比特，只有 256 种颜色，通过调色板实现</li>
<li>颜色表在 info header 和 Data 之间，每一对含有 4 个字节（R, G, B, 0x0）</li>
</ul>
<p>颜色表：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231101184757.webp" alt="image.png|475"></p>
<h2>WAV 格式 🎵</h2>
<blockquote>
<p>[!hint] 考点 5：WAVE 格式</p>
</blockquote>
<blockquote>
<p>[!hint] 考点 8：列出一个块的组件</p>
</blockquote>
<p>WAV 是存储数字音频（waveform）的简单文件格式，使用了 RIFF 结构将文件内容分为不同的块（chunk）。</p>
<ul>
<li>每个块均由标头和数据字节组成。</li>
</ul>
<ul>
<li>Header 指定块数据字节的类型和大小。</li>
</ul>
<p>它支持各种 bit 分辨率、采样率和音频通道</p>
<p>流行于 Windows 平台，广泛应用于处理数字音频波形程序中</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231101184818.webp" alt="image.png"></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231101184830.webp" alt="image.png"></p>
<p>所有使用 WAV 的应用必须能够读取两个必要块（fmt、data），并且可以有选择的忽略可选块。</p>
<p>程序复制一个 WAV，应该复制 WAV 中所有的块，即使有一些块最后不会被解释</p>
<p>次序要求：在 WAV 文件中，<strong>除了 Format 块必须在 Data 块前外</strong>，块的顺序没有限制</p>
<p>注意，format 块也许不是第一个块。一个 WAV 文件通常有三个 chunk 以及一个可选 chunk，其在文件中的排列方式依次是：</p>
<ol>
<li>RIFF chunk</li>
<li>Format chunk</li>
<li>Fact chunk（附加块，可选）</li>
<li>Data chunk</li>
</ol>
<p>所有的数据都以 8 位字节存储，以<strong>小端</strong>形式存于字节中</p>
<p>「块（的）数据」和「数据块」不是一个概念：<strong>数据块</strong>有「块大小」和一些「块数据」，其他所有块也是如此。</p>
<h3>组成</h3>
<p>WAV 组成：不同类型的 chunk 的集合。每个块包含头及数据，头指定了<strong>块数据</strong>的类型和大小，一些类型的块可能含有子块。<strong>RIFF 文件块必须以 2 个字节（1 word）对齐。</strong></p>
<h4>【必含】fmt 块</h4>
<p>fmt 块，采样格式，包含描述波形的参数，比如采样率、位分辨率和通道数</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231101185009.webp" alt="image.png"></p>
<pre><code class="language-C">typedef struct {
    ID chunkID;                 // 块的标识。总是「fmt 」注意末尾有空格。
    long chunkSize;             // 块的大小（除去chunkID、chunkSize）
    short wFormatTag;           // 存储数据时使用的压缩方法
    unsigned short wChannels;   // 音频的通道数。 1:单声道; 4:四通道
    unsigned long dwSamplesPerSec;  // 采样率。标准：44.1KHZ 48KHZ 32KHZ 22.05KHZ 96KHZ
    unsigned long dwAvgBytesPerSec; // 每秒播放多少字节，用于估计RAM需要的大小。
                                    // 其值应等于 dwSamplesPerSec * wBlockAlign的上取
    unsigned short wBlockAlign; // 采样帧的大小（字节）
							    // 其值等于 wChannels * (wBitsPerSample / 8) 的上取
								// 例如：
								// 3个未压缩的通道组成一个块，每个通道2个字节，则Block align=6
    unsigned short wBitsPerSample;   // 采样点的位分辨率
    unsigned short cbSize;      // Size of the extension，扩展字段的长度
    // 也许有额外的域, 取决于 wFormatTag
} FormatChunk;
</code></pre>
<table>
<thead>
<tr>
<th>🔺wFormatTag 值</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>0x0001</td>
<td>WAVE_FORMAT_PCM 未压缩的数据</td>
</tr>
<tr>
<td>0x0002</td>
<td>WAVE_FORMAT_ADPCM</td>
</tr>
<tr>
<td>0x0006</td>
<td>WAVE_FORMAT_ALAW （电话格式）</td>
</tr>
<tr>
<td>0x0007</td>
<td>WAVE_FORMAT_MULAW （电话格式）</td>
</tr>
<tr>
<td>0x55=85</td>
<td>WAVE_FORMAT_MP3</td>
</tr>
</tbody>
</table>
<h5>WAVEFORMATEXTENSIBLE 扩展的 WAVE 格式块</h5>
<pre><code class="language-C">typedef struct {
    WAVEFORMATEX Format;
    union {
        WORD wValidBitsPerSample; // 信号精度的比特数
							      // 假设使用24bit，但只前20位有效，则wValidBitsPerSample=20
        WORD wSamplesPerBlock; // 一个音频压缩块数据的样本数
        WORD wReserved;
    } Samples;
    DWORD dwChannelMask; // 指定流中通道到扬声器位置的分配的位掩码
    GUID SubFormat; // 对每一个波形数据类型定义的 ID。例如WMA中不同压缩方式。
} WAVEFORMATEXTENSIBLE
</code></pre>
<p>位掩码 dwChannelMask：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231101185109.webp" alt="image.png|500"></p>
<p><span style="color:#ff0000">用于超过 2 通道或 16 分辨率的音频数据</span>：</p>
<ul>
<li><code>wFormatTag</code> = FFFE（-2）</li>
<li><code>cbSize</code> = 24</li>
</ul>
<p>以 6 通道 5.1 格式为例子：</p>
<pre><code class="language-C">WAVEFORMATPCMEX waveFormatPCMEx;
// FormatChunk
wFormatTag = WAVE_FORMAT_EXTENSIBLE; //FFFE
wChannels = 6;
dwSamplesPerSec = 48000L;
dwAvgBytesPerSec = 864000L;          // nBlkAlign * nSamp/Sec = 18 * 48000 
wBlockAlign = 18;
wBitsPerSample = 24;                 // Container has 3 bytes
cbSize = 22;
// 以下是拓展的域
wValidBitsPerSample = 20;            // Top 20 bits have data
dwChannelMask = KSAUDIO_SPEAKER_5POINT1;
// SPEAKER_FRONT_LEFT | SPEAKER_FRONT_RIGHT |
// SPEAKER_FRONT_CENTER |SPEAKER_LOW_FREQUENCY |
// SPEAKER_BACK_LEFT | SPEAKER_BACK_RIGHT
SubFormat = KSDATAFORMAT_SUBTYPE_PCM; // Specify PCM
</code></pre>
<h4>【必含】data 块</h4>
<p>音频数据，包含实际波形数据，比如所有通道的数据波形</p>
<pre><code class="language-C">typedef struct {
    ID chunkID;
    long chunkSize;
    unsigned char waveformData[];
} DataChunk;
</code></pre>
<p>交错立体声波样本：多通道采样存储于交错的波形数据中；8bit 样本采用无符号数据表示，其他样本使用有符号数据表示。</p>
<p>对于多声道声音，每个声道的单个采样点是交错的。一组交错的采样点称为一个采样帧。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231101185123.webp" alt="image.png"></p>
<p>假设存在两个通路，先存放 time1 的左通道和右通道数据，再存放 time2，以此类推。</p>
<h4>其他</h4>
<p>fact 块（详见 音频编码基础 小节 的 ADPCM 章节）、cue 块</p>
<h2>AVI 格式 🎵🎞</h2>
<blockquote>
<p>[!hint] 考点 3：AVI 容器</p>
</blockquote>
<p>AVI 是另一种 RIFF，由微软开发</p>
<p>音视频交织，即视频段数据紧接音频数据。这允许媒体播放器<strong>以块来读数据而不是文件整体</strong>。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231101185135.webp" alt="image.png|475"></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231101185202.webp" alt="image.png"></p>
<p>注意 AVI 是 Wave 格式，必须以两个字节（1 word）对齐，填充。解码时不需要考虑填充的数据。</p>
<p>索引目的：为了支持随机访问</p>
<blockquote>
<p>[!hint] 考点 6：解释 FOURCC 中 &quot;00dc&quot;，&quot;vids&quot; 等标签的意思</p>
</blockquote>
<p>🔺流列表中的四字节码：</p>
<ul>
<li><span style="color:#ff0000">vids：video stream</span></li>
<li>auds：audio stream</li>
<li>mp4v：MEPG4 visual</li>
</ul>
<p>数据块可以直接驻留在 movi 列表中，或者被 res 列表包围。</p>
<p>🔺FOURCC，定义块中信息的类型：</p>
<ul>
<li>db：未压缩的视频帧</li>
<li>d<strong>c</strong>：压缩的视频帧</li>
<li><span style="color:#ff0000">wb：音频流</span></li>
</ul>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231101185239.webp" alt="image.png"></p>
<blockquote>
<p>[!Example] 习题助记</p>
<ol>
<li>What does fourcc code “vids” stands for?</li>
<li>What does fourcc code “auds” stands for?</li>
<li>What does fourcc code “00db” stands for?</li>
<li>What does fourcc code “01wb” stands for?</li>
<li>ln which scemarops is wFormatTag equal to -2 in a WAVE file?<br>
音频通道大于 2，每一个抽样信号大于 16bit</li>
</ol>
</blockquote>
<h1>音频编码基础</h1>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102130537.webp" alt="image.png"></p>
<p>数字音频编码器：</p>
<ol>
<li>输入：模拟音频信号</li>
<li>编码器：转换为方便地数字形式</li>
<li>存储、处理、传输</li>
<li>解码器：将数字数据转换为模拟信号</li>
</ol>
<p>🔺音频编码目标：</p>
<ul>
<li>保真度：解码器尽量<strong>提高</strong>感知的音频质量，减少失真</li>
<li>数据率：减少代表原始音频信号的数据量</li>
<li>复杂性：减少计算复杂性</li>
<li>延迟：减少编码延迟</li>
</ul>
<h2>PCM——最简单的编码器</h2>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102130552.webp" alt="image.png|475"></p>
<p>量化是一种有损的过程。</p>
<p>在量化过程中使用的离散值数目越高，输出的信号越接近原始音频</p>
<h2>CD：Compact Disc 激光唱片</h2>
<blockquote>
<p>[!hint] 考点 7：CD 的数据率</p>
</blockquote>
<p>CD 的数据率：44.1k/s × 16 bit × 2 =<span style="color:#ff0000"> 1.4112 Mb/s</span></p>
<ul>
<li>采样：时间间隔 0.023ms（1/0.000023≈43.5k）或采样频率 <strong>44.1k。</strong></li>
<li>每一个采样的比特数为 16bit，这种精度允许 65536 个离散电平来表示音频采样幅度。</li>
<li>2 个通路</li>
</ul>
<h2>潜在的编码错误</h2>
<blockquote>
<p>[!hint] 考点 9：潜在的编码错误</p>
</blockquote>
<ul>
<li>采样错误——混叠效应（抽样速率小于二倍带宽）</li>
<li>🔺<span style="color:#ff0000">量化错误：过载错误、截断错误（round-off）</span></li>
<li>比特错误：存储和传输错误</li>
</ul>
<h2>更复杂的编码器</h2>
<p>心理声学表明，每个样本理想采样比特为 18-20bits 来描述中等频率（2~5kHz）的音频样本。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102130608.webp" alt="image.png|500"></p>
<p>冗余：感知冗余、统计冗余</p>
<blockquote>
<p>[!hint] 考点 10：有损压缩和无损压缩</p>
</blockquote>
<h2>有损压缩</h2>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102130629.webp" alt="image.png"></p>
<p><strong>有损压缩通过量化来实现。</strong></p>
<h3>量化</h3>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102130648.webp" alt="image.png|500"></p>
<p>如果有 R 比特可以表示的最大数为 $2^R$，两种量化方法表示的不同样本/编码数为：</p>
<ul>
<li>midtread 中平：$2^R-1$，一般来说效果较好，噪声抑制（小电频通常为噪声，Midtread 会过滤掉）</li>
<li>midrise 中升：$2^R$，噪声放大</li>
</ul>
<blockquote>
<p>[!hint] 考点 11：均匀量化和非均匀量化</p>
</blockquote>
<h4>均匀量化 Uniform Quantization</h4>
<p>定义输入范围所需要的信息：</p>
<ul>
<li>量化器是 midtread 还是 midrise</li>
<li>最大不过载的输入 $x_{max}$</li>
<li>描述编码的比特数 R</li>
</ul>
<p>R 比特允许我们设置的输入范围：</p>
<ul>
<li>midrise：$\Delta=2*x_{max}/2^R$</li>
<li>midtread：$\Delta=2*x_{max}/(2^R-1)$</li>
</ul>
<h4>非均匀量化 Nonuniform Quantization</h4>
<p>均匀量化会存在截断误差（最大值为 $\Delta/2$)，但是，相对于非常低的幅度信号，此误差可能会很大。<strong>由于截取失真的感知与相对误差更相关，因此这意味着均匀量化器在低功率输入信号上的表现要比在高功率信号上的差得多。</strong> 要解决此问题，可以使用非均匀量化。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102130912.webp" alt="image.png|350"></p>
<p>压缩方法：</p>
<ul>
<li>幂律压缩：$c_{power}(|x|)=|x|^p，0&lt;p&lt;1$, (ACC 或 MP3 中 p=0.75）</li>
<li>对数压缩</li>
</ul>
<p>量化错误 Quantization Errors：</p>
<ul>
<li>量化误差：$q(t)=x_{out}(t)-x_{in}(t)$</li>
<li>信噪比 SNR（Signal-to-noise ratio） $SNR=10 \log{\frac{x_{in}^2}{q^2}}$</li>
<li><strong>低 量化误差 对应于 高 信噪比</strong></li>
</ul>
<p>截断错误 Round-off Error：产生于将一定范围的信号振幅输入对应到单一编码中</p>
<p>过载错误 Overload Error：</p>
<ul>
<li>出现原因：量化器接收的信号振幅（绝对值）过大</li>
<li>导致爆鸣（突突突的声音），为了避免它，通常把 $x_{max}$ 设置得足够大，但由于 R 比特数固定，这会导致截断错误。量化器设计要求在减少两种类型的误差之间取得平衡。</li>
</ul>
<p>过载错误、截断错误属于量化错误。</p>
<h2>无损压缩：熵编码</h2>
<blockquote>
<p>[!hint] 考点 12：熵和哈夫曼编码</p>
</blockquote>
<p>翻译量化编码为一些代表符号，每个符号使用了一定数量的比特。</p>
<p>使一般的编码更短，从而降低平均的比特率。这需要估计每一个可能编码出现的概率。</p>
<p>比特率计算：$R = \sum_{i=1}^n{p_i \cdot L_i}$，其中 $p_i$ 表示编码出现的概率，$L_i$ 表示编码后的长度。</p>
<p><span style="color:#ff0000">熵代表了编码的极限：</span></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231126174729.webp" alt="image.png"></p>
<p><strong>当我们能确保下一个输出编码是什么时，熵会变低；反之变高。</strong></p>
<p>例：在 2 编码符号系统中，有</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102131253.webp" alt="image.png"></p>
<p>数学图像 <a href="https://www.desmos.com/calculator/fkd2gp4jc5?lang=zh-CN">链接</a></p>
<ul>
<li>当 p=0 或 1 时，熵为 0。我们知道下一个编码是什么，所以我们不需要发送任何 Bits。</li>
<li>当 p=0.5，熵为 1。当所有编码符号出现的概率相同时，达到最大熵。在这种情况下使用熵编码进行压缩没有效果。</li>
<li>对于其他概率，存在一种编码方式使得平均符号编码使用小于 1 个比特</li>
</ul>
<h3>哈夫曼编码</h3>
<p>被用于传真、ASCII 文本数据编码压缩。</p>
<p>是一种统计学编码，平均编码长度最小。</p>
<p>编码长度可变，且越经常使用的字符编码长度越短。</p>
<p>特点：</p>
<ol>
<li>编码过程不唯一（取决于分支的标记或合并符号的选择），但 WPL 相同（在这里指的是比特率 R）且最优</li>
<li>在符号分布概率不均匀的情况下，哈夫曼编码的比特数比固定比特编码方法少</li>
<li>霍夫曼码中每个样本的平均位数在熵的一位以内，即平均采样比特数范围：$$Entropy\le <R>_{Huffman} \le Entropy + 1$$</li>
</ol>
<h2>WAVE MS-ADPCM</h2>
<blockquote>
<p>[!hint] 考点 13：MS-ADPCM</p>
</blockquote>
<p>DPCM 差分脉冲编码调制：</p>
<ul>
<li>以 PCM 为基线，增加了预测采样信号的功能。</li>
<li>与 PCM 直接传输原始 PCM 采样不同的是，DPCM 传输的是原始采样信号与预测值（基于先前采样）之间的差异：$diff=x_{n+1}-xp_{n+1}$</li>
<li>预测值计算举例：$xp_{n+1}=a<em>x_n+b</em>x_{n-1}$，a、b 为预测系数</li>
</ul>
<p>diff 通常非常小，我们必须限制它的表示范围，如从 16bits 限制到 4bits。但我们也不能保证 diff 总是小的（如剧烈信号变化），为了解决这个问题，引入了 iDelta。如果 diff 非常大，则 iDelta 也会很大，反之亦然。</p>
<p>于是我们定义：$iErrordata = diff / iDelta$，这样新的差异值将会稳定。</p>
<p>iErrordata 以 4bit 保存，称为「nibble」，范围为 -8~7。每次新的 iErrordata 生成后，iDelta 相应做出改变。</p>
<pre><code class="language-C">iDelta = iDelta * AdaptableTable[(unsigned)nibble]/256;
const int AdaptationTable[ ] = {
230, 230, 230, 230, 307, 409, 512, 614,    // 对应nibble：
768, 614, 512, 409, 307, 230, 230, 230 };  // 对应nibble：
</code></pre>
<h3>WAVEFORMAT</h3>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231105205607.webp" alt="image.png"></p>
<p>MS-ADPCM 的 wave 文件中，存在与 fmt 块和 data 块的另一种块：fact 块</p>
<ul>
<li>fact 块存储采样长度</li>
<li>data 块中，数据以块的方式存储，一个接着一个</li>
<li>块有三个部分：头、数据和填充</li>
</ul>
<h3>编码过程</h3>
<p>对于每个通道的每个块的编码过程：</p>
<ol>
<li>决定块要使用的预测器</li>
<li>决定块的初始 idelta</li>
<li>输出块的头</li>
<li>编码并输出数据</li>
</ol>
<p>块头写入：</p>
<ol>
<li>对每一个通道，输出预测器的选择</li>
<li>对每一个通道，输出初始 idelta (量化比例)</li>
<li>对每一个通道，输出第一个采样的 16bit PCM 值</li>
<li>对每一个通道，输出第二个采样的 16bit PCM 值</li>
</ol>
<p>然后剩下的块就可以进行编码。<strong>注意第一个编码的值是块的第三个采样，因为前两个已经包含在头中了。</strong></p>
<p>当块中有许多采样需要进行编码，将采取下列步骤：</p>
<ol>
<li>从前两个采样中预测下一个样本：<br>
<img src="https://cdn.gallery.uuanqin.top/img/20231123215918.webp" alt="image.png"></li>
</ol>
<blockquote>
<p>用预测系数计算会导致运算量增长，而除以 256 只需要移位，无浮点数除法</p>
</blockquote>
<ol start="2">
<li>产生 4bit 有符号 error delta 以及避免上/下溢：$$ierrordelta=\frac{sample(n)-Ipredsamp}{idelta}$$ 并将 ierrordelta 的范围修剪至[-8,7]</li>
<li>于是输出 nibble ierrordelta=<code>putnibble(ierrordelta)</code></li>
<li>把「预测错误」加到预测的下一个样本，并避免上/下溢：$$Inewsamp=Ipredsample+(idelta*ierrordelta)$$ 将其缩紧至 16bit（short）</li>
<li>调整用于计算「预测错误」的量化步长：$$idelta=\frac{idelta*adaptiontable[ierrordelta]}{fixed_point_adaption_base}$$ 如果 idelta 过小，将其设为最小的合法值</li>
<li>更新先前样本的记录：$$isamp2 = isamp1; isamp1 = Inewsample$$<br>
<img src="https://cdn.gallery.uuanqin.top/img/20231102131901.webp" alt="image.png"><br>
步骤 5 的目的是自适应量化步长。<br>
步骤 4.6 是为了保持和解码端一致，真正预测时是通过编码解码后的信号。此时和解码端保持一致，使误差不会太大。</li>
</ol>
<blockquote>
<p>[!Example] 习题助记<br>
1.What is audio CD rate?<br>
44.1KHZ × 2 × 16bit/s = 1.411 Mbit<br>
2.What are audio coding goals?<br>
delity，rate，complexity，delay<br>
3.List the components of a chunk.<br>
header，data<br>
4.What kind of quantization errors are there in audio coding?<br>
overlode，round-off<br>
5.What is the average number of bits per sample in a Huffman code?</p>
</blockquote>
<h1>图片和视频编码基础</h1>
<p>🔺人类视觉系统对低频图像更敏感。</p>
<blockquote>
<p>图形学中的高低频：图像的低频代表着轮廓信息，高频代表着细节信息，相位代表位置信息。</p>
</blockquote>
<p>特定自然视频片段中与视频处理和压缩相关的特征：</p>
<ul>
<li>空间特征：纹理变化、物体对象的数目和形状、颜色</li>
<li>时间特征：物体运动、光线变化、摄像机/视角变化</li>
</ul>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102195839.webp" alt="image.png"></p>
<p>帧率：</p>
<ul>
<li>每秒小于 10 帧：用于超低比特流视频通信</li>
<li>10~20 帧：典型低比特率视频通信</li>
<li><strong>25~30 帧：电视图像标准</strong></li>
<li>50~60 帧：平滑（高数据率）</li>
</ul>
<blockquote>
<p>[!hint] 考点 23：色彩空间</p>
</blockquote>
<p>色彩空间：</p>
<ul>
<li>单色图：仅需一个数字表示某一个空间采样的亮度</li>
<li>彩色图：至少需要三个数字才能准确表示某一个像素的颜色</li>
</ul>
<p>代表亮度和色彩的方法称为色彩空间：</p>
<ul>
<li>RGB 色彩空间：捕获和显示图像的恰当方法。RGB 色彩空间中三种颜色同样重要，通常分辨率也相同。彩色阴极射线管（CRT）和液晶显示器（LCD）应用 RGB。</li>
<li>YCbCy 色彩空间（YUV 色彩模型）</li>
</ul>
<p><strong>图像的视觉质量受采样点数量的影响。</strong></p>
<h2>YCbCr</h2>
<p>🔺<span style="color:#ff0000">人类视觉系统对<b>亮度</b>更敏感（和颜色相比）</span></p>
<blockquote>
<p>人眼的视杆细胞（感知亮度）比视锥细胞（感知色彩）数量多。</p>
</blockquote>
<h3>色彩空间</h3>
<p>在 RGB 颜色空间中，这三种颜色同等重要，因此通常都以相同的分辨率存储。</p>
<p>YCbCr 区分亮度和色度，亮度具有更高的分辨率。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231106221610.webp" alt="image.png|500"></p>
<p>Y：亮度（luma），RGB 的加权平均，$Y=k_rR+k_gG+k_bB, k_g = 1-k_b-k_r$</p>
<p>Cb：彩度蓝</p>
<p>Cr：彩度红</p>
<p>每一个色度是 R、G、B、Y 之间的差异</p>
<p>为了降低存储和传输需求，可以将 RGB 图像转换为 YCbCr 图像</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102195927.webp" alt="image.png"></p>
<p>ITU-R 建议的系数定义：$k_b=0.114, k_r=0.299$</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102200018.webp" alt="image.png"></p>
<h3>采样格式</h3>
<p>为了利用人眼对亮度和色度的不同敏感性，将视频信号转换为亮度/色彩空间时，可以对色度进行空间上的次采样或低通滤波</p>
<h4>4:4:4 采样</h4>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102200027.webp" alt="image.png|205"></p>
<p>Y，Cb 和 Cr 有着相同的分辨率。因此每一个分量存在于任何位置的像素上</p>
<h4>4:2:2 采样</h4>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102200042.webp" alt="image.png|187"></p>
<p>色度组件的垂直分辨率与亮度相同，但水平分辨率只有亮度的一半。</p>
<p>用于高质量彩色录制。</p>
<h4>4:2:0 采样</h4>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102200051.webp" alt="image.png"></p>
<p>Cb 和 Cr 的水平和垂直分辨率都是 Y 的一半。</p>
<p>广泛用于消费类应用，如视频会议、DVD。</p>
<p><strong>需要的采样数（比特）是 4:4:4 视频（或 RGB 视频）的一半</strong>。</p>
<blockquote>
<p>为什么不叫做 4:1:1 采样？<br>
因为在历史上 4:1:1 采样已被用于指代这种采样：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102200109.webp" alt="image.png|275"></p>
</blockquote>
<p>例子：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102200139.webp" alt="image.png|375"></p>
<h2>视频帧格式</h2>
<blockquote>
<p>[!hint] 考点 24：视频帧格式</p>
</blockquote>
<p>在进行压缩和传输之前，捕获的视频会被捕获或转换为一组“中间格式”之一。</p>
<p>常见的中间格式（CIF）是一组流行格式的基础。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102200202.webp" alt="image.png|375"></p>
<h2>质量评估</h2>
<h3>主观测量——ITU-R 500</h3>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102200215.webp" alt="image.png"></p>
<p>通常采用的手段：双刺激连续质量量表（Double Stimulus Continuous Quality Scale）</p>
<p>花费昂贵，耗时长</p>
<h3>客观质量测量</h3>
<blockquote>
<p>峰值信噪比 ( PSNR ) 用于表示信号的最大可能功率与影响其表示的保真度的破坏噪声的功率之间的比率。虽然较高的 PSNR 通常表明重建质量较高，但在某些情况下可能并非如此，必须非常小心该指标的有效性范围。只有当它用于比较来自相同编解码器和相同内容的结果时，它才是最终有效的。一般来说，在估计图像质量，尤其是人类感知的视频质量时，与其他质量指标相比，PSNR 表现不佳。</p>
</blockquote>
<p>运用最广泛的是<strong>峰值信噪比（Peak Signal to Noise Ratio, PSNR）</strong></p>
<p>$$<br>
\begin{aligned}<br>
{PSNR}<em>{dB} =&amp; 10 \log</em>{10}{\frac{(2^n-1)^2}{MSE}} \<br>
SNR=&amp;10 \log{\frac{x_{in}^2}{q^2}}<br>
\end{aligned}<br>
$$</p>
<p>MSE：原始图像和受损图像或视频帧之间的均方误差</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102200250.webp" alt="image.png|475"></p>
<h2>图像视频处理准则</h2>
<blockquote>
<p>[!hint] 考点 25：图像视频处理准则：四种类型冗余度</p>
</blockquote>
<p>目标是减少信号中存在的冗余（🔺视频编码的四种冗余度）：</p>
<ul>
<li>时间冗余度（Temporal redundancy）：两帧相像</li>
<li>空间冗余度（Spatial redundancy）：两点相像</li>
<li>统计冗余度（Perceptual redundancy）</li>
<li>感知冗余度（Statistical redundancy）</li>
</ul>
<h2>JPEG 图像压缩</h2>
<p>基本流程：</p>
<ul>
<li>在 JPEG 压缩中，图像被划分为 8×8 像素的块，然后对每个块进行 2-D 离散余弦转换（DCT）。</li>
<li>DCT 将像素块中的大多数信号压缩为小的 DCT 系数部分。</li>
<li>量化这些 DCT 系数将使得它们大部分转化为 0。</li>
<li>这些被量化的系数以之字形进行扫描，再进行游程编码和哈夫曼编码。</li>
</ul>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102200322.webp" alt="image.png"></p>
<h2>帧内帧间预测</h2>
<p>每一帧可以都被编码为分开的图像，例如对每一帧独立应用类似 JPEG 的编码。</p>
<p>视频压缩通过利用时间冗余或帧间相似性达到比图片更好的压缩效果。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102200334.webp" alt="image.png"></p>
<blockquote>
<p>[!hint] 考点 26：视频编码中，编码帧的三种基本类型</p>
</blockquote>
<p>🔺编码帧的三种基本类型：</p>
<ul>
<li>帧内编码帧（I - 帧）：独立于于所有其他帧进行编码</li>
<li>预测编码帧（P - 帧）：基于先前编码的帧进行编码</li>
<li>双向预测帧（B - 帧）：基于先前帧和未来帧进行编码</li>
</ul>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102200349.webp" alt="image.png"></p>
<h2>运动估计与补偿</h2>
<blockquote>
<p>[!hint] 考点 27：运动估计和补偿</p>
</blockquote>
<p>为了最大限度利用相邻帧的可预测性，在运动补偿过程中估算两帧之间的移动并形成正确预测是非常重要的。</p>
<p>估计帧与帧之间运动的过程称为运动估计；基于先前编码的参考帧预测给定帧，同时补偿两帧之间的相对运动的过程称为运动补偿预测 (MC-prediction)。</p>
<h3>基于块的的运动估计补偿</h3>
<p>对于当前帧 M×N 样本的每个块：</p>
<ol>
<li>在参考帧中搜索一个区域，以找到一个“匹配”的 M×N 样本区域</li>
<li>被选中的候选区域称为当前块的预测块，并将其与当前块相减，得到残差</li>
<li>将残差块编译传输，当前块和候选位置区域之间的偏移（运动向量）也将被传输</li>
</ol>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102200446.webp" alt="image.png"></p>
<h3>运动补偿块的大小</h3>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102200456.webp" alt="image.png"></p>
<h3>子像素运动补偿</h3>
<p>一个更好的运动补偿预测可以由参考帧中的差值样本位置构建。</p>
<p>分像素运动估计补偿引入查找分样本差值位置和整样本位置，选择最匹配的位置，并使用该位置的整数或子样本值进行运动补偿预测。</p>
<p>过程：</p>
<ol>
<li>在整样本网格（圆圈标记）中找到最佳匹配</li>
<li>搜索紧挨着最佳匹配（方块标记）的半样本位置。</li>
<li>如果需要，则搜索最佳半样本位置（三角形标记）旁边的四分之一样本位置</li>
</ol>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102200508.webp" alt="image.png"></p>
<p>预测越精确，残差越小，motion vector 数据量增加。</p>
<p>随着插补步骤的增加，性能增益趋于减小：</p>
<ul>
<li>与整样本运动补偿相比，半样本插值具有显著的增益。</li>
<li>四分之一样本插值有一定适度改进。</li>
<li>8 个样本插值改进更小，以此类推。</li>
</ul>
<p>与更复杂的运动补偿方案相关的压缩效率权衡：<strong>更精确的运动补偿需要更多的比特来编码向量域，但编码残差比特数更少；反之亦然。</strong></p>
<h2>图像模型</h2>
<ol>
<li>转换：压缩数据并去相关</li>
<li>量化：降低传输数据的精确度</li>
<li>重新排序：组织数据以合并重要值</li>
<li>预测图像编码</li>
</ol>
<h3>预测图像编码</h3>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102200520.webp" alt="image.png"></p>
<p>空间预测，以 DPCM 为例：</p>
<ol>
<li>编码预测：prediction P(X) = (2A+B+C)/4</li>
<li>残差计算：R(X) = X-P(X) ，然后编码并传输 R(X)</li>
<li>解码器解码残差并形成预测：P(X) = (2A+B+C)/4</li>
<li>重建像素：X = R(X) + P(X)</li>
</ol>
<h3>转换编码</h3>
<p>转换后的数据应当去相关且被压缩：在转换后的数据中，大多数的信息应当被集中于少量的值中。</p>
<p>转换应当可逆。</p>
<p>转换应当容易计算：低内存需求、可使用有限精度算法实现、算数操作数低</p>
<p>目前有许多转换：KLT，SVD，DCT</p>
<p>在 N×N 样本块中，DCT 始终受欢迎，且图像一直在块单元中被处理。</p>
<p>运动补偿残差往往会受到块边缘的伪影（blockiness）的影响。</p>
<p>对整个图像或帧做的基于图像的转换操作有：</p>
<ul>
<li>图像传输（离散小波变换 DWT）胜过静态图像压缩的块传输（JPEG2000）</li>
<li>DWT 需要更高的内存需求（尤其是大图像），因为是以整个图像作为一个单元处理图像的</li>
<li><strong>DWT 并不“适合”基于块的运动补偿</strong></li>
</ul>
<h4>2D-DCT</h4>
<p>正向离散余弦转换：$Y=AXA^T$</p>
<p>逆 DCT（IDCT）：$X=A^TYA$</p>
<p>X 为 N×N 样本块，Y 为系数矩阵，A 为 N×N 传输矩阵</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102200620.webp" alt="image.png"></p>
<p>例子：N=4，有 A：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102200637.webp" alt="image.png"></p>
<h4>DCT 系数的特征</h4>
<p>FDCT 输出是一组 N×N 的系数，表示 DCT 域中的图像块数据。</p>
<p>DCT 自身保存所有 N×N 图像块中的信息。</p>
<p>人眼对低频 DCT 参数更加敏感。</p>
<p>DCT 有助于将感知上重要的信息与感知上不重要的信息分离开来。</p>
<p><strong>用更高的精度编码低频的 DCT 信息，但使用更少或不使用比特来编码高频系数，从而丢弃在感知上不太重要的信息。</strong></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102200648.webp" alt="image.png"></p>
<p>在计算 IDCT 之前添加更多的系数，会逐渐提高原始区块的重建精度，到包含五个系数时，重建的区块与原始区块的匹配程度相当接近。</p>
<p>可以从 16 个 DCT 系数的子集中重建块的近似副本。</p>
<h4>DCT 计算复杂性</h4>
<p>在典型的 DSP 上，单个 8×8 DCT 或 IDCT 需要几百个指令周期。</p>
<p>以 CIF (352×288) 分辨率和 30 fps 帧率运行的解码器可能需要高达 71,280 IDCT /秒。</p>
<p>IDCT 计算可占用高达 30% 的视频解码器编译周期。</p>
<p>由于 DCT 和 IDCT 在小图像块上操作，因此内存需求相当小，与图像和视频压缩应用程序中的帧缓冲区和其他数据的大小相比，通常可以忽略不计。</p>
<p>DCT 和 IDCT 函数的<strong>高计算需求和小内存需求</strong>使它们成为使用专用硬件加速器实现的理想候选者。</p>
<h3>量化</h3>
<p>$$<br>
\begin{aligned}<br>
FQ = &amp;round\left( \frac{X}{QP} \right) \<br>
Y=&amp;FQ\cdot QP<br>
\end{aligned}<br>
$$</p>
<p>QP 表示量化步长。</p>
<p>量化用于<strong>丢弃感知上不重要的信息</strong>。</p>
<p>量化后，使用统计方法对剩余信息进行编码，从而使用尽可能少的比特。</p>
<p>量化和去量化对内存的要求通常可以忽略不计。</p>
<h3>游程编码（RLC）</h3>
<p>量化后，绝大多数高频 DCT 系数为零。</p>
<p>游程编码：</p>
<ul>
<li>将连续的 0 值系数成组（一个游程）</li>
<li>编码 0 的个数（长度），不编码单独 0 系数</li>
</ul>
<p><strong>为了使连续零值系数的平均值尽可能高</strong>，我们以对角之字形的方式扫描 DCT 系数矩阵。</p>
<p>游程编码（RLC，Run-length coding）之后通常是可变长度编码（VLC）。</p>
<h3>重新排序</h3>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102201034.webp" alt="image.png|278"></p>
<p><strong>重排序是将非零系数组合在一起，实现有效地表示零系数</strong></p>
<h3>可变长度编码（VLC）</h3>
<p>一对（游程，量化 DCT 系数）的每个可能值称为一个符号。</p>
<p>常见的符号被分配较短的码字，而不常见的符号被分配较长的码字。</p>
<p>VLC 的一个缺点是编码图像中间的比特误差会阻止解码器正确重建剩余的比特流。</p>
<p>通过在整个编码比特流中散布“重新同步标记”，解码器能够在发生错误时搜索下一个重新同步标记以进行同步。</p>
<h2>视频编码结构</h2>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102201058.webp" alt="image.png"></p>
<h2>通用视频编码模型</h2>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102201109.webp" alt="image.png"></p>
<h2>编码数据流</h2>
<p>编码器的两个主要的数据流路径：从左到右（编码）、从右到左（重建）。</p>
<p>编码流：</p>
<ol>
<li>输入视频帧 Fn 用于编码，并以宏块为单位进行处理</li>
<li>Fn 和参考帧（如前编码帧 F'n-1）对比。运动估计函数在 F'n-1 中 16×16 的区域，查找出一个 Fn 中当前宏块的一个匹配。当前宏块位置和被选中的参考区域的偏移为一个移动向量（MV，motion vector）</li>
<li>基于被选中的 MV，生成运动补偿预测 P（被运动估计器选择的 16×16 区域）</li>
<li>当前宏块中减去 P 产生残差或 difference 宏块 D。</li>
</ol>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102201156.webp" alt="image.png"></p>
<p>数据重建流：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102201207.webp" alt="image.png"></p>
<h2>解码数据流</h2>
<p>解码数据流：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102201222.webp" alt="image.png"></p>
<blockquote>
<p>[!Example] 习题助记</p>
<ol>
<li>Write down the full name of ADPCM in English<br>
Adaptive Differential Pulse Code Modulation</li>
<li>List the four types of redundancy used in video coding<br>
时间、空间、感知、统计</li>
<li>What is the sample resolution of CIF<br>
352×288</li>
<li>Write down the formula of PSNR</li>
<li>ln video coding , there are three basic types of coded frames, what are they?<br>
I P B</li>
<li>What is the purpose of DCT?<br>
去相关，使数据更紧凑</li>
<li>What is the purpose of Zigzag Scan or reordering?<br>
是将非零系数组合在一起并有效地表示零系数</li>
<li>What is the purpose of quantization?<br>
量化用于丢弃感知上无关紧要的信息</li>
<li>In motion estimation and compensation, what kind of redundancy is used in video coding?<br>
temporal 时间冗余</li>
<li>In 010 editor template, the following variable is defined at the beginning: char type[4];<br>
The variable type is mapped to 0 bytes 3 to in the file.</li>
</ol>
</blockquote>
<h2>本小节参考链接</h2>
<ul>
<li><a href="https://blog.csdn.net/Doctor__Chen/article/details/124781119">质量评估指标：PSNR（Peak signal-to-noise ratio 峰值信噪比）_psnr指标_花生树什么树的博客-CSDN博客</a></li>
<li><a href="https://www.zhihu.com/question/22085329/answer/774074211">傅里叶变换、拉普拉斯变换、Z 变换的联系是什么？为什么要进行这些变换？ - 知乎 (zhihu.com)</a></li>
</ul>
<h1>JPEG 图像编码</h1>
<p><strong>Baseline 方法是迄今为止实现最广泛的 JPEG 方法。</strong></p>
<h2>基于 DCT 的编码/解码过程</h2>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102201904.webp" alt="image.png"></p>
<p>编码过程：</p>
<ol>
<li>输入的组件样本为 8×8 块</li>
<li>每个块被前向 DCT（FDCT）转换为一组 64 个值，作为 DCT 系数。<br>
a. 第一个值称为 DC 系数<br>
b. 其他 63 个值为 AC 系数</li>
<li>然后使用量化表中 64 个对应值中的一个对 64 个系数中的每个系数进行量化</li>
<li>然后将量化系数传递给熵编码过程，以进一步压缩</li>
</ol>
<p>解码过程：</p>
<ol>
<li>熵解码器解码之字形的量化 DCT 系数</li>
<li>解量化后，通过反向 DCT（IDCT）将 DCT 系数转化为 8*8 样本块</li>
</ol>
<h2>前向 DCT（FDCT）</h2>
<p>在编码器的输入中，原图像采样以 8×8 块成组，从无符号整数 $[0,2^P-1]$ 的范围转换为有符号整数 $[-2^{P-1},2^{P-1}-1]$，然后输入到 FDCT 中：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231123215755.webp" alt="image.png"></p>
<p>其中，</p>
<p>$$<br>
\begin{aligned}<br>
C(u),C(v)=&amp;1/\sqrt{ 2 }, when~ u,v=0\<br>
C(u),C(v)=&amp;1,   other~ conditions<br>
\end{aligned}<br>
$$</p>
<h2>反向 DCT（IDCT）</h2>
<p>解码器的输出中，IDCT 输出 8×8 采样块以形成重构图片：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231123215702.webp" alt="image.png"></p>
<p>其中，</p>
<p>$$<br>
\begin{aligned}<br>
C(u),C(v)=&amp;1/\sqrt{ 2 }, when~ u,v=0\<br>
C(u),C(v)=&amp;1,   other ~conditions<br>
\end{aligned}<br>
$$</p>
<h2>块样本和 DCT 系数的关系</h2>
<ul>
<li>对一个块进行前向 DCT 计算后，64 个 DCT 系数结果被均匀量化器量化</li>
<li>每一个系数 $S_{vu}$ 的量化器步长为对应量化表中的元素 $Q_{vu}$<br>
<img src="https://cdn.gallery.uuanqin.top/img/20231102202014.webp" alt="image.png"></li>
</ul>
<h2>DC 编码</h2>
<p>相邻的 8×8 块之间的 DC 系数通常有着强烈的关联性。量化的 DC 系数被编码为与前块的 DC 项的差值。这种特殊处理是值得的，因为 DC 系数包含了总图像能量的很大一部分。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102202041.webp" alt="image.png"></p>
<h2>之字形扫描</h2>
<p>所有的量化系数将以之字形顺序进行组织，将低频系数（一般为非 0）放置在高频系数前，以便于进行熵编码。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102202052.webp" alt="image.png"></p>
<h2>压缩与图像质量</h2>
<p>对于较复杂场景的彩色图像，所有基于 DCT 的操作模式通常会产生以下级别的图像质量：</p>
<ul>
<li>0.25-0.5 比特/像素：中等至良好质量</li>
<li>0.5-0.75 比特/像素：良好至优秀质量</li>
<li>0.75-1.5 比特/像素：杰出质量，满足大多数的应用</li>
<li>1.5-2.0 比特/像素：和原图相差无几，满足有高质量需求的应用</li>
</ul>
<p>根据源特性和场景内容的不同，质量和压缩会有很大的不同。</p>
<h2>具有多个组件的源图像</h2>
<p>源图像可能包含 1~255 个图像组件。每一个组件包含样本的矩形数组。</p>
<p>样本被定义为一个 $[0, 2^{P-1}]$ 范围的无符号整数。</p>
<p>图像中的所有样本必须有着相同的精度 P，对于基于 DCT 的编解码器，P 可以是 8 或 12。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102202132.webp" alt="image.png"></p>
<h2>多组件交织</h2>
<p>许多应用程序需要将显示/打印多组件图像的过程与解压过程并行。</p>
<p>这只有在组件在压缩数据流中交织在一起时才可行。</p>
<p>编码交错：如果编码器从 a 压缩一个数据单元，从 B 压缩一个数据单元，从 C 压缩一个数据单元，然后返回到 a......</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102202143.webp" alt="image.png"></p>
<h2>不同维度的组件交织顺序</h2>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102202151.webp" alt="image.png"></p>
<p>上例中，B、C 在水平方向上与 A 相比少了一半样本。在这个例子中，A 的两个数据单元和 B、C 的各一个单元进行交织。</p>
<blockquote>
<p>[!hint] 考点 28：JPEG 编码与解码过程：最小编码单元、操作模式、DC 熵编码、AC 熵编码、游程、SIZE、EOB</p>
</blockquote>
<h2>最小编码单元 MCU</h2>
<p>在基于 DCT 的编解码器中，<strong>数据单元</strong>是一个 8x8 的样本块。</p>
<p><span style="color:#ff0000">最小编码单元 MCU</span>：最小的交错<strong>数据单元</strong>组。对于非交错数据，MCU 是一个数据单元。对于交错数据，MCU 是由扫描中组件的采样因子定义的数据单元序列。交错数据是 MCU 的有序序列，MCU 中包含的数据单元数由交错的元件数及其相对采样因子决定。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102202208.webp" alt="image.png"></p>
<p>当两个或更多的组件进行交织时，每一个组件 $C_i$ 被 $V_i$ 个数据单元划分为 $H_i$ 的矩形区域。<strong>最大的组件交织数为 4，且每个 MCU 的数据单元最大值为 10</strong>：$$\sum_{所有参与交织的i}{H_i\times V_i}\le 10$$（注：置于 10 这个数字是规定的，没有理由）</p>
<h2>操作模式</h2>
<p>🔺有四种不同的操作模式，在这些模式下定义了各种编码过程：</p>
<ul>
<li>基于 DCT 的顺序模式（从上到下，一块一块编码）</li>
<li>基于 DCT 的渐进模式（从轮廓到细节）</li>
<li>无损模式</li>
<li>层次模式</li>
</ul>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102202314.webp" alt="image.png"></p>
<h3>顺序模式与渐进模式</h3>
<p>在顺序模式中，每一个图片组件在单个扫描中编码。</p>
<p>在渐进模式中，每一个图片组件在多次扫描中编码。第一次扫描中编码粗糙，但可识别的图像版本可以快速传输，且通过后续的扫描进行改进，直到达到由量化表确定的图像质量水平。</p>
<p><span style="color:#ff0000">有两种互补的方法可以对量化 DCT 系数块进行部分编码</span>：</p>
<ol>
<li>在给定的扫描中，只有之字形序列特定的系数带需要进行编码</li>
<li>在给定的扫描中，无需将当前频带内的系数编码为完全（量化）精度。
<ol>
<li>最重要的 N 个比特可以在第一次扫描中编码</li>
<li>在随后的扫描中，次重要的比特再进行编码</li>
<li>这个过程叫做「连续逼近」</li>
</ol>
</li>
</ol>
<p>这两种程序可以单独使用，也可以灵活地混合使用。</p>
<p>量化 DCT 系数的传递：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102202328.webp" alt="image.png"></p>
<p>光谱选择与逐次逼近：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102202337.webp" alt="image.png"></p>
<h3>层次模式</h3>
<p>层次模式以多种分辨率的方式为图片提供金字塔型的编码。每一种的分辨率与其相邻的编码在水平或垂直维度或两者上相差两倍：</p>
<ol>
<li>对原始图像在每个维度上按所需的 2 的倍数进行滤波和下采样。</li>
<li>使用顺序 DCT、渐进式 DCT 或无损编码器之一对这个减小尺寸的图像进行编码。</li>
<li>解码此缩小尺寸的图像，然后使用接收器必须使用的相同插值滤波器对它进行水平和/或垂直 2 插值和上采样。</li>
<li>使用此上采样图像作为该分辨率下的原始图像的预测，并使用前面介绍的顺序 DCT，逐行 DCT 或无损编码器之一对差异图像进行编码。</li>
<li>重复第 3 步和第 4 步，直到图像的全分辨率被编码</li>
</ol>
<h2>基线顺序熵编码</h2>
<p>在基线顺序编码器中，FDCT、量化、DC 差分以及之字形排序步骤之后，是熵编码。</p>
<p>在熵编码之前，通常只有很少的非零系数和很多零值系数。熵编码的任务是更有效地编码这些系数。</p>
<p>基线顺序熵编码有两个步骤：</p>
<ol>
<li>将量化 DCT 系数转换为中间符号序列（游程编码）</li>
<li>为符号分配可变长度代码（哈夫曼编码）</li>
</ol>
<h3>AC 系数</h3>
<p>每一个非零的 AC 系数这样编码：</p>
<ul>
<li><code>RUN-LENGTH</code>：之字形扫描序列中，被表示的非零 AC 系数前，连续数字 0 的长度。
<ul>
<li><code>RUN-LENGTH</code> 代表 <span style="color:#ff0000">0~15</span>，Symbol-1 中 <code>(15, 0)</code> 代表 <code>RUN-LENGTH</code>=16。</li>
<li><code>(0,0)</code> 代表 <code>EOB</code>（块结束），可以将其视为“转义”符号。</li>
</ul>
</li>
<li><code>SIZE</code>：编码 <code>AMPLITUDE</code> 所用的比特数</li>
</ul>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102202410.webp" alt="image.png"></p>
<blockquote>
<p>[!example] 更多例子<br>
0005 → (3,3)(5)<br>
000003 → (5,2)(3)<br>
00,-12 →  (2,4)(-12)<br>
0..(16 个 0)..0 1 → (15,0)(0,1)(1)<br>
0..(17 个 0)..0 1 → (15,0)(1,1)(1)<br>
0..(18 个 0)..0 -3 → (15,0)(2,2)(-3)<br>
00000 3 0..0 → (5,2)(3)(0,0)<br>
0013 →  (2,1)(1) (0,2)(3)</p>
</blockquote>
<h3>AMPLITUDE 和 SIZE 的范围</h3>
<p>量化 AC 系数的取值范围决定了 AMPLITUDE 和 SIZE 信息必须表示的值的范围。对 8×8 FDCT 方程的数值分析表明，如果 64 点 (8×8 块) 输入信号包含 N 位整数，则输出数字的非小数部分 (DCT 系数) 最多可以增长 3 位。这也是量化 DCT 系数的最大可能大小。</p>
<p>基线顺序在 $[-2^7,2^7-1]$ 范围内有 8 位整数源样本，因此量化的 AC 系数幅度由 $[-2^{10},2^{10}-1]$ 范围内的整数覆盖。</p>
<p>带符号整数编码使用长度为 1 到 10 位的 symbol-2 AMPLITUDE 码，因此 SIZE 也代表 1 到 10 的值。RUNLENGTH 表示从 0 到 15 的值。</p>
<h3>DC 系数</h3>
<p>8×8 样本块的差分 DC 系数的中间表示结构类似：</p>
<ul>
<li>Symbol-1 只表示 SIZE 信息</li>
<li>Symbol-2 表示振幅信息</li>
</ul>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102202435.webp" alt="image.png"></p>
<p>因为 DC 系数是差分编码的，所以它覆盖的整数值 $[-2^{11},2^{11}-1]$ 是 AC 系数的两倍，因此必须为 DC 系数增加一个附加的电平。</p>
<p>因此，DC 系数大小的 symbol–1 表示从 0 到 11 的值。</p>
<blockquote>
<p><strong>差分编码</strong>（differential encoding）指的是对数字数据流，除第一个元素外，将其中各元素都表示为各该元素与其前一元素的差的编码。差分编码的简单例子是储存序列式资料之间的差异（而不是储存资料本身）：不存“2, 4, 6, 9, 7”，而是存“2, 2, 2, 3, -2”。</p>
</blockquote>
<h3>可变长度熵编码</h3>
<p>对于 DC 和 AC 系数，每个 symbol-1 均使用来自 Huffman 表集中的可变长度代码（VLC）进行编码。 每个 symbol-2 均使用“可变长度整数”（VLI）码进行编码。</p>
<p>VLCs 和 VLIs 是具有可变长度的代码，但 VLI 不是霍夫曼代码。一个重要的区别是，VLC（ Huffman code）的长度直到解码才知道，而 VLI 的长度存储在其前一个 VLC 中。</p>
<p>Huffman 码必须在外部指定为 JPEG 编码器的输入。</p>
<p>请注意，Huffman 表在数据流中的表示形式是一种间接规范，解码器在解压缩之前必须以此间接规范来构造表（解码时需要重新构建 Huffman 树进行解码）。 JPEG 标准包括一组 Huffman 表的示例，但这不是强制性的。</p>
<h3>基线编码例子</h3>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102202510.webp" alt="image.png"></p>
<blockquote>
<p>[!hint] 考点 29：JPEG 交换格式（JIF）：图像、帧、扫描和标记</p>
</blockquote>
<h2>图像、帧和扫描的关系</h2>
<ul>
<li>压缩的图像数据只包含一张图片。</li>
<li><strong>在渐进模式和顺序模式编码过程中，一张图片只包含一帧。</strong></li>
<li><strong>在层次模式中，一张图片可以包含多帧。</strong></li>
<li>一帧可以包含一个或多个扫描。</li>
<li>顺序模式下，一个扫描包含一个完整的、单个/多个图像组件的编码。</li>
<li><span style="color:#ff0000">在层次模式中：当一张图像的三个组件非交织时，一帧包含三个扫描；如果三个组件交织一起，那么一帧包含一趟扫描。</span></li>
<li>一帧也可以包含两趟扫描：一趟是非交织的组件、另一趟为两组件交织。</li>
</ul>
<h2>标记</h2>
<p><strong>标记用于标识压缩数据格式的各种结构部分。</strong></p>
<p>所有的标记赋予两个字节编码：0xFF+ 不等于 0 或 0xFF 的字节。</p>
<p>标记段包含一个标记以及相关参数的序列。标记段的第一个参数是两字节长的参数，它指定了标记段的字节数（除去两字节标记后的参数长度）</p>
<p>被 SOF 和 SOS 标记码标识出的标记段被视为头（headers）：分别为帧报头和扫描报头。</p>
<p>SOI（0xFFD8）：压缩图片开始标记</p>
<p>EOI（0xFFD9）：压缩图片的结束标记</p>
<h3>高级语法</h3>
<p>基于顺序 DCT、渐进式 DCT 和无损操作模式的语法：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102202539.webp" alt="image.png"></p>
<h4>帧头语义</h4>
<p>帧报头应该出现在帧的开始。该报头指定源图像特征、帧中的组件和每个组件的采样因子，并指定从中检索要与每个组件一起使用的量化表的目标。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102202601.webp" alt="image.png"></p>
<table>
<thead>
<tr>
<th>标记结构</th>
<th>长度（字节）</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>0xFFC0</td>
<td>2</td>
<td>SOF marker</td>
</tr>
<tr>
<td>Lf</td>
<td>2</td>
<td>Frame header length, not including the first two bytes 0xFF, 0xC0</td>
</tr>
<tr>
<td>P</td>
<td>1</td>
<td>Sampling precision, equals 0x08 in a baseline system</td>
</tr>
<tr>
<td>Y</td>
<td>2</td>
<td>Image height</td>
</tr>
<tr>
<td>X</td>
<td>2</td>
<td>Image width</td>
</tr>
<tr>
<td>Nf</td>
<td>1</td>
<td>Number of components in a frame. 1 (grey scale) or 3 (color)</td>
</tr>
<tr>
<td>C1</td>
<td>1</td>
<td>Component 1</td>
</tr>
<tr>
<td>(H1,V1)</td>
<td>1</td>
<td>Horizontal and vertical sampling factor</td>
</tr>
<tr>
<td>Tq1</td>
<td>1</td>
<td>Quantization table</td>
</tr>
<tr>
<td>C2</td>
<td>1</td>
<td>Component 2</td>
</tr>
<tr>
<td>(H2,V2)</td>
<td>1</td>
<td>Horizontal and vertical sampling factor</td>
</tr>
<tr>
<td>Tq2</td>
<td>1</td>
<td>Quantization table</td>
</tr>
<tr>
<td>⋯</td>
<td>⋯</td>
<td>⋯</td>
</tr>
</tbody>
</table>
<h4>扫描头语义</h4>
<p>扫描头应在扫描开始时出现。这个报头指定扫描中包含哪些组件，指定从中检索要与每个组件一起使用的熵表的地址。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102202705.webp" alt="image.png"></p>
<table>
<thead>
<tr>
<th>标记</th>
<th>长度（字节）</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>0xFFDA</td>
<td>2</td>
<td>SOS marker</td>
</tr>
<tr>
<td>Ls</td>
<td>2</td>
<td>Scan header length, not including the first two bytes 0xFF, 0xDA</td>
</tr>
<tr>
<td>Ns</td>
<td>1</td>
<td>Number of components in a scan, in a baseline system, Ns=Nf (Number of components in a frame)</td>
</tr>
<tr>
<td>Cs1</td>
<td>1</td>
<td>Component number in a scan</td>
</tr>
<tr>
<td>(Td1,Ta1)</td>
<td>1</td>
<td>Tdn: the four most significant bits, used to select DC entropy coding table <br>Tan: the four least significant bits, used to select AC entropy coding table</td>
</tr>
<tr>
<td>⋯</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Ss</td>
<td>1</td>
<td>Default values are [00] [3F] [00] in a baseline system</td>
</tr>
<tr>
<td>Se</td>
<td>1</td>
<td>Default values are [00] [3F] [00] in a baseline system</td>
</tr>
<tr>
<td>(Ah,Al)</td>
<td>1</td>
<td>Default values are [00] [3F] [00] in a baseline system</td>
</tr>
</tbody>
</table>
<h4>DQT 标记段语义</h4>
<p>定义量化表 (DQT) 标记段，用于定义一个或多个量化表。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102202826.webp" alt="image.png"></p>
<table>
<thead>
<tr>
<th>标记</th>
<th>长度（字节）</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>0XFFDB</td>
<td>2</td>
<td>DQT marker</td>
</tr>
<tr>
<td>Lq</td>
<td>2</td>
<td>Quantization table length， not including 0XFF， 0XDB</td>
</tr>
<tr>
<td>(Pq,Tq)</td>
<td>1</td>
<td>Quantization table element precision <br>Pq=0, 8 bits for Q0~Qn, Pq=1, 16 bits for Qt; <br>Tq: Quantization table destination identifier</td>
</tr>
<tr>
<td>Q0</td>
<td>1 or 2</td>
<td>Quantization table element‐Specifies the kth element out of 64 elements</td>
</tr>
<tr>
<td>Q1</td>
<td>1 or 2</td>
<td>Quantization table element‐Specifies the kth element out of 64 elements</td>
</tr>
<tr>
<td>Qn</td>
<td>1 or 2</td>
<td>Quantization table element‐Specifies the kth element out of 64 elements</td>
</tr>
</tbody>
</table>
<h4>哈夫曼表规范语法</h4>
<p>哈夫曼表标记 (DHT) 段定义了一个或多个霍夫曼表规范。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102202912.webp" alt="image.png"></p>
<table>
<thead>
<tr>
<th>标记</th>
<th>长度（字节）</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>0xFFC4</td>
<td>1</td>
<td>DHT marker</td>
</tr>
<tr>
<td>Ls</td>
<td>2</td>
<td>Huffman table definition length, not including 0xFF, 0xC4</td>
</tr>
<tr>
<td>(Tc,Th)</td>
<td>1</td>
<td>TC: Table class – 0 = DC table or lossless table, 1 = AC table. <br>Th:Huffman table destination identifier <br>Th Specifies one of four possible destinations at the decoder into which the Huffman table shall be installed.</td>
</tr>
<tr>
<td>L 1</td>
<td>1</td>
<td>Number of Huffman codes of length i</td>
</tr>
<tr>
<td>⋯</td>
<td>⋯</td>
<td></td>
</tr>
<tr>
<td>L 16</td>
<td>1</td>
<td></td>
</tr>
<tr>
<td>V 1</td>
<td>1</td>
<td>Value associated with each Huffman code, t=L1+L2+…L16</td>
</tr>
<tr>
<td>...</td>
<td>...</td>
<td></td>
</tr>
<tr>
<td>V t</td>
<td>1</td>
<td></td>
</tr>
</tbody>
</table>
<h2>JPEG 文件</h2>
<blockquote>
<p>[!hint] 考点 30：JPEG 文件交换格式（JFIF）</p>
</blockquote>
<p>到目前为止，我们描述的文件格式被称为「JPEG 交换格式 (JIF)」。然而，这种“纯粹”的文件格式很少使用，主要是因为，这个标准的某些缺点:</p>
<ul>
<li>色彩空间定义</li>
<li>组件子采样注册</li>
<li>像素宽高比定义</li>
</ul>
<p>JPEG 文件交换格式（JFIF）解决了 JIF 的局限性。JFIF 文件中的图像数据使用 JPEG 标准中的技术进行压缩，因此 JFIF 有时被称为“JPEG/JFIF”。</p>
<p>JPEG 文件交换格式是一种最小的文件格式，它使 JPEG 比特流能够在各种平台和应用程序之间进行交换。</p>
<p>此简化格式的唯一目的是允许交换 JPEG 压缩图像。</p>
<p>尽管 JPEG 文件交换格式 (JFIF) 的语法支持任何 JPEG 过程，但强烈建议将 JPEG 基线过程用于文件交换，这确保了与所有支持 JPEG 的应用程序的最大兼容性。</p>
<p><strong>JPEG 文件交换格式与标准的 JPEG 交换格式完全兼容。唯一的额外要求是必须在 SOI 标记之后出现 APP0 标记。</strong></p>
<p>JFIF 文件使用 APP0 标记段，并在帧头中限制某些参数，定义如下：</p>
<ul>
<li>长度、标识符、版本、单位、X 密度、Y 密度、X 缩略图、Y 缩略图、(RGB)n</li>
</ul>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102203032.webp" alt="image.png"></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102203038.webp" alt="image.png"></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102203043.webp" alt="image.png"></p>
<h2>编码过程</h2>
<p>编码图像的流程</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102203054.webp" alt="image.png"></p>
<p>编码帧的流程</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102203101.webp" alt="image.png"></p>
<p>编码扫描的流程</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102203117.webp" alt="image.png"></p>
<p>编码重启间隔的流程</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102203125.webp" alt="image.png"></p>
<p>对最小编码单元进行编码的过程</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102203134.webp" alt="image.png"></p>
<p>使用哈夫曼编码 AC 系数的过程</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102203141.webp" alt="image.png"></p>
<p>非零 AC 系数的顺序编码过程</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102203149.webp" alt="image.png"></p>
<h2>解码过程</h2>
<p>解码压缩图像数据的过程</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102203157.webp" alt="image.png"></p>
<p>解码一帧的过程</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102203206.webp" alt="image.png"></p>
<p>解码扫描的过程：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102203212.webp" alt="image.png"></p>
<p>解码重启间隙的过程：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102203223.webp" alt="image.png"></p>
<p>解码 MCU 的过程：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231102203230.webp" alt="image.png"></p>
<blockquote>
<p>[!example] 习题助记</p>
<ol>
<li>What are markers used for in JIF?<br>
标识压缩数据格式中不同的结构部分</li>
<li>Describe the full name of SOI,EOI,SOF,SOS<br>
Start of image marker,End of image marker,Start of Frame marker,Start of Scan marker</li>
<li>What is JPEG file interchange format used for?<br>
定义分辨率颜色等相关参数，为了能在不同应用和平台转换</li>
<li>An image contains ___ frame in the cases of sequential and progressive coding processes.<br>
one frame</li>
</ol>
</blockquote>
<h1>视频编码</h1>
<h2>视频编码标准的制定</h2>
<blockquote>
<p>[!hint] 考点 2：视频压缩标准及应用</p>
</blockquote>
<h3>ITU-T 国际电信联盟 - 电信</h3>
<h4>H.261</h4>
<ul>
<li>第一个视频压缩标准（1990 年）</li>
<li>专为综合业务数字网络（ISDN）视频会议设计的。</li>
<li>支持 352X288（CIF）和 176X144（QCIF）的分辨率色度分辨率子采样为 4：2：0</li>
<li>由于视频电话需要，在仅需较低的复杂性同时进行实时编码和解码。</li>
<li>由于它专注于对延迟敏感的双向视频，<span style="color:#ff0000">H.261 仅允许 I 和 P 帧，不允许 B 帧</span>。（B 帧需要等待后帧解码，存在时延）</li>
<li><strong>基于整数像素精度</strong>进行运动估计运算和搜索范围为 +/- 15 像素。</li>
<li>将基于 8x8 块的 DCT 应用于残差。然后在所有 AC 系数上进行<strong>固定</strong>的线性量化用<strong>固定</strong>的量化步长线性量化。</li>
<li>首先对量化系数进行游程编码，然后可变长度（霍夫曼）编码。</li>
<li>将简单的 2D FIR 滤波器应用于块边缘减少块效应。</li>
</ul>
<h4>H.263</h4>
<ul>
<li>用于公共交换电话网络（PSTN）可视电话</li>
<li>H.263（1996）是在 H.261 之后开发的，专注于更好<strong>更低比特率</strong>的视频质量。</li>
<li>通过普通电话调制解调器以 33.6 Kbps 的速度传输视频，是其重要的目标之一。</li>
<li>目标分辨率为 SQCIF（128x96）至 CIF（352X288）</li>
<li>与 H.261 类似，但运动矢量略有不同。其<strong>允许为½（“半像素”）的倍数</strong>。使用 16x16 宏块中的<strong>四个 8x8 像素块的四个运动矢量</strong>，而不是宏块的单个运动矢量。</li>
<li>PB 帧：P 帧和 B 帧（这是从当前编码的 P 帧和后一个先前编码的 P 帧预测而来的）编码为一个单元。</li>
<li>使用基于内容的算术编码模式代替霍夫曼编码，对于相同的图像质量，比特率略有降低。</li>
<li>H.263 通常在相同的比特率下实现大约 3 dB 的改善，或者在相同的 SNR（质量）下将比特率减少 50％。</li>
</ul>
<h4>H.264：Advanced video coding</h4>
<p>详看 🍂H.264-MPEG4-AVC（高级视频编码） 小节。</p>
<h3>ISO 国际标准化组织</h3>
<p>MPEG 成立于 1988 年，旨在开发在数字存储媒体上移动图片（视频）和关联的音频（光盘）的压缩标准。</p>
<h4>MPEG-1</h4>
<ul>
<li>ISO 制定的第一个视频压缩算法 (1991)</li>
<li>可在获得与 VHS 品质相似的视频和音频</li>
<li>比特率 1.5Mb/s</li>
<li>与典型的视频电话相比，支持电影内容中较重的运动（heavier motion）需要更多的计算资源</li>
<li>允许更长的延迟，允许 B 帧</li>
<li>使用自适应感知量化。单独的量化比例因子专门应用于每个频点以优化人类的视觉感知。</li>
</ul>
<h4>MPEG-2</h4>
<ul>
<li>是 MPEG-1 的扩展，支持更高的比特率，更高分辨率和<strong>隔行</strong>扫描图片（用于电视）。（先打奇数行再偶数行）</li>
<li>是为数字电视开发的比特率较高的应用：DTV，HDTV 和 DVD</li>
<li>由许多部分组成，包括视频，音频，系统，兼容性测试。</li>
<li>在 30：1 左右的压缩率下表现良好。 MPEG-2 以 4~8 Mbps 达到的质量对于消费者视频应用程序是可接受的。</li>
</ul>
<h5>MPEG-2 Profiles and Levels</h5>
<p>这些标准旨在解决大量不同的应用程序需要许多不同的工具或功能的问题。典型的应用程序可能仅使用 MPEG 功能的一小部分。 为了实现更有效的实现，MPEG 将功能的子集适当的组合在一起，并定义了一组配置文件和级别。</p>
<ul>
<li>档次（profile）定义了视频语法和功能的子集。</li>
<li>在档次（profile）中，级别定义了某些参数的最大范围，例如分辨率，帧速率，比特率和缓冲区大小（下限）。</li>
</ul>
<p>两个广泛使用的配置文件/级别是：</p>
<ul>
<li>Main Level at Main Profile (MP@ML)：用于压缩 DVD 上使用的常规电视（例如 NTSC 或 PAL）和标清数字电视（SD DTV）</li>
<li>Main Profile at High Level (MP@HL)：用于压缩高清电视（HDTV）（1080p）</li>
</ul>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231109211917.webp" alt="image.png"></p>
<h4>MPEG-4</h4>
<p>MPEG-4 与 MPEG-1 和 MPEG-2 完全不同，它的主要目标是提供新功能，而不仅仅是提供更好的压缩。将提供增强的功能：</p>
<ul>
<li>支持基于对象或基于内容的表示。这使得可以对视频场景中的不同视频对象进行单独编码，并且允许对视频中的不同对象进行单独访问和操作。请注意，MPEG-4 没有指定如何识别或分割视频中的对象。但是，如果单个对象已知，MPEG-4 提供了一种压缩这些对象的方法。</li>
<li>支持对合成或计算机生成的视频对象进行压缩，以及在单个视频中集成自然对象和合成对象。此外，MPEG-4 支持通过差错恢复（例如 Internet 和 3G 无线系统）进行防错通信。因此，MPEG-4 同时支持基于对象和基于帧的视频编码。</li>
<li>与场景的交互</li>
</ul>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231109213856.webp" alt="image.png|475"></p>
<p>Demuxer 用于解析和解码视频和音频对象。场景描述信息描述了解码对象如何组成和渲染以形成最终场景。</p>
<p>与 MPEG-2 和 MPEG-4 简单档次相比，H.264 / AVC 在压缩效率方面取得了重大突破，通常可实现约 2 倍的压缩。</p>
<p>为了满足从低质量，低分辨率监视摄像机到高清电视广播和 DVD 的各种应用，MPEG-4 第 2 部分定义了大约 21 个档次（profiles）：Simple, Advanced Simple, Main, Core, Advanced Coding Efficiency, Advanced Real Time Simple 等。最常用的档次是 Advanced Simple 和 Simple（都是 Advanced Simple 的子集）。</p>
<h3>当前视频压缩标准</h3>
<table>
<thead>
<tr>
<th>年份</th>
<th>标准</th>
<th>发布机构</th>
<th>🔺常用于</th>
</tr>
</thead>
<tbody>
<tr>
<td>1990</td>
<td>H.261</td>
<td>ITU-T</td>
<td>ISDN 上的视频会议, 可视电话</td>
</tr>
<tr>
<td>1993</td>
<td>MPEG-1 part 2</td>
<td>ISO, IEC</td>
<td>Video-CD 数字存储媒介（CD-ROM）上的视频</td>
</tr>
<tr>
<td>1995</td>
<td>H.262/MPEG-2 Part 2</td>
<td>ISO, IEC, ITU-T</td>
<td>DVD Video, Blu-ray, Digital Video Broadcasting, 数字电视</td>
</tr>
<tr>
<td>1996</td>
<td>H.263</td>
<td>ITU-T</td>
<td>视频会议, PSTN 上的可视电话, Video on Mobile Phones (3GP)</td>
</tr>
<tr>
<td>1999</td>
<td>MPEG-4 Part 2</td>
<td>ISO, IEC</td>
<td>Video on Internet (DivX, Xvid ...), 基于对象的编码, 合成内容, 集成</td>
</tr>
<tr>
<td>2003</td>
<td>H.264/MPEG-4 AVC</td>
<td>Sony, Panosonic, Samsung, ISO, IEC, ITU-T</td>
<td>Blu-ray,HD DVD Digital Video Broadcasting, 无线, 因特网, 电影, 视频电话, 视频会议</td>
</tr>
</tbody>
</table>
<h2>标准化的范围</h2>
<blockquote>
<p>[!hint] 考点 31：视频编码和解码架构：normative, informative</p>
</blockquote>
<p>视频压缩系统由一个编码器，压缩比特流和解码器组成。</p>
<p>标准限定的范围有限，是为了在确保互操作性同时尽可能实现差异化：</p>
<ul>
<li><span style="color:#ff0000">标准指定比特流语法和解码过程</span></li>
<li>标准不限定编码过程或具体解码器的实现。</li>
</ul>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231109202142.webp" alt="image.png"></p>
<blockquote>
<p>[!hint] 考点 32：MPEG 编码结构、MPEG 语法</p>
</blockquote>
<h2>MPEG 编码结构</h2>
<p>MPEG 以单元层次结构编码视频，这些单元称为<strong>序列、图像组 (GOPs)、图像、切片、宏块和 DCT 块</strong>：</p>
<ul>
<li>对 16x16 像素的宏块执行 MC 预测（运动补偿预测）</li>
<li>这些宏块组成一个切片</li>
<li>一帧中的所有切片均包含一张图片，连续的图片形成一个 GOP。</li>
<li>所有 GOP 形成一个序列。</li>
</ul>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231109203121.webp" alt="image.png"></p>
<h3>GOP</h3>
<p>视频帧被分组为编码单元，称为图像组 (GOPs)。</p>
<p>GOPs 具有重新初始化编码中使用的时间预测的属性。</p>
<p><strong>GOP 的第一帧总是以帧内模式编码，称为 I 帧</strong></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231109203351.webp" alt="image.png|525"></p>
<p>用 I 帧通过正向预测或双向预测得到 P 帧或 B 帧。</p>
<p>GOP 长度通常在 9 到 15 帧之间。</p>
<p><strong>每个 B 帧都取决于过去帧和一个将来帧，这意味着将来帧必须是在当前 B 帧可以被解/编码之前被解/编码。</strong></p>
<p><strong>编码后的视频数据以编码顺序放置在数据流中，而不是显示顺序</strong>。</p>
<h3>I P B 帧编码属性</h3>
<p>I，P 和 B 帧的编码通常需要不同数据量。</p>
<ul>
<li>I 帧需要大量数据，因为它们的编码与其他框架无关。</li>
<li><span style="color:#ff0000">P 和 B 帧通常需要的数据少于 I 帧（时间预测）</span>。</li>
<li>B 帧的编码数据通常少于 P 帧，因为：
<ul>
<li>同时使用前后参考帧，可以形成更好的预测。</li>
<li>以较低的质量编码 B 帧通常不会带来负面影响，B 帧的编码质量较低不会影响序列中的其他帧。</li>
</ul>
</li>
</ul>
<h3>宏块</h3>
<p>MPEG 使用 16x16 像素 MC 预测来减少时间视频中固有的冗余。</p>
<p>在 I 帧中，必须以帧内模式对每个宏块进行编码。</p>
<p>在 P 帧中，每个宏块都可以使用前向编码预测或帧内模式。</p>
<p>在 B 帧中，每个宏块都可以前向编码，后向或双向预测或帧内模式。</p>
<p>为每个前向和后向预测指定一个 MV（motion vector）宏块，同时为每个双向指定两个 MV 预测宏块。</p>
<h3>DCT 块</h3>
<p>每个宏块（intra or inter）被划分为 8x8 像素块。</p>
<p>为每个块计算 2D-DCT。 DCT 系数被单独量化。</p>
<p>量化系数经过 zigzag 扫描，游程长度进行编码，结果对（游程长度，幅度组成的一对）经过霍夫曼编码并输出至比特流。</p>
<p>还有一些块间和宏块间处理。</p>
<h3>Slices</h3>
<p>MPEG 编码要求每个宏块都属于一个切片，所有切片都构成整个图片。</p>
<p><span style="color:#ff0000">切片是一系列任意数量的连续宏块：</span></p>
<ul>
<li><span style="color:#ff0000">每个切片至少应包含一个宏块。</span></li>
<li><span style="color:#ff0000">切片不得重叠。</span></li>
<li><span style="color:#ff0000">切片的位置可能因图片而异。</span></li>
</ul>
<p>这提供了一种用于预测宏块中某些参数的结构，同时保持一定程度的错误弹性。</p>
<p>在 I 帧中，DCT 系数的 DC 值在一个<strong>片（Slice）内</strong>从块到块被差分编码。（JPEG 是整幅图做差分编码）</p>
<p>在 P 和 B 帧中，运动矢量在片内从宏块到宏块进行差分编码。</p>
<p>如果位流中发生错误，则切片中的剩余数据将丢失。 但是，解码器可以通过搜索下一个切片起始码，重新同步位流并继续解码过程来恢复。</p>
<h3>MPEG Syntax</h3>
<p><strong>序列头</strong>指定图片的高度/宽度，以及样本宽高比，帧速率，比特率和缓冲区大小序列。 如果未使用默认的量化器，则还包括量化矩阵。</p>
<p><strong>GOP 头</strong>指定时间代码并指示 GOP 是否打开或关闭。</p>
<p><strong>图像头</strong>指定<strong>时间参考参数</strong>，图片类型（I，P 或 B）以及缓冲区充满度。 如果是使用时域预测，它还描述了运动矢量精度（完整或半像素）和运动矢量范围。</p>
<p><strong>切片头</strong>指定了切片开始的宏块行，以及 DCT 系数的初始量化器比例因子。</p>
<p><strong>宏块头</strong>包含一个标志，<strong>指示是内部还是帧间编码</strong>。</p>
<p>对于帧间编码，它包含编码的运动矢量，这个运动矢量会基于相对于先前的运动矢量进行差分编码。</p>
<p>可以在宏块级别上调整量化器比例因子。1bit 用于指定是否调整因子。</p>
<p>序列、GOP、图片、切片的标头以这些代码开头：</p>
<ul>
<li>例如，通过简单地检查编码数据流而无需解析或解码数据，就能找到第二个 GOP 中第二张图片的第二切片编码的数据</li>
<li>允许对压缩比特流的随机访问</li>
<li>提高容错能力</li>
</ul>
<blockquote>
<p>[!Example] 习题助记<br>
MPEG-1 is used in <strong>VCD</strong> ，MPEG-2 is used in <strong>DVD</strong>.<br>
MP3 is a lossy compression method.<br>
H.261、H.263 主要用于可视电话<br>
The bit stream synatax is specified in MPEG video coding standard.<br>
The encoding process is <strong>NOT</strong> specified in MPEG coding standard.<br>
MPEG-1 allows B frames.<br>
P frames require <strong>LESS</strong> data than I frames because of temporal prediction.<br>
In video coding the position of slices may change from picture to picture.<br>
In video coding <strong>the Picture header</strong> specifiles the temporal reference parameter</p>
</blockquote>
<h1>🍂H.264-MPEG4-AVC（高级视频编码）</h1>
<blockquote>
<p>[!hint] 考点 33：H.264 编码结构、基线档次、主档次、向量块大小、新特性、视频编码层级和网络抽象层</p>
</blockquote>
<p>在过去十年中，视频编码领域最重要的发展之一是由 ITU 和 ISO/IEC 的联合视频团队（Joint Video Team，JVT）定义的 H.264/MPEG-4 AVC 标准。ITU 从 1997 年开始使用新的编码工具开展了 H.26L（for long term）的工作。结果令人印象深刻，因此 ISO/IEC 决定与 ITU 合作，采用一个共同的标准，成立了联合视频团队。ITU 于 2003 年 5 月批准了新的 H.264 标准。ISO 于 2003 年 10 月批准了该标准，命名为 MPEG-4 第 10 部分，即高级视频编码（AVC）。</p>
<p>块框图和特性：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231110224654.webp" alt="image.png"></p>
<p>H.264/AVC 在压缩效率方面取得了重大突破，通常相对于 MPEG-2 和 MPEG-4 简单档次实现了大约 2 倍的压缩比。</p>
<p>在 H.264 标准化时，它支持三种档次（profiles）：基线档次、主要档次和扩展档次。</p>
<ul>
<li>后来，一项名为保真度范围扩展（FRExt）的修正引入了四个额外的配置，称为高级档次。</li>
<li>最初，基本档次和主档次引起了最大的关注。</li>
</ul>
<p>基本档次需要较少的计算和系统内存，并且针对低延迟进行了优化：</p>
<ul>
<li><span style="color:#ff0000">基本档次不包括 B 帧（由于固有时延）</span>或 <strong>CABAC（由于计算复杂性</strong>）。</li>
<li>基本档次非常适合视频电话应用以及其他需要成本效益的实时编码应用。</li>
</ul>
<p>主档次旨在为广播和内容存储应用提供尽可能高的视频质量和最低的比特率。</p>
<p>标准编解码器中的关键压缩特性：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231110231714.webp" alt="image.png"></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231110231651.webp" alt="image.png"></p>
<p>应用趋势：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231110232210.webp" alt="image.png"></p>
<h2>H.264/AVC 的目标和应用</h2>
<p>视频编码专家组（VCEG），ITU-T SG16</p>
<ul>
<li>H.26L 项目（1998 年初），最初的重点是视频会议和电话通信。</li>
<li>目标是将编码效率提高一倍，超过任何其他现有的视频编码标准。<br>
应用领域：</li>
<li>有线、卫星、地面数字视频广播</li>
<li>媒体存储、DVD、蓝光 DVD 等</li>
<li>互联网流媒体、视频电话在 3G/4G 网络上</li>
<li>视频会议</li>
<li>数字视频监控、数字电影等</li>
</ul>
<h2>与其他标准的关系</h2>
<p>在 ITU-T 和 MPEG 中都将批准相同的设计。</p>
<p>在 ITU-T 中，这将是一个新的独立标准：</p>
<ul>
<li>ITU-T 推荐标准 H.264。</li>
<li>ITU-T 系统（H.32x）将进行修改以支持它。<br>
在 MPEG 中，这将是 MPEG-4 套件中的一个新的“部分”：</li>
<li>与之前的 MPEG-4 视觉编解码器设计分开。</li>
<li>新的第 10 部分称为“高级视频编码”（类似于 MPEG-2 中的“AAC”位置，作为独立的编解码器）。<br>
与之前的标准不兼容（包括之前的 MPEG-4 视觉规范 - 核心技术不同）。<br>
MPEG-4 系统/文件格式正在进行修改以支持它。<br>
IETF 正在研究 RTP 有效载荷的封装。</li>
</ul>
<h2>新功能和共同元素</h2>
<p>视频编码层基于混合视频编码（hybrid video coding），与其他标准在理念上类似，但存在重要的区别。</p>
<p>新的关键功能包括：</p>
<ul>
<li>增强的运动补偿</li>
<li>用于变换编码的小块</li>
<li>改进的去块滤波器</li>
<li>增强的熵编码</li>
</ul>
<p>与之前的标准相比，H.264/AVC 具有以下共同元素：</p>
<ul>
<li>16x16 宏块</li>
<li>块运动位移</li>
<li>块变换</li>
<li>标量量化</li>
<li>I、P 和 B 帧类型<br>
相对于之前的标准，在相同感知质量下，H.264/AVC 可以实现约 50% 的比特率节省。</li>
</ul>
<h2>档次</h2>
<p>受限基准档次（Constrained Baseline Profile，CBP）：</p>
<ul>
<li>主要用于视频会议和移动应用等低成本应用，于 2009 年开发。</li>
<li>对应于基准档次、主档次和高级档次之间共同支持的功能子集。</li>
</ul>
<p>基准档次（Baseline Profile，BP）：</p>
<ul>
<li>主要用于需要额外数据丢失鲁棒性的低成本应用，如视频会议和移动应用。</li>
<li>包括所有受限基准档次支持的功能，以及用于提高鲁棒性的额外功能。</li>
<li>所有受限基准档次的比特流也被视为基准档次的比特流，因为这两个档次共享相同的档次标识码值。</li>
</ul>
<p>主档次（Main Profile，MP）：</p>
<ul>
<li>用于使用 MPEG-4 格式的标准定义数字电视广播，符合 DVB 标准定义。</li>
</ul>
<p>扩展档次（Extended Profile，XP）：</p>
<ul>
<li>用于流媒体视频档次。</li>
<li>具有相对较高的压缩能力和一些额外的技巧，以提高对数据丢失和服务器流切换的鲁棒性。</li>
</ul>
<p>高级档次（High Profile，HiP）：</p>
<ul>
<li>于 2004 年开发，用于广播和光盘存储应用，特别适用于高清电视应用（例如，已被蓝光光盘存储格式和 DVB 高清电视广播服务采用）。</li>
</ul>
<p>高 10 档次（High 10 Profile，Hi10P）：</p>
<ul>
<li>在高级档次的基础上增加了对每个样本解码图像精度高达 10 位的支持。</li>
</ul>
<p>高 4:2:2 档次（High 4:2:2 Profile，Hi422P）：</p>
<ul>
<li>针对使用隔行视频的专业应用。</li>
<li>在高 10 档次的基础上增加了对 4:2:2 色度子采样格式的支持，同时使用高达 10 位的解码图像精度。</li>
</ul>
<p>高 4:4:4 预测档次（High 4:4:4 Predictive Profile，Hi444PP）：</p>
<ul>
<li>在高 4:2:2 档次的基础上增加了对 4:4:4 色度采样的支持，每个样本的解码图像精度高达 14 位。</li>
<li>此外，还支持高效的无损区域编码和将每个图像编码为三个独立的色彩平面。</li>
</ul>
<h3>基准档次</h3>
<p>特点包括：</p>
<ul>
<li><span style="color:#ff0000"> I 和 P 帧类型（不包括 B 帧，因为时延较大）</span></li>
<li>循环内去块滤波器</li>
<li>1/4 像素级的运动补偿</li>
<li>基于树状结构的运动分割，最小块大小为 4x4</li>
<li>基于 VLC 的熵编码</li>
</ul>
<p>一些增强的错误容忍特性包括：</p>
<ul>
<li>灵活的宏块排序/任意切片排序</li>
<li>冗余切片</li>
<li>主要用于视频会议和无线应用</li>
</ul>
<h3>主档次</h3>
<p>主档次的特点包括：</p>
<ul>
<li>所有基准档次的特点，除了增强的错误容忍特性</li>
<li><span style="color:#ff0000">B 帧类型</span></li>
<li><span style="color:#ff0000">CABAC（上下文自适应二进制算术编码）</span></li>
<li>宏块级别的帧/场切换</li>
<li>对 B 帧和 P 帧预测进行自适应加权</li>
<li>支持隔行图像扫描</li>
</ul>
<p>主档次主要用于广播应用。</p>
<h2>基本宏块编码结构</h2>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231110233820.webp" alt="image.png"></p>
<h2>运动补偿</h2>
<p>运动补偿的特点包括：</p>
<ul>
<li>不同的块大小和形状用于运动补偿</li>
<li>1/4 像素精度
<ul>
<li>6 点滤波器用于 1/2 像素精度</li>
<li>简化滤波器用于 1/4 像素精度</li>
</ul>
</li>
<li>多个参考帧</li>
<li>时间反转运动和广义 B 帧</li>
<li>B 帧预测加权</li>
</ul>
<h2>H.264/AVC 编码数据格式</h2>
<p>H.264 区分视频编码层（VCL）和网络抽象层（NAL）。</p>
<p>编码过程的输出是 VCL 数据（表示编码视频数据的一系列比特），在传输或存储之前将其映射到 NAL 单元。</p>
<p>分别指定 VCL 和 NAL 的目的是区分编码特定的功能（在 VCL 中）和传输特定的功能。</p>
<p>每个 NAL 单元包含原始字节序列负载（RBSP），即对应于编码视频数据的一组数据和头部信息。</p>
<p>编码的视频序列由一系列 NAL 单元表示，可以通过基于数据包的网络、比特流传输链路或存储在文件中进行传输。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231110233942.webp" alt="image.png"></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231110234417.webp" alt="image.png|375"></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231110234420.webp" alt="image.png|300"></p>
<p>NAL 单元的第一个字节是一个头部，包含有关该包类型的信息。</p>
<pre><code class="language-c">ubyte forbidden_bit: 1; // set to 0
ubyte nal_ref_idc:2; // the level of priority
ubyte nal_unit_type:5; // NAL type
</code></pre>
<table>
<thead>
<tr>
<th>Type</th>
<th>Defintion</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>Undefined</td>
</tr>
<tr>
<td>1</td>
<td>Slice layer without partitioning non <span style="color:#ff0000">IDR（instaneous decoding refresh 立即编码刷新）</span></td>
</tr>
<tr>
<td>2</td>
<td>Slice data partition A layer <span style="color:#ff0000">（Partition A：片头信息，片里面宏块头信息，最重要）</span></td>
</tr>
<tr>
<td>3</td>
<td>Slice data partition B layer <span style="color:#ff0000">（Partition B：帧内编码的数据）</span></td>
</tr>
<tr>
<td>4</td>
<td>Slice data partition C layer <span style="color:#ff0000">（Partition C：帧间编码的数据）</span></td>
</tr>
<tr>
<td>5</td>
<td>Slice layer without partitioning IDR</td>
</tr>
<tr>
<td>6</td>
<td>Additional information (SEI) 时间信息</td>
</tr>
<tr>
<td>7</td>
<td>Sequence parameter set 序列参数集（序列编号、帧数、参考帧数目、图像大小、场模式）</td>
</tr>
<tr>
<td>8</td>
<td>Picture parameter set 图像参数集（图像编号、熵编码方式、条带数目、初始量化步长）</td>
</tr>
<tr>
<td>9</td>
<td>Access unit delimiter</td>
</tr>
<tr>
<td>10</td>
<td>End of sequence</td>
</tr>
<tr>
<td>11</td>
<td>End of stream</td>
</tr>
<tr>
<td>12</td>
<td>Filler data</td>
</tr>
<tr>
<td>13..23</td>
<td>Reserved</td>
</tr>
<tr>
<td>24..31</td>
<td>Undefined</td>
</tr>
</tbody>
</table>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231110235130.webp" alt="image.png"></p>
<h2>参考图片</h2>
<p>H.264 编码器可以使用一到两个先前编码的图片作为参考，用于对每个帧间编码的宏块或宏块分区进行运动补偿预测。</p>
<p>这使得编码器可以从比先前编码的图片更广泛的图片集中搜索当前宏块分区的最佳匹配。</p>
<p>编码器和解码器各自维护一个或两个参考图片列表，其中包含先前已编码和解码的图片（出现在当前图片之前和/或之后的显示顺序中）。</p>
<ul>
<li>P 帧中的帧间编码的宏块和宏块分区是从单个列表（列表 0）中的图片进行预测的。</li>
<li>B 帧中的帧间编码的宏块和宏块分区可以从两个列表（列表 0 和列表 1）中的图片进行预测。</li>
</ul>
<h2>Slices</h2>
<p>一个视频图像被编码为一个或多个切片，每个切片包含从 1 个宏块到图像中的总宏块数的整数个宏块（每个图像一个切片）。</p>
<p>切片中的宏块数不需要在图像内是恒定的。编码切片之间的相互依赖性很小，这有助于限制错误的传播。</p>
<p>符合基准配置的比特流包含编码的 I 和/或 P 切片：</p>
<ul>
<li>I 切片只包含帧内编码的宏块（从同一切片中先前编码的样本进行预测）；</li>
<li>P 切片可以包含帧间编码的宏块（从先前编码的图片中的样本进行预测）、帧内编码的宏块或跳过的宏块。<br>
编码图像可以由不同类型的切片组成：</li>
<li>基准档次的编码图像可以包含 I 和 P 切片的混合；</li>
<li>主档次或扩展档次的图像可以包含 I、P 和 B 切片的混合。<br>
切片数据包括切片头、一系列编码的宏块和/或跳过的宏块的指示。<br>
切片头定义了切片类型和切片所属的编码图像，并可能包含与参考图片管理相关的指令。</li>
</ul>
<blockquote>
<p>[!hint] 考点 34：帧内预测、运动向量预测、帧间预测</p>
</blockquote>
<blockquote>
<p>[!hint] 考点 35：H.264 的 DCT 变换</p>
</blockquote>
<blockquote>
<p>[!hint] 考点 36：熵编码：指数格罗姆编码和 CAVLC</p>
</blockquote>
<h2>CAVLC</h2>
<p>这是用于编码变换系数的残差和之字形有序块的方法。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231111134717.webp" alt="image.png"></p>
<p>CAVLC（Context-Adaptive Variable Length Coding）旨在利用量化的 4×4 块的几个特点：</p>
<ul>
<li>在预测、变换和量化之后，块通常是稀疏的（主要包含零）。</li>
<li>在之字形扫描后，最高的非零系数通常是 +/-1 的序列。</li>
<li>相邻块中的非零系数的数量是相关的。</li>
<li>非零系数的级别（幅度）在之字形扫描开始时往往较高，并且随着频率增高而降低。</li>
</ul>
<p>对一块变换系数进行 CAVLC 编码的过程如下：</p>
<ol>
<li>编码系数的数量和尾部的 1。</li>
<li>编码每个尾部 1 的符号。</li>
<li>编码剩余非零系数的级别。</li>
<li>编码最后一个系数之前的零的总数。</li>
<li>编码每个零的连续出现次数。</li>
<li>编码系数的数量和尾部的 1<br>
第一步是编码非零系数的总数（NumCoef）和尾部的 1（T1s）。<br>
NumCoef 的取值范围可以是从 0（4x4 块中没有系数）到 16（16 个非零系数）。<br>
T1s 的取值范围可以是从 0 到 3。<br>
如果尾部的 +/- 1 的个数超过 3 个，只有最后 3 个被视为“特殊情况”，其他的被编码为普通系数。</li>
</ol>
<p>例如：4x4 块</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231111135021.webp" alt="image.png"></p>
<p>The Num-Coef = 7, and T1s = 3</p>
<p>用于编码 Num_Coeff 和 T1 的四个表格分别是 Num-VLC0、Num-VLC1、Num-VLC2 和 FLC。</p>
<p>Num-VLC0：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231111135118.webp" alt="image.png"></p>
<p>表格的选择取决于先前编码块中，上方和左方的非零系数的数量 NU 和 NL。</p>
<p>参数 N 的计算如下：</p>
<ul>
<li>如果块 U 和 L 都可用（即在同一个编码片中），N = (NU + NL) / 2。</li>
<li>如果只有块 U 可用，N = NU。</li>
<li>如果只有块 L 可用，N = NL。</li>
<li>如果两者都不可用，N = 0。</li>
</ul>
<p>表格的选择基于以下方式中的 N 值：</p>
<table>
<thead>
<tr>
<th>N</th>
<th>Selected Table</th>
</tr>
</thead>
<tbody>
<tr>
<td>0,1</td>
<td>Num-VLC0</td>
</tr>
<tr>
<td>2,3</td>
<td>Num-VLC1</td>
</tr>
<tr>
<td>4,5,6,7</td>
<td>Num-VLC2</td>
</tr>
<tr>
<td>8 or above</td>
<td>FLC</td>
</tr>
</tbody>
</table>
<p>FLC 的形式如下：xxxxyy（即 6 位）</p>
<p>其中 xxxx 和 yy 分别表示 Num_Coeff 和 T1。</p>
<ol start="2">
<li>
<p>对每个 T1 编码其尾随 1 的符号<br>
对于每个 T1，一个比特位编码其符号（0 表示正，1 表示负）。<br>
这些符号按照逆序编码，从最高频率的 T1 开始。</p>
</li>
<li>
<p>对剩余的非零系数编码其级别（符号和大小）<br>
 块中每个剩余的非零系数的级别（符号和大小）按照逆序进行编码。<br>
 选择用于编码每个级别的 VLC 表根据每个连续编码级别的大小进行自适应调整（上下文自适应）。<br>
 有 7 个可供选择的 VLC 表，从 Level_VLC0 到 Level_VLC6。<br>
 Level_VLC0 偏向较低的大小，Level_VLC1 偏向稍高的大小，依此类推。<br>
 初始化表格为 Level_VLC0（除非非零系数超过 10 个且尾随 1 少于 3 个，在这种情况下从 Level_VLC1 开始）。<br>
 编码最高频率的非零系数。<br>
 如果该系数的大小大于预定义的阈值，则切换到下一个 VLC 表。</p>
</li>
</ol>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231111135814.webp" alt="image.png"></p>
<p> 级别的选择与最近编码的系数的大小相匹配。阈值列在表中；</p>
<p> 第一个阈值为零，这意味着在编码第一个系数级别之后，表总是递增。</p>
<ol start="4">
<li>编码最后一个系数之前的零的总数。</li>
</ol>
<p>以下是用于编码最后一个系数之前的零的总数（TotZeros）的表格。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231111135924.webp" alt="image.png"></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231111135948.webp" alt="image.png"></p>
<ol start="5">
<li>编码每个零的连续出现次数<br>
在每个非零系数之前的零的数量（run_before）按照逆序进行编码。对于每个非零系数，除了以下两种情况外，都会编码一个 run_before 参数：<br>
(a) 如果没有更多的零需要编码；<br>
(b) 对于最后（最低频率）的非零系数，不需要编码 run_before。</li>
</ol>
<p>每个零的连续出现次数的 VLC 表的选择取决于：</p>
<p>(a) 尚未编码的零的数量（ZerosLeft）；</p>
<p>(b) run_before。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231111140035.webp" alt="image.png"></p>
<p>例子：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231111140120.webp" alt="image.png"></p>
<p>考虑以下 4×4 帧间残差块</p>
<p>块的 Zigzag 重新排序如下所示：</p>
<p>0,3,0,1,-1,-1,0,1,0,0,0,0,0,0,0,0</p>
<p>因此，NumCoeff=5，TotZero=3，T1s=3</p>
<p>假设 N=1</p>
<p>编码：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231111140327.webp" alt="image.png"></p>
<p>解码：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231111140403.webp" alt="image.png"></p>
<h1>心理声学模型</h1>
<blockquote>
<p>[!Hint] 考点 19：心理声学模型：频域掩蔽、时域掩蔽、听觉阈值、SMR、关键带宽、巴克刻度、感知熵</p>
</blockquote>
<h2>声压等级 Sound Pressure Levels</h2>
<p>声音以压力波的形式到达人耳。声压 $p$ 在 $[10^-5,10^2]$Pa 范围之间变化。</p>
<p>声压等级 SPL，单位 dB：</p>
<p>$$<br>
SPL= 10 \log_{10}{\left( \frac{p}{p_{0}} \right)^2}, p_{0}=20\mu Pa<br>
$$</p>
<p>p0 为音频在 2kHz 左右的听觉阈值处的声压。</p>
<p>声音也可以被声音强度 $I$ 来描述，表示声波单位面积的功率，与 p 的平方成正比。</p>
<p>声压等级 SPL 也可以被定义为：</p>
<p>$$<br>
SPL= 10 \log_{10}{\left( \frac{I}{I_{0}} \right)}, I_{0}=10^{-12}W/m^2<br>
$$</p>
<p>$I_0$ 和 $p_0$ 对应。</p>
<h2>响度 Loudness</h2>
<p>响度等级定义为，在正面入射平面场下，被感知到的与所检测的声音一样响亮的 1 kHz 声音的级别。</p>
<p><span style="color:#ff0000">响度取决于强度、持续时间、时间和频谱结构。</span></p>
<p>单位为 phon，描述了自变量为频率的函数中一条等响曲线。下图每条曲线指的是同样的响度。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231105213848.webp" alt="image.png"></p>
<p>在高音量水平下，以 phon 为单位测量的响度与以 dB 为单位测量的声强之间的差异减小。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231105214437.webp" alt="image.png"></p>
<h2>掩蔽现象</h2>
<h3>同时掩蔽（频域掩蔽）</h3>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231105214640.webp" alt="image.png|450"></p>
<blockquote>
<p>频域掩蔽是指在掩蔽声与被掩蔽声同时存在时产生的掩蔽效应，又称为同时掩蔽。在这种情况下，掩蔽声在掩蔽效应发生期间持续影响着被掩蔽声，形成一种强烈的掩蔽效应。通常情况下，频域中的一个强音会掩盖附近较弱的声音，而距离强音较近的弱音往往更容易被掩蔽；相反地，距离较远的弱音不太容易受到掩蔽效应的影响。图 3 解释了频域掩蔽现象，可以看到一个强信号掩蔽了两个接近其频率的弱信号，低于掩蔽域值的弱信号将无法听见，这导致听觉的安静阈值在掩蔽作用下提高。一般来说，低频声音更容易掩蔽高频声音。</p>
</blockquote>
<h3>非同时掩蔽（时域掩蔽）</h3>
<blockquote>
<p>时域掩蔽效应是在时域中相邻的声音之间互相的掩蔽效应，或被称为非同时掩蔽。时域掩蔽又分为超前掩蔽（pre-masking 或 backward masking）和滞后掩蔽（post-masking 或 forward masking）</p>
</blockquote>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231105214835.webp" alt="image.png|500"></p>
<p>虚线之间是掩蔽声音实际的存在时间。</p>
<blockquote>
<p>声音信号大多数时候是非稳态的瞬时信号，声压级随着时间变化很快，即强音后面跟着弱音，弱音后面又可能跟着强音。比较强的声音往往会掩蔽随后到来的较弱音。时域掩蔽又分为前掩蔽和后掩蔽。若掩蔽声音出现之前的一段时间内发生掩蔽效应，则称为前掩蔽；否则称为后掩蔽。前掩蔽效应要大于后掩蔽效应，前掩蔽发生作用的时间大于后掩蔽的时间。产生时域掩蔽的主要原因是人的大脑处理信息需要花费一定的时间，时域掩蔽也随着时间的推移很快衰减，是一种弱掩蔽效应。</p>
</blockquote>
<h3>窄带噪声掩蔽</h3>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231105214923.webp" alt="image.png|450"></p>
<p>信号掩蔽比（signal to mask ratio, SMR）。</p>
<blockquote>
<p>注意：信噪比是 SNR（Signal-to-noise ratio）</p>
</blockquote>
<blockquote>
<p>窄带噪声通常是指带宽等于或者小于听觉临界频带的噪声。在图 1 中，以不同中心频率的窄带噪声作为掩蔽声时的听阈曲线，窄带噪声的中心频率分别为 0.25KHz，1KHz，4KHz，带宽分别为 0.1KHz、0.16KHz 和 0.7KHz，图上部水平虚线为掩蔽噪声声强级 60dB，中部实线表示刚好可听到的纯音声级，下部的虚线是听觉安静域值。从图中可以看出，被掩蔽纯音的频率偏离掩蔽噪声中心频率越大，掩蔽效应下降越快；因为是平滑以后的数据，故而不呈锯齿状。信号分量和掩蔽域值之间的声级差，称信号掩蔽比 (signal to mask ratio, SMR)，SMR 越大，掩蔽效果越小。上图中，0.25KHz，1KHz，4KHz 的最小 SMR 分别为 2、3 和 5dB，最小 SMR 是设计音频编码器很重要的参数。</p>
</blockquote>
<p>下图表示不同级别的掩蔽音调下，1kHz 窄带噪声掩蔽器的掩蔽阈值。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231105215907.webp" alt="image.png"></p>
<h3>纯音掩蔽</h3>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231105220158.webp" alt="image.png"></p>
<blockquote>
<p>从图中可以看出，当被掩蔽音声级较低时，掩蔽域值向低频扩展（斜率较小）；而在声级较高时则相反。当掩蔽音声级为 90dB 时，掩蔽曲线峰值为 75dB，信号掩蔽比为 15dB。与噪声相比，纯音在掩蔽方面具有较大的信号掩蔽比（SMR），这意味着噪声比纯音具有更好的掩蔽效果。纯音的掩蔽效应基本符合以下几个规律：低频纯音容易掩蔽高频纯音，而高频纯音相对较难掩蔽低频纯音；频率相近的纯音容易互相掩蔽；当增加掩蔽声的声压级时，掩蔽阈值会提高，同时被掩蔽的频率范围也会扩展。</p>
</blockquote>
<h3>临界带宽</h3>
<blockquote>
<p>临界带宽指临界频带的带宽，即恰能产生变化的频率通带（频段）的宽度值。如响度测试中指恰能使声音响度产生变化的带宽值：当声音由一定频带组成时，它的响度变化呈现出下图所示的规律：带宽从很窄到越来越宽的过程中，声音整体响度开始时保持不变；当到达一个特定的带宽后，声音整体响度会随着带宽的变宽而变得更响。<br>
<img src="https://cdn.gallery.uuanqin.top/img/20231106201541.webp" alt="image.png|275"></p>
</blockquote>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231106200607.webp" alt="image.png"></p>
<p>Threshold of a narrow band noise centered between two sinusoidal maskers at a level of 50dB as a function of the frequency separation between the two sinusoidals.</p>
<h3>掩蔽 Masking</h3>
<p><strong>掩蔽曲线的水平在接近遮蔽音调频率的地方最高</strong>。</p>
<p>当测试信号频率超过临界带宽远离遮蔽音调频率时，掩蔽曲线迅速下降。</p>
<p><strong>掩蔽频率曲线的形状取决于掩蔽音调的频率和水平</strong>。</p>
<p>掩蔽曲线在很大程度上取决于掩蔽音调是音调还是噪声样式。</p>
<h2>音频编码的心理声学模型</h2>
<h3>巴克刻度 Bark Scale</h3>
<blockquote>
<p>巴克刻度是一种心理声学的尺度。</p>
<p>临界频带指的是由于耳蜗构造产生的听觉滤波器的频率带宽。听觉系统中，耳蜗起着频谱分析的作用，基底膜上特定位置点是对某一特征频率（Characteristic Frequency, CF）的响应最大，当声波偏离 CF 时，该点的响应减少，因此基底膜上每一点可等效成具有特定中心频率（CF）的带通滤波器，整个听觉系统可等效成一系列具有连续 CF 的、相互交叠的带通滤波器，称为“听觉滤波器”。临界频带就是听觉系统带通滤波功能的反映，听觉滤波器的带宽即为临界带宽。</p>
<p>概括地说，临界频带是声音频率带，在临界频带中第一个单音感知度会被第二单音的听觉掩蔽所干扰。根据相关的心理声学的研究，由于人耳的特殊结构，在同一个临界频带内信号容易发生掩蔽效应，即：主要信号容易被能量大并且频率接近的掩蔽信号所掩蔽。因此我们可以认为 Bark 域越近的信号越容易产生掩蔽效应。</p>
<p>声学研究中，人们使用听觉滤波器来模拟不同的临界频带。后来研究者发现人耳结构大致会对 24 个频率点产生共振，根据这个结论 Eberhard Zwicker 在 1961 年针对人耳特殊结构提出：信号在频带上也呈现出 24 个临界频带，分别从 1 到 24。这就是 Bark 域。</p>
<p>通常将人耳可听范围内的 20Hz～16kHz 分成 24 个临界频带，用临界频带级来表示临界频带的宽度，单位为巴克（Bark）：Bark=一个临界频带的宽度。当频率 f＜500Hz 时，1 Bark=f/100，临界带宽几乎恒定为 100Hz；当频率 f＞500Hz 时，1 Bark=4log(f/100)， 临界带宽随中心频率的升高而增加，约为中心频率的 20%。<br>
<img src="https://cdn.gallery.uuanqin.top/img/20231106202935.webp" alt="image.png|500"></p>
</blockquote>
<p>每个临界带宽（频率）对应于耳朵中基底膜上的固定距离。我们可以定义基底距离测量中的长度单位为一个临界带宽。</p>
<h3>掩蔽传播模型</h3>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231106202329.webp" alt="image.png"></p>
<p>Excitation patterns for narrow-band noise signals centered at different frequencies and at a level of 60 dB.</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231106203058.webp" alt="image.png"></p>
<p>Excitation patterns for narrow-band noise signals centered at 1kHz and at different levels.</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231106203147.webp" alt="image.png"></p>
<p>The curve in the diagram be expressed as a function of the Bark scale difference between the maskee and masker frequency.</p>
<h3>掩蔽曲线</h3>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231106203258.webp" alt="image.png|475"></p>
<h3>MP3 的心理声学模型</h3>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231106203341.webp" alt="image.png|379"></p>
<h3>感知熵</h3>
<p>感知熵（Perceptual entropy）PE：在不引入任何感知差异的情况下，对信号进行编码所需的每个频率样本的平均比特数。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231126174641.webp" alt="image.png"></p>
<p>$n_b$ 是分区带 b 中的频率线数量，$energy_b$ 是分区 b 中的信号能量，$threshold_b$ 是掩蔽阈值。</p>
<p>PE 可以用于确定 MDCT 或 attack 的块类型（PE&gt;1800 比特表示短窗口）</p>
<h3>Block Switching State Diagram</h3>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231106203917.webp" alt="image.png|479"></p>
<h2>本章参考的外部资源</h2>
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/647121839">心理声学声掩蔽效应及应用 - 知乎 (zhihu.com)</a></li>
<li><a href="http://www.heacad.cn/NewsDetail/3240260.html">听力学小课堂 | 名词释义（15）：临界带宽、临界频带-苏州海卡缔听力技术有限公司 (heacad.cn)</a></li>
<li><a href="https://blog.csdn.net/qq_34218078/article/details/125145458">声学感知刻度(mel scale、Bark scale、ERB)与声学特征提取(MFCC、BFCC、GFCC)_hz2erb_凌逆战的博客-CSDN博客</a></li>
<li><a href="https://www.bilibili.com/video/BV1D5411S71K/?spm_id_from=333.999.0.0&amp;vd_source=e03d48176855fc5349b27aef691f9cdb">mp3是如何骗过你耳朵的？【差评君】_哔哩哔哩_bilibili</a></li>
</ul>
<h1>🍂时频映射</h1>
<p>音频编码框图：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231110202133.webp" alt="image.png"></p>
<p>T/F mapping: FFT, PQMF, MDCT</p>
<p>傅里叶变换</p>
<ul>
<li>
<p>1822 年，傅里叶指出实时信号可以表示为具有不同频率的信号的总和。</p>
</li>
<li>
<p>傅里叶变换定义如下：<br>
<img src="https://cdn.gallery.uuanqin.top/img/20231110202311.webp" alt="image.png"></p>
</li>
<li>
<p>傅里叶逆变换等于：<br>
<img src="https://cdn.gallery.uuanqin.top/img/20231110202315.webp" alt="image.png"></p>
</li>
</ul>
<p>傅里叶级数</p>
<ul>
<li>
<p>对信号在有限时间间隔上的傅里叶变换可以用来在时域中重构原始信号。</p>
</li>
<li>
<p>实际上，我们不需要完整的傅里叶变换数据来完全在时域中重构信号。</p>
</li>
<li>
<p>我们只需要在离散频率点 f=k/T（其中 k 是整数）处的 X(f) 值。</p>
</li>
<li>
<p>我们通过将窗口信号替换为在时间间隔从 -T/2 到 T/2 内相等的信号，但在该间隔之外周期性地重复，来进行数据压缩。<br>
对于生成的周期信号，我们可以定义傅里叶级数：<br>
<img src="https://cdn.gallery.uuanqin.top/img/20231110202643.webp" alt="image.png"></p>
</li>
<li>
<p>$X[k]$ 只是时间限定信号在离散频率集合 $f=k/T$ 处的傅里叶变换。</p>
</li>
<li>
<p>我们可以使用以下公式重构 x(t)：<img src="https://cdn.gallery.uuanqin.top/img/20231110202703.webp" alt="image.png"><br>
采样定理</p>
</li>
<li>
<p>假设一个信号在频率范围从 -Fmax 到 Fmax 内具有频率内容。</p>
</li>
<li>
<p>如果我们选择某个频率间隔 Fs≥2Fmax，并周期性地延续信号的频谱范围超出从 -Fs/2 到 Fs/2 的范围。</p>
</li>
<li>
<p>从傅里叶级数的定义可以想象，这个频率周期函数只有离散时间分量 $x[n]$（如果我们定义 $T=1/F_s$，则有 $x[n]=x(nT)$）。</p>
</li>
</ul>
<p>在时域中对信号进行窗函数处理</p>
<ul>
<li>假设我们开始处理一个带限信号，并以采样频率 Fs≥2Fmax 对信号进行采样。</li>
<li>假设我们想要使用有限的样本块进行计算，以便在等待信号完成之前开始进行计算。</li>
<li>实现这个目标的一种方法是将原始的非有限信号 x(t) 与矩形窗函数相乘。</li>
</ul>
<p>矩形窗函数</p>
<ul>
<li>矩形窗函数 WR(t) 在 t=0 到 t=T 之间等于 1，在其他地方等于零。</li>
<li>我们可能想知道这个时限信号是否仍然足够带限。</li>
<li>时限信号的傅里叶变换等于原始信号的傅里叶变换与 WR(t) 的傅里叶变换 WR(f) 的卷积。</li>
<li>WR(f) 的傅里叶变换随着频率的增加下降得非常缓慢，这意味着时限信号的傅里叶变换很可能不再足够带限。</li>
<li>如果我们使用这个窗函数，会发生混叠现象。</li>
</ul>
<p>正弦窗函数</p>
<ul>
<li>矩形窗函数的问题在于窗口边缘处的截断非常尖锐。</li>
<li>尖锐的变化会导致高频成分。</li>
<li>在时域中，更好的窗函数选择是在边缘处缓慢衰减，以避免尖锐的不连续性。</li>
<li>正弦窗函数为 ws(t) = sin(πt/T)，0≤t≤T。当应用于离散时间信号的 N 个样本时，窗函数变为 ws[n] = sin(π(n+1/2)/N)，其中 n=0，...，N-1。</li>
<li>从频谱中可以看出，主瓣比矩形窗函数更宽，但频率幅度下降得更快。</li>
</ul>
<p>汉宁窗函数</p>
<ul>
<li>汉宁窗函数在边缘处没有正弦窗函数那样的突变。</li>
<li>汉宁窗函数为 wH(t) = 1/2(1-cos(2πt/T))，0≤t≤T。</li>
<li>当应用于离散时间信号的 N 个样本时，窗函数变为 wH[n] = 1/2(1-cos[2π(n+1/2)/N])，其中 n=0，...，N-1。</li>
<li>从频谱中可以看出，汉宁窗函数的衰减速度更快（有助于避免混叠），但其主瓣的宽度更大（对于准确的频率识别不利）。</li>
<li>在窗函数设计中，我们面临权衡：低旁瓣能量（与杂散频率成分相关）和主瓣的宽度（窗函数的频率分辨率）。</li>
</ul>
<blockquote>
<p>[!hint] 考点 17：FFT 和复杂度</p>
</blockquote>
<p>快速傅里叶变换（FFT）</p>
<ul>
<li>直接计算 DFT 需要 $N^2$ 次复数乘法和加法运算。</li>
<li>令人惊讶的是，FFT 允许我们在大约 $N×log_2N$ 次复数乘法/加法运算中完成完全相同的计算。</li>
<li>以 N=1024 为例，FFT 只需要 DFT 所需计算时间的 1%。</li>
<li>这个算法最早由高斯在 1880 年提出，后来由库利和图基在 1965 年重新发现。</li>
</ul>
<blockquote>
<p>[!hint] 考点 15：傅里叶变换、傅里叶级数、离散时间傅里叶变换、离散傅里叶变换</p>
</blockquote>
<table>
<thead>
<tr>
<th></th>
<th>时域</th>
<th>频域</th>
</tr>
</thead>
<tbody>
<tr>
<td>傅里叶变换</td>
<td>连续、无限</td>
<td>连续、无限</td>
</tr>
<tr>
<td>傅里叶级数</td>
<td>有限信号周期延拓，连续</td>
<td>离散</td>
</tr>
<tr>
<td>离散时间傅里叶变换</td>
<td>离散</td>
<td>有限频谱的周期延拓</td>
</tr>
<tr>
<td><span style="color:#ff0000">离散傅里叶变换</span></td>
<td>离散，有限</td>
<td>离散，有限</td>
</tr>
</tbody>
</table>
<blockquote>
<p>[!hint] 考点 16：Windowing</p>
</blockquote>
<table>
<thead>
<tr>
<th></th>
<th>去混叠</th>
<th>频率选择性</th>
</tr>
</thead>
<tbody>
<tr>
<td>矩形窗</td>
<td>最差</td>
<td><span style="color:#ff0000">最好</span></td>
</tr>
<tr>
<td>正弦窗</td>
<td>中等</td>
<td>中等</td>
</tr>
<tr>
<td>汉宁窗</td>
<td>最好</td>
<td>最差</td>
</tr>
</tbody>
</table>
<blockquote>
<p>[!hint] 考点 18：MDCT：重叠相加技术、长窗、短窗</p>
</blockquote>
<p>MDCT</p>
<p>重叠相加技术</p>
<ul>
<li>PQMF 通常被视为时频银行（Time Frequency banks）。相应的编码称为子带编码。</li>
<li>如果在音频编码过程中，将时域的数据样本映射到频域的数据样本，例如使用 FFT，这种音频编码方法称为变换编码。</li>
<li>我们已经知道，在进行 DFT 之前，音频信号会进行窗函数处理以避免混叠效应，在解码器中，我们需要知道如何恢复原始信号。</li>
<li>除了应用逆离散傅里叶变换之外，我们还需要将窗函数的影响从数据中去除。</li>
<li>第一种方法是将逆 DFT 的输出除以窗函数系数。</li>
<li>问题在于量化/反量化会在信号中引入小的误差。</li>
<li>这些误差可能是听不到的，但是将逆 DFT 的输出除以窗函数可能会放大数据块边缘附近的误差，因为窗函数在该区域被设计为平滑地趋近于零。</li>
</ul>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231110204338.webp" alt="image.png|450"></p>
<p>在编码器中，块输入信号是重叠的。在解码器中，我们重叠并相加输出信号。</p>
<p>窗函数的设计使得在没有量化的情况下可以恢复原始信号。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231110204716.webp" alt="image.png"></p>
<p>重叠量 $N-M ≤ N/2$</p>
<p>在编码器中，每个连续的数据块从前一个数据块的起始位置后的 M 个样本开始，并包括 M 个新的数据样本。</p>
<p>在解码器中：</p>
<ul>
<li>我们将逆变换和窗函数处理后的数据的前 M 个样本传输到输出缓冲区。</li>
<li>将剩余的 N-M 个样本存储到存储缓冲区中。</li>
<li>我们将前一个数据块存储缓冲区中的 N-M 个样本与当前数据块输出缓冲区的前 N-M 个样本相加。</li>
<li>然后，我们将输出缓冲区的 M 个样本发送到解码器的输出流中。</li>
</ul>
<p>我们选择在解码器中进行窗函数处理的原因是：</p>
<ul>
<li>使逆变换块边缘附近的量化噪声较小；</li>
<li>分析和合成阶段可以对称地进行。</li>
</ul>
<p>对于分析和合成窗函数 $wa[n]$ 和 $ws[n]$，有以下要求：</p>
<ul>
<li>在没有重叠的任何块区域中，<img src="https://cdn.gallery.uuanqin.top/img/20231110204931.webp" alt="image.png"></li>
<li>在重叠区域中，<img src="https://cdn.gallery.uuanqin.top/img/20231110204934.webp" alt="image.png"><br>
该条件将一个块的窗函数的右侧与下一个块的窗函数的左侧相关联。i 是块的索引。</li>
</ul>
<p>窗的选择：</p>
<p>如果分析和合成窗函数是相同的，我们有：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231110205027.webp" alt="image.png"></p>
<p>一个满足这个条件的简单窗函数是：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231110205032.webp" alt="image.png"></p>
<p>正弦窗口可能无法为特定应用提供频率分辨率与泄漏之间的权衡。实际上，我们可以通过一种归一化过程来修改任何窗口函数，以满足重叠相加条件。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231110205646.webp" alt="image.png"></p>
<p>如果 w'(p) 具有控制其形状的参数，我们可以调整这些参数以调节归一化窗口以适应特定应用。归一化过程可以使用 Kaiser-Bessel 窗口作为核窗口，并在相邻块之间具有 50% 的重叠来进行，从而创建所谓的“Kaiser-Bessel 衍生”窗口。</p>
<p>音频编码中的窗口考虑因素：</p>
<ul>
<li>在音频编码中，我们希望：
<ul>
<li>最大化频率分离。</li>
<li>最小化音频阻塞效应的影响。</li>
</ul>
</li>
<li>所选的窗口长度和形状与这两个属性有关。</li>
<li>给定输入数据到滤波器组的块大小，窗口形状的选择决定了滤波器组的频谱分离程度：
<ul>
<li>正弦窗口比α=4 的 KBD 窗口具有更好的近端选择性（主瓣更窄）。</li>
<li>正弦窗口的侧瓣能量的抑制程度较差。<br>
根据输入音频信号的特性，正弦窗口或α=4 的 KBD 窗口可能为信号表示提供更好的频率分辨率：</li>
</ul>
</li>
<li>对于高度音调的信号，近端选择性比频率表示中的最终抑制更重要。</li>
<li>如果信号的频率分量之间存在较大的分离，更高的最终抑制可以更好地利用信号分量的掩蔽效应。</li>
</ul>
<p>改进离散余弦变换（MDCT）：</p>
<ul>
<li>为了减少窗口化引起的阻塞效应，我们希望窗口边缘的过渡到零尽可能平缓。</li>
<li>这意味着当我们设置大的重叠区域时，阻塞效应最小。</li>
<li>然而，我们需要对每 M 个新的时间样本输入编码器的样本进行 N 个样本的变换数据的编码、传输/存储。</li>
<li>在从冗余和无关信息去除中获得任何编码增益之前，我们将数据速率增加了 N/M 倍。</li>
<li>为了解决这个问题，开发了 MDCT。</li>
<li>MDCT 是一种替代 DFT 的变换，允许块之间有 50% 的重叠，而不增加数据速率。<br>
<img src="https://cdn.gallery.uuanqin.top/img/20231110205908.webp" alt="image.png"></li>
</ul>
<h1>MP3 的编码与解码</h1>
<p>Normative：必须的，必要的</p>
<p>Informative：不必的</p>
<blockquote>
<p>[!hint] 考点 22：MP3 的编解码器过程</p>
</blockquote>
<h2>MP3 编码器（Informative Elements）</h2>
<p>编码器概览：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231109220436.webp" alt="image.png"></p>
<h3>时频映射</h3>
<p>PQMF：在一个帧中，对 1152 个 PCM 音频样本进行滤波，使得每个子带包含 36 个子带样本。</p>
<p>窗函数：在进行 MDCT 之前，对子带样本应用了四种不同的窗函数。</p>
<p>MDCT：使用两种不同的 MDCT 块长度，一种是长块，包含 36 个样本，另一种是短块，包含 12 个样本。<strong>短块适合变化较快的信号，长块适合平稳信号。</strong></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231109220745.webp" alt="image.png"></p>
<h3>块模式</h3>
<ul>
<li>注意，短块长度是长块长度的 1/3。在短块模式下，三个短块替代一个长块，这样无论块类型如何，音频样本帧的 MDCT 样本数量保持不变。</li>
<li>对于给定的音频样本帧，MDCT 可以全部具有相同的块长度（长块或短块），或者采用混合块模式。</li>
<li>在混合块模式下，MDCT 对于两个较低频率子带使用长窗口，对于 30 个较高频率子带使用短窗口。这种模式在不牺牲较高频率的时间分辨率的情况下，为较低频率提供更好的频率分辨率。</li>
</ul>
<p>应用于 1152 个 PCM 样本的信号处理：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231109221035.webp" alt="image.png"></p>
<h3>去混叠</h3>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231109221050.webp" alt="image.png"></p>
<p>在量化之前，应用了一种抗混叠处理来消除在分析 PQMF 中引入的混叠，以减少传输的信息量。</p>
<p>这种减少是通过一系列蝶形计算来实现的。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231109221249.webp" alt="image.png"></p>
<h3>非均匀量化</h3>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231109221321.webp" alt="image.png"></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231109221324.webp" alt="image.png"></p>
<p><span style="color:#ff0000">global_gain：全局量化步长。控制比特率。</span></p>
<p>scale_factor：子带因子控制噪声。</p>
<p>在量化之前，将 MDCT 系数提升到 3/4 的幂，以在量化器值的范围内提供更一致的信噪比。</p>
<p>scale_factor 用于调整量化噪声，以适应掩蔽阈值的不同频率轮廓。</p>
<h3>哈夫曼编码</h3>
<p>有序的频率线被分为三个不同的区域，分别称为“rzero”、“count1”和“big_value”区域。</p>
<ul>
<li>连零区域：从较高的频率开始，编码器将连续的全零值识别为一个区域，即“rzero”区域。“rzero”区域必须包含偶数个零值。</li>
<li>数 1 区域：4 个一起编码。由一系列仅包含 -1、0 或 1 的值组成。这个区域的两个霍夫曼表每次编码 4 个值，因此值的数量必须是 4 的倍数。</li>
<li>big_value 区：2 个一起编码。涵盖了所有剩余的值，称为“big_values”区域。这些值与 30 个霍夫曼表一起进行编码。这个区域进一步分为三个子区域，每个子区域都有自己特定的霍夫曼表。</li>
</ul>
<h3>比特分配（两层嵌套循环）</h3>
<p>外层循环：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231109221944.webp" alt="image.png"></p>
<p>内层循环：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231109221959.webp" alt="image.png"></p>
<p>Quantizer_change is the change of global_gain.</p>
<blockquote>
<p>[!hint] 考点 20：MP3：比特流格式、MP3 采样频率、stereo/joint channel/dual channel/single channel、哈夫曼编码域，比特池</p>
</blockquote>
<h3>比特流格式</h3>
<p>为了生成符合 MP3 标准的比特流，霍夫曼编码的频率线、辅助信息和帧头被组合成比特流。</p>
<p>比特流被分割成帧，每帧表示 1152 个音频样本。</p>
<p>帧头描述了编码音频所使用的比特率和采样频率。</p>
<p>辅助信息告知使用的块类型、霍夫曼表、subband gain 和子带比例因子。</p>
<h3>比特池</h3>
<p>使用“比特储备池”方法来满足编码器对编码比特的时变需求。</p>
<p>编码器只能从过去的帧中借用比特，而不能从未来的帧中借用比特。</p>
<p>MPEG/Audio Layer 3 比特流使用一个 9 位指针，称为 main_data_begin，来表示当前处理帧的主数据的起始点。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231109222321.webp" alt="image.png"></p>
<h3>Stereo Encoding</h3>
<p>联合立体声</p>
<p>中侧立体声</p>
<p>强度立体声</p>
<h2>MP3 解码器（Normative Elements）</h2>
<p>MPEG 音频第三层解码概述：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231109222737.webp" alt="image.png"></p>
<p>解码器主要由三个部分组成：“比特流解码”，“逆量化”和“频率到时间映射”。</p>
<ul>
<li>输入的编码比特流通过第一部分进行同步，并提取每帧的量化频率线和其他信息。</li>
<li>接下来，量化的频率线进行反量化。</li>
<li>最后，应用逆 MDCT 和合成 PQMF 来获得以 PCM 格式输出的信号。</li>
</ul>
<p>MP3 解码器的框图：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231109222925.webp" alt="image.png"></p>
<p>比特流解码框图：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231109222954.webp" alt="image.png"></p>
<h3>辅助信息解码的过程</h3>
<ul>
<li>帧中的辅助信息包含解码主数据所需的必要信息。</li>
<li>它包含有关在 Huffman 解码过程中使用哪些霍夫曼表以及比例因子的信息。</li>
<li>它还包含主数据开始的位置信息。</li>
</ul>
<h3>哈夫曼信息解码</h3>
<ul>
<li>Huffman 信息解码块的任务是设置 Huffman 解码块所需的所有参数。</li>
<li>第一个任务是从辅助信息中收集有关 Huffman 编码比特的数据。这包括在比特流中找到 Huffman 编码的比特，并确定每个频谱区域分区所使用的 Huffman 表。</li>
<li>此外，该块必须确保生成所有频率线，而不管 Huffman 编码比特中描述了多少频率线。当出现少于 576 个频率线时，Huffman 信息解码块必须执行零填充以填补数据的不足。</li>
</ul>
<p>哈夫曼解码：</p>
<ul>
<li>由于 Huffman 编码是一种可变长度编码方法，没有尝试将 Huffman 编码比特中的各个码字分开，因此，如果不从已知为码字起始点的 Huffman 编码比特开始解码，无法识别 Huffman 编码比特中间的单个码字。</li>
<li>如果在一串 Huffman 编码比特中发生错误，剩余的编码比特无法正确解码。<strong>我们可以直接找下一帧的同步字，那么这一帧就去掉。</strong></li>
</ul>
<p>子带因子解码：<img src="https://cdn.gallery.uuanqin.top/img/20231109223350.webp" alt="image.png"></p>
<h3>反量化（Dequantization）或去缩放（Descaling）</h3>
<p>目的是重构编码器中由 MDCT 块生成的频率线的感知相同的数据。</p>
<p>长窗口的计算公式为：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231109223456.webp" alt="image.png"></p>
<p>短窗口的计算公式为：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231109223500.webp" alt="image.png"></p>
<p>反量化：</p>
<ul>
<li><span style="color:#ff0000">全局步长（global_gain）定义了在一个 granule 内用于一个声道的量化步长</span>。</li>
<li>编码器中的比例因子（scalefactors）使用步长为 2 或 sqrt(2) 进行量化，可以通过 scalefac_scale 标志的值来识别，如果 scalefac_scale=0，则 scalefac_multiplier=0.5，否则 scalefac_multiplier=1。</li>
<li>pretab 和 preflag 变量仅在长窗口的情况下使用。一个表格为 pretab 变量的每个比例因子带指定了一个单独的值。</li>
<li>对于短窗口，通过 subblock_gain 指定了一个 gain factor。</li>
</ul>
<h3>重新排序（Reordering）</h3>
<p>通过解量化生成的频率线并不总是以相同的方式排序。</p>
<p>在长窗口的 MDCT 块中，它会首先按子带，然后按频率生成排序的频率线。</p>
<p>为了增加频率线的 Huffman 编码效率，在短窗口中，频率线首先按子带排序，然后按频率排序，最后按窗口排序。</p>
<h3>立体声处理</h3>
<p>在解量化之后，重构的值在进入合成滤波器组之前进行中侧处理（MS）。</p>
<p>在中侧立体声（MS）模式下，传输的是归一化的中侧（middle/side）通道值 Mi/Si，而不是左右（left/right）通道值 Li/Ri。因此，可以使用这些 Mi/Si 值来重构 Li/Ri。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231109224345.webp" alt="image.png"></p>
<h3>去混叠</h3>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231109224359.webp" alt="image.png"></p>
<h3>反向 MDCT</h3>
<p>从去混叠块中处理的频率线通过 IMDCT 块进行处理。IMDCT 的表达式如下所示：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231109224424.webp" alt="image.png"></p>
<p>Xk 表示频率线，对于短块 n=12，对于长块 n=36。</p>
<p>根据 block_type 值，xi 与之前定义的窗口之一相乘：</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231109224428.webp" alt="image.png"></p>
<h3>IMDCT 的重叠相加</h3>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231109224656.webp" alt="image.png"></p>
<h3>合成多相滤波器组</h3>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231109224713.webp" alt="image.png"></p>
<h2>编码语法（Normative Elements）</h2>
<h3>位流格式</h3>
<p>一个 MP3 位流被组织成音频帧，其中包括五个部分：头部、CRC、辅助信息、主数据和附加数据。</p>
<p>单声道的辅助信息块长度为 136 位，双声道的辅助信息块长度为 256 位。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231110132621.webp" alt="image.png"></p>
<pre><code class="language-c">// 音频帧
frame()
{
	header()
	error_check()
	audio_data() // 音频数据
	ancillary_data()
}
</code></pre>
<h3>Header</h3>
<p>一开始的 32 位（4 字节）是头部信息。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231110132753.webp" alt="image.png"></p>
<pre><code class="language-c">header()
{
	syncword           12 bits bslbf // 12个1
	ID                 1  bit  bslbf // 表明算法的ID。1表示MPEG音频，0做保留
	layer              2  bits bslbf // 表明使用的层级。
									 // 11：Layer I；   10 Layer II
									 // 01：Layer III； 00 保留
	protection_bit     1  bit  bslbf // 指示是否在音频比特流中增加了冗余，以方便错误检测。
									 // 1：没有冗余，0：增加了冗余
	bitrate_index      4  bits bslbf // 指示比特率。全0表示'free format'，
									 // 可以使用不出现在列表中的固定比特率
	sampling_frequency 2  bits bslbf // 抽样频率
	padding_bit        1  bit  bslbf // 1：帧包含额外的槽以调整平均比特率到采样频率，否则为0。
									 // padding只在44.1kHz采样频率下才有必要使用。
	private_bit        1  bit  bslbf // 私用比特。未来ISO将不再使用。
	mode               2  bits bslbf 
	mode_extension     2  bits bslbf // 用于联合立体声模式中（mode='01'）
									// 指名应用哪种联合立体声编码方法类型。
									//该算法中隐含了应用强度立体声模式和ms_stereo模式的频率范围
	copyright          1  bit  bslbf // 0:编码的比特流没有版权，1：存在版权保护
	original/home      1  bit  bslbf // 0：比特流为副本，1：比特流为原始版本
	emphasis           2  bits bslbf // 加重的信息。表明解加重需要使用的类型。
}
</code></pre>
<table>
<thead>
<tr>
<th>bit_rate_index</th>
<th>bit rate</th>
</tr>
</thead>
<tbody>
<tr>
<td>'0000'</td>
<td>free</td>
</tr>
<tr>
<td>'0001'</td>
<td>32 kbit/s</td>
</tr>
<tr>
<td>'0010'</td>
<td>40 kbit/s</td>
</tr>
<tr>
<td>'0011'</td>
<td>48 kbit/s</td>
</tr>
<tr>
<td>'0100'</td>
<td>56 kbit/s</td>
</tr>
<tr>
<td>'0101'</td>
<td>64 kbit/s</td>
</tr>
<tr>
<td>'0110'</td>
<td>80 kbit/s</td>
</tr>
<tr>
<td>'0111'</td>
<td>96 kbit/s</td>
</tr>
<tr>
<td>'1000'</td>
<td>112 kbit/s</td>
</tr>
<tr>
<td>'1001'</td>
<td>128 kbit/s</td>
</tr>
<tr>
<td>'1010'</td>
<td>160 kbit/s</td>
</tr>
<tr>
<td>'1011'</td>
<td>192 kbit/s</td>
</tr>
<tr>
<td>'1100'</td>
<td>224 kbit/s</td>
</tr>
<tr>
<td>'1101'</td>
<td>256 kbit/s</td>
</tr>
<tr>
<td>'1110'</td>
<td>320 kbit/s</td>
</tr>
<tr>
<td>'1111'</td>
<td>forbidden</td>
</tr>
</tbody>
</table>
<p>sampling_frequency 抽样频率：</p>
<table>
<thead>
<tr>
<th></th>
<th>MPEG-1</th>
<th>MPEG-2</th>
</tr>
</thead>
<tbody>
<tr>
<td>'00'</td>
<td>44.1kHz</td>
<td>22.05kHz</td>
</tr>
<tr>
<td>'01'</td>
<td>48 kHz</td>
<td>24kHz</td>
</tr>
<tr>
<td>'10'</td>
<td>32 kHz</td>
<td>16kHz</td>
</tr>
<tr>
<td>'11'</td>
<td>reserved</td>
<td>reserved</td>
</tr>
</tbody>
</table>
<p>mode：</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>'00'</td>
<td>stereo 立体声</td>
</tr>
<tr>
<td>'01'</td>
<td>joint_stereo 联合立体声 (intensity_stereo 增强立体声 and/or ms_stereo)  ms-&gt;mid-size</td>
</tr>
<tr>
<td>'10'</td>
<td>dual_channel</td>
</tr>
<tr>
<td>'11'</td>
<td>single_channel 单通道</td>
</tr>
</tbody>
</table>
<p>mode_extension：</p>
<table>
<thead>
<tr>
<th></th>
<th>intensity_stereo</th>
<th>ms_stereo</th>
</tr>
</thead>
<tbody>
<tr>
<td>'00'</td>
<td>off</td>
<td>off</td>
</tr>
<tr>
<td>'01'</td>
<td>on</td>
<td>off</td>
</tr>
<tr>
<td>'10'</td>
<td>off</td>
<td>on</td>
</tr>
<tr>
<td>'11'</td>
<td>on</td>
<td>on</td>
</tr>
</tbody>
</table>
<p>emphasis：</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>'00'</td>
<td>no emphasis</td>
</tr>
<tr>
<td>'01'</td>
<td>50/15 microsec. emphasis</td>
</tr>
<tr>
<td>'10'</td>
<td>reserved</td>
</tr>
<tr>
<td>'11'</td>
<td>CCITT J.17</td>
</tr>
</tbody>
</table>
<h3>ErrorCheck</h3>
<pre><code class="language-c">error_check()
{
	if (protection_bit==0) // 在Header中
		crc_check 16 bits rpchof
}
</code></pre>
<h3>Audio Data</h3>
<p>每一个音频帧包含来自 1 到 2 个音频 granules 的压缩数据。</p>
<p>每一个 granule 由 18*32 子带样本组成</p>
<p>帧中的音频数据以下面的方式进行分配：</p>
<ul>
<li>main_data_begin pointer</li>
<li>side info for both granules (scfsi)</li>
<li>side info granule 1</li>
<li>side info granule 2</li>
<li>scalefactors and Huffman code data granule 1</li>
<li>scalefactors and Huffman code data granule 2</li>
</ul>
<h4>边信息</h4>
<pre><code class="language-c">audio_data(){
	main_data_begin  9 bits uimsbf // main-data-begin 的值用于确定帧的主数据的第一个比特的位置。它将该位置指定为相对于音频同步字节的负偏移量（以字节为单位）
	if (mode == single_channel)	{
		private_bits 5 bits bslbf // 用于私有用途的位。这些位在ISO的未来不会被使用。
		// scfsi_band 控制着尺度因子组（scfsi_bands）的尺度因子选择信息的使用。
		for (scfsi_band=0; scfsi_band&lt;4; scfsi_band++)
			scfsi[scfsi_band] 1 bits bslbf // 尺度因子选择信息。
										   // scfsi 控制着对于每个粒度是否传输尺度因子： 
										   // '0' 对于每个粒度都传输尺度因子。 
										   // '1' 对于粒度0传输的尺度因子也适用于粒度1。
		for (gr=0; gr&lt;2; gr++) 	{
			part2_3_length[gr] 12 bits uimsbf
			// 该值包含用于尺度因子和Huffman编码数据的主数据比特数。
			// 由于边信息的长度始终相同，可以使用该值来计算每个粒度的主要信息的起始位置
			// 以及辅助信息的位置（如果使用）。
			// part2_length - 该值包含用于尺度因子的主数据比特数。
			big_values[gr] 9 bits uimsbf // 每个粒度的频谱值使用不同的Huffman编码表进行编码。
							// 完整的频率范围被分成几个区域，然后使用不同的Huffman表进行编码。
			global_gain[gr] 8 bits uimsbf // 全局量化步长
			scalefac_compress[gr] 4 bits bslbf // 选择用于比例因子传输的位数。
			blocksplit_flag[gr] 1 bit bslbf // 表示该块使用非正常（类型0）的窗口。
		}
	}
	if (blocksplit_flag[gr]){
		block_type[gr] 2 bits bslbf // 指示实际粒度的窗口类型。
		switch_point[gr] 1 bits uimsbf // 表示短/长变换的分割点。
		for (region=0; region&lt;2; region++)
			table_select[region][gr] 5 bits bslbf // 指定用于压缩特定量化MDCT区域的Huffman编码表。
		for (window=0; window&lt;3; window++)
			subblock_gain[window][gr] 3 bits uimsbf // 表示一个子块相对于全局增益的增益偏移量。仅在块类型2（短窗口）中使用。
	}
	else{
		for (region=0; region&lt;3; region++)
			table_select[region][gr] 5 bits bslbf
			// region_address1[gr]，region_address2[gr]
			// 对频谱进行进一步分区，以增强Huffman编码器的性能。
			// 这是对big_values区域的细分。这个细分的目的是获得更好的错误鲁棒性（tea：这一点表示怀疑）和更好的编码效率。使用三个区域。
			// 每个区域根据最大量化值和局部信号统计使用不同的Huffman编码表进行编码。
			region_address1[gr] 4 bits bslbf
			region_address2[gr] 3 bits bslbf
		}
		preflag[gr] 1 bit bslbf // 这是对量化值进行额外高频放大的快捷方式。
		scalefac_scale[gr] 1 bit bslbf // 比例因子按对数方式进行量化，步长为2，取决于scalefac_scale的值。
		// scalefac_scale = 0，步长为sqrt(2) 
		// scalefac_scale = 1，步长为2
		count1table_select[gr] 1 bit bslbf // 此标志选择两个可能的Huffman编码表之一，用于幅度不超过1的量化值四元组的区域。
	}
</code></pre>
<table>
<thead>
<tr>
<th>scfsi_band</th>
<th>scalefactor bands</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0,1,2,3,4,5,</td>
</tr>
<tr>
<td>1</td>
<td>6,7,8,9,10,</td>
</tr>
<tr>
<td>2</td>
<td>11 ... 15</td>
</tr>
<tr>
<td>3</td>
<td>16 ... 20</td>
</tr>
</tbody>
</table>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231110194611.webp" alt="image.png"></p>
<p>在长窗口的情况下，slen1 是用于比例因子带 0-10 的比例因子的长度。slen2 是用于比例因子带 11-21 的比例因子的长度。</p>
<table>
<thead>
<tr>
<th>scalefac_compress</th>
<th>slen1</th>
<th>slen2</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>1</td>
</tr>
<tr>
<td>2</td>
<td>0</td>
<td>2</td>
</tr>
<tr>
<td>3</td>
<td>0</td>
<td>3</td>
</tr>
<tr>
<td>4</td>
<td>3</td>
<td>0</td>
</tr>
<tr>
<td>5</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>6</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td>7</td>
<td>1</td>
<td>3</td>
</tr>
<tr>
<td>8</td>
<td>2</td>
<td>1</td>
</tr>
<tr>
<td>9</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>10</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>11</td>
<td>3</td>
<td>1</td>
</tr>
<tr>
<td>12</td>
<td>3</td>
<td>2</td>
</tr>
<tr>
<td>13</td>
<td>3</td>
<td>3</td>
</tr>
<tr>
<td>14</td>
<td>4</td>
<td>2</td>
</tr>
<tr>
<td>15</td>
<td>4</td>
<td>3</td>
</tr>
</tbody>
</table>
<h4>Main Data</h4>
<pre><code class="language-c">for (gr=0; gr&lt;2; gr++)
	if (blocksplit_flag[gr] == 1 &amp;&amp; block_type[gr] == 2){
		for (cb=0; cb&lt;switch_point_l[gr]; cb++)
		if (scfsi[cb]==0) || (gr==0)
			scalefac[cb][gr] 0..4 bits uimsbf
		for (cb=switch_point_s[gr]; cb&lt;cblimit_short; cb++)
			for (window=0; window&lt;3; window++)
			if (scfsi[cb]==0) || (gr==0)
				scalefac[cb][window][gr] 0..4 bits uimsbf
	}
	else
		for (cb=0; cb&lt;cblimit; cb++)
			if (scfsi[cb]==0) || (gr==0)
				scalefac[cb][gr] 0..4 bits uimsbf
				Huffmancodebits (part2_3_length-part2_length) bits bslbf
				while (position != main_data_end){
					ancillary_bit 1 bit bslbf
				}
			}
</code></pre>
<p><code>scalefac[cb][gr]</code> - 比例因子用于给量化噪声上色。如果量化噪声被正确形状的颜色掩盖，它将完全被掩盖。</p>
<p>编码器和解码器使用比例因子来获取数值块的除法因子。这些块延伸到多个频率线上。这些块被称为比例因子带，被选择得尽可能接近临界带。</p>
<p>比例因子压缩表显示，比例因子 0...10 的范围为 0 到 15（最大长度为 4 位），比例因子 11...21 的范围为 0 到 7（最大长度为 3 位）。</p>
<p>将频谱细分为比例因子带对于每个块长度和采样频率是固定的，并存储在编码器和解码器的表中。</p>
<p><code>Huffman_code_bits</code> - 伪函数</p>
<ul>
<li>所有绝对值小于等于 15 的量化值直接使用 Huffman 编码进行编码。总是对值 (x,y) 进行编码。</li>
<li>如果发现幅度大于 15 的量化值，则使用 ESC 码来标记这些值。</li>
<li>如果一对值中的一个或两个值不为零，则在 Huffman 编码字后附加一个或两个符号位。</li>
</ul>
<p><code>hcod[|x|][|y|]</code> 是值 x、y 的 Huffman 编码表条目。</p>
<p><code>hlen[|x|][|y|]</code> 是值 x、y 的 Huffman 长度表条目。</p>
<p><code>max_table_entry</code> 是最大的表条目索引。这是一个系统常量（15，单个表中的最大条目数为 256）。</p>
<p><code>signx</code> 是第一个值的符号（如果为正，则为 0；如果为负，则为 1）。</p>
<p><code>signy</code> 是第二个值的符号（如果为正，则为 0；如果为负，则为 1）。</p>
<blockquote>
<p>[!hint] 考点 21：MP3 huffman code: <span style="color:#ff0000">linebits</span></p>
</blockquote>
<pre><code class="language-c">struct coded_word {
	codeword      // hcod[|x|][|y|], length is hlen[|x|][|y|]
	linbitsx      // 如果(x=15)，则构成一个ESC码。在这种情况下，该字段的长度为linbits，否则为零。该字段中包含的无符号整数加上15，以确定编码数据的绝对值。
	signx         // sign of x (transmitted only if x not equal 0)
	linbitsy      // See linbitsx.
	signy         // sign of y (transmitted only if y not equal 0)
}
</code></pre>
<p>只有在实际标记了大于或等于 15 的值时，才会使用 ESCaped 代码 linbitsx 或 linbitsy。</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231110200755.webp" alt="image.png"></p>
<p>Huffman 编码</p>
<p>对于频谱的高端部分，使用两个特殊的 Huffman 表对值的四元组进行编码。</p>
<pre><code class="language-c">struct quad_word {
	codeword // hcod[|v|][|w|][|x|][|y|]，hlen[|v|][|w|][|x|][|y|]
	signv    //（仅当v不等于0时）
	signw    //（仅当w不等于0时）
	signx    //（仅当x不等于0时）
	signy    //（仅当y不等于0时）
}
</code></pre>
<p>在频谱的高端部分，只需计算零对的数量。由于当其他值已解码时，这个值是隐含已知的，因此不需要传输。</p>
<p>Huffman 编码数据的排序方式：</p>
<ul>
<li>如果 block_type 为 0、1 或 3，则根据频率递增的顺序对 Huffman 编码数据进行排序。</li>
<li>如果 block_type 为 2（短块），则 Huffman 编码数据的排序如下：
<ul>
<li>首先给出连续的比例因子带的 Huffman 编码数据，从比例因子带 0 开始，以比例因子带 11 结束。</li>
<li>在每个比例因子带内，按照时间窗口的顺序给出数据，从窗口 0 开始，以窗口 2 结束。每个窗口内的数据值按照频率递增的顺序排列。</li>
</ul>
</li>
</ul>
<p>Characteristic of 32 Huffman tables:</p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231110201127.webp" alt="image.png"></p>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231110201152.webp" alt="image.png"></p>
<p>TIP: 考试的时候以长块为准。</p>
<p><code>cb_limit</code> - 长块（block_type != 2）的比例因子带数量。对于所有模式和所有采样频率的 Layer III，这是一个常数，为 21。</p>
<p><code>cb_limit_short</code> - 短块（block_type=2）的比例因子带数量。对于所有模式和所有采样频率的 Layer III，这是一个常数，为 12。</p>
<p><code>window</code> - 在 block_type=2 的情况下，实际时间槽的数量。window 的取值为 0、1、2。</p>
<h1>88、010 编辑器之模板的使用</h1>
<h2>什么是 010 编辑器</h2>
<p>010 编辑器是一个专业的文本/HEX 编辑器，它可以快速并易于编辑电脑上的任何文件内容。</p>
<ul>
<li>查看并编辑任何硬盘上的二进制文件，以及文本文件（Unicode 文件、C/C++ 源文件等）</li>
<li>独家的二进制模板技术能让你理解任何二进制文件</li>
<li>通过强大的工具（查找、替换等功能）分析并编辑文本以及二进制数据</li>
<li>使用硬盘、软盘等查找并修复问题</li>
</ul>
<h2>二进制模板</h2>
<p>010 编辑器可以将二进制文件已易于使用的方式将其结构呈现在你的面前。二进制模板可以将二进制文件解析为指定的结构。</p>
<p>模板有着和 C/C++ 相似的结构，但它们是以一个程序运行的。当模板中的变量声明后，变量将映射到当前文件的对应字节集合。</p>
<p><span style="color:#ff0000">例子：</span></p>
<pre><code class="language-C">struct FILE {
    struct HEADER {
        char type[4];   // 映射文件的0~3字节（注意，从0开始数）
        int version;    // 映射文件的4~7字节
        int numRecords; // 映射文件的8~11字节
    } header;
    struct RECORD {
        int employeeId;
        char name[40];
        float salary;
    } record[header.numRecords];
} file;
</code></pre>
<p>当访问一个变量时，其值从文件中读出；当对一个变量进行赋值时，其值将写回文件。</p>
<p>这些模板的 <code>structures</code> 和常规的 C 不同，因为它包含了控制语句，如 if，for，while。</p>
<p>模板的执行顺序为从文件顶端到底部。</p>
<h2>写一个二进制模板</h2>
<h3>模板基础</h3>
<p>模板可以使二进制文件更容易理解和编辑。每一个模板是以 <code>.bt</code> 为后缀的文本文件，可以被 010 编辑器编辑。</p>
<h3>数字</h3>
<p>Decimal - 456</p>
<p>Hexadecimal - 0xff, 25h, 0EFh</p>
<p>Octal - 013 (任何数字前加 0)</p>
<p>Binary - 0b011</p>
<p>无符号值：数字后加 <code>u</code>，例如 12u</p>
<p>8 字节的 int64：数字后加 <code>L</code>，例如 1L</p>
<p>浮点数中对于一个指数会包含 e，例如 1e10</p>
<p>浮点数默认为 8 字节 double 型，除非数字后加了 f（4 字节 float，例子：2.0f）</p>
<h3>数据类型</h3>
<p>8-Bit Signed Integer - char, byte, CHAR, BYTE</p>
<p>8-Bit Unsigned Integer - uchar, ubyte, UCHAR, UBYTE</p>
<p>16-Bit Signed Integer - short, int16, SHORT, INT16</p>
<p>16-Bit Unsigned Integer - ushort, uint16, USHORT, UINT16, WORD</p>
<p>32-Bit Signed Integer - int, int32, long, INT, INT32, LONG</p>
<p>32-Bit Unsigned Integer - uint, uint32, ulong, UINT, UINT32, ULONG, DWORD</p>
<p>64-Bit Signed Integer - int64, quad, QUAD, INT64, __int64</p>
<p>64-Bit Unsigned Integer - uint64, uquad, UQUAD, UINT64, QWORD, __uint64</p>
<p>32-Bit Floating Point Number - float, FLOAT</p>
<p>64-Bit Floating Point Number - double, DOUBLE</p>
<p>模板中可以使用数字类型，但数字在被运算前，必须转换为 int 或 float</p>
<h3>类型定义 typedef</h3>
<p>其他类型可以通过 <code>typedef</code> 关键字创建。</p>
<pre><code class="language-C">// 创建类型语法：
typedef &lt;data_type&gt; &lt;new_type_name&gt;
// 例子：创建新类型myInt，表示无符号整数
typedef unsigned int myInt;

// 运用于数组：
typedef &lt;data_type&gt; &lt;new_type_name&gt; [ &lt;array_size&gt; ]
// array_size必须为常量，typedef不能用于创建多维数组，但可以在structs中使用。
// 例子：生成新的字符串类型数组
typedef char myString[15];
myString s = &quot;Test&quot;;
</code></pre>
<h3>声明模板变量</h3>
<p>声明变量的方法类似于 C 语言但有一个重要的区别：模板中已声明的变量映射到文件中的一组字节。</p>
<p>可以通过定义 structs 或 unions 的方法将模板变量组织起来。</p>
<h3>特殊属性</h3>
<p>变量后后面可以使用 <code>&lt;&gt;</code> 将一个或多个的特殊属性括住。</p>
<p>支持以下属性：</p>
<pre><code class="language-C">&lt;
    format  = hex|decimal|octal|binary,
    fgcolor = &lt;color&gt;,
    bgcolor = &lt;color&gt;,
    comment = &quot;&lt;string&gt;&quot;,
    open    = true|false|suppress,
    hidden  = true|false,
    read    = &lt;function_name&gt;
&gt;
</code></pre>
<h3>局部变量</h3>
<p>在有些情况中，一些变量不需要映射到文件中的值或者显示在「模板结果」中（可以右击「模板结果」开启局部变量的查看）。我们可以使用关键字 <code>local</code> 声明变量。例子：</p>
<pre><code class="language-C">local int i, total = 0;
int recordCounts[5];
for( i = 0; i &lt; 5; i++ )
    total += recordCounts[i];
double records[ total ];
</code></pre>
<h3>字符串</h3>
<p>通常二进制文件中定义了 Null 结尾的字符串。010 编辑器可以通过特殊的语法进行阅读：</p>
<pre><code class="language-C">// 以下两种方法将读取字符串，直到遇到「0」字节
char str[];
string str;
// Unicode 字符串可以使用以下两种方法阅读：
wchar_t str[];
wstring str;
</code></pre>
<p>字符串中可以使用=、+、+=以及比较运算符，例子：</p>
<pre><code class="language-C">local char str[15] = &quot;First&quot;;
local string s = &quot;Second&quot;;
local string r1 = str + s;
local string r2 = str;
r2 += s;
return (r1 == r2);
</code></pre>
<h3>颜色</h3>
<p>解析文件时，使用模板可以将不同颜色应用到不同的变量上，有两种方式：</p>
<ul>
<li>方式一：对单个变量设置颜色<pre><code class="language-C">// 语法：在变量后添加以下标签
&lt;fgcolor=???&gt; // 设置前景色
&lt;bgcolor=???&gt; // 设置背景色
// 例子：
int id &lt;fgcolor=cBlack, bgcolor=0x0000FF&gt;;
</code></pre>
</li>
<li>方式二：使用 <code>SetForeColor</code>，<code>SetBackColor</code>，<code>SetColor</code> 函数设置默认颜色。<pre><code class="language-C">// 在这些函数后定义变量
SetForeColor( cRed );
int first; // will be colored red
int second; // will be colored red

// 关闭涂色的方法
SetForeColor( cNone );
int third; // will not be colored
</code></pre>
</li>
</ul>
<h3>顺序</h3>
<p>当每一个模板变量都声明后，「当前文件的位置」将向前移动。可以通过使用函数 FTell 获取「当前文件位置」。</p>
<p>通过使用 FSeek 或 FSkip 函数，「当前位置」可以在整个文件中移动。这项技术允许我们不按顺序解析文件。</p>
<p>可以使用 ReadByte, ReadShort, ReadInt 等函数实现不定义变量而读取文件。</p>
<blockquote>
<p>[!hint] 考点 14：010 编辑器：Array、Struct</p>
</blockquote>
<h3>结构 struct</h3>
<p>关键字 <code>struct</code> 可以定义一个数据结构。可以使用 C/C++ 语法进行定义。例子：</p>
<pre><code class="language-C">// 生成新类型myStruct，但不声明任何变量
struct myStruct {
    int a;
    int b;
    int c;
};
// 声明一个结构
myStruct s;

// 定义结构并声明两个实例
// 其中，s1覆盖文件的前12个字节，s2覆盖接下来的12个字节
struct myStruct {
    int a; // 4字节
    int b;
    int c;
} s1, s2;
</code></pre>
<p>使用控制语句（<code>if</code>，<code>for</code>，<code>while</code>）的结构。例子：</p>
<pre><code class="language-C">// 实例s只生成两个变量：a、b或a、c
struct myIfStruct {
    int a;
    if( a &gt; 5 )
        int b;
    else
        int c;
} s;
</code></pre>
<p>结构可以嵌套，也可以声明数组。例子：</p>
<pre><code class="language-C">struct {
    int width;
    struct COLOR {
        uchar r, g, b;
    } colors[width];
} line1;
</code></pre>
<p>使用 typedef 定义 struct 的别名：</p>
<pre><code class="language-C">typedef struct {
    ushort id;
    int size;
} myData;
</code></pre>
<h3>联合 union</h3>
<p>union 中，所有变量从相同的位置开始。union 的大小为其中最大变量的大小。</p>
<p>可以使用和 struct 相同的语法进行声明。例子：</p>
<pre><code class="language-C">// 以下Union大小为8字节
union myUnion {
    ushort s;
    double d; // 8字节
    int i;
} u;
</code></pre>
<h3>带参数的 struct 和 union</h3>
<p>struct 或 union 关键字后可以接参数列表。参数列表的定义和函数相似。例子：</p>
<pre><code class="language-C">struct VarSizeStruct (int arraySize)
{
    int array[arraySize];
};
// 声明实例。传递参数到结构体中
VarSizeStruct s1(5);

// 可以使用typedef声明
typedef struct (int arraySize)
{
    int array[arraySize];
} VarSizeStruct;
</code></pre>
<h3>数组 Array</h3>
<p>数组变量定义的语法：</p>
<pre><code class="language-C">&lt;data type&gt; &lt;variable name&gt; [ &lt;expression&gt; ] // 例子：int myArray[15];
</code></pre>
<p>一些例子：</p>
<pre><code class="language-C">// 与ANSI C不同的是，数组的大小可以为任意表达式（包括变量、函数或操作符）
int myArray[ FileSize() - myInt * 0x10 + (17 &lt;&lt; 5) ];

// 使用中括号获取单个元素
myArray[i] = value;
</code></pre>
<p>当数组的大小定义为 0 时将有警告提示（不是异常）并且不声明任何变量。</p>
<p>010 编辑器允许数组以特殊的方式构建。当定义模板变量时，可以定义多个名称相同的变量。010 编辑器将这些相同变量看作数组，称之为 Duplicate Array。例子：</p>
<pre><code class="language-C">int x; int x; int x;
// 可以这样读取：
x[0]; // 读取第一个x的值
</code></pre>
<p>可以使用 for 或 while 定义 Duplicate arrays：</p>
<pre><code class="language-C">local int i;
for( i = 0; i &lt; 5; i++ )
    int x;
</code></pre>
<h3>表达式</h3>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231101183949.webp" alt="image.png"></p>
<p>可以使用任何的赋值运算符：+=, -=, *=, /=, &amp;=, ^=, %=, |=, &lt;&lt;=, &gt;&gt;=</p>
<p>可以使用小括号组合表达式。</p>
<h3>布尔运算符</h3>
<p>&amp;&amp;（AND)</p>
<p>||(OR)</p>
<p>!(NOT- 单操作符)</p>
<p>可以使用小括号指定操作顺序。</p>
<h3>控制语句</h3>
<p>可以使用 break、continue、return</p>
<h4>if 语句</h4>
<pre><code class="language-C">if( x &lt; 5 )
    x = 0;

if( y &gt; x )
    max = y;
else
{
    max = x;
    y = 0;
}
</code></pre>
<h4>for 语句</h4>
<pre><code class="language-C">for( i = 0, x = 0; i &lt; 15; i++ )
{
    x += i;
}
</code></pre>
<h4>while 语句</h4>
<pre><code class="language-C">while( myVar &lt; 15 )
{
    x *= myVar;
    myVar += 2;
}

do
{
    x *= myVar;
    myVar += 2;
}while( myVar &lt; 23 );
</code></pre>
<h4>switch 语句</h4>
<pre><code class="language-C">switch( &lt;variable&gt; )
{
    case &lt;expression&gt;: &lt;statement&gt;; [break;]
    ...
    default : &lt;statement&gt;;
}
</code></pre>
<h3>比特域</h3>
<p>比特域允许细分结构为多组比特。这一过程允许将多个变量打包成一个块的内存。</p>
<p>定义比特域的语法：</p>
<pre><code class="language-C">type_name &lt;variable_name&gt; : number_of_bits;
// type_name 可以是char, short, int, int64 (unsigned or signed) 或其他的等效类型
</code></pre>
<p>如果变量名省略，那么对应这个变量的比特数也将省略。例子：</p>
<pre><code class="language-C">// 打包alpha和beta为一个32比特的值中，但忽略中间的12bit
int alpha : 5;
int      : 12;
int beta : 15;
</code></pre>
<h4>比特域模式</h4>
<p>010 编辑器有两个特殊的比特域模式，定义了比特如何打包到变量中：</p>
<ul>
<li>padded bitfields（默认）。比特打包为变量的方式取决于当前的字节顺序（大小端）。默认为，小端文件从右到左打包，大端文件从左往右打包。</li>
<li>unpadded bitfields</li>
</ul>
<h5>Padded bitfields</h5>
<p>例子：</p>
<pre><code class="language-C">ushort a : 4;
ushort b : 7;
ushort c : 5;
// 小端模式下，结构存储为：cccccbbb bbbbaaaa
// 大端模式下，结构存储为：aaaabbbb bbbccccc
</code></pre>
<p>当需要的时候，程序会增加填充。例如某些特定的比特域将跨越变量的边界，这将会添加填充使得比特域从下一个变量开始。例如：</p>
<pre><code class="language-C">// 第一个变量
int apple : 10;
int orange : 20;
// 第二个变量
int banana : 10;
int peach : 12;
// 此处填充10个比特
// 第三个变量
short grape : 4; // 字节类型改变为short
</code></pre>
<h5>Unpadded Bitfields</h5>
<p>将文件视为一个长长的比特流，不管是变量类型改变时还是比特不能被打包为单个变量时，都不存在任何的填充比特。</p>
<p>进入此模式的方法：调用 <code>BitfieldDisablePadding</code> 函数（调用 <code>BitfieldEnablePadding</code> 以返回 padding 模式）</p>
<p>在 unpadded Bitfield 模式中，每一个定义的变量从比特流中读取比特。例如：</p>
<pre><code class="language-C">BitfieldDisablePadding();
short a : 10; // 从文件中读取10个比特
int   b : 20; // 读取接下来的20个比特
short c : 10;
// 如果比特域被定义为从右到左读取（小端数据的默认方式，或使用了BitfieldRightToLeft函数）
// 变量将以此方式存储比特：aaaaaaaa bbbbbbaa bbbbbbbb ccbbbbbb cccccccc
</code></pre>
<h3>函数</h3>
<p>010 编辑器中内置有大量的函数。支持许多标准 C 函数，并以首字母大写以区分它们。</p>
<h4>调用</h4>
<p>使用典型 C 语言语法进行函数调用：<code>&lt;function name&gt; ( &lt;argument_list&gt; )</code>，例子：<code>Strlen(str);</code></p>
<h4>定义</h4>
<p>常规 C 语法：<code>&lt;return type&gt; &lt;function name&gt; ( &lt;argument_list&gt; ) {&lt;statements&gt; }</code></p>
<p>return type 可以为 void 或其他支持的数据类型。</p>
<h4>函数的参数</h4>
<p>函数通常使用值传递，在变量名称前加上 <code>&amp;</code> 可以使用引用传递。</p>
<p>在参数名称后加上 <code>[]</code> 表明其为数组类型，数组类型会尽量为引用传递，否则为值传递。</p>
<h4>接口函数</h4>
<h4><code>int Printf(const char format[][,argument,...])</code></h4>
<p><img src="https://cdn.gallery.uuanqin.top/img/20231101184106.webp" alt="image.png"></p>
<p>支持宽度、精度、对齐的调整。如 <code>%5.2lf</code> 或 <code>%-15s</code>。<code>\n</code> 表示换行。</p>
<h4><code>void Warning(const char format[] [,argument,...])</code></h4>
<p>和 <code>Printf</code> 函数相似，但结果字符串显示在状态栏中，并以橘色高亮显示。通常用于显示模板中的错误。</p>
<h4>I/O 函数</h4>
<h4><code>void BigEndian()</code></h4>
<p>表明所有从文件中读写的子序列使用大端顺序。用于指定变量的字节顺序。</p>
<h4><code>void LittleEndian()</code></h4>
<p>小端。</p>
<h5>读取函数</h5>
<p>char ReadByte( int64 pos )</p>
<p>double ReadDouble( int64 pos )</p>
<p>float ReadFloat( int64 pos )</p>
<p>int ReadInt( int64 pos )</p>
<p>int64 ReadInt64( int64 pos )</p>
<p>int64 ReadQuad( int64 pos )</p>
<p>short ReadShort( int64 pos )</p>
<p>uchar ReadUByte( int64 pos )</p>
<p>uint ReadUInt( int64 pos )</p>
<p>uint64 ReadUInt64( int64 pos )</p>
<p>uint64 ReadUQuad( int64 pos )</p>
<p>ushort ReadUShort( int64 pos )</p>
<p>返回从地址 pos 读取文件的内容。用于不声明任何变量从文件中读取数据。</p>
<h4><code>int FEof()</code></h4>
<p>如果当前读取位置为文件末尾，则返回 true。</p>
<h4><code>int64 FileSize()</code></h4>
<p>返回当前文件的比特数。</p>
<h4><code>int FSeek(int64 pos)</code></h4>
<p>设置当前读取位置为 pos 指向的地址。如果地址超出范围返回 -1，成功则返回 0。</p>
<h4><code>int FSkip(int64 offset)</code></h4>
<p>将当前读取位置向前移动 offset 字节。offset 可以为负，即将读取位置向后移动。如果地址超出范围返回 -1，成功则返回 0。</p>
<h4><code>int64 FTell()</code></h4>
<p>返回当前文件的读取位置。</p>
<h5>数学函数</h5>
<p><code>double Abs(double x)</code></p>
<p><code>double Ceil(double x)</code></p>
<p><code>double Cos(double a)</code> <code>double Sin(double a)</code> <code>double Tan(double a)</code> The angle is given in degrees.</p>
<p><code>double Exp(double x)</code></p>
<p><code>double Floor(double x)</code></p>
<p><code>double Log(double x)</code> 计算 x 的自然对数，ln(x)</p>
<p><code>double Max(double a, double b)</code> <code>double Min(double a, double b)</code></p>
<p><code>double Pow(double x, double y)</code></p>
<p><code>int Random(int maximum)</code> 返回 0 到 maximum-1 的随机整数</p>
<p><code>double Sqrt(double x )</code> 计算数字 x 的正平方根</p>
<p><code>data_type SwapBytes(data_type x)</code> 交换变量的比特并返回结果，可以指定任何的数据类型 (byte, short, int, int64, float, double)</p>
<h3>模板限制</h3>
<ul>
<li>不允许使用指针</li>
<li>不支持 goto 语句</li>
<li>不支持多维数组（包括字符串数组）的定义。写模板时，struct 和数组的合并可以模拟多维数组。例如：<pre><code class="language-C">typedef struct
{
    float row[4];
} MATRIX[4];
MATRIX m;
</code></pre>
</li>
</ul>
<h1>名词解释</h1>
<blockquote>
<p>名词解释是考试内容之一。</p>
</blockquote>
<p>JPEG：Joint Photographic Experts Group 联合图像专家组</p>
<p>MPEG：Moving picture Experts Group 运动图像专家组</p>
<p>TIFF：Tagged Image File Format 标记图像文件格式</p>
<p>AIFF：Audio Interchange File Format 音频交换文件格式</p>
<p>RIFF：Resource Interchange File Format 资源交换档案标准</p>
<p>ISO：International Organization for Standardization</p>
<p>ITU：International Telecommunication Union 国际电信联盟</p>
<p>ITU-T：International Telecommunications Union-Telecommunications</p>
<p>IEC：International Electrotechnical Commission 国际电工委员会</p>
<blockquote>
<p>有另译：International Engineering committee</p>
</blockquote>
<p>PCM：Pulse Code Modulation 脉冲编码调制</p>
<p>DPCM：Differential Pulse-code Modulation 差分脉冲编码调制</p>
<p>ADPCM：Adaptive Differential Pulse Code Modulation 自适应差分脉冲编码调制</p>
<p>AAC：Advanced Audio Coding</p>
<p>AVI：Audio Video Interleave</p>
<p>CODEC：enCOder / DECoder pair，解编码器</p>
<p>DCT：Discrete Cosine Transform</p>
<p>MDCT：modified discrete cosine transform</p>
<p><span style="color:#ff0000">IDR：立即编码刷新</span></p>
<h1>本课知识点</h1>
<p>所有知识点如下：</p>
<ol>
<li>Audio, image and video format, container</li>
<li>Video compression standards and applications</li>
<li>AVI container</li>
<li>Window Bitmap file structure</li>
<li>WAVE format</li>
<li>Explain the meaning of FOURCC tags “ 00db” , “ 01dc” , “01wb” ,“vids” , and “auds” in AVI container.</li>
<li>What is CD data rate?</li>
<li>List the components of a chunk.</li>
<li>Potential coding errors</li>
<li>Lossy compression and lossless compression</li>
<li>Uniform and quantization and nonuniform quantization</li>
<li>entropy and Huffman coding</li>
<li>MS-ADPCM</li>
<li>010 editor: Array, struct</li>
<li>Fourier transform, Fourier series, Discrete time Fourier transform, Discrete Fourier transform</li>
<li>Windowing</li>
<li>FFT and complexity</li>
<li>MDCT: overlap and add technique, long window, short window</li>
<li>Psychoacoustics: Frequency masking, temporal masking, threshold in quiet, signal to masker ratio, critical bandwidth, bark scale, perceptual entropy</li>
<li>MP3: bitstream format, MP3 sampling frequency, stereo/joint channel/dual channel/single channel, Huffman coding region, bit reservoir</li>
<li>MP3 huffman code: linebits</li>
<li>MP3 encoder and decoder process</li>
<li>Color space</li>
<li>Video frame format</li>
<li>Image and video coding principles: four types of redundancy</li>
<li>Three basic types of code frame in video coding</li>
<li>Motion estimation and compensation</li>
<li>JPEG encoding and decoding process: Minimum code Unit, modes of operation, DC entropy coding, AC entropy coding, run-length, size, EOB</li>
<li>JPEG interchange format: image, frame, scan, marker,</li>
<li>JPEG file interchange format</li>
<li>Video encoding and decoding architecture: normative, informative</li>
<li>MPEG coding structure, MPEG syntax</li>
<li>H.264 encoding structure, baseline profile, main profile, vector block size, new features, video coding layer and network abstraction layer</li>
<li>Inter frame prediction, motion vector prediction, Intra-frame prediction</li>
<li>DCT transform in H.264</li>
<li>entropy coding: Exp-Golomb coding and CAVLC</li>
</ol>


                
            </main>

            <footer class="list-content-container">
                

                
            </footer>
        </article>
        
        
        
        
        <article id="help" class="record">
            <main>
                <h1>Help</h1>
                
                <p>
                    <a href="https://cosma.arthurperret.fr/" target="_blank" class="link-documentation">
                        Click here to access Cosma&#39;s documentation
                    </a>
                </p>
                
                <h2>Shortcuts</h2>
                
                    <table>
                        <tbody>
                            <tr>
                                <td>Space</td>
                                <td>Re-run the force-layout algorithm</td>
                            </tr>
                            <tr>
                                <td>S</td>
                                <td>Move the cursor to Search</td>
                            </tr>
                            <tr>
                                <td>Alt + click</td>
                                <td>(on a record type) Deselect other types</td>
                            </tr>
                            <tr>
                                <td>R</td>
                                <td>Reset zoom</td>
                            </tr>
                            <tr>
                                <td>Alt + R</td>
                                <td>Reset the display</td>
                            </tr>
                            <tr>
                                <td>C</td>
                                <td>Zoom in on the selected node</td>
                            </tr>
                            <tr>
                                <td>F</td>
                                <td>Switch to Focus mode</td>
                            </tr>
                            <tr>
                                <td>Escape</td>
                                <td>Close the active record</td>
                            </tr>
                        </tbody>
                    </table>
            </main>
        </article>

        

        <article id="credits" class="record">
            <main>
                
                    
                    <h1 class="metas-title">半方池水半方田 - 文章关系图谱</h1>
                    

                    
                    <p class="metas-author">wuanqin</p>
                    

                    
                    <p class="metas-description">只能懂一点点</p>
                    
                    
                    <hr>
                

                
                <div class="logo">
                    <?xml version="1.0" encoding="UTF-8"?>
<svg enable-background="new 0 0 283.46 68" version="1.1" viewBox="0 0 283.46 68" xml:space="preserve" xmlns="http://www.w3.org/2000/svg">
<style type="text/css">
	.st0{fill:#147899;}
	.st1{fill:#02385C;}
	.st2{fill:#001A37;}
</style>
	<path class="st0" d="m227.63 41.56v0.68-0.35-0.33m-15.62-15.3c-6.32 0-12.02 3.81-14.44 9.65s-1.08 12.56 3.39 17.03c2.99 2.99 6.98 4.58 11.05 4.58 2.01 0 4.04-0.39 5.98-1.19 0.26-0.11 0.52-0.22 0.77-0.34v-12.1c-0.86 2.91-3.56 5.03-6.75 5.03-2.85 0-5.41-1.71-6.5-4.34s-0.49-5.66 1.53-7.67c1.35-1.35 3.15-2.06 4.98-2.06 0.91 0 1.82 0.18 2.69 0.54 1.99 0.83 3.46 2.5 4.05 4.5v-12.09c-2.05-0.98-4.33-1.53-6.75-1.54"/>
	<path class="st0" d="m67.32 26.18c-4 0-8 1.53-11.05 4.58-6.1 6.1-6.1 16 0 22.1 3.05 3.05 7.05 4.58 11.05 4.58s8-1.53 11.05-4.58l-6.07-6.07c-1.31 1.32-3.1 2.06-4.96 2.06h-0.02c-3.19 0-5.97-2.14-6.8-5.22-0.82-3.08 0.52-6.32 3.28-7.92 1.1-0.63 2.31-0.94 3.52-0.94 1.82 0 3.62 0.71 4.98 2.06l6.07-6.07c-3.05-3.05-7.05-4.58-11.05-4.58"/>
	<path class="st0" d="m137.46 26.26h-12.18c-5.5 0-9.96 4.46-9.96 9.96s4.46 9.96 9.96 9.96h5.13c0.76 0 1.37 0.61 1.37 1.37s-0.61 1.37-1.37 1.37h-12.18v8.59h12.32c4-0.05 7.58-2.5 9.09-6.21s0.65-7.96-2.18-10.79c-1.86-1.87-4.38-2.92-7.01-2.92h-0.03-5.13c-0.76 0-1.37-0.62-1.37-1.38s0.62-1.37 1.37-1.37h12.18v-8.58"/>
	<path class="st0" d="m227.63 42.24c-0.13 5.9-3.58 11.21-8.88 13.74v1.49h8.88v-15.23m-8.87-2.36v4.01c0.19-0.64 0.29-1.31 0.29-2s-0.1-1.37-0.29-2.01m8.87-13.65h-8.88v1.57c5.15 2.48 8.74 7.69 8.88 13.76v-15.33"/>
	<path class="st1" d="m218.76 27.8v12.08c0.19 0.64 0.29 1.31 0.29 2 0 0.7-0.1 1.37-0.29 2v12.09c5.3-2.53 8.74-7.84 8.88-13.74v-0.68c-0.14-6.06-3.73-11.28-8.88-13.75"/>
	<path class="st0" d="m153.79 26.23h-8.52v31.24h8.52-8.52v-17.57-0.18c0.07-5.65 3.57-10.48 8.52-12.49v-1"/>
	<path class="st0" d="m177.75 26.23c-3.65 0-6.96 1.43-9.41 3.75 2.58 2.45 4.21 5.91 4.26 9.74v0.18c0-2.84 2.3-5.15 5.15-5.15 2.84 0 5.15 2.3 5.15 5.15v17.57h8.52v-17.57-0.18c-0.1-7.47-6.18-13.49-13.67-13.49"/>
	<path class="st0" d="m158.93 26.23c-1.82 0-3.56 0.36-5.15 1v30.24-17.57c0-2.84 2.3-5.15 5.15-5.15s5.15 2.3 5.15 5.15v-0.18c0.05-3.83 1.67-7.28 4.26-9.74-2.45-2.32-5.76-3.75-9.41-3.75"/>
	<path class="st1" d="m153.79 27.23c-4.94 2.01-8.45 6.84-8.52 12.49v0.18 17.57h8.52v-30.24"/>
	<path class="st1" d="m168.34 29.98c-2.58 2.45-4.21 5.91-4.26 9.74v0.18 17.57h8.52v-17.57-0.18c-0.05-3.83-1.68-7.28-4.26-9.74"/>
	<g id="cosma-roll">
		<path class="st0" d="m95.49 46.43-4.08 2.36v8.55h8.17v-8.55l-4.09-2.36m4.08-20.34h-8.17v8.55l4.09 2.36 4.08-2.36v-8.55"/>
		<path class="st0" d="m103.65 41.71-4.08 2.36v4.71l7.4 4.27 4.08-7.07-7.4-4.27m-19.65-11.34-4.08 7.07 7.4 4.27 4.08-2.36v-4.71l-7.4-4.27"/>
		<path class="st1" d="m99.57 44.07-4.08 2.36 4.08 2.36v-4.72m-8.17-9.43v4.71l4.09-2.35-4.09-2.36"/>
		<path class="st0" d="m87.32 41.71-7.4 4.27 4.08 7.08 7.4-4.27v-4.71l-4.08-2.37m19.65-11.34-7.4 4.27v4.71l4.08 2.36 7.4-4.27-4.08-7.07"/>
		<path class="st1" d="m91.4 44.07v4.71l4.08-2.36-4.08-2.35m8.17-9.43-4.08 2.36 4.08 2.36v-4.72"/>
		<path class="st1" d="m91.4 39.36-4.08 2.36 4.08 2.36v-4.72m8.17 0v4.71l4.08-2.36-4.08-2.35"/>
		<polyline class="st2" points="95.49 37 91.4 39.36 91.4 44.07 95.49 46.43 99.57 44.07 99.57 39.36 95.49 37"/>
	</g>
	<path class="st0" d="m50.43 16.17h-15c-0.69 0-1.25 0.56-1.25 1.25v48.56c0 0.69 0.56 1.25 1.25 1.25h15v-9.9h-5.09c-0.69 0-1.25-0.56-1.25-1.25v-28.74c0-0.69 0.56-1.25 1.25-1.25h5.09v-9.92"/>
	<path class="st0" d="m32.53 16.17h-15c-0.69 0-1.25 0.56-1.25 1.25v48.56c0 0.69 0.56 1.25 1.25 1.25h15v-9.9h-5.09c-0.69 0-1.25-0.56-1.25-1.25v-28.73c0-0.69 0.56-1.25 1.25-1.25h5.09v-9.93"/>
	<path class="st0" d="m247.89 16.17h-15v9.92h5.09c0.69 0 1.25 0.56 1.25 1.25v28.74c0 0.69-0.56 1.25-1.25 1.25h-5.09v9.9h15c0.69 0 1.25-0.56 1.25-1.25v-48.56c0.01-0.68-0.56-1.25-1.25-1.25"/>
	<path class="st0" d="m265.82 16.17h-15v9.92h5.09c0.69 0 1.25 0.56 1.25 1.25v28.74c0 0.69-0.56 1.25-1.25 1.25h-5.09v9.9h15c0.69 0 1.25-0.56 1.25-1.25v-48.55c0-0.69-0.56-1.26-1.25-1.26"/>
</svg>
                </div>
                

                <p>
                    Version 2.0.4
                    •
                    License GPL-3.0-or-later</p>

                <ul>
                    
                    <li>Arthur Perret</li>
                    
                    <li>Guillaume Brioudes</li>
                    
                    <li>Clément Borel</li>
                    
                    <li>Olivier Le Deuff</li>
                    

                    <li>ANR research programme <a href="https://hyperotlet.hypotheses.org/">HyperOtlet</a></li>
                </ul>

                <dl>
                    <dt><a href="https://d3js.org/" target="_blank">D3 <span class="badge">v4.13.0</span></a></dt>
                    <dd>Mike Bostock (BSD 3-Clause)</dd>
                    <dt><a href="https://mozilla.github.io/nunjucks/" target="_blank">Nunjucks <span class="badge">v3.2.3</span></a></dt>
                    <dd>James Long (BSD 2-Clause)</dd>
                    <dt><a href="https://github.com/nodeca/js-yaml" target="_blank">Js-yaml <span class="badge">v4.1.0</span></a></dt>
                    <dd>Vitaly Puzrin (MIT License)</dd>
                    <dt><a href="https://github.com/markdown-it/markdown-it" target="_blank">Markdown-it <span class="badge">v12.3.0</span></a></dt>
                    <dd>Vitaly Puzrin, Alex Kocharin (MIT License)</dd>
                    <dt><a href="https://github.com/juris-m/citeproc-js" target="_blank">Citeproc <span class="badge">v2.4.62</span></a></dt>
                    <dd>Frank Bennett (CPAL, AGPL)</dd>
                    <dt><a href="https://fusejs.io/" target="_blank">Fuse-js <span class="badge">v6.4.6</span></a></dt>
                    <dd>Kiro Risk (Apache License 2.0)</dd>
                </dl>
            </main>
        </article>

        

    </main>

    

    <div class="graph-wrapper" style="background-color: #ffffff">
        <svg id="graph-canvas">
            <defs>
                <marker id="arrow" viewBox="0 0 10 10" refX="22" refY="5" markerUnits="strokeWidth" markerWidth="5" markerHeight="5" orient="auto">
                    <path d="M 0 0 L 10 5 L 0 10 z"></path>
                </marker>
                <filter id="double">
                    <feMorphology in="SourceGraphic" result="a" operator="dilate" radius="0.2"></feMorphology>
                    <feComposite in="SourceGraphic" in2="a" result="xx" operator="xor"></feComposite>
                </filter>
                
            </defs>
        </svg>

        <div class="graph-controls">
            <div class="graph-controls-zoom">
                <button onclick="zoomLess()">-</button>
                <button onclick="zoomReset()">Reset (R)</button>
                <button onclick="zoomMore()">+</button>
            </div>

            
            <div class="graph-controls-focus">
                <label>
                    <input id="focus-check" type="checkbox" name="checkbox">
                    Focus (F)
                </label>

                <input id="focus-input" type="range" min="1" max="2" value="1" name="focus_range" step="1" />
            </div>
            
        </div>

        
        <div class="graph-timeline">
            <label>
                <input id="timeline-checkbox" type="checkbox" name="checkbox">
                Mode chronologique
            </label>

            <form id="timeline-form">
                <output name="timeline_output">8/22/2020</output>
                <input
                    type="range"
                    name="timeline_range"
                    min="1598088810"
                    max="1700662224"
                    value="1598088810"
                    list="timeline-ticks"
                >
                <datalist id="timeline-ticks"></datalist>
            </form>
        </div>
        
    </div>

    

    <script>
        const data = {"nodes":[{"id":"3237396916","label":"“禅道”的配置与数据库连接","type":"undefined","fill":"#858585","colorStroke":"#858585","highlight":"#ff6a6a","size":2,"strokeWidth":2,"begin":1650257016},{"id":"1813820909","label":"「多媒体与信号处理」课程笔记","type":"undefined","fill":"#858585","colorStroke":"#858585","highlight":"#ff6a6a","size":2,"strokeWidth":2,"begin":1700662223},{"id":"1433349372","label":"【麒麟实训】Deb的打包（小练习分享）","type":"undefined","fill":"#858585","colorStroke":"#858585","highlight":"#ff6a6a","size":4,"strokeWidth":2,"begin":1650983143},{"id":"2592625103","label":"【麒麟实训】实训结束 - 感谢篇","type":"生活区","fill":"#eb245f","colorStroke":"#ff274a","highlight":"#ff6a6a","size":4,"strokeWidth":2,"begin":1656669631},{"id":"1973703782","label":"【麒麟实训】我想在这次的实训项目中，达成怎样的目的？","type":"生活区","fill":"#eb245f","colorStroke":"#ff274a","highlight":"#ff6a6a","size":13.999999999999998,"strokeWidth":2,"begin":1650980770},{"id":"1126538397","label":"【麒麟实训】撷英1 - Pyqt程序编译与打包探索","type":"undefined","fill":"#858585","colorStroke":"#858585","highlight":"#ff6a6a","size":4,"strokeWidth":2,"begin":1656666026},{"id":"2292934449","label":"【麒麟实训】撷英2 - Python代码控制word文档模板","type":"undefined","fill":"#858585","colorStroke":"#858585","highlight":"#ff6a6a","size":4,"strokeWidth":2,"begin":1656666829},{"id":"3536932394","label":"【麒麟实训】撷英3 - Python执行Linux命令公共方法","type":"undefined","fill":"#858585","colorStroke":"#858585","highlight":"#ff6a6a","size":4,"strokeWidth":2,"begin":1656667253},{"id":"3273167773","label":"AHK 鼠标增强（CClose 源码撷英）","type":"核心协同","fill":"#A7F532","colorStroke":"#84c227","highlight":"#ff6a6a","size":4,"strokeWidth":2,"begin":1685113767},{"id":"4139834099","label":"Butterfly 侧边栏实现 Obsidian 关系图谱","type":"Hexo","fill":"#54C3D9","colorStroke":"#4095a5","highlight":"#ff6a6a","size":10,"strokeWidth":2,"begin":1691764229},{"id":"4033695206","label":"Butterfly 夜间模式变换顶部网站图标","type":"Hexo","fill":"#54C3D9","colorStroke":"#4095a5","highlight":"#ff6a6a","size":4,"strokeWidth":2,"begin":1689010814},{"id":"152796589","label":"Butterfly 自定义页脚（不修改主题源码）","type":"Hexo","fill":"#54C3D9","colorStroke":"#4095a5","highlight":"#ff6a6a","size":4,"strokeWidth":2,"begin":1689002192},{"id":"90746120","label":"Butterfly不改动主题源码实现自定义侧边栏","type":"Hexo","fill":"#54C3D9","colorStroke":"#4095a5","highlight":"#ff6a6a","size":8,"strokeWidth":2,"begin":1685549841},{"id":"657793374","label":"Epic城市天际线 DLC 全破解与模组安装","type":"undefined","fill":"#858585","colorStroke":"#858585","highlight":"#ff6a6a","size":2,"strokeWidth":2,"begin":1692443488},{"id":"1857161372","label":"Git-flow：git的分支管理策略","type":"undefined","fill":"#858585","colorStroke":"#858585","highlight":"#ff6a6a","size":2,"strokeWidth":2,"begin":1685195513},{"id":"1886753501","label":"Git基本操作学习","type":"undefined","fill":"#858585","colorStroke":"#858585","highlight":"#ff6a6a","size":2,"strokeWidth":2,"begin":1685173957},{"id":"414962704","label":"Hexo 博客的写作与装饰","type":"Hexo","fill":"#54C3D9","colorStroke":"#4095a5","highlight":"#ff6a6a","size":16,"strokeWidth":2,"begin":1685696100},{"id":"3569112562","label":"Hexo 博客适配 Obsidian 新语法","type":"Hexo","fill":"#54C3D9","colorStroke":"#4095a5","highlight":"#ff6a6a","size":12,"strokeWidth":2,"begin":1690860873},{"id":"1495212389","label":"Hexo 框架 Btterfly 主题引入 Waline 评论系统及国内正常访问","type":"Hexo","fill":"#54C3D9","colorStroke":"#4095a5","highlight":"#ff6a6a","size":10,"strokeWidth":2,"begin":1682584029},{"id":"681885666","label":"Hexo博客添加漂浮物效果（可定制显示页面）","type":"Hexo","fill":"#54C3D9","colorStroke":"#4095a5","highlight":"#ff6a6a","size":4,"strokeWidth":2,"begin":1682852003},{"id":"3569684170","label":"JMeter的安装与使用","type":"工具箱","fill":"#858585","colorStroke":"#858585","highlight":"#ff6a6a","size":2,"strokeWidth":2,"begin":1650075240},{"id":"1867823418","label":"Linux服务器添加SSL证书","type":"undefined","fill":"#858585","colorStroke":"#858585","highlight":"#ff6a6a","size":10,"strokeWidth":2,"begin":1650523410},{"id":"1018322944","label":"MAJOR的配置与基本使用","type":"工具箱","fill":"#858585","colorStroke":"#858585","highlight":"#ff6a6a","size":2,"strokeWidth":2,"begin":1648129973},{"id":"1011516134","label":"Markdown 渲染测试","type":"核心协同","fill":"#A7F532","colorStroke":"#84c227","highlight":"#ff6a6a","size":4,"strokeWidth":2,"begin":1685628366},{"id":"4244887792","label":"mujava的安装与使用","type":"工具箱","fill":"#858585","colorStroke":"#858585","highlight":"#ff6a6a","size":2,"strokeWidth":2,"begin":1647688460},{"id":"107080905","label":"Nginx 的安装与配置","type":"undefined","fill":"#858585","colorStroke":"#858585","highlight":"#ff6a6a","size":4,"strokeWidth":2,"begin":1681380300},{"id":"3992879191","label":"PicGo(app) 配置腾讯云 COS 图床","type":"核心协同","fill":"#A7F532","colorStroke":"#84c227","highlight":"#ff6a6a","size":8,"strokeWidth":2,"begin":1647092016},{"id":"2392872481","label":"Selenium的安装与使用","type":"工具箱","fill":"#858585","colorStroke":"#858585","highlight":"#ff6a6a","size":2,"strokeWidth":2,"begin":1648900434},{"id":"2966071784","label":"server、sqlite朋友圈部署方案","type":"Hexo","fill":"#54C3D9","colorStroke":"#4095a5","highlight":"#ff6a6a","size":8,"strokeWidth":2,"begin":1691942262},{"id":"377267818","label":"Typora 应用 PicGo(app) 使用图床","type":"核心协同","fill":"#A7F532","colorStroke":"#84c227","highlight":"#ff6a6a","size":6,"strokeWidth":2,"begin":1647092016},{"id":"1864583727","label":"Windows管理右键菜单","type":"工具箱","fill":"#858585","colorStroke":"#858585","highlight":"#ff6a6a","size":2,"strokeWidth":2,"begin":1649558872},{"id":"2653327377","label":"WordPress 上传的文件大小超过定义值问题解决","type":"WordPress","fill":"#70868F","colorStroke":"#48565c","highlight":"#ff6a6a","size":2,"strokeWidth":2,"begin":1647101809},{"id":"2062987538","label":"WordPress 使用 HTTPS","type":"WordPress","fill":"#70868F","colorStroke":"#48565c","highlight":"#ff6a6a","size":6,"strokeWidth":2,"begin":1650523410},{"id":"2497000883","label":"WordPress 修改 functions 的方法","type":"WordPress","fill":"#70868F","colorStroke":"#48565c","highlight":"#ff6a6a","size":2,"strokeWidth":2,"begin":1650126297},{"id":"1780203637","label":"WordPress 修改文章标题前的「私密」和「密码保护」","type":"WordPress","fill":"#70868F","colorStroke":"#48565c","highlight":"#ff6a6a","size":2,"strokeWidth":2,"begin":1648825095},{"id":"3483842810","label":"WordPress 前台页面空白的解决","type":"WordPress","fill":"#70868F","colorStroke":"#48565c","highlight":"#ff6a6a","size":2,"strokeWidth":2,"begin":1646926720},{"id":"1360801971","label":"个人独立申请软件著作权申请记录","type":"社会生活","fill":"#858585","colorStroke":"#858585","highlight":"#ff6a6a","size":2,"strokeWidth":2,"begin":1685526806},{"id":"3015602463","label":"为评论系统增加输入提醒【Waline】","type":"Hexo","fill":"#54C3D9","colorStroke":"#4095a5","highlight":"#ff6a6a","size":4,"strokeWidth":2,"begin":1689090179},{"id":"2676514221","label":"代码驱动学习-快速入门AJAX","type":"undefined","fill":"#858585","colorStroke":"#858585","highlight":"#ff6a6a","size":2,"strokeWidth":2,"begin":1683031189},{"id":"2052246699","label":"使用 Adobe Premiere Pro 实现 GIF 动图画面拼接","type":"工具箱","fill":"#858585","colorStroke":"#858585","highlight":"#ff6a6a","size":2,"strokeWidth":2,"begin":1682934072},{"id":"910498382","label":"使用 CDN 加速 WordPress 博客网站","type":"Zone of archive","fill":"#805500","colorStroke":"#4d3300","highlight":"#ff6a6a","size":2,"strokeWidth":2,"begin":1650170796},{"id":"3910313174","label":"免费高效制作精美词云（Python、wordart）","type":"工具箱","fill":"#858585","colorStroke":"#858585","highlight":"#ff6a6a","size":2,"strokeWidth":2,"begin":1647515172},{"id":"1881411089","label":"关于 QQ 聊天发起与 QQ 邮箱即时写信的链接-即时沟通外链","type":"Zone of archive","fill":"#805500","colorStroke":"#4d3300","highlight":"#ff6a6a","size":2,"strokeWidth":2,"begin":1647178439},{"id":"2555088146","label":"关于 wordPress 固定链接的修改以及 htaccess 文件不起作用问题的解决","type":"WordPress","fill":"#70868F","colorStroke":"#48565c","highlight":"#ff6a6a","size":2,"strokeWidth":2,"begin":1648048565},{"id":"2201181434","label":"博客域名解析管理与网站CDN加速域名配置","type":"undefined","fill":"#858585","colorStroke":"#858585","highlight":"#ff6a6a","size":10,"strokeWidth":2,"begin":1690133231},{"id":"648224007","label":"博客网站网页变灰的操作方法","type":"undefined","fill":"#858585","colorStroke":"#858585","highlight":"#ff6a6a","size":2,"strokeWidth":2,"begin":1648302294},{"id":"1309833614","label":"原来是 Edge 默默作祟","type":"生活区","fill":"#eb245f","colorStroke":"#ff274a","highlight":"#ff6a6a","size":2,"strokeWidth":2,"begin":1692888183},{"id":"2065118013","label":"国内访问Hexo优化加速-替换jsdelivr的CDN链接","type":"Hexo","fill":"#54C3D9","colorStroke":"#4095a5","highlight":"#ff6a6a","size":12,"strokeWidth":2,"begin":1682674458},{"id":"1218172081","label":"图像采集头顶到顶部距离不通过？就用 Windows 自带的画图解决","type":"undefined","fill":"#858585","colorStroke":"#858585","highlight":"#ff6a6a","size":2,"strokeWidth":2,"begin":1698388401},{"id":"930915372","label":"在 ECS 中搭建 WordPress","type":"WordPress","fill":"#70868F","colorStroke":"#48565c","highlight":"#ff6a6a","size":4,"strokeWidth":2,"begin":1647844786},{"id":"1308325830","label":"在你的Hexo博客上加入进度条","type":"Hexo","fill":"#54C3D9","colorStroke":"#4095a5","highlight":"#ff6a6a","size":4,"strokeWidth":2,"begin":1682683382},{"id":"1735498523","label":"好像我应该也是个生活区博主","type":"生活区","fill":"#eb245f","colorStroke":"#ff274a","highlight":"#ff6a6a","size":2,"strokeWidth":2,"begin":1697799174},{"id":"3709373237","label":"定制自己的 Waline 评论系统","type":"Hexo","fill":"#54C3D9","colorStroke":"#4095a5","highlight":"#ff6a6a","size":4,"strokeWidth":2,"begin":1682669712},{"id":"1355609062","label":"家里蹲的二十四节气","type":"生活区","fill":"#eb245f","colorStroke":"#ff274a","highlight":"#ff6a6a","size":2,"strokeWidth":2,"begin":1598088810},{"id":"2958737902","label":"将 CDN 缓存自动刷新加入到博客发布的工作流（Hexo、WordPress）","type":"核心协同","fill":"#A7F532","colorStroke":"#84c227","highlight":"#ff6a6a","size":6,"strokeWidth":2,"begin":1682871318},{"id":"3103663518","label":"开源工具推荐","type":"工具箱","fill":"#858585","colorStroke":"#858585","highlight":"#ff6a6a","size":8,"strokeWidth":2,"begin":1683974012},{"id":"2346883624","label":"成为一名个人博客网站站长","type":"社会生活","fill":"#858585","colorStroke":"#858585","highlight":"#ff6a6a","size":12,"strokeWidth":2,"begin":1647844786},{"id":"3607632637","label":"我上钩了——一次被钓鱼邮件受骗经历","type":"生活区","fill":"#eb245f","colorStroke":"#ff274a","highlight":"#ff6a6a","size":2,"strokeWidth":2,"begin":1695358470},{"id":"238315581","label":"旧页面-WordPress 站点隐私政策","type":"Zone of archive","fill":"#805500","colorStroke":"#4d3300","highlight":"#ff6a6a","size":2,"strokeWidth":2,"begin":1646926720},{"id":"3096264560","label":"旧页面-关于我","type":"Zone of archive","fill":"#805500","colorStroke":"#4d3300","highlight":"#ff6a6a","size":2,"strokeWidth":2,"begin":1646926720},{"id":"3538365946","label":"旧页面-友链","type":"Zone of archive","fill":"#805500","colorStroke":"#4d3300","highlight":"#ff6a6a","size":2,"strokeWidth":2,"begin":1647591216},{"id":"3771188998","label":"旧页面-赞赏＆贡献","type":"Zone of archive","fill":"#805500","colorStroke":"#4d3300","highlight":"#ff6a6a","size":2,"strokeWidth":2,"begin":1648300105},{"id":"3437638411","label":"本地文件夹的多端同步","type":"核心协同","fill":"#A7F532","colorStroke":"#84c227","highlight":"#ff6a6a","size":4,"strokeWidth":2,"begin":1699074318},{"id":"4272386753","label":"本地部署 PlantUML","type":"核心协同","fill":"#A7F532","colorStroke":"#84c227","highlight":"#ff6a6a","size":4,"strokeWidth":2,"begin":1694329993},{"id":"2737438580","label":"极简图书管理系统，快速上手Flask-Vue前后端开发","type":"undefined","fill":"#858585","colorStroke":"#858585","highlight":"#ff6a6a","size":2,"strokeWidth":2,"begin":1683188954},{"id":"85495977","label":"构建 Obsidian 的 Hexo 写作工作流","type":"核心协同","fill":"#A7F532","colorStroke":"#84c227","highlight":"#ff6a6a","size":10,"strokeWidth":2,"begin":1685629327},{"id":"346425435","label":"校园网有线网连接相关问题","type":"undefined","fill":"#858585","colorStroke":"#858585","highlight":"#ff6a6a","size":2,"strokeWidth":2,"begin":1681742881},{"id":"3395837292","label":"第一次开发 npm 插件","type":"生活区","fill":"#eb245f","colorStroke":"#ff274a","highlight":"#ff6a6a","size":4,"strokeWidth":2,"begin":1697799107},{"id":"4028728107","label":"绿萝养殖日记","type":"生活区","fill":"#eb245f","colorStroke":"#ff274a","highlight":"#ff6a6a","size":2,"strokeWidth":2,"begin":1652371200},{"id":"127992739","label":"自定义文章内外链接样式的另一种方法（使用markdown-it插件）","type":"Hexo","fill":"#54C3D9","colorStroke":"#4095a5","highlight":"#ff6a6a","size":4,"strokeWidth":2,"begin":1693068318},{"id":"1215492985","label":"装点你的 Butterfly 博客","type":"Hexo","fill":"#54C3D9","colorStroke":"#4095a5","highlight":"#ff6a6a","size":16,"strokeWidth":2,"begin":1685696100},{"id":"2466246546","label":"解决 WordPress「在裁剪您的图像时发生了错误」的问题","type":"WordPress","fill":"#70868F","colorStroke":"#48565c","highlight":"#ff6a6a","size":2,"strokeWidth":2,"begin":1647522249},{"id":"4084230277","label":"解决Bing搜索页自动返回顶部的问题","type":"undefined","fill":"#858585","colorStroke":"#858585","highlight":"#ff6a6a","size":2,"strokeWidth":2,"begin":1681635812},{"id":"1042","label":"设备管理器网卡属性没有电源管理选项卡的解决方法","type":"undefined","fill":"#858585","colorStroke":"#858585","highlight":"#ff6a6a","size":2,"strokeWidth":2,"begin":1656643697},{"id":"713171771","label":"误操作 WordPress 站点地址的解决方案","type":"WordPress","fill":"#70868F","colorStroke":"#48565c","highlight":"#ff6a6a","size":2,"strokeWidth":2,"begin":1647592582},{"id":"3260727180","label":"软件测试工具Junit、Hamcrest、Eclemma的安装","type":"工具箱","fill":"#858585","colorStroke":"#858585","highlight":"#ff6a6a","size":2,"strokeWidth":2,"begin":1647262825},{"id":"3567162190","label":"那一年的暑假剪影","type":"生活区","fill":"#eb245f","colorStroke":"#ff274a","highlight":"#ff6a6a","size":6,"strokeWidth":2,"begin":1659801600},{"id":"181570378","label":"部署 Hexo 个人博客框架到服务器","type":"Hexo","fill":"#54C3D9","colorStroke":"#4095a5","highlight":"#ff6a6a","size":6,"strokeWidth":2,"begin":1681380600},{"id":"1129186507","label":"阿里云ECS主机可ping通但拒绝连接的解决办法","type":"undefined","fill":"#858585","colorStroke":"#858585","highlight":"#ff6a6a","size":2,"strokeWidth":2,"begin":1694315628},{"id":"636905579","label":"页面展示用户 IP 地址及地理位置信息","type":"Hexo","fill":"#54C3D9","colorStroke":"#4095a5","highlight":"#ff6a6a","size":2,"strokeWidth":2,"begin":1694247209},{"id":"2226004458","label":"魔改脚本实现知网导出Bibtex参考格式","type":"工具箱","fill":"#858585","colorStroke":"#858585","highlight":"#ff6a6a","size":2,"strokeWidth":2,"begin":1683794241}],"links":[{"id":0,"context":["[[1433349372|【麒麟实训】Deb的打包（小练习分享）]]\n[[1126538397|【麒麟实训】撷英1 - Pyqt程序编译与打包探索]]\n[[2292934449|【麒麟实训】撷英2 - Python代码控制word文档模板]]\n[[3536932394|【麒麟实训】撷英3 - Python执行Linux命令公共方法]]\n[[2592625103|【麒麟实训】实训结束 - 感谢篇]]"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"1973703782","target":"1126538397","report":[]},{"id":1,"context":["[[1433349372|【麒麟实训】Deb的打包（小练习分享）]]\n[[1126538397|【麒麟实训】撷英1 - Pyqt程序编译与打包探索]]\n[[2292934449|【麒麟实训】撷英2 - Python代码控制word文档模板]]\n[[3536932394|【麒麟实训】撷英3 - Python执行Linux命令公共方法]]\n[[2592625103|【麒麟实训】实训结束 - 感谢篇]]"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"1973703782","target":"1433349372","report":[]},{"id":2,"context":["[[1433349372|【麒麟实训】Deb的打包（小练习分享）]]\n[[1126538397|【麒麟实训】撷英1 - Pyqt程序编译与打包探索]]\n[[2292934449|【麒麟实训】撷英2 - Python代码控制word文档模板]]\n[[3536932394|【麒麟实训】撷英3 - Python执行Linux命令公共方法]]\n[[2592625103|【麒麟实训】实训结束 - 感谢篇]]"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"1973703782","target":"2292934449","report":[]},{"id":3,"context":["[[1433349372|【麒麟实训】Deb的打包（小练习分享）]]\n[[1126538397|【麒麟实训】撷英1 - Pyqt程序编译与打包探索]]\n[[2292934449|【麒麟实训】撷英2 - Python代码控制word文档模板]]\n[[3536932394|【麒麟实训】撷英3 - Python执行Linux命令公共方法]]\n[[2592625103|【麒麟实训】实训结束 - 感谢篇]]"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"1973703782","target":"2592625103","report":[]},{"id":4,"context":["[[1433349372|【麒麟实训】Deb的打包（小练习分享）]]\n[[1126538397|【麒麟实训】撷英1 - Pyqt程序编译与打包探索]]\n[[2292934449|【麒麟实训】撷英2 - Python代码控制word文档模板]]\n[[3536932394|【麒麟实训】撷英3 - Python执行Linux命令公共方法]]\n[[2592625103|【麒麟实训】实训结束 - 感谢篇]]"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"1973703782","target":"3536932394","report":[]},{"id":5,"context":["实现无缝侧边栏参考我这篇教程：[[90746120|Butterfly不改动主题源码实现自定义侧边栏]]"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"4139834099","target":"90746120","report":[]},{"id":6,"context":["- 使用钩子在 Hexo 部署前检查 Obsidian 是否启动：[[3569112562|Hexo 博客适配 Obsidian 新语法]]\n- Hexo 发布后自动刷新 CDN：[[2958737902|将 CDN 缓存自动刷新加入到博客发布的工作流（Hexo、WordPress）]]"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"4139834099","target":"2958737902","report":[]},{"id":7,"context":["- 使用钩子在 Hexo 部署前检查 Obsidian 是否启动：[[3569112562|Hexo 博客适配 Obsidian 新语法]]\n- Hexo 发布后自动刷新 CDN：[[2958737902|将 CDN 缓存自动刷新加入到博客发布的工作流（Hexo、WordPress）]]"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"4139834099","target":"3569112562","report":[]},{"id":8,"context":["[[4139834099|Butterfly 侧边栏实现 Obsidian 关系图谱]]"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"90746120","target":"4139834099","report":[]},{"id":9,"context":["我的工作流：[[2958737902|将 CDN 缓存自动刷新加入到博客发布的工作流（Hexo、WordPress）]]、[[85495977|构建 Obsidian 的 Hexo 写作工作流]]"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"414962704","target":"85495977","report":[]},{"id":10,"context":["漂浮物的显示：[[681885666|Hexo博客添加漂浮物效果（可定制显示页面）]]"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"414962704","target":"681885666","report":[]},{"id":11,"context":["详见文章：[[1215492985|装点你的 Butterfly 博客]]"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"414962704","target":"1215492985","report":[]},{"id":12,"context":["- [如何让博客支持 AI 摘要，使用 TianliGPT 自动生成文章的 AI 摘要 | 张洪 Heo](https://blog.zhheo.com/p/ec57d8b2.html)\n- [qxchuckle/Post-Summary-AI: 一个较通用的，生成网站内文章摘要，并推荐相关文章的AI (github.com)](https://github.com/qxchuckle/Post-Summary-AI)\n加入进度条：[[1308325830|在你的Hexo博客上加入进度条]]\n# BtterFly 主题相关"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"414962704","target":"1308325830","report":[]},{"id":13,"context":["我的工作流：[[2958737902|将 CDN 缓存自动刷新加入到博客发布的工作流（Hexo、WordPress）]]、[[85495977|构建 Obsidian 的 Hexo 写作工作流]]"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"414962704","target":"2958737902","report":[]},{"id":14,"context":["部署友链朋友圈：[[2966071784|server、sqlite朋友圈部署方案]]"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"414962704","target":"2966071784","report":[]},{"id":15,"context":["[^gfm]: Markdown 相关语法规范详见[[1011516134|Markdown 渲染测试]]"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"3569112562","target":"1011516134","report":[]},{"id":16,"context":["解决Callouts问题的过程中，搜到[widcardw](https://widcard.win/)的博客并产生启发，于是我的第一款NPM插件markdown-it-obsidian-imgsize诞生了。开发杂记详见：[[3395837292|第一次开发 npm 插件]]。\n## 后续考虑改进"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"3569112562","target":"3395837292","report":[]},{"id":17,"context":["[[3709373237|定制自己的 Waline 评论系统]]\n[[3015602463|为评论系统增加输入提醒【Waline】]]"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"1495212389","target":"3015602463","report":[]},{"id":18,"context":["[[3709373237|定制自己的 Waline 评论系统]]\n[[3015602463|为评论系统增加输入提醒【Waline】]]"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"1495212389","target":"3709373237","report":[]},{"id":19,"context":["参考：[[2062987538|WordPress 使用 HTTPS]]"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"1867823418","target":"2062987538","report":[]},{"id":20,"context":["> 文章推荐：HTTPS 配置成功后不要错过这篇文章：[[2201181434|博客域名解析管理与网站CDN加速域名配置]]","精华文章：[[2201181434|博客域名解析管理与网站CDN加速域名配置]]"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"1867823418","target":"2201181434","report":[]},{"id":21,"context":["[^jsd]: 参考[[2065118013|国内访问Hexo优化加速-替换jsdelivr的CDN链接]]。"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"2966071784","target":"2065118013","report":[]},{"id":22,"context":["[^cdn]: 参见我的折腾过程：[[2201181434|博客域名解析管理与网站CDN加速域名配置]]"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"2966071784","target":"2201181434","report":[]},{"id":23,"context":["请移步这篇文章[[3992879191|PicGo(app) 配置腾讯云 COS 图床]]"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"377267818","target":"3992879191","report":[]},{"id":24,"context":["[^1]: 参考[[1867823418|Linux服务器添加SSL证书]]"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"2062987538","target":"1867823418","report":[]},{"id":25,"context":["可参考这篇文章：[[107080905|Nginx 的安装与配置]]"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"2201181434","target":"107080905","report":[]},{"id":26,"context":["[^hexo]: 详看我的这篇文章：[[181570378|部署 Hexo 个人博客框架到服务器]]"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"2065118013","target":"181570378","report":[]},{"id":27,"context":["[^hb]: fontawesome 可以考虑更换图标库，请看我之前的文章 [[1215492985|装点你的 Butterfly 博客]]\n[^bw]: 处理这个问题前请看我之前的文章：[[1495212389|Hexo 框架 Btterfly 主题引入 Waline 评论系统及国内正常访问]]"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"2065118013","target":"1215492985","report":[]},{"id":28,"context":["[^hb]: fontawesome 可以考虑更换图标库，请看我之前的文章 [[1215492985|装点你的 Butterfly 博客]]\n[^bw]: 处理这个问题前请看我之前的文章：[[1495212389|Hexo 框架 Btterfly 主题引入 Waline 评论系统及国内正常访问]]"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"2065118013","target":"1495212389","report":[]},{"id":29,"context":["本站相关文章：\n* [[377267818|Typora 应用 PicGo(app) 使用图床]]\n* [[3992879191|PicGo(app) 配置腾讯云 COS 图床]]"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"3103663518","target":"377267818","report":[]},{"id":30,"context":["* [CClose](https://github.com/chaohershi/cclose)：CClose是一个用AutoHotKey编写的Windows实用程序。软件挺好用的，可以对我个人习惯进行统一。但是最近我把他核心代码提取并定制了，所以对它我就不依赖了。详看文章：[[3273167773|AHK 鼠标增强（CClose 源码撷英）]]"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"3103663518","target":"3273167773","report":[]},{"id":31,"context":["本站相关文章：\n* [[377267818|Typora 应用 PicGo(app) 使用图床]]\n* [[3992879191|PicGo(app) 配置腾讯云 COS 图床]]"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"3103663518","target":"3992879191","report":[]},{"id":32,"context":["我想搭一个 Wordpress 博客网站：[[930915372|在 ECS 中搭建 WordPress]]\n我想搭一个 Hexo 博客网站：[[181570378|部署 Hexo 个人博客框架到服务器]]"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"2346883624","target":"181570378","report":[]},{"id":33,"context":["我想搭一个 Wordpress 博客网站：[[930915372|在 ECS 中搭建 WordPress]]\n我想搭一个 Hexo 博客网站：[[181570378|部署 Hexo 个人博客框架到服务器]]"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"2346883624","target":"930915372","report":[]},{"id":34,"context":["参看我的另一篇文章：[[1867823418|Linux服务器添加SSL证书]]\n精华文章：[[2201181434|博客域名解析管理与网站CDN加速域名配置]]"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"2346883624","target":"1867823418","report":[]},{"id":35,"context":["Hexo：[[2065118013|国内访问Hexo优化加速-替换jsdelivr的CDN链接]]"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"2346883624","target":"2065118013","report":[]},{"id":36,"context":["参看我的另一篇文章：[[1867823418|Linux服务器添加SSL证书]]\n精华文章：[[2201181434|博客域名解析管理与网站CDN加速域名配置]]"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"2346883624","target":"2201181434","report":[]},{"id":37,"context":["如果想将 OFM 运用于 Hexo 中，提示文本丰富性，那么可以试试这篇文章：[[3569112562|Hexo 博客适配 Obsidian 新语法]]"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"85495977","target":"3569112562","report":[]},{"id":38,"context":["[^图床配置教程]: [[3992879191|PicGo(app) 配置腾讯云 COS 图床]]"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"85495977","target":"3992879191","report":[]},{"id":39,"context":["我的解决方法是将 Plantuml 部署在本地。具体本地部署 Plantuml 的方法详见：[[4272386753|本地部署 PlantUML]]"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"85495977","target":"4272386753","report":[]},{"id":40,"context":["[^mdi]: 关于这两款插件的介绍可以参考：[[3569112562|Hexo 博客适配 Obsidian 新语法]]中的第一部分"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"127992739","target":"3569112562","report":[]},{"id":41,"context":["自定义侧边栏：[[90746120|Butterfly不改动主题源码实现自定义侧边栏]]\n自定义页脚：[[152796589|Butterfly 自定义页脚（不修改主题源码）]]\n夜间模式更改网站图标：[[4033695206|Butterfly 夜间模式变换顶部网站图标]]"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"1215492985","target":"90746120","report":[]},{"id":42,"context":["自定义侧边栏：[[90746120|Butterfly不改动主题源码实现自定义侧边栏]]\n自定义页脚：[[152796589|Butterfly 自定义页脚（不修改主题源码）]]\n夜间模式更改网站图标：[[4033695206|Butterfly 夜间模式变换顶部网站图标]]"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"1215492985","target":"152796589","report":[]},{"id":43,"context":["本文由原[[414962704|Hexo 博客的写作与装饰]]拆分而来。\n# 主题升级"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"1215492985","target":"414962704","report":[]},{"id":44,"context":["[[1495212389|Hexo 框架 Btterfly 主题引入 Waline 评论系统及国内正常访问]]"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"1215492985","target":"1495212389","report":[]},{"id":45,"context":["自定义侧边栏：[[90746120|Butterfly不改动主题源码实现自定义侧边栏]]\n自定义页脚：[[152796589|Butterfly 自定义页脚（不修改主题源码）]]\n夜间模式更改网站图标：[[4033695206|Butterfly 夜间模式变换顶部网站图标]]"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"1215492985","target":"4033695206","report":[]},{"id":46,"context":["[^Kylin]: 更多内容详见[[1973703782|【麒麟实训】我想在这次的实训项目中，达成怎样的目的？]]"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"3567162190","target":"1973703782","report":[]},{"id":47,"context":["[^Xmind]: 应该是这篇文章[[3437638411|本地文件夹的多端同步]]，不过现在的文章内容可能有改版和修正。\n# day2 我对我所学专业的一点思考"],"type":"undefined","shape":{"stroke":"simple","dashInterval":null},"color":"#e1e1e1","colorHighlight":"#ff6a6a","source":"3567162190","target":"3437638411","report":[]}]};
        const graphProperties = {"select_origin":"directory","files_origin":"../data/","nodes_origin":"","links_origin":"","nodes_online":"","links_online":"","images_origin":"","export_target":"","history":true,"focus_max":2,"record_types":{"Zone of archive":{"fill":"#805500","stroke":"#4d3300"},"核心协同":{"fill":"#A7F532","stroke":"#84c227"},"生活区":{"fill":"#eb245f","stroke":"#ff274a"},"工具箱":{"fill":"#858585","stroke":"#858585"},"社会生活":{"fill":"#858585","stroke":"#858585"},"Hexo":{"fill":"#54C3D9","stroke":"#4095a5"},"WordPress":{"fill":"#70868F","stroke":"#48565c"},"undefined":{"fill":"#858585","stroke":"#858585"}},"link_types":{"undefined":{"stroke":"simple","color":"#e1e1e1"}},"record_filters":[],"graph_background_color":"#ffffff","graph_highlight_color":"#ff6a6a","graph_highlight_on_hover":true,"graph_text_size":6,"graph_arrows":true,"node_size_method":"degree","node_size":10,"node_size_max":20,"node_size_min":2,"attraction_force":600,"attraction_distance_max":507,"attraction_vertical":0.36,"attraction_horizontal":0.36,"views":{},"record_metas":["date","description","cover","abbrlink","date","top_img"],"generate_id":"always","link_context":"tooltip","title":"半方池水半方田 - 文章关系图谱","author":"wuanqin","description":"只能懂一点点","keywords":["编程","博客","生活"],"link_symbol":"","csl":"","bibliography":"","csl_locale":"","css_custom":"","devtools":false,"lang":"en","name":""};
        const tagList = [{"name":"Navicat","nodes":["3237396916"]},{"name":"禅道","nodes":["3237396916"]},{"name":"嵌入式","nodes":["1813820909"]},{"name":"笔记","nodes":["1813820909"]},{"name":"多媒体","nodes":["1813820909"]},{"name":"MP3","nodes":["1813820909"]},{"name":"AVC","nodes":["1813820909"]},{"name":"010编辑器","nodes":["1813820909"]},{"name":"JPEG","nodes":["1813820909"]},{"name":"WAV","nodes":["1813820909"]},{"name":"AVI","nodes":["1813820909"]},{"name":"BMP","nodes":["1813820909"]},{"name":"DCT","nodes":["1813820909"]},{"name":"Kylin","nodes":["1433349372"]},{"name":"总结","nodes":["2592625103"]},{"name":"面试","nodes":["1973703782"]},{"name":"pyinstaller","nodes":["1126538397"]},{"name":"PyQt","nodes":["1126538397"]},{"name":"编译","nodes":["1126538397"]},{"name":"CSV","nodes":["2292934449"]},{"name":"lxml","nodes":["2292934449"]},{"name":"OLE","nodes":["2292934449"]},{"name":"Word","nodes":["2292934449"]},{"name":"XML","nodes":["2292934449"]},{"name":"subprocess","nodes":["3536932394"]},{"name":"CClose","nodes":["3273167773"]},{"name":"快捷键","nodes":["3273167773"]},{"name":"鼠标","nodes":["3273167773"]},{"name":"AutoHotKey","nodes":["3273167773"]},{"name":"Cosma","nodes":["4139834099"]},{"name":"script","nodes":["4139834099"]},{"name":"项目","nodes":["4139834099"]},{"name":"GitHub","nodes":["4139834099"]},{"name":"Pug","nodes":["90746120"]},{"name":"Epic","nodes":["657793374"]},{"name":"DLC","nodes":["657793374"]},{"name":"Mod","nodes":["657793374"]},{"name":"Steam","nodes":["657793374"]},{"name":"git","nodes":["1857161372"]},{"name":"Git","nodes":["1886753501"]},{"name":"Gitee","nodes":["1886753501"]},{"name":"cmd","nodes":["3569112562"]},{"name":"ButterFly","nodes":["681885666"]},{"name":"JMeter","nodes":["3569684170"]},{"name":"MAJOR","nodes":["1018322944"]},{"name":"WSL","nodes":["1018322944"]},{"name":"mujava","nodes":["4244887792"]},{"name":"Selenium","nodes":["2392872481"]},{"name":"SeleniumIDE","nodes":["2392872481"]},{"name":"右键管理","nodes":["1864583727"]},{"name":"软著","nodes":["1360801971"]},{"name":"AJAX","nodes":["2676514221"]},{"name":"Adobe Premiere Pro","nodes":["2052246699"]},{"name":"GIF","nodes":["2052246699"]},{"name":"WPS","nodes":["2052246699"]},{"name":"词云","nodes":["3910313174"]},{"name":"词频统计","nodes":["3910313174"]},{"name":"QQ","nodes":["1881411089"]},{"name":"QQ邮箱","nodes":["1881411089"]},{"name":"DNS","nodes":["2201181434"]},{"name":"HSTS","nodes":["2201181434"]},{"name":"HTTP","nodes":["2201181434"]},{"name":"吐槽","nodes":["1309833614"]},{"name":"jsdelivr","nodes":["2065118013"]},{"name":"画图","nodes":["1218172081"]},{"name":"Win10","nodes":["1218172081"]},{"name":"图像采集","nodes":["1218172081"]},{"name":"pace","nodes":["1308325830"]},{"name":"网站想法","nodes":["1735498523"]},{"name":"友链","nodes":["1735498523"]},{"name":"二十四节气","nodes":["1355609062"]},{"name":"日食","nodes":["1355609062"]},{"name":"学习","nodes":["1355609062"]},{"name":"Canva","nodes":["1355609062"]},{"name":"微信","nodes":["1355609062"]},{"name":"微信公众号","nodes":["1355609062"]},{"name":"php","nodes":["2958737902"]},{"name":"SDK","nodes":["2958737902"]},{"name":"开源","nodes":["3103663518"]},{"name":"ICP","nodes":["2346883624"]},{"name":"LAMP","nodes":["2346883624"]},{"name":"备案","nodes":["2346883624"]},{"name":"校园","nodes":["3607632637"]},{"name":"foldersync","nodes":["3437638411"]},{"name":"SyncThing","nodes":["3437638411"]},{"name":"OneDrive","nodes":["3437638411"]},{"name":"Android","nodes":["3437638411"]},{"name":"Harmony","nodes":["3437638411"]},{"name":"坚果云","nodes":["3437638411"]},{"name":"PlantUML","nodes":["4272386753"]},{"name":"Java","nodes":["4272386753"]},{"name":"jar","nodes":["4272386753"]},{"name":"Flask","nodes":["2737438580"]},{"name":"Vite","nodes":["2737438580"]},{"name":"Vue","nodes":["2737438580"]},{"name":"ElementPlus","nodes":["2737438580"]},{"name":"Clash","nodes":["346425435"]},{"name":"有线网","nodes":["346425435"]},{"name":"PPPoE","nodes":["346425435"]},{"name":"开发杂记","nodes":["3395837292"]},{"name":"绿植养护","nodes":["4028728107"]},{"name":"markdown-it","nodes":["127992739"]},{"name":"css","nodes":["127992739"]},{"name":"RSS","nodes":["1215492985"]},{"name":"iconfont","nodes":["1215492985"]},{"name":"CentOS","nodes":["2466246546"]},{"name":"php-gd","nodes":["2466246546"]},{"name":"PNG","nodes":["2466246546"]},{"name":"Bing","nodes":["4084230277"]},{"name":"WOL","nodes":["1042"]},{"name":"网卡","nodes":["1042"]},{"name":"设备管理器","nodes":["1042"]},{"name":"Eclemma","nodes":["3260727180"]},{"name":"Hamcrest","nodes":["3260727180"]},{"name":"IDEA","nodes":["3260727180"]},{"name":"考研","nodes":["3567162190"]},{"name":"暑假","nodes":["3567162190"]},{"name":"计算机","nodes":["3567162190"]},{"name":"文明6","nodes":["3567162190"]},{"name":"飞书","nodes":["3567162190"]},{"name":"Bilibili","nodes":["3567162190"]},{"name":"软件工程","nodes":["3567162190"]},{"name":"云盘","nodes":["3567162190"]},{"name":"日记","nodes":["3567162190"]},{"name":"效率","nodes":["3567162190"]},{"name":"SSH","nodes":["1129186507"]},{"name":"UA","nodes":["636905579"]},{"name":"BibTeX","nodes":["2226004458"]},{"name":"知网","nodes":["2226004458"]},{"name":"Greasy Fork","nodes":["2226004458"]},{"name":"USTC","nodes":["1813820909","3567162190"]},{"name":"Deb包","nodes":["1433349372","1126538397"]},{"name":"YAML","nodes":["4139834099","90746120"]},{"name":"CodePen","nodes":["152796589","90746120"]},{"name":"游戏","nodes":["657793374","3567162190"]},{"name":"Cities Skylines","nodes":["657793374","3567162190"]},{"name":"Node.js","nodes":["3569112562","2958737902"]},{"name":"GFM","nodes":["3569112562","1011516134"]},{"name":"OFM","nodes":["3569112562","1011516134"]},{"name":"Vercel","nodes":["1495212389","3709373237"]},{"name":"Apache","nodes":["1867823418","2555088146"]},{"name":"Eclipse","nodes":["4244887792","3260727180"]},{"name":"Junit","nodes":["4244887792","3260727180"]},{"name":"图床","nodes":["3992879191","377267818"]},{"name":"step-by-step","nodes":["3992879191","377267818"]},{"name":"SQLite","nodes":["2966071784","1215492985"]},{"name":"VSCode","nodes":["1864583727","2676514221"]},{"name":"注册表","nodes":["1864583727","1042"]},{"name":"PHP","nodes":["2653327377","2466246546"]},{"name":"WordPress","nodes":["2062987538","2958737902"]},{"name":"PPT","nodes":["2052246699","1355609062"]},{"name":"对象存储","nodes":["910498382","2958737902"]},{"name":"Edge","nodes":["1309833614","4084230277"]},{"name":"疫情","nodes":["1355609062","3567162190"]},{"name":"API","nodes":["2958737902","636905579"]},{"name":"Xmind","nodes":["3437638411","3567162190"]},{"name":"碎碎念","nodes":["3395837292","3567162190"]},{"name":"Codepen","nodes":["127992739","1215492985"]},{"name":"Javascript","nodes":["1215492985","2226004458"]},{"name":"Tampermonkey","nodes":["4084230277","2226004458"]},{"name":"IP","nodes":["1129186507","636905579"]},{"name":"MySQL","nodes":["3237396916","2737438580","713171771"]},{"name":"Github","nodes":["1886753501","3709373237","3103663518"]},{"name":"Nginx","nodes":["414962704","107080905","2201181434"]},{"name":"Hexo","nodes":["3569112562","2958737902","85495977"]},{"name":"JavaScript","nodes":["681885666","2676514221","2958737902"]},{"name":"HTTPS","nodes":["1867823418","2062987538","2201181434"]},{"name":"SSL","nodes":["1867823418","2062987538","2201181434"]},{"name":"源码案例驱动","nodes":["1011516134","2676514221","2737438580"]},{"name":"Typora","nodes":["1011516134","377267818","85495977"]},{"name":"COS","nodes":["3992879191","910498382","2958737902"]},{"name":"PicGo","nodes":["3992879191","377267818","910498382"]},{"name":"Windows","nodes":["1864583727","1218172081","346425435"]},{"name":"搬运","nodes":["1864583727","1780203637","713171771"]},{"name":"Obsidian","nodes":["4139834099","3569112562","3437638411","85495977"]},{"name":"npm","nodes":["4139834099","3569112562","127992739","1215492985"]},{"name":"Waline","nodes":["1495212389","3015602463","3709373237","1215492985"]},{"name":"阿里云","nodes":["2201181434","930915372","2346883624","1129186507"]},{"name":"TJU","nodes":["1355609062","4028728107","3567162190","2226004458"]},{"name":"HTML","nodes":["2292934449","4139834099","152796589","90746120","1215492985"]},{"name":"Markdown","nodes":["4139834099","3569112562","1011516134","85495977","127992739"]},{"name":"CDN","nodes":["1867823418","910498382","2201181434","2065118013","2958737902"]},{"name":"腾讯云","nodes":["1867823418","3992879191","910498382","2201181434","2958737902"]},{"name":"ECS","nodes":["107080905","930915372","2346883624","181570378","1129186507"]},{"name":"麒麟实训","nodes":["1433349372","2592625103","1973703782","1126538397","2292934449","3536932394"]},{"name":"安装","nodes":["3569684170","1018322944","4244887792","107080905","2392872481","3260727180"]},{"name":"Python","nodes":["1126538397","2292934449","3536932394","4139834099","2966071784","3910313174","2737438580"]},{"name":"实现","nodes":["2292934449","3536932394","3992879191","377267818","3910313174","1881411089","2346883624","3437638411"]},{"name":"Butterfly","nodes":["4139834099","90746120","414962704","3569112562","1495212389","2966071784","2065118013","1215492985"]},{"name":"CSS","nodes":["4139834099","4033695206","152796589","90746120","3569112562","3015602463","648224007","1215492985"]},{"name":"Linux","nodes":["3237396916","1433349372","1126538397","2292934449","3536932394","1867823418","107080905","2966071784","181570378"]},{"name":"问题解决","nodes":["1495212389","3569684170","2653327377","2497000883","3483842810","2555088146","1309833614","2466246546","1042","713171771","1129186507"]}];
        const typeList = {"undefined":{"nodes":["3237396916","1813820909","1433349372","1126538397","2292934449","3536932394","657793374","1857161372","1886753501","3569684170","1867823418","1018322944","4244887792","107080905","2392872481","2676514221","910498382","1881411089","2201181434","648224007","1218172081","238315581","3096264560","3538365946","3771188998","2737438580","346425435","4084230277","1042","3260727180","1129186507"],"active":true},"生活区":{"nodes":["2592625103","1973703782","1309833614","1735498523","1355609062","3607632637","3395837292","4028728107","3567162190"],"active":true},"核心协同":{"nodes":["3273167773","1011516134","3992879191","377267818","2958737902","3437638411","4272386753","85495977"],"active":true},"Hexo":{"nodes":["4139834099","4033695206","152796589","90746120","414962704","3569112562","1495212389","681885666","2966071784","3015602463","2065118013","1308325830","3709373237","127992739","1215492985","181570378","636905579"],"active":true},"工具箱":{"nodes":["3569684170","1018322944","4244887792","2392872481","1864583727","2052246699","3910313174","3103663518","3260727180","2226004458"],"active":true},"WordPress":{"nodes":["2653327377","2062987538","2497000883","1780203637","3483842810","2555088146","930915372","2466246546","713171771"],"active":true},"社会生活":{"nodes":["1360801971","2346883624"],"active":true},"Zone of archive":{"nodes":["910498382","1881411089","238315581","3096264560","3538365946","3771188998"],"active":true}};
        const timeline = {"begin":1598088810,"end":1700662224};
        const sorting = {"records":[{"alphabetical":25,"chronological":0},{"alphabetical":29,"chronological":1},{"alphabetical":32,"chronological":2},{"alphabetical":76,"chronological":3},{"alphabetical":71,"chronological":4},{"alphabetical":74,"chronological":5},{"alphabetical":77,"chronological":6},{"alphabetical":20,"chronological":7},{"alphabetical":38,"chronological":8},{"alphabetical":35,"chronological":9},{"alphabetical":27,"chronological":10},{"alphabetical":30,"chronological":11},{"alphabetical":45,"chronological":12},{"alphabetical":69,"chronological":13},{"alphabetical":14,"chronological":14},{"alphabetical":49,"chronological":15},{"alphabetical":21,"chronological":16},{"alphabetical":67,"chronological":17},{"alphabetical":31,"chronological":18},{"alphabetical":11,"chronological":19},{"alphabetical":80,"chronological":20},{"alphabetical":72,"chronological":21},{"alphabetical":75,"chronological":22},{"alphabetical":65,"chronological":23},{"alphabetical":79,"chronological":24},{"alphabetical":41,"chronological":25},{"alphabetical":0,"chronological":26},{"alphabetical":66,"chronological":27},{"alphabetical":78,"chronological":28},{"alphabetical":3,"chronological":29},{"alphabetical":7,"chronological":30},{"alphabetical":34,"chronological":31},{"alphabetical":39,"chronological":32},{"alphabetical":4,"chronological":33},{"alphabetical":5,"chronological":34},{"alphabetical":6,"chronological":35},{"alphabetical":2,"chronological":36},{"alphabetical":37,"chronological":37},{"alphabetical":70,"chronological":38},{"alphabetical":13,"chronological":39},{"alphabetical":28,"chronological":40},{"alphabetical":46,"chronological":41},{"alphabetical":63,"chronological":42},{"alphabetical":17,"chronological":43},{"alphabetical":22,"chronological":44},{"alphabetical":50,"chronological":45},{"alphabetical":64,"chronological":46},{"alphabetical":26,"chronological":47},{"alphabetical":40,"chronological":48},{"alphabetical":15,"chronological":49},{"alphabetical":24,"chronological":50},{"alphabetical":36,"chronological":51},{"alphabetical":33,"chronological":52},{"alphabetical":53,"chronological":53},{"alphabetical":60,"chronological":54},{"alphabetical":59,"chronological":55},{"alphabetical":18,"chronological":56},{"alphabetical":57,"chronological":57},{"alphabetical":68,"chronological":58},{"alphabetical":19,"chronological":59},{"alphabetical":51,"chronological":60},{"alphabetical":61,"chronological":61},{"alphabetical":56,"chronological":62},{"alphabetical":55,"chronological":63},{"alphabetical":43,"chronological":64},{"alphabetical":12,"chronological":65},{"alphabetical":62,"chronological":66},{"alphabetical":54,"chronological":67},{"alphabetical":73,"chronological":68},{"alphabetical":58,"chronological":69},{"alphabetical":48,"chronological":70},{"alphabetical":52,"chronological":71},{"alphabetical":47,"chronological":72},{"alphabetical":8,"chronological":73},{"alphabetical":9,"chronological":74},{"alphabetical":44,"chronological":75},{"alphabetical":16,"chronological":76},{"alphabetical":23,"chronological":77},{"alphabetical":42,"chronological":78},{"alphabetical":10,"chronological":79},{"alphabetical":1,"chronological":80}],"tags":[{"alphabetical":136,"digital":0},{"alphabetical":7,"digital":1},{"alphabetical":24,"digital":2},{"alphabetical":5,"digital":3},{"alphabetical":11,"digital":4},{"alphabetical":133,"digital":5},{"alphabetical":64,"digital":6},{"alphabetical":0,"digital":7},{"alphabetical":122,"digital":8},{"alphabetical":181,"digital":9},{"alphabetical":65,"digital":10},{"alphabetical":69,"digital":11},{"alphabetical":86,"digital":12},{"alphabetical":125,"digital":13},{"alphabetical":57,"digital":14},{"alphabetical":22,"digital":15},{"alphabetical":154,"digital":16},{"alphabetical":155,"digital":17},{"alphabetical":6,"digital":18},{"alphabetical":85,"digital":19},{"alphabetical":128,"digital":20},{"alphabetical":142,"digital":21},{"alphabetical":185,"digital":22},{"alphabetical":190,"digital":23},{"alphabetical":169,"digital":24},{"alphabetical":73,"digital":25},{"alphabetical":20,"digital":26},{"alphabetical":32,"digital":27},{"alphabetical":63,"digital":28},{"alphabetical":82,"digital":29},{"alphabetical":160,"digital":30},{"alphabetical":44,"digital":31},{"alphabetical":104,"digital":32},{"alphabetical":153,"digital":33},{"alphabetical":95,"digital":34},{"alphabetical":88,"digital":35},{"alphabetical":132,"digital":36},{"alphabetical":167,"digital":37},{"alphabetical":100,"digital":38},{"alphabetical":101,"digital":39},{"alphabetical":102,"digital":40},{"alphabetical":78,"digital":41},{"alphabetical":71,"digital":42},{"alphabetical":121,"digital":43},{"alphabetical":129,"digital":44},{"alphabetical":188,"digital":45},{"alphabetical":134,"digital":46},{"alphabetical":162,"digital":47},{"alphabetical":163,"digital":48},{"alphabetical":52,"digital":49},{"alphabetical":28,"digital":50},{"alphabetical":59,"digital":51},{"alphabetical":58,"digital":52},{"alphabetical":99,"digital":53},{"alphabetical":187,"digital":54},{"alphabetical":9,"digital":55},{"alphabetical":8,"digital":56},{"alphabetical":157,"digital":57},{"alphabetical":158,"digital":58},{"alphabetical":89,"digital":59},{"alphabetical":109,"digital":60},{"alphabetical":111,"digital":61},{"alphabetical":37,"digital":62},{"alphabetical":123,"digital":63},{"alphabetical":14,"digital":64},{"alphabetical":182,"digital":65},{"alphabetical":36,"digital":66},{"alphabetical":144,"digital":67},{"alphabetical":39,"digital":68},{"alphabetical":50,"digital":69},{"alphabetical":12,"digital":70},{"alphabetical":26,"digital":71},{"alphabetical":47,"digital":72},{"alphabetical":72,"digital":73},{"alphabetical":40,"digital":74},{"alphabetical":41,"digital":75},{"alphabetical":145,"digital":76},{"alphabetical":161,"digital":77},{"alphabetical":18,"digital":78},{"alphabetical":114,"digital":79},{"alphabetical":126,"digital":80},{"alphabetical":4,"digital":81},{"alphabetical":46,"digital":82},{"alphabetical":97,"digital":83},{"alphabetical":170,"digital":84},{"alphabetical":143,"digital":85},{"alphabetical":60,"digital":86},{"alphabetical":107,"digital":87},{"alphabetical":16,"digital":88},{"alphabetical":149,"digital":89},{"alphabetical":118,"digital":90},{"alphabetical":117,"digital":91},{"alphabetical":96,"digital":92},{"alphabetical":177,"digital":93},{"alphabetical":179,"digital":94},{"alphabetical":94,"digital":95},{"alphabetical":77,"digital":96},{"alphabetical":51,"digital":97},{"alphabetical":151,"digital":98},{"alphabetical":17,"digital":99},{"alphabetical":21,"digital":100},{"alphabetical":131,"digital":101},{"alphabetical":83,"digital":102},{"alphabetical":159,"digital":103},{"alphabetical":113,"digital":104},{"alphabetical":75,"digital":105},{"alphabetical":147,"digital":106},{"alphabetical":150,"digital":107},{"alphabetical":68,"digital":108},{"alphabetical":184,"digital":109},{"alphabetical":38,"digital":110},{"alphabetical":29,"digital":111},{"alphabetical":90,"digital":112},{"alphabetical":106,"digital":113},{"alphabetical":115,"digital":114},{"alphabetical":19,"digital":115},{"alphabetical":31,"digital":116},{"alphabetical":15,"digital":117},{"alphabetical":42,"digital":118},{"alphabetical":13,"digital":119},{"alphabetical":67,"digital":120},{"alphabetical":27,"digital":121},{"alphabetical":54,"digital":122},{"alphabetical":25,"digital":123},{"alphabetical":45,"digital":124},{"alphabetical":165,"digital":125},{"alphabetical":174,"digital":126},{"alphabetical":66,"digital":127},{"alphabetical":55,"digital":128},{"alphabetical":105,"digital":129},{"alphabetical":175,"digital":130},{"alphabetical":87,"digital":131},{"alphabetical":191,"digital":132},{"alphabetical":80,"digital":133},{"alphabetical":49,"digital":134},{"alphabetical":76,"digital":135},{"alphabetical":138,"digital":136},{"alphabetical":98,"digital":137},{"alphabetical":141,"digital":138},{"alphabetical":176,"digital":139},{"alphabetical":61,"digital":140},{"alphabetical":91,"digital":141},{"alphabetical":124,"digital":142},{"alphabetical":35,"digital":143},{"alphabetical":168,"digital":144},{"alphabetical":164,"digital":145},{"alphabetical":178,"digital":146},{"alphabetical":56,"digital":147},{"alphabetical":146,"digital":148},{"alphabetical":186,"digital":149},{"alphabetical":152,"digital":150},{"alphabetical":10,"digital":151},{"alphabetical":93,"digital":152},{"alphabetical":48,"digital":153},{"alphabetical":62,"digital":154},{"alphabetical":189,"digital":155},{"alphabetical":33,"digital":156},{"alphabetical":79,"digital":157},{"alphabetical":119,"digital":158},{"alphabetical":171,"digital":159},{"alphabetical":116,"digital":160},{"alphabetical":135,"digital":161},{"alphabetical":103,"digital":162},{"alphabetical":137,"digital":163},{"alphabetical":108,"digital":164},{"alphabetical":120,"digital":165},{"alphabetical":112,"digital":166},{"alphabetical":166,"digital":167},{"alphabetical":53,"digital":168},{"alphabetical":173,"digital":169},{"alphabetical":81,"digital":170},{"alphabetical":148,"digital":171},{"alphabetical":183,"digital":172},{"alphabetical":3,"digital":173},{"alphabetical":140,"digital":174},{"alphabetical":139,"digital":175},{"alphabetical":180,"digital":176},{"alphabetical":1,"digital":177},{"alphabetical":172,"digital":178},{"alphabetical":110,"digital":179},{"alphabetical":130,"digital":180},{"alphabetical":74,"digital":181},{"alphabetical":34,"digital":182},{"alphabetical":92,"digital":183},{"alphabetical":23,"digital":184},{"alphabetical":2,"digital":185},{"alphabetical":156,"digital":186},{"alphabetical":30,"digital":187},{"alphabetical":70,"digital":188},{"alphabetical":84,"digital":189},{"alphabetical":127,"digital":190},{"alphabetical":43,"digital":191}]};

        const focusIsActive = true;
    </script>

    

    
    <script>
        /*! For license information please see bundle.js.LICENSE.txt */
(()=>{var t={838:()=>{window.addEventListener("DOMContentLoaded",(function(){var t=document.getElementById("citation-references"),e=null==t?void 0:t.querySelector("button"),n=null==t?void 0:t.querySelector("code");e&&e.addEventListener("click",(function(){var t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(n.textContent)),t.setAttribute("download","bibliography.json"),t.style.display="none",document.body.appendChild(t),t.click(),t.remove()}))}))},187:t=>{"use strict";var e,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};e=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var i=Number.isNaN||function(t){return t!=t};function o(){o.init.call(this)}t.exports=o,t.exports.once=function(t,e){return new Promise((function(n,r){function i(n){t.removeListener(e,o),r(n)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",i),n([].slice.call(arguments))}y(t,e,o,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&y(t,"error",e,{once:!0})}(t,i)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var a=10;function s(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function u(t){return void 0===t._maxListeners?o.defaultMaxListeners:t._maxListeners}function c(t,e,n,r){var i,o,a,c;if(s(n),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),a=o[e]),void 0===a)a=o[e]=n,++t._eventsCount;else if("function"==typeof a?a=o[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=u(t))>0&&a.length>i&&!a.warned){a.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=t,h.type=e,h.count=a.length,c=h,console&&console.warn&&console.warn(c)}return t}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=h.bind(r);return i.listener=n,r.wrapFn=i,i}function l(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):p(i,i.length)}function d(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function y(t,e,n,r){if("function"==typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(o){r.once&&t.removeEventListener(e,i),n(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");a=t}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i="error"===t,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=o[t];if(void 0===u)return!1;if("function"==typeof u)r(u,this,e);else{var c=u.length,h=p(u,c);for(n=0;n<c;++n)r(h[n],this,e)}return!0},o.prototype.addListener=function(t,e){return c(this,t,e,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(t,e){return c(this,t,e,!0)},o.prototype.once=function(t,e){return s(e),this.on(t,f(this,t,e)),this},o.prototype.prependOnceListener=function(t,e){return s(e),this.prependListener(t,f(this,t,e)),this},o.prototype.removeListener=function(t,e){var n,r,i,o,a;if(s(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,a||e)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},o.prototype.listeners=function(t){return l(this,t,!0)},o.prototype.rawListeners=function(t){return l(this,t,!1)},o.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):d.call(t,e)},o.prototype.listenerCount=d,o.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},691:function(t){t.exports=function(){"use strict";function t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function e(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?t(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t){return Array.isArray?Array.isArray(t):"[object Array]"===m(t)}var h=1/0;function f(t){return null==t?"":function(t){if("string"==typeof t)return t;var e=t+"";return"0"==e&&1/t==-h?"-0":e}(t)}function l(t){return"string"==typeof t}function d(t){return"number"==typeof t}function p(t){return!0===t||!1===t||function(t){return y(t)&&null!==t}(t)&&"[object Boolean]"==m(t)}function y(t){return"object"===n(t)}function g(t){return null!=t}function v(t){return!t.trim().length}function m(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}var _=function(t){return"Missing ".concat(t," property in key")},b=function(t){return"Property 'weight' in key '".concat(t,"' must be a positive integer")},w=Object.prototype.hasOwnProperty,x=function(){function t(e){var n=this;r(this,t),this._keys=[],this._keyMap={};var i=0;e.forEach((function(t){var e=k(t);i+=e.weight,n._keys.push(e),n._keyMap[e.id]=e,i+=e.weight})),this._keys.forEach((function(t){t.weight/=i}))}return o(t,[{key:"get",value:function(t){return this._keyMap[t]}},{key:"keys",value:function(){return this._keys}},{key:"toJSON",value:function(){return JSON.stringify(this._keys)}}]),t}();function k(t){var e=null,n=null,r=null,i=1,o=null;if(l(t)||c(t))r=t,e=M(t),n=E(t);else{if(!w.call(t,"name"))throw new Error(_("name"));var a=t.name;if(r=a,w.call(t,"weight")&&(i=t.weight)<=0)throw new Error(b(a));e=M(a),n=E(a),o=t.getFn}return{path:e,id:n,weight:i,src:r,getFn:o}}function M(t){return c(t)?t:t.split(".")}function E(t){return c(t)?t.join("."):t}var A={useExtendedSearch:!1,getFn:function(t,e){var n=[],r=!1;return function t(e,i,o){if(g(e))if(i[o]){var a=e[i[o]];if(!g(a))return;if(o===i.length-1&&(l(a)||d(a)||p(a)))n.push(f(a));else if(c(a)){r=!0;for(var s=0,u=a.length;s<u;s+=1)t(a[s],i,o+1)}else i.length&&t(a,i,o+1)}else n.push(e)}(t,l(e)?e.split("."):e,0),r?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1},S=e(e(e(e({},{isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:function(t,e){return t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1}}),{includeMatches:!1,findAllMatches:!1,minMatchCharLength:1}),{location:0,threshold:.6,distance:100}),A),L=/[^ ]+/g;var N=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.getFn,i=void 0===n?S.getFn:n,o=e.fieldNormWeight,a=void 0===o?S.fieldNormWeight:o;r(this,t),this.norm=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=new Map,r=Math.pow(10,e);return{get:function(e){var i=e.match(L).length;if(n.has(i))return n.get(i);var o=1/Math.pow(i,.5*t),a=parseFloat(Math.round(o*r)/r);return n.set(i,a),a},clear:function(){n.clear()}}}(a,3),this.getFn=i,this.isCreated=!1,this.setIndexRecords()}return o(t,[{key:"setSources",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.docs=t}},{key:"setIndexRecords",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.records=t}},{key:"setKeys",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.keys=e,this._keysMap={},e.forEach((function(e,n){t._keysMap[e.id]=n}))}},{key:"create",value:function(){var t=this;!this.isCreated&&this.docs.length&&(this.isCreated=!0,l(this.docs[0])?this.docs.forEach((function(e,n){t._addString(e,n)})):this.docs.forEach((function(e,n){t._addObject(e,n)})),this.norm.clear())}},{key:"add",value:function(t){var e=this.size();l(t)?this._addString(t,e):this._addObject(t,e)}},{key:"removeAt",value:function(t){this.records.splice(t,1);for(var e=t,n=this.size();e<n;e+=1)this.records[e].i-=1}},{key:"getValueForItemAtKeyId",value:function(t,e){return t[this._keysMap[e]]}},{key:"size",value:function(){return this.records.length}},{key:"_addString",value:function(t,e){if(g(t)&&!v(t)){var n={v:t,i:e,n:this.norm.get(t)};this.records.push(n)}}},{key:"_addObject",value:function(t,e){var n=this,r={i:e,$:{}};this.keys.forEach((function(e,i){var o=e.getFn?e.getFn(t):n.getFn(t,e.path);if(g(o))if(c(o))!function(){for(var t=[],e=[{nestedArrIndex:-1,value:o}];e.length;){var a=e.pop(),s=a.nestedArrIndex,u=a.value;if(g(u))if(l(u)&&!v(u)){var h={v:u,i:s,n:n.norm.get(u)};t.push(h)}else c(u)&&u.forEach((function(t,n){e.push({nestedArrIndex:n,value:t})}))}r.$[i]=t}();else if(l(o)&&!v(o)){var a={v:o,n:n.norm.get(o)};r.$[i]=a}})),this.records.push(r)}},{key:"toJSON",value:function(){return{keys:this.keys,records:this.records}}}]),t}();function $(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.getFn,i=void 0===r?S.getFn:r,o=n.fieldNormWeight,a=void 0===o?S.fieldNormWeight:o,s=new N({getFn:i,fieldNormWeight:a});return s.setKeys(t.map(k)),s.setSources(e),s.create(),s}function C(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.errors,r=void 0===n?0:n,i=e.currentLocation,o=void 0===i?0:i,a=e.expectedLocation,s=void 0===a?0:a,u=e.distance,c=void 0===u?S.distance:u,h=e.ignoreLocation,f=void 0===h?S.ignoreLocation:h,l=r/t.length;if(f)return l;var d=Math.abs(s-o);return c?l+d/c:d?1:l}var T=32;function G(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.location,o=void 0===i?S.location:i,a=r.distance,s=void 0===a?S.distance:a,u=r.threshold,c=void 0===u?S.threshold:u,h=r.findAllMatches,f=void 0===h?S.findAllMatches:h,l=r.minMatchCharLength,d=void 0===l?S.minMatchCharLength:l,p=r.includeMatches,y=void 0===p?S.includeMatches:p,g=r.ignoreLocation,v=void 0===g?S.ignoreLocation:g;if(e.length>T)throw new Error("Pattern length exceeds max of ".concat(T,"."));for(var m,_=e.length,b=t.length,w=Math.max(0,Math.min(o,b)),x=c,k=w,M=d>1||y,E=M?Array(b):[];(m=t.indexOf(e,k))>-1;){var A=C(e,{currentLocation:m,expectedLocation:w,distance:s,ignoreLocation:v});if(x=Math.min(A,x),k=m+_,M)for(var L=0;L<_;)E[m+L]=1,L+=1}k=-1;for(var N=[],$=1,G=_+b,U=1<<_-1,D=0;D<_;D+=1){for(var O=0,z=G;O<z;)C(e,{errors:D,currentLocation:w+z,expectedLocation:w,distance:s,ignoreLocation:v})<=x?O=z:G=z,z=Math.floor((G-O)/2+O);G=z;var j=Math.max(1,w-z+1),P=f?b:Math.min(w+z,b)+_,I=Array(P+2);I[P+1]=(1<<D)-1;for(var R=P;R>=j;R-=1){var F=R-1,q=n[t.charAt(F)];if(M&&(E[F]=+!!q),I[R]=(I[R+1]<<1|1)&q,D&&(I[R]|=(N[R+1]|N[R])<<1|1|N[R+1]),I[R]&U&&($=C(e,{errors:D,currentLocation:F,expectedLocation:w,distance:s,ignoreLocation:v}))<=x){if(x=$,(k=F)<=w)break;j=Math.max(1,2*w-k)}}if(C(e,{errors:D+1,currentLocation:w,expectedLocation:w,distance:s,ignoreLocation:v})>x)break;N=I}var Y={isMatch:k>=0,score:Math.max(.001,$)};if(M){var B=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S.minMatchCharLength,n=[],r=-1,i=-1,o=0,a=t.length;o<a;o+=1){var s=t[o];s&&-1===r?r=o:s||-1===r||((i=o-1)-r+1>=e&&n.push([r,i]),r=-1)}return t[o-1]&&o-r>=e&&n.push([r,o-1]),n}(E,d);B.length?y&&(Y.indices=B):Y.isMatch=!1}return Y}function U(t){for(var e={},n=0,r=t.length;n<r;n+=1){var i=t.charAt(n);e[i]=(e[i]||0)|1<<r-n-1}return e}var D=function(){function t(e){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.location,a=void 0===o?S.location:o,s=i.threshold,u=void 0===s?S.threshold:s,c=i.distance,h=void 0===c?S.distance:c,f=i.includeMatches,l=void 0===f?S.includeMatches:f,d=i.findAllMatches,p=void 0===d?S.findAllMatches:d,y=i.minMatchCharLength,g=void 0===y?S.minMatchCharLength:y,v=i.isCaseSensitive,m=void 0===v?S.isCaseSensitive:v,_=i.ignoreLocation,b=void 0===_?S.ignoreLocation:_;if(r(this,t),this.options={location:a,threshold:u,distance:h,includeMatches:l,findAllMatches:p,minMatchCharLength:g,isCaseSensitive:m,ignoreLocation:b},this.pattern=m?e:e.toLowerCase(),this.chunks=[],this.pattern.length){var w=function(t,e){n.chunks.push({pattern:t,alphabet:U(t),startIndex:e})},x=this.pattern.length;if(x>T){for(var k=0,M=x%T,E=x-M;k<E;)w(this.pattern.substr(k,T),k),k+=T;if(M){var A=x-T;w(this.pattern.substr(A),A)}}else w(this.pattern,0)}}return o(t,[{key:"searchIn",value:function(t){var e=this.options,n=e.isCaseSensitive,r=e.includeMatches;if(n||(t=t.toLowerCase()),this.pattern===t){var i={isMatch:!0,score:0};return r&&(i.indices=[[0,t.length-1]]),i}var o=this.options,a=o.location,u=o.distance,c=o.threshold,h=o.findAllMatches,f=o.minMatchCharLength,l=o.ignoreLocation,d=[],p=0,y=!1;this.chunks.forEach((function(e){var n=e.pattern,i=e.alphabet,o=e.startIndex,g=G(t,n,i,{location:a+o,distance:u,threshold:c,findAllMatches:h,minMatchCharLength:f,includeMatches:r,ignoreLocation:l}),v=g.isMatch,m=g.score,_=g.indices;v&&(y=!0),p+=m,v&&_&&(d=[].concat(s(d),s(_)))}));var g={isMatch:y,score:y?p/this.chunks.length:1};return y&&r&&(g.indices=d),g}}]),t}(),O=[];function z(t,e){for(var n=0,r=O.length;n<r;n+=1){var i=O[n];if(i.condition(t,e))return new i(t,e)}return new D(t,e)}var j="$and",P="$or",I="$path",R="$val",F=function(t){return!(!t[j]&&!t[P])},q=function(t){return a({},j,Object.keys(t).map((function(e){return a({},e,t[e])})))};function Y(t,e){var n=t.matches;e.matches=[],g(n)&&n.forEach((function(t){if(g(t.indices)&&t.indices.length){var n={indices:t.indices,value:t.value};t.key&&(n.key=t.key.src),t.idx>-1&&(n.refIndex=t.idx),e.matches.push(n)}}))}function B(t,e){e.score=t.score}var W=function(){function t(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;if(r(this,t),this.options=e(e({},S),i),this.options.useExtendedSearch)throw new Error("Extended search is not available");this._keyStore=new x(this.options.keys),this.setCollection(n,o)}return o(t,[{key:"setCollection",value:function(t,e){if(this._docs=t,e&&!(e instanceof N))throw new Error("Incorrect 'index' type");this._myIndex=e||$(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}},{key:"add",value:function(t){g(t)&&(this._docs.push(t),this._myIndex.add(t))}},{key:"remove",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return!1},e=[],n=0,r=this._docs.length;n<r;n+=1){var i=this._docs[n];t(i,n)&&(this.removeAt(n),n-=1,r-=1,e.push(i))}return e}},{key:"removeAt",value:function(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}},{key:"getIndex",value:function(){return this._myIndex}},{key:"search",value:function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).limit,n=void 0===e?-1:e,r=this.options,i=r.includeMatches,o=r.includeScore,a=r.shouldSort,s=r.sortFn,u=r.ignoreFieldNorm,c=l(t)?l(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return function(t,e){var n=e.ignoreFieldNorm,r=void 0===n?S.ignoreFieldNorm:n;t.forEach((function(t){var e=1;t.matches.forEach((function(t){var n=t.key,i=t.norm,o=t.score,a=n?n.weight:null;e*=Math.pow(0===o&&a?Number.EPSILON:o,(a||1)*(r?1:i))})),t.score=e}))}(c,{ignoreFieldNorm:u}),a&&c.sort(s),d(n)&&n>-1&&(c=c.slice(0,n)),function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.includeMatches,i=void 0===r?S.includeMatches:r,o=n.includeScore,a=void 0===o?S.includeScore:o,s=[];return i&&s.push(Y),a&&s.push(B),t.map((function(t){var n=t.idx,r={item:e[n],refIndex:n};return s.length&&s.forEach((function(e){e(t,r)})),r}))}(c,this._docs,{includeMatches:i,includeScore:o})}},{key:"_searchStringList",value:function(t){var e=z(t,this.options),n=this._myIndex.records,r=[];return n.forEach((function(t){var n=t.v,i=t.i,o=t.n;if(g(n)){var a=e.searchIn(n),s=a.isMatch,u=a.score,c=a.indices;s&&r.push({item:n,idx:i,matches:[{score:u,value:n,norm:o,indices:c}]})}})),r}},{key:"_searchLogical",value:function(t){throw new Error("Logical search is not available")}},{key:"_searchObjectList",value:function(t){var e=this,n=z(t,this.options),r=this._myIndex,i=r.keys,o=r.records,a=[];return o.forEach((function(t){var r=t.$,o=t.i;if(g(r)){var u=[];i.forEach((function(t,i){u.push.apply(u,s(e._findMatches({key:t,value:r[i],searcher:n})))})),u.length&&a.push({idx:o,item:r,matches:u})}})),a}},{key:"_findMatches",value:function(t){var e=t.key,n=t.value,r=t.searcher;if(!g(n))return[];var i=[];if(c(n))n.forEach((function(t){var n=t.v,o=t.i,a=t.n;if(g(n)){var s=r.searchIn(n),u=s.isMatch,c=s.score,h=s.indices;u&&i.push({score:c,key:e,value:n,idx:o,norm:a,indices:h})}}));else{var o=n.v,a=n.n,s=r.searchIn(o),u=s.isMatch,h=s.score,f=s.indices;u&&i.push({score:h,key:e,value:o,norm:a,indices:f})}return i}}]),t}();return W.version="6.6.2",W.createIndex=$,W.parseIndex=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.getFn,r=void 0===n?S.getFn:n,i=e.fieldNormWeight,o=void 0===i?S.fieldNormWeight:i,a=t.keys,s=t.records,u=new N({getFn:r,fieldNormWeight:o});return u.setKeys(a),u.setIndexRecords(s),u},W.config=S,W.parseQuery=function(t,e){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).auto,r=void 0===n||n;return F(t)||(t=q(t)),function t(n){var i=Object.keys(n),o=function(t){return!!t[I]}(n);if(!o&&i.length>1&&!F(n))return t(q(n));if(function(t){return!c(t)&&y(t)&&!F(t)}(n)){var a=o?n[I]:i[0],s=o?n[R]:n[a];if(!l(s))throw new Error(function(t){return"Invalid value for key ".concat(t)}(a));var u={keyId:E(a),pattern:s};return r&&(u.searcher=z(s,e)),u}var h={children:[],operator:i[0]};return i.forEach((function(e){var r=n[e];c(r)&&r.forEach((function(e){h.children.push(t(e))}))})),h}(t)},W}()},12:(t,e,n)=>{var r=n(453);function i(t){this.graph=t,this.queue=new r(Array,t.order),this.seen=new Set,this.size=0}i.prototype.hasAlreadySeenEverything=function(){return this.seen.size===this.graph.order},i.prototype.countUnseenNodes=function(){return this.graph.order-this.seen.size},i.prototype.forEachNodeYetUnseen=function(t){var e=this.seen,n=this.graph;n.someNode((function(r,i){return e.size===n.order||!e.has(r)&&!!t(r,i)}))},i.prototype.has=function(t){return this.seen.has(t)},i.prototype.push=function(t){var e=this.seen.size;return this.seen.add(t),e!==this.seen.size&&(this.queue.push(t),this.size++,!0)},i.prototype.pushWith=function(t,e){var n=this.seen.size;return this.seen.add(t),n!==this.seen.size&&(this.queue.push(e),this.size++,!0)},i.prototype.shift=function(){var t=this.queue.shift();return this.size=this.queue.size,t},t.exports=i},181:(t,e,n)=>{var r=n(186),i=n(12),o=n(480),a=o.TraversalRecord,s=o.capitalize;e.a=function(t,e,n,o){if(o=o||{},!r(t))throw new Error("graphology-traversal/bfs: expecting a graphology instance.");if("function"!=typeof n)throw new Error("graphology-traversal/bfs: given callback is not a function.");if(0!==t.order){var u,c=new i(t),h=t["forEach"+s(o.mode||"outbound")+"Neighbor"].bind(t);(null===e?c.forEachNodeYetUnseen.bind(c):function(n){n(e=""+e,t.getNodeAttributes(e))})((function(t,e){for(c.pushWith(t,new a(t,e,0));0!==c.size;)u=c.shift(),!0!==n(u.node,u.attributes,u.depth)&&h(u.node,f)}))}function f(t,e){c.pushWith(t,new a(t,e,u.depth+1))}}},480:(t,e)=>{e.TraversalRecord=function(t,e,n){this.node=t,this.attributes=e,this.depth=n},e.capitalize=function(t){return t[0].toUpperCase()+t.slice(1)}},186:t=>{t.exports=function(t){return null!==t&&"object"==typeof t&&"function"==typeof t.addUndirectedEdgeWithKey&&"function"==typeof t.dropNode&&"boolean"==typeof t.multi}},453:(t,e,n)=>{var r=n(650),i=n(993);function o(t,e){if(arguments.length<2)throw new Error("mnemonist/fixed-deque: expecting an Array class and a capacity.");if("number"!=typeof e||e<=0)throw new Error("mnemonist/fixed-deque: `capacity` should be a positive number.");this.ArrayClass=t,this.capacity=e,this.items=new t(this.capacity),this.clear()}o.prototype.clear=function(){this.start=0,this.size=0},o.prototype.push=function(t){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.push: deque capacity ("+this.capacity+") exceeded!");var e=(this.start+this.size)%this.capacity;return this.items[e]=t,++this.size},o.prototype.unshift=function(t){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.unshift: deque capacity ("+this.capacity+") exceeded!");var e=this.start-1;return 0===this.start&&(e=this.capacity-1),this.items[e]=t,this.start=e,++this.size},o.prototype.pop=function(){if(0===this.size)return;const t=(this.start+this.size-1)%this.capacity;return this.size--,this.items[t]},o.prototype.shift=function(){if(0!==this.size){var t=this.start;return this.size--,this.start++,this.start===this.capacity&&(this.start=0),this.items[t]}},o.prototype.peekFirst=function(){if(0!==this.size)return this.items[this.start]},o.prototype.peekLast=function(){if(0!==this.size){var t=this.start+this.size-1;return t>this.capacity&&(t-=this.capacity),this.items[t]}},o.prototype.get=function(t){if(0!==this.size)return(t=this.start+t)>this.capacity&&(t-=this.capacity),this.items[t]},o.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var n=this.capacity,r=this.size,i=this.start,o=0;o<r;)t.call(e,this.items[i],o,this),o++,++i===n&&(i=0)},o.prototype.toArray=function(){var t=this.start+this.size;if(t<this.capacity)return this.items.slice(this.start,t);for(var e=new this.ArrayClass(this.size),n=this.capacity,r=this.size,i=this.start,o=0;o<r;)e[o]=this.items[i],o++,++i===n&&(i=0);return e},o.prototype.values=function(){var t=this.items,e=this.capacity,n=this.size,r=this.start,o=0;return new i((function(){if(o>=n)return{done:!0};var i=t[r];return r++,o++,r===e&&(r=0),{value:i,done:!1}}))},o.prototype.entries=function(){var t=this.items,e=this.capacity,n=this.size,r=this.start,o=0;return new i((function(){if(o>=n)return{done:!0};var i=t[r];return++r===e&&(r=0),{value:[o++,i],done:!1}}))},"undefined"!=typeof Symbol&&(o.prototype[Symbol.iterator]=o.prototype.values),o.prototype.inspect=function(){var t=this.toArray();return t.type=this.ArrayClass.name,t.capacity=this.capacity,Object.defineProperty(t,"constructor",{value:o,enumerable:!1}),t},"undefined"!=typeof Symbol&&(o.prototype[Symbol.for("nodejs.util.inspect.custom")]=o.prototype.inspect),o.from=function(t,e,n){if(arguments.length<3&&"number"!=typeof(n=r.guessLength(t)))throw new Error("mnemonist/fixed-deque.from: could not guess iterable length. Please provide desired capacity as last argument.");var i=new o(e,n);if(r.isArrayLike(t)){var a,s;for(a=0,s=t.length;a<s;a++)i.items[a]=t[a];return i.size=s,i}return r.forEach(t,(function(t){i.push(t)})),i},t.exports=o},650:(t,e,n)=>{var r=n(113),i=n(801);function o(t){return"number"==typeof t.length?t.length:"number"==typeof t.size?t.size:void 0}e.isArrayLike=function(t){return Array.isArray(t)||i.isTypedArray(t)},e.guessLength=o,e.toArray=function(t){var e=o(t),n="number"==typeof e?new Array(e):[],i=0;return r(t,(function(t){n[i++]=t})),n},e.toArrayWithIndices=function(t){var e=o(t),n="number"==typeof e?i.getPointerArray(e):Array,a="number"==typeof e?new Array(e):[],s="number"==typeof e?new n(e):[],u=0;return r(t,(function(t){a[u]=t,s[u]=u++})),[a,s]}},801:(t,e)=>{var n=Math.pow(2,8)-1,r=Math.pow(2,16)-1,i=Math.pow(2,32)-1,o=Math.pow(2,7)-1,a=Math.pow(2,15)-1,s=Math.pow(2,31)-1;e.getPointerArray=function(t){var e=t-1;if(e<=n)return Uint8Array;if(e<=r)return Uint16Array;if(e<=i)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")},e.getSignedPointerArray=function(t){var e=t-1;return e<=o?Int8Array:e<=a?Int16Array:e<=s?Int32Array:Float64Array},e.getNumberType=function(t){return t===(0|t)?-1===Math.sign(t)?t<=127&&t>=-128?Int8Array:t<=32767&&t>=-32768?Int16Array:Int32Array:t<=255?Uint8Array:t<=65535?Uint16Array:Uint32Array:Float64Array};var u={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};e.getMinimalRepresentation=function(t,n){var r,i,o,a,s,c=null,h=0;for(a=0,s=t.length;a<s;a++)o=n?n(t[a]):t[a],i=e.getNumberType(o),(r=u[i.name])>h&&(h=r,c=i);return c},e.isTypedArray=function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView(t)},e.concat=function(){var t,e,n,r=0;for(t=0,n=arguments.length;t<n;t++)r+=arguments[t].length;var i=new arguments[0].constructor(r);for(t=0,e=0;t<n;t++)i.set(arguments[t],e),e+=arguments[t].length;return i},e.indices=function(t){for(var n=new(e.getPointerArray(t))(t),r=0;r<t;r++)n[r]=r;return n}},11:(t,e,n)=>{var r=n(993),i=n(346);t.exports=function(){var t=arguments,e=null,n=-1;return new r((function(){for(var r=null;;){if(null===e){if(++n>=t.length)return{done:!0};e=i(t[n])}if(!0!==(r=e.next()).done)break;e=null}return r}))}},113:(t,e,n)=>{var r=n(844),i=r.ARRAY_BUFFER_SUPPORT,o=r.SYMBOL_SUPPORT;t.exports=function(t,e){var n,r,a,s,u;if(!t)throw new Error("obliterator/forEach: invalid iterable.");if("function"!=typeof e)throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(t)||i&&ArrayBuffer.isView(t)||"string"==typeof t||"[object Arguments]"===t.toString())for(a=0,s=t.length;a<s;a++)e(t[a],a);else if("function"!=typeof t.forEach)if(o&&Symbol.iterator in t&&"function"!=typeof t.next&&(t=t[Symbol.iterator]()),"function"!=typeof t.next)for(r in t)t.hasOwnProperty(r)&&e(t[r],r);else for(n=t,a=0;!0!==(u=n.next()).done;)e(u.value,a),a++;else t.forEach(e)}},346:(t,e,n)=>{var r=n(993),i=n(844),o=i.ARRAY_BUFFER_SUPPORT,a=i.SYMBOL_SUPPORT;t.exports=function(t){var e=function(t){return"string"==typeof t||Array.isArray(t)||o&&ArrayBuffer.isView(t)?r.fromSequence(t):"object"!=typeof t||null===t?null:a&&"function"==typeof t[Symbol.iterator]?t[Symbol.iterator]():"function"==typeof t.next?t:null}(t);if(!e)throw new Error("obliterator: target is not iterable nor a valid iterator.");return e}},993:t=>{function e(t){if("function"!=typeof t)throw new Error("obliterator/iterator: expecting a function!");this.next=t}"undefined"!=typeof Symbol&&(e.prototype[Symbol.iterator]=function(){return this}),e.of=function(){var t=arguments,n=t.length,r=0;return new e((function(){return r>=n?{done:!0}:{done:!1,value:t[r++]}}))},e.empty=function(){return new e((function(){return{done:!0}}))},e.fromSequence=function(t){var n=0,r=t.length;return new e((function(){return n>=r?{done:!0}:{done:!1,value:t[n++]}}))},e.is=function(t){return t instanceof e||"object"==typeof t&&null!==t&&"function"==typeof t.next},t.exports=e},844:(t,e)=>{e.ARRAY_BUFFER_SUPPORT="undefined"!=typeof ArrayBuffer,e.SYMBOL_SUPPORT="undefined"!=typeof Symbol},641:(t,e,n)=>{var r=n(346);t.exports=function(t,e){for(var n,i=arguments.length>1?e:1/0,o=i!==1/0?new Array(i):[],a=0,s=r(t);;){if(a===i)return o;if((n=s.next()).done)return a!==e&&(o.length=a),o;o[a++]=n.value}}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r].call(o.exports,o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o(r.key),r)}}function r(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(t,e,n){return(e=o(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(e){var n=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===t(n)?n:String(n)}var a,s,u=r((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}));function c(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}i(u,"highlightedNodes",[]),i(u,"focusMode",!1),i(u,"openedRecordId",void 0),i(u,"position",{x:0,y:0,zoom:1}),window.addEventListener("DOMContentLoaded",(function(){document.getElementById("view-save").addEventListener("click",(function(){var t=new URL(window.location),e=Array.from(document.querySelectorAll("#types-form input:checked")).map((function(t){return t.name})),n=Array.from(document.querySelectorAll("#tags-form input:checked")).map((function(t){return t.name})),r=document.getElementById("focus-input").value;e.length>0&&t.searchParams.set("filters",e.join("-")),n.length>0&&t.searchParams.set("tags",n.join("-")),document.querySelector("#focus-check:checked")&&t.searchParams.set("focus",r),window.location.replace(t)}))})),1===(a=c).length&&(s=a,a=function(t,e){return c(s(t),e)});var h=Array.prototype;function f(t,e){var n,r,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(n=t[o])&&n>=n)for(r=n;++o<i;)null!=(n=t[o])&&n>r&&(r=n)}else for(;++o<i;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=n;++o<i;)null!=(n=e(t[o],o,t))&&n>r&&(r=n);return r}function l(t,e){var n,r,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(n=t[o])&&n>=n)for(r=n;++o<i;)null!=(n=t[o])&&r>n&&(r=n)}else for(;++o<i;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=n;++o<i;)null!=(n=e(t[o],o,t))&&r>n&&(r=n);return r}h.slice,h.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2),Array.prototype.slice;var d={value:function(){}};function p(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new y(r)}function y(t){this._=t}function g(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function v(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=d,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}y.prototype=p.prototype={constructor:y,on:function(t,e){var n,r,i=this._,o=(r=i,(t+"").trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))),a=-1,s=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<s;)if(n=(t=o[a]).type)i[n]=v(i[n],t.name,e);else if(null==e)for(n in i)i[n]=v(i[n],t.name,null);return this}for(;++a<s;)if((n=(t=o[a]).type)&&(n=g(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new y(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};const m=p;var _="http://www.w3.org/1999/xhtml";const b={svg:"http://www.w3.org/2000/svg",xhtml:_,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function w(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),b.hasOwnProperty(e)?{space:b[e],local:t}:t}function x(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===_&&e.documentElement.namespaceURI===_?e.createElement(t):e.createElementNS(n,t)}}function k(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function M(t){var e=w(t);return(e.local?k:x)(e)}function E(){}function A(t){return null==t?E:function(){return this.querySelector(t)}}function S(){return[]}function L(t){return null==t?S:function(){return this.querySelectorAll(t)}}var N=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var $=document.documentElement;if(!$.matches){var C=$.webkitMatchesSelector||$.msMatchesSelector||$.mozMatchesSelector||$.oMatchesSelector;N=function(t){return function(){return C.call(this,t)}}}}const T=N;function G(t){return new Array(t.length)}function U(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}U.prototype={constructor:U,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function D(t,e,n,r,i,o){for(var a,s=0,u=e.length,c=o.length;s<c;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new U(t,o[s]);for(;s<u;++s)(a=e[s])&&(i[s]=a)}function O(t,e,n,r,i,o,a){var s,u,c,h={},f=e.length,l=o.length,d=new Array(f);for(s=0;s<f;++s)(u=e[s])&&(d[s]=c="$"+a.call(u,u.__data__,s,e),c in h?i[s]=u:h[c]=u);for(s=0;s<l;++s)(u=h[c="$"+a.call(t,o[s],s,o)])?(r[s]=u,u.__data__=o[s],h[c]=null):n[s]=new U(t,o[s]);for(s=0;s<f;++s)(u=e[s])&&h[d[s]]===u&&(i[s]=u)}function z(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function j(t){return function(){this.removeAttribute(t)}}function P(t){return function(){this.removeAttributeNS(t.space,t.local)}}function I(t,e){return function(){this.setAttribute(t,e)}}function R(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function F(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function q(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Y(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function B(t){return function(){this.style.removeProperty(t)}}function W(t,e,n){return function(){this.style.setProperty(t,e,n)}}function K(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function H(t,e){return t.style.getPropertyValue(e)||Y(t).getComputedStyle(t,null).getPropertyValue(e)}function X(t){return function(){delete this[t]}}function V(t,e){return function(){this[t]=e}}function Z(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function J(t){return t.trim().split(/^|\s+/)}function Q(t){return t.classList||new tt(t)}function tt(t){this._node=t,this._names=J(t.getAttribute("class")||"")}function et(t,e){for(var n=Q(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function nt(t,e){for(var n=Q(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function rt(t){return function(){et(this,t)}}function it(t){return function(){nt(this,t)}}function ot(t,e){return function(){(e.apply(this,arguments)?et:nt)(this,t)}}function at(){this.textContent=""}function st(t){return function(){this.textContent=t}}function ut(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function ct(){this.innerHTML=""}function ht(t){return function(){this.innerHTML=t}}function ft(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function lt(){this.nextSibling&&this.parentNode.appendChild(this)}function dt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function pt(){return null}function yt(){var t=this.parentNode;t&&t.removeChild(this)}function gt(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function vt(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}tt.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var mt={},_t=null;function bt(t,e,n){return t=wt(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function wt(t,e,n){return function(r){var i=_t;_t=r;try{t.call(this,this.__data__,e,n)}finally{_t=i}}}function xt(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function kt(t,e,n){var r=mt.hasOwnProperty(t.type)?bt:wt;return function(i,o,a){var s,u=this.__on,c=r(e,o,a);if(u)for(var h=0,f=u.length;h<f;++h)if((s=u[h]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=c,s.capture=n),void(s.value=e);this.addEventListener(t.type,c,n),s={type:t.type,name:t.name,value:e,listener:c,capture:n},u?u.push(s):this.__on=[s]}}function Mt(t,e,n,r){var i=_t;t.sourceEvent=_t,_t=t;try{return e.apply(n,r)}finally{_t=i}}function Et(t,e,n){var r=Y(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function At(t,e){return function(){return Et(this,t,e)}}function St(t,e){return function(){return Et(this,t,e.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(mt={mouseenter:"mouseover",mouseleave:"mouseout"}));var Lt=[null];function Nt(t,e){this._groups=t,this._parents=e}function $t(){return new Nt([[document.documentElement]],Lt)}Nt.prototype=$t.prototype={constructor:Nt,select:function(t){"function"!=typeof t&&(t=A(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=e[i],u=s.length,c=r[i]=new Array(u),h=0;h<u;++h)(o=s[h])&&(a=t.call(o,o.__data__,h,s))&&("__data__"in o&&(a.__data__=o.__data__),c[h]=a);return new Nt(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=L(t));for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,s=e[o],u=s.length,c=0;c<u;++c)(a=s[c])&&(r.push(t.call(a,a.__data__,c,s)),i.push(a));return new Nt(r,i)},filter:function(t){"function"!=typeof t&&(t=T(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,u=r[i]=[],c=0;c<s;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&u.push(o);return new Nt(r,this._parents)},data:function(t,e){if(!t)return p=new Array(this.size()),h=-1,this.each((function(t){p[++h]=t})),p;var n,r=e?O:D,i=this._parents,o=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var a=o.length,s=new Array(a),u=new Array(a),c=new Array(a),h=0;h<a;++h){var f=i[h],l=o[h],d=l.length,p=t.call(f,f&&f.__data__,h,i),y=p.length,g=u[h]=new Array(y),v=s[h]=new Array(y);r(f,l,g,v,c[h]=new Array(d),p,e);for(var m,_,b=0,w=0;b<y;++b)if(m=g[b]){for(b>=w&&(w=b+1);!(_=v[w])&&++w<y;);m._next=_||null}}return(s=new Nt(s,i))._enter=u,s._exit=c,s},enter:function(){return new Nt(this._enter||this._groups.map(G),this._parents)},exit:function(){return new Nt(this._exit||this._groups.map(G),this._parents)},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,c=e[s],h=n[s],f=c.length,l=a[s]=new Array(f),d=0;d<f;++d)(u=c[d]||h[d])&&(l[d]=u);for(;s<r;++s)a[s]=e[s];return new Nt(a,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&a!==r.nextSibling&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=z);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],u=s.length,c=i[o]=new Array(u),h=0;h<u;++h)(a=s[h])&&(c[h]=a);c.sort(e)}return new Nt(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each((function(){t[++e]=this})),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,s=o.length;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,e){var n=w(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?P:j:"function"==typeof e?n.local?q:F:n.local?R:I)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?B:"function"==typeof e?K:W)(t,e,null==n?"":n)):H(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?X:"function"==typeof e?Z:V)(t,e)):this.node()[t]},classed:function(t,e){var n=J(t+"");if(arguments.length<2){for(var r=Q(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?ot:e?rt:it)(n,e))},text:function(t){return arguments.length?this.each(null==t?at:("function"==typeof t?ut:st)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?ct:("function"==typeof t?ft:ht)(t)):this.node().innerHTML},raise:function(){return this.each(lt)},lower:function(){return this.each(dt)},append:function(t){var e="function"==typeof t?t:M(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:M(t),r=null==e?pt:"function"==typeof e?e:A(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(yt)},clone:function(t){return this.select(t?vt:gt)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),a=o.length;if(!(arguments.length<2)){for(s=e?kt:xt,null==n&&(n=!1),r=0;r<a;++r)this.each(s(o[r],e,n));return this}var s=this.node().__on;if(s)for(var u,c=0,h=s.length;c<h;++c)for(r=0,u=s[c];r<a;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(t,e){return this.each(("function"==typeof e?St:At)(t,e))}};const Ct=$t;function Tt(t){return"string"==typeof t?new Nt([[document.querySelector(t)]],[document.documentElement]):new Nt([[t]],Lt)}var Gt=0;function Ut(){this._="@"+(++Gt).toString(36)}function Dt(){for(var t,e=_t;t=e.sourceEvent;)e=t;return e}function Ot(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}function zt(t){var e=Dt();return e.changedTouches&&(e=e.changedTouches[0]),Ot(t,e)}function jt(t,e,n){arguments.length<3&&(n=e,e=Dt().changedTouches);for(var r,i=0,o=e?e.length:0;i<o;++i)if((r=e[i]).identifier===n)return Ot(t,r);return null}function Pt(){_t.stopImmediatePropagation()}function It(){_t.preventDefault(),_t.stopImmediatePropagation()}function Rt(t){var e=t.document.documentElement,n=Tt(t).on("dragstart.drag",It,!0);"onselectstart"in e?n.on("selectstart.drag",It,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Ft(t,e){var n=t.document.documentElement,r=Tt(t).on("dragstart.drag",null);e&&(r.on("click.drag",It,!0),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function qt(t){return function(){return t}}function Yt(t,e,n,r,i,o,a,s,u,c){this.target=t,this.type=e,this.subject=n,this.identifier=r,this.active=i,this.x=o,this.y=a,this.dx=s,this.dy=u,this._=c}function Bt(){return!_t.button}function Wt(){return this.parentNode}function Kt(t){return null==t?{x:_t.x,y:_t.y}:t}function Ht(){return"ontouchstart"in this}function Xt(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Vt(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Zt(){}Ut.prototype=function(){return new Ut}.prototype={constructor:Ut,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}},Yt.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var Jt=.7,Qt=1/Jt,te="\\s*([+-]?\\d+)\\s*",ee="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ne="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",re=/^#([0-9a-f]{3})$/,ie=/^#([0-9a-f]{6})$/,oe=new RegExp("^rgb\\("+[te,te,te]+"\\)$"),ae=new RegExp("^rgb\\("+[ne,ne,ne]+"\\)$"),se=new RegExp("^rgba\\("+[te,te,te,ee]+"\\)$"),ue=new RegExp("^rgba\\("+[ne,ne,ne,ee]+"\\)$"),ce=new RegExp("^hsl\\("+[ee,ne,ne]+"\\)$"),he=new RegExp("^hsla\\("+[ee,ne,ne,ee]+"\\)$"),fe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function le(t){var e;return t=(t+"").trim().toLowerCase(),(e=re.exec(t))?new ve((e=parseInt(e[1],16))>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):(e=ie.exec(t))?de(parseInt(e[1],16)):(e=oe.exec(t))?new ve(e[1],e[2],e[3],1):(e=ae.exec(t))?new ve(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=se.exec(t))?pe(e[1],e[2],e[3],e[4]):(e=ue.exec(t))?pe(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=ce.exec(t))?me(e[1],e[2]/100,e[3]/100,1):(e=he.exec(t))?me(e[1],e[2]/100,e[3]/100,e[4]):fe.hasOwnProperty(t)?de(fe[t]):"transparent"===t?new ve(NaN,NaN,NaN,0):null}function de(t){return new ve(t>>16&255,t>>8&255,255&t,1)}function pe(t,e,n,r){return r<=0&&(t=e=n=NaN),new ve(t,e,n,r)}function ye(t){return t instanceof Zt||(t=le(t)),t?new ve((t=t.rgb()).r,t.g,t.b,t.opacity):new ve}function ge(t,e,n,r){return 1===arguments.length?ye(t):new ve(t,e,n,null==r?1:r)}function ve(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function me(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new be(t,e,n,r)}function _e(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof be)return new be(t.h,t.s,t.l,t.opacity);if(t instanceof Zt||(t=le(t)),!t)return new be;if(t instanceof be)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new be(a,s,u,t.opacity)}(t):new be(t,e,n,null==r?1:r)}function be(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function we(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}Xt(Zt,le,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),Xt(ve,ge,Vt(Zt,{brighter:function(t){return t=null==t?Qt:Math.pow(Qt,t),new ve(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?Jt:Math.pow(Jt,t),new ve(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),Xt(be,_e,Vt(Zt,{brighter:function(t){return t=null==t?Qt:Math.pow(Qt,t),new be(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?Jt:Math.pow(Jt,t),new be(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new ve(we(t>=240?t-240:t+120,i,r),we(t,i,r),we(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var xe=Math.PI/180,ke=180/Math.PI,Me=.95047,Ee=1,Ae=1.08883,Se=4/29,Le=6/29,Ne=3*Le*Le,$e=Le*Le*Le;function Ce(t){if(t instanceof Te)return new Te(t.l,t.a,t.b,t.opacity);if(t instanceof je){var e=t.h*xe;return new Te(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof ve||(t=ye(t));var n=Oe(t.r),r=Oe(t.g),i=Oe(t.b),o=Ge((.4124564*n+.3575761*r+.1804375*i)/Me),a=Ge((.2126729*n+.7151522*r+.072175*i)/Ee);return new Te(116*a-16,500*(o-a),200*(a-Ge((.0193339*n+.119192*r+.9503041*i)/Ae)),t.opacity)}function Te(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function Ge(t){return t>$e?Math.pow(t,1/3):t/Ne+Se}function Ue(t){return t>Le?t*t*t:Ne*(t-Se)}function De(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Oe(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ze(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof je)return new je(t.h,t.c,t.l,t.opacity);t instanceof Te||(t=Ce(t));var e=Math.atan2(t.b,t.a)*ke;return new je(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}(t):new je(t,e,n,null==r?1:r)}function je(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}Xt(Te,(function(t,e,n,r){return 1===arguments.length?Ce(t):new Te(t,e,n,null==r?1:r)}),Vt(Zt,{brighter:function(t){return new Te(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Te(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return t=Ee*Ue(t),new ve(De(3.2404542*(e=Me*Ue(e))-1.5371385*t-.4985314*(n=Ae*Ue(n))),De(-.969266*e+1.8760108*t+.041556*n),De(.0556434*e-.2040259*t+1.0572252*n),this.opacity)}})),Xt(je,ze,Vt(Zt,{brighter:function(t){return new je(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new je(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Ce(this).rgb()}}));var Pe=-.14861,Ie=1.78277,Re=-.29227,Fe=-.90649,qe=1.97294,Ye=qe*Fe,Be=qe*Ie,We=Ie*Re-Fe*Pe;function Ke(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof He)return new He(t.h,t.s,t.l,t.opacity);t instanceof ve||(t=ye(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(We*r+Ye*e-Be*n)/(We+Ye-Be),o=r-i,a=(qe*(n-i)-Re*o)/Fe,s=Math.sqrt(a*a+o*o)/(qe*i*(1-i)),u=s?Math.atan2(a,o)*ke-120:NaN;return new He(u<0?u+360:u,s,i,t.opacity)}(t):new He(t,e,n,null==r?1:r)}function He(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Xe(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}function Ve(t){return function(){return t}}function Ze(t,e){return function(n){return t+n*e}}function Je(t,e){var n=e-t;return n?Ze(t,n>180||n<-180?n-360*Math.round(n/360):n):Ve(isNaN(t)?e:t)}function Qe(t,e){var n=e-t;return n?Ze(t,n):Ve(isNaN(t)?e:t)}Xt(He,Ke,Vt(Zt,{brighter:function(t){return t=null==t?Qt:Math.pow(Qt,t),new He(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?Jt:Math.pow(Jt,t),new He(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*xe,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new ve(255*(e+n*(Pe*r+Ie*i)),255*(e+n*(Re*r+Fe*i)),255*(e+n*(qe*r)),this.opacity)}}));const tn=function t(e){var n=function(t){return 1==(t=+t)?Qe:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):Ve(isNaN(e)?n:e)}}(e);function r(t,e){var r=n((t=ge(t)).r,(e=ge(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=Qe(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function en(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=ge(e[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=t(o),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=s(t),r+""}}}function nn(t,e){return e-=t=+t,function(n){return t+e*n}}en((function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return Xe((n-r/e)*e,a,i,o,s)}})),en((function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],s=t[(r+2)%e];return Xe((n-r/e)*e,i,o,a,s)}}));var rn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,on=new RegExp(rn.source,"g");function an(t,e){var n,r,i,o=rn.lastIndex=on.lastIndex=0,a=-1,s=[],u=[];for(t+="",e+="";(n=rn.exec(t))&&(r=on.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:nn(n,r)})),o=on.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})}var sn,un,cn,hn,fn=180/Math.PI,ln={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function dn(t,e,n,r,i,o){var a,s,u;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*fn,skewX:Math.atan(u)*fn,scaleX:a,scaleY:s}}function pn(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var s=[],u=[];return o=t(o),a=t(a),function(t,r,i,o,a,s){if(t!==i||r!==o){var u=a.push("translate(",null,e,null,n);s.push({i:u-4,x:nn(t,i)},{i:u-2,x:nn(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,u),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:nn(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(o.rotate,a.rotate,s,u),function(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:nn(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(o.skewX,a.skewX,s,u),function(t,e,n,r,o,a){if(t!==n||e!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:nn(t,n)},{i:s-2,x:nn(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,u),o=a=null,function(t){for(var e,n=-1,r=u.length;++n<r;)s[(e=u[n]).i]=e.x(t);return s.join("")}}}var yn=pn((function(t){return"none"===t?ln:(sn||(sn=document.createElement("DIV"),un=document.documentElement,cn=document.defaultView),sn.style.transform=t,t=cn.getComputedStyle(un.appendChild(sn),null).getPropertyValue("transform"),un.removeChild(sn),dn(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),gn=pn((function(t){return null==t?ln:(hn||(hn=document.createElementNS("http://www.w3.org/2000/svg","g")),hn.setAttribute("transform",t),(t=hn.transform.baseVal.consolidate())?dn((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):ln)}),", ",")",")"),vn=Math.SQRT2;function mn(t){return((t=Math.exp(t))+1/t)/2}function _n(t,e){var n,r,i=t[0],o=t[1],a=t[2],s=e[0],u=e[1],c=e[2],h=s-i,f=u-o,l=h*h+f*f;if(l<1e-12)r=Math.log(c/a)/vn,n=function(t){return[i+t*h,o+t*f,a*Math.exp(vn*t*r)]};else{var d=Math.sqrt(l),p=(c*c-a*a+4*l)/(2*a*2*d),y=(c*c-a*a-4*l)/(2*c*2*d),g=Math.log(Math.sqrt(p*p+1)-p),v=Math.log(Math.sqrt(y*y+1)-y);r=(v-g)/vn,n=function(t){var e,n=t*r,s=mn(g),u=a/(2*d)*(s*(e=vn*n+g,((e=Math.exp(2*e))-1)/(e+1))-function(t){return((t=Math.exp(t))-1/t)/2}(g));return[i+u*h,o+u*f,a*s/mn(vn*n+g)]}}return n.duration=1e3*r,n}function bn(t){return function(e,n){var r=t((e=_e(e)).h,(n=_e(n)).h),i=Qe(e.s,n.s),o=Qe(e.l,n.l),a=Qe(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=o(t),e.opacity=a(t),e+""}}}function wn(t){return function(e,n){var r=t((e=ze(e)).h,(n=ze(n)).h),i=Qe(e.c,n.c),o=Qe(e.l,n.l),a=Qe(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=o(t),e.opacity=a(t),e+""}}}function xn(t){return function e(n){function r(e,r){var i=t((e=Ke(e)).h,(r=Ke(r)).h),o=Qe(e.s,r.s),a=Qe(e.l,r.l),s=Qe(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=o(t),e.l=a(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,r.gamma=e,r}(1)}bn(Je),bn(Qe),wn(Je),wn(Qe),xn(Je);var kn,Mn,En=xn(Qe),An=0,Sn=0,Ln=0,Nn=1e3,$n=0,Cn=0,Tn=0,Gn="object"==typeof performance&&performance.now?performance:Date,Un="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Dn(){return Cn||(Un(On),Cn=Gn.now()+Tn)}function On(){Cn=0}function zn(){this._call=this._time=this._next=null}function jn(t,e,n){var r=new zn;return r.restart(t,e,n),r}function Pn(){Cn=($n=Gn.now())+Tn,An=Sn=0;try{!function(){Dn(),++An;for(var t,e=kn;e;)(t=Cn-e._time)>=0&&e._call.call(null,t),e=e._next;--An}()}finally{An=0,function(){for(var t,e,n=kn,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:kn=e);Mn=t,Rn(r)}(),Cn=0}}function In(){var t=Gn.now(),e=t-$n;e>Nn&&(Tn-=e,$n=t)}function Rn(t){An||(Sn&&(Sn=clearTimeout(Sn)),t-Cn>24?(t<1/0&&(Sn=setTimeout(Pn,t-Gn.now()-Tn)),Ln&&(Ln=clearInterval(Ln))):(Ln||($n=Gn.now(),Ln=setInterval(In,Nn)),An=1,Un(Pn)))}function Fn(t,e,n){var r=new zn;return e=null==e?0:+e,r.restart((function(n){r.stop(),t(n+e)}),e,n),r}zn.prototype=jn.prototype={constructor:zn,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Dn():+n)+(null==e?0:+e),this._next||Mn===this||(Mn?Mn._next=this:kn=this,Mn=this),this._call=t,this._time=n,Rn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Rn())}};var qn=m("start","end","interrupt"),Yn=[],Bn=0,Wn=2;function Kn(t,e,n,r,i,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function o(u){var c,h,f,l;if(1!==n.state)return s();for(c in i)if((l=i[c]).name===n.name){if(3===l.state)return Fn(o);4===l.state?(l.state=6,l.timer.stop(),l.on.call("interrupt",t,t.__data__,l.index,l.group),delete i[c]):+c<e&&(l.state=6,l.timer.stop(),delete i[c])}if(Fn((function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(u))})),n.state=Wn,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Wn){for(n.state=3,r=new Array(f=n.tween.length),c=0,h=-1;c<f;++c)(l=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(r[++h]=l);r.length=h+1}}function a(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(s),n.state=5,1),o=-1,a=r.length;++o<a;)r[o].call(null,i);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),s())}function s(){for(var r in n.state=6,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=jn((function(t){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)}),0,n.time)}(t,n,{name:e,index:r,group:i,on:qn,tween:Yn,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Bn})}function Hn(t,e){var n=Vn(t,e);if(n.state>Bn)throw new Error("too late; already scheduled");return n}function Xn(t,e){var n=Vn(t,e);if(n.state>Wn)throw new Error("too late; already started");return n}function Vn(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Zn(t,e){var n,r,i,o=t.__transition,a=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name===e?(r=n.state>Wn&&n.state<5,n.state=6,n.timer.stop(),r&&n.on.call("interrupt",t,t.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete t.__transition}}function Jn(t,e){var n,r;return function(){var i=Xn(this,t),o=i.tween;if(o!==n)for(var a=0,s=(r=n=o).length;a<s;++a)if(r[a].name===e){(r=r.slice()).splice(a,1);break}i.tween=r}}function Qn(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=Xn(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:e,value:n},u=0,c=i.length;u<c;++u)if(i[u].name===e){i[u]=s;break}u===c&&i.push(s)}o.tween=i}}function tr(t,e,n){var r=t._id;return t.each((function(){var t=Xn(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return Vn(t,r).value[e]}}function er(t,e){var n;return("number"==typeof e?nn:e instanceof le?tn:(n=le(e))?(e=n,tn):an)(t,e)}function nr(t){return function(){this.removeAttribute(t)}}function rr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ir(t,e,n){var r,i;return function(){var o=this.getAttribute(t);return o===n?null:o===r?i:i=e(r=o,n)}}function or(t,e,n){var r,i;return function(){var o=this.getAttributeNS(t.space,t.local);return o===n?null:o===r?i:i=e(r=o,n)}}function ar(t,e,n){var r,i,o;return function(){var a,s=n(this);if(null!=s)return(a=this.getAttribute(t))===s?null:a===r&&s===i?o:o=e(r=a,i=s);this.removeAttribute(t)}}function sr(t,e,n){var r,i,o;return function(){var a,s=n(this);if(null!=s)return(a=this.getAttributeNS(t.space,t.local))===s?null:a===r&&s===i?o:o=e(r=a,i=s);this.removeAttributeNS(t.space,t.local)}}function ur(t,e){function n(){var n=this,r=e.apply(n,arguments);return r&&function(e){n.setAttributeNS(t.space,t.local,r(e))}}return n._value=e,n}function cr(t,e){function n(){var n=this,r=e.apply(n,arguments);return r&&function(e){n.setAttribute(t,r(e))}}return n._value=e,n}function hr(t,e){return function(){Hn(this,t).delay=+e.apply(this,arguments)}}function fr(t,e){return e=+e,function(){Hn(this,t).delay=e}}function lr(t,e){return function(){Xn(this,t).duration=+e.apply(this,arguments)}}function dr(t,e){return e=+e,function(){Xn(this,t).duration=e}}var pr=Ct.prototype.constructor,yr=0;function gr(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function vr(){return++yr}var mr=Ct.prototype;gr.prototype=function(t){return Ct().transition(t)}.prototype={constructor:gr,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=A(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,u,c=r[a],h=c.length,f=o[a]=new Array(h),l=0;l<h;++l)(s=c[l])&&(u=t.call(s,s.__data__,l,c))&&("__data__"in s&&(u.__data__=s.__data__),f[l]=u,Kn(f[l],e,n,l,f,Vn(s,n)));return new gr(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=L(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var u,c=r[s],h=c.length,f=0;f<h;++f)if(u=c[f]){for(var l,d=t.call(u,u.__data__,f,c),p=Vn(u,n),y=0,g=d.length;y<g;++y)(l=d[y])&&Kn(l,e,n,y,d,p);o.push(d),a.push(u)}return new gr(o,a,e,n)},filter:function(t){"function"!=typeof t&&(t=T(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,u=r[i]=[],c=0;c<s;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&u.push(o);return new gr(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,c=e[s],h=n[s],f=c.length,l=a[s]=new Array(f),d=0;d<f;++d)(u=c[d]||h[d])&&(l[d]=u);for(;s<r;++s)a[s]=e[s];return new gr(a,this._parents,this._name,this._id)},selection:function(){return new pr(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=vr(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,c=0;c<u;++c)if(a=s[c]){var h=Vn(a,e);Kn(a,t,n,c,s,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new gr(r,this._parents,t,n)},call:mr.call,nodes:mr.nodes,node:mr.node,size:mr.size,empty:mr.empty,each:mr.each,on:function(t,e){var n=this._id;return arguments.length<2?Vn(this.node(),n).on.on(t):this.each(function(t,e,n){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?Hn:Xn;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(e,n),a.on=i}}(n,t,e))},attr:function(t,e){var n=w(t),r="transform"===n?gn:er;return this.attrTween(t,"function"==typeof e?(n.local?sr:ar)(n,r,tr(this,"attr."+t,e)):null==e?(n.local?rr:nr)(n):(n.local?or:ir)(n,r,e+""))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=w(t);return this.tween(n,(r.local?ur:cr)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?yn:er;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var o=H(this,t),a=(this.style.removeProperty(t),H(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}(t,r)).on("end.style."+t,function(t){return function(){this.style.removeProperty(t)}}(t)):this.styleTween(t,"function"==typeof e?function(t,e,n){var r,i,o;return function(){var a=H(this,t),s=n(this);return null==s&&(this.style.removeProperty(t),s=H(this,t)),a===s?null:a===r&&s===i?o:o=e(r=a,i=s)}}(t,r,tr(this,"style."+t,e)):function(t,e,n){var r,i;return function(){var o=H(this,t);return o===n?null:o===r?i:i=e(r=o,n)}}(t,r,e+""),n)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,function(t,e,n){function r(){var r=this,i=e.apply(r,arguments);return i&&function(e){r.style.setProperty(t,i(e),n)}}return r._value=e,r}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(tr(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=Vn(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?Jn:Qn)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?hr:fr)(e,t)):Vn(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?lr:dr)(e,t)):Vn(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){Xn(this,t).ease=e}}(e,t)):Vn(this.node(),e).ease}},function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),Math.PI;var _r=1.70158,br=(function t(e){function n(t){return t*t*((e+1)*t-e)}return e=+e,n.overshoot=t,n}(_r),function t(e){function n(t){return--t*t*((e+1)*t+e)+1}return e=+e,n.overshoot=t,n}(_r),function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(_r),2*Math.PI),wr=(function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=br);function i(t){return e*Math.pow(2,10*--t)*Math.sin((r-t)/n)}return i.amplitude=function(e){return t(e,n*br)},i.period=function(n){return t(e,n)},i}(1,.3),function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=br);function i(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+r)/n)}return i.amplitude=function(e){return t(e,n*br)},i.period=function(n){return t(e,n)},i}(1,.3),function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=br);function i(t){return((t=2*t-1)<0?e*Math.pow(2,10*t)*Math.sin((r-t)/n):2-e*Math.pow(2,-10*t)*Math.sin((r+t)/n))/2}return i.amplitude=function(e){return t(e,n*br)},i.period=function(n){return t(e,n)},i}(1,.3),{time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}});function xr(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return wr.time=Dn(),wr;return n}function kr(t){return{type:t}}function Mr(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}Ct.prototype.interrupt=function(t){return this.each((function(){Zn(this,t)}))},Ct.prototype.transition=function(t){var e,n;t instanceof gr?(e=t._id,t=t._name):(e=vr(),(n=wr).time=Dn(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,c=0;c<u;++c)(a=s[c])&&Kn(a,t,e,c,s,n||xr(a,e));return new gr(r,this._parents,t,e)},["e","w"].map(kr),["n","s"].map(kr),["n","e","s","w","nw","ne","se","sw"].map(kr);var Er=function(t){return 1===t.length&&(t=function(t){return function(e,n){return Mr(t(e),n)}}(t)),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}(Mr);Er.right,Er.left;var Ar=Array.prototype;Ar.slice,Ar.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2),Math.cos,Math.sin,Math.PI,Math.max,Array.prototype.slice;var Sr=Math.PI,Lr=2*Sr,Nr=1e-6,$r=Lr-Nr;function Cr(){this._x0=this._y0=this._x1=this._y1=null,this._=""}Cr.prototype=function(){return new Cr}.prototype={constructor:Cr,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,s=n-t,u=r-e,c=o-t,h=a-e,f=c*c+h*h;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>Nr)if(Math.abs(h*s-u*c)>Nr&&i){var l=n-o,d=r-a,p=s*s+u*u,y=l*l+d*d,g=Math.sqrt(p),v=Math.sqrt(f),m=i*Math.tan((Sr-Math.acos((p+f-y)/(2*g*v)))/2),_=m/v,b=m/g;Math.abs(_-1)>Nr&&(this._+="L"+(t+_*c)+","+(e+_*h)),this._+="A"+i+","+i+",0,0,"+ +(h*l>c*d)+","+(this._x1=t+b*s)+","+(this._y1=e+b*u)}else this._+="L"+(this._x1=t)+","+(this._y1=e)},arc:function(t,e,n,r,i,o){t=+t,e=+e;var a=(n=+n)*Math.cos(r),s=n*Math.sin(r),u=t+a,c=e+s,h=1^o,f=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+c:(Math.abs(this._x1-u)>Nr||Math.abs(this._y1-c)>Nr)&&(this._+="L"+u+","+c),n&&(f<0&&(f=f%Lr+Lr),f>$r?this._+="A"+n+","+n+",0,1,"+h+","+(t-a)+","+(e-s)+"A"+n+","+n+",0,1,"+h+","+(this._x1=u)+","+(this._y1=c):f>Nr&&(this._+="A"+n+","+n+",0,"+ +(f>=Sr)+","+h+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var Tr="$";function Gr(){}function Ur(t,e){var n=new Gr;if(t instanceof Gr)t.each((function(t,e){n.set(e,t)}));else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==e)for(;++i<o;)n.set(i,t[i]);else for(;++i<o;)n.set(e(r=t[i],i,t),r)}else if(t)for(var a in t)n.set(a,t[a]);return n}Gr.prototype=Ur.prototype={constructor:Gr,has:function(t){return Tr+t in this},get:function(t){return this[Tr+t]},set:function(t,e){return this[Tr+t]=e,this},remove:function(t){var e=Tr+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===Tr&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===Tr&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===Tr&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===Tr&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===Tr&&++t;return t},empty:function(){for(var t in this)if(t[0]===Tr)return!1;return!0},each:function(t){for(var e in this)e[0]===Tr&&t(this[e],e.slice(1),this)}};const Dr=Ur;function Or(){}var zr=Dr.prototype;Or.prototype=function(t,e){var n=new Or;if(t instanceof Or)t.each((function(t){n.add(t)}));else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}.prototype={constructor:Or,has:zr.has,add:function(t){return this[Tr+(t+="")]=t,this},remove:zr.remove,clear:zr.clear,values:zr.keys,size:zr.size,empty:zr.empty,each:zr.each};var jr={},Pr={};function Ir(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+"]"})).join(",")+"}")}function Rr(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var r,i=[],o=t.length,a=0,s=0,u=o<=0,c=!1;function h(){if(u)return Pr;if(c)return c=!1,jr;var e,r,i=a;if(34===t.charCodeAt(i)){for(;a++<o&&34!==t.charCodeAt(a)||34===t.charCodeAt(++a););return(e=a)>=o?u=!0:10===(r=t.charCodeAt(a++))?c=!0:13===r&&(c=!0,10===t.charCodeAt(a)&&++a),t.slice(i+1,e-1).replace(/""/g,'"')}for(;a<o;){if(10===(r=t.charCodeAt(e=a++)))c=!0;else if(13===r)c=!0,10===t.charCodeAt(a)&&++a;else if(r!==n)continue;return t.slice(i,e)}return u=!0,t.slice(i,o)}for(10===t.charCodeAt(o-1)&&--o,13===t.charCodeAt(o-1)&&--o;(r=h())!==Pr;){for(var f=[];r!==jr&&r!==Pr;)f.push(r),r=h();e&&null==(f=e(f,s++))||i.push(f)}return i}function i(e){return e.map(o).join(t)}function o(t){return null==t?"":e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,i,o=r(t,(function(t,r){if(n)return n(t,r-1);i=t,n=e?function(t,e){var n=Ir(t);return function(r,i){return e(n(r),i,t)}}(t,e):Ir(t)}));return o.columns=i||[],o},parseRows:r,format:function(e,n){return null==n&&(n=function(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var r in t)r in e||n.push(e[r]=r)})),n}(e)),[n.map(o).join(t)].concat(e.map((function(e){return n.map((function(t){return o(e[t])})).join(t)}))).join("\n")},formatRows:function(t){return t.map(i).join("\n")}}}var Fr=Rr(","),qr=Fr.parse,Yr=(Fr.parseRows,Fr.format,Fr.formatRows,Rr("\t")),Br=Yr.parse;function Wr(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,a,s,u,c,h,f,l,d=t._root,p={data:r},y=t._x0,g=t._y0,v=t._x1,m=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((c=e>=(o=(y+v)/2))?y=o:v=o,(h=n>=(a=(g+m)/2))?g=a:m=a,i=d,!(d=d[f=h<<1|c]))return i[f]=p,t;if(s=+t._x.call(null,d.data),u=+t._y.call(null,d.data),e===s&&n===u)return p.next=d,i?i[f]=p:t._root=p,t;do{i=i?i[f]=new Array(4):t._root=new Array(4),(c=e>=(o=(y+v)/2))?y=o:v=o,(h=n>=(a=(g+m)/2))?g=a:m=a}while((f=h<<1|c)==(l=(u>=a)<<1|s>=o));return i[l]=d,i[f]=p,t}function Kr(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function Hr(t){return t[0]}function Xr(t){return t[1]}function Vr(t,e,n){var r=new Zr(null==e?Hr:e,null==n?Xr:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function Zr(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function Jr(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}Yr.parseRows,Yr.format,Yr.formatRows;var Qr=Vr.prototype=Zr.prototype;function ti(t){return function(){return t}}function ei(){return 1e-6*(Math.random()-.5)}function ni(t){return t.index}function ri(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function ii(t){return t.x}function oi(t){return t.y}Qr.copy=function(){var t,e,n=new Zr(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=Jr(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=Jr(e));return n},Qr.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return Wr(this.cover(e,n),e,n,t)},Qr.addAll=function(t){var e,n,r,i,o=t.length,a=new Array(o),s=new Array(o),u=1/0,c=1/0,h=-1/0,f=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(a[n]=r,s[n]=i,r<u&&(u=r),r>h&&(h=r),i<c&&(c=i),i>f&&(f=i));for(h<u&&(u=this._x0,h=this._x1),f<c&&(c=this._y0,f=this._y1),this.cover(u,c).cover(h,f),n=0;n<o;++n)Wr(this,a[n],s[n],t[n]);return this},Qr.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{if(!(n>t||t>i||r>e||e>o))return this;var a,s,u=i-n,c=this._root;switch(s=(e<(r+o)/2)<<1|t<(n+i)/2){case 0:do{(a=new Array(4))[s]=c,c=a}while(o=r+(u*=2),t>(i=n+u)||e>o);break;case 1:do{(a=new Array(4))[s]=c,c=a}while(o=r+(u*=2),(n=i-u)>t||e>o);break;case 2:do{(a=new Array(4))[s]=c,c=a}while(r=o-(u*=2),t>(i=n+u)||r>e);break;case 3:do{(a=new Array(4))[s]=c,c=a}while(r=o-(u*=2),(n=i-u)>t||r>e)}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},Qr.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},Qr.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Qr.find=function(t,e,n){var r,i,o,a,s,u,c,h=this._x0,f=this._y0,l=this._x1,d=this._y1,p=[],y=this._root;for(y&&p.push(new Kr(y,h,f,l,d)),null==n?n=1/0:(h=t-n,f=e-n,l=t+n,d=e+n,n*=n);u=p.pop();)if(!(!(y=u.node)||(i=u.x0)>l||(o=u.y0)>d||(a=u.x1)<h||(s=u.y1)<f))if(y.length){var g=(i+a)/2,v=(o+s)/2;p.push(new Kr(y[3],g,v,a,s),new Kr(y[2],i,v,g,s),new Kr(y[1],g,o,a,v),new Kr(y[0],i,o,g,v)),(c=(e>=v)<<1|t>=g)&&(u=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=u)}else{var m=t-+this._x.call(null,y.data),_=e-+this._y.call(null,y.data),b=m*m+_*_;if(b<n){var w=Math.sqrt(n=b);h=t-w,f=e-w,l=t+w,d=e+w,r=y.data}}return r},Qr.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,r,i,o,a,s,u,c,h,f,l,d=this._root,p=this._x0,y=this._y0,g=this._x1,v=this._y1;if(!d)return this;if(d.length)for(;;){if((c=o>=(s=(p+g)/2))?p=s:g=s,(h=a>=(u=(y+v)/2))?y=u:v=u,e=d,!(d=d[f=h<<1|c]))return this;if(!d.length)break;(e[f+1&3]||e[f+2&3]||e[f+3&3])&&(n=e,l=f)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,r?(i?r.next=i:delete r.next,this):e?(i?e[f]=i:delete e[f],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[l]=d:this._root=d),this):(this._root=i,this)},Qr.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},Qr.root=function(){return this._root},Qr.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},Qr.visit=function(t){var e,n,r,i,o,a,s=[],u=this._root;for(u&&s.push(new Kr(u,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(u=e.node,r=e.x0,i=e.y0,o=e.x1,a=e.y1)&&u.length){var c=(r+o)/2,h=(i+a)/2;(n=u[3])&&s.push(new Kr(n,c,h,o,a)),(n=u[2])&&s.push(new Kr(n,r,h,c,a)),(n=u[1])&&s.push(new Kr(n,c,i,o,h)),(n=u[0])&&s.push(new Kr(n,r,i,c,h))}return this},Qr.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new Kr(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var o,a=e.x0,s=e.y0,u=e.x1,c=e.y1,h=(a+u)/2,f=(s+c)/2;(o=i[0])&&n.push(new Kr(o,a,s,h,f)),(o=i[1])&&n.push(new Kr(o,h,s,u,f)),(o=i[2])&&n.push(new Kr(o,a,f,h,c)),(o=i[3])&&n.push(new Kr(o,h,f,u,c))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},Qr.x=function(t){return arguments.length?(this._x=t,this):this._x},Qr.y=function(t){return arguments.length?(this._y=t,this):this._y};var ai,si=Math.PI*(3-Math.sqrt(5));function ui(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function ci(t,e){var n=ui(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const hi={"":function(t,e){t:for(var n,r=(t=t.toPrecision(e)).length,i=1,o=-1;i<r;++i)switch(t[i]){case".":o=n=i;break;case"0":0===o&&(o=i),n=i;break;case"e":break t;default:o>0&&(o=0)}return o>0?t.slice(0,o)+t.slice(n+1):t},"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return ci(100*t,e)},r:ci,s:function(t,e){var n=ui(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(ai=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+ui(t,Math.max(0,e+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};var fi=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;function li(t){return new di(t)}function di(t){if(!(e=fi.exec(t)))throw new Error("invalid format: "+t);var e,n=e[1]||" ",r=e[2]||">",i=e[3]||"-",o=e[4]||"",a=!!e[5],s=e[6]&&+e[6],u=!!e[7],c=e[8]&&+e[8].slice(1),h=e[9]||"";"n"===h?(u=!0,h="g"):hi[h]||(h=""),(a||"0"===n&&"="===r)&&(a=!0,n="0",r="="),this.fill=n,this.align=r,this.sign=i,this.symbol=o,this.zero=a,this.width=s,this.comma=u,this.precision=c,this.type=h}function pi(t){return t}li.prototype=di.prototype,di.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var yi,gi=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function vi(){return new mi}function mi(){this.reset()}yi=function(t){var e,n,r=t.grouping&&t.thousands?(e=t.grouping,n=t.thousands,function(t,r){for(var i=t.length,o=[],a=0,s=e[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(t.substring(i-=s,i+s)),!((u+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(n)}):pi,i=t.currency,o=t.decimal,a=t.numerals?function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(t.numerals):pi,s=t.percent||"%";function u(t){var e=(t=li(t)).fill,n=t.align,u=t.sign,c=t.symbol,h=t.zero,f=t.width,l=t.comma,d=t.precision,p=t.type,y="$"===c?i[0]:"#"===c&&/[boxX]/.test(p)?"0"+p.toLowerCase():"",g="$"===c?i[1]:/[%p]/.test(p)?s:"",v=hi[p],m=!p||/[defgprs%]/.test(p);function _(t){var i,s,c,_=y,b=g;if("c"===p)b=v(t)+b,t="";else{var w=(t=+t)<0;if(t=v(Math.abs(t),d),w&&0==+t&&(w=!1),_=(w?"("===u?u:"-":"-"===u||"("===u?"":u)+_,b=("s"===p?gi[8+ai/3]:"")+b+(w&&"("===u?")":""),m)for(i=-1,s=t.length;++i<s;)if(48>(c=t.charCodeAt(i))||c>57){b=(46===c?o+t.slice(i+1):t.slice(i))+b,t=t.slice(0,i);break}}l&&!h&&(t=r(t,1/0));var x=_.length+t.length+b.length,k=x<f?new Array(f-x+1).join(e):"";switch(l&&h&&(t=r(k+t,k.length?f-b.length:1/0),k=""),n){case"<":t=_+t+b+k;break;case"=":t=_+k+t+b;break;case"^":t=k.slice(0,x=k.length>>1)+_+t+b+k.slice(x);break;default:t=k+_+t+b}return a(t)}return d=null==d?p?6:12:/[gprs]/.test(p)?Math.max(1,Math.min(21,d)):Math.max(0,Math.min(20,d)),_.toString=function(){return t+""},_}return{format:u,formatPrefix:function(t,e){var n,r=u(((t=li(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor((n=e,((n=ui(Math.abs(n)))?n[1]:NaN)/3)))),o=Math.pow(10,-i),a=gi[8+i/3];return function(t){return r(o*t)+a}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),yi.format,yi.formatPrefix,mi.prototype={constructor:mi,reset:function(){this.s=this.t=0},add:function(t){bi(_i,t,this.t),bi(this,_i.s,this.s),this.s?this.t+=_i.t:this.s=_i.t},valueOf:function(){return this.s}};var _i=new mi;function bi(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}var wi=Math.PI,xi=wi/2,ki=2*wi,Mi=wi/180,Ei=(Math.abs,Math.atan),Ai=Math.atan2,Si=Math.cos,Li=(Math.ceil,Math.exp,Math.floor,Math.log,Math.pow,Math.sin),Ni=(Math.sign,Math.sqrt);Math.tan;function $i(t){return t>1?xi:t<-1?-xi:Math.asin(t)}function Ci(t,e){return[t>wi?t-ki:t<-wi?t+ki:t,e]}vi(),vi(),vi(),Ci.invert=Ci;vi();function Ti(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var Gi=function(t){return 1===t.length&&(t=function(t){return function(e,n){return Ti(t(e),n)}}(t)),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}(Ti);Gi.right,Gi.left;var Ui=Array.prototype;function Di(){}function Oi(t){return function(e,n){var r=Si(e),i=Si(n),o=t(r*i);return[o*i*Li(e),o*Li(n)]}}function zi(t){return function(e,n){var r=Ni(e*e+n*n),i=t(r),o=Li(i),a=Si(i);return[Ai(e*o,r*a),$i(r&&n*o/r)]}}function ji(t,e){return[t,e]}function Pi(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function Ii(t,e){var n,r,i,o,a,s=new Yi(t),u=+t.value&&(s.value=t.value),c=[s];for(null==e&&(e=Ri);n=c.pop();)if(u&&(n.value=+n.data.value),(i=e(n.data))&&(a=i.length))for(n.children=new Array(a),o=a-1;o>=0;--o)c.push(r=n.children[o]=new Yi(i[o])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(qi)}function Ri(t){return t.children}function Fi(t){t.data=t.data.data}function qi(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function Yi(t){this.data=t,this.depth=this.height=0,this.parent=null}function Bi(t,e,n,r,i){for(var o,a=t.children,s=-1,u=a.length,c=t.value&&(r-e)/t.value;++s<u;)(o=a[s]).y0=n,o.y1=i,o.x0=e,o.x1=e+=o.value*c}function Wi(t,e,n,r,i){for(var o,a=t.children,s=-1,u=a.length,c=t.value&&(i-n)/t.value;++s<u;)(o=a[s]).x0=e,o.x1=r,o.y0=n,o.y1=n+=o.value*c}Ui.slice,Ui.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2),vi(),vi(),vi(),vi(),Di.prototype={constructor:Di,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},Si(30*Mi),Oi((function(t){return Ni(2/(1+t))})).invert=zi((function(t){return 2*$i(t/2)})),Oi((function(t){return(t=(e=t)>1?0:e<-1?wi:Math.acos(e))&&t/Li(t);var e})).invert=zi((function(t){return t})),ji.invert=ji,zi(Ei),zi($i),zi((function(t){return 2*Ei(t)})),Yi.prototype=Ii.prototype={constructor:Yi,count:function(){return this.eachAfter(Pi)},each:function(t){var e,n,r,i,o=this,a=[o];do{for(e=a.reverse(),a=[];o=e.pop();)if(t(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r])}while(a.length);return this},eachAfter:function(t){for(var e,n,r,i=this,o=[i],a=[];i=o.pop();)if(a.push(i),e=i.children)for(n=0,r=e.length;n<r;++n)o.push(e[n]);for(;i=a.pop();)t(i);return this},eachBefore:function(t){for(var e,n,r=this,i=[r];r=i.pop();)if(t(r),e=r.children)for(n=e.length-1;n>=0;--n)i.push(e[n]);return this},sum:function(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){var t=[];return this.each((function(e){t.push(e)})),t},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},copy:function(){return Ii(this).eachBefore(Fi)}},Array.prototype.slice,Object.create(Yi.prototype);var Ki=(1+Math.sqrt(5))/2;function Hi(t,e,n,r,i,o){for(var a,s,u,c,h,f,l,d,p,y,g,v=[],m=e.children,_=0,b=0,w=m.length,x=e.value;_<w;){u=i-n,c=o-r;do{h=m[b++].value}while(!h&&b<w);for(f=l=h,g=h*h*(y=Math.max(c/u,u/c)/(x*t)),p=Math.max(l/g,g/f);b<w;++b){if(h+=s=m[b].value,s<f&&(f=s),s>l&&(l=s),g=h*h*y,(d=Math.max(l/g,g/f))>p){h-=s;break}p=d}v.push(a={value:h,dice:u<c,children:m.slice(_,b)}),a.dice?Bi(a,n,r,i,x?r+=c*h/x:o):Wi(a,n,r,x?n+=u*h/x:i,o),x-=h,_=b}return v}!function t(e){function n(t,n,r,i,o){Hi(e,t,n,r,i,o)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(Ki),function t(e){function n(t,n,r,i,o){if((a=t._squarify)&&a.ratio===e)for(var a,s,u,c,h,f=-1,l=a.length,d=t.value;++f<l;){for(u=(s=a[f]).children,c=s.value=0,h=u.length;c<h;++c)s.value+=u[c].value;s.dice?Bi(s,n,r,i,r+=(o-r)*s.value/d):Wi(s,n,r,n+=(i-n)*s.value/d,o),d-=s.value}else t._squarify=a=Hi(e,t,n,r,i,o),a.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(Ki);var Xi=[].slice,Vi={};function Zi(t){this._size=t,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}function Ji(t){if(!t._start)try{!function(t){for(;t._start=t._waiting&&t._active<t._size;){var e=t._ended+t._active,n=t._tasks[e],r=n.length-1,i=n[r];n[r]=Qi(t,e),--t._waiting,++t._active,n=i.apply(null,n),t._tasks[e]&&(t._tasks[e]=n||Vi)}}(t)}catch(e){if(t._tasks[t._ended+t._active-1])to(t,e);else if(!t._data)throw e}}function Qi(t,e){return function(n,r){t._tasks[e]&&(--t._active,++t._ended,t._tasks[e]=null,null==t._error&&(null!=n?to(t,n):(t._data[e]=r,t._waiting?Ji(t):eo(t))))}}function to(t,e){var n,r=t._tasks.length;for(t._error=e,t._data=void 0,t._waiting=NaN;--r>=0;)if((n=t._tasks[r])&&(t._tasks[r]=null,n.abort))try{n.abort()}catch(e){}t._active=NaN,eo(t)}function eo(t){if(!t._active&&t._call){var e=t._data;t._data=void 0,t._call(t._error,e)}}function no(){return Math.random()}Zi.prototype=function(t){if(null==t)t=1/0;else if(!((t=+t)>=1))throw new Error("invalid concurrency");return new Zi(t)}.prototype={constructor:Zi,defer:function(t){if("function"!=typeof t)throw new Error("invalid callback");if(this._call)throw new Error("defer after await");if(null!=this._error)return this;var e=Xi.call(arguments,1);return e.push(t),++this._waiting,this._tasks.push(e),Ji(this),this},abort:function(){return null==this._error&&to(this,new Error("abort")),this},await:function(t){if("function"!=typeof t)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=function(e,n){t.apply(null,[e].concat(n))},eo(this),this},awaitAll:function(t){if("function"!=typeof t)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=t,eo(this),this}},function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,1===arguments.length?(n=t,t=0):n-=t,function(){return e()*n+t}}return n.source=t,n}(no);const ro=function t(e){function n(t,n){var r,i;return t=null==t?0:+t,n=null==n?1:+n,function(){var o;if(null!=r)o=r,r=null;else do{r=2*e()-1,o=2*e()-1,i=r*r+o*o}while(!i||i>1);return t+n*o*Math.sqrt(-2*Math.log(i)/i)}}return n.source=t,n}(no),io=(function t(e){function n(){var t=ro.source(e).apply(this,arguments);return function(){return Math.exp(t())}}return n.source=t,n}(no),function t(e){function n(t){return function(){for(var n=0,r=0;r<t;++r)n+=e();return n}}return n.source=t,n}(no));function oo(t,e){var n,r,i,o,a=m("beforesend","progress","load","error"),s=Dr(),u=new XMLHttpRequest,c=null,h=null,f=0;function l(t){var e,r=u.status;if(!r&&function(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}(u)||r>=200&&r<300||304===r){if(i)try{e=i.call(n,u)}catch(t){return void a.call("error",n,t)}else e=u;a.call("load",n,e)}else a.call("error",n,t)}if("undefined"!=typeof XDomainRequest&&!("withCredentials"in u)&&/^(http(s)?:)?\/\//.test(t)&&(u=new XDomainRequest),"onload"in u?u.onload=u.onerror=u.ontimeout=l:u.onreadystatechange=function(t){u.readyState>3&&l(t)},u.onprogress=function(t){a.call("progress",n,t)},n={header:function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?s.get(t):(null==e?s.remove(t):s.set(t,e+""),n)},mimeType:function(t){return arguments.length?(r=null==t?null:t+"",n):r},responseType:function(t){return arguments.length?(o=t,n):o},timeout:function(t){return arguments.length?(f=+t,n):f},user:function(t){return arguments.length<1?c:(c=null==t?null:t+"",n)},password:function(t){return arguments.length<1?h:(h=null==t?null:t+"",n)},response:function(t){return i=t,n},get:function(t,e){return n.send("GET",t,e)},post:function(t,e){return n.send("POST",t,e)},send:function(e,i,l){return u.open(e,t,!0,c,h),null==r||s.has("accept")||s.set("accept",r+",*/*"),u.setRequestHeader&&s.each((function(t,e){u.setRequestHeader(e,t)})),null!=r&&u.overrideMimeType&&u.overrideMimeType(r),null!=o&&(u.responseType=o),f>0&&(u.timeout=f),null==l&&"function"==typeof i&&(l=i,i=null),null!=l&&1===l.length&&(l=function(t){return function(e,n){t(null==e?n:null)}}(l)),null!=l&&n.on("error",l).on("load",(function(t){l(null,t)})),a.call("beforesend",n,u),u.send(null==i?null:i),n},abort:function(){return u.abort(),n},on:function(){var t=a.on.apply(a,arguments);return t===a?n:t}},null!=e){if("function"!=typeof e)throw new Error("invalid callback: "+e);return n.get(e)}return n}function ao(t,e){return function(n,r){var i=oo(n).mimeType(t).response(e);if(null!=r){if("function"!=typeof r)throw new Error("invalid callback: "+r);return i.get(r)}return i}}function so(t,e){return function(n,r,i){arguments.length<3&&(i=r,r=null);var o=oo(n).mimeType(t);return o.row=function(t){return arguments.length?o.response(function(t,e){return function(n){return t(n.responseText,e)}}(e,r=t)):r},o.row(r),i?o.get(i):o}}(function t(e){function n(t){var n=io.source(e)(t);return function(){return n()/t}}return n.source=t,n})(no),function t(e){function n(t){return function(){return-Math.log(1-e())/t}}return n.source=t,n}(no),ao("text/html",(function(t){return document.createRange().createContextualFragment(t.responseText)})),ao("application/json",(function(t){return JSON.parse(t.responseText)})),ao("text/plain",(function(t){return t.responseText})),ao("application/xml",(function(t){var e=t.responseXML;if(!e)throw new Error("parse error");return e})),so("text/csv",qr),so("text/tab-separated-values",Br);var uo=Array.prototype;uo.map,uo.slice;var co=new Date,ho=new Date;function fo(t,e,n,r){function i(e){return t(e=new Date(+e)),e}return i.floor=i,i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,o){var a,s=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return s;do{s.push(a=new Date(+n)),e(n,o),t(n)}while(a<n&&n<r);return s},i.filter=function(n){return fo((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}))},n&&(i.count=function(e,r){return co.setTime(+e),ho.setTime(+r),t(co),t(ho),Math.floor(n(co,ho))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}var lo=fo((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));lo.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?fo((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):lo:null},lo.range;var po=1e3,yo=6e4,go=36e5,vo=864e5,mo=6048e5,_o=fo((function(t){t.setTime(Math.floor(t/po)*po)}),(function(t,e){t.setTime(+t+e*po)}),(function(t,e){return(e-t)/po}),(function(t){return t.getUTCSeconds()}));_o.range;var bo=fo((function(t){t.setTime(Math.floor(t/yo)*yo)}),(function(t,e){t.setTime(+t+e*yo)}),(function(t,e){return(e-t)/yo}),(function(t){return t.getMinutes()}));bo.range;var wo=fo((function(t){var e=t.getTimezoneOffset()*yo%go;e<0&&(e+=go),t.setTime(Math.floor((+t-e)/go)*go+e)}),(function(t,e){t.setTime(+t+e*go)}),(function(t,e){return(e-t)/go}),(function(t){return t.getHours()}));wo.range;var xo=fo((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*yo)/vo}),(function(t){return t.getDate()-1}));const ko=xo;function Mo(t){return fo((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*yo)/mo}))}xo.range;var Eo=Mo(0),Ao=Mo(1),So=Mo(2),Lo=Mo(3),No=Mo(4),$o=Mo(5),Co=Mo(6),To=(Eo.range,Ao.range,So.range,Lo.range,No.range,$o.range,Co.range,fo((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})));To.range;var Go=fo((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));Go.every=function(t){return isFinite(t=Math.floor(t))&&t>0?fo((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};const Uo=Go;Go.range;var Do=fo((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+e*yo)}),(function(t,e){return(e-t)/yo}),(function(t){return t.getUTCMinutes()}));Do.range;var Oo=fo((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+e*go)}),(function(t,e){return(e-t)/go}),(function(t){return t.getUTCHours()}));Oo.range;var zo=fo((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/vo}),(function(t){return t.getUTCDate()-1}));const jo=zo;function Po(t){return fo((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/mo}))}zo.range;var Io=Po(0),Ro=Po(1),Fo=Po(2),qo=Po(3),Yo=Po(4),Bo=Po(5),Wo=Po(6),Ko=(Io.range,Ro.range,Fo.range,qo.range,Yo.range,Bo.range,Wo.range,fo((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()})));Ko.range;var Ho=fo((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));Ho.every=function(t){return isFinite(t=Math.floor(t))&&t>0?fo((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};const Xo=Ho;function Vo(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Zo(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Jo(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}Ho.range;var Qo,ta,ea,na={"-":"",_:" ",0:"0"},ra=/^\s*\d+/,ia=/^%/,oa=/[\\^$*+?|[\]().{}]/g;function aa(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function sa(t){return t.replace(oa,"\\$&")}function ua(t){return new RegExp("^(?:"+t.map(sa).join("|")+")","i")}function ca(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function ha(t,e,n){var r=ra.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function fa(t,e,n){var r=ra.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function la(t,e,n){var r=ra.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function da(t,e,n){var r=ra.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function pa(t,e,n){var r=ra.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function ya(t,e,n){var r=ra.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function ga(t,e,n){var r=ra.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function va(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function ma(t,e,n){var r=ra.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function _a(t,e,n){var r=ra.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function ba(t,e,n){var r=ra.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function wa(t,e,n){var r=ra.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function xa(t,e,n){var r=ra.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function ka(t,e,n){var r=ra.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Ma(t,e,n){var r=ra.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Ea(t,e,n){var r=ra.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Aa(t,e,n){var r=ia.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Sa(t,e,n){var r=ra.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function La(t,e,n){var r=ra.exec(e.slice(n));return r?(t.Q=1e3*+r[0],n+r[0].length):-1}function Na(t,e){return aa(t.getDate(),e,2)}function $a(t,e){return aa(t.getHours(),e,2)}function Ca(t,e){return aa(t.getHours()%12||12,e,2)}function Ta(t,e){return aa(1+ko.count(Uo(t),t),e,3)}function Ga(t,e){return aa(t.getMilliseconds(),e,3)}function Ua(t,e){return Ga(t,e)+"000"}function Da(t,e){return aa(t.getMonth()+1,e,2)}function Oa(t,e){return aa(t.getMinutes(),e,2)}function za(t,e){return aa(t.getSeconds(),e,2)}function ja(t){var e=t.getDay();return 0===e?7:e}function Pa(t,e){return aa(Eo.count(Uo(t),t),e,2)}function Ia(t,e){var n=t.getDay();return t=n>=4||0===n?No(t):No.ceil(t),aa(No.count(Uo(t),t)+(4===Uo(t).getDay()),e,2)}function Ra(t){return t.getDay()}function Fa(t,e){return aa(Ao.count(Uo(t),t),e,2)}function qa(t,e){return aa(t.getFullYear()%100,e,2)}function Ya(t,e){return aa(t.getFullYear()%1e4,e,4)}function Ba(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+aa(e/60|0,"0",2)+aa(e%60,"0",2)}function Wa(t,e){return aa(t.getUTCDate(),e,2)}function Ka(t,e){return aa(t.getUTCHours(),e,2)}function Ha(t,e){return aa(t.getUTCHours()%12||12,e,2)}function Xa(t,e){return aa(1+jo.count(Xo(t),t),e,3)}function Va(t,e){return aa(t.getUTCMilliseconds(),e,3)}function Za(t,e){return Va(t,e)+"000"}function Ja(t,e){return aa(t.getUTCMonth()+1,e,2)}function Qa(t,e){return aa(t.getUTCMinutes(),e,2)}function ts(t,e){return aa(t.getUTCSeconds(),e,2)}function es(t){var e=t.getUTCDay();return 0===e?7:e}function ns(t,e){return aa(Io.count(Xo(t),t),e,2)}function rs(t,e){var n=t.getUTCDay();return t=n>=4||0===n?Yo(t):Yo.ceil(t),aa(Yo.count(Xo(t),t)+(4===Xo(t).getUTCDay()),e,2)}function is(t){return t.getUTCDay()}function os(t,e){return aa(Ro.count(Xo(t),t),e,2)}function as(t,e){return aa(t.getUTCFullYear()%100,e,2)}function ss(t,e){return aa(t.getUTCFullYear()%1e4,e,4)}function us(){return"+0000"}function cs(){return"%"}function hs(t){return+t}function fs(t){return Math.floor(+t/1e3)}Qo=function(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,u=t.shortMonths,c=ua(i),h=ca(i),f=ua(o),l=ca(o),d=ua(a),p=ca(a),y=ua(s),g=ca(s),v=ua(u),m=ca(u),_={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:Na,e:Na,f:Ua,H:$a,I:Ca,j:Ta,L:Ga,m:Da,M:Oa,p:function(t){return i[+(t.getHours()>=12)]},Q:hs,s:fs,S:za,u:ja,U:Pa,V:Ia,w:Ra,W:Fa,x:null,X:null,y:qa,Y:Ya,Z:Ba,"%":cs},b={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return u[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:Wa,e:Wa,f:Za,H:Ka,I:Ha,j:Xa,L:Va,m:Ja,M:Qa,p:function(t){return i[+(t.getUTCHours()>=12)]},Q:hs,s:fs,S:ts,u:es,U:ns,V:rs,w:is,W:os,x:null,X:null,y:as,Y:ss,Z:us,"%":cs},w={a:function(t,e,n){var r=d.exec(e.slice(n));return r?(t.w=p[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=f.exec(e.slice(n));return r?(t.w=l[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=v.exec(e.slice(n));return r?(t.m=m[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=y.exec(e.slice(n));return r?(t.m=g[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,n,r){return M(t,e,n,r)},d:_a,e:_a,f:Ea,H:wa,I:wa,j:ba,L:Ma,m:ma,M:xa,p:function(t,e,n){var r=c.exec(e.slice(n));return r?(t.p=h[r[0].toLowerCase()],n+r[0].length):-1},Q:Sa,s:La,S:ka,u:fa,U:la,V:da,w:ha,W:pa,x:function(t,e,r){return M(t,n,e,r)},X:function(t,e,n){return M(t,r,e,n)},y:ga,Y:ya,Z:va,"%":Aa};function x(t,e){return function(n){var r,i,o,a=[],s=-1,u=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===t.charCodeAt(s)&&(a.push(t.slice(u,s)),null!=(i=na[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),u=s+1);return a.push(t.slice(u,s)),a.join("")}}function k(t,e){return function(n){var r,i,o=Jo(1900);if(M(o,t,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("p"in o&&(o.H=o.H%12+12*o.p),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=Zo(Jo(o.y))).getUTCDay(),r=i>4||0===i?Ro.ceil(r):Ro(r),r=jo.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=e(Jo(o.y))).getDay(),r=i>4||0===i?Ao.ceil(r):Ao(r),r=ko.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?Zo(Jo(o.y)).getUTCDay():e(Jo(o.y)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Zo(o)):e(o)}}function M(t,e,n,r){for(var i,o,a=0,s=e.length,u=n.length;a<s;){if(r>=u)return-1;if(37===(i=e.charCodeAt(a++))){if(i=e.charAt(a++),!(o=w[i in na?e.charAt(a++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return _.x=x(n,_),_.X=x(r,_),_.c=x(e,_),b.x=x(n,b),b.X=x(r,b),b.c=x(e,b),{format:function(t){var e=x(t+="",_);return e.toString=function(){return t},e},parse:function(t){var e=k(t+="",Vo);return e.toString=function(){return t},e},utcFormat:function(t){var e=x(t+="",b);return e.toString=function(){return t},e},utcParse:function(t){var e=k(t,Zo);return e.toString=function(){return t},e}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),Qo.format,Qo.parse,ta=Qo.utcFormat,ea=Qo.utcParse;var ls="%Y-%m-%dT%H:%M:%S.%LZ";function ds(t){return t.match(/.{6}/g).map((function(t){return"#"+t}))}function ps(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}Date.prototype.toISOString||ta(ls),+new Date("2000-01-01T00:00:00.000Z")||ea(ls),ds("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),ds("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),ds("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),ds("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),En(Ke(300,.5,0),Ke(-240,.5,1)),En(Ke(-100,.75,.35),Ke(80,1.5,.8)),En(Ke(260,.75,.35),Ke(80,1.5,.8)),Ke(),ps(ds("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),ps(ds("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),ps(ds("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),ps(ds("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),Math.abs,Math.atan2,Math.cos,Math.max,Math.min,Math.sin,Math.sqrt;var ys=Math.PI,gs=2*ys;function vs(t){this._context=t}function ms(t){this._curve=t}vs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}},ms.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}},Array.prototype.slice,Math.sqrt(1/3);Math.sin(ys/10),Math.sin(7*ys/10);function _s(){}function bs(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function ws(t){this._context=t}function xs(t,e){this._basis=new ws(t),this._beta=e}function ks(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Ms(t,e){this._context=t,this._k=(1-e)/6}function Es(t,e){this._context=t,this._k=(1-e)/6}function As(t,e){this._context=t,this._k=(1-e)/6}function Ss(t,e,n){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>1e-12){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>1e-12){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,h=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*c+t._x1*t._l23_2a-e*t._l12_2a)/h,a=(a*c+t._y1*t._l23_2a-n*t._l12_2a)/h}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function Ls(t,e){this._context=t,this._alpha=e}function Ns(t,e){this._context=t,this._alpha=e}function $s(t,e){this._context=t,this._alpha=e}function Cs(t){return t<0?-1:1}function Ts(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(Cs(o)+Cs(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function Gs(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Us(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function Ds(t){this._context=t}function Os(t){this._context=t}function zs(){this._=null}function js(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Ps(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Is(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Rs(t){for(;t.L;)t=t.L;return t}Math.sin(gs/10),Math.cos(gs/10),Math.sqrt(3),Math.sqrt(3),Math.sqrt(12),ws.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:bs(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:bs(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},xs.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],o=e[0],a=t[n]-i,s=e[n]-o,u=-1;++u<=n;)r=u/n,this._basis.point(this._beta*t[u]+(1-this._beta)*(i+r*a),this._beta*e[u]+(1-this._beta)*(o+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}},function t(e){function n(t){return 1===e?new ws(t):new xs(t,e)}return n.beta=function(e){return t(+e)},n}(.85),Ms.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ks(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:ks(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}},function t(e){function n(t){return new Ms(t,e)}return n.tension=function(e){return t(+e)},n}(0),Es.prototype={areaStart:_s,areaEnd:_s,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:ks(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}},function t(e){function n(t){return new Es(t,e)}return n.tension=function(e){return t(+e)},n}(0),As.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ks(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}},function t(e){function n(t){return new As(t,e)}return n.tension=function(e){return t(+e)},n}(0),Ls.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Ss(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}},function t(e){function n(t){return e?new Ls(t,e):new Ms(t,0)}return n.alpha=function(e){return t(+e)},n}(.5),Ns.prototype={areaStart:_s,areaEnd:_s,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Ss(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}},function t(e){function n(t){return e?new Ns(t,e):new Es(t,0)}return n.alpha=function(e){return t(+e)},n}(.5),$s.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ss(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}},function t(e){function n(t){return e?new $s(t,e):new As(t,0)}return n.alpha=function(e){return t(+e)},n}(.5),Ds.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Us(this,this._t0,Gs(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Us(this,Gs(this,n=Ts(this,t,e)),n);break;default:Us(this,this._t0,n=Ts(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(function(t){this._context=new Os(t)}.prototype=Object.create(Ds.prototype)).point=function(t,e){Ds.prototype.point.call(this,e,t)},Os.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}},zs.prototype={constructor:zs,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Rs(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(Ps(this,n),n=(t=n).U),n.C=!1,r.C=!0,Is(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(Is(this,n),n=(t=n).U),n.C=!1,r.C=!0,Ps(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,a=t.R;if(n=o?a?Rs(a):o:a,i?i.L===t?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=a,a.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,Ps(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Is(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,Ps(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,Is(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Ps(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,Is(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};const Fs=zs;function qs(t,e,n,r){var i=[null,null],o=du.push(i)-1;return i.left=t,i.right=e,n&&Bs(i,t,e,n),r&&Bs(i,e,t,r),fu[t.index].halfedges.push(o),fu[e.index].halfedges.push(o),i}function Ys(t,e,n){var r=[e,n];return r.left=t,r}function Bs(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function Ws(t,e,n,r,i){var o,a=t[0],s=t[1],u=a[0],c=a[1],h=0,f=1,l=s[0]-u,d=s[1]-c;if(o=e-u,l||!(o>0)){if(o/=l,l<0){if(o<h)return;o<f&&(f=o)}else if(l>0){if(o>f)return;o>h&&(h=o)}if(o=r-u,l||!(o<0)){if(o/=l,l<0){if(o>f)return;o>h&&(h=o)}else if(l>0){if(o<h)return;o<f&&(f=o)}if(o=n-c,d||!(o>0)){if(o/=d,d<0){if(o<h)return;o<f&&(f=o)}else if(d>0){if(o>f)return;o>h&&(h=o)}if(o=i-c,d||!(o<0)){if(o/=d,d<0){if(o>f)return;o>h&&(h=o)}else if(d>0){if(o<h)return;o<f&&(f=o)}return!(h>0||f<1)||(h>0&&(t[0]=[u+h*l,c+h*d]),f<1&&(t[1]=[u+f*l,c+f*d]),!0)}}}}}function Ks(t,e,n,r,i){var o=t[1];if(o)return!0;var a,s,u=t[0],c=t.left,h=t.right,f=c[0],l=c[1],d=h[0],p=h[1],y=(f+d)/2,g=(l+p)/2;if(p===l){if(y<e||y>=r)return;if(f>d){if(u){if(u[1]>=i)return}else u=[y,n];o=[y,i]}else{if(u){if(u[1]<n)return}else u=[y,i];o=[y,n]}}else if(s=g-(a=(f-d)/(p-l))*y,a<-1||a>1)if(f>d){if(u){if(u[1]>=i)return}else u=[(n-s)/a,n];o=[(i-s)/a,i]}else{if(u){if(u[1]<n)return}else u=[(i-s)/a,i];o=[(n-s)/a,n]}else if(l<p){if(u){if(u[0]>=r)return}else u=[e,a*e+s];o=[r,a*r+s]}else{if(u){if(u[0]<e)return}else u=[r,a*r+s];o=[e,a*e+s]}return t[0]=u,t[1]=o,!0}function Hs(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function Xs(t,e){return e[+(e.left!==t.site)]}function Vs(t,e){return e[+(e.left===t.site)]}var Zs,Js=[];function Qs(){js(this),this.x=this.y=this.arc=this.site=this.cy=null}function tu(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i[0],s=i[1],u=r[0]-a,c=r[1]-s,h=o[0]-a,f=o[1]-s,l=2*(u*f-c*h);if(!(l>=-yu)){var d=u*u+c*c,p=h*h+f*f,y=(f*d-c*p)/l,g=(u*p-h*d)/l,v=Js.pop()||new Qs;v.arc=t,v.site=i,v.x=y+a,v.y=(v.cy=g+s)+Math.sqrt(y*y+g*g),t.circle=v;for(var m=null,_=lu._;_;)if(v.y<_.y||v.y===_.y&&v.x<=_.x){if(!_.L){m=_.P;break}_=_.L}else{if(!_.R){m=_;break}_=_.R}lu.insert(m,v),m||(Zs=v)}}}}function eu(t){var e=t.circle;e&&(e.P||(Zs=e.N),lu.remove(e),Js.push(e),js(e),t.circle=null)}var nu=[];function ru(){js(this),this.edge=this.site=this.circle=null}function iu(t){var e=nu.pop()||new ru;return e.site=t,e}function ou(t){eu(t),hu.remove(t),nu.push(t),js(t)}function au(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,a=t.N,s=[t];ou(t);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<pu&&Math.abs(r-u.circle.cy)<pu;)o=u.P,s.unshift(u),ou(u),u=o;s.unshift(u),eu(u);for(var c=a;c.circle&&Math.abs(n-c.circle.x)<pu&&Math.abs(r-c.circle.cy)<pu;)a=c.N,s.push(c),ou(c),c=a;s.push(c),eu(c);var h,f=s.length;for(h=1;h<f;++h)c=s[h],u=s[h-1],Bs(c.edge,u.site,c.site,i);u=s[0],(c=s[f-1]).edge=qs(u.site,c.site,null,i),tu(u),tu(c)}function su(t){for(var e,n,r,i,o=t[0],a=t[1],s=hu._;s;)if((r=uu(s,a)-o)>pu)s=s.L;else{if(!((i=o-cu(s,a))>pu)){r>-pu?(e=s.P,n=s):i>-pu?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}!function(t){fu[t.index]={site:t,halfedges:[]}}(t);var u=iu(t);if(hu.insert(e,u),e||n){if(e===n)return eu(e),n=iu(e.site),hu.insert(u,n),u.edge=n.edge=qs(e.site,u.site),tu(e),void tu(n);if(n){eu(e),eu(n);var c=e.site,h=c[0],f=c[1],l=t[0]-h,d=t[1]-f,p=n.site,y=p[0]-h,g=p[1]-f,v=2*(l*g-d*y),m=l*l+d*d,_=y*y+g*g,b=[(g*m-d*_)/v+h,(l*_-y*m)/v+f];Bs(n.edge,c,p,b),u.edge=qs(c,t,null,b),n.edge=qs(t,p,null,b),tu(e),tu(n)}else u.edge=qs(e.site,u.site)}}function uu(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var a=t.P;if(!a)return-1/0;var s=(n=a.site)[0],u=n[1],c=u-e;if(!c)return s;var h=s-r,f=1/o-1/c,l=h/c;return f?(-l+Math.sqrt(l*l-2*f*(h*h/(-2*c)-u+c/2+i-o/2)))/f+r:(r+s)/2}function cu(t,e){var n=t.N;if(n)return uu(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var hu,fu,lu,du,pu=1e-6,yu=1e-12;function gu(t,e){return e[1]-t[1]||e[0]-t[0]}function vu(t,e){var n,r,i,o=t.sort(gu).pop();for(du=[],fu=new Array(t.length),hu=new Fs,lu=new Fs;;)if(i=Zs,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(su(o),n=o[0],r=o[1]),o=t.pop();else{if(!i)break;au(i.arc)}if(function(){for(var t,e,n,r,i=0,o=fu.length;i<o;++i)if((t=fu[i])&&(r=(e=t.halfedges).length)){var a=new Array(r),s=new Array(r);for(n=0;n<r;++n)a[n]=n,s[n]=Hs(t,du[e[n]]);for(a.sort((function(t,e){return s[e]-s[t]})),n=0;n<r;++n)s[n]=e[a[n]];for(n=0;n<r;++n)e[n]=s[n]}}(),e){var a=+e[0][0],s=+e[0][1],u=+e[1][0],c=+e[1][1];!function(t,e,n,r){for(var i,o=du.length;o--;)Ks(i=du[o],t,e,n,r)&&Ws(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>pu||Math.abs(i[0][1]-i[1][1])>pu)||delete du[o]}(a,s,u,c),function(t,e,n,r){var i,o,a,s,u,c,h,f,l,d,p,y,g=fu.length,v=!0;for(i=0;i<g;++i)if(o=fu[i]){for(a=o.site,s=(u=o.halfedges).length;s--;)du[u[s]]||u.splice(s,1);for(s=0,c=u.length;s<c;)p=(d=Vs(o,du[u[s]]))[0],y=d[1],f=(h=Xs(o,du[u[++s%c]]))[0],l=h[1],(Math.abs(p-f)>pu||Math.abs(y-l)>pu)&&(u.splice(s,0,du.push(Ys(a,d,Math.abs(p-t)<pu&&r-y>pu?[t,Math.abs(f-t)<pu?l:r]:Math.abs(y-r)<pu&&n-p>pu?[Math.abs(l-r)<pu?f:n,r]:Math.abs(p-n)<pu&&y-e>pu?[n,Math.abs(f-n)<pu?l:e]:Math.abs(y-e)<pu&&p-t>pu?[Math.abs(l-e)<pu?f:t,e]:null))-1),++c);c&&(v=!1)}if(v){var m,_,b,w=1/0;for(i=0,v=null;i<g;++i)(o=fu[i])&&(b=(m=(a=o.site)[0]-t)*m+(_=a[1]-e)*_)<w&&(w=b,v=o);if(v){var x=[t,e],k=[t,r],M=[n,r],E=[n,e];v.halfedges.push(du.push(Ys(a=v.site,x,k))-1,du.push(Ys(a,k,M))-1,du.push(Ys(a,M,E))-1,du.push(Ys(a,E,x))-1)}}for(i=0;i<g;++i)(o=fu[i])&&(o.halfedges.length||delete fu[i])}(a,s,u,c)}this.edges=du,this.cells=fu,hu=lu=du=fu=null}function mu(t){return function(){return t}}function _u(t,e,n){this.target=t,this.type=e,this.transform=n}function bu(t,e,n){this.k=t,this.x=e,this.y=n}vu.prototype={constructor:vu,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return Xs(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,r){if(o=(i=n.halfedges).length)for(var i,o,a,s=n.site,u=-1,c=e[i[o-1]],h=c.left===s?c.right:c.left;++u<o;)a=h,h=(c=e[i[u]]).left===s?c.right:c.left,a&&h&&r<a.index&&r<h.index&&(l=a,d=h,((f=s)[0]-d[0])*(l[1]-f[1])-(f[0]-l[0])*(d[1]-f[1])<0)&&t.push([s.data,a.data,h.data]);var f,l,d})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var r,i,o=this,a=o._found||0,s=o.cells.length;!(i=o.cells[a]);)if(++a>=s)return null;var u=t-i.site[0],c=e-i.site[1],h=u*u+c*c;do{i=o.cells[r=a],a=null,i.halfedges.forEach((function(n){var r=o.edges[n],s=r.left;if(s!==i.site&&s||(s=r.right)){var u=t-s[0],c=e-s[1],f=u*u+c*c;f<h&&(h=f,a=s.index)}}))}while(null!==a);return o._found=r,null==n||h<=n*n?i.site:null}},bu.prototype={constructor:bu,scale:function(t){return 1===t?this:new bu(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new bu(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var wu=new bu(1,0,0);function xu(){_t.stopImmediatePropagation()}function ku(){_t.preventDefault(),_t.stopImmediatePropagation()}function Mu(){return!_t.button}function Eu(){var t,e,n=this;return n instanceof SVGElement?(t=(n=n.ownerSVGElement||n).width.baseVal.value,e=n.height.baseVal.value):(t=n.clientWidth,e=n.clientHeight),[[0,0],[t,e]]}function Au(){return this.__zoom||wu}function Su(){return-_t.deltaY*(_t.deltaMode?120:1)/500}function Lu(){return"ontouchstart"in this}function Nu(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}bu.prototype;var $u="undefined"!=typeof navigator&&navigator.userAgent.toLowerCase().indexOf("firefox")>0;function Cu(t,e,n,r){t.addEventListener?t.addEventListener(e,n,r):t.attachEvent&&t.attachEvent("on".concat(e),(function(){n(window.event)}))}function Tu(t,e){for(var n=e.slice(0,e.length-1),r=0;r<n.length;r++)n[r]=t[n[r].toLowerCase()];return n}function Gu(t){"string"!=typeof t&&(t="");for(var e=(t=t.replace(/\s/g,"")).split(","),n=e.lastIndexOf("");n>=0;)e[n-1]+=",",e.splice(n,1),n=e.lastIndexOf("");return e}for(var Uu={backspace:8,"⌫":8,tab:9,clear:12,enter:13,"↩":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"⇪":20,",":188,".":190,"/":191,"`":192,"-":$u?173:189,"=":$u?61:187,";":$u?59:186,"'":222,"[":219,"]":221,"\\":220},Du={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,command:91},Ou={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},zu={16:!1,18:!1,17:!1,91:!1},ju={},Pu=1;Pu<20;Pu++)Uu["f".concat(Pu)]=111+Pu;var Iu=[],Ru=!1,Fu="all",qu=[],Yu=function(t){return Uu[t.toLowerCase()]||Du[t.toLowerCase()]||t.toUpperCase().charCodeAt(0)};function Bu(t){Fu=t||"all"}function Wu(){return Fu||"all"}var Ku=function(t){var e=t.key,n=t.scope,r=t.method,i=t.splitKey,o=void 0===i?"+":i;Gu(e).forEach((function(t){var e=t.split(o),i=e.length,a=e[i-1],s="*"===a?"*":Yu(a);if(ju[s]){n||(n=Wu());var u=i>1?Tu(Du,e):[];ju[s]=ju[s].filter((function(t){return!((!r||t.method===r)&&t.scope===n&&function(t,e){for(var n=t.length>=e.length?t:e,r=t.length>=e.length?e:t,i=!0,o=0;o<n.length;o++)-1===r.indexOf(n[o])&&(i=!1);return i}(t.mods,u))}))}}))};function Hu(t,e,n,r){var i;if(e.element===r&&(e.scope===n||"all"===e.scope)){for(var o in i=e.mods.length>0,zu)Object.prototype.hasOwnProperty.call(zu,o)&&(!zu[o]&&e.mods.indexOf(+o)>-1||zu[o]&&-1===e.mods.indexOf(+o))&&(i=!1);(0!==e.mods.length||zu[16]||zu[18]||zu[17]||zu[91])&&!i&&"*"!==e.shortcut||(e.keys=[],e.keys=e.keys.concat(Iu),!1===e.method(t,e)&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0)))}}function Xu(t,e){var n=ju["*"],r=t.keyCode||t.which||t.charCode;if(Vu.filter.call(this,t)){if(93!==r&&224!==r||(r=91),-1===Iu.indexOf(r)&&229!==r&&Iu.push(r),["ctrlKey","altKey","shiftKey","metaKey"].forEach((function(e){var n=Ou[e];t[e]&&-1===Iu.indexOf(n)?Iu.push(n):!t[e]&&Iu.indexOf(n)>-1?Iu.splice(Iu.indexOf(n),1):"metaKey"===e&&t[e]&&3===Iu.length&&(t.ctrlKey||t.shiftKey||t.altKey||(Iu=Iu.slice(Iu.indexOf(n))))})),r in zu){for(var i in zu[r]=!0,Du)Du[i]===r&&(Vu[i]=!0);if(!n)return}for(var o in zu)Object.prototype.hasOwnProperty.call(zu,o)&&(zu[o]=t[Ou[o]]);t.getModifierState&&(!t.altKey||t.ctrlKey)&&t.getModifierState("AltGraph")&&(-1===Iu.indexOf(17)&&Iu.push(17),-1===Iu.indexOf(18)&&Iu.push(18),zu[17]=!0,zu[18]=!0);var a=Wu();if(n)for(var s=0;s<n.length;s++)n[s].scope===a&&("keydown"===t.type&&n[s].keydown||"keyup"===t.type&&n[s].keyup)&&Hu(t,n[s],a,e);if(r in ju)for(var u=0;u<ju[r].length;u++)if(("keydown"===t.type&&ju[r][u].keydown||"keyup"===t.type&&ju[r][u].keyup)&&ju[r][u].key){for(var c=ju[r][u],h=c.splitKey,f=c.key.split(h),l=[],d=0;d<f.length;d++)l.push(Yu(f[d]));l.sort().join("")===Iu.sort().join("")&&Hu(t,c,a,e)}}}function Vu(t,e,n){Iu=[];var r=Gu(t),i=[],o="all",a=document,s=0,u=!1,c=!0,h="+",f=!1;for(void 0===n&&"function"==typeof e&&(n=e),"[object Object]"===Object.prototype.toString.call(e)&&(e.scope&&(o=e.scope),e.element&&(a=e.element),e.keyup&&(u=e.keyup),void 0!==e.keydown&&(c=e.keydown),void 0!==e.capture&&(f=e.capture),"string"==typeof e.splitKey&&(h=e.splitKey)),"string"==typeof e&&(o=e);s<r.length;s++)i=[],(t=r[s].split(h)).length>1&&(i=Tu(Du,t)),(t="*"===(t=t[t.length-1])?"*":Yu(t))in ju||(ju[t]=[]),ju[t].push({keyup:u,keydown:c,scope:o,mods:i,shortcut:r[s],method:n,key:r[s],splitKey:h,element:a});void 0!==a&&!function(t){return qu.indexOf(t)>-1}(a)&&window&&(qu.push(a),Cu(a,"keydown",(function(t){Xu(t,a)}),f),Ru||(Ru=!0,Cu(window,"focus",(function(){Iu=[]}),f)),Cu(a,"keyup",(function(t){Xu(t,a),function(t){var e=t.keyCode||t.which||t.charCode,n=Iu.indexOf(e);if(n>=0&&Iu.splice(n,1),t.key&&"meta"===t.key.toLowerCase()&&Iu.splice(0,Iu.length),93!==e&&224!==e||(e=91),e in zu)for(var r in zu[e]=!1,Du)Du[r]===e&&(Vu[r]=!1)}(t)}),f))}var Zu={getPressedKeyString:function(){return Iu.map((function(t){return e=t,Object.keys(Uu).find((function(t){return Uu[t]===e}))||function(t){return Object.keys(Du).find((function(e){return Du[e]===t}))}(t)||String.fromCharCode(t);var e}))},setScope:Bu,getScope:Wu,deleteScope:function(t,e){var n,r;for(var i in t||(t=Wu()),ju)if(Object.prototype.hasOwnProperty.call(ju,i))for(n=ju[i],r=0;r<n.length;)n[r].scope===t?n.splice(r,1):r++;Wu()===t&&Bu(e||"all")},getPressedKeyCodes:function(){return Iu.slice(0)},isPressed:function(t){return"string"==typeof t&&(t=Yu(t)),-1!==Iu.indexOf(t)},filter:function(t){var e=t.target||t.srcElement,n=e.tagName,r=!0;return!e.isContentEditable&&("INPUT"!==n&&"TEXTAREA"!==n&&"SELECT"!==n||e.readOnly)||(r=!1),r},trigger:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";Object.keys(ju).forEach((function(n){ju[n].filter((function(n){return n.scope===e&&n.shortcut===t})).forEach((function(t){t&&t.method&&t.method()}))}))},unbind:function(t){if(void 0===t)Object.keys(ju).forEach((function(t){return delete ju[t]}));else if(Array.isArray(t))t.forEach((function(t){t.key&&Ku(t)}));else if("object"==typeof t)t.key&&Ku(t);else if("string"==typeof t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=n[0],o=n[1];"function"==typeof i&&(o=i,i=""),Ku({key:t,scope:i,method:o,splitKey:"+"})}},keyMap:Uu,modifier:Du,modifierMap:Ou};for(var Ju in Zu)Object.prototype.hasOwnProperty.call(Zu,Ju)&&(Vu[Ju]=Zu[Ju]);if("undefined"!=typeof window){var Qu=window.hotkeys;Vu.noConflict=function(t){return t&&window.hotkeys===Vu&&(window.hotkeys=Qu),Vu},window.hotkeys=Vu}const tc={notFiltered:0,filteredByTimeline:1,filteredByFocus:2,filteredByTag:3,filteredByType:4};var ec=[];data.nodes=data.nodes.map((function(t){return ec.push(t.id),t.hidden=tc.notFiltered,t.isolated=!1,t.highlighted=!1,t}));var nc=Tt("#graph-canvas"),rc=nc.append("svg"),ic=nc.node().getBoundingClientRect(),oc=ic.width,ac=ic.height;rc.attr("viewBox",[0,0,oc,ac]).attr("preserveAspectRatio","xMinYMin meet");var sc=function(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=Dr(),u=jn(h),c=m("tick","end");function h(){f(),c.call("tick",e),n<r&&(u.stop(),c.call("end",e))}function f(){var e,r,u=t.length;for(n+=(o-n)*i,s.each((function(t){t(n)})),e=0;e<u;++e)null==(r=t[e]).fx?r.x+=r.vx*=a:(r.x=r.fx,r.vx=0),null==r.fy?r.y+=r.vy*=a:(r.y=r.fy,r.vy=0)}function l(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,isNaN(e.x)||isNaN(e.y)){var i=10*Math.sqrt(n),o=n*si;e.x=i*Math.cos(o),e.y=i*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function d(e){return e.initialize&&e.initialize(t),e}return null==t&&(t=[]),l(),e={tick:f,restart:function(){return u.restart(h),e},stop:function(){return u.stop(),e},nodes:function(n){return arguments.length?(t=n,l(),s.each(d),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(o=+t,e):o},velocityDecay:function(t){return arguments.length?(a=1-t,e):1-a},force:function(t,n){return arguments.length>1?(null==n?s.remove(t):s.set(t,d(n)),e):s.get(t)},find:function(e,n,r){var i,o,a,s,u,c=0,h=t.length;for(null==r?r=1/0:r*=r,c=0;c<h;++c)(a=(i=e-(s=t[c]).x)*i+(o=n-s.y)*o)<r&&(u=s,r=a);return u},on:function(t,n){return arguments.length>1?(c.on(t,n),e):c.on(t)}}}(data.nodes).force("link",function(t){var e,n,r,i,o,a=ni,s=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},u=ti(30),c=1;function h(r){for(var i=0,a=t.length;i<c;++i)for(var s,u,h,f,l,d,p,y=0;y<a;++y)u=(s=t[y]).source,f=(h=s.target).x+h.vx-u.x-u.vx||ei(),l=h.y+h.vy-u.y-u.vy||ei(),f*=d=((d=Math.sqrt(f*f+l*l))-n[y])/d*r*e[y],l*=d,h.vx-=f*(p=o[y]),h.vy-=l*p,u.vx+=f*(p=1-p),u.vy+=l*p}function f(){if(r){var s,u,c=r.length,h=t.length,f=Dr(r,a);for(s=0,i=new Array(c);s<h;++s)(u=t[s]).index=s,"object"!=typeof u.source&&(u.source=ri(f,u.source)),"object"!=typeof u.target&&(u.target=ri(f,u.target)),i[u.source.index]=(i[u.source.index]||0)+1,i[u.target.index]=(i[u.target.index]||0)+1;for(s=0,o=new Array(h);s<h;++s)u=t[s],o[s]=i[u.source.index]/(i[u.source.index]+i[u.target.index]);e=new Array(h),l(),n=new Array(h),d()}}function l(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+s(t[n],n,t)}function d(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+u(t[e],e,t)}return null==t&&(t=[]),h.initialize=function(t){r=t,f()},h.links=function(e){return arguments.length?(t=e,f(),h):t},h.id=function(t){return arguments.length?(a=t,h):a},h.iterations=function(t){return arguments.length?(c=+t,h):c},h.strength=function(t){return arguments.length?(s="function"==typeof t?t:ti(+t),l(),h):s},h.distance=function(t){return arguments.length?(u="function"==typeof t?t:ti(+t),d(),h):u},h}(data.links).id((function(t){return t.id}))).force("charge",function(){var t,e,n,r,i=ti(-30),o=1,a=1/0,s=.81;function u(r){var i,o=t.length,a=Vr(t,ii,oi).visitAfter(h);for(n=r,i=0;i<o;++i)e=t[i],a.visit(f)}function c(){if(t){var e,n,o=t.length;for(r=new Array(o),e=0;e<o;++e)n=t[e],r[n.index]=+i(n,e,t)}}function h(t){var e,n,i,o,a,s=0,u=0;if(t.length){for(i=o=a=0;a<4;++a)(e=t[a])&&(n=Math.abs(e.value))&&(s+=e.value,u+=n,i+=n*e.x,o+=n*e.y);t.x=i/u,t.y=o/u}else{(e=t).x=e.data.x,e.y=e.data.y;do{s+=r[e.data.index]}while(e=e.next)}t.value=s}function f(t,i,u,c){if(!t.value)return!0;var h=t.x-e.x,f=t.y-e.y,l=c-i,d=h*h+f*f;if(l*l/s<d)return d<a&&(0===h&&(d+=(h=ei())*h),0===f&&(d+=(f=ei())*f),d<o&&(d=Math.sqrt(o*d)),e.vx+=h*t.value*n/d,e.vy+=f*t.value*n/d),!0;if(!(t.length||d>=a)){(t.data!==e||t.next)&&(0===h&&(d+=(h=ei())*h),0===f&&(d+=(f=ei())*f),d<o&&(d=Math.sqrt(o*d)));do{t.data!==e&&(l=r[t.data.index]*n/d,e.vx+=h*l,e.vy+=f*l)}while(t=t.next)}}return u.initialize=function(e){t=e,c()},u.strength=function(t){return arguments.length?(i="function"==typeof t?t:ti(+t),c(),u):i},u.distanceMin=function(t){return arguments.length?(o=t*t,u):Math.sqrt(o)},u.distanceMax=function(t){return arguments.length?(a=t*t,u):Math.sqrt(a)},u.theta=function(t){return arguments.length?(s=t*t,u):Math.sqrt(s)},u}()).force("center",function(t,e){var n;function r(){var r,i,o=n.length,a=0,s=0;for(r=0;r<o;++r)a+=(i=n[r]).x,s+=i.y;for(a=a/o-t,s=s/o-e,r=0;r<o;++r)(i=n[r]).x-=a,i.y-=s}return null==t&&(t=0),null==e&&(e=0),r.initialize=function(t){n=t},r.x=function(e){return arguments.length?(t=+e,r):t},r.y=function(t){return arguments.length?(e=+t,r):e},r}()).force("forceX",function(t){var e,n,r,i=ti(.1);function o(t){for(var i,o=0,a=e.length;o<a;++o)(i=e[o]).vx+=(r[o]-i.x)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!=typeof t&&(t=ti(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:ti(+t),a(),o):i},o.x=function(e){return arguments.length?(t="function"==typeof e?e:ti(+e),a(),o):t},o}()).force("forceY",function(t){var e,n,r,i=ti(.1);function o(t){for(var i,o=0,a=e.length;o<a;++o)(i=e[o]).vy+=(r[o]-i.y)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!=typeof t&&(t=ti(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:ti(+t),a(),o):i},o.y=function(e){return arguments.length?(t="function"==typeof e?e:ti(+e),a(),o):t},o}());sc.force("center").x(.5*oc).y(.5*ac),window.updateForces=function(){sc.force("charge").strength(-Math.abs(graphProperties.attraction_force)).distanceMax(graphProperties.attraction_distance_max),sc.force("forceX").strength(graphProperties.attraction_vertical),sc.force("forceY").strength(graphProperties.attraction_horizontal),sc.alpha(1).restart()},updateForces(),Vu("space",(function(t){t.preventDefault(),updateForces()})),sc.on("tick",(function(){uc.links.attr("x1",(function(t){return t.source.x})).attr("y1",(function(t){return t.source.y})).attr("x2",(function(t){return t.target.x})).attr("y2",(function(t){return t.target.y})),uc.nodes.attr("transform",(function(t){return"translate("+t.x+","+t.y+")"})),Tt("#load-bar-value").style("flex-basis",100*sc.alpha()+"%"),pc()}));var uc={};function cc(t){var e=uc.nodes.filter((function(t){return t.hidden===tc.notFiltered})).data().map((function(t){return t.id}));return{nodes:uc.nodes.filter((function(e){return t.includes(e.id)})),links:uc.links.filter((function(n){return!(!t.includes(n.source.id)&&!t.includes(n.target.id)||!e.includes(n.source.id)||!e.includes(n.target.id))}))}}function hc(t,e){var n=[],r=[];ec.forEach((function(e){t.includes(e)?r.push(e):n.push(e)})),function(t,e){if(hideNodeNetwork(t),function(t){var e,n=gc(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;bc.querySelectorAll('[data-index="'+r+'"]').forEach((function(t){t.style.display="none"}))}}catch(t){n.e(t)}finally{n.f()}}(t),void 0===e)throw new Error("Need priority");uc.nodes.data().map((function(n){var r=n.id,i=n.hidden;return t.includes(r)&&i<=e&&(n.hidden=e),n}))}(n,e),fc(r,e)}function fc(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tc.notFiltered,n=[];uc.nodes.data().map((function(r){var i=r.id,o=r.hidden;return t.includes(i)&&o<=e&&(n.push(i),r.hidden=tc.notFiltered),r})),displayNodeNetwork(n),function(t){var e,n=gc(t=t.filter((function(t){if(yc.find((function(e){return e.id===t})).hidden===tc.notFiltered)return!0})));try{for(n.s();!(e=n.n()).done;){var r=e.value;bc.querySelectorAll('[data-index="'+r+'"]').forEach((function(t){t.style.display=null}))}}catch(t){n.e(t)}finally{n.f()}}(n)}function lc(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tc.notFiltered;fc(ec,t)}function dc(){if(0!==u.highlightedNodes.length){var t=cc(u.highlightedNodes),e=t.nodes,n=t.links;e.selectAll("circle").style("stroke",null),n.style("stroke",null),u.highlightedNodes=[]}}function pc(){var t=l(data.nodes,(function(t){return t.x})),e=f(data.nodes,(function(t){return t.x})),n=l(data.nodes,(function(t){return t.y})),r=f(data.nodes,(function(t){return t.y})),i=u.position,o=i.x,a=i.y,s=i.zoom,c=1200,h=e-t;h<c&&(h=c);var d=r-n;d<c&&(d=c);var p=[((t+e)/2-h/2-o)/s,((n+r)/2-d/2-a)/s,h/s,d/s];rc.attr("viewBox",p).attr("preserveAspectRatio")}uc.links=rc.append("g").selectAll("line").data(data.links).enter().append("line").attr("stroke",(function(t){return t.color})).attr("title",(function(t){return t.title})).attr("data-source",(function(t){return t.source.id})).attr("data-target",(function(t){return t.target.id})).attr("stroke-dasharray",(function(t){return("dash"===t.shape.stroke||"dotted"===t.shape.stroke)&&t.shape.dashInterval})).attr("filter",(function(t){return"double"===t.shape.stroke&&"url(#double)"})),!0===graphProperties.graph_arrows&&uc.links.attr("marker-end","url(#arrow)"),uc.nodes=rc.append("g").selectAll("g").data(data.nodes).enter().append("g").attr("data-node",(function(t){return t.id})).append("a").attr("href",(function(t){return"#"+t.id})),uc.circles=uc.nodes.append("circle").attr("r",(function(t){return t.size})).attr("fill",(function(t){return t.fill})).attr("stroke",(function(t){return t.colorStroke})).attr("stroke-width",(function(t){return t.strokeWidth})).call(function(){var t,e,n,r,i=Bt,o=Wt,a=Kt,s=Ht,u={},c=m("start","drag","end"),h=0,f=0;function l(t){t.on("mousedown.drag",d).filter(s).on("touchstart.drag",g).on("touchmove.drag",v).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(){if(!r&&i.apply(this,arguments)){var a=b("mouse",o.apply(this,arguments),zt,this,arguments);a&&(Tt(_t.view).on("mousemove.drag",p,!0).on("mouseup.drag",y,!0),Rt(_t.view),Pt(),n=!1,t=_t.clientX,e=_t.clientY,a("start"))}}function p(){if(It(),!n){var r=_t.clientX-t,i=_t.clientY-e;n=r*r+i*i>f}u.mouse("drag")}function y(){Tt(_t.view).on("mousemove.drag mouseup.drag",null),Ft(_t.view,n),It(),u.mouse("end")}function g(){if(i.apply(this,arguments)){var t,e,n=_t.changedTouches,r=o.apply(this,arguments),a=n.length;for(t=0;t<a;++t)(e=b(n[t].identifier,r,jt,this,arguments))&&(Pt(),e("start"))}}function v(){var t,e,n=_t.changedTouches,r=n.length;for(t=0;t<r;++t)(e=u[n[t].identifier])&&(It(),e("drag"))}function _(){var t,e,n=_t.changedTouches,i=n.length;for(r&&clearTimeout(r),r=setTimeout((function(){r=null}),500),t=0;t<i;++t)(e=u[n[t].identifier])&&(Pt(),e("end"))}function b(t,e,n,r,i){var o,s,f,d=n(e,t),p=c.copy();if(Mt(new Yt(l,"beforestart",o,t,h,d[0],d[1],0,0,p),(function(){return null!=(_t.subject=o=a.apply(r,i))&&(s=o.x-d[0]||0,f=o.y-d[1]||0,!0)})))return function a(c){var y,g=d;switch(c){case"start":u[t]=a,y=h++;break;case"end":delete u[t],--h;case"drag":d=n(e,t),y=h}Mt(new Yt(l,c,o,t,y,d[0]+s,d[1]+f,d[0]-g[0],d[1]-g[1],p),p.apply,p,[c,r,i])}}return l.filter=function(t){return arguments.length?(i="function"==typeof t?t:qt(!!t),l):i},l.container=function(t){return arguments.length?(o="function"==typeof t?t:qt(t),l):o},l.subject=function(t){return arguments.length?(a="function"==typeof t?t:qt(t),l):a},l.touchable=function(t){return arguments.length?(s="function"==typeof t?t:qt(!!t),l):s},l.on=function(){var t=c.on.apply(c,arguments);return t===c?l:t},l.clickDistance=function(t){return arguments.length?(f=(t=+t)*t,l):Math.sqrt(f)},l}().on("start",(function(t){_t.active||sc.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y})).on("drag",(function(t){t.fx=_t.x,t.fy=_t.y})).on("end",(function(t){_t.active||sc.alphaTarget(1e-4),t.fx=null,t.fy=null}))).on("mouseenter",(function(t){if(graphProperties.graph_highlight_on_hover){var e=[t.id],n=uc.links.filter((function(n){return n.source.id!==t.id&&n.target.id!==t.id||(e.push(n.source.id,n.target.id),!1)})),r=uc.nodes.filter((function(t){return!e.includes(t.id)})),i=uc.links.filter((function(e){return e.source.id===t.id||e.target.id===t.id}));uc.nodes.filter((function(t){return!!e.includes(t.id)})).selectAll("circle").attr("stroke",(function(t){return t.highlight})),i.attr("stroke",(function(t){return t.colorHighlight})),r.attr("opacity",.5),n.attr("stroke-opacity",.5)}})).on("mouseout",(function(){graphProperties.graph_highlight_on_hover&&(uc.nodes.selectAll("circle").attr("stroke",(function(t){return t.colorStroke})),uc.links.attr("stroke",(function(t){return t.color})),uc.nodes.attr("opacity",1),uc.links.attr("stroke-opacity",1))})),uc.labels=uc.nodes.append("text").each((function(t){for(var e=t.label.split(" "),n=Tt(this),r="",i=0;i<e.length;i++)(r+=e[i]+" ").length<25&&i!==e.length-1||(n.append("tspan").attr("x",0).attr("dy","1.2em").text(r.slice(0,-1)),r="")})).attr("font-size",graphProperties.graph_text_size).attr("x",0).attr("y",(function(t){return t.size})).attr("dominant-baseline","middle").attr("text-anchor","middle"),window.zoomToNode=function(t){var e=uc.nodes.filter((function(e){return e.id===t})).datum(),n=e.x,r=e.y;n=-Math.abs(n-200),r=-Math.abs(r-300),u.position={x:n,y:r,zoom:2},pc()},Vu("c",(function(t){t.preventDefault();var e=new URL(window.location).hash;if(e){var n=decodeURI(e.substring(1));zoomToNode(n)}})),window.hideNodeNetwork=function(t){var e=cc(t),n=e.nodes,r=e.links;n.style("display","none"),r.style("display","none")},window.displayNodeNetwork=function(t){var e=cc(t),n=e.nodes,r=e.links;n.style("display",null),r.style("display",null)},window.linksDisplayToggle=function(t){t?uc.links.style("display",null):uc.links.style("display","none")},window.labelDisplayToggle=function(t){t?uc.labels.style("display",null):uc.labels.style("display","none")},window.labelHighlight=function(t){uc.nodes.data().map((function(e){return t.includes(e.id)&&(e.highlighted=!0),e})),uc.nodes.filter((function(e){return t.includes(e.id)})).select("text").style("fill","var(--highlight)")},window.updateFontsize=function(){uc.labels.attr("font-size",graphProperties.text_size)},window.labelUnlight=function(t){uc.nodes.data().map((function(e){return t.includes(e.id)&&(e.highlighted=!1),e})),uc.nodes.filter((function(e){return t.includes(e.id)})).select("text").style("fill",null)},window.labelUnlightAll=function(){data.nodes=data.nodes.map((function(t){return t.highlighted=!1,t})),uc.labels.style("fill",null)};var yc=uc.nodes.data();function gc(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=vc(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function vc(t,e){if(t){if("string"==typeof t)return mc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mc(t,e):void 0}}function mc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}uc.links.data();var _c=document.getElementById("record-container");window.openRecord=function(t){var e,n,r,i,o=document.getElementById(t);if(o){void 0!==u.openedRecordId&&document.getElementById(u.openedRecordId).classList.remove("active"),_c.classList.add("active"),_c.scrollTo({top:0}),o.classList.add("active"),u.openedRecordId=t,dc(),n=cc(e=[t]),r=n.nodes,i=n.links,r.selectAll("circle").style("stroke","var(--highlight)"),i.style("stroke","var(--highlight)"),u.highlightedNodes=u.highlightedNodes.concat(e);var a=o.querySelector("h1").textContent;document.title=a}},window.closeRecord=function(){_c.classList.remove("active");var t=document.getElementById(u.openedRecordId);u.openedRecordId=void 0,dc(),t&&t.classList.remove("active")},Vu("escape",(function(t){t.preventDefault(),closeRecord()})),window.hashRecord=function(){var t=new URL(window.location).hash;if(t){var e=decodeURI(t.substring(1));openRecord(e)}},window.addEventListener("hashchange",window.hashRecord),window.addEventListener("DOMContentLoaded",window.hashRecord);var bc=document.getElementById("index");window.addEventListener("DOMContentLoaded",(function(){var t=bc.querySelector(".sorting-select"),e=sorting.records;function n(){for(var n=bc.querySelectorAll("li"),r=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){c=!0,i=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||vc(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t.value.split(":"),2),i=r[0],o=r[1],a=0;a<n.length;a++){var s=e[a][i],u=n[a];"reverse"===o&&(s=n.length-1-s),u.style.order=s}}n(),t.addEventListener("change",n)}));var wc=n(691),xc=new(n.n(wc)())([],{includeScore:!1,keys:["label"]});window.addEventListener("DOMContentLoaded",(function(){var t=[],e=0,n=document.getElementById("search"),r=document.getElementById("search-result-list");function i(){r.childNodes[e].classList.add("outline")}function o(){r.childNodes[e].classList.remove("outline")}n.addEventListener("focus",(function(){xc.setCollection(yc.filter((function(t){return 0===t.hidden}))),n.addEventListener("input",(function(){if(r.innerHTML="",e=0,t=[],""!==n.value){t=xc.search(n.value);for(var o=0;o<Math.min(5,t.length);o++){var a=t[o].item,s=a.id,u=a.label,c=a.type,h=document.createElement("li");h.classList.add("search-result-item"),h.innerHTML='\n        <a href="#'.concat(s,'">\n          <span\n            class="record-type-point"\n            style="color:var(--n_').concat(c,')"\n          >⬤</span>\n          <span class="record-title">').concat(u,"</span>\n        </a>"),r.appendChild(h)}i()}}))})),Vu("s",(function(t){t.preventDefault(),n.focus()})),document.addEventListener("keydown",(function(r){if(0!==t.length)switch(r.key){case"ArrowUp":r.preventDefault(),e>0&&(o(),e--,i()),0===e&&n.focus();break;case"ArrowDown":if(r.preventDefault(),4===e||e===t.length-1)break;o(),e++,i(),1===e&&n.blur();break;case"Enter":r.preventDefault(),window.location.hash=t[e].item.id,n.blur()}}))}));var kc=function(){var t,e,n=Mu,r=Eu,i=Nu,o=Su,a=Lu,s=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],c=250,h=_n,f=[],l=m("start","zoom","end"),d=500,p=150,y=0;function g(t){t.property("__zoom",Au).on("wheel.zoom",M).on("mousedown.zoom",E).on("dblclick.zoom",A).filter(a).on("touchstart.zoom",S).on("touchmove.zoom",L).on("touchend.zoom touchcancel.zoom",N).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(t,e){return(e=Math.max(s[0],Math.min(s[1],e)))===t.k?t:new bu(e,t.x,t.y)}function _(t,e,n){var r=e[0]-n[0]*t.k,i=e[1]-n[1]*t.k;return r===t.x&&i===t.y?t:new bu(t.k,r,i)}function b(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function w(t,e,n){t.on("start.zoom",(function(){x(this,arguments).start()})).on("interrupt.zoom end.zoom",(function(){x(this,arguments).end()})).tween("zoom",(function(){var t=this,i=arguments,o=x(t,i),a=r.apply(t,i),s=n||b(a),u=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),c=t.__zoom,f="function"==typeof e?e.apply(t,i):e,l=h(c.invert(s).concat(u/c.k),f.invert(s).concat(u/f.k));return function(t){if(1===t)t=f;else{var e=l(t),n=u/e[2];t=new bu(n,s[0]-e[0]*n,s[1]-e[1]*n)}o.zoom(null,t)}}))}function x(t,e){for(var n,r=0,i=f.length;r<i;++r)if((n=f[r]).that===t)return n;return new k(t,e)}function k(t,e){this.that=t,this.args=e,this.index=-1,this.active=0,this.extent=r.apply(t,e)}function M(){if(n.apply(this,arguments)){var t=x(this,arguments),e=this.__zoom,r=Math.max(s[0],Math.min(s[1],e.k*Math.pow(2,o.apply(this,arguments)))),a=zt(this);if(t.wheel)t.mouse[0][0]===a[0]&&t.mouse[0][1]===a[1]||(t.mouse[1]=e.invert(t.mouse[0]=a)),clearTimeout(t.wheel);else{if(e.k===r)return;t.mouse=[a,e.invert(a)],Zn(this),t.start()}ku(),t.wheel=setTimeout((function(){t.wheel=null,t.end()}),p),t.zoom("mouse",i(_(v(e,r),t.mouse[0],t.mouse[1]),t.extent,u))}}function E(){if(!e&&n.apply(this,arguments)){var t=x(this,arguments),r=Tt(_t.view).on("mousemove.zoom",(function(){if(ku(),!t.moved){var e=_t.clientX-a,n=_t.clientY-s;t.moved=e*e+n*n>y}t.zoom("mouse",i(_(t.that.__zoom,t.mouse[0]=zt(t.that),t.mouse[1]),t.extent,u))}),!0).on("mouseup.zoom",(function(){r.on("mousemove.zoom mouseup.zoom",null),Ft(_t.view,t.moved),ku(),t.end()}),!0),o=zt(this),a=_t.clientX,s=_t.clientY;Rt(_t.view),xu(),t.mouse=[o,this.__zoom.invert(o)],Zn(this),t.start()}}function A(){if(n.apply(this,arguments)){var t=this.__zoom,e=zt(this),o=t.invert(e),a=t.k*(_t.shiftKey?.5:2),s=i(_(v(t,a),e,o),r.apply(this,arguments),u);ku(),c>0?Tt(this).transition().duration(c).call(w,s,e):Tt(this).call(g.transform,s)}}function S(){if(n.apply(this,arguments)){var e,r,i,o,a=x(this,arguments),s=_t.changedTouches,u=s.length;for(xu(),r=0;r<u;++r)o=[o=jt(this,s,(i=s[r]).identifier),this.__zoom.invert(o),i.identifier],a.touch0?a.touch1||(a.touch1=o):(a.touch0=o,e=!0);if(t&&(t=clearTimeout(t),!a.touch1))return a.end(),void((o=Tt(this).on("dblclick.zoom"))&&o.apply(this,arguments));e&&(t=setTimeout((function(){t=null}),d),Zn(this),a.start())}}function L(){var e,n,r,o,a=x(this,arguments),s=_t.changedTouches,c=s.length;for(ku(),t&&(t=clearTimeout(t)),e=0;e<c;++e)r=jt(this,s,(n=s[e]).identifier),a.touch0&&a.touch0[2]===n.identifier?a.touch0[0]=r:a.touch1&&a.touch1[2]===n.identifier&&(a.touch1[0]=r);if(n=a.that.__zoom,a.touch1){var h=a.touch0[0],f=a.touch0[1],l=a.touch1[0],d=a.touch1[1],p=(p=l[0]-h[0])*p+(p=l[1]-h[1])*p,y=(y=d[0]-f[0])*y+(y=d[1]-f[1])*y;n=v(n,Math.sqrt(p/y)),r=[(h[0]+l[0])/2,(h[1]+l[1])/2],o=[(f[0]+d[0])/2,(f[1]+d[1])/2]}else{if(!a.touch0)return;r=a.touch0[0],o=a.touch0[1]}a.zoom("touch",i(_(n,r,o),a.extent,u))}function N(){var t,n,r=x(this,arguments),i=_t.changedTouches,o=i.length;for(xu(),e&&clearTimeout(e),e=setTimeout((function(){e=null}),d),t=0;t<o;++t)n=i[t],r.touch0&&r.touch0[2]===n.identifier?delete r.touch0:r.touch1&&r.touch1[2]===n.identifier&&delete r.touch1;r.touch1&&!r.touch0&&(r.touch0=r.touch1,delete r.touch1),r.touch0?r.touch0[1]=this.__zoom.invert(r.touch0[0]):r.end()}return g.transform=function(t,e){var n=t.selection?t.selection():t;n.property("__zoom",Au),t!==n?w(t,e):n.interrupt().each((function(){x(this,arguments).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()}))},g.scaleBy=function(t,e){g.scaleTo(t,(function(){return this.__zoom.k*("function"==typeof e?e.apply(this,arguments):e)}))},g.scaleTo=function(t,e){g.transform(t,(function(){var t=r.apply(this,arguments),n=this.__zoom,o=b(t),a=n.invert(o),s="function"==typeof e?e.apply(this,arguments):e;return i(_(v(n,s),o,a),t,u)}))},g.translateBy=function(t,e,n){g.transform(t,(function(){return i(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),r.apply(this,arguments),u)}))},g.translateTo=function(t,e,n){g.transform(t,(function(){var t=r.apply(this,arguments),o=this.__zoom,a=b(t);return i(wu.translate(a[0],a[1]).scale(o.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof n?-n.apply(this,arguments):-n),t,u)}))},k.prototype={start:function(){return 1==++this.active&&(this.index=f.push(this)-1,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(f.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(t){Mt(new _u(g,t,this.that.__zoom),l.apply,l,[t,this.that,this.args])}},g.wheelDelta=function(t){return arguments.length?(o="function"==typeof t?t:mu(+t),g):o},g.filter=function(t){return arguments.length?(n="function"==typeof t?t:mu(!!t),g):n},g.touchable=function(t){return arguments.length?(a="function"==typeof t?t:mu(!!t),g):a},g.extent=function(t){return arguments.length?(r="function"==typeof t?t:mu([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),g):r},g.scaleExtent=function(t){return arguments.length?(s[0]=+t[0],s[1]=+t[1],g):[s[0],s[1]]},g.translateExtent=function(t){return arguments.length?(u[0][0]=+t[0][0],u[1][0]=+t[1][0],u[0][1]=+t[0][1],u[1][1]=+t[1][1],g):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},g.constrain=function(t){return arguments.length?(i=t,g):i},g.duration=function(t){return arguments.length?(c=+t,g):c},g.interpolate=function(t){return arguments.length?(h=t,g):h},g.on=function(){var t=l.on.apply(l,arguments);return t===l?g:t},g.clickDistance=function(t){return arguments.length?(y=(t=+t)*t,g):Math.sqrt(y)},g}().scaleExtent([1,10]).on("zoom",(function(){var t=_t.transform,e=t.x,n=t.y,r=t.k;u.position.x=e||0,u.position.y=n||0,u.position.zoom=r||1,pc()}));function Mc(){u.position.zoom=1,u.position.x=0,u.position.y=0,nc.call(kc.transform,wu.translate(u.position.y,u.position.x).scale(u.position.zoom)),pc()}function Ec(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Ac(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Ac(t,e){if(t){if("string"==typeof t)return Sc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Sc(t,e):void 0}}function Sc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Lc(){var t,e=document.getElementById("index-counter"),n=document.querySelectorAll(".menu-types-list .badge"),r=0,i={},o=Ec(data.nodes);try{for(o.s();!(t=o.n()).done;){var a=t.value,s=a.hidden,u=a.type;!0!==s&&(r+=1,i[u]?i[u]+=1:i[u]=1)}}catch(t){o.e(t)}finally{o.f()}var c,h=Ec(n);try{for(h.s();!(c=h.n()).done;){var f=c.value;Nc(f,i[f.previousElementSibling.name]||0)}}catch(t){h.e(t)}finally{h.f()}Nc(e,r)}function Nc(t,e){var n,r,i=(n=t.textContent.split("/",2),r=2,function(t){if(Array.isArray(t))return t}(n)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){c=!0,i=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(n,r)||Ac(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=i[0],a=i[1];o=Number(o),a=Number(a)||o,t.textContent=e===a?a:"".concat(e,"/").concat(a)}function $c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}nc.call(kc),Vu("e,alt+r",(function(t){t.preventDefault(),Mc()})),window.zoomMore=function(){kc.scaleTo(nc,u.position.zoom+.2)},window.zoomLess=function(){kc.scaleTo(nc,u.position.zoom-.2)},window.zoomReset=Mc,n(838);var Cc=timeline,Tc=Cc.begin,Gc=Cc.end;function Uc(t){return new Date(1e3*t).toLocaleDateString(graphProperties.lang)}function Dc(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){c=!0,i=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||Oc(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oc(t,e){if(t){if("string"==typeof t)return zc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zc(t,e):void 0}}function zc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function jc(t,e){if(t){if("string"==typeof t)return Pc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pc(t,e):void 0}}function Pc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}window.addEventListener("DOMContentLoaded",(function(){var t=document.getElementById("timeline-checkbox"),e=document.getElementById("timeline-form"),n=document.getElementById("timeline-ticks");if(e){var r=e.querySelector("output"),i=e.querySelector('input[type="range"]');t.checked=!1,t.addEventListener("change",(function(){t.checked?(e.classList.add("active"),a(),o(),window.addEventListener("resize",a),i.addEventListener("input",o)):(e.classList.remove("active"),window.removeEventListener("resize",a),i.removeEventListener("input",o),lc(tc.filteredByTimeline),Lc())}))}function o(){var t=i.value;r.value=Uc(t);var e,n=[],o=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return $c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$c(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(data.nodes);try{for(o.s();!(e=o.n()).done;){var a=e.value,s=a.begin,u=a.end,c=a.id;void 0===u&&(u=Gc),void 0===s&&(s=Tc),t>=s&&t<=u&&n.push(c)}}catch(t){o.e(t)}finally{o.f()}hc(n,tc.filteredByTimeline),Lc()}function a(){var t=Math.round(e.offsetWidth/100),r=Math.round((Gc-Tc)/t);n.setAttribute("style","--list-length: ".concat(t+1,";")),n.innerHTML="";var a=function(t){var e=document.createElement("option");e.value=t,e.textContent=Uc(t),e.addEventListener("click",(function(){i.value=t,o()})),n.appendChild(e)};a(Tc);for(var s=1;s<=t;s++)a(s!==t?Tc+r*s:Gc)}})),window.addEventListener("DOMContentLoaded",(function(){for(var t,e=document.getElementById("types-form"),n=e.querySelectorAll("input"),r=0,i=Object.entries(typeList);r<i.length;r++){var o=Dc(i[r],2),a=o[0],s=o[1].active;e.querySelector('[name="'.concat(a,'"]')).checked=s}d();var u,c=null===(t=new URL(window.location).searchParams.get("filters"))||void 0===t?void 0:t.split("-");if(null!=c&&c.length){for(var h=0,f=Object.entries(typeList);h<f.length;h++){var l=Dc(f[h],1)[0];e.querySelector('[name="'.concat(l,'"]')).checked=c.includes(l)}d()}function d(){var t=new FormData(e);t=Object.fromEntries(t);var n=new Set;t=Object.entries(typeList).filter((function(e){var n=Dc(e,1)[0];return!!t[n]})).forEach((function(t){Dc(t,2)[1].nodes.forEach((function(t){return n.add(t)}))})),hc(Array.from(n),tc.filteredByType)}e.addEventListener("change",d);var p,y=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Oc(t))){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(n);try{var g=function(){var t=p.value,r=t.name;t.checked,t.parentElement.addEventListener("click",(function(t){t.altKey&&(t.stopPropagation(),t.preventDefault(),u===r?(v(),u=void 0):(function(t){n.forEach((function(e){return e.checked=t===e.name})),e.dispatchEvent(new Event("change"))}(r),u=r))}))};for(y.s();!(p=y.n()).done;)g()}catch(t){y.e(t)}finally{y.f()}function v(){e.querySelectorAll("input:not(:checked)").forEach((function(t){return t.checked=!0})),e.dispatchEvent(new Event("change"))}hotkeys("alt+r",(function(t){t.preventDefault(),v()}))})),window.addEventListener("DOMContentLoaded",(function(){var t,e=document.getElementById("tags-form");if(e){var n=document.querySelector(".menu-tags .sorting-select"),r=sorting.tags;u(),c(),n.addEventListener("change",u),e.addEventListener("change",c);var i=null===(t=new URL(window.location).searchParams.get("tags"))||void 0===t?void 0:t.split("-");if(null!=i&&i.length){var o,a=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=jc(t))){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(i);try{for(a.s();!(o=a.n()).done;){var s=o.value;e.querySelector('input[name="'.concat(s,'"]')).checked=!0}}catch(t){a.e(t)}finally{a.f()}e.dispatchEvent(new Event("change"))}Vu("alt+r",(function(t){t.preventDefault(),e.querySelectorAll("input:checked").forEach((function(t){return t.checked=!1})),e.dispatchEvent(new Event("change"))})),window.activeTag=function(t){var n=e.querySelector('input[name="'.concat(t,'"]'));n.checked=!n.checked,e.dispatchEvent(new Event("change"))}}function u(){for(var t=e.querySelectorAll("label"),i=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){c=!0,i=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||jc(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(n.value.split(":"),2),o=i[0],a=i[1],s=0;s<t.length;s++){var u=r[s][o],c=t[s];"reverse"===a&&(u=t.length-1-u),c.style.order=u}}function c(){var t=new FormData(e);t=Object.fromEntries(t);var n=new Set;tagList.filter((function(e){var n=e.name;return!!t[n]})).forEach((function(t){t.nodes.forEach((function(t){return n.add(t)}))})),0!==n.size?hc(Array.from(n),tc.filteredByTag):lc(tc.filteredByTag)}}));var Ic=n(187),Rc=n(993),Fc=n(641),qc=n(11);let Yc=function(){const t=arguments[0];for(let e=1,n=arguments.length;e<n;e++)if(arguments[e])for(const n in arguments[e])t[n]=arguments[e][n];return t};function Bc(t,e,n,r){const i=t._nodes.get(e);let o=null;return i?(o="mixed"===r?i.out&&i.out[n]||i.undirected&&i.undirected[n]:"directed"===r?i.out&&i.out[n]:i.undirected&&i.undirected[n],o):o}function Wc(t){return"object"==typeof t&&null!==t}function Kc(t){let e;for(e in t)return!1;return!0}function Hc(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})}function Xc(t,e,n){const r={enumerable:!0,configurable:!0};"function"==typeof n?r.get=n:(r.value=n,r.writable=!1),Object.defineProperty(t,e,r)}function Vc(t){return!(!Wc(t)||t.attributes&&!Array.isArray(t.attributes))}"function"==typeof Object.assign&&(Yc=Object.assign);class Zc extends Error{constructor(t){super(),this.name="GraphError",this.message=t}}class Jc extends Zc{constructor(t){super(t),this.name="InvalidArgumentsGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,Jc.prototype.constructor)}}class Qc extends Zc{constructor(t){super(t),this.name="NotFoundGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,Qc.prototype.constructor)}}class th extends Zc{constructor(t){super(t),this.name="UsageGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,th.prototype.constructor)}}function eh(t,e){this.key=t,this.attributes=e,this.clear()}function nh(t,e){this.key=t,this.attributes=e,this.clear()}function rh(t,e){this.key=t,this.attributes=e,this.clear()}function ih(t,e,n,r,i){this.key=e,this.attributes=i,this.undirected=t,this.source=n,this.target=r}eh.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}},nh.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}},rh.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}},ih.prototype.attach=function(){let t="out",e="in";this.undirected&&(t=e="undirected");const n=this.source.key,r=this.target.key;this.source[t][r]=this,this.undirected&&n===r||(this.target[e][n]=this)},ih.prototype.attachMulti=function(){let t="out",e="in";const n=this.source.key,r=this.target.key;this.undirected&&(t=e="undirected");const i=this.source[t],o=i[r];if(void 0===o)return i[r]=this,void(this.undirected&&n===r||(this.target[e][n]=this));o.previous=this,this.next=o,i[r]=this,this.target[e][n]=this},ih.prototype.detach=function(){const t=this.source.key,e=this.target.key;let n="out",r="in";this.undirected&&(n=r="undirected"),delete this.source[n][e],delete this.target[r][t]},ih.prototype.detachMulti=function(){const t=this.source.key,e=this.target.key;let n="out",r="in";this.undirected&&(n=r="undirected"),void 0===this.previous?void 0===this.next?(delete this.source[n][e],delete this.target[r][t]):(this.next.previous=void 0,this.source[n][e]=this.next,this.target[r][t]=this.next):(this.previous.next=this.next,void 0!==this.next&&(this.next.previous=this.previous))};function oh(t,e,n,r,i,o,a){let s,u,c,h;if(r=""+r,0===n){if(s=t._nodes.get(r),!s)throw new Qc(`Graph.${e}: could not find the "${r}" node in the graph.`);c=i,h=o}else if(3===n){if(i=""+i,u=t._edges.get(i),!u)throw new Qc(`Graph.${e}: could not find the "${i}" edge in the graph.`);const n=u.source.key,f=u.target.key;if(r===n)s=u.target;else{if(r!==f)throw new Qc(`Graph.${e}: the "${r}" node is not attached to the "${i}" edge (${n}, ${f}).`);s=u.source}c=o,h=a}else{if(u=t._edges.get(r),!u)throw new Qc(`Graph.${e}: could not find the "${r}" edge in the graph.`);s=1===n?u.source:u.target,c=i,h=o}return[s,c,h]}const ah=[{name:t=>`get${t}Attribute`,attacher:function(t,e,n){t.prototype[e]=function(t,r,i){const[o,a]=oh(this,e,n,t,r,i);return o.attributes[a]}}},{name:t=>`get${t}Attributes`,attacher:function(t,e,n){t.prototype[e]=function(t,r){const[i]=oh(this,e,n,t,r);return i.attributes}}},{name:t=>`has${t}Attribute`,attacher:function(t,e,n){t.prototype[e]=function(t,r,i){const[o,a]=oh(this,e,n,t,r,i);return o.attributes.hasOwnProperty(a)}}},{name:t=>`set${t}Attribute`,attacher:function(t,e,n){t.prototype[e]=function(t,r,i,o){const[a,s,u]=oh(this,e,n,t,r,i,o);return a.attributes[s]=u,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:s}),this}}},{name:t=>`update${t}Attribute`,attacher:function(t,e,n){t.prototype[e]=function(t,r,i,o){const[a,s,u]=oh(this,e,n,t,r,i,o);if("function"!=typeof u)throw new Jc(`Graph.${e}: updater should be a function.`);const c=a.attributes,h=u(c[s]);return c[s]=h,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:s}),this}}},{name:t=>`remove${t}Attribute`,attacher:function(t,e,n){t.prototype[e]=function(t,r,i){const[o,a]=oh(this,e,n,t,r,i);return delete o.attributes[a],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:a}),this}}},{name:t=>`replace${t}Attributes`,attacher:function(t,e,n){t.prototype[e]=function(t,r,i){const[o,a]=oh(this,e,n,t,r,i);if(!Wc(a))throw new Jc(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=a,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}},{name:t=>`merge${t}Attributes`,attacher:function(t,e,n){t.prototype[e]=function(t,r,i){const[o,a]=oh(this,e,n,t,r,i);if(!Wc(a))throw new Jc(`Graph.${e}: provided attributes are not a plain object.`);return Yc(o.attributes,a),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:a}),this}}},{name:t=>`update${t}Attributes`,attacher:function(t,e,n){t.prototype[e]=function(t,r,i){const[o,a]=oh(this,e,n,t,r,i);if("function"!=typeof a)throw new Jc(`Graph.${e}: provided updater is not a function.`);return o.attributes=a(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}}],sh=[{name:t=>`get${t}Attribute`,attacher:function(t,e,n){t.prototype[e]=function(t,r){let i;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new th(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new th(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+t,a=""+r;if(r=arguments[2],i=Bc(this,o,a,n),!i)throw new Qc(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if("mixed"!==n)throw new th(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(t=""+t,i=this._edges.get(t),!i)throw new Qc(`Graph.${e}: could not find the "${t}" edge in the graph.`)}return i.attributes[r]}}},{name:t=>`get${t}Attributes`,attacher:function(t,e,n){t.prototype[e]=function(t){let r;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new th(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new th(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const i=""+t,o=""+arguments[1];if(r=Bc(this,i,o,n),!r)throw new Qc(`Graph.${e}: could not find an edge for the given path ("${i}" - "${o}").`)}else{if("mixed"!==n)throw new th(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(t=""+t,r=this._edges.get(t),!r)throw new Qc(`Graph.${e}: could not find the "${t}" edge in the graph.`)}return r.attributes}}},{name:t=>`has${t}Attribute`,attacher:function(t,e,n){t.prototype[e]=function(t,r){let i;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new th(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new th(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+t,a=""+r;if(r=arguments[2],i=Bc(this,o,a,n),!i)throw new Qc(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if("mixed"!==n)throw new th(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(t=""+t,i=this._edges.get(t),!i)throw new Qc(`Graph.${e}: could not find the "${t}" edge in the graph.`)}return i.attributes.hasOwnProperty(r)}}},{name:t=>`set${t}Attribute`,attacher:function(t,e,n){t.prototype[e]=function(t,r,i){let o;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new th(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new th(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+t,s=""+r;if(r=arguments[2],i=arguments[3],o=Bc(this,a,s,n),!o)throw new Qc(`Graph.${e}: could not find an edge for the given path ("${a}" - "${s}").`)}else{if("mixed"!==n)throw new th(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(t=""+t,o=this._edges.get(t),!o)throw new Qc(`Graph.${e}: could not find the "${t}" edge in the graph.`)}return o.attributes[r]=i,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}},{name:t=>`update${t}Attribute`,attacher:function(t,e,n){t.prototype[e]=function(t,r,i){let o;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new th(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new th(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+t,s=""+r;if(r=arguments[2],i=arguments[3],o=Bc(this,a,s,n),!o)throw new Qc(`Graph.${e}: could not find an edge for the given path ("${a}" - "${s}").`)}else{if("mixed"!==n)throw new th(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(t=""+t,o=this._edges.get(t),!o)throw new Qc(`Graph.${e}: could not find the "${t}" edge in the graph.`)}if("function"!=typeof i)throw new Jc(`Graph.${e}: updater should be a function.`);return o.attributes[r]=i(o.attributes[r]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}},{name:t=>`remove${t}Attribute`,attacher:function(t,e,n){t.prototype[e]=function(t,r){let i;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new th(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new th(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+t,a=""+r;if(r=arguments[2],i=Bc(this,o,a,n),!i)throw new Qc(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if("mixed"!==n)throw new th(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(t=""+t,i=this._edges.get(t),!i)throw new Qc(`Graph.${e}: could not find the "${t}" edge in the graph.`)}return delete i.attributes[r],this.emit("edgeAttributesUpdated",{key:i.key,type:"remove",attributes:i.attributes,name:r}),this}}},{name:t=>`replace${t}Attributes`,attacher:function(t,e,n){t.prototype[e]=function(t,r){let i;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new th(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new th(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+t,a=""+r;if(r=arguments[2],i=Bc(this,o,a,n),!i)throw new Qc(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if("mixed"!==n)throw new th(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(t=""+t,i=this._edges.get(t),!i)throw new Qc(`Graph.${e}: could not find the "${t}" edge in the graph.`)}if(!Wc(r))throw new Jc(`Graph.${e}: provided attributes are not a plain object.`);return i.attributes=r,this.emit("edgeAttributesUpdated",{key:i.key,type:"replace",attributes:i.attributes}),this}}},{name:t=>`merge${t}Attributes`,attacher:function(t,e,n){t.prototype[e]=function(t,r){let i;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new th(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new th(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+t,a=""+r;if(r=arguments[2],i=Bc(this,o,a,n),!i)throw new Qc(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if("mixed"!==n)throw new th(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(t=""+t,i=this._edges.get(t),!i)throw new Qc(`Graph.${e}: could not find the "${t}" edge in the graph.`)}if(!Wc(r))throw new Jc(`Graph.${e}: provided attributes are not a plain object.`);return Yc(i.attributes,r),this.emit("edgeAttributesUpdated",{key:i.key,type:"merge",attributes:i.attributes,data:r}),this}}},{name:t=>`update${t}Attributes`,attacher:function(t,e,n){t.prototype[e]=function(t,r){let i;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new th(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new th(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+t,a=""+r;if(r=arguments[2],i=Bc(this,o,a,n),!i)throw new Qc(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if("mixed"!==n)throw new th(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(t=""+t,i=this._edges.get(t),!i)throw new Qc(`Graph.${e}: could not find the "${t}" edge in the graph.`)}if("function"!=typeof r)throw new Jc(`Graph.${e}: provided updater is not a function.`);return i.attributes=r(i.attributes),this.emit("edgeAttributesUpdated",{key:i.key,type:"update",attributes:i.attributes}),this}}}],uh=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function ch(t,e,n,r){let i=!1;for(const o in e){if(o===r)continue;const a=e[o];if(i=n(a.key,a.attributes,a.source.key,a.target.key,a.source.attributes,a.target.attributes,a.undirected),t&&i)return a.key}}function hh(t,e,n,r){let i,o,a,s=!1;for(const u in e)if(u!==r){i=e[u];do{if(o=i.source,a=i.target,s=n(i.key,i.attributes,o.key,a.key,o.attributes,a.attributes,i.undirected),t&&s)return i.key;i=i.next}while(void 0!==i)}}function fh(t,e){const n=Object.keys(t),r=n.length;let i,o=0;return new Rc((function(){do{if(i)i=i.next;else{if(o>=r)return{done:!0};const a=n[o++];if(a===e){i=void 0;continue}i=t[a]}}while(!i);return{done:!1,value:{edge:i.key,attributes:i.attributes,source:i.source.key,target:i.target.key,sourceAttributes:i.source.attributes,targetAttributes:i.target.attributes,undirected:i.undirected}}}))}function lh(t,e,n,r){const i=e[n];if(!i)return;const o=i.source,a=i.target;return r(i.key,i.attributes,o.key,a.key,o.attributes,a.attributes,i.undirected)&&t?i.key:void 0}function dh(t,e,n,r){let i=e[n];if(!i)return;let o=!1;do{if(o=r(i.key,i.attributes,i.source.key,i.target.key,i.source.attributes,i.target.attributes,i.undirected),t&&o)return i.key;i=i.next}while(void 0!==i)}function ph(t,e){let n=t[e];return void 0!==n.next?new Rc((function(){if(!n)return{done:!0};const t={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:t}})):Rc.of({edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected})}function yh(t,e,n,r){if(0===e.size)return;const i="mixed"!==n&&n!==e.type,o="undirected"===n;let a,s,u=!1;const c=e._edges.values();for(;a=c.next(),!0!==a.done;){if(s=a.value,i&&s.undirected!==o)continue;const{key:e,attributes:n,source:c,target:h}=s;if(u=r(e,n,c.key,h.key,c.attributes,h.attributes,s.undirected),t&&u)return e}}function gh(t,e,n,r,i,o){const a=e?hh:ch;let s;if("undirected"!==n){if("out"!==r&&(s=a(t,i.in,o),t&&s))return s;if("in"!==r&&(s=a(t,i.out,o,r?void 0:i.key),t&&s))return s}if("directed"!==n&&(s=a(t,i.undirected,o),t&&s))return s}function vh(t,e,n,r,i,o,a){const s=n?dh:lh;let u;if("undirected"!==e){if(void 0!==i.in&&"out"!==r&&(u=s(t,i.in,o,a),t&&u))return u;if(void 0!==i.out&&"in"!==r&&(r||i.key!==o)&&(u=s(t,i.out,o,a),t&&u))return u}if("directed"!==e&&void 0!==i.undirected&&(u=s(t,i.undirected,o,a),t&&u))return u}const mh=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function _h(){this.A=null,this.B=null}function bh(t,e,n,r,i){for(const o in r){const a=r[o],s=a.source,u=a.target,c=s===n?u:s;if(e&&e.has(c.key))continue;const h=i(c.key,c.attributes);if(t&&h)return c.key}}function wh(t,e,n,r,i){if("mixed"!==e){if("undirected"===e)return bh(t,null,r,r.undirected,i);if("string"==typeof n)return bh(t,null,r,r[n],i)}const o=new _h;let a;if("undirected"!==e){if("out"!==n){if(a=bh(t,null,r,r.in,i),t&&a)return a;o.wrap(r.in)}if("in"!==n){if(a=bh(t,o,r,r.out,i),t&&a)return a;o.wrap(r.out)}}if("directed"!==e&&(a=bh(t,o,r,r.undirected,i),t&&a))return a}function xh(t,e,n){const r=Object.keys(n),i=r.length;let o=0;return new Rc((function(){let a=null;do{if(o>=i)return t&&t.wrap(n),{done:!0};const s=n[r[o++]],u=s.source,c=s.target;a=u===e?c:u,t&&t.has(a.key)&&(a=null)}while(null===a);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}}))}function kh(t,e,n,r,i){const o=r._nodes.values(),a=r.type;let s,u,c,h,f,l,d;for(;s=o.next(),!0!==s.done;){let r=!1;if(u=s.value,"undirected"!==a)for(c in h=u.out,h){f=h[c];do{if(l=f.target,r=!0,d=i(u.key,l.key,u.attributes,l.attributes,f.key,f.attributes,f.undirected),t&&d)return f;f=f.next}while(f)}if("directed"!==a)for(c in h=u.undirected,h)if(!(e&&u.key>c)){f=h[c];do{if(l=f.target,l.key!==c&&(l=f.source),r=!0,d=i(u.key,l.key,u.attributes,l.attributes,f.key,f.attributes,f.undirected),t&&d)return f;f=f.next}while(f)}if(n&&!r&&(d=i(u.key,null,u.attributes,null,null,null,null),t&&d))return null}}function Mh(t){if(!Wc(t))throw new Jc('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in t))throw new Jc("Graph.import: serialized node is missing its key.");if("attributes"in t&&(!Wc(t.attributes)||null===t.attributes))throw new Jc("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function Eh(t){if(!Wc(t))throw new Jc('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in t))throw new Jc("Graph.import: serialized edge is missing its source.");if(!("target"in t))throw new Jc("Graph.import: serialized edge is missing its target.");if("attributes"in t&&(!Wc(t.attributes)||null===t.attributes))throw new Jc("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in t&&"boolean"!=typeof t.undirected)throw new Jc("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}_h.prototype.wrap=function(t){null===this.A?this.A=t:null===this.B&&(this.B=t)},_h.prototype.has=function(t){return null!==this.A&&t in this.A||null!==this.B&&t in this.B};const Ah=function(){let t=255&Math.floor(256*Math.random());return()=>t++}(),Sh=new Set(["directed","undirected","mixed"]),Lh=new Set(["domain","_events","_eventsCount","_maxListeners"]),Nh={allowSelfLoops:!0,multi:!1,type:"mixed"};function $h(t,e,n){const r=new t.NodeDataClass(e,n);return t._nodes.set(e,r),t.emit("nodeAdded",{key:e,attributes:n}),r}function Ch(t,e,n,r,i,o,a,s){if(!r&&"undirected"===t.type)throw new th(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(r&&"directed"===t.type)throw new th(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(s&&!Wc(s))throw new Jc(`Graph.${e}: invalid attributes. Expecting an object but got "${s}"`);if(o=""+o,a=""+a,s=s||{},!t.allowSelfLoops&&o===a)throw new th(`Graph.${e}: source & target are the same ("${o}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const u=t._nodes.get(o),c=t._nodes.get(a);if(!u)throw new Qc(`Graph.${e}: source node "${o}" not found.`);if(!c)throw new Qc(`Graph.${e}: target node "${a}" not found.`);const h={key:null,undirected:r,source:o,target:a,attributes:s};if(n)i=t._edgeKeyGenerator();else if(i=""+i,t._edges.has(i))throw new th(`Graph.${e}: the "${i}" edge already exists in the graph.`);if(!t.multi&&(r?void 0!==u.undirected[a]:void 0!==u.out[a]))throw new th(`Graph.${e}: an edge linking "${o}" to "${a}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const f=new ih(r,i,u,c,s);t._edges.set(i,f);const l=o===a;return r?(u.undirectedDegree++,c.undirectedDegree++,l&&(u.undirectedLoops++,t._undirectedSelfLoopCount++)):(u.outDegree++,c.inDegree++,l&&(u.directedLoops++,t._directedSelfLoopCount++)),t.multi?f.attachMulti():f.attach(),r?t._undirectedSize++:t._directedSize++,h.key=i,t.emit("edgeAdded",h),i}function Th(t,e,n,r,i,o,a,s,u){if(!r&&"undirected"===t.type)throw new th(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(r&&"directed"===t.type)throw new th(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(s)if(u){if("function"!=typeof s)throw new Jc(`Graph.${e}: invalid updater function. Expecting a function but got "${s}"`)}else if(!Wc(s))throw new Jc(`Graph.${e}: invalid attributes. Expecting an object but got "${s}"`);let c;if(o=""+o,a=""+a,u&&(c=s,s=void 0),!t.allowSelfLoops&&o===a)throw new th(`Graph.${e}: source & target are the same ("${o}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let h,f,l=t._nodes.get(o),d=t._nodes.get(a);if(!n&&(h=t._edges.get(i),h)){if(!(h.source.key===o&&h.target.key===a||r&&h.source.key===a&&h.target.key===o))throw new th(`Graph.${e}: inconsistency detected when attempting to merge the "${i}" edge with "${o}" source & "${a}" target vs. ("${h.source.key}", "${h.target.key}").`);f=h}if(f||t.multi||!l||(f=r?l.undirected[a]:l.out[a]),f){const e=[f.key,!1,!1,!1];if(u?!c:!s)return e;if(u){const e=f.attributes;f.attributes=c(e),t.emit("edgeAttributesUpdated",{type:"replace",key:f.key,attributes:f.attributes})}else Yc(f.attributes,s),t.emit("edgeAttributesUpdated",{type:"merge",key:f.key,attributes:f.attributes,data:s});return e}s=s||{},u&&c&&(s=c(s));const p={key:null,undirected:r,source:o,target:a,attributes:s};if(n)i=t._edgeKeyGenerator();else if(i=""+i,t._edges.has(i))throw new th(`Graph.${e}: the "${i}" edge already exists in the graph.`);let y=!1,g=!1;l||(l=$h(t,o,{}),y=!0,o===a&&(d=l,g=!0)),d||(d=$h(t,a,{}),g=!0),h=new ih(r,i,l,d,s),t._edges.set(i,h);const v=o===a;return r?(l.undirectedDegree++,d.undirectedDegree++,v&&(l.undirectedLoops++,t._undirectedSelfLoopCount++)):(l.outDegree++,d.inDegree++,v&&(l.directedLoops++,t._directedSelfLoopCount++)),t.multi?h.attachMulti():h.attach(),r?t._undirectedSize++:t._directedSize++,p.key=i,t.emit("edgeAdded",p),[i,!0,y,g]}function Gh(t,e){t._edges.delete(e.key);const{source:n,target:r,attributes:i}=e,o=e.undirected,a=n===r;o?(n.undirectedDegree--,r.undirectedDegree--,a&&(n.undirectedLoops--,t._undirectedSelfLoopCount--)):(n.outDegree--,r.inDegree--,a&&(n.directedLoops--,t._directedSelfLoopCount--)),t.multi?e.detachMulti():e.detach(),o?t._undirectedSize--:t._directedSize--,t.emit("edgeDropped",{key:e.key,attributes:i,source:n.key,target:r.key,undirected:o})}class Uh extends Ic.EventEmitter{constructor(t){if(super(),"boolean"!=typeof(t=Yc({},Nh,t)).multi)throw new Jc(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${t.multi}".`);if(!Sh.has(t.type))throw new Jc(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${t.type}".`);if("boolean"!=typeof t.allowSelfLoops)throw new Jc(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${t.allowSelfLoops}".`);Hc(this,"NodeDataClass","mixed"===t.type?eh:"directed"===t.type?nh:rh);const e="geid_"+Ah()+"_";let n=0;Hc(this,"_attributes",{}),Hc(this,"_nodes",new Map),Hc(this,"_edges",new Map),Hc(this,"_directedSize",0),Hc(this,"_undirectedSize",0),Hc(this,"_directedSelfLoopCount",0),Hc(this,"_undirectedSelfLoopCount",0),Hc(this,"_edgeKeyGenerator",(()=>{let t;do{t=e+n++}while(this._edges.has(t));return t})),Hc(this,"_options",t),Lh.forEach((t=>Hc(this,t,this[t]))),Xc(this,"order",(()=>this._nodes.size)),Xc(this,"size",(()=>this._edges.size)),Xc(this,"directedSize",(()=>this._directedSize)),Xc(this,"undirectedSize",(()=>this._undirectedSize)),Xc(this,"selfLoopCount",(()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount)),Xc(this,"directedSelfLoopCount",(()=>this._directedSelfLoopCount)),Xc(this,"undirectedSelfLoopCount",(()=>this._undirectedSelfLoopCount)),Xc(this,"multi",this._options.multi),Xc(this,"type",this._options.type),Xc(this,"allowSelfLoops",this._options.allowSelfLoops),Xc(this,"implementation",(()=>"graphology"))}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(t){return this._nodes.has(""+t)}hasDirectedEdge(t,e){if("undirected"===this.type)return!1;if(1===arguments.length){const e=""+t,n=this._edges.get(e);return!!n&&!n.undirected}if(2===arguments.length){t=""+t,e=""+e;const n=this._nodes.get(t);return!!n&&n.out.hasOwnProperty(e)}throw new Jc(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(t,e){if("directed"===this.type)return!1;if(1===arguments.length){const e=""+t,n=this._edges.get(e);return!!n&&n.undirected}if(2===arguments.length){t=""+t,e=""+e;const n=this._nodes.get(t);return!!n&&n.undirected.hasOwnProperty(e)}throw new Jc(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(t,e){if(1===arguments.length){const e=""+t;return this._edges.has(e)}if(2===arguments.length){t=""+t,e=""+e;const n=this._nodes.get(t);return!!n&&(void 0!==n.out&&n.out.hasOwnProperty(e)||void 0!==n.undirected&&n.undirected.hasOwnProperty(e))}throw new Jc(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(t,e){if("undirected"===this.type)return;if(t=""+t,e=""+e,this.multi)throw new th("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const n=this._nodes.get(t);if(!n)throw new Qc(`Graph.directedEdge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(e))throw new Qc(`Graph.directedEdge: could not find the "${e}" target node in the graph.`);const r=n.out&&n.out[e]||void 0;return r?r.key:void 0}undirectedEdge(t,e){if("directed"===this.type)return;if(t=""+t,e=""+e,this.multi)throw new th("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const n=this._nodes.get(t);if(!n)throw new Qc(`Graph.undirectedEdge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(e))throw new Qc(`Graph.undirectedEdge: could not find the "${e}" target node in the graph.`);const r=n.undirected&&n.undirected[e]||void 0;return r?r.key:void 0}edge(t,e){if(this.multi)throw new th("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");t=""+t,e=""+e;const n=this._nodes.get(t);if(!n)throw new Qc(`Graph.edge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(e))throw new Qc(`Graph.edge: could not find the "${e}" target node in the graph.`);const r=n.out&&n.out[e]||n.undirected&&n.undirected[e]||void 0;if(r)return r.key}areDirectedNeighbors(t,e){t=""+t,e=""+e;const n=this._nodes.get(t);if(!n)throw new Qc(`Graph.areDirectedNeighbors: could not find the "${t}" node in the graph.`);return"undirected"!==this.type&&(e in n.in||e in n.out)}areOutNeighbors(t,e){t=""+t,e=""+e;const n=this._nodes.get(t);if(!n)throw new Qc(`Graph.areOutNeighbors: could not find the "${t}" node in the graph.`);return"undirected"!==this.type&&e in n.out}areInNeighbors(t,e){t=""+t,e=""+e;const n=this._nodes.get(t);if(!n)throw new Qc(`Graph.areInNeighbors: could not find the "${t}" node in the graph.`);return"undirected"!==this.type&&e in n.in}areUndirectedNeighbors(t,e){t=""+t,e=""+e;const n=this._nodes.get(t);if(!n)throw new Qc(`Graph.areUndirectedNeighbors: could not find the "${t}" node in the graph.`);return"directed"!==this.type&&e in n.undirected}areNeighbors(t,e){t=""+t,e=""+e;const n=this._nodes.get(t);if(!n)throw new Qc(`Graph.areNeighbors: could not find the "${t}" node in the graph.`);return"undirected"!==this.type&&(e in n.in||e in n.out)||"directed"!==this.type&&e in n.undirected}areInboundNeighbors(t,e){t=""+t,e=""+e;const n=this._nodes.get(t);if(!n)throw new Qc(`Graph.areInboundNeighbors: could not find the "${t}" node in the graph.`);return"undirected"!==this.type&&e in n.in||"directed"!==this.type&&e in n.undirected}areOutboundNeighbors(t,e){t=""+t,e=""+e;const n=this._nodes.get(t);if(!n)throw new Qc(`Graph.areOutboundNeighbors: could not find the "${t}" node in the graph.`);return"undirected"!==this.type&&e in n.out||"directed"!==this.type&&e in n.undirected}inDegree(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new Qc(`Graph.inDegree: could not find the "${t}" node in the graph.`);return"undirected"===this.type?0:e.inDegree}outDegree(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new Qc(`Graph.outDegree: could not find the "${t}" node in the graph.`);return"undirected"===this.type?0:e.outDegree}directedDegree(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new Qc(`Graph.directedDegree: could not find the "${t}" node in the graph.`);return"undirected"===this.type?0:e.inDegree+e.outDegree}undirectedDegree(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new Qc(`Graph.undirectedDegree: could not find the "${t}" node in the graph.`);return"directed"===this.type?0:e.undirectedDegree}inboundDegree(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new Qc(`Graph.inboundDegree: could not find the "${t}" node in the graph.`);let n=0;return"directed"!==this.type&&(n+=e.undirectedDegree),"undirected"!==this.type&&(n+=e.inDegree),n}outboundDegree(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new Qc(`Graph.outboundDegree: could not find the "${t}" node in the graph.`);let n=0;return"directed"!==this.type&&(n+=e.undirectedDegree),"undirected"!==this.type&&(n+=e.outDegree),n}degree(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new Qc(`Graph.degree: could not find the "${t}" node in the graph.`);let n=0;return"directed"!==this.type&&(n+=e.undirectedDegree),"undirected"!==this.type&&(n+=e.inDegree+e.outDegree),n}inDegreeWithoutSelfLoops(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new Qc(`Graph.inDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return"undirected"===this.type?0:e.inDegree-e.directedLoops}outDegreeWithoutSelfLoops(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new Qc(`Graph.outDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return"undirected"===this.type?0:e.outDegree-e.directedLoops}directedDegreeWithoutSelfLoops(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new Qc(`Graph.directedDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return"undirected"===this.type?0:e.inDegree+e.outDegree-2*e.directedLoops}undirectedDegreeWithoutSelfLoops(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new Qc(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return"directed"===this.type?0:e.undirectedDegree-2*e.undirectedLoops}inboundDegreeWithoutSelfLoops(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new Qc(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let n=0,r=0;return"directed"!==this.type&&(n+=e.undirectedDegree,r+=2*e.undirectedLoops),"undirected"!==this.type&&(n+=e.inDegree,r+=e.directedLoops),n-r}outboundDegreeWithoutSelfLoops(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new Qc(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let n=0,r=0;return"directed"!==this.type&&(n+=e.undirectedDegree,r+=2*e.undirectedLoops),"undirected"!==this.type&&(n+=e.outDegree,r+=e.directedLoops),n-r}degreeWithoutSelfLoops(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new Qc(`Graph.degreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let n=0,r=0;return"directed"!==this.type&&(n+=e.undirectedDegree,r+=2*e.undirectedLoops),"undirected"!==this.type&&(n+=e.inDegree+e.outDegree,r+=2*e.directedLoops),n-r}source(t){t=""+t;const e=this._edges.get(t);if(!e)throw new Qc(`Graph.source: could not find the "${t}" edge in the graph.`);return e.source.key}target(t){t=""+t;const e=this._edges.get(t);if(!e)throw new Qc(`Graph.target: could not find the "${t}" edge in the graph.`);return e.target.key}extremities(t){t=""+t;const e=this._edges.get(t);if(!e)throw new Qc(`Graph.extremities: could not find the "${t}" edge in the graph.`);return[e.source.key,e.target.key]}opposite(t,e){t=""+t,e=""+e;const n=this._edges.get(e);if(!n)throw new Qc(`Graph.opposite: could not find the "${e}" edge in the graph.`);const r=n.source.key,i=n.target.key;if(t===r)return i;if(t===i)return r;throw new Qc(`Graph.opposite: the "${t}" node is not attached to the "${e}" edge (${r}, ${i}).`)}hasExtremity(t,e){t=""+t,e=""+e;const n=this._edges.get(t);if(!n)throw new Qc(`Graph.hasExtremity: could not find the "${t}" edge in the graph.`);return n.source.key===e||n.target.key===e}isUndirected(t){t=""+t;const e=this._edges.get(t);if(!e)throw new Qc(`Graph.isUndirected: could not find the "${t}" edge in the graph.`);return e.undirected}isDirected(t){t=""+t;const e=this._edges.get(t);if(!e)throw new Qc(`Graph.isDirected: could not find the "${t}" edge in the graph.`);return!e.undirected}isSelfLoop(t){t=""+t;const e=this._edges.get(t);if(!e)throw new Qc(`Graph.isSelfLoop: could not find the "${t}" edge in the graph.`);return e.source===e.target}addNode(t,e){const n=function(t,e,n){if(n&&!Wc(n))throw new Jc(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(e=""+e,n=n||{},t._nodes.has(e))throw new th(`Graph.addNode: the "${e}" node already exist in the graph.`);const r=new t.NodeDataClass(e,n);return t._nodes.set(e,r),t.emit("nodeAdded",{key:e,attributes:n}),r}(this,t,e);return n.key}mergeNode(t,e){if(e&&!Wc(e))throw new Jc(`Graph.mergeNode: invalid attributes. Expecting an object but got "${e}"`);t=""+t,e=e||{};let n=this._nodes.get(t);return n?(e&&(Yc(n.attributes,e),this.emit("nodeAttributesUpdated",{type:"merge",key:t,attributes:n.attributes,data:e})),[t,!1]):(n=new this.NodeDataClass(t,e),this._nodes.set(t,n),this.emit("nodeAdded",{key:t,attributes:e}),[t,!0])}updateNode(t,e){if(e&&"function"!=typeof e)throw new Jc(`Graph.updateNode: invalid updater function. Expecting a function but got "${e}"`);t=""+t;let n=this._nodes.get(t);if(n){if(e){const r=n.attributes;n.attributes=e(r),this.emit("nodeAttributesUpdated",{type:"replace",key:t,attributes:n.attributes})}return[t,!1]}const r=e?e({}):{};return n=new this.NodeDataClass(t,r),this._nodes.set(t,n),this.emit("nodeAdded",{key:t,attributes:r}),[t,!0]}dropNode(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new Qc(`Graph.dropNode: could not find the "${t}" node in the graph.`);let n;if("undirected"!==this.type){for(const t in e.out){n=e.out[t];do{Gh(this,n),n=n.next}while(n)}for(const t in e.in){n=e.in[t];do{Gh(this,n),n=n.next}while(n)}}if("directed"!==this.type)for(const t in e.undirected){n=e.undirected[t];do{Gh(this,n),n=n.next}while(n)}this._nodes.delete(t),this.emit("nodeDropped",{key:t,attributes:e.attributes})}dropEdge(t){let e;if(arguments.length>1){const t=""+arguments[0],n=""+arguments[1];if(e=Bc(this,t,n,this.type),!e)throw new Qc(`Graph.dropEdge: could not find the "${t}" -> "${n}" edge in the graph.`)}else if(t=""+t,e=this._edges.get(t),!e)throw new Qc(`Graph.dropEdge: could not find the "${t}" edge in the graph.`);return Gh(this,e),this}dropDirectedEdge(t,e){if(arguments.length<2)throw new th("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new th("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const n=Bc(this,t=""+t,e=""+e,"directed");if(!n)throw new Qc(`Graph.dropDirectedEdge: could not find a "${t}" -> "${e}" edge in the graph.`);return Gh(this,n),this}dropUndirectedEdge(t,e){if(arguments.length<2)throw new th("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new th("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const n=Bc(this,t,e,"undirected");if(!n)throw new Qc(`Graph.dropUndirectedEdge: could not find a "${t}" -> "${e}" edge in the graph.`);return Gh(this,n),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const t=this._nodes.values();let e;for(;e=t.next(),!0!==e.done;)e.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(t){return this._attributes[t]}getAttributes(){return this._attributes}hasAttribute(t){return this._attributes.hasOwnProperty(t)}setAttribute(t,e){return this._attributes[t]=e,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:t}),this}updateAttribute(t,e){if("function"!=typeof e)throw new Jc("Graph.updateAttribute: updater should be a function.");const n=this._attributes[t];return this._attributes[t]=e(n),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:t}),this}removeAttribute(t){return delete this._attributes[t],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:t}),this}replaceAttributes(t){if(!Wc(t))throw new Jc("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=t,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(t){if(!Wc(t))throw new Jc("Graph.mergeAttributes: provided attributes are not a plain object.");return Yc(this._attributes,t),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:t}),this}updateAttributes(t){if("function"!=typeof t)throw new Jc("Graph.updateAttributes: provided updater is not a function.");return this._attributes=t(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(t,e){if("function"!=typeof t)throw new Jc("Graph.updateEachNodeAttributes: expecting an updater function.");if(e&&!Vc(e))throw new Jc("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const n=this._nodes.values();let r,i;for(;r=n.next(),!0!==r.done;)i=r.value,i.attributes=t(i.key,i.attributes);this.emit("eachNodeAttributesUpdated",{hints:e||null})}updateEachEdgeAttributes(t,e){if("function"!=typeof t)throw new Jc("Graph.updateEachEdgeAttributes: expecting an updater function.");if(e&&!Vc(e))throw new Jc("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const n=this._edges.values();let r,i,o,a;for(;r=n.next(),!0!==r.done;)i=r.value,o=i.source,a=i.target,i.attributes=t(i.key,i.attributes,o.key,a.key,o.attributes,a.attributes,i.undirected);this.emit("eachEdgeAttributesUpdated",{hints:e||null})}forEachAdjacencyEntry(t){if("function"!=typeof t)throw new Jc("Graph.forEachAdjacencyEntry: expecting a callback.");kh(!1,!1,!1,this,t)}forEachAdjacencyEntryWithOrphans(t){if("function"!=typeof t)throw new Jc("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");kh(!1,!1,!0,this,t)}forEachAssymetricAdjacencyEntry(t){if("function"!=typeof t)throw new Jc("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");kh(!1,!0,!1,this,t)}forEachAssymetricAdjacencyEntryWithOrphans(t){if("function"!=typeof t)throw new Jc("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");kh(!1,!0,!0,this,t)}nodes(){return"function"==typeof Array.from?Array.from(this._nodes.keys()):Fc(this._nodes.keys(),this._nodes.size)}forEachNode(t){if("function"!=typeof t)throw new Jc("Graph.forEachNode: expecting a callback.");const e=this._nodes.values();let n,r;for(;n=e.next(),!0!==n.done;)r=n.value,t(r.key,r.attributes)}findNode(t){if("function"!=typeof t)throw new Jc("Graph.findNode: expecting a callback.");const e=this._nodes.values();let n,r;for(;n=e.next(),!0!==n.done;)if(r=n.value,t(r.key,r.attributes))return r.key}mapNodes(t){if("function"!=typeof t)throw new Jc("Graph.mapNode: expecting a callback.");const e=this._nodes.values();let n,r;const i=new Array(this.order);let o=0;for(;n=e.next(),!0!==n.done;)r=n.value,i[o++]=t(r.key,r.attributes);return i}someNode(t){if("function"!=typeof t)throw new Jc("Graph.someNode: expecting a callback.");const e=this._nodes.values();let n,r;for(;n=e.next(),!0!==n.done;)if(r=n.value,t(r.key,r.attributes))return!0;return!1}everyNode(t){if("function"!=typeof t)throw new Jc("Graph.everyNode: expecting a callback.");const e=this._nodes.values();let n,r;for(;n=e.next(),!0!==n.done;)if(r=n.value,!t(r.key,r.attributes))return!1;return!0}filterNodes(t){if("function"!=typeof t)throw new Jc("Graph.filterNodes: expecting a callback.");const e=this._nodes.values();let n,r;const i=[];for(;n=e.next(),!0!==n.done;)r=n.value,t(r.key,r.attributes)&&i.push(r.key);return i}reduceNodes(t,e){if("function"!=typeof t)throw new Jc("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new Jc("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let n=e;const r=this._nodes.values();let i,o;for(;i=r.next(),!0!==i.done;)o=i.value,n=t(n,o.key,o.attributes);return n}nodeEntries(){const t=this._nodes.values();return new Rc((()=>{const e=t.next();if(e.done)return e;const n=e.value;return{value:{node:n.key,attributes:n.attributes},done:!1}}))}export(){const t=new Array(this._nodes.size);let e=0;this._nodes.forEach(((n,r)=>{t[e++]=function(t,e){const n={key:t};return Kc(e.attributes)||(n.attributes=Yc({},e.attributes)),n}(r,n)}));const n=new Array(this._edges.size);return e=0,this._edges.forEach(((t,r)=>{n[e++]=function(t,e,n){const r={key:e,source:n.source.key,target:n.target.key};return Kc(n.attributes)||(r.attributes=Yc({},n.attributes)),"mixed"===t&&n.undirected&&(r.undirected=!0),r}(this.type,r,t)})),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:t,edges:n}}import(t,e=!1){if(t instanceof Uh)return t.forEachNode(((t,n)=>{e?this.mergeNode(t,n):this.addNode(t,n)})),t.forEachEdge(((t,n,r,i,o,a,s)=>{e?s?this.mergeUndirectedEdgeWithKey(t,r,i,n):this.mergeDirectedEdgeWithKey(t,r,i,n):s?this.addUndirectedEdgeWithKey(t,r,i,n):this.addDirectedEdgeWithKey(t,r,i,n)})),this;if(!Wc(t))throw new Jc("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(t.attributes){if(!Wc(t.attributes))throw new Jc("Graph.import: invalid attributes. Expecting a plain object.");e?this.mergeAttributes(t.attributes):this.replaceAttributes(t.attributes)}let n,r,i,o,a;if(t.nodes){if(i=t.nodes,!Array.isArray(i))throw new Jc("Graph.import: invalid nodes. Expecting an array.");for(n=0,r=i.length;n<r;n++){o=i[n],Mh(o);const{key:t,attributes:r}=o;e?this.mergeNode(t,r):this.addNode(t,r)}}if(t.edges){let o=!1;if("undirected"===this.type&&(o=!0),i=t.edges,!Array.isArray(i))throw new Jc("Graph.import: invalid edges. Expecting an array.");for(n=0,r=i.length;n<r;n++){a=i[n],Eh(a);const{source:t,target:r,attributes:s,undirected:u=o}=a;let c;"key"in a?(c=e?u?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:u?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,c.call(this,a.key,t,r,s)):(c=e?u?this.mergeUndirectedEdge:this.mergeDirectedEdge:u?this.addUndirectedEdge:this.addDirectedEdge,c.call(this,t,r,s))}}return this}nullCopy(t){const e=new Uh(Yc({},this._options,t));return e.replaceAttributes(Yc({},this.getAttributes())),e}emptyCopy(t){const e=this.nullCopy(t);return this._nodes.forEach(((t,n)=>{const r=Yc({},t.attributes);t=new e.NodeDataClass(n,r),e._nodes.set(n,t)})),e}copy(t){if("string"==typeof(t=t||{}).type&&t.type!==this.type&&"mixed"!==t.type)throw new th(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${t.type}" because this would mean losing information about the current graph.`);if("boolean"==typeof t.multi&&t.multi!==this.multi&&!0!==t.multi)throw new th("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if("boolean"==typeof t.allowSelfLoops&&t.allowSelfLoops!==this.allowSelfLoops&&!0!==t.allowSelfLoops)throw new th("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const e=this.emptyCopy(t),n=this._edges.values();let r,i;for(;r=n.next(),!0!==r.done;)i=r.value,Ch(e,"copy",!1,i.undirected,i.key,i.source.key,i.target.key,Yc({},i.attributes));return e}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const t={};this._nodes.forEach(((e,n)=>{t[n]=e.attributes}));const e={},n={};this._edges.forEach(((t,r)=>{const i=t.undirected?"--":"->";let o,a="",s=t.source.key,u=t.target.key;t.undirected&&s>u&&(o=s,s=u,u=o);const c=`(${s})${i}(${u})`;r.startsWith("geid_")?this.multi&&(void 0===n[c]?n[c]=0:n[c]++,a+=`${n[c]}. `):a+=`[${r}]: `,a+=c,e[a]=t.attributes}));const r={};for(const t in this)this.hasOwnProperty(t)&&!Lh.has(t)&&"function"!=typeof this[t]&&"symbol"!=typeof t&&(r[t]=this[t]);return r.attributes=this._attributes,r.nodes=t,r.edges=e,Hc(r,"constructor",this.constructor),r}}"undefined"!=typeof Symbol&&(Uh.prototype[Symbol.for("nodejs.util.inspect.custom")]=Uh.prototype.inspect),[{name:t=>`${t}Edge`,generateKey:!0},{name:t=>`${t}DirectedEdge`,generateKey:!0,type:"directed"},{name:t=>`${t}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:t=>`${t}EdgeWithKey`},{name:t=>`${t}DirectedEdgeWithKey`,type:"directed"},{name:t=>`${t}UndirectedEdgeWithKey`,type:"undirected"}].forEach((t=>{["add","merge","update"].forEach((e=>{const n=t.name(e),r="add"===e?Ch:Th;t.generateKey?Uh.prototype[n]=function(i,o,a){return r(this,n,!0,"undirected"===(t.type||this.type),null,i,o,a,"update"===e)}:Uh.prototype[n]=function(i,o,a,s){return r(this,n,!1,"undirected"===(t.type||this.type),i,o,a,s,"update"===e)}}))})),function(t){ah.forEach((function({name:e,attacher:n}){n(t,e("Node"),0),n(t,e("Source"),1),n(t,e("Target"),2),n(t,e("Opposite"),3)}))}(Uh),function(t){sh.forEach((function({name:e,attacher:n}){n(t,e("Edge"),"mixed"),n(t,e("DirectedEdge"),"directed"),n(t,e("UndirectedEdge"),"undirected")}))}(Uh),function(t){uh.forEach((e=>{(function(t,e){const{name:n,type:r,direction:i}=e;t.prototype[n]=function(t,e){if("mixed"!==r&&"mixed"!==this.type&&r!==this.type)return[];if(!arguments.length)return function(t,e){if(0===t.size)return[];if("mixed"===e||e===t.type)return"function"==typeof Array.from?Array.from(t._edges.keys()):Fc(t._edges.keys(),t._edges.size);const n="undirected"===e?t.undirectedSize:t.directedSize,r=new Array(n),i="undirected"===e,o=t._edges.values();let a,s,u=0;for(;a=o.next(),!0!==a.done;)s=a.value,s.undirected===i&&(r[u++]=s.key);return r}(this,r);if(1===arguments.length){t=""+t;const e=this._nodes.get(t);if(void 0===e)throw new Qc(`Graph.${n}: could not find the "${t}" node in the graph.`);return function(t,e,n,r){const i=[];return gh(!1,t,e,n,r,(function(t){i.push(t)})),i}(this.multi,"mixed"===r?this.type:r,i,e)}if(2===arguments.length){t=""+t,e=""+e;const o=this._nodes.get(t);if(!o)throw new Qc(`Graph.${n}:  could not find the "${t}" source node in the graph.`);if(!this._nodes.has(e))throw new Qc(`Graph.${n}:  could not find the "${e}" target node in the graph.`);return function(t,e,n,r,i){const o=[];return vh(!1,t,e,n,r,i,(function(t){o.push(t)})),o}(r,this.multi,i,o,e)}throw new Jc(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}})(t,e),function(t,e){const{name:n,type:r,direction:i}=e,o="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(t,e,n){if("mixed"===r||"mixed"===this.type||r===this.type){if(1===arguments.length)return yh(!1,this,r,n=t);if(2===arguments.length){t=""+t,n=e;const a=this._nodes.get(t);if(void 0===a)throw new Qc(`Graph.${o}: could not find the "${t}" node in the graph.`);return gh(!1,this.multi,"mixed"===r?this.type:r,i,a,n)}if(3===arguments.length){t=""+t,e=""+e;const a=this._nodes.get(t);if(!a)throw new Qc(`Graph.${o}:  could not find the "${t}" source node in the graph.`);if(!this._nodes.has(e))throw new Qc(`Graph.${o}:  could not find the "${e}" target node in the graph.`);return vh(!1,r,this.multi,i,a,e,n)}throw new Jc(`Graph.${o}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const a="map"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(){const t=Array.prototype.slice.call(arguments),e=t.pop();let n;if(0===t.length){let i=0;"directed"!==r&&(i+=this.undirectedSize),"undirected"!==r&&(i+=this.directedSize),n=new Array(i);let o=0;t.push(((t,r,i,a,s,u,c)=>{n[o++]=e(t,r,i,a,s,u,c)}))}else n=[],t.push(((t,r,i,o,a,s,u)=>{n.push(e(t,r,i,o,a,s,u))}));return this[o].apply(this,t),n};const s="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[s]=function(){const t=Array.prototype.slice.call(arguments),e=t.pop(),n=[];return t.push(((t,r,i,o,a,s,u)=>{e(t,r,i,o,a,s,u)&&n.push(t)})),this[o].apply(this,t),n};const u="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[u]=function(){let t,e,n=Array.prototype.slice.call(arguments);if(n.length<2||n.length>4)throw new Jc(`Graph.${u}: invalid number of arguments (expecting 2, 3 or 4 and got ${n.length}).`);if("function"==typeof n[n.length-1]&&"function"!=typeof n[n.length-2])throw new Jc(`Graph.${u}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);2===n.length?(t=n[0],e=n[1],n=[]):3===n.length?(t=n[1],e=n[2],n=[n[0]]):4===n.length&&(t=n[2],e=n[3],n=[n[0],n[1]]);let r=e;return n.push(((e,n,i,o,a,s,u)=>{r=t(r,e,n,i,o,a,s,u)})),this[o].apply(this,n),r}}(t,e),function(t,e){const{name:n,type:r,direction:i}=e,o="find"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(t,e,n){if("mixed"!==r&&"mixed"!==this.type&&r!==this.type)return!1;if(1===arguments.length)return yh(!0,this,r,n=t);if(2===arguments.length){t=""+t,n=e;const a=this._nodes.get(t);if(void 0===a)throw new Qc(`Graph.${o}: could not find the "${t}" node in the graph.`);return gh(!0,this.multi,"mixed"===r?this.type:r,i,a,n)}if(3===arguments.length){t=""+t,e=""+e;const a=this._nodes.get(t);if(!a)throw new Qc(`Graph.${o}:  could not find the "${t}" source node in the graph.`);if(!this._nodes.has(e))throw new Qc(`Graph.${o}:  could not find the "${e}" target node in the graph.`);return vh(!0,r,this.multi,i,a,e,n)}throw new Jc(`Graph.${o}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const a="some"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[a]=function(){const t=Array.prototype.slice.call(arguments),e=t.pop();return t.push(((t,n,r,i,o,a,s)=>e(t,n,r,i,o,a,s))),!!this[o].apply(this,t)};const s="every"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(){const t=Array.prototype.slice.call(arguments),e=t.pop();return t.push(((t,n,r,i,o,a,s)=>!e(t,n,r,i,o,a,s))),!this[o].apply(this,t)}}(t,e),function(t,e){const{name:n,type:r,direction:i}=e,o=n.slice(0,-1)+"Entries";t.prototype[o]=function(t,e){if("mixed"!==r&&"mixed"!==this.type&&r!==this.type)return Rc.empty();if(!arguments.length)return function(t,e){if(0===t.size)return Rc.empty();const n="mixed"!==e&&e!==t.type,r="undirected"===e,i=t._edges.values();return new Rc((function(){let t,e;for(;;){if(t=i.next(),t.done)return t;if(e=t.value,!n||e.undirected===r)break}return{value:{edge:e.key,attributes:e.attributes,source:e.source.key,target:e.target.key,sourceAttributes:e.source.attributes,targetAttributes:e.target.attributes,undirected:e.undirected},done:!1}}))}(this,r);if(1===arguments.length){t=""+t;const e=this._nodes.get(t);if(!e)throw new Qc(`Graph.${o}: could not find the "${t}" node in the graph.`);return function(t,e,n){let r=Rc.empty();return"undirected"!==t&&("out"!==e&&void 0!==n.in&&(r=qc(r,fh(n.in))),"in"!==e&&void 0!==n.out&&(r=qc(r,fh(n.out,e?void 0:n.key)))),"directed"!==t&&void 0!==n.undirected&&(r=qc(r,fh(n.undirected))),r}(r,i,e)}if(2===arguments.length){t=""+t,e=""+e;const n=this._nodes.get(t);if(!n)throw new Qc(`Graph.${o}:  could not find the "${t}" source node in the graph.`);if(!this._nodes.has(e))throw new Qc(`Graph.${o}:  could not find the "${e}" target node in the graph.`);return function(t,e,n,r){let i=Rc.empty();return"undirected"!==t&&(void 0!==n.in&&"out"!==e&&r in n.in&&(i=qc(i,ph(n.in,r))),void 0!==n.out&&"in"!==e&&r in n.out&&(e||n.key!==r)&&(i=qc(i,ph(n.out,r)))),"directed"!==t&&void 0!==n.undirected&&r in n.undirected&&(i=qc(i,ph(n.undirected,r))),i}(r,i,n,e)}throw new Jc(`Graph.${o}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}(t,e)}))}(Uh),function(t){mh.forEach((e=>{(function(t,e){const{name:n,type:r,direction:i}=e;t.prototype[n]=function(t){if("mixed"!==r&&"mixed"!==this.type&&r!==this.type)return[];t=""+t;const e=this._nodes.get(t);if(void 0===e)throw new Qc(`Graph.${n}: could not find the "${t}" node in the graph.`);return function(t,e,n){if("mixed"!==t){if("undirected"===t)return Object.keys(n.undirected);if("string"==typeof e)return Object.keys(n[e])}const r=[];return wh(!1,t,e,n,(function(t){r.push(t)})),r}("mixed"===r?this.type:r,i,e)}})(t,e),function(t,e){const{name:n,type:r,direction:i}=e,o="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(t,e){if("mixed"!==r&&"mixed"!==this.type&&r!==this.type)return;t=""+t;const n=this._nodes.get(t);if(void 0===n)throw new Qc(`Graph.${o}: could not find the "${t}" node in the graph.`);wh(!1,"mixed"===r?this.type:r,i,n,e)};const a="map"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(t,e){const n=[];return this[o](t,((t,r)=>{n.push(e(t,r))})),n};const s="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[s]=function(t,e){const n=[];return this[o](t,((t,r)=>{e(t,r)&&n.push(t)})),n};const u="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[u]=function(t,e,n){if(arguments.length<3)throw new Jc(`Graph.${u}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let r=n;return this[o](t,((t,n)=>{r=e(r,t,n)})),r}}(t,e),function(t,e){const{name:n,type:r,direction:i}=e,o=n[0].toUpperCase()+n.slice(1,-1),a="find"+o;t.prototype[a]=function(t,e){if("mixed"!==r&&"mixed"!==this.type&&r!==this.type)return;t=""+t;const n=this._nodes.get(t);if(void 0===n)throw new Qc(`Graph.${a}: could not find the "${t}" node in the graph.`);return wh(!0,"mixed"===r?this.type:r,i,n,e)};const s="some"+o;t.prototype[s]=function(t,e){return!!this[a](t,e)};const u="every"+o;t.prototype[u]=function(t,e){return!this[a](t,((t,n)=>!e(t,n)))}}(t,e),function(t,e){const{name:n,type:r,direction:i}=e,o=n.slice(0,-1)+"Entries";t.prototype[o]=function(t){if("mixed"!==r&&"mixed"!==this.type&&r!==this.type)return Rc.empty();t=""+t;const e=this._nodes.get(t);if(void 0===e)throw new Qc(`Graph.${o}: could not find the "${t}" node in the graph.`);return function(t,e,n){if("mixed"!==t){if("undirected"===t)return xh(null,n,n.undirected);if("string"==typeof e)return xh(null,n,n[e])}let r=Rc.empty();const i=new _h;return"undirected"!==t&&("out"!==e&&(r=qc(r,xh(i,n,n.in))),"in"!==e&&(r=qc(r,xh(i,n,n.out)))),"directed"!==t&&(r=qc(r,xh(i,n,n.undirected))),r}("mixed"===r?this.type:r,i,e)}}(t,e)}))}(Uh);class Dh extends Uh{constructor(t){const e=Yc({type:"directed"},t);if("multi"in e&&!1!==e.multi)throw new Jc("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("directed"!==e.type)throw new Jc('DirectedGraph.from: inconsistent "'+e.type+'" type in given options!');super(e)}}class Oh extends Uh{constructor(t){const e=Yc({type:"undirected"},t);if("multi"in e&&!1!==e.multi)throw new Jc("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("undirected"!==e.type)throw new Jc('UndirectedGraph.from: inconsistent "'+e.type+'" type in given options!');super(e)}}class zh extends Uh{constructor(t){const e=Yc({multi:!0},t);if("multi"in e&&!0!==e.multi)throw new Jc("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(e)}}class jh extends Uh{constructor(t){const e=Yc({type:"directed",multi:!0},t);if("multi"in e&&!0!==e.multi)throw new Jc("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("directed"!==e.type)throw new Jc('MultiDirectedGraph.from: inconsistent "'+e.type+'" type in given options!');super(e)}}class Ph extends Uh{constructor(t){const e=Yc({type:"undirected",multi:!0},t);if("multi"in e&&!0!==e.multi)throw new Jc("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("undirected"!==e.type)throw new Jc('MultiUndirectedGraph.from: inconsistent "'+e.type+'" type in given options!');super(e)}}function Ih(t){t.from=function(e,n){const r=Yc({},e.options,n),i=new t(r);return i.import(e),i}}Ih(Uh),Ih(Dh),Ih(Oh),Ih(zh),Ih(jh),Ih(Ph),Uh.Graph=Uh,Uh.DirectedGraph=Dh,Uh.UndirectedGraph=Oh,Uh.MultiGraph=zh,Uh.MultiDirectedGraph=jh,Uh.MultiUndirectedGraph=Ph,Uh.InvalidArgumentsGraphError=Jc,Uh.NotFoundGraphError=Qc,Uh.UsageGraphError=th;var Rh=n(181);function Fh(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return qh(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qh(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function qh(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Yh=function(){var t,e=new Uh,n=Fh(data.nodes);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.id,o=r.label;e.hasNode(i)||e.addNode(i,{label:o})}}catch(t){n.e(t)}finally{n.f()}var a,s=Fh(data.links);try{for(s.s();!(a=s.n()).done;){var u=a.value,c=u.source,h=u.target;e.hasEdge(c.id,h.id)||e.addEdge(c.id,h.id)}}catch(t){s.e(t)}finally{s.f()}return e}();window.addEventListener("DOMContentLoaded",(function(){var t=document.getElementById("focus-check"),e=document.getElementById("focus-mode-select"),n=document.getElementById("focus-input");if(!1!==focusIsActive){var r;t.checked=!1;var i=new URL(window.location).searchParams,o=Number(i.get("focus"));!1===isNaN(o)&&o>0&&(n.value=o,a()),Vu("f",(function(e){e.preventDefault(),t.checked=!t.checked,t.dispatchEvent(new Event("change"))})),Vu("alt+r",(function(e){e.preventDefault(),t.checked=!1,t.dispatchEvent(new Event("change"))})),t.addEventListener("change",(function(){t.checked?a():(n.classList.remove("active"),n.removeEventListener("input",s),e.removeEventListener("change",c),lc(tc.filteredByFocus))}))}function a(){void 0!==u.openedRecordId?(c(),e.addEventListener("change",c),s(),n.classList.add("active"),n.addEventListener("input",s),n.focus()):t.checked=!1}function s(){var t=u.openedRecordId,e=[];(0,Rh.a)(Yh,t,(function(t,r,i){return e.push(t),i>=n.valueAsNumber}),{mode:r}),hc(e,tc.filteredByFocus)}function c(){r=e.value,s()}}))})()})();
    </script>
    

</body>

</html>