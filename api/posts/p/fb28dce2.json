{"data":{"title":"用 Markdown 链接替换部分 Hexo 标签语法","slug":"博客站点维护/Hexo/用 Markdown 链接替换部分 Hexo 标签语法","description":"以一种兼容性更强的方式美化卡片类型的链接","date":"2024-11-28T15:35:25.000Z","updated":"2025-01-01T19:05:30.229Z","language":"zh-CN","comments":true,"url":"p/fb28dce2/","cover":"https://cdn.gallery.uuanqin.top/img/202411282306673.webp","images":[],"content":"\n<div class=\"callout\" data-callout=\"success\">\n<div class=\"callout-title\">\n<div class=\"callout-title-icon\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-check\"><path d=\"M20 6 9 17l-5-5\"/></svg>\n</div>\n<div class=\"callout-title-inner\">本文不涉及对主题源代码的修改</div>\n</div>\n<div class=\"callout-content\"><p></p>\n</div></div><p>在上一篇文章 <a class=\"uuanqin-bilink\" target=\"_blank\" href=\"/p/8aa53d93/\"><span class=\"yukari\">站内文章</span>自定义 Hexo 中的超链接样式</a> 中介绍了 <code>hexo-filter-custom-link</code> 插件如何在：</p>\n<ul>\n<li>不修改主题源代码</li>\n<li>不使用 Hexo 标签语法</li>\n</ul>\n<p>的条件下美化一般的超链接。为了提升可玩性， <code>hexo-filter-custom-link</code> 插件预留了更多的自定义模板，满足更丰富的需求，甚至可以替换一部分 Hexo 标签语法。</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/202411282306673.webp\" alt=\"image.png\" width=\"350px\" /></p>\n<p>通过使用插件，我们只需要在 Markdown 中写下类似 <code>[name](url &quot;title&quot;)</code> 形式的链接就可以实现：</p>\n<ul>\n<li>文章外链卡片</li>\n</ul>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/202411252323643.webp\" alt=\"image.png\" width=\"385px\" /></p>\n<ul>\n<li>作品评价卡片</li>\n</ul>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/202411280251115.webp\" alt=\"image.png\" width=\"187px\" /></p>\n<ul>\n<li>Bilibili 视频卡片</li>\n</ul>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/202411282158491.webp\" alt=\"image.png\" width=\"500px\" /></p>\n<h1 id=\"插件安装与使用\"><a class=\"markdownIt-Anchor\" href=\"#插件安装与使用\"></a> 插件安装与使用</h1>\n<p>安装与使用方式见项目 README 文档。</p>\n<p><a href=\"https://github.com/uuanqin/hexo-filter-custom-link\"><img src= \"/image/loading.gif\" data-lazy-src=\"https://github-readme-stats.uuanqin.top/api/pin/?username=uuanqin&amp;repo=hexo-filter-custom-link\" alt=\"Readme Card\" /></a></p>\n<p>GitHub 项目地址：<a href=\"https://github.com/uuanqin/hexo-filter-custom-link\">uuanqin/hexo-filter-custom-link: Customize the rendered HTML of Links. 自定义链接渲染后的 HTML</a></p>\n<p>主要功能：</p>\n<ul>\n<li>自定义链接渲染后的样式，让形如 <code>[text](url)</code> 或 <code>[text](url &quot;title&quot;)</code> 的超链接渲染成你想要的模板。</li>\n<li>插件提供多种通配符方便设计更复杂的模板，通配符可以重复使用。</li>\n<li>在特殊情况下，可以为一些特殊链接指定不同的模板，让超链接的样式更加丰富。不管是通用模板还是自定义模板，它们都是可以共存的。</li>\n<li>对于复杂模板，支持模板间距以区分其他 Markdown 文本，避免渲染错误。</li>\n</ul>\n\n<div class=\"callout\" data-callout=\"note\">\n<div class=\"callout-title\">\n<div class=\"callout-title-icon\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-pencil\"><path d=\"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z\"/><path d=\"m15 5 4 4\"/></svg>\n</div>\n<div class=\"callout-title-inner\">实测插件兼容性良好</div>\n</div>\n<div class=\"callout-content\"><p></p>\n<p>目前测试了该插件与以下「链接替换」插件并不冲突：</p>\n<ul>\n<li><a href=\"https://github.com/hexojs/hexo-filter-nofollow\">hexojs/hexo-filter-nofollow</a> ：为外链添加 <code>nofollow</code> 等属性提升网站的 SEO</li>\n<li><a href=\"https://github.com/willow-god/hexo-safego/\">willow-god/hexo-safego</a> ：一款外部链接替换插件</li>\n</ul>\n</div></div><p>利用这个插件我们可以用特殊的符号 <code>%%</code> 去「标记」特殊的链接，让插件明白应该应用何种模板。 <code>%%</code> 标记后还可以传递模板参数，这样在设计模板时可以使用更多的自定义占位符。比如我们可以通过插件轻松实现博主们都爱使用的「文章外链卡片」，我们只需要手动指定链接的应用模板即可。</p>\n<p>参数的形式就是仿照 URL 传参设计的，参数名可以自己自定义以方便模板的设计，和 Hexo 标签插件的传参相比能提升一定的可读性。</p>\n<p>另外，像「卡片」这样的模板往往比较复杂，而且这种链接一般不会是 inline 的，所以可以使用插件的 <code>spacing</code> 选项为模板上下插入换行符，避免 Hexo 的渲染器渲染错误。</p>\n<h1 id=\"示例\"><a class=\"markdownIt-Anchor\" href=\"#示例\"></a> 示例</h1>\n<p>这部分分享一些使用案例，可以加深对插件自定义模板的体会。案例几乎是在 <a href=\"https://butterfly.zhheo.com/post.html\">文章 | Butterfly主题美化教程</a> 上找的。熟练之后，你也可以试试用一个插件平替里面「标签外挂」相关的文章😉。</p>\n<h2 id=\"例-1文章外链卡片\"><a class=\"markdownIt-Anchor\" href=\"#例-1文章外链卡片\"></a> 例 1：文章外链卡片</h2>\n\n<div class=\"callout\" data-callout=\"hint\">\n<div class=\"callout-title\">\n<div class=\"callout-title-icon\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-flame\"><path d=\"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z\"/></svg>\n</div>\n<div class=\"callout-title-inner\">本案例基于以下项目进行修改</div>\n</div>\n<div class=\"callout-content\"><p></p>\n<ul>\n<li><a href=\"https://blog.zhheo.com/p/ccaf9148.html\">Hexo的Butterfly魔改教程：网址卡片外置标签 | 张洪Heo</a></li>\n<li><a href=\"https://blog.liushen.fun/posts/a64defb4/\">魔改笔记七：分类条及外链卡片 - 清羽飞扬</a></li>\n</ul>\n</div></div><p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/202411252323643.webp\" alt=\"image.png\" width=\"385px\" /></p>\n<p>实例展示：</p>\n<a class=\"tag-link\" target=\"_blank\" href=\"/p/8aa53d93/\" title=\"示例标题\">\n  <div class=\"tag-link-tips\">引用站外地址</div>\n  <div class=\"tag-link-bottom\">\n      <div class=\"tag-link-left\"><i class=\"fa-solid fa-link\"></i></div>\n      <div class=\"tag-link-right\">\n          <div class=\"tag-link-title\">示例卡片</div>\n          <div class=\"tag-link-sitename\">外部网站，请确认链接的正确性与安全性</div>\n      </div>\n      <i class=\"fa-solid fa-angle-right\"></i>\n  </div>\n</a>\n<p>Markdown 写法：</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"string\">示例卡片</span>](<span class=\"link\">/p/8aa53d93/ &quot;%%CARD%%&quot;</span>)</span><br><span class=\"line\">[<span class=\"string\">示例卡片</span>](<span class=\"link\">/p/8aa53d93/ &quot;%%CARD%%TITLE=示例标题&quot;</span>)</span><br></pre></td></tr></table></figure>\n<p><code>_config.yml</code> 中配置：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">custom_link:</span></span><br><span class=\"line\">  <span class=\"attr\">enable:</span> <span class=\"literal\">true</span>   <span class=\"comment\"># enable this plugin</span></span><br><span class=\"line\">  <span class=\"attr\">general_template:</span> <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">  <span class=\"attr\">custom_templates:</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">CARD</span></span><br><span class=\"line\">      <span class=\"attr\">spacing:</span> <span class=\"number\">1</span> <span class=\"comment\"># 表示模板前后插入一个换行符</span></span><br><span class=\"line\">      <span class=\"attr\">template:</span> <span class=\"string\">|</span></span><br><span class=\"line\"><span class=\"string\">        &lt;a class=&quot;tag-link&quot; target=&quot;_blank&quot; href=&quot;__URL__&quot; title=&quot;__TITLE__&quot;&gt;</span></span><br><span class=\"line\"><span class=\"string\">          &lt;div class=&quot;tag-link-tips&quot;&gt;引用站外地址&lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"string\">          &lt;div class=&quot;tag-link-bottom&quot;&gt;</span></span><br><span class=\"line\"><span class=\"string\">              &lt;div class=&quot;tag-link-left&quot;&gt;&lt;i class=&quot;fa-solid fa-link&quot;&gt;&lt;/i&gt;&lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"string\">              &lt;div class=&quot;tag-link-right&quot;&gt;</span></span><br><span class=\"line\"><span class=\"string\">                  &lt;div class=&quot;tag-link-title&quot;&gt;__TEXT__&lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"string\">                  &lt;div class=&quot;tag-link-sitename&quot;&gt;外部网站，请确认链接的正确性与安全性&lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"string\">              &lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"string\">              &lt;i class=&quot;fa-solid fa-angle-right&quot;&gt;&lt;/i&gt;</span></span><br><span class=\"line\"><span class=\"string\">          &lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"string\">        &lt;/a&gt;</span></span><br></pre></td></tr></table></figure>\n<p>引入以下 CSS：</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-pseudo\">:root</span> &#123;</span><br><span class=\"line\">    <span class=\"attr\">--tag-link-bg-color</span>: <span class=\"number\">#eeeeee</span>;</span><br><span class=\"line\">    <span class=\"attr\">--tag-link-text-color</span>: <span class=\"number\">#000</span>;</span><br><span class=\"line\">    <span class=\"attr\">--tag-link-border-color</span>: <span class=\"number\">#fff</span>;</span><br><span class=\"line\">    <span class=\"attr\">--tag-link-hover-bg-color</span>: <span class=\"number\">#d5f6ff</span>;</span><br><span class=\"line\">    <span class=\"attr\">--tag-link-hover-border-color</span>: <span class=\"number\">#ebebeb</span>;</span><br><span class=\"line\">    <span class=\"attr\">--tag-link-tips-border-color</span>: <span class=\"number\">#c2c2c2</span>;</span><br><span class=\"line\">    <span class=\"attr\">--tag-link-sitename-color</span>: <span class=\"number\">#909090</span>;</span><br><span class=\"line\">    <span class=\"attr\">--tag-link-hover-sitename-color</span>: <span class=\"number\">#000</span>;</span><br><span class=\"line\">    <span class=\"attr\">--tag-link-card-backgroud</span>: <span class=\"number\">#fff</span>;</span><br><span class=\"line\">    <span class=\"attr\">--tag-link-card-icon-color</span>: <span class=\"number\">#363636</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-attr\">[data-theme=dark]</span> &#123;</span><br><span class=\"line\">    <span class=\"attr\">--tag-link-bg-color</span>: <span class=\"number\">#282828</span>;</span><br><span class=\"line\">    <span class=\"attr\">--tag-link-text-color</span>: <span class=\"number\">#cccccc</span>;</span><br><span class=\"line\">    <span class=\"attr\">--tag-link-border-color</span>: <span class=\"number\">#000000</span>;</span><br><span class=\"line\">    <span class=\"attr\">--tag-link-hover-bg-color</span>: <span class=\"number\">#414141</span>;</span><br><span class=\"line\">    <span class=\"attr\">--tag-link-hover-border-color</span>: <span class=\"number\">#545454</span>;</span><br><span class=\"line\">    <span class=\"attr\">--tag-link-tips-border-color</span>: <span class=\"number\">#5d5d5d</span>;</span><br><span class=\"line\">    <span class=\"attr\">--tag-link-sitename-color</span>: <span class=\"number\">#909090</span>;</span><br><span class=\"line\">    <span class=\"attr\">--tag-link-hover-sitename-color</span>: <span class=\"number\">#fff</span>;</span><br><span class=\"line\">    <span class=\"attr\">--tag-link-card-backgroud</span>: <span class=\"number\">#727272</span>;</span><br><span class=\"line\">    <span class=\"attr\">--tag-link-card-icon-color</span>: <span class=\"number\">#e9e9e9</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-id\">#article-container</span> <span class=\"selector-class\">.tag-link</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">background</span>: <span class=\"built_in\">var</span>(--tag-link-bg-color);</span><br><span class=\"line\">    <span class=\"attribute\">border-radius</span>: <span class=\"number\">12px</span> <span class=\"meta\">!important</span>;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\">    <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"built_in\">var</span>(--tag-link-border-color);</span><br><span class=\"line\">    <span class=\"attribute\">flex-direction</span>: column;</span><br><span class=\"line\">    <span class=\"attribute\">padding</span>: <span class=\"number\">0.5rem</span> <span class=\"number\">1rem</span>;</span><br><span class=\"line\">    <span class=\"attribute\">margin-top</span>: <span class=\"number\">1rem</span>;</span><br><span class=\"line\">    <span class=\"attribute\">text-decoration</span>: none <span class=\"meta\">!important</span>;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>: <span class=\"built_in\">var</span>(--tag-link-text-color);</span><br><span class=\"line\">    <span class=\"attribute\">margin-bottom</span>: <span class=\"number\">10px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">transition</span>: background-color <span class=\"number\">0.3s</span>, border-color <span class=\"number\">0.3s</span>, box-shadow <span class=\"number\">0.3s</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-id\">#article-container</span> <span class=\"selector-class\">.tag-link</span><span class=\"selector-pseudo\">:hover</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">border-color</span>: <span class=\"built_in\">var</span>(--tag-link-hover-border-color);</span><br><span class=\"line\">    <span class=\"attribute\">background-color</span>: <span class=\"built_in\">var</span>(--tag-link-hover-bg-color);</span><br><span class=\"line\">    <span class=\"attribute\">box-shadow</span>: <span class=\"number\">0</span> <span class=\"number\">0</span> <span class=\"number\">5px</span> <span class=\"built_in\">rgba</span>(<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">0.2</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-id\">#article-container</span> <span class=\"selector-class\">.tag-link</span> <span class=\"selector-class\">.tag-link-tips</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>: <span class=\"built_in\">var</span>(--tag-link-text-color);</span><br><span class=\"line\">    <span class=\"attribute\">border-bottom</span>: <span class=\"number\">1px</span> solid <span class=\"built_in\">var</span>(--tag-link-tips-border-color);</span><br><span class=\"line\">    <span class=\"attribute\">padding-bottom</span>: <span class=\"number\">4px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">0.6rem</span>;</span><br><span class=\"line\">    <span class=\"attribute\">font-weight</span>: normal;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-id\">#article-container</span> <span class=\"selector-class\">.tag-link</span> <span class=\"selector-class\">.tag-link-bottom</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\">    <span class=\"attribute\">margin-top</span>: <span class=\"number\">0.5rem</span>;</span><br><span class=\"line\">    <span class=\"attribute\">align-items</span>: center;</span><br><span class=\"line\">    <span class=\"attribute\">justify-content</span>: space-around;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-id\">#article-container</span> <span class=\"selector-class\">.tag-link</span> <span class=\"selector-class\">.tag-link-bottom</span> <span class=\"selector-class\">.tag-link-left</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">50px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">min-width</span>: <span class=\"number\">50px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">50px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">background-size</span>: cover <span class=\"meta\">!important</span>;</span><br><span class=\"line\">    <span class=\"attribute\">border-radius</span>: <span class=\"number\">8px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">background</span>: <span class=\"built_in\">var</span>(--tag-link-card-backgroud);</span><br><span class=\"line\">    <span class=\"attribute\">pointer-events</span>: none;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-id\">#article-container</span> <span class=\"selector-class\">.tag-link</span> <span class=\"selector-class\">.tag-link-bottom</span> <span class=\"selector-class\">.tag-link-left</span> <span class=\"selector-tag\">i</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">padding</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"attribute\">margin</span>: auto;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">24px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>: <span class=\"built_in\">var</span>(--tag-link-card-icon-color);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-id\">#article-container</span> <span class=\"selector-class\">.tag-link</span> <span class=\"selector-class\">.tag-link-bottom</span> <span class=\"selector-class\">.tag-link-right</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">margin-left</span>: <span class=\"number\">1rem</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-id\">#article-container</span> <span class=\"selector-class\">.tag-link</span> <span class=\"selector-class\">.tag-link-bottom</span> <span class=\"selector-class\">.tag-link-right</span> <span class=\"selector-class\">.tag-link-title</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">1rem</span>;</span><br><span class=\"line\">    <span class=\"attribute\">line-height</span>: <span class=\"number\">1.2</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-id\">#article-container</span> <span class=\"selector-class\">.tag-link</span> <span class=\"selector-class\">.tag-link-bottom</span> <span class=\"selector-class\">.tag-link-right</span> <span class=\"selector-class\">.tag-link-sitename</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">0.7rem</span>;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>: <span class=\"built_in\">var</span>(--tag-link-sitename-color);</span><br><span class=\"line\">    <span class=\"attribute\">font-weight</span>: normal;</span><br><span class=\"line\">    <span class=\"attribute\">margin-top</span>: <span class=\"number\">4px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">transition</span>: color <span class=\"number\">0.3s</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-id\">#article-container</span> <span class=\"selector-class\">.tag-link</span> <span class=\"selector-class\">.tag-link-bottom</span> <span class=\"selector-class\">.tag-link-right</span><span class=\"selector-pseudo\">:hover</span> <span class=\"selector-class\">.tag-link-sitename</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>: <span class=\"built_in\">var</span>(--tag-link-hover-sitename-color);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-id\">#article-container</span> <span class=\"selector-class\">.tag-link</span> <span class=\"selector-class\">.tag-link-bottom</span> <span class=\"selector-tag\">i</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">margin-left</span>: auto;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>此案例为比较简单的案例，只需要引入一个 CSS。</p>\n<h2 id=\"例-2作品推荐卡片\"><a class=\"markdownIt-Anchor\" href=\"#例-2作品推荐卡片\"></a> 例 2：作品推荐卡片</h2>\n\n<div class=\"callout\" data-callout=\"hint\">\n<div class=\"callout-title\">\n<div class=\"callout-title-icon\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-flame\"><path d=\"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z\"/></svg>\n</div>\n<div class=\"callout-title-inner\">本案例基于该项目进行修改：<a href=\"https://blog.leonus.cn/2022/butterflyTag.html\">作品推荐卡片—标签外挂 | Leonus</a></div>\n</div>\n<div class=\"callout-content\"><p></p>\n</div></div><p>图标使用了 font awesome。</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/202411280251115.webp\" alt=\"image.png\" width=\"212px\" /></p>\n<p>实例展示：</p>\n<div title=\"深入理解计算机系统\" referrerPolicy=\"no-referrer\" class=\"card_box\" style=\"background-image: url(https://cdn.gallery.uuanqin.top/img/202411280250546.webp); width:200px; height:275px;\">\n  <div class=\"card_mask\">\n  <span>Randal E. Bryant，1981年于麻省理工学院获得计算机博士学位，1984年至今一直任教于卡内基-梅隆大学。现任卡内基-梅隆大学计算机科学学院院长、教授，同时还受邀任教于电子和计算机工程系。</span>\n    <a href=\"https://book.douban.com/subject/26912767/\">查看详情</a>\n  </div>\n  <div class=\"card_top\">\n  <i class=\"fa-solid fa-book-open\"></i>\n  <span>教材</span>\n  </div>\n  <div class=\"card_content\">\n  <span>深入理解计算机系统</span>\n  <div class=\"art-grade\" data-value=\"4.8\"></div>\n  </div>\n</div>\n<p>Markdown 写法：</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"string\">深入理解计算机系统</span>](<span class=\"link\">https://book.douban.com/subject/26912767/ &quot;%%ART_CARD%%bg=https://cdn.gallery.uuanqin.top/img/202411280250546.webp&amp;desr=Randal E. Bryant，1981年于麻省理工学院获得计算机博士学位，1984年至今一直任教于卡内基-梅隆大学。现任卡内基-梅隆大学计算机科学学院院长、教授，同时还受邀任教于电子和计算机工程系。”&amp;icon=fa-solid fa-book-open&amp;tag=教材&amp;w=200px&amp;h=275px&amp;star=4.8&quot;</span>)</span><br></pre></td></tr></table></figure>\n<p>别看上面的内容很多很杂，其实在普通的 Markdown 渲染器中展示的只是一个简单的链接而已。具体参数说明可以看原项目文章。</p>\n<p><code>_config.yml</code> 中配置：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">custom_link:</span></span><br><span class=\"line\">  <span class=\"attr\">enable:</span> <span class=\"literal\">true</span>   <span class=\"comment\"># enable this plugin</span></span><br><span class=\"line\">  <span class=\"attr\">custom_templates:</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">ART_CARD</span></span><br><span class=\"line\">      <span class=\"attr\">spacing:</span> <span class=\"number\">1</span></span><br><span class=\"line\">      <span class=\"attr\">template:</span> <span class=\"string\">|</span></span><br><span class=\"line\"><span class=\"string\">        &lt;div title=&quot;__TEXT__&quot; referrerPolicy=&quot;no-referrer&quot; class=&quot;card_box&quot; style=&quot;background-image: url(__bg__); width:__w__; height:__h__;&quot;&gt;</span></span><br><span class=\"line\"><span class=\"string\">          &lt;div class=&quot;card_mask&quot;&gt;</span></span><br><span class=\"line\"><span class=\"string\">          &lt;span&gt;__desr__&lt;/span&gt;</span></span><br><span class=\"line\"><span class=\"string\">            &lt;a href=&quot;__URL__&quot;&gt;查看详情&lt;/a&gt;</span></span><br><span class=\"line\"><span class=\"string\">          &lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"string\">          &lt;div class=&quot;card_top&quot;&gt;</span></span><br><span class=\"line\"><span class=\"string\">          &lt;i class=&quot;__icon__&quot;&gt;&lt;/i&gt;</span></span><br><span class=\"line\"><span class=\"string\">          &lt;span&gt;__tag__&lt;/span&gt;</span></span><br><span class=\"line\"><span class=\"string\">          &lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"string\">          &lt;div class=&quot;card_content&quot;&gt;</span></span><br><span class=\"line\"><span class=\"string\">          &lt;span&gt;__TEXT__&lt;/span&gt;</span></span><br><span class=\"line\"><span class=\"string\">          &lt;div class=&quot;art-grade&quot; data-value=&quot;__star__&quot;&gt;&lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"string\">          &lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"string\">        &lt;/div&gt;</span></span><br></pre></td></tr></table></figure>\n<p>引入以下 CSS：</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.card_box</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\">    <span class=\"attribute\">justify-content</span>: space-between;</span><br><span class=\"line\">    <span class=\"attribute\">flex-direction</span>: column;</span><br><span class=\"line\">    <span class=\"attribute\">background-position</span>: center;</span><br><span class=\"line\">    <span class=\"attribute\">background-size</span>: cover;</span><br><span class=\"line\">    <span class=\"attribute\">border-radius</span>: <span class=\"number\">12px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">position</span>: relative;</span><br><span class=\"line\">    <span class=\"attribute\">overflow</span>: hidden;</span><br><span class=\"line\">    <span class=\"attribute\">padding</span>: <span class=\"number\">10px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>: <span class=\"number\">#fff</span> <span class=\"meta\">!important</span>;</span><br><span class=\"line\">    <span class=\"attribute\">margin</span>: <span class=\"number\">10px</span> auto;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.card_box</span><span class=\"selector-pseudo\">::after</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">content</span>: <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\">    <span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">    <span class=\"attribute\">left</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"attribute\">top</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"attribute\">background</span>: <span class=\"built_in\">rgba</span>(<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">0.1</span>);</span><br><span class=\"line\">    <span class=\"attribute\">transition</span>: <span class=\"number\">0.5s</span>;</span><br><span class=\"line\">    <span class=\"attribute\">z-index</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.card_box</span><span class=\"selector-pseudo\">:hover</span> <span class=\"selector-class\">.card_mask</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">opacity</span>: <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"attribute\">pointer-events</span>: auto;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.card_box</span> <span class=\"selector-class\">.card_top</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\">    <span class=\"attribute\">z-index</span>: <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"attribute\">align-items</span>: center;</span><br><span class=\"line\">    <span class=\"attribute\">justify-content</span>: space-between;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.card_box</span> <span class=\"selector-class\">.card_mask</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">    <span class=\"attribute\">pointer-events</span>: none;</span><br><span class=\"line\">    <span class=\"attribute\">z-index</span>: <span class=\"number\">2</span>;</span><br><span class=\"line\">    <span class=\"attribute\">transition</span>: <span class=\"number\">0.5s</span>;</span><br><span class=\"line\">    <span class=\"attribute\">opacity</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">    <span class=\"attribute\">left</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"attribute\">top</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"attribute\">padding</span>: <span class=\"number\">20px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">background</span>: <span class=\"number\">#333</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.card_box</span> <span class=\"selector-class\">.card_mask</span> <span class=\"selector-tag\">span</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: block;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"built_in\">calc</span>(<span class=\"number\">100%</span> - <span class=\"number\">40px</span>);</span><br><span class=\"line\">    <span class=\"attribute\">overflow</span>: auto;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.card_box</span> <span class=\"selector-class\">.card_mask</span> <span class=\"selector-tag\">a</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">text-align</span>: center;</span><br><span class=\"line\">    <span class=\"attribute\">background</span>: <span class=\"number\">#fff</span>;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>: <span class=\"number\">#333</span> <span class=\"meta\">!important</span>;</span><br><span class=\"line\">    <span class=\"attribute\">border-radius</span>: <span class=\"number\">5px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"built_in\">calc</span>(<span class=\"number\">100%</span> - <span class=\"number\">40px</span>);</span><br><span class=\"line\">    <span class=\"attribute\">bottom</span>: <span class=\"number\">20px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">left</span>: <span class=\"number\">20px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.card_box</span> <span class=\"selector-class\">.card_mask</span> <span class=\"selector-tag\">a</span><span class=\"selector-pseudo\">:hover</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">text-decoration</span>: none <span class=\"meta\">!important</span>;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>: <span class=\"number\">#fff</span> <span class=\"meta\">!important</span>;</span><br><span class=\"line\">    <span class=\"attribute\">background</span>: <span class=\"number\">#49b1f5</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.card_box</span> <span class=\"selector-class\">.card_content</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">z-index</span>: <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.card_box</span> <span class=\"selector-class\">.card_content</span> <span class=\"selector-tag\">span</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">18px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">font-weight</span>: bold;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-attr\">[data-theme=<span class=\"string\">&#x27;dark&#x27;</span>]</span> <span class=\"selector-class\">.card_box</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>: <span class=\"number\">#ddd</span> <span class=\"meta\">!important</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-attr\">[data-theme=<span class=\"string\">&#x27;dark&#x27;</span>]</span> <span class=\"selector-class\">.card_box</span><span class=\"selector-pseudo\">::after</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">background</span>: <span class=\"built_in\">rgba</span>(<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">0.4</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>引入以下 js：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 分数转成星星</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">tostar</span>(<span class=\"params\">num</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> tmp = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">    <span class=\"comment\">// console.log(&quot;星星&quot;,num)</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"title class_\">Math</span>.<span class=\"title function_\">floor</span>(num); i++) &#123;</span><br><span class=\"line\">        tmp += <span class=\"string\">&#x27;&lt;i class=&quot;fa-solid fa-star&quot;&gt;&lt;/i&gt;&#x27;</span></span><br><span class=\"line\">    &#125; <span class=\"comment\">// 整数部分加实心星星</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (num - <span class=\"title class_\">Math</span>.<span class=\"title function_\">floor</span>(num) !== <span class=\"number\">0</span>) tmp += <span class=\"string\">&#x27;&lt;i class=&quot;fa-solid fa-star-half-alt&quot;&gt;&lt;/i&gt;&#x27;</span> <span class=\"comment\">// 小数部分转成半星</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">5</span> - <span class=\"title class_\">Math</span>.<span class=\"title function_\">ceil</span>(num); i++) &#123;</span><br><span class=\"line\">        tmp += <span class=\"string\">&#x27;&lt;i class=&quot;fa-regular fa-star&quot;&gt;&lt;/i&gt;&#x27;</span></span><br><span class=\"line\">    &#125; <span class=\"comment\">// 不够5个补空心星星</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> tmp</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelectorAll</span>(<span class=\"string\">&quot;.art-grade&quot;</span>).<span class=\"title function_\">forEach</span>(<span class=\"function\"><span class=\"params\">block</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> value = <span class=\"built_in\">parseFloat</span>(block.<span class=\"title function_\">getAttribute</span>(<span class=\"string\">&quot;data-value&quot;</span>));</span><br><span class=\"line\">    <span class=\"comment\">// console.log(&quot;星星&quot;,num)</span></span><br><span class=\"line\">    block.<span class=\"property\">innerHTML</span> = <span class=\"title function_\">tostar</span>(value);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>和第一个案例不一样的是，由于涉及星星函数的计算，我们把所有通用的逻辑提取出了 JavaScript。</p>\n<h2 id=\"例-3bilibili-卡片\"><a class=\"markdownIt-Anchor\" href=\"#例-3bilibili-卡片\"></a> 例 3：Bilibili 卡片</h2>\n\n<div class=\"callout\" data-callout=\"hint\">\n<div class=\"callout-title\">\n<div class=\"callout-title-icon\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-flame\"><path d=\"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z\"/></svg>\n</div>\n<div class=\"callout-title-inner\">本案例基于该项目进行修改：<a href=\"https://blog.leonus.cn/2023/butterflyTag-1.html\">哔哩哔哩卡片标签外挂 | Leonus</a></div>\n</div>\n<div class=\"callout-content\"><p></p>\n</div></div><p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/202411282158491.webp\" alt=\"image.png\" /></p>\n<p>实例展示：</p>\n<div class=\"bilibili_card_res\" title=\"地理中国\">\n  <a href=\"https://www.bilibili.com/video/BV1Vt411z7ty/\" class=\"bilibili_box\" data-url=\"https://www.bilibili.com/video/BV1Vt411z7ty/\"></a>\n  <script src=\"/js/links-bilibili-card.js\"></script>\n  <script>bilibili(\"https://www.bilibili.com/video/BV1Vt411z7ty/\",\"29:59\",\"__hide_desc__\")</script>\n</div>\n<p>Markdown 写法：</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"string\">地理中国</span>](<span class=\"link\">https://www.bilibili.com/video/BV1Vt411z7ty/ &quot;%%BILIBILI_CARD%%time=29:59&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"string\">偶像练习生</span>](<span class=\"link\">https://www.bilibili.com/video/BV1TE411h7vY/?p=2 &quot;%%BILIBILI_CARD%%time=00:35&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"string\">原神启动</span>](<span class=\"link\">https://www.bilibili.com/video/BV1bk4y1g73J/ &quot;%%BILIBILI_CARD%%time=00:19&amp;hide_desc=true&quot;</span>)</span><br></pre></td></tr></table></figure>\n<p>具体参数详看原项目文章。</p>\n<p><code>_config.yml</code> 中配置：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">custom_link:</span></span><br><span class=\"line\">  <span class=\"attr\">enable:</span> <span class=\"literal\">true</span>   <span class=\"comment\"># enable this plugin</span></span><br><span class=\"line\">  <span class=\"attr\">general_template:</span> <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">  <span class=\"attr\">custom_templates:</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">BILIBILI_CARD</span></span><br><span class=\"line\">      <span class=\"attr\">spacing:</span> <span class=\"number\">1</span></span><br><span class=\"line\">      <span class=\"attr\">template:</span> <span class=\"string\">|</span></span><br><span class=\"line\"><span class=\"string\">        &lt;div class=&quot;bilibili_card_res&quot; title=&quot;__TEXT__&quot;&gt;</span></span><br><span class=\"line\"><span class=\"string\">          &lt;a href=&quot;__URL__&quot; class=&quot;bilibili_box&quot; data-url=&quot;__URL__&quot;&gt;&lt;/a&gt;</span></span><br><span class=\"line\"><span class=\"string\">          &lt;script src=&quot;/js/example-2.js&quot;&gt;&lt;/script&gt;</span></span><br><span class=\"line\"><span class=\"string\">          &lt;script&gt;bilibili(&quot;__URL__&quot;,&quot;__time__&quot;,&quot;__hide_desc__&quot;)&lt;/script&gt;</span></span><br><span class=\"line\"><span class=\"string\">        &lt;/div&gt;</span></span><br></pre></td></tr></table></figure>\n<p>引入以下 CSS：</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.bilibili_box</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\">    <span class=\"attribute\">background</span>: <span class=\"built_in\">var</span>(--card-bg);</span><br><span class=\"line\">    <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#e0e3ed</span>;</span><br><span class=\"line\">    <span class=\"attribute\">border-radius</span>: <span class=\"number\">10px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">overflow</span>: hidden;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>: <span class=\"built_in\">var</span>(--font-color) <span class=\"meta\">!important</span>;</span><br><span class=\"line\">    <span class=\"attribute\">text-decoration</span>: none <span class=\"meta\">!important</span>;</span><br><span class=\"line\">    <span class=\"attribute\">transition</span>: .<span class=\"number\">3s</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.bilibili_box</span><span class=\"selector-pseudo\">:hover</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">border-color</span>: <span class=\"number\">#4976f5</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">@media</span> (<span class=\"attribute\">max-width</span>: <span class=\"number\">768px</span>) &#123;</span><br><span class=\"line\">    <span class=\"selector-class\">.bilibili_box</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">flex-direction</span>: column;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.bilibili_box</span> <span class=\"selector-class\">.bilibili_cover</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">234px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">position</span>: relative;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">@media</span> (<span class=\"attribute\">max-width</span>: <span class=\"number\">768px</span>) &#123;</span><br><span class=\"line\">    <span class=\"selector-class\">.bilibili_box</span> <span class=\"selector-class\">.bilibili_cover</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.bilibili_box</span> <span class=\"selector-class\">.bilibili_cover</span> <span class=\"selector-tag\">img</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">    <span class=\"attribute\">filter</span>: none;</span><br><span class=\"line\">    <span class=\"attribute\">margin</span>: <span class=\"number\">0</span> <span class=\"meta\">!important</span>;</span><br><span class=\"line\">    <span class=\"attribute\">border-radius</span>: <span class=\"number\">0</span> <span class=\"meta\">!important</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.bilibili_box</span> <span class=\"selector-class\">.bilibili_cover</span> <span class=\"selector-class\">.play_icon</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">45px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">45px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">opacity</span>: .<span class=\"number\">8</span>;</span><br><span class=\"line\">    <span class=\"attribute\">top</span>: <span class=\"number\">50%</span>;</span><br><span class=\"line\">    <span class=\"attribute\">left</span>: <span class=\"number\">50%</span>;</span><br><span class=\"line\">    <span class=\"attribute\">transform</span>: <span class=\"built_in\">translate</span>(-<span class=\"number\">50%</span>, -<span class=\"number\">50%</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.bilibili_box</span> <span class=\"selector-class\">.bilibili_cover</span> <span class=\"selector-tag\">span</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">    <span class=\"attribute\">bottom</span>: <span class=\"number\">0px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">right</span>: <span class=\"number\">5px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>: white;</span><br><span class=\"line\">    <span class=\"attribute\">text-shadow</span>: <span class=\"number\">0</span> <span class=\"number\">1px</span> <span class=\"number\">3px</span> <span class=\"number\">#7a7a7a</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.bilibili_box</span> <span class=\"selector-class\">.bilibili_info</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">padding</span>: <span class=\"number\">10px</span> <span class=\"number\">10px</span> <span class=\"number\">10px</span> <span class=\"number\">18px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">line-height</span>: <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"built_in\">calc</span>(<span class=\"number\">100%</span> - <span class=\"number\">200px</span>);</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\">    <span class=\"attribute\">flex-direction</span>: column;</span><br><span class=\"line\">    <span class=\"attribute\">justify-content</span>: space-around;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">@media</span> (<span class=\"attribute\">max-width</span>: <span class=\"number\">768px</span>) &#123;</span><br><span class=\"line\">    <span class=\"selector-class\">.bilibili_box</span> <span class=\"selector-class\">.bilibili_info</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">        <span class=\"attribute\">padding-bottom</span>: <span class=\"number\">25px</span>;</span><br><span class=\"line\">        <span class=\"attribute\">line-height</span>: <span class=\"number\">1.5</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.bilibili_box</span> <span class=\"selector-class\">.bilibili_info</span> <span class=\"selector-class\">.title</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">1.2rem</span>;</span><br><span class=\"line\">    <span class=\"attribute\">font-weight</span>: bold;</span><br><span class=\"line\">    <span class=\"attribute\">white-space</span>: nowrap;</span><br><span class=\"line\">    <span class=\"attribute\">overflow</span>: hidden;</span><br><span class=\"line\">    <span class=\"attribute\">text-overflow</span>: ellipsis;</span><br><span class=\"line\">    <span class=\"attribute\">line-height</span>: <span class=\"number\">1.5</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.bilibili_box</span> <span class=\"selector-class\">.bilibili_info</span> <span class=\"selector-class\">.desc</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">15px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">margin</span>: <span class=\"number\">2px</span> <span class=\"number\">0</span> <span class=\"number\">4px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">white-space</span>: nowrap;</span><br><span class=\"line\">    <span class=\"attribute\">overflow</span>: hidden;</span><br><span class=\"line\">    <span class=\"attribute\">text-overflow</span>: ellipsis;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">@media</span> (<span class=\"attribute\">max-width</span>: <span class=\"number\">768px</span>) &#123;</span><br><span class=\"line\">    <span class=\"selector-class\">.bilibili_box</span> <span class=\"selector-class\">.bilibili_info</span> <span class=\"selector-class\">.desc</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">white-space</span>: normal;</span><br><span class=\"line\">        <span class=\"attribute\">display</span>: -webkit-box;</span><br><span class=\"line\">        -webkit-box-orient: vertical;</span><br><span class=\"line\">        -webkit-<span class=\"selector-tag\">line</span>-clamp: <span class=\"number\">2</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.bilibili_box</span> <span class=\"selector-class\">.bilibili_info</span> <span class=\"selector-class\">.stat</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">15px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.bilibili_box</span> <span class=\"selector-class\">.bilibili_info</span> <span class=\"selector-class\">.stat</span> <span class=\"selector-tag\">svg</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">margin-right</span>: <span class=\"number\">3px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">18px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">1em</span>;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">1em</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.bilibili_box</span> <span class=\"selector-class\">.bilibili_info</span> <span class=\"selector-class\">.stat</span> <span class=\"selector-tag\">svg</span> <span class=\"selector-tag\">path</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">fill</span>: <span class=\"built_in\">var</span>(--font-color);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.bilibili_box</span> <span class=\"selector-class\">.bilibili_info</span> <span class=\"selector-class\">.stat</span> <span class=\"selector-tag\">span</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">margin-right</span>: <span class=\"number\">10px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: inline-flex;</span><br><span class=\"line\">    <span class=\"attribute\">align-items</span>: center;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.bilibili_box</span> <span class=\"selector-class\">.bilibili_info</span> <span class=\"selector-class\">.owner</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\">    <span class=\"attribute\">align-items</span>: center;</span><br><span class=\"line\">    <span class=\"attribute\">line-height</span>: <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">15px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.bilibili_box</span> <span class=\"selector-class\">.bilibili_info</span> <span class=\"selector-class\">.owner</span> <span class=\"selector-class\">.tip</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>: <span class=\"number\">#FF6699</span>;</span><br><span class=\"line\">    <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid;</span><br><span class=\"line\">    <span class=\"attribute\">padding</span>: <span class=\"number\">3px</span> <span class=\"number\">6px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">12px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">border-radius</span>: <span class=\"number\">5px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">margin-right</span>: <span class=\"number\">10px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.bilibili_box</span> <span class=\"selector-class\">.bilibili_info</span> <span class=\"selector-class\">.owner</span> <span class=\"selector-tag\">img</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">22px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">22px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">border-radius</span>: <span class=\"number\">50%</span> <span class=\"meta\">!important</span>;</span><br><span class=\"line\">    <span class=\"attribute\">object-fit</span>: cover;</span><br><span class=\"line\">    <span class=\"attribute\">margin</span>: <span class=\"number\">0</span> <span class=\"number\">5px</span> <span class=\"number\">0</span> <span class=\"number\">0</span> <span class=\"meta\">!important</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-attr\">[data-theme=<span class=\"string\">&#x27;light&#x27;</span>]</span> <span class=\"selector-class\">.bilibili_box</span> <span class=\"selector-class\">.bilibili_info</span> <span class=\"selector-class\">.stat</span> <span class=\"selector-tag\">svg</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">opacity</span>: .<span class=\"number\">8</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-attr\">[data-theme=<span class=\"string\">&#x27;dark&#x27;</span>]</span> <span class=\"selector-class\">.bilibili_cover</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">opacity</span>: .<span class=\"number\">8</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>引入以下 Javascript（不需要在主题配置文件 <code>_config.butterfly.yml</code> 中导入）：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> playIcon = <span class=\"string\">`&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;20&quot; height=&quot;20&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;none&quot; class=&quot;icon&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; clip-rule=&quot;evenodd&quot; d=&quot;M4.67735 4.2798C5.98983 4.1725 7.85812 4.0625 10 4.0625C12.1421 4.0625 14.0105 4.17252 15.323 4.27983C16.2216 4.3533 16.9184 5.04049 16.9989 5.9318C17.0962 7.00837 17.1875 8.43614 17.1875 10C17.1875 11.5639 17.0962 12.9916 16.9989 14.0682C16.9184 14.9595 16.2216 15.6467 15.323 15.7202C14.0105 15.8275 12.1421 15.9375 10 15.9375C7.85812 15.9375 5.98983 15.8275 4.67735 15.7202C3.77861 15.6467 3.08174 14.9593 3.00119 14.0678C2.90388 12.9908 2.8125 11.5627 2.8125 10C2.8125 8.43727 2.90388 7.00924 3.00119 5.93221C3.08174 5.04067 3.77861 4.35327 4.67735 4.2798ZM10 2.8125C7.81674 2.8125 5.9136 2.92456 4.5755 3.03395C3.07738 3.15643 1.8921 4.31616 1.75626 5.81973C1.65651 6.92379 1.5625 8.39058 1.5625 10C1.5625 11.6094 1.65651 13.0762 1.75626 14.1803C1.8921 15.6838 3.07738 16.8436 4.5755 16.966C5.9136 17.0754 7.81674 17.1875 10 17.1875C12.1835 17.1875 14.0868 17.0754 15.4249 16.966C16.9228 16.8436 18.108 15.6841 18.2438 14.1807C18.3435 13.077 18.4375 11.6105 18.4375 10C18.4375 8.38948 18.3435 6.92296 18.2438 5.81931C18.108 4.31588 16.9228 3.15645 15.4249 3.03398C14.0868 2.92458 12.1835 2.8125 10 2.8125ZM12.1876 10.722C12.7431 10.4013 12.7431 9.59941 12.1876 9.27866L9.06133 7.47373C8.50577 7.15298 7.81133 7.55392 7.81133 8.19542V11.8053C7.81133 12.4468 8.50577 12.8477 9.06133 12.527L12.1876 10.722Z&quot; fill=&quot;#9499A0&quot;/&gt;&lt;/svg&gt;`</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> likeIcon = <span class=\"string\">`&lt;svg width=&quot;36&quot; height=&quot;36&quot; viewBox=&quot;0 0 36 36&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;icon&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; clip-rule=&quot;evenodd&quot; d=&quot;M9.77234 30.8573V11.7471H7.54573C5.50932 11.7471 3.85742 13.3931 3.85742 15.425V27.1794C3.85742 29.2112 5.50932 30.8573 7.54573 30.8573H9.77234ZM11.9902 30.8573V11.7054C14.9897 10.627 16.6942 7.8853 17.1055 3.33591C17.2666 1.55463 18.9633 0.814421 20.5803 1.59505C22.1847 2.36964 23.243 4.32583 23.243 6.93947C23.243 8.50265 23.0478 10.1054 22.6582 11.7471H29.7324C31.7739 11.7471 33.4289 13.402 33.4289 15.4435C33.4289 15.7416 33.3928 16.0386 33.3215 16.328L30.9883 25.7957C30.2558 28.7683 27.5894 30.8573 24.528 30.8573H11.9911H11.9902Z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;`</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> coinIcon = <span class=\"string\">`&lt;svg width=&quot;28&quot; height=&quot;28&quot; viewBox=&quot;0 0 28 28&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;icon&quot; style=&quot;fill:;&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; clip-rule=&quot;evenodd&quot; d=&quot;M14.045 25.5454C7.69377 25.5454 2.54504 20.3967 2.54504 14.0454C2.54504 7.69413 7.69377 2.54541 14.045 2.54541C20.3963 2.54541 25.545 7.69413 25.545 14.0454C25.545 17.0954 24.3334 20.0205 22.1768 22.1771C20.0201 24.3338 17.095 25.5454 14.045 25.5454ZM9.66202 6.81624H18.2761C18.825 6.81624 19.27 7.22183 19.27 7.72216C19.27 8.22248 18.825 8.62807 18.2761 8.62807H14.95V10.2903C17.989 10.4444 20.3766 12.9487 20.3855 15.9916V17.1995C20.3854 17.6997 19.9799 18.1052 19.4796 18.1052C18.9793 18.1052 18.5738 17.6997 18.5737 17.1995V15.9916C18.5667 13.9478 16.9882 12.2535 14.95 12.1022V20.5574C14.95 21.0577 14.5444 21.4633 14.0441 21.4633C13.5437 21.4633 13.1382 21.0577 13.1382 20.5574V12.1022C11.1 12.2535 9.52148 13.9478 9.51448 15.9916V17.1995C9.5144 17.6997 9.10883 18.1052 8.60856 18.1052C8.1083 18.1052 7.70273 17.6997 7.70265 17.1995V15.9916C7.71158 12.9487 10.0992 10.4444 13.1382 10.2903V8.62807H9.66202C9.11309 8.62807 8.66809 8.22248 8.66809 7.72216C8.66809 7.22183 9.11309 6.81624 9.66202 6.81624Z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;`</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">bilibili</span>(<span class=\"params\">old_id, time, hidden_desc</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> id = old_id.<span class=\"title function_\">replace</span>(<span class=\"regexp\">/.*video\\/([^\\/]*)\\/?.*/</span>, <span class=\"string\">&#x27;$1&#x27;</span>)</span><br><span class=\"line\">    <span class=\"comment\">// 获取所有类名为 bilibili_card_res 的 div 元素</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> bilibiliCards = <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelectorAll</span>(<span class=\"string\">&#x27;.bilibili_card_res&#x27;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> targetUrl = old_id;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 遍历每个 bilibili_card_res div 元素</span></span><br><span class=\"line\">    bilibiliCards.<span class=\"title function_\">forEach</span>(<span class=\"function\"><span class=\"params\">card</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 在当前 div 元素下查找符合条件的 a 标签</span></span><br><span class=\"line\">        <span class=\"keyword\">const</span> links = card.<span class=\"title function_\">querySelectorAll</span>(<span class=\"string\">`a[data-url=&quot;<span class=\"subst\">$&#123;targetUrl&#125;</span>&quot;]`</span>);</span><br><span class=\"line\">        links.<span class=\"title function_\">forEach</span>(<span class=\"function\"><span class=\"params\">link</span> =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"title function_\">fetch</span>(<span class=\"string\">`https://api.320.ink/api/b?id=<span class=\"subst\">$&#123;id&#125;</span>`</span>).<span class=\"title function_\">then</span>(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> res.<span class=\"title function_\">json</span>()).<span class=\"title function_\">then</span>(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">                link.<span class=\"property\">innerHTML</span> = <span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">                    &lt;div class=&quot;bilibili_cover&quot;&gt;</span></span><br><span class=\"line\"><span class=\"string\">                      &lt;img src=&quot;https://s1.hdslb.com/bfs/static/player/img/play.svg&quot; class=&quot;play_icon no-lazyload&quot;&gt;</span></span><br><span class=\"line\"><span class=\"string\">                      &lt;img src=<span class=\"subst\">$&#123;data.pic + <span class=\"string\">&#x27;&amp;h=300&#x27;</span>&#125;</span>&quot; class=&quot;no-lazyload&quot;&gt;</span></span><br><span class=\"line\"><span class=\"string\">                      <span class=\"subst\">$&#123;time ? <span class=\"string\">`&lt;span&gt;<span class=\"subst\">$&#123;time&#125;</span>&lt;/span&gt;`</span> : <span class=\"string\">&#x27;&#x27;</span>&#125;</span></span></span><br><span class=\"line\"><span class=\"string\">                    &lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"string\">                    &lt;div class=&quot;bilibili_info&quot;&gt;</span></span><br><span class=\"line\"><span class=\"string\">                      &lt;div class=&quot;title&quot;&gt;<span class=\"subst\">$&#123;data.title&#125;</span>&lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"string\">                      <span class=\"subst\">$&#123;hidden_desc === <span class=\"string\">&#x27;true&#x27;</span> ? <span class=\"string\">&#x27;&#x27;</span> : <span class=\"string\">`&lt;div class=&quot;desc&quot;&gt;<span class=\"subst\">$&#123;data.desc&#125;</span>&lt;/div&gt;`</span>&#125;</span></span></span><br><span class=\"line\"><span class=\"string\">                      &lt;div class=&quot;stat&quot;&gt;</span></span><br><span class=\"line\"><span class=\"string\">                        &lt;span&gt;<span class=\"subst\">$&#123;playIcon&#125;</span><span class=\"subst\">$&#123;data.view&#125;</span>&lt;/span&gt;</span></span><br><span class=\"line\"><span class=\"string\">                        &lt;span&gt;<span class=\"subst\">$&#123;likeIcon&#125;</span><span class=\"subst\">$&#123;data.like&#125;</span>&lt;/span&gt;</span></span><br><span class=\"line\"><span class=\"string\">                        &lt;span&gt;<span class=\"subst\">$&#123;coinIcon&#125;</span><span class=\"subst\">$&#123;data.coin&#125;</span>&lt;/span&gt;</span></span><br><span class=\"line\"><span class=\"string\">                      &lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"string\">                      &lt;div class=&quot;owner&quot;&gt;</span></span><br><span class=\"line\"><span class=\"string\">                        &lt;span class=&quot;tip&quot;&gt;视频&lt;/span&gt;</span></span><br><span class=\"line\"><span class=\"string\">                        &lt;img src=&quot;<span class=\"subst\">$&#123;data.face + <span class=\"string\">&#x27;&amp;h=100&#x27;</span>&#125;</span>&quot; class=&quot;no-lazyload&quot;&gt;</span></span><br><span class=\"line\"><span class=\"string\">                        &lt;span&gt;<span class=\"subst\">$&#123;data.owner&#125;</span>&lt;/span&gt;</span></span><br><span class=\"line\"><span class=\"string\">                      &lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"string\">                    &lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"string\">                    `</span></span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>本例涉及到了 API 的请求，修改项目时花了一定的时间调试。</p>\n<h1 id=\"本文参考\"><a class=\"markdownIt-Anchor\" href=\"#本文参考\"></a> 本文参考</h1>\n<ul>\n<li>友链用户 <a href=\"https://blog.zhheo.com/p/ccaf9148.html\">@张洪 Heo</a>、<a href=\"https://blog.liushen.fun/\">@清羽飞扬</a>、<a href=\"https://blog.leonus.cn/\">@Leonus</a> 的博客文章</li>\n</ul>\n","raw":"---\ntitle: 用 Markdown 链接替换部分 Hexo 标签语法\ncategories:\n  - 博客站点维护\n  - Hexo\nabbrlink: fb28dce2\ntags:\n  - hexo-plugins\n  - Markdown\n  - hexo-tag-plugins\n  - HTML\n  - CSS\n  - Javascript\n  - NPM\ncover: 'https://cdn.gallery.uuanqin.top/img/202411282306673.webp'\ndescription: 以一种兼容性更强的方式美化卡片类型的链接\ndate: 2024-11-28 23:35:25\ntop_img:\n---\n\n> [!success] 本文不涉及对主题源代码的修改\n\n在上一篇文章 [[自定义 Hexo 中的超链接样式]] 中介绍了 `hexo-filter-custom-link` 插件如何在：\n\n- 不修改主题源代码\n- 不使用 Hexo 标签语法\n\n的条件下美化一般的超链接。为了提升可玩性， `hexo-filter-custom-link` 插件预留了更多的自定义模板，满足更丰富的需求，甚至可以替换一部分 Hexo 标签语法。\n\n![image.png|350](https://cdn.gallery.uuanqin.top/img/202411282306673.webp)\n\n通过使用插件，我们只需要在 Markdown 中写下类似 `[name](url \"title\")` 形式的链接就可以实现：\n\n- 文章外链卡片\n\n![image.png|385](https://cdn.gallery.uuanqin.top/img/202411252323643.webp)\n\n- 作品评价卡片\n\n![image.png|187](https://cdn.gallery.uuanqin.top/img/202411280251115.webp)\n\n- Bilibili 视频卡片\n\n![image.png|500](https://cdn.gallery.uuanqin.top/img/202411282158491.webp)\n\n# 插件安装与使用\n\n安装与使用方式见项目 README 文档。\n\n[![Readme Card](https://github-readme-stats.uuanqin.top/api/pin/?username=uuanqin&repo=hexo-filter-custom-link)](https://github.com/uuanqin/hexo-filter-custom-link)\n\nGitHub 项目地址：[uuanqin/hexo-filter-custom-link: Customize the rendered HTML of Links. 自定义链接渲染后的 HTML](https://github.com/uuanqin/hexo-filter-custom-link)\n\n主要功能：\n\n- 自定义链接渲染后的样式，让形如 `[text](url)` 或 `[text](url \"title\")` 的超链接渲染成你想要的模板。\n- 插件提供多种通配符方便设计更复杂的模板，通配符可以重复使用。\n- 在特殊情况下，可以为一些特殊链接指定不同的模板，让超链接的样式更加丰富。不管是通用模板还是自定义模板，它们都是可以共存的。\n- 对于复杂模板，支持模板间距以区分其他 Markdown 文本，避免渲染错误。\n\n> [!note] 实测插件兼容性良好\n>\n> 目前测试了该插件与以下「链接替换」插件并不冲突：\n>\n> - [hexojs/hexo-filter-nofollow](https://github.com/hexojs/hexo-filter-nofollow) ：为外链添加 `nofollow` 等属性提升网站的 SEO\n> - [willow-god/hexo-safego](https://github.com/willow-god/hexo-safego/) ：一款外部链接替换插件\n\n利用这个插件我们可以用特殊的符号 `%%` 去「标记」特殊的链接，让插件明白应该应用何种模板。 `%%` 标记后还可以传递模板参数，这样在设计模板时可以使用更多的自定义占位符。比如我们可以通过插件轻松实现博主们都爱使用的「文章外链卡片」，我们只需要手动指定链接的应用模板即可。\n\n参数的形式就是仿照 URL 传参设计的，参数名可以自己自定义以方便模板的设计，和 Hexo 标签插件的传参相比能提升一定的可读性。\n\n另外，像「卡片」这样的模板往往比较复杂，而且这种链接一般不会是 inline 的，所以可以使用插件的 `spacing` 选项为模板上下插入换行符，避免 Hexo 的渲染器渲染错误。\n\n# 示例\n\n这部分分享一些使用案例，可以加深对插件自定义模板的体会。案例几乎是在 [文章 | Butterfly主题美化教程](https://butterfly.zhheo.com/post.html) 上找的。熟练之后，你也可以试试用一个插件平替里面「标签外挂」相关的文章😉。\n\n## 例 1：文章外链卡片\n\n> [!hint] 本案例基于以下项目进行修改\n> - [Hexo的Butterfly魔改教程：网址卡片外置标签 | 张洪Heo](https://blog.zhheo.com/p/ccaf9148.html)\n> - [魔改笔记七：分类条及外链卡片 - 清羽飞扬](https://blog.liushen.fun/posts/a64defb4/)\n\n![image.png|385](https://cdn.gallery.uuanqin.top/img/202411252323643.webp)\n\n实例展示：\n\n[示例卡片](/p/8aa53d93/ \"%%CARD%%TITLE=示例标题\")\n\nMarkdown 写法：\n\n```markdown\n[示例卡片](/p/8aa53d93/ \"%%CARD%%\")\n[示例卡片](/p/8aa53d93/ \"%%CARD%%TITLE=示例标题\")\n```\n\n`_config.yml` 中配置：\n\n```yaml\ncustom_link:\n  enable: true   # enable this plugin\n  general_template: ''\n  custom_templates:\n    - name: CARD\n      spacing: 1 # 表示模板前后插入一个换行符\n      template: |\n        <a class=\"tag-link\" target=\"_blank\" href=\"__URL__\" title=\"__TITLE__\">\n          <div class=\"tag-link-tips\">引用站外地址</div>\n          <div class=\"tag-link-bottom\">\n              <div class=\"tag-link-left\"><i class=\"fa-solid fa-link\"></i></div>\n              <div class=\"tag-link-right\">\n                  <div class=\"tag-link-title\">__TEXT__</div>\n                  <div class=\"tag-link-sitename\">外部网站，请确认链接的正确性与安全性</div>\n              </div>\n              <i class=\"fa-solid fa-angle-right\"></i>\n          </div>\n        </a>\n```\n\n引入以下 CSS：\n\n```css\n:root {\n    --tag-link-bg-color: #eeeeee;\n    --tag-link-text-color: #000;\n    --tag-link-border-color: #fff;\n    --tag-link-hover-bg-color: #d5f6ff;\n    --tag-link-hover-border-color: #ebebeb;\n    --tag-link-tips-border-color: #c2c2c2;\n    --tag-link-sitename-color: #909090;\n    --tag-link-hover-sitename-color: #000;\n    --tag-link-card-backgroud: #fff;\n    --tag-link-card-icon-color: #363636;\n}\n[data-theme=dark] {\n    --tag-link-bg-color: #282828;\n    --tag-link-text-color: #cccccc;\n    --tag-link-border-color: #000000;\n    --tag-link-hover-bg-color: #414141;\n    --tag-link-hover-border-color: #545454;\n    --tag-link-tips-border-color: #5d5d5d;\n    --tag-link-sitename-color: #909090;\n    --tag-link-hover-sitename-color: #fff;\n    --tag-link-card-backgroud: #727272;\n    --tag-link-card-icon-color: #e9e9e9;\n}\n#article-container .tag-link {\n    background: var(--tag-link-bg-color);\n    border-radius: 12px !important;\n    display: flex;\n    border: 1px solid var(--tag-link-border-color);\n    flex-direction: column;\n    padding: 0.5rem 1rem;\n    margin-top: 1rem;\n    text-decoration: none !important;\n    color: var(--tag-link-text-color);\n    margin-bottom: 10px;\n    transition: background-color 0.3s, border-color 0.3s, box-shadow 0.3s;\n}\n#article-container .tag-link:hover {\n    border-color: var(--tag-link-hover-border-color);\n    background-color: var(--tag-link-hover-bg-color);\n    box-shadow: 0 0 5px rgba(0,0,0,0.2);\n}\n#article-container .tag-link .tag-link-tips {\n    color: var(--tag-link-text-color);\n    border-bottom: 1px solid var(--tag-link-tips-border-color);\n    padding-bottom: 4px;\n    font-size: 0.6rem;\n    font-weight: normal;\n}\n#article-container .tag-link .tag-link-bottom {\n    display: flex;\n    margin-top: 0.5rem;\n    align-items: center;\n    justify-content: space-around;\n}\n#article-container .tag-link .tag-link-bottom .tag-link-left {\n    width: 50px;\n    min-width: 50px;\n    height: 50px;\n    background-size: cover !important;\n    border-radius: 8px;\n    background: var(--tag-link-card-backgroud);\n    pointer-events: none;\n    display: flex;\n}\n\n#article-container .tag-link .tag-link-bottom .tag-link-left i {\n    padding: 0;\n    margin: auto;\n    font-size: 24px;\n    color: var(--tag-link-card-icon-color);\n}\n\n#article-container .tag-link .tag-link-bottom .tag-link-right {\n    margin-left: 1rem;\n}\n#article-container .tag-link .tag-link-bottom .tag-link-right .tag-link-title {\n    font-size: 1rem;\n    line-height: 1.2;\n}\n#article-container .tag-link .tag-link-bottom .tag-link-right .tag-link-sitename {\n    font-size: 0.7rem;\n    color: var(--tag-link-sitename-color);\n    font-weight: normal;\n    margin-top: 4px;\n    transition: color 0.3s;\n}\n#article-container .tag-link .tag-link-bottom .tag-link-right:hover .tag-link-sitename {\n    color: var(--tag-link-hover-sitename-color);\n}\n#article-container .tag-link .tag-link-bottom i {\n    margin-left: auto;\n}\n```\n\n此案例为比较简单的案例，只需要引入一个 CSS。\n\n## 例 2：作品推荐卡片\n\n> [!hint] 本案例基于该项目进行修改：[作品推荐卡片—标签外挂 | Leonus](https://blog.leonus.cn/2022/butterflyTag.html)\n\n图标使用了 font awesome。\n\n![image.png|212](https://cdn.gallery.uuanqin.top/img/202411280251115.webp)\n\n实例展示：\n\n[深入理解计算机系统](https://book.douban.com/subject/26912767/ \"%%ART_CARD%%bg=https://cdn.gallery.uuanqin.top/img/202411280250546.webp&desr=Randal E. Bryant，1981年于麻省理工学院获得计算机博士学位，1984年至今一直任教于卡内基-梅隆大学。现任卡内基-梅隆大学计算机科学学院院长、教授，同时还受邀任教于电子和计算机工程系。&icon=fa-solid fa-book-open&tag=教材&w=200px&h=275px&star=4.8\")\n\nMarkdown 写法：\n\n```markdown\n[深入理解计算机系统](https://book.douban.com/subject/26912767/ \"%%ART_CARD%%bg=https://cdn.gallery.uuanqin.top/img/202411280250546.webp&desr=Randal E. Bryant，1981年于麻省理工学院获得计算机博士学位，1984年至今一直任教于卡内基-梅隆大学。现任卡内基-梅隆大学计算机科学学院院长、教授，同时还受邀任教于电子和计算机工程系。”&icon=fa-solid fa-book-open&tag=教材&w=200px&h=275px&star=4.8\")\n```\n\n别看上面的内容很多很杂，其实在普通的 Markdown 渲染器中展示的只是一个简单的链接而已。具体参数说明可以看原项目文章。\n\n`_config.yml` 中配置：\n\n```yaml\ncustom_link:\n  enable: true   # enable this plugin\n  custom_templates:\n    - name: ART_CARD\n      spacing: 1\n      template: |\n        <div title=\"__TEXT__\" referrerPolicy=\"no-referrer\" class=\"card_box\" style=\"background-image: url(__bg__); width:__w__; height:__h__;\">\n          <div class=\"card_mask\">\n          <span>__desr__</span>\n            <a href=\"__URL__\">查看详情</a>\n          </div>\n          <div class=\"card_top\">\n          <i class=\"__icon__\"></i>\n          <span>__tag__</span>\n          </div>\n          <div class=\"card_content\">\n          <span>__TEXT__</span>\n          <div class=\"art-grade\" data-value=\"__star__\"></div>\n          </div>\n        </div>\n```\n\n引入以下 CSS：\n\n```css\n.card_box {\n    display: flex;\n    justify-content: space-between;\n    flex-direction: column;\n    background-position: center;\n    background-size: cover;\n    border-radius: 12px;\n    position: relative;\n    overflow: hidden;\n    padding: 10px;\n    color: #fff !important;\n    margin: 10px auto;\n}\n.card_box::after {\n    content: '';\n    position: absolute;\n    height: 100%;\n    width: 100%;\n    left: 0;\n    top: 0;\n    background: rgba(0,0,0,0.1);\n    transition: 0.5s;\n    z-index: 0;\n}\n.card_box:hover .card_mask {\n    opacity: 1;\n    pointer-events: auto;\n}\n.card_box .card_top {\n    display: flex;\n    z-index: 1;\n    align-items: center;\n    justify-content: space-between;\n}\n.card_box .card_mask {\n    position: absolute;\n    pointer-events: none;\n    z-index: 2;\n    transition: 0.5s;\n    opacity: 0;\n    width: 100%;\n    height: 100%;\n    left: 0;\n    top: 0;\n    padding: 20px;\n    background: #333;\n}\n.card_box .card_mask span {\n    display: block;\n    height: calc(100% - 40px);\n    overflow: auto;\n}\n.card_box .card_mask a {\n    text-align: center;\n    background: #fff;\n    color: #333 !important;\n    border-radius: 5px;\n    position: absolute;\n    width: calc(100% - 40px);\n    bottom: 20px;\n    left: 20px;\n}\n.card_box .card_mask a:hover {\n    text-decoration: none !important;\n    color: #fff !important;\n    background: #49b1f5;\n}\n.card_box .card_content {\n    z-index: 1;\n}\n.card_box .card_content span {\n    font-size: 18px;\n    font-weight: bold;\n}\n[data-theme='dark'] .card_box {\n    color: #ddd !important;\n}\n[data-theme='dark'] .card_box::after {\n    background: rgba(0,0,0,0.4);\n}\n\n```\n\n引入以下 js：\n\n```js\n// 分数转成星星\nfunction tostar(num) {\n    let tmp = ''\n    // console.log(\"星星\",num)\n    for (let i = 0; i < Math.floor(num); i++) {\n        tmp += '<i class=\"fa-solid fa-star\"></i>'\n    } // 整数部分加实心星星\n    if (num - Math.floor(num) !== 0) tmp += '<i class=\"fa-solid fa-star-half-alt\"></i>' // 小数部分转成半星\n    for (let i = 0; i < 5 - Math.ceil(num); i++) {\n        tmp += '<i class=\"fa-regular fa-star\"></i>'\n    } // 不够5个补空心星星\n    return tmp\n}\n\ndocument.querySelectorAll(\".art-grade\").forEach(block => {\n    const value = parseFloat(block.getAttribute(\"data-value\"));\n    // console.log(\"星星\",num)\n    block.innerHTML = tostar(value);\n});\n\n\n```\n\n和第一个案例不一样的是，由于涉及星星函数的计算，我们把所有通用的逻辑提取出了 JavaScript。\n\n## 例 3：Bilibili 卡片\n\n> [!hint] 本案例基于该项目进行修改：[哔哩哔哩卡片标签外挂 | Leonus](https://blog.leonus.cn/2023/butterflyTag-1.html)\n\n![image.png](https://cdn.gallery.uuanqin.top/img/202411282158491.webp)\n\n实例展示：\n\n[地理中国](https://www.bilibili.com/video/BV1Vt411z7ty/ \"%%BILIBILI_CARD%%time=29:59\")\n\nMarkdown 写法：\n\n```markdown\n[地理中国](https://www.bilibili.com/video/BV1Vt411z7ty/ \"%%BILIBILI_CARD%%time=29:59\")\n\n[偶像练习生](https://www.bilibili.com/video/BV1TE411h7vY/?p=2 \"%%BILIBILI_CARD%%time=00:35\")\n\n[原神启动](https://www.bilibili.com/video/BV1bk4y1g73J/ \"%%BILIBILI_CARD%%time=00:19&hide_desc=true\")\n```\n\n具体参数详看原项目文章。\n\n`_config.yml` 中配置：\n\n```yaml\ncustom_link:\n  enable: true   # enable this plugin\n  general_template: ''\n  custom_templates:\n    - name: BILIBILI_CARD\n      spacing: 1\n      template: |\n        <div class=\"bilibili_card_res\" title=\"__TEXT__\">\n          <a href=\"__URL__\" class=\"bilibili_box\" data-url=\"__URL__\"></a>\n          <script src=\"/js/example-2.js\"></script>\n          <script>bilibili(\"__URL__\",\"__time__\",\"__hide_desc__\")</script>\n        </div>\n```\n\n引入以下 CSS：\n\n```css\n.bilibili_box {\n    display: flex;\n    background: var(--card-bg);\n    border: 1px solid #e0e3ed;\n    border-radius: 10px;\n    overflow: hidden;\n    color: var(--font-color) !important;\n    text-decoration: none !important;\n    transition: .3s;\n}\n.bilibili_box:hover {\n    border-color: #4976f5;\n}\n@media (max-width: 768px) {\n    .bilibili_box {\n        flex-direction: column;\n    }\n}\n.bilibili_box .bilibili_cover {\n    width: 234px;\n    position: relative;\n}\n@media (max-width: 768px) {\n    .bilibili_box .bilibili_cover {\n        width: 100%;\n    }\n}\n.bilibili_box .bilibili_cover img {\n    width: 100%;\n    filter: none;\n    margin: 0 !important;\n    border-radius: 0 !important;\n}\n.bilibili_box .bilibili_cover .play_icon {\n    position: absolute;\n    width: 45px;\n    height: 45px;\n    opacity: .8;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n}\n.bilibili_box .bilibili_cover span {\n    position: absolute;\n    bottom: 0px;\n    right: 5px;\n    color: white;\n    text-shadow: 0 1px 3px #7a7a7a;\n}\n.bilibili_box .bilibili_info {\n    padding: 10px 10px 10px 18px;\n    line-height: 1;\n    width: calc(100% - 200px);\n    display: flex;\n    flex-direction: column;\n    justify-content: space-around;\n}\n@media (max-width: 768px) {\n    .bilibili_box .bilibili_info {\n        width: 100%;\n        padding-bottom: 25px;\n        line-height: 1.5;\n    }\n}\n.bilibili_box .bilibili_info .title {\n    font-size: 1.2rem;\n    font-weight: bold;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    line-height: 1.5;\n}\n.bilibili_box .bilibili_info .desc {\n    font-size: 15px;\n    margin: 2px 0 4px;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n@media (max-width: 768px) {\n    .bilibili_box .bilibili_info .desc {\n        white-space: normal;\n        display: -webkit-box;\n        -webkit-box-orient: vertical;\n        -webkit-line-clamp: 2;\n    }\n}\n.bilibili_box .bilibili_info .stat {\n    font-size: 15px;\n}\n.bilibili_box .bilibili_info .stat svg {\n    margin-right: 3px;\n    font-size: 18px;\n    width: 1em;\n    height: 1em;\n}\n.bilibili_box .bilibili_info .stat svg path {\n    fill: var(--font-color);\n}\n.bilibili_box .bilibili_info .stat span {\n    margin-right: 10px;\n    display: inline-flex;\n    align-items: center;\n}\n.bilibili_box .bilibili_info .owner {\n    display: flex;\n    align-items: center;\n    line-height: 1;\n    font-size: 15px;\n}\n.bilibili_box .bilibili_info .owner .tip {\n    color: #FF6699;\n    border: 1px solid;\n    padding: 3px 6px;\n    font-size: 12px;\n    border-radius: 5px;\n    margin-right: 10px;\n}\n.bilibili_box .bilibili_info .owner img {\n    width: 22px;\n    height: 22px;\n    border-radius: 50% !important;\n    object-fit: cover;\n    margin: 0 5px 0 0 !important;\n}\n[data-theme='light'] .bilibili_box .bilibili_info .stat svg {\n    opacity: .8;\n}\n[data-theme='dark'] .bilibili_cover {\n    opacity: .8;\n}\n\n```\n\n引入以下 Javascript（不需要在主题配置文件 `_config.butterfly.yml` 中导入）：\n\n```js\nlet playIcon = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\" class=\"icon\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M4.67735 4.2798C5.98983 4.1725 7.85812 4.0625 10 4.0625C12.1421 4.0625 14.0105 4.17252 15.323 4.27983C16.2216 4.3533 16.9184 5.04049 16.9989 5.9318C17.0962 7.00837 17.1875 8.43614 17.1875 10C17.1875 11.5639 17.0962 12.9916 16.9989 14.0682C16.9184 14.9595 16.2216 15.6467 15.323 15.7202C14.0105 15.8275 12.1421 15.9375 10 15.9375C7.85812 15.9375 5.98983 15.8275 4.67735 15.7202C3.77861 15.6467 3.08174 14.9593 3.00119 14.0678C2.90388 12.9908 2.8125 11.5627 2.8125 10C2.8125 8.43727 2.90388 7.00924 3.00119 5.93221C3.08174 5.04067 3.77861 4.35327 4.67735 4.2798ZM10 2.8125C7.81674 2.8125 5.9136 2.92456 4.5755 3.03395C3.07738 3.15643 1.8921 4.31616 1.75626 5.81973C1.65651 6.92379 1.5625 8.39058 1.5625 10C1.5625 11.6094 1.65651 13.0762 1.75626 14.1803C1.8921 15.6838 3.07738 16.8436 4.5755 16.966C5.9136 17.0754 7.81674 17.1875 10 17.1875C12.1835 17.1875 14.0868 17.0754 15.4249 16.966C16.9228 16.8436 18.108 15.6841 18.2438 14.1807C18.3435 13.077 18.4375 11.6105 18.4375 10C18.4375 8.38948 18.3435 6.92296 18.2438 5.81931C18.108 4.31588 16.9228 3.15645 15.4249 3.03398C14.0868 2.92458 12.1835 2.8125 10 2.8125ZM12.1876 10.722C12.7431 10.4013 12.7431 9.59941 12.1876 9.27866L9.06133 7.47373C8.50577 7.15298 7.81133 7.55392 7.81133 8.19542V11.8053C7.81133 12.4468 8.50577 12.8477 9.06133 12.527L12.1876 10.722Z\" fill=\"#9499A0\"/></svg>`\nlet likeIcon = `<svg width=\"36\" height=\"36\" viewBox=\"0 0 36 36\" xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M9.77234 30.8573V11.7471H7.54573C5.50932 11.7471 3.85742 13.3931 3.85742 15.425V27.1794C3.85742 29.2112 5.50932 30.8573 7.54573 30.8573H9.77234ZM11.9902 30.8573V11.7054C14.9897 10.627 16.6942 7.8853 17.1055 3.33591C17.2666 1.55463 18.9633 0.814421 20.5803 1.59505C22.1847 2.36964 23.243 4.32583 23.243 6.93947C23.243 8.50265 23.0478 10.1054 22.6582 11.7471H29.7324C31.7739 11.7471 33.4289 13.402 33.4289 15.4435C33.4289 15.7416 33.3928 16.0386 33.3215 16.328L30.9883 25.7957C30.2558 28.7683 27.5894 30.8573 24.528 30.8573H11.9911H11.9902Z\"></path></svg>`\nlet coinIcon = `<svg width=\"28\" height=\"28\" viewBox=\"0 0 28 28\" xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" style=\"fill:;\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M14.045 25.5454C7.69377 25.5454 2.54504 20.3967 2.54504 14.0454C2.54504 7.69413 7.69377 2.54541 14.045 2.54541C20.3963 2.54541 25.545 7.69413 25.545 14.0454C25.545 17.0954 24.3334 20.0205 22.1768 22.1771C20.0201 24.3338 17.095 25.5454 14.045 25.5454ZM9.66202 6.81624H18.2761C18.825 6.81624 19.27 7.22183 19.27 7.72216C19.27 8.22248 18.825 8.62807 18.2761 8.62807H14.95V10.2903C17.989 10.4444 20.3766 12.9487 20.3855 15.9916V17.1995C20.3854 17.6997 19.9799 18.1052 19.4796 18.1052C18.9793 18.1052 18.5738 17.6997 18.5737 17.1995V15.9916C18.5667 13.9478 16.9882 12.2535 14.95 12.1022V20.5574C14.95 21.0577 14.5444 21.4633 14.0441 21.4633C13.5437 21.4633 13.1382 21.0577 13.1382 20.5574V12.1022C11.1 12.2535 9.52148 13.9478 9.51448 15.9916V17.1995C9.5144 17.6997 9.10883 18.1052 8.60856 18.1052C8.1083 18.1052 7.70273 17.6997 7.70265 17.1995V15.9916C7.71158 12.9487 10.0992 10.4444 13.1382 10.2903V8.62807H9.66202C9.11309 8.62807 8.66809 8.22248 8.66809 7.72216C8.66809 7.22183 9.11309 6.81624 9.66202 6.81624Z\"></path></svg>`\n\nfunction bilibili(old_id, time, hidden_desc) {\n    const id = old_id.replace(/.*video\\/([^\\/]*)\\/?.*/, '$1')\n    // 获取所有类名为 bilibili_card_res 的 div 元素\n    const bilibiliCards = document.querySelectorAll('.bilibili_card_res');\n    const targetUrl = old_id;\n\n    // 遍历每个 bilibili_card_res div 元素\n    bilibiliCards.forEach(card => {\n        // 在当前 div 元素下查找符合条件的 a 标签\n        const links = card.querySelectorAll(`a[data-url=\"${targetUrl}\"]`);\n        links.forEach(link => {\n            fetch(`https://api.320.ink/api/b?id=${id}`).then(res => res.json()).then(data => {\n                link.innerHTML = `\n                    <div class=\"bilibili_cover\">\n                      <img src=\"https://s1.hdslb.com/bfs/static/player/img/play.svg\" class=\"play_icon no-lazyload\">\n                      <img src=${data.pic + '&h=300'}\" class=\"no-lazyload\">\n                      ${time ? `<span>${time}</span>` : ''}\n                    </div>\n                    <div class=\"bilibili_info\">\n                      <div class=\"title\">${data.title}</div>\n                      ${hidden_desc === 'true' ? '' : `<div class=\"desc\">${data.desc}</div>`}\n                      <div class=\"stat\">\n                        <span>${playIcon}${data.view}</span>\n                        <span>${likeIcon}${data.like}</span>\n                        <span>${coinIcon}${data.coin}</span>\n                      </div>\n                      <div class=\"owner\">\n                        <span class=\"tip\">视频</span>\n                        <img src=\"${data.face + '&h=100'}\" class=\"no-lazyload\">\n                        <span>${data.owner}</span>\n                      </div>\n                    </div>\n                    `\n            })\n        });\n    });\n}\n```\n\n本例涉及到了 API 的请求，修改项目时花了一定的时间调试。\n\n# 本文参考\n- 友链用户 [@张洪 Heo](https://blog.zhheo.com/p/ccaf9148.html)、[@清羽飞扬](https://blog.liushen.fun/)、[@Leonus](https://blog.leonus.cn/) 的博客文章\n\n","categories":[{"name":"博客站点维护","api":"api/categories/博客站点维护.json"},{"name":"Hexo","api":"api/categories/博客站点维护/Hexo.json"}],"tags":[{"name":"HTML","api":"api/tags/HTML.json"},{"name":"CSS","api":"api/tags/CSS.json"},{"name":"Javascript","api":"api/tags/Javascript.json"},{"name":"Markdown","api":"api/tags/Markdown.json"},{"name":"NPM","api":"api/tags/NPM.json"},{"name":"hexo-plugins","api":"api/tags/hexo-plugins.json"},{"name":"hexo-tag-plugins","api":"api/tags/hexo-tag-plugins.json"}]},"api":"api/posts/p/fb28dce2.json"}