{"data":{"title":"å‹é“¾æœ‹å‹åœˆï¼ˆBy @å†°ç³–çº¢èŒ¶ï¼‰â€”â€” Server - SQLite éƒ¨ç½²æ–¹æ¡ˆ","slug":"Archive/OutOfDate/å‹é“¾æœ‹å‹åœˆï¼ˆBy @å†°ç³–çº¢èŒ¶ï¼‰â€”â€” Server - SQLite éƒ¨ç½²æ–¹æ¡ˆ","description":"ç®€è¦ä»‹ç»æˆ‘åœ¨æœåŠ¡å™¨çš„éƒ¨ç½²å‹é“¾æœ‹å‹åœˆè¿‡ç¨‹ä»¥ç¤ºå‚è€ƒ","date":"2023-08-13T15:57:42.000Z","updated":"2025-05-13T11:19:09.028Z","language":"zh-CN","comments":true,"url":"p/b0caa9e8/","cover":"https://cdn.gallery.uuanqin.top/img/new-out-of-date-cover.png","images":[],"content":"\n<div class=\"callout\" data-callout=\"warning\">\n<div class=\"callout-title\">\n<div class=\"callout-title-icon\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-alert-triangle\"><path d=\"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z\"/><path d=\"M12 9v4\"/><path d=\"M12 17h.01\"/></svg>\n</div>\n<div class=\"callout-title-inner\">è¿™æ˜¯ä¸€ç¯‡è¿‡æœŸæ–‡ç«  <code>241030</code></div>\n</div>\n<div class=\"callout-content\"><p>@Rock-Candy-Teaï¼ˆå†°ç³–çº¢èŒ¶ï¼‰å¼€å‘çš„å‹é“¾æœ‹å‹åœˆé¡¹ç›®å·²å¹´ä¹…å¤±ä¿®ï¼Œé¡¹ç›®è´¡çŒ®è€… <a href=\"https://blog.ccknbc.cc\">@CCKNBC</a> å»ºè®®è¿å¾€ <a href=\"https://blog.qyliu.top/posts/4dc716ec/\">Friend-Circle-Lite:è½»é‡å‹é“¾æœ‹å‹åœˆ</a>ï¼ˆä½œè€… <a href=\"https://blog.qyliu.top/\">@æ¸…ç¾½é£æ‰¬</a> ï¼‰</p>\n</div></div><p>æœ¬æ¥ä¸æƒ³å†™çš„ï¼Œè§‰å¾—è‡ªå·±çœ‹æ–‡æ¡£å°±èƒ½å®ç°ã€‚ä½†æ˜¯å®é™…æ“ä½œè¿‡ç¨‹å‡ºç°äº†å¾ˆå¤šçŠ¶å†µï¼Œæ–‡æ¡£ä¸æ˜¯å¤ªè¯¦ç»†ï¼ŒMySQL éƒ¨ç½²å¤±è´¥â€¦<s>äºæ˜¯æ‰“ç®—æ°´ä¸€ç¯‡ ğŸ˜“</s>ã€‚</p>\n<p>å®˜æ–¹æ–‡æ¡£ï¼š<a href=\"https://fcircle-doc.yyyzyyyz.cn/#/\">å‹é“¾æœ‹å‹åœˆ - ä½¿ç”¨æ‰‹å†Œ</a></p>\n<h1 id=\"ç¯å¢ƒ\"><a class=\"markdownIt-Anchor\" href=\"#ç¯å¢ƒ\"></a> ç¯å¢ƒ</h1>\n<p>æˆ‘é‡‡ç”¨çš„æ–¹æ¡ˆæ˜¯ Server + SQLite çš„éƒ¨ç½²æ–¹æ¡ˆã€‚</p>\n<p>æ ¹æ®æ–‡æ¡£è¦æ±‚ Python ç¯å¢ƒä¸º 3.8ï¼ŒåŸæœ¬æˆ‘çš„æœåŠ¡å™¨ç‰ˆæœ¬ä¸º 3.6ï¼Œéœ€è¦å‡çº§ã€‚ï¼ˆæ­¤å¤„ç”±äºæˆ‘å¿½ç•¥ç‰ˆæœ¬å¯¼è‡´è¸©å‘ï¼‰</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># é€‚ç”¨äºCentOSç³»ç»Ÿã€‚å®‰è£…db4-develå¯èƒ½æŠ¥é”™ï¼Œé‚£æˆ‘ä»¬å°±è·³è¿‡å®ƒ......</span></span><br><span class=\"line\">yum -y install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gdbm-devel libpcap-devel xz-devel libffi-devel <span class=\"comment\"># å¿½ç•¥ db4-devel</span></span><br><span class=\"line\"><span class=\"comment\"># ä¸‹é¢è¿™äº›åŸºç¡€å·¥å…·æ²¡å®‰çš„å¯ä»¥å®‰è£…</span></span><br><span class=\"line\">yum -y install yum vim gcc</span><br><span class=\"line\"><span class=\"comment\"># ä¸‹è½½PythonåŒ…</span></span><br><span class=\"line\">wget https://www.python.org/ftp/python/3.8.8/Python-3.8.8.tgz</span><br><span class=\"line\"><span class=\"comment\"># è§£å‹å¹¶è¿›å…¥ç›®å½•</span></span><br><span class=\"line\">tar -zxf Python-3.8.8.tgz &amp;&amp; <span class=\"built_in\">cd</span> Python-3.8.8 &amp;&amp; ./configure --prefix=/usr/local/python3</span><br><span class=\"line\">make &amp;&amp; make install</span><br><span class=\"line\"><span class=\"comment\"># åˆ é™¤åŸå…ˆé“¾æ¥ï¼Œå»ºç«‹è½¯è¿æ¥</span></span><br><span class=\"line\"><span class=\"built_in\">rm</span> -rf /usr/bin/python3</span><br><span class=\"line\"><span class=\"built_in\">ln</span> -s /usr/local/python3/bin/python3 /usr/bin/python3</span><br><span class=\"line\"><span class=\"built_in\">rm</span> -rf /usr/bin/pip3</span><br><span class=\"line\"><span class=\"built_in\">ln</span> -s /usr/local/python3/bin/pip3 /usr/bin/pip3</span><br><span class=\"line\"><span class=\"comment\"># æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ</span></span><br><span class=\"line\">python3 --version</span><br><span class=\"line\">pip3 --version</span><br><span class=\"line\"><span class=\"comment\"># å®‰è£…YAMLæ¨¡å—</span></span><br><span class=\"line\">pip3 install pyyaml</span><br></pre></td></tr></table></figure>\n<p>å®‰è£… Gitï¼š</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install -y git</span><br></pre></td></tr></table></figure>\n<h1 id=\"é¡¹ç›®å®‰è£…\"><a class=\"markdownIt-Anchor\" href=\"#é¡¹ç›®å®‰è£…\"></a> é¡¹ç›®å®‰è£…</h1>\n<p>æ‰¾ä¸ªå¥½åœ°æ–¹å…‹éš†ä»“åº“ï¼š</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/Rock-Candy-Tea/hexo-circle-of-friends.git</span><br></pre></td></tr></table></figure>\n<p>ç¼–è¾‘ <code>/hexo_circle_of_friends/fc_settings.yaml</code> æ–‡ä»¶ï¼š</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">LINK:</span> [</span><br><span class=\"line\">\t<span class=\"comment\"># å‹é“¾é¡µåœ°å€1ï¼Œä¿®æ”¹ä¸ºä½ çš„å‹é“¾é¡µåœ°å€</span></span><br><span class=\"line\">\t<span class=\"comment\"># å› ä¸ºåšå®¢æœ€åç”Ÿæˆçš„ç½‘é¡µéƒ½åœ¨æœ¬åœ°ï¼Œæˆ‘ç›´æ¥å†™æœ¬åœ°åœ°å€</span></span><br><span class=\"line\">     &#123; <span class=\"attr\">link:</span> <span class=\"string\">&quot;http://127.0.0.1/pages/friends/&quot;</span>, <span class=\"attr\">theme:</span> <span class=\"string\">&quot;butterfly&quot;</span> &#125;,</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>\n<p>éƒ¨ç½²ä¸æµ‹è¯• APIï¼š</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python3 deploy.py        <span class=\"comment\"># éƒ¨ç½²</span></span><br><span class=\"line\">curl 127.0.0.1:8000/all  <span class=\"comment\"># æµ‹è¯•æ¥å£</span></span><br></pre></td></tr></table></figure>\n\n<div class=\"callout\" data-callout=\"error\">\n<div class=\"callout-title\">\n<div class=\"callout-title-icon\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-zap\"><polygon points=\"13 2 3 14 12 14 11 22 21 10 12 10 13 2\"/></svg>\n</div>\n<div class=\"callout-title-inner\">ERROR: Could not find a version that satisfies the requirement aiofiles (from versions: none)</div>\n</div>\n<div class=\"callout-content\"><p></p>\n</div></div><p>éƒ¨ç½²æ—¶å¦‚é‡æ‰¾ä¸åˆ°åŒ…çš„é”™è¯¯ï¼Œå¯å°è¯•æ›´æ¢æºä¸‹è½½ã€‚å¦‚é’ˆå¯¹ä»¥ä¸ŠæŠ¥é”™ï¼Œå¯ä»¥æ‰§è¡Œï¼š</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># æŒ‡å®šç‰ˆæœ¬</span></span><br><span class=\"line\">pip3 install <span class=\"string\">&quot;aiofiles==0.8.0&quot;</span> -i https://pypi.tuna.tsinghua.edu.cn/simple/ <span class=\"comment\"># æ¸…åæº</span></span><br></pre></td></tr></table></figure>\n<p>ä½†æ˜¯ä¾èµ–åˆ—è¡¨è¿™ä¹ˆå¤šï¼Œæ€»ä¸èƒ½ä¸€ä¸ªä¸ªä¸‹ã€‚æˆ‘ä»¬å¯ä»¥ç›´æ¥æ‰§è¡Œè¿™æ¡æŒ‡ä»¤ï¼š</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip3 install -r /var/www/hexo-circle-of-friends/hexo_circle_of_friends/requirements.txt</span><br></pre></td></tr></table></figure>\n<p>å®Œäº‹åï¼Œé‡æ–°éƒ¨ç½²å³å¯ã€‚</p>\n<h1 id=\"nginx-é…ç½®\"><a class=\"markdownIt-Anchor\" href=\"#nginx-é…ç½®\"></a> Nginx é…ç½®</h1>\n<p>ç”±äºä¹‹å‰ <sup class=\"footnote-ref\"><a href=\"#fn1\" id=\"fnref1\">[1]</a></sup> å¼„äº†å¥½ä¸€ä¼šè¿™ä¸ªé…ç½®ï¼Œä¸ºçš„æ˜¯ç½‘ç«™å®ç°å…¨ç¨‹ HTTPS è®¿é—®ã€‚ç°åœ¨æˆ‘ä¹Ÿæƒ³è®©å¤–éƒ¨è®¿é—®æœ‹å‹åœˆæ¥å£æ—¶ä¹Ÿä½¿ç”¨ HTTPSã€‚</p>\n<figure class=\"highlight diff\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server &#123;</span><br><span class=\"line\">    listen 443 ssl;</span><br><span class=\"line\">    server_name  localhost;</span><br><span class=\"line\">    access_log  /var/log/nginx/host.access.log  main;</span><br><span class=\"line\">    location / &#123;</span><br><span class=\"line\">        root   /var/www/uuanqin.top;</span><br><span class=\"line\">        index  index.html index.htm;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"addition\">+   # å‹é“¾æœ‹å‹åœˆ è·å–åç«¯å†…å®¹ å‰ç«¯ç™»å½•ï¼ˆHeo æ–¹æ¡ˆï¼‰</span></span><br><span class=\"line\"><span class=\"addition\">+   location ^~/fc_backend/ &#123;</span></span><br><span class=\"line\"><span class=\"addition\">+        proxy_set_header    X-FORWARDED-FOR $remote_addr;</span></span><br><span class=\"line\"><span class=\"addition\">+        proxy_set_header    X-FORWARDED-PROTO $scheme;</span></span><br><span class=\"line\"><span class=\"addition\">+        proxy_set_header    Host   $http_host;</span></span><br><span class=\"line\"><span class=\"addition\">+        proxy_pass http://127.0.0.1:8000/;</span></span><br><span class=\"line\"><span class=\"addition\">+    &#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    error_page  404              /404.html;</span><br><span class=\"line\">    ssl_certificate conf.d/cert/www.uuanqin.top.pem;</span><br><span class=\"line\">    ssl_certificate_key conf.d/cert/www.uuanqin.top.key;</span><br><span class=\"line\">    ...</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>é€šè¿‡ location æ­£åˆ™åŒ¹é…ï¼Œè¯†åˆ«å‡º <code>/fc_backend/</code> å¼€å¤´çš„é“¾æ¥ä¸ºæœ‹å‹åœˆ API çš„è¯·æ±‚ï¼Œå¹¶å°†å…¶è½¬å‘åˆ°ç«¯å£ 8000ï¼ˆæœ‹å‹åœˆé»˜è®¤ç«¯å£ï¼‰ã€‚å‘é€ç»™ 8000 ç«¯å£çš„åœ°å€ä¸åŒ…å« <code>/fc_backend/</code>ã€‚</p>\n<p>å½“ç„¶ï¼Œè¿™é‡Œéœ€è¦å‰ç«¯ä¹Ÿè¦é…åˆå‘å‡º <code>/fc_backend/</code> å¼€å¤´çš„è¯·æ±‚ã€‚</p>\n<p>ä¿®æ”¹é…ç½®æ–‡ä»¶ååˆ«å¿˜äº†é‡å¯ Nginxã€‚</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nginx -s reload</span><br></pre></td></tr></table></figure>\n<h1 id=\"å‰ç«¯éƒ¨ç½²\"><a class=\"markdownIt-Anchor\" href=\"#å‰ç«¯éƒ¨ç½²\"></a> å‰ç«¯éƒ¨ç½²</h1>\n<p>è¿™é‡Œæˆ‘é‡‡ç”¨äº†æ–‡æ¡£æ–¹æ¡ˆã€‚</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;hexo-circle-of-friends-root&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">let</span> <span class=\"title class_\">UserConfig</span> = &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t<span class=\"comment\">// å¡«å†™ä½ çš„apiåœ°å€</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">\t<span class=\"attr\">private_api_url</span>: <span class=\"string\">&#x27;/fc_backend/&#x27;</span>,</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t<span class=\"comment\">// åˆå§‹åŠ è½½å‡ ç¯‡æ–‡ç« </span></span></span><br><span class=\"line\"><span class=\"language-javascript\">\t<span class=\"attr\">page_init_number</span>: <span class=\"number\">20</span>,</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t<span class=\"comment\">// ç‚¹å‡»åŠ è½½æ›´å¤šæ—¶ï¼Œä¸€æ¬¡æœ€å¤šåŠ è½½å‡ ç¯‡æ–‡ç« ï¼Œé»˜è®¤10</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">\t<span class=\"attr\">page_turning_number</span>: <span class=\"number\">10</span>,</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t<span class=\"comment\">// å¤´åƒåŠ è½½å¤±è´¥æ—¶ï¼Œé»˜è®¤å¤´åƒåœ°å€</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">\t<span class=\"attr\">error_img</span>: <span class=\"string\">&#x27;/image/404.gif&#x27;</span>,</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t<span class=\"comment\">// è¿›å…¥é¡µé¢æ—¶ç¬¬ä¸€æ¬¡çš„æ’åºè§„åˆ™</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">\t<span class=\"attr\">sort_rule</span>: <span class=\"string\">&#x27;created&#x27;</span>, <span class=\"comment\">// æœ¬åœ°æ–‡ç« ç¼“å­˜æ•°æ®è¿‡æœŸæ—¶é—´ï¼ˆå¤©ï¼‰</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">\t<span class=\"attr\">expire_days</span>: <span class=\"number\">1</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">&#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;https://npm.elemecdn.com/fcircle-theme-yyyz@1.0.13/dist/fcircle.min.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>æ³¨æ„ <code>private_api_url</code> ä¸­çš„è®¾ç½®ã€‚</p>\n<h1 id=\"å‰ç«¯æ”¹å¯†ç æ–¹å¼\"><a class=\"markdownIt-Anchor\" href=\"#å‰ç«¯æ”¹å¯†ç æ–¹å¼\"></a> å‰ç«¯æ”¹å¯†ç æ–¹å¼</h1>\n<p>å‹é“¾æœ‹å‹åœˆé¡¹ç›®çš„å‰ç«¯ç¬¬ä¸€æ¬¡ç™»å½•æ—¶å³è®¾ç½®å¯†ç ï¼Œå¦‚æœæƒ³è¦æ”¹çš„è¯åˆ™éœ€è¦è‡ªè¡Œåˆ é™¤æ•°æ®åº“ <code>auth</code>ã€<code>secret</code> è¡¨æ ¼ã€‚</p>\n<p>è¿›å…¥æœåŠ¡å™¨ <code>hexo-circle-of-friends</code> æ ¹ç›®å½•ï¼Œæ‰¾åˆ° <code>data.db</code> æ–‡ä»¶</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sqlite3</span><br><span class=\"line\">sqlite&gt; .open data.db <span class=\"comment\"># æ‰“å¼€æ•°æ®åº“</span></span><br><span class=\"line\">sqlite&gt; .tables</span><br><span class=\"line\"><span class=\"comment\"># auth  friends  posts  secret</span></span><br><span class=\"line\">sqlite&gt; DROP TABLE auth;</span><br><span class=\"line\">sqlite&gt; DROP TABLE secret;</span><br><span class=\"line\">sqlite&gt; .tables</span><br><span class=\"line\"><span class=\"comment\"># friends  posts</span></span><br><span class=\"line\">sqlite&gt; .<span class=\"built_in\">exit</span></span><br></pre></td></tr></table></figure>\n<p>é‡æ–°éƒ¨ç½²æœ‹å‹åœˆå³å¯ã€‚</p>\n<h1 id=\"å¯é€‰é±¼å¡˜-dlc\"><a class=\"markdownIt-Anchor\" href=\"#å¯é€‰é±¼å¡˜-dlc\"></a> ã€å¯é€‰ã€‘é±¼å¡˜ DLC</h1>\n<p>é±¼å¡˜ DLC æ˜¯ <a href=\"https://blog.zhheo.com\">@å¼ æ´ªHeo</a> å†™çš„ä¸€ä¸ªåŸºäºå‹é“¾ - æœ‹å‹åœˆçš„è„šæœ¬ã€‚å®ƒå¯ä»¥éšæœºå±•ç¤ºä¸€æ¡æŠ“å–è®°å½•ã€‚ä¸æ´ªæ¶ä¸åŒçš„æ˜¯ï¼Œæˆ‘ç¨å¾®è°ƒæ•´äº†ä¸€ä¸‹ CSS ä»¥æ”¹è¿›é¡µé¢å¸ƒå±€ã€‚</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;title-h2-a&quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;overflow: hidden;&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;title-h2-a-left&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;padding-top: 0;margin: 0 8px 0.6rem; font-size: 20px; font-weight:bold;float: left;&quot;</span>&gt;</span>ğŸ£ é’“é±¼<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;random-post-start&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;javascript:fetchRandomPost();&quot;</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">i</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;fa-solid fa-arrow-rotate-right&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;random-post&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">     <span class=\"attr\">style</span>=<span class=\"string\">&quot;min-height: 32px; background: var(--heo-card-bg); border: var(--ai-summary-style-border-always); box-shadow: var(--heo-shadow-border); padding: 20px 30px; border-radius: 12px; margin-top: 8px;&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;stylesheet&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/css&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">href</span>=<span class=\"string\">&quot;https://cdn.jsdelivr.net/gh/zhheo/JS-Heo@main/moments/random-friends-post.css&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">var</span> fdataUser = &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"attr\">apiurl</span>: <span class=\"string\">&#x27;/fc_backend/&#x27;</span>,</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"attr\">defaultFish</span>: <span class=\"number\">500</span>,</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"attr\">hungryFish</span>: <span class=\"number\">500</span>,</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">src</span>=<span class=\"string\">&quot;https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/jquery/3.6.0/jquery.min.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¿…é¡»ä½¿ç”¨ <code>jquery.js</code>ï¼Œè®°å¾—å¼•å…¥ã€‚ä¸Šé¢ <code>jquery.js</code> ä½¿ç”¨äº†å­—èŠ‚è·³åŠ¨é™æ€èµ„æºå…¬å…± CDNï¼Œå¯æŒ‰éœ€æ›¿æ¢é“¾æ¥ã€‚</p>\n<p>æ­¤å¤–ä¸è¦æ¼æ‰ <code>id</code> ä¸º <code>random-post</code> çš„æ¡†ï¼Œè¿™æ˜¯å›æ˜¾é’“é±¼ä¿¡æ¯ç”¨çš„ã€‚</p>\n<h1 id=\"å¯é€‰è®¾ç½®-cdn-çš„ä¸ç¼“å­˜è§„åˆ™\"><a class=\"markdownIt-Anchor\" href=\"#å¯é€‰è®¾ç½®-cdn-çš„ä¸ç¼“å­˜è§„åˆ™\"></a> ã€å¯é€‰ã€‘è®¾ç½® CDN çš„ä¸ç¼“å­˜è§„åˆ™</h1>\n<p>ç”±äºæœ¬ç«™é‡‡å–äº† CDNï¼Œæ¥å£ <code>https://blog.uuanqin.top/fc_backend/</code> æ‰€æœ‰è¯·æ±‚åº”è¯¥è®¾ç½®ä¸ç¼“å­˜ï¼Œå¦åˆ™é±¼å¡˜ã€æœ‹å‹åœˆåˆ·æ–°äº†è¿˜æ˜¯ä¸€ä¸ªæ ·ã€‚</p>\n<p>æ‰“å¼€ CDN åŠ é€ŸåŸŸåé…ç½®é¡µé¢ã€å¢åŠ å¤šä¸€ä¸ªç¼“å­˜è§„åˆ™å³å¯ï¼ˆä»¥è…¾è®¯äº‘ CDN ä¸ºä¾‹ï¼‰ï¼š</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/20230814230524.png\" alt=\"image.png\" /></p>\n<p>è…¾è®¯äº‘ EdgeOne ä¸­åº”è¯¥ä¸ºï¼š</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/202408081655135.webp\" alt=\"image.png\" /></p>\n<h1 id=\"åç»­æ”¹è¿›\"><a class=\"markdownIt-Anchor\" href=\"#åç»­æ”¹è¿›\"></a> åç»­æ”¹è¿›</h1>\n<p><a href=\"https://blog.qyliu.top/\">@æ¸…ç¾½é£æ‰¬</a> çš„ä½œå“ <code>241028</code>ï¼šè½»é‡å‹é“¾æœ‹å‹åœˆå¯è§£å†³è¿™äº›é—®é¢˜ï¼š</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> æœåŠ¡å™¨é‡å¯åéœ€è¦è‡ªè¡Œæ‰‹åŠ¨éƒ¨ç½²</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> ç›®å‰ä½¿ç”¨çš„æœ‹å‹åœˆå¤ªåºæ‚ï¼Œä»¥åå¯ä»¥å¼€å‘è‡ªå·±çš„çˆ¬è™«</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> å¤œé—´æ¨¡å¼ä¸‹éƒ¨åˆ†æ–‡å­—æœªæ˜¾ç¤º</li>\n</ul>\n<h1 id=\"æœ¬æ–‡å‚è€ƒ\"><a class=\"markdownIt-Anchor\" href=\"#æœ¬æ–‡å‚è€ƒ\"></a> æœ¬æ–‡å‚è€ƒ</h1>\n<ul>\n<li><a href=\"https://blog.csdn.net/z736248591/article/details/117124631\">CentOS 8 å‡çº§ Python3.6 åˆ° Python3.9_é›ªé¡çš„åšå®¢-CSDN åšå®¢</a></li>\n<li><a href=\"https://fcircle-doc.yyyzyyyz.cn/#/problems\">å¸¸è§é—®é¢˜ (yyyzyyyz.cn)</a></li>\n<li><a href=\"https://blog.csdn.net/weixin_44299027/article/details/107286956\">ã€Nginx ç”¨æ³•ã€‘nginx location æ­£åˆ™è¡¨è¾¾å¼å†™æ³•ï¼Œè¯¦è§£ Nginx location åŒ¹é…è§„åˆ™ï¼ˆå¾ˆè¯¦ç»†å“¦ï¼‰_nginx location æ­£åˆ™_No8g æ”»åŸç‹®çš„åšå®¢-CSDN åšå®¢</a></li>\n<li><a href=\"https://www.runoob.com/sqlite/sqlite-drop-table.html\">SQLite åˆ é™¤è¡¨ | èœé¸Ÿæ•™ç¨‹ (runoob.com)</a></li>\n<li><a href=\"https://cloud.tencent.com/developer/article/2238065\">Hexo -43- å‹é“¾æœ‹å‹åœˆ åç«¯éƒ¨ç½²-è…¾è®¯äº‘å¼€å‘è€…ç¤¾åŒº-è…¾è®¯äº‘ (tencent.com)</a></li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/451825018\">Nginx é…ç½®åå‘ä»£ç†ï¼Œä¸€ç¯‡æå®šï¼ - çŸ¥ä¹ (zhihu.com)</a></li>\n<li><a href=\"https://blog.csdn.net/YUICUI/article/details/108471302\">ã€pythonå…¥é—¨ã€‘å¦‚ä½•ç”Ÿæˆå’Œå®‰è£…requirements.txtä¾èµ–ï¼Ÿ_requirementsä¾èµ–-CSDNåšå®¢</a></li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/361790784\">pipå®‰è£…åŒ…æŠ¥é”™Could not find a version that satisfies the requirement pymysql (from versions: none) - çŸ¥ä¹ (zhihu.com)</a></li>\n<li><a href=\"https://blog.zhheo.com/p/908df4e2.html\">é±¼å¡˜DLC - é’“é±¼ï¼šä½ é’“åˆ°äº†ä¸€ç¯‡æƒŠä¸–å¥½æ–‡ï¼ | å¼ æ´ªHeo (zhheo.com)</a></li>\n</ul>\n<hr class=\"footnotes-sep\" />\n<section class=\"footnotes\">\n<ol class=\"footnotes-list\">\n<li id=\"fn1\" class=\"footnote-item\"><p>å‚è§æˆ‘çš„æŠ˜è…¾è¿‡ç¨‹ï¼š<a class=\"uuanqin-bilink\" target=\"_blank\" href=\"/p/83335cfa/\"><span class=\"yukari\">ç«™å†…æ–‡ç« </span>Nginx ä¸ CDN å®Œæˆé‡å®šå‘ï¼šä» HTTP é‡å®šå‘åˆ° HTTPSã€ä» WWW é‡å®šå‘åˆ°æ ¹</a> <a href=\"#fnref1\" class=\"footnote-backref\">â†©ï¸</a></p>\n</li>\n</ol>\n</section>\n","raw":"---\ntitle: å‹é“¾æœ‹å‹åœˆï¼ˆBy @å†°ç³–çº¢èŒ¶ï¼‰â€”â€” Server - SQLite éƒ¨ç½²æ–¹æ¡ˆ\ntags:\n  - Butterfly\n  - Linux\n  - Python\n  - SQLite\ncover: 'https://cdn.gallery.uuanqin.top/img/new-out-of-date-cover.png'\ndescription: ç®€è¦ä»‹ç»æˆ‘åœ¨æœåŠ¡å™¨çš„éƒ¨ç½²å‹é“¾æœ‹å‹åœˆè¿‡ç¨‹ä»¥ç¤ºå‚è€ƒ\nabbrlink: b0caa9e8\ncategories:\n  - Archive\n  - OutOfDate\ndate: 2023-08-13 23:57:42\ntop_img:\n---\n\n> [!warning] è¿™æ˜¯ä¸€ç¯‡è¿‡æœŸæ–‡ç«  `241030`\n> @Rock-Candy-Teaï¼ˆå†°ç³–çº¢èŒ¶ï¼‰å¼€å‘çš„å‹é“¾æœ‹å‹åœˆé¡¹ç›®å·²å¹´ä¹…å¤±ä¿®ï¼Œé¡¹ç›®è´¡çŒ®è€… [@CCKNBC](https://blog.ccknbc.cc) å»ºè®®è¿å¾€ [Friend-Circle-Lite:è½»é‡å‹é“¾æœ‹å‹åœˆ](https://blog.qyliu.top/posts/4dc716ec/)ï¼ˆä½œè€… [@æ¸…ç¾½é£æ‰¬](https://blog.qyliu.top/) ï¼‰\n\næœ¬æ¥ä¸æƒ³å†™çš„ï¼Œè§‰å¾—è‡ªå·±çœ‹æ–‡æ¡£å°±èƒ½å®ç°ã€‚ä½†æ˜¯å®é™…æ“ä½œè¿‡ç¨‹å‡ºç°äº†å¾ˆå¤šçŠ¶å†µï¼Œæ–‡æ¡£ä¸æ˜¯å¤ªè¯¦ç»†ï¼ŒMySQL éƒ¨ç½²å¤±è´¥......~~äºæ˜¯æ‰“ç®—æ°´ä¸€ç¯‡ ğŸ˜“~~ã€‚\n\nå®˜æ–¹æ–‡æ¡£ï¼š[å‹é“¾æœ‹å‹åœˆ - ä½¿ç”¨æ‰‹å†Œ](https://fcircle-doc.yyyzyyyz.cn/#/)\n\n# ç¯å¢ƒ\n\næˆ‘é‡‡ç”¨çš„æ–¹æ¡ˆæ˜¯ Server + SQLite çš„éƒ¨ç½²æ–¹æ¡ˆã€‚\n\næ ¹æ®æ–‡æ¡£è¦æ±‚ Python ç¯å¢ƒä¸º 3.8ï¼ŒåŸæœ¬æˆ‘çš„æœåŠ¡å™¨ç‰ˆæœ¬ä¸º 3.6ï¼Œéœ€è¦å‡çº§ã€‚ï¼ˆæ­¤å¤„ç”±äºæˆ‘å¿½ç•¥ç‰ˆæœ¬å¯¼è‡´è¸©å‘ï¼‰\n\n```bash\n# é€‚ç”¨äºCentOSç³»ç»Ÿã€‚å®‰è£…db4-develå¯èƒ½æŠ¥é”™ï¼Œé‚£æˆ‘ä»¬å°±è·³è¿‡å®ƒ......\nyum -y install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gdbm-devel libpcap-devel xz-devel libffi-devel # å¿½ç•¥ db4-devel\n# ä¸‹é¢è¿™äº›åŸºç¡€å·¥å…·æ²¡å®‰çš„å¯ä»¥å®‰è£…\nyum -y install yum vim gcc\n# ä¸‹è½½PythonåŒ…\nwget https://www.python.org/ftp/python/3.8.8/Python-3.8.8.tgz\n# è§£å‹å¹¶è¿›å…¥ç›®å½•\ntar -zxf Python-3.8.8.tgz && cd Python-3.8.8 && ./configure --prefix=/usr/local/python3\nmake && make install\n# åˆ é™¤åŸå…ˆé“¾æ¥ï¼Œå»ºç«‹è½¯è¿æ¥\nrm -rf /usr/bin/python3\nln -s /usr/local/python3/bin/python3 /usr/bin/python3\nrm -rf /usr/bin/pip3\nln -s /usr/local/python3/bin/pip3 /usr/bin/pip3\n# æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ\npython3 --version\npip3 --version\n# å®‰è£…YAMLæ¨¡å—\npip3 install pyyaml\n```\n\nå®‰è£… Gitï¼š\n\n```bash\nyum install -y git\n```\n\n# é¡¹ç›®å®‰è£…\n\næ‰¾ä¸ªå¥½åœ°æ–¹å…‹éš†ä»“åº“ï¼š\n\n```bash\ngit clone https://github.com/Rock-Candy-Tea/hexo-circle-of-friends.git\n```\n\nç¼–è¾‘ `/hexo_circle_of_friends/fc_settings.yaml` æ–‡ä»¶ï¼š\n\n```yaml\nLINK: [\n\t# å‹é“¾é¡µåœ°å€1ï¼Œä¿®æ”¹ä¸ºä½ çš„å‹é“¾é¡µåœ°å€\n\t# å› ä¸ºåšå®¢æœ€åç”Ÿæˆçš„ç½‘é¡µéƒ½åœ¨æœ¬åœ°ï¼Œæˆ‘ç›´æ¥å†™æœ¬åœ°åœ°å€\n     { link: \"http://127.0.0.1/pages/friends/\", theme: \"butterfly\" },\n]\n```\n\néƒ¨ç½²ä¸æµ‹è¯• APIï¼š\n\n```bash\npython3 deploy.py        # éƒ¨ç½²\ncurl 127.0.0.1:8000/all  # æµ‹è¯•æ¥å£\n```\n\n> [!error] ERROR: Could not find a version that satisfies the requirement aiofiles (from versions: none)\n\néƒ¨ç½²æ—¶å¦‚é‡æ‰¾ä¸åˆ°åŒ…çš„é”™è¯¯ï¼Œå¯å°è¯•æ›´æ¢æºä¸‹è½½ã€‚å¦‚é’ˆå¯¹ä»¥ä¸ŠæŠ¥é”™ï¼Œå¯ä»¥æ‰§è¡Œï¼š\n\n```sh\n# æŒ‡å®šç‰ˆæœ¬\npip3 install \"aiofiles==0.8.0\" -i https://pypi.tuna.tsinghua.edu.cn/simple/ # æ¸…åæº\n```\n\nä½†æ˜¯ä¾èµ–åˆ—è¡¨è¿™ä¹ˆå¤šï¼Œæ€»ä¸èƒ½ä¸€ä¸ªä¸ªä¸‹ã€‚æˆ‘ä»¬å¯ä»¥ç›´æ¥æ‰§è¡Œè¿™æ¡æŒ‡ä»¤ï¼š\n\n```sh\npip3 install -r /var/www/hexo-circle-of-friends/hexo_circle_of_friends/requirements.txt\n```\n\nå®Œäº‹åï¼Œé‡æ–°éƒ¨ç½²å³å¯ã€‚\n\n# Nginx é…ç½®\n\nç”±äºä¹‹å‰ [^cdn] å¼„äº†å¥½ä¸€ä¼šè¿™ä¸ªé…ç½®ï¼Œä¸ºçš„æ˜¯ç½‘ç«™å®ç°å…¨ç¨‹ HTTPS è®¿é—®ã€‚ç°åœ¨æˆ‘ä¹Ÿæƒ³è®©å¤–éƒ¨è®¿é—®æœ‹å‹åœˆæ¥å£æ—¶ä¹Ÿä½¿ç”¨ HTTPSã€‚\n\n[^cdn]: å‚è§æˆ‘çš„æŠ˜è…¾è¿‡ç¨‹ï¼š[[Nginx ä¸ CDN å®Œæˆé‡å®šå‘ï¼šä» HTTP é‡å®šå‘åˆ° HTTPSã€ä» WWW é‡å®šå‘åˆ°æ ¹]]\n\n```diff\nserver {\n    listen 443 ssl;\n    server_name  localhost;\n    access_log  /var/log/nginx/host.access.log  main;\n    location / {\n        root   /var/www/uuanqin.top;\n        index  index.html index.htm;\n    }\n+   # å‹é“¾æœ‹å‹åœˆ è·å–åç«¯å†…å®¹ å‰ç«¯ç™»å½•ï¼ˆHeo æ–¹æ¡ˆï¼‰\n+   location ^~/fc_backend/ {\n+        proxy_set_header    X-FORWARDED-FOR $remote_addr;\n+        proxy_set_header    X-FORWARDED-PROTO $scheme;\n+        proxy_set_header    Host   $http_host;\n+        proxy_pass http://127.0.0.1:8000/;\n+    }\n\n    error_page  404              /404.html;\n    ssl_certificate conf.d/cert/www.uuanqin.top.pem;\n    ssl_certificate_key conf.d/cert/www.uuanqin.top.key;\n    ...\n\n}\n\n```\n\né€šè¿‡ location æ­£åˆ™åŒ¹é…ï¼Œè¯†åˆ«å‡º `/fc_backend/` å¼€å¤´çš„é“¾æ¥ä¸ºæœ‹å‹åœˆ API çš„è¯·æ±‚ï¼Œå¹¶å°†å…¶è½¬å‘åˆ°ç«¯å£ 8000ï¼ˆæœ‹å‹åœˆé»˜è®¤ç«¯å£ï¼‰ã€‚å‘é€ç»™ 8000 ç«¯å£çš„åœ°å€ä¸åŒ…å« `/fc_backend/`ã€‚\n\nå½“ç„¶ï¼Œè¿™é‡Œéœ€è¦å‰ç«¯ä¹Ÿè¦é…åˆå‘å‡º `/fc_backend/` å¼€å¤´çš„è¯·æ±‚ã€‚\n\nä¿®æ”¹é…ç½®æ–‡ä»¶ååˆ«å¿˜äº†é‡å¯ Nginxã€‚\n\n```bash\nnginx -s reload\n```\n\n# å‰ç«¯éƒ¨ç½²\n\nè¿™é‡Œæˆ‘é‡‡ç”¨äº†æ–‡æ¡£æ–¹æ¡ˆã€‚\n\n```html\n<div id=\"hexo-circle-of-friends-root\"></div>\n<script>\nlet UserConfig = {\n\t// å¡«å†™ä½ çš„apiåœ°å€\n\tprivate_api_url: '/fc_backend/',\n\t// åˆå§‹åŠ è½½å‡ ç¯‡æ–‡ç« \n\tpage_init_number: 20,\n\t// ç‚¹å‡»åŠ è½½æ›´å¤šæ—¶ï¼Œä¸€æ¬¡æœ€å¤šåŠ è½½å‡ ç¯‡æ–‡ç« ï¼Œé»˜è®¤10\n\tpage_turning_number: 10,\n\t// å¤´åƒåŠ è½½å¤±è´¥æ—¶ï¼Œé»˜è®¤å¤´åƒåœ°å€\n\terror_img: '/image/404.gif',\n\t// è¿›å…¥é¡µé¢æ—¶ç¬¬ä¸€æ¬¡çš„æ’åºè§„åˆ™\n\tsort_rule: 'created', // æœ¬åœ°æ–‡ç« ç¼“å­˜æ•°æ®è¿‡æœŸæ—¶é—´ï¼ˆå¤©ï¼‰\n\texpire_days: 1\n}\n</script>\n<script type=\"text/javascript\" src=\"https://npm.elemecdn.com/fcircle-theme-yyyz@1.0.13/dist/fcircle.min.js\"></script>\n```\n\næ³¨æ„ `private_api_url` ä¸­çš„è®¾ç½®ã€‚\n\n# å‰ç«¯æ”¹å¯†ç æ–¹å¼\n\nå‹é“¾æœ‹å‹åœˆé¡¹ç›®çš„å‰ç«¯ç¬¬ä¸€æ¬¡ç™»å½•æ—¶å³è®¾ç½®å¯†ç ï¼Œå¦‚æœæƒ³è¦æ”¹çš„è¯åˆ™éœ€è¦è‡ªè¡Œåˆ é™¤æ•°æ®åº“ `auth`ã€`secret` è¡¨æ ¼ã€‚\n\nè¿›å…¥æœåŠ¡å™¨ `hexo-circle-of-friends` æ ¹ç›®å½•ï¼Œæ‰¾åˆ° `data.db` æ–‡ä»¶\n\n```bash\nsqlite3\nsqlite> .open data.db # æ‰“å¼€æ•°æ®åº“\nsqlite> .tables\n# auth  friends  posts  secret\nsqlite> DROP TABLE auth;\nsqlite> DROP TABLE secret;\nsqlite> .tables\n# friends  posts\nsqlite> .exit\n```\n\né‡æ–°éƒ¨ç½²æœ‹å‹åœˆå³å¯ã€‚\n\n# ã€å¯é€‰ã€‘é±¼å¡˜ DLC\n\né±¼å¡˜ DLC æ˜¯ [@å¼ æ´ªHeo](https://blog.zhheo.com) å†™çš„ä¸€ä¸ªåŸºäºå‹é“¾ - æœ‹å‹åœˆçš„è„šæœ¬ã€‚å®ƒå¯ä»¥éšæœºå±•ç¤ºä¸€æ¡æŠ“å–è®°å½•ã€‚ä¸æ´ªæ¶ä¸åŒçš„æ˜¯ï¼Œæˆ‘ç¨å¾®è°ƒæ•´äº†ä¸€ä¸‹ CSS ä»¥æ”¹è¿›é¡µé¢å¸ƒå±€ã€‚\n\n```html\n\n<div class=\"title-h2-a\" style=\"overflow: hidden;\">\n    <div class=\"title-h2-a-left\">\n        <div style=\"padding-top: 0;margin: 0 8px 0.6rem; font-size: 20px; font-weight:bold;float: left;\">ğŸ£ é’“é±¼</div>\n\n        <a class=\"random-post-start\" href=\"javascript:fetchRandomPost();\"><i class=\"fa-solid fa-arrow-rotate-right\"></i></a>\n    </div>\n\n</div>\n<div id=\"random-post\"\n     style=\"min-height: 32px; background: var(--heo-card-bg); border: var(--ai-summary-style-border-always); box-shadow: var(--heo-shadow-border); padding: 20px 30px; border-radius: 12px; margin-top: 8px;\"></div>\n<link rel=\"stylesheet\" type=\"text/css\"\n      href=\"https://cdn.jsdelivr.net/gh/zhheo/JS-Heo@main/moments/random-friends-post.css\">\n\n<script type=\"text/javascript\">\n    var fdataUser = {\n        apiurl: '/fc_backend/',\n        defaultFish: 500,\n        hungryFish: 500,\n    }\n</script>\n\n<script type=\"text/javascript\"\n        src=\"https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/jquery/3.6.0/jquery.min.js\"></script>\n```\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¿…é¡»ä½¿ç”¨ `jquery.js`ï¼Œè®°å¾—å¼•å…¥ã€‚ä¸Šé¢ `jquery.js` ä½¿ç”¨äº†å­—èŠ‚è·³åŠ¨é™æ€èµ„æºå…¬å…± CDNï¼Œå¯æŒ‰éœ€æ›¿æ¢é“¾æ¥ã€‚\n\næ­¤å¤–ä¸è¦æ¼æ‰ `id` ä¸º `random-post` çš„æ¡†ï¼Œè¿™æ˜¯å›æ˜¾é’“é±¼ä¿¡æ¯ç”¨çš„ã€‚\n\n# ã€å¯é€‰ã€‘è®¾ç½® CDN çš„ä¸ç¼“å­˜è§„åˆ™\n\nç”±äºæœ¬ç«™é‡‡å–äº† CDNï¼Œæ¥å£ `https://blog.uuanqin.top/fc_backend/` æ‰€æœ‰è¯·æ±‚åº”è¯¥è®¾ç½®ä¸ç¼“å­˜ï¼Œå¦åˆ™é±¼å¡˜ã€æœ‹å‹åœˆåˆ·æ–°äº†è¿˜æ˜¯ä¸€ä¸ªæ ·ã€‚\n\næ‰“å¼€ CDN åŠ é€ŸåŸŸåé…ç½®é¡µé¢ã€å¢åŠ å¤šä¸€ä¸ªç¼“å­˜è§„åˆ™å³å¯ï¼ˆä»¥è…¾è®¯äº‘ CDN ä¸ºä¾‹ï¼‰ï¼š\n\n![image.png](https://cdn.gallery.uuanqin.top/img/20230814230524.png)\n\nè…¾è®¯äº‘ EdgeOne ä¸­åº”è¯¥ä¸ºï¼š\n\n![image.png](https://cdn.gallery.uuanqin.top/img/202408081655135.webp)\n\n# åç»­æ”¹è¿›\n\n[@æ¸…ç¾½é£æ‰¬](https://blog.qyliu.top/) çš„ä½œå“ `241028`ï¼šè½»é‡å‹é“¾æœ‹å‹åœˆå¯è§£å†³è¿™äº›é—®é¢˜ï¼š\n\n- [x] æœåŠ¡å™¨é‡å¯åéœ€è¦è‡ªè¡Œæ‰‹åŠ¨éƒ¨ç½²\n- [x] ç›®å‰ä½¿ç”¨çš„æœ‹å‹åœˆå¤ªåºæ‚ï¼Œä»¥åå¯ä»¥å¼€å‘è‡ªå·±çš„çˆ¬è™«\n- [x] å¤œé—´æ¨¡å¼ä¸‹éƒ¨åˆ†æ–‡å­—æœªæ˜¾ç¤º\n\n# æœ¬æ–‡å‚è€ƒ\n\n- [CentOS 8 å‡çº§ Python3.6 åˆ° Python3.9\\_é›ªé¡çš„åšå®¢-CSDN åšå®¢](https://blog.csdn.net/z736248591/article/details/117124631)\n- [å¸¸è§é—®é¢˜ (yyyzyyyz.cn)](https://fcircle-doc.yyyzyyyz.cn/#/problems)\n- [ã€Nginx ç”¨æ³•ã€‘nginx location æ­£åˆ™è¡¨è¾¾å¼å†™æ³•ï¼Œè¯¦è§£ Nginx location åŒ¹é…è§„åˆ™ï¼ˆå¾ˆè¯¦ç»†å“¦ï¼‰\\_nginx location æ­£åˆ™\\_No8g æ”»åŸç‹®çš„åšå®¢-CSDN åšå®¢](https://blog.csdn.net/weixin_44299027/article/details/107286956)\n- [SQLite åˆ é™¤è¡¨ | èœé¸Ÿæ•™ç¨‹ (runoob.com)](https://www.runoob.com/sqlite/sqlite-drop-table.html)\n- [Hexo -43- å‹é“¾æœ‹å‹åœˆ åç«¯éƒ¨ç½²-è…¾è®¯äº‘å¼€å‘è€…ç¤¾åŒº-è…¾è®¯äº‘ (tencent.com)](https://cloud.tencent.com/developer/article/2238065)\n- [Nginx é…ç½®åå‘ä»£ç†ï¼Œä¸€ç¯‡æå®šï¼ - çŸ¥ä¹ (zhihu.com)](https://zhuanlan.zhihu.com/p/451825018)\n- [ã€pythonå…¥é—¨ã€‘å¦‚ä½•ç”Ÿæˆå’Œå®‰è£…requirements.txtä¾èµ–ï¼Ÿ_requirementsä¾èµ–-CSDNåšå®¢](https://blog.csdn.net/YUICUI/article/details/108471302)\n- [pipå®‰è£…åŒ…æŠ¥é”™Could not find a version that satisfies the requirement pymysql (from versions: none) - çŸ¥ä¹ (zhihu.com)](https://zhuanlan.zhihu.com/p/361790784)\n- [é±¼å¡˜DLC - é’“é±¼ï¼šä½ é’“åˆ°äº†ä¸€ç¯‡æƒŠä¸–å¥½æ–‡ï¼ | å¼ æ´ªHeo (zhheo.com)](https://blog.zhheo.com/p/908df4e2.html)\n","categories":[{"name":"Archive","api":"api/categories/Archive.json"},{"name":"OutOfDate","api":"api/categories/Archive/OutOfDate.json"}],"tags":[{"name":"Linux","api":"api/tags/Linux.json"},{"name":"Python","api":"api/tags/Python.json"},{"name":"Butterfly","api":"api/tags/Butterfly.json"},{"name":"SQLite","api":"api/tags/SQLite.json"}]},"api":"api/posts/p/b0caa9e8.json"}