{"data":{"title":"JMeter 的安装与使用","slug":"工具箱/软件测试工具/JMeter 的安装与使用","description":"JMeter 的安装使用方法介绍，以及“禅道”项目管理系统的部分使用问题解答。内有针对软件工程专业选了《软件测试》这门课的同学的温馨提醒。","date":"2022-04-16T02:14:00.000Z","updated":"2024-08-08T09:09:19.986Z","language":"zh-CN","comments":true,"url":"p/d4c50eca/","cover":"https://cdn.gallery.uuanqin.top/img/jmetercover.webp","images":[],"content":"<h1 id=\"安装\"><a class=\"markdownIt-Anchor\" href=\"#安装\"></a> 安装</h1>\n<p>官网下载：<a href=\"https://jmeter.apache.org/\">Apache JMeter - Apache JMeter™</a></p>\n<p>下载后直接解压到你想要的位置。进入文件夹中的 bin\\下，运行批处理文件 jmeter.bat。</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/运行.png\" alt=\"img\" /></p>\n<p>弹出小黑框后不要关，等一会后 GUI 界面就会显示出来。</p>\n<p>参考：<a href=\"https://blog.csdn.net/weixin_47227973/article/details/112545558\">Jmeter开启_weixin_47227973的博客-CSDN博客_jmeter怎么打开</a></p>\n<h1 id=\"使用\"><a class=\"markdownIt-Anchor\" href=\"#使用\"></a> 使用</h1>\n<h2 id=\"项目的保存和项目的打开操作\"><a class=\"markdownIt-Anchor\" href=\"#项目的保存和项目的打开操作\"></a> 项目的保存和项目的打开操作</h2>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/QQ截图20220413153733.png\" alt=\"QQ截图20220413153733.png (429×304) \" /></p>\n<p>项目的打开</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/QQ截图20220413000026.png\" alt=\"QQ截图20220413000026.png (238×304) (haha)\" /></p>\n<h2 id=\"添加线程组\"><a class=\"markdownIt-Anchor\" href=\"#添加线程组\"></a> 添加线程组</h2>\n<p>打开后，添加线程组。</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/打开-1024x577.png\" alt=\"打开-1024x577.png (1024×577) (haha)\" /></p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/QQ截图20220412192551.png\" alt=\"QQ截图20220412192551.png (811×374) (haha)\" /></p>\n<p>在线程组中，可以对线程组的线程数和循环次数进行设置。</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/QQ截图20220412192702.png\" alt=\"QQ截图20220412192702.png (1007×856) (haha)\" /></p>\n<h2 id=\"录制控制器的添加\"><a class=\"markdownIt-Anchor\" href=\"#录制控制器的添加\"></a> 录制控制器的添加</h2>\n<p>录制控制器可以对录制的内容进行操作。</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/QQ截图20220412231809.png\" alt=\"QQ截图20220412231809.png (707×432) (haha)\" width=\"500px\" /></p>\n<h2 id=\"代理服务器的添加和使用\"><a class=\"markdownIt-Anchor\" href=\"#代理服务器的添加和使用\"></a> 代理服务器的添加和使用</h2>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/QQ截图20220412231948.png\" alt=\"QQ截图20220412231948.png (647×276) (haha)\" /></p>\n<p>通过添加代理服务器实现录制操作。</p>\n<p>设置端口，随便设，这里我设 8888。</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/image-17-1024x358.png\" alt=\"此图片的alt属性为空；文件名为image-17-1024x358.png\" /></p>\n<p>打开电脑设置中的代理，开启代理：</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/image-16-1024x691.png\" alt=\"此图片的alt属性为空；文件名为image-16-1024x691.png\" width=\"500px\" /></p>\n<p>开启代理后，你将无法访问互联网。这时把端口设为刚刚在 JMeter 设置的端口号 8888。保存。</p>\n<p>返回 JMeter 的代理服务器，并开启。</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/QQ截图20220413000009-1024x536.png\" alt=\"QQ截图20220413000009-1024x536.png (1024×536) (haha)\" width=\"500px\" /></p>\n<p>所有通过代理服务器的网页动作都会被记录。会注意到 Recording Controller 左侧多了展开符号。如果出现没有操作被录制的问题，请检查自己在每次修改系统“代理”设置后，有没有点击“保存“按钮。</p>\n<h2 id=\"添加结果树\"><a class=\"markdownIt-Anchor\" href=\"#添加结果树\"></a> 添加结果树</h2>\n<p>录制完成后，保留需要的内容。然后添加结果树以展示执行结果。</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/QQ截图20220413154123.png\" alt=\"QQ截图20220413154123.png (761×689) (haha)\" /></p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/结果树.png\" alt=\"结果树.png (1022×698) (haha)\" /></p>\n<p>点击运行绿色的运行按钮，可展示执行结果。（在这个例子里，我只保留登录请求）</p>\n<p>温馨提示：录制中如果存在密码输入问题，检查一下这个地方（下图），可能需要将加密内容（MD5）手动改为密码文本。</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/QQ截图20220413161408-1024x519.png\" alt=\"QQ截图20220413161408-1024x519.png (1024×519) (haha)\" /></p>\n<h2 id=\"用户自定义变量的添加与使用\"><a class=\"markdownIt-Anchor\" href=\"#用户自定义变量的添加与使用\"></a> 用户自定义变量的添加与使用</h2>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/用户自定义变量.png\" alt=\"用户自定义变量.png (667×330) (haha)\" width=\"500px\" /></p>\n<p>添加自己定义的变量并使用：</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/image-18-1024x705.png\" alt=\"image-18-1024x705.png (1024×705) (haha)\" /></p>\n<p>添加变量</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/QQ截图20220413164022-1-1024x493.png\" alt=\"QQ截图20220413164022-1-1024x493.png (1024×493) (haha)\" /></p>\n<p>使用变量</p>\n<h2 id=\"读取-csv-文件\"><a class=\"markdownIt-Anchor\" href=\"#读取-csv-文件\"></a> 读取 CSV 文件</h2>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/QQ截图20220413165052.png\" alt=\"QQ截图20220413165052.png (712×219) (haha)\" /></p>\n<p>参数配置如下。注意，csv 变量名设置后，可在一个 HTTP Request 进行使用。</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/QQ截图20220413165506-1024x349.png\" alt=\"QQ截图20220413165506-1024x349.png (1024×349) (haha)\" /></p>\n<p>调整线程组中线程数，比如你的 CSV 文件里的记录数，点击绿色的执行按钮，即可在结果树中查看执行结果。</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/image-19.png\" alt=\"image-19.png (569×350) (haha)\" width=\"500px\" /></p>\n<h2 id=\"断言\"><a class=\"markdownIt-Anchor\" href=\"#断言\"></a> 断言</h2>\n<p>添加断言。在这里，我添加的是一个 BeanShell Assertion 断言。</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/QQ截图20220413171109.png\" alt=\"QQ截图20220413171109.png (634×170) (haha)\" /></p>\n<p>通过断言我们可以对执行结果进行判断。例如检查登录情况：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">String</span> <span class=\"variable\">response</span> <span class=\"operator\">=</span> prev.getResponseDataAsString();</span><br><span class=\"line\"><span class=\"keyword\">if</span>(!response.contains(<span class=\"string\">&quot;success&quot;</span>))&#123;</span><br><span class=\"line\">\tFailure=<span class=\"literal\">true</span>;</span><br><span class=\"line\">\tFailureMessage=<span class=\"string\">&quot;登录失败&quot;</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">\tFailure=<span class=\"literal\">false</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>以上代码即检查相应中是否包含“success”文字，不包含即失败。</p>\n<h2 id=\"聚合报告\"><a class=\"markdownIt-Anchor\" href=\"#聚合报告\"></a> 聚合报告</h2>\n<p>添加聚合报告的方法如下：</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/image-2sad9.png\" alt=\"image-29.png (696×593) (haha)\" width=\"500px\" /></p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/image-33-1024x660.png\" alt=\"image-33-1024x660.png (1024×660) (haha)\" /></p>\n<p>附：聚合报告分析 <a href=\"https://blog.csdn.net/weixin_50829653/article/details/118675802\">JMeter基础 — JMeter聚合报告详解_测试萌萌的博客-CSDN博客_jmeter聚合报告</a></p>\n<h2 id=\"生成-html-格式的性能报告\"><a class=\"markdownIt-Anchor\" href=\"#生成-html-格式的性能报告\"></a> 生成 HTML 格式的性能报告</h2>\n<p>输入以下命令：</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">D:\\apache-jmeter-5.4.3\\bin\\jmeter -n -t <span class=\"string\">&quot;Recording Controller.jmx&quot;</span> -l result.jtl -e -o .\\ResultReport</span><br></pre></td></tr></table></figure>\n<ul>\n<li>参数 D:\\apache-jmeter-5.4.3\\bin\\jmeter 表示 jmeter 可执行文件的路径；</li>\n<li>参数 “Recording Controller.jmx” 表示项目文件，文件名有空格的记得加个双引号；</li>\n<li>参数 result.jtl 表示生成的 jtl 文件名；</li>\n<li>参数.\\ResultReport 表示生成的目标文件夹。</li>\n</ul>\n<p>例如，运行：</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/image-30-1024x20.png\" alt=\"image-30-1024x20.png (1024×20) (haha)\" /></p>\n<p>有以下结果：</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/images-31.png\" alt=\"image-31.png (697×730) (haha)\" width=\"500px\" /></p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/image-32-1024x447.png\" alt=\"image-32-1024x447.png (1024×447) (haha)\" /></p>\n<p>操作及图标信息详解参考：<a href=\"https://www.cnblogs.com/lirongyang/p/15595206.html\">Jmeter(三十七) - 从入门到精通进阶篇 - 输出HTML格式的性能测试报告（详解教程） - 李荣洋 - 博客园 (cnblogs.com)</a></p>\n<h1 id=\"针对要做软件测试课程实验的-tjuers-温馨提示\"><a class=\"markdownIt-Anchor\" href=\"#针对要做软件测试课程实验的-tjuers-温馨提示\"></a> 针对要做《软件测试》课程实验的 TJUers 温馨提示</h1>\n<h2 id=\"lamp\"><a class=\"markdownIt-Anchor\" href=\"#lamp\"></a> LAMP</h2>\n<p>TJU 软件工程专业的《软件测试》课程”实验 6-Jmeter 压力测试“中要求自己搭建一个 LAMP 环境。</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/image-1asd5.png\" alt=\"img\" />实验 6 实验指导书节选</p>\n<p>这里指路我的另一篇文章《个人（博客）建站经验分享【持续更新 -4.12 最新】 - 半方池水半方田 》“以供大家参考，里面就是一些阿里云的文档链接，我在服务器上搭 LAMP 时参考的就是这些内容。</p>\n<p>如果你使用接下来介绍的“禅道”，使用一键安装包，不需要亲手搭 LAMP（也许）。</p>\n<h2 id=\"sysstat-工具的安装\"><a class=\"markdownIt-Anchor\" href=\"#sysstat-工具的安装\"></a> sysstat 工具的安装</h2>\n<p>Linux 下：</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget -c http://pagesperso-orange.fr/sebastien.godard/sysstat-11.7.3-1.x86_64.rpm</span><br><span class=\"line\">rpm -Uvh sysstat-11.7.3-1.x86_64.rpm</span><br></pre></td></tr></table></figure>\n<p>参考：<a href=\"https://blog.csdn.net/sinat_28317385/article/details/112967462\">sysstat命令的安装和使用_安澜仙王的博客-CSDN博客_sysstat</a></p>\n<p><a href=\"https://blog.csdn.net/sixisixsix/article/details/106430379\">sysstat 工具详细说明（一）_ⅨⅦ的博客-CSDN博客_syss</a></p>\n<h2 id=\"禅道\"><a class=\"markdownIt-Anchor\" href=\"#禅道\"></a> 禅道</h2>\n<p>待测系统部分我采用禅道项目管理软件，安装与操作指南见：<a href=\"https://www.zentao.net/book/zentaopmshelp/90.html\">linux用一键安装包 - 禅道开源版使用帮助 - 禅道开源项目管理软件 (zentao.net)</a>。注意记住你开启的 Apache 端口和 Mysql 端口。比如这篇教程的 81 端口和 3307 端口。</p>\n<p><strong>突然发现，好像禅道的 Linux 一键安装包里面有 apache, php, mysql，是不是说 LAMP 其实不用搭…</strong></p>\n<p>如果你已经安了 LAMP，尝试看这篇安装禅道：<a href=\"https://www.zentao.net/book/zentaopmshelp/101.html\">使用源码包安装(各系统通用) - 禅道开源版使用帮助 - 禅道开源项目管理软件 (zentao.net)</a></p>\n<p>正常打开的界面:</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/QQ截图20220411234927-1024x549.png\" alt=\"QQ截图20220411234927-1024x549.png (1024×549) (haha)\" /></p>\n<p>如果你在云服务器进行操作，别忘了在安全组打开端口。</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/QQ截图20220411234940-1024x47.png\" alt=\"QQ截图20220411234940-1024x47.png (1024×47) (haha)\" /></p>\n<h2 id=\"增加编辑项目\"><a class=\"markdownIt-Anchor\" href=\"#增加编辑项目\"></a> 增加/编辑项目</h2>\n<p>在这个实验中，我遇到的难题就是 JMeter 不能模拟增加 Bug，修改 Bug 标题的操作。花了一天，我用自己的野生智慧采用野生方法解决了问题。</p>\n<p>就是在关键的、填写表单的 POST 请求中，表头增加 Cookie 字段即可。<strong>（提醒：此问题为多数童鞋普遍问题！！）</strong></p>\n<p>Cookie 的获取方法很多，这里提供我突然得到“启示”的步骤供参考：打开禅道管理页面，在准备提交表单之前，借助浏览器的开发者工具进行抓包（你也可以使用其他的抓包工具）：</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/image-20-1024x159.png\" alt=\"image-20-1024x159.png (1024×159) (haha)\" /></p>\n<p>在开启开发者模式下，模拟一遍“提 Bug”操作，筛选出想要的请求。</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/image-21-1024x546.png\" alt=\"image-21-1024x546.png (1024×546) (haha)\" /></p>\n<p>在 JMeter 对应的记录中，往 Header 里再增加一项 Cookie：</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/image-22-1024x195.png\" alt=\"img\" /></p>\n<p>正确的返回数据：</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/image-23-1024x123.png\" alt=\"img\" /></p>\n<p>之前错误的返回数据（HTML）：</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/image-24.png\" alt=\"img\" width=\"500px\" /></p>\n<p>灵感来源：<a href=\"https://blog.csdn.net/m0_51274044/article/details/123880182\">使用fiddler+jmeter写登录禅道、提交bug的脚本_千与学程序的博客-CSDN博客</a> 受到该文章中改 Header 的操作的启示。</p>\n<h2 id=\"禅道内批量导入用户数据选做\"><a class=\"markdownIt-Anchor\" href=\"#禅道内批量导入用户数据选做\"></a> 禅道内批量导入用户数据（选做）</h2>\n<p>请看我的另一篇文章：《“禅道”的配置与数据库连接 - 半方池水半方田》</p>\n<h1 id=\"提醒中的提醒\"><a class=\"markdownIt-Anchor\" href=\"#提醒中的提醒\"></a> 提醒中的提醒</h1>\n<p>问：使用 JMeter 录制不成功咋办？</p>\n<p>答：</p>\n<ul>\n<li>检查 JMeter 代理服务器选上录制控制器了没。</li>\n<li>检查本机代理有没有开启成功，试着调换一下 JMeter HTTP 代理、本机网络代理的开启顺序</li>\n<li>录制到的 HTTP 请求是实时更新在 JM</li>\n</ul>\n<p>祝大家实验顺利！</p>\n","raw":"---\ntitle: JMeter 的安装与使用\ntags:\n  - JMeter\n  - 安装\n  - 问题解决\ncategories:\n  - 工具箱\n  - 软件测试工具\ncover: 'https://cdn.gallery.uuanqin.top/img/jmetercover.webp'\ndescription: JMeter 的安装使用方法介绍，以及“禅道”项目管理系统的部分使用问题解答。内有针对软件工程专业选了《软件测试》这门课的同学的温馨提醒。\nabbrlink: d4c50eca\ndate: 2022-04-16 10:14:00\n---\n\n# 安装\n\n官网下载：[Apache JMeter - Apache JMeter™](https://jmeter.apache.org/)\n\n下载后直接解压到你想要的位置。进入文件夹中的 bin\\下，运行批处理文件 jmeter.bat。\n\n![img](https://cdn.gallery.uuanqin.top/img/%E8%BF%90%E8%A1%8C.png)\n\n弹出小黑框后不要关，等一会后 GUI 界面就会显示出来。\n\n参考：[Jmeter开启_weixin_47227973的博客-CSDN博客_jmeter怎么打开](https://blog.csdn.net/weixin_47227973/article/details/112545558)\n\n# 使用\n\n## 项目的保存和项目的打开操作\n\n![QQ截图20220413153733.png (429×304) ](https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220413153733.png)\n\n项目的打开\n\n![QQ截图20220413000026.png (238×304) (haha)](https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220413000026.png)\n\n## 添加线程组\n\n打开后，添加线程组。\n\n![打开-1024x577.png (1024×577) (haha)](https://cdn.gallery.uuanqin.top/img/%E6%89%93%E5%BC%80-1024x577.png)\n\n![QQ截图20220412192551.png (811×374) (haha)](https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220412192551.png)\n\n在线程组中，可以对线程组的线程数和循环次数进行设置。\n\n![QQ截图20220412192702.png (1007×856) (haha)](https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220412192702.png)\n\n## 录制控制器的添加\n\n录制控制器可以对录制的内容进行操作。\n\n![QQ截图20220412231809.png (707×432) (haha)|500](https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220412231809.png)\n\n## 代理服务器的添加和使用\n\n![QQ截图20220412231948.png (647×276) (haha)](https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220412231948.png)\n\n通过添加代理服务器实现录制操作。\n\n设置端口，随便设，这里我设 8888。\n\n![此图片的alt属性为空；文件名为image-17-1024x358.png](https://cdn.gallery.uuanqin.top/img/image-17-1024x358.png)\n\n打开电脑设置中的代理，开启代理：\n\n![此图片的alt属性为空；文件名为image-16-1024x691.png|500](https://cdn.gallery.uuanqin.top/img/image-16-1024x691.png)\n\n开启代理后，你将无法访问互联网。这时把端口设为刚刚在 JMeter 设置的端口号 8888。保存。\n\n返回 JMeter 的代理服务器，并开启。\n\n![QQ截图20220413000009-1024x536.png (1024×536) (haha)|500](https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220413000009-1024x536.png)\n\n所有通过代理服务器的网页动作都会被记录。会注意到 Recording Controller 左侧多了展开符号。如果出现没有操作被录制的问题，请检查自己在每次修改系统“代理”设置后，有没有点击“保存“按钮。\n\n## 添加结果树\n\n录制完成后，保留需要的内容。然后添加结果树以展示执行结果。\n\n![QQ截图20220413154123.png (761×689) (haha)](https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220413154123.png)\n\n![结果树.png (1022×698) (haha)](https://cdn.gallery.uuanqin.top/img/%E7%BB%93%E6%9E%9C%E6%A0%91.png)\n\n点击运行绿色的运行按钮，可展示执行结果。（在这个例子里，我只保留登录请求）\n\n温馨提示：录制中如果存在密码输入问题，检查一下这个地方（下图），可能需要将加密内容（MD5）手动改为密码文本。\n\n![QQ截图20220413161408-1024x519.png (1024×519) (haha)](https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220413161408-1024x519.png)\n\n## 用户自定义变量的添加与使用\n\n![用户自定义变量.png (667×330) (haha)|500](https://cdn.gallery.uuanqin.top/img/%E7%94%A8%E6%88%B7%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F.png)\n\n添加自己定义的变量并使用：\n\n![image-18-1024x705.png (1024×705) (haha)](https://cdn.gallery.uuanqin.top/img/image-18-1024x705.png)\n\n添加变量\n\n![QQ截图20220413164022-1-1024x493.png (1024×493) (haha)](https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220413164022-1-1024x493.png)\n\n使用变量\n\n## 读取 CSV 文件\n\n![QQ截图20220413165052.png (712×219) (haha)](https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220413165052.png)\n\n参数配置如下。注意，csv 变量名设置后，可在一个 HTTP Request 进行使用。\n\n![QQ截图20220413165506-1024x349.png (1024×349) (haha)](https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220413165506-1024x349.png)\n\n调整线程组中线程数，比如你的 CSV 文件里的记录数，点击绿色的执行按钮，即可在结果树中查看执行结果。\n\n![image-19.png (569×350) (haha)|500](https://cdn.gallery.uuanqin.top/img/image-19.png)\n\n## 断言\n\n添加断言。在这里，我添加的是一个 BeanShell Assertion 断言。\n\n![QQ截图20220413171109.png (634×170) (haha)](https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220413171109.png)\n\n通过断言我们可以对执行结果进行判断。例如检查登录情况：\n\n```java\nString response = prev.getResponseDataAsString();\nif(!response.contains(\"success\")){\n\tFailure=true;\n\tFailureMessage=\"登录失败\";\n}\nelse{\n\tFailure=false;\n}\n```\n\n以上代码即检查相应中是否包含“success”文字，不包含即失败。\n\n## 聚合报告\n\n添加聚合报告的方法如下：\n\n![image-29.png (696×593) (haha)|500](https://cdn.gallery.uuanqin.top/img/image-2sad9.png)\n\n![image-33-1024x660.png (1024×660) (haha)](https://cdn.gallery.uuanqin.top/img/image-33-1024x660.png)\n\n附：聚合报告分析 [JMeter基础 — JMeter聚合报告详解_测试萌萌的博客-CSDN博客_jmeter聚合报告](https://blog.csdn.net/weixin_50829653/article/details/118675802)\n\n## 生成 HTML 格式的性能报告\n\n输入以下命令：\n\n```sh\n D:\\apache-jmeter-5.4.3\\bin\\jmeter -n -t \"Recording Controller.jmx\" -l result.jtl -e -o .\\ResultReport\n```\n\n- 参数 D:\\apache-jmeter-5.4.3\\bin\\jmeter 表示 jmeter 可执行文件的路径；\n- 参数 \"Recording Controller.jmx\" 表示项目文件，文件名有空格的记得加个双引号；\n- 参数 result.jtl 表示生成的 jtl 文件名；\n- 参数.\\ResultReport 表示生成的目标文件夹。\n\n例如，运行：\n\n![image-30-1024x20.png (1024×20) (haha)](https://cdn.gallery.uuanqin.top/img/image-30-1024x20.png)\n\n有以下结果：\n\n![image-31.png (697×730) (haha)|500](https://cdn.gallery.uuanqin.top/img/images-31.png)\n\n![image-32-1024x447.png (1024×447) (haha)](https://cdn.gallery.uuanqin.top/img/image-32-1024x447.png)\n\n操作及图标信息详解参考：[Jmeter(三十七) - 从入门到精通进阶篇 - 输出HTML格式的性能测试报告（详解教程） - 李荣洋 - 博客园 (cnblogs.com)](https://www.cnblogs.com/lirongyang/p/15595206.html)\n\n# 针对要做《软件测试》课程实验的 TJUers 温馨提示\n\n## LAMP\n\nTJU 软件工程专业的《软件测试》课程”实验 6-Jmeter 压力测试“中要求自己搭建一个 LAMP 环境。\n\n![img](https://cdn.gallery.uuanqin.top/img/image-1asd5.png)实验 6 实验指导书节选\n\n这里指路我的另一篇文章《个人（博客）建站经验分享【持续更新 -4.12 最新】 - 半方池水半方田 》“以供大家参考，里面就是一些阿里云的文档链接，我在服务器上搭 LAMP 时参考的就是这些内容。\n\n如果你使用接下来介绍的“禅道”，使用一键安装包，不需要亲手搭 LAMP（也许）。\n\n## sysstat 工具的安装\n\nLinux 下：\n\n```sh\nwget -c http://pagesperso-orange.fr/sebastien.godard/sysstat-11.7.3-1.x86_64.rpm\nrpm -Uvh sysstat-11.7.3-1.x86_64.rpm\n```\n\n参考：[sysstat命令的安装和使用_安澜仙王的博客-CSDN博客_sysstat](https://blog.csdn.net/sinat_28317385/article/details/112967462)\n\n[sysstat 工具详细说明（一）_ⅨⅦ的博客-CSDN博客_syss](https://blog.csdn.net/sixisixsix/article/details/106430379)\n\n## 禅道\n\n待测系统部分我采用禅道项目管理软件，安装与操作指南见：[linux用一键安装包 - 禅道开源版使用帮助 - 禅道开源项目管理软件 (zentao.net)](https://www.zentao.net/book/zentaopmshelp/90.html)。注意记住你开启的 Apache 端口和 Mysql 端口。比如这篇教程的 81 端口和 3307 端口。\n\n**突然发现，好像禅道的 Linux 一键安装包里面有 apache, php, mysql，是不是说 LAMP 其实不用搭......**\n\n如果你已经安了 LAMP，尝试看这篇安装禅道：[使用源码包安装(各系统通用) - 禅道开源版使用帮助 - 禅道开源项目管理软件 (zentao.net)](https://www.zentao.net/book/zentaopmshelp/101.html)\n\n正常打开的界面:\n\n![QQ截图20220411234927-1024x549.png (1024×549) (haha)](https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220411234927-1024x549.png)\n\n如果你在云服务器进行操作，别忘了在安全组打开端口。\n\n![QQ截图20220411234940-1024x47.png (1024×47) (haha)](https://cdn.gallery.uuanqin.top/img/QQ%E6%88%AA%E5%9B%BE20220411234940-1024x47.png)\n\n## 增加/编辑项目\n\n在这个实验中，我遇到的难题就是 JMeter 不能模拟增加 Bug，修改 Bug 标题的操作。花了一天，我用自己的野生智慧采用野生方法解决了问题。\n\n就是在关键的、填写表单的 POST 请求中，表头增加 Cookie 字段即可。**（提醒：此问题为多数童鞋普遍问题！！）**\n\nCookie 的获取方法很多，这里提供我突然得到“启示”的步骤供参考：打开禅道管理页面，在准备提交表单之前，借助浏览器的开发者工具进行抓包（你也可以使用其他的抓包工具）：\n\n![image-20-1024x159.png (1024×159) (haha)](https://cdn.gallery.uuanqin.top/img/image-20-1024x159.png)\n\n在开启开发者模式下，模拟一遍“提 Bug”操作，筛选出想要的请求。\n\n![image-21-1024x546.png (1024×546) (haha)](https://cdn.gallery.uuanqin.top/img/image-21-1024x546.png)\n\n在 JMeter 对应的记录中，往 Header 里再增加一项 Cookie：\n\n![img](https://cdn.gallery.uuanqin.top/img/image-22-1024x195.png)\n\n正确的返回数据：\n\n![img](https://cdn.gallery.uuanqin.top/img/image-23-1024x123.png)\n\n之前错误的返回数据（HTML）：\n\n![img|500](https://cdn.gallery.uuanqin.top/img/image-24.png)\n\n灵感来源：[使用fiddler+jmeter写登录禅道、提交bug的脚本_千与学程序的博客-CSDN博客](https://blog.csdn.net/m0_51274044/article/details/123880182) 受到该文章中改 Header 的操作的启示。\n\n## 禅道内批量导入用户数据（选做）\n\n请看我的另一篇文章：《“禅道”的配置与数据库连接 - 半方池水半方田》\n\n# 提醒中的提醒\n\n问：使用 JMeter 录制不成功咋办？\n\n答：\n\n- 检查 JMeter 代理服务器选上录制控制器了没。\n- 检查本机代理有没有开启成功，试着调换一下 JMeter HTTP 代理、本机网络代理的开启顺序\n- 录制到的 HTTP 请求是实时更新在 JM\n\n祝大家实验顺利！","categories":[{"name":"工具箱","api":"api/categories/工具箱.json"},{"name":"软件测试工具","api":"api/categories/工具箱/软件测试工具.json"}],"tags":[{"name":"问题解决","api":"api/tags/问题解决.json"},{"name":"安装","api":"api/tags/安装.json"},{"name":"JMeter","api":"api/tags/JMeter.json"}]},"api":"api/posts/p/d4c50eca.json"}