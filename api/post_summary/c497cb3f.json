{"title":"DHT11 驱动程序","tags":["DHT11","驱动","STM32","C","HAL"],"cover":"https://cdn.gallery.uuanqin.top/img/20240404231344.webp","description":"给出标准库及 HAL 驱动示例。","categories":["嵌入式"],"abbrlink":"c497cb3f","date":"2024-04-23T22:37:40.000Z","top_img":null,"summary":"DHT11 简介 DHT11 数字温湿度传感器是一款含有已校准数字信号输出的温湿度复合传感器。DHT11 有 3 脚和 4 脚两款，在使用上没有差别，接线都一样，主要接三根，四脚的款式有一脚悬空。 典型接线线路如下图： 引脚： | Pin | 名称 | 注释 | | --- | ---- | --------- | | 1 | VDD | 供电 3-5.5V | | 2 | GND | 接地，电源负极 | | 3 | DATA | 串行数据，单总线 | | 4 | NC | 空脚，请悬空 | DHT11 采样频率为 1HZ，建议平均 1~2s 读取一次数据。 单总线协议 DHT11 采用单总线协议与单片机通信，也就是使用一根 DATA 线进行数据的收发。单片机发送一次复位信号后，DHT11 从低功耗模式转换到高速模式，等待主机复位结束后，DHT11 发送响应信号，并拉高总线准备传输数据。 数据格式（共 40bit）： 8bit 湿度整数数据 8bit 湿度小数数据 8bit 温度整数数据 8bit 温度小数数据 8bit 校验和 DHT11 的 DATA 传输一次完整的数据为 40bit，按照高位在前，低位在后的顺序传输。 DHT11 只有在接收到开始信号后才触发一次温湿度采集，如果没有接收到主机发送复位信号，DHT11 不主动进行温湿度采集。当数据采集完毕且无开始信号后，DHT11 自动切换到低速模式。 初始化 DHT11 初始化过程分为： 主机发送复位信号：首先主机拉低总线至少 18ms，然后再拉高总线，延时 20~40us，取中间值 30us，此时复位信号发送完毕。 DHT11 发送响应信号：DHT11 检测到复位信号后，触发一次采样，并拉低总线 80us 表示响应信号，告诉主机数据已经准备好了；然后 DHT11 拉高总线 80us，之后开始传输数据。 > 注意，主机一开始拉低总线是 18 毫秒，不是 18 微秒。 从模式下，DHT11 接收到开始信号触发一次温湿度采集，如果没有接收到主机发送开始信号，DHT11 不会主动进行温湿度采集。采集数据后转换到低速模式。 实际上 DHT11 的响应时间并不是标准的 80us，往往存在误差，当响应时间处于 20~100us 之间时就可以认定响应成功。..."}