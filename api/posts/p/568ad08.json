{"data":{"title":"Butterfly 不改动主题源码实现自定义侧边栏","slug":"博客站点维护/Hexo/Butterfly 不改动主题源码实现自定义侧边栏","description":"侧边栏定制举一反三，手把手教你实现自己的侧边栏","date":"2023-05-31T16:17:21.000Z","updated":"2024-12-09T19:37:21.214Z","language":"zh-CN","comments":true,"url":"p/568ad08/","cover":"https://cdn.gallery.uuanqin.top/img/crowdcover46546.png","images":[],"content":"\n<div class=\"callout\" data-callout=\"success\">\n<div class=\"callout-title\">\n<div class=\"callout-title-icon\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-check\"><path d=\"M20 6 9 17l-5-5\"/></svg>\n</div>\n<div class=\"callout-title-inner\">本文不涉及对主题源代码的修改</div>\n</div>\n<div class=\"callout-content\"><p></p>\n</div></div>\n<div class=\"callout\" data-callout=\"success\">\n<div class=\"callout-title\">\n<div class=\"callout-title-icon\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-check\"><path d=\"M20 6 9 17l-5-5\"/></svg>\n</div>\n<div class=\"callout-title-inner\">本文已收录至 <a href=\"https://butterfly.zhheo.com/\">Butterfly 主题美化教程</a></div>\n</div>\n<div class=\"callout-content\"><p></p>\n</div></div><p>侧边栏是 Butterfly 主题的一大功能亮点，在 Butterfly 3.8.0 版本前是不支持自定义侧边栏的，只能通过魔改实现。这也因此诞生了许多优质的魔改教程，效果也很惊艳，比如 <a href=\"https://blog.zhheo.com/\">Heo</a> 收录的：<a href=\"https://butterfly.zhheo.com/docs/aside.html\">侧边栏 | Butterfly 主题美化教程 (zhheo.com)</a>。</p>\n<p>Butterfly 3.8.0 以后，主题支持自定义侧边栏，这也使我们可以通过不修改主题源码的方式自定义想要的侧边栏。（主题官方文档参考：<a href=\"https://butterfly.js.org/posts/ea33ab97/\">自定義側邊欄 | Butterfly</a>）</p>\n<p><strong>授人以鱼不如授人以渔</strong>。本篇文章将以这个特性为基础，结合 CodePen 中的项目，以三个例子展示定制侧边栏过程：</p>\n<ul>\n<li>小风车：这是对主题官方文档示例的举一反三，提供与 CodePen 项目结合的思路。<br />\n<img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/image-20230530224311630.png\" alt=\"image-20230530224311630\" width=\"223px\" /></li>\n<li>Crowd Simulator 人潮涌动模拟器：引入 CSS 文件去掉侧边栏容器的边框，嵌入 iframe 页面<br />\n<img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/crowdsimudemo.gif\" alt=\"crowdsimudemo.gif\" /></li>\n<li>Car 小汽车：上例的举一反三<br />\n<img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/cardemo-min.gif\" alt=\"cardemo-min.gif\" width=\"275px\" /></li>\n</ul>\n<blockquote>\n<p>本人前端水平有限，欢迎各位博主互相交流！</p>\n</blockquote>\n<h1 id=\"例-1小风车\"><a class=\"markdownIt-Anchor\" href=\"#例-1小风车\"></a> 例 1：小风车</h1>\n<p>首先，在 <a href=\"https://codepen.io/trending\">Trending - CodePen</a> 找到自己想要的小组件，以小风车为例 <a href=\"https://codepen.io/FilipVitas/pen/zWWmbo\">Windmill (codepen.io)</a>，进入代码编辑界面，里面有 HTML 代码和 CSS 代码。</p>\n<h2 id=\"引入-css\"><a class=\"markdownIt-Anchor\" href=\"#引入-css\"></a> 引入 CSS</h2>\n<p>点击代码框右上小箭头，编译 css 文件：</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/image-20230530222130344.png\" alt=\"image-20230530222130344\" width=\"500px\" /></p>\n<p>复制里面的的代码到新文件 windmill.css。并将该 CSS 文件引入主题中。Butterfly 主题的方法为在主题配置文件的 inject 部分引入 CSS，如：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">inject:</span></span><br><span class=\"line\">  <span class=\"attr\">head:</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">&lt;link</span> <span class=\"string\">rel=&quot;stylesheet&quot;</span> <span class=\"string\">href=&quot;your</span> <span class=\"string\">css&quot;&gt;</span></span><br><span class=\"line\">  <span class=\"attr\">bottom:</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"string\">&lt;script</span> <span class=\"string\">src=&quot;your</span> <span class=\"string\">js&quot;&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure>\n<p>删除不必要代码（否则导致博客异常）并稍微修改一下类选择器（以防万一）：</p>\n<figure class=\"highlight diff\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"deletion\">- *,</span></span><br><span class=\"line\"><span class=\"deletion\">- *:before,</span></span><br><span class=\"line\"><span class=\"deletion\">- *:after &#123;</span></span><br><span class=\"line\"><span class=\"deletion\">-   ...</span></span><br><span class=\"line\"><span class=\"deletion\">- &#125;</span></span><br><span class=\"line\"><span class=\"deletion\">- body &#123;</span></span><br><span class=\"line\"><span class=\"deletion\">-   ...</span></span><br><span class=\"line\"><span class=\"deletion\">- &#125;</span></span><br><span class=\"line\"><span class=\"deletion\">- .inspiration &#123;</span></span><br><span class=\"line\"><span class=\"deletion\">- \t...</span></span><br><span class=\"line\"><span class=\"deletion\">- &#125;</span></span><br><span class=\"line\"><span class=\"deletion\">- .center &#123;</span></span><br><span class=\"line\"><span class=\"deletion\">- ...</span></span><br><span class=\"line\"><span class=\"deletion\">- &#125;</span></span><br><span class=\"line\"><span class=\"deletion\">- @media screen and (max-height: 500px) &#123;</span></span><br><span class=\"line\"><span class=\"deletion\">- ...</span></span><br><span class=\"line\"><span class=\"deletion\">- &#125;</span></span><br><span class=\"line\"><span class=\"addition\">+ /* 这是为了让svg居中 */</span></span><br><span class=\"line\"><span class=\"addition\">+ .windmill &#123;</span></span><br><span class=\"line\"><span class=\"addition\">+     display: flex;</span></span><br><span class=\"line\"><span class=\"addition\">+     align-items: center;</span></span><br><span class=\"line\"><span class=\"addition\">+     justify-content: center;</span></span><br><span class=\"line\"><span class=\"addition\">+ &#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"addition\">+ /* 以下关于svg类选择器加上.windmill */</span></span><br><span class=\"line\"><span class=\"deletion\">- svg &#123;</span></span><br><span class=\"line\"><span class=\"addition\">+ svg.windmill &#123;</span></span><br><span class=\"line\">  overflow: visible;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"deletion\">- svg .blades &#123;</span></span><br><span class=\"line\"><span class=\"addition\">+ svg .blades.windmill &#123;</span></span><br><span class=\"line\">\t...</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"deletion\">- svg .clouds path:nth-child(1) &#123;</span></span><br><span class=\"line\"><span class=\"addition\">+ svg .clouds.windmill path:nth-child(1) &#123;</span></span><br><span class=\"line\">\t...</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"deletion\">- svg .clouds path:nth-child(2) &#123;</span></span><br><span class=\"line\"><span class=\"addition\">+ svg .clouds.windmill path:nth-child(2) &#123;</span></span><br><span class=\"line\">\t...</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<h2 id=\"widgetyml-放入关键-html-代码\"><a class=\"markdownIt-Anchor\" href=\"#widgetyml-放入关键-html-代码\"></a> widget.yml 放入关键 HTML 代码</h2>\n<p>只提取代码中第一个 div 元素，并对相关元素增加 windmill 类：</p>\n<figure class=\"highlight diff\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"deletion\">-&lt;div class=&quot;center&quot;&gt;</span></span><br><span class=\"line\"><span class=\"addition\">+&lt;div class=&quot;windmill&quot;&gt;</span></span><br><span class=\"line\"><span class=\"deletion\">-  &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; viewBox=&quot;615.66 311.71 271.03 207.66&quot; width=&quot;271.03&quot; height=&quot;207.66&quot;&gt;</span></span><br><span class=\"line\"><span class=\"deletion\">-   &lt;g class=&quot;clouds&quot; fill=&quot;none&quot; stroke-width=&quot;3&quot; stroke=&quot;#BED3CF&quot; stroke-linejoin=&quot;round&quot; stroke-linecap=&quot;round&quot; stroke-miterlimit=&quot;3&quot;&gt;</span></span><br><span class=\"line\"><span class=\"addition\">+ &lt;svg class=&quot;windmill&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; viewBox=&quot;615.66 311.71 271.03 207.66&quot; width=&quot;271.03&quot; height=&quot;207.66&quot;&gt;</span></span><br><span class=\"line\"><span class=\"addition\">+ &lt;g class=&quot;clouds windmill&quot; fill=&quot;none&quot; stroke-width=&quot;3&quot; stroke=&quot;#BED3CF&quot; stroke-linejoin=&quot;round&quot; stroke-linecap=&quot;round&quot; stroke-miterlimit=&quot;3&quot;&gt;</span></span><br><span class=\"line\">        ...</span><br><span class=\"line\">    &lt;/g&gt;</span><br><span class=\"line\">\t...</span><br><span class=\"line\"><span class=\"deletion\">- &lt;g class=&quot;blades&quot; fill=&quot;#FFF&quot; stroke-width=&quot;3&quot; stroke=&quot;#4A5370&quot; stroke-linejoin=&quot;round&quot; stroke-miterlimit=&quot;3&quot;&gt;</span></span><br><span class=\"line\"><span class=\"addition\">+ &lt;g class=&quot;blades windmill&quot; fill=&quot;#FFF&quot; stroke-width=&quot;3&quot; stroke=&quot;#4A5370&quot; stroke-linejoin=&quot;round&quot; stroke-miterlimit=&quot;3&quot;&gt;</span></span><br><span class=\"line\">\t...</span><br><span class=\"line\">  &lt;/g&gt;</span><br><span class=\"line\">&lt;/svg&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br></pre></td></tr></table></figure>\n<p>在 widget.yml 中是这样的：</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/image-20230530223905933.png\" alt=\"image-20230530223905933\" width=\"500px\" /></p>\n<p>注意 YAML 文件中的缩进！否则会报这样的错误：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">can not read a block mapping entry; a multiline key may not be an implicit key</span><br></pre></td></tr></table></figure>\n<h1 id=\"例-2crowd-simulator-人潮涌动模拟器\"><a class=\"markdownIt-Anchor\" href=\"#例-2crowd-simulator-人潮涌动模拟器\"></a> 例 2：Crowd Simulator 人潮涌动模拟器</h1>\n<p>逛了许多博主的网站，发现了这个卡片：<a href=\"https://codepen.io/zadvorsky/pen/xxwbBQV\">Crowd Simulator (codepen.io)</a>。想尝试一下是不是可以放到侧边栏，试了一晚上成功了。现分享步骤。</p>\n<h2 id=\"新建-html-文件\"><a class=\"markdownIt-Anchor\" href=\"#新建-html-文件\"></a> 新建 HTML 文件</h2>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>人潮汹涌 Crowd Simulator<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;stylesheet&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;/css/people.css&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">canvas</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;canvas&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">canvas</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"selector-tag\">body</span>,</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"selector-tag\">html</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">height</span>: <span class=\"number\">100%</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">background-color</span>: <span class=\"number\">#fff</span></span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"selector-tag\">body</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">margin</span>: <span class=\"number\">0</span></span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"selector-id\">#canvas</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">height</span>: <span class=\"number\">100%</span></span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"selector-tag\">body</span>::-webkit-scrollbar &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">display</span>: none</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">const</span> config = &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"attr\">src</span>:</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"string\">&quot;https://s3-us-west-2.amazonaws.com/s.cdpn.io/175711/open-peeps-sheet.png&quot;</span>,</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"attr\">rows</span>: <span class=\"number\">15</span>,</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"attr\">cols</span>: <span class=\"number\">7</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">&#125;;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"comment\">// UTILS</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">const</span> <span class=\"title function_\">randomRange</span> = (<span class=\"params\">min, max</span>) =&gt; min + <span class=\"title class_\">Math</span>.<span class=\"title function_\">random</span>() * (max - min);</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">const</span> <span class=\"title function_\">randomIndex</span> = (<span class=\"params\">array</span>) =&gt; <span class=\"title function_\">randomRange</span>(<span class=\"number\">0</span>, array.<span class=\"property\">length</span>) | <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">const</span> <span class=\"title function_\">removeFromArray</span> = (<span class=\"params\">array, i</span>) =&gt; array.<span class=\"title function_\">splice</span>(i, <span class=\"number\">1</span>)[<span class=\"number\">0</span>];</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">const</span> <span class=\"title function_\">removeItemFromArray</span> = (<span class=\"params\">array, item</span>) =&gt;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"title function_\">removeFromArray</span>(array, array.<span class=\"title function_\">indexOf</span>(item));</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">const</span> <span class=\"title function_\">removeRandomFromArray</span> = (<span class=\"params\">array</span>) =&gt;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"title function_\">removeFromArray</span>(array, <span class=\"title function_\">randomIndex</span>(array));</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">const</span> <span class=\"title function_\">getRandomFromArray</span> = (<span class=\"params\">array</span>) =&gt; array[<span class=\"title function_\">randomIndex</span>(array) | <span class=\"number\">0</span>];</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"comment\">// TWEEN FACTORIES</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">const</span> <span class=\"title function_\">resetPeep</span> = (<span class=\"params\">&#123; stage, peep &#125;</span>) =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">const</span> direction = <span class=\"title class_\">Math</span>.<span class=\"title function_\">random</span>() &gt; <span class=\"number\">0.5</span> ? <span class=\"number\">1</span> : -<span class=\"number\">1</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"comment\">// using an ease function to skew random to lower values to help hide that peeps have no legs</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">const</span> offsetY = <span class=\"number\">100</span> - <span class=\"number\">250</span> * gsap.<span class=\"title function_\">parseEase</span>(<span class=\"string\">&quot;power2.in&quot;</span>)(<span class=\"title class_\">Math</span>.<span class=\"title function_\">random</span>());</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">const</span> startY = stage.<span class=\"property\">height</span> - peep.<span class=\"property\">height</span> + offsetY;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">let</span> startX;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">let</span> endX;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">if</span> (direction === <span class=\"number\">1</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    startX = -peep.<span class=\"property\">width</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    endX = stage.<span class=\"property\">width</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    peep.<span class=\"property\">scaleX</span> = <span class=\"number\">1</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125; <span class=\"keyword\">else</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    startX = stage.<span class=\"property\">width</span> + peep.<span class=\"property\">width</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    endX = <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    peep.<span class=\"property\">scaleX</span> = -<span class=\"number\">1</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">  peep.<span class=\"property\">x</span> = startX;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  peep.<span class=\"property\">y</span> = startY;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  peep.<span class=\"property\">anchorY</span> = startY;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">return</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    startX,</span></span><br><span class=\"line\"><span class=\"language-javascript\">    startY,</span></span><br><span class=\"line\"><span class=\"language-javascript\">    endX</span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;;</span></span><br><span class=\"line\"><span class=\"language-javascript\">&#125;;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">const</span> <span class=\"title function_\">normalWalk</span> = (<span class=\"params\">&#123; peep, props &#125;</span>) =&gt; &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">const</span> &#123; startX, startY, endX &#125; = props;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">const</span> xDuration = <span class=\"number\">10</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">const</span> yDuration = <span class=\"number\">0.25</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">const</span> tl = gsap.<span class=\"title function_\">timeline</span>();</span></span><br><span class=\"line\"><span class=\"language-javascript\">  tl.<span class=\"title function_\">timeScale</span>(<span class=\"title function_\">randomRange</span>(<span class=\"number\">0.5</span>, <span class=\"number\">1.5</span>));</span></span><br><span class=\"line\"><span class=\"language-javascript\">  tl.<span class=\"title function_\">to</span>(</span></span><br><span class=\"line\"><span class=\"language-javascript\">    peep,</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"attr\">duration</span>: xDuration,</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"attr\">x</span>: endX,</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"attr\">ease</span>: <span class=\"string\">&quot;none&quot;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;,</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"number\">0</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">  );</span></span><br><span class=\"line\"><span class=\"language-javascript\">  tl.<span class=\"title function_\">to</span>(</span></span><br><span class=\"line\"><span class=\"language-javascript\">    peep,</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"attr\">duration</span>: yDuration,</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"attr\">repeat</span>: xDuration / yDuration,</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"attr\">yoyo</span>: <span class=\"literal\">true</span>,</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"attr\">y</span>: startY - <span class=\"number\">10</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;,</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"number\">0</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">  );</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">return</span> tl;</span></span><br><span class=\"line\"><span class=\"language-javascript\">&#125;;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">const</span> walks = [normalWalk];</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"comment\">// CLASSES</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">class</span> <span class=\"title class_\">Peep</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"title function_\">constructor</span>(<span class=\"params\">&#123; image, rect &#125;</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"variable language_\">this</span>.<span class=\"property\">image</span> = image;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"variable language_\">this</span>.<span class=\"title function_\">setRect</span>(rect);</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"variable language_\">this</span>.<span class=\"property\">x</span> = <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"variable language_\">this</span>.<span class=\"property\">y</span> = <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"variable language_\">this</span>.<span class=\"property\">anchorY</span> = <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"variable language_\">this</span>.<span class=\"property\">scaleX</span> = <span class=\"number\">1</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"variable language_\">this</span>.<span class=\"property\">walk</span> = <span class=\"literal\">null</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"title function_\">setRect</span>(<span class=\"params\">rect</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"variable language_\">this</span>.<span class=\"property\">rect</span> = rect;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"variable language_\">this</span>.<span class=\"property\">width</span> = rect[<span class=\"number\">2</span>];</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"variable language_\">this</span>.<span class=\"property\">height</span> = rect[<span class=\"number\">3</span>];</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"variable language_\">this</span>.<span class=\"property\">drawArgs</span> = [<span class=\"variable language_\">this</span>.<span class=\"property\">image</span>, ...rect, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"variable language_\">this</span>.<span class=\"property\">width</span>, <span class=\"variable language_\">this</span>.<span class=\"property\">height</span>];</span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"title function_\">render</span>(<span class=\"params\">ctx</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    ctx.<span class=\"title function_\">save</span>();</span></span><br><span class=\"line\"><span class=\"language-javascript\">    ctx.<span class=\"title function_\">translate</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">x</span>, <span class=\"variable language_\">this</span>.<span class=\"property\">y</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">    ctx.<span class=\"title function_\">scale</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">scaleX</span>, <span class=\"number\">1</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">    ctx.<span class=\"title function_\">drawImage</span>(...<span class=\"variable language_\">this</span>.<span class=\"property\">drawArgs</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">    ctx.<span class=\"title function_\">restore</span>();</span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">&#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"comment\">// MAIN</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">const</span> img_crowd = <span class=\"variable language_\">document</span>.<span class=\"title function_\">createElement</span>(<span class=\"string\">&quot;img&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">img_crowd.<span class=\"property\">onload</span> = init;</span></span><br><span class=\"line\"><span class=\"language-javascript\">img_crowd.<span class=\"property\">src</span> = config.<span class=\"property\">src</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">const</span> canvas = <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&quot;#canvas&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">const</span> ctx = canvas.<span class=\"title function_\">getContext</span>(<span class=\"string\">&quot;2d&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">const</span> stage = &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"attr\">width</span>: <span class=\"number\">0</span>,</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"attr\">height</span>: <span class=\"number\">0</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">&#125;;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">var</span> allPeeps = [];</span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">const</span> availablePeeps = [];</span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">const</span> crowd = [];</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">function</span> <span class=\"title function_\">init</span>(<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"title function_\">createPeeps</span>();</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"comment\">// resize also (re)populates the stage</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"title function_\">resize</span>();</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">  gsap.<span class=\"property\">ticker</span>.<span class=\"title function_\">add</span>(render);</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"variable language_\">window</span>.<span class=\"title function_\">addEventListener</span>(<span class=\"string\">&quot;resize&quot;</span>, resize);</span></span><br><span class=\"line\"><span class=\"language-javascript\">&#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">function</span> <span class=\"title function_\">createPeeps</span>(<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">const</span> &#123; rows, cols &#125; = config;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">const</span> &#123; <span class=\"attr\">naturalWidth</span>: width, <span class=\"attr\">naturalHeight</span>: height &#125; = img_crowd;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">const</span> total = rows * cols;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">const</span> rectWidth = width / rows;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">const</span> rectHeight = height / cols;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; total; i++) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    allPeeps.<span class=\"title function_\">push</span>(</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"keyword\">new</span> <span class=\"title class_\">Peep</span>(&#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"attr\">image</span>: img_crowd,</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"attr\">rect</span>: [</span></span><br><span class=\"line\"><span class=\"language-javascript\">          (i % rows) * rectWidth,</span></span><br><span class=\"line\"><span class=\"language-javascript\">          ((i / rows) | <span class=\"number\">0</span>) * rectHeight,</span></span><br><span class=\"line\"><span class=\"language-javascript\">          rectWidth,</span></span><br><span class=\"line\"><span class=\"language-javascript\">          rectHeight</span></span><br><span class=\"line\"><span class=\"language-javascript\">        ]</span></span><br><span class=\"line\"><span class=\"language-javascript\">      &#125;)</span></span><br><span class=\"line\"><span class=\"language-javascript\">    );</span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">&#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">function</span> <span class=\"title function_\">resize</span>(<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  stage.<span class=\"property\">width</span> = canvas.<span class=\"property\">clientWidth</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  stage.<span class=\"property\">height</span> = canvas.<span class=\"property\">clientHeight</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  canvas.<span class=\"property\">width</span> = stage.<span class=\"property\">width</span> * devicePixelRatio;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  canvas.<span class=\"property\">height</span> = stage.<span class=\"property\">height</span> * devicePixelRatio;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">  crowd.<span class=\"title function_\">forEach</span>(<span class=\"function\">(<span class=\"params\">peep</span>) =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    peep.<span class=\"property\">walk</span>.<span class=\"title function_\">kill</span>();</span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;);</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">  crowd.<span class=\"property\">length</span> = <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  availablePeeps.<span class=\"property\">length</span> = <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  availablePeeps.<span class=\"title function_\">push</span>(...allPeeps);</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"title function_\">initCrowd</span>();</span></span><br><span class=\"line\"><span class=\"language-javascript\">&#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">function</span> <span class=\"title function_\">initCrowd</span>(<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">while</span> (availablePeeps.<span class=\"property\">length</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"comment\">// setting random tween progress spreads the peeps out</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"title function_\">addPeepToCrowd</span>().<span class=\"property\">walk</span>.<span class=\"title function_\">progress</span>(<span class=\"title class_\">Math</span>.<span class=\"title function_\">random</span>());</span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">&#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">function</span> <span class=\"title function_\">addPeepToCrowd</span>(<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">const</span> peep = <span class=\"title function_\">removeRandomFromArray</span>(availablePeeps);</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">const</span> walk = <span class=\"title function_\">getRandomFromArray</span>(walks)(&#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    peep,</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"attr\">props</span>: <span class=\"title function_\">resetPeep</span>(&#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      peep,</span></span><br><span class=\"line\"><span class=\"language-javascript\">      stage</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;)</span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;).<span class=\"title function_\">eventCallback</span>(<span class=\"string\">&quot;onComplete&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"title function_\">removePeepFromCrowd</span>(peep);</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"title function_\">addPeepToCrowd</span>();</span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;);</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">  peep.<span class=\"property\">walk</span> = walk;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">  crowd.<span class=\"title function_\">push</span>(peep);</span></span><br><span class=\"line\"><span class=\"language-javascript\">  crowd.<span class=\"title function_\">sort</span>(<span class=\"function\">(<span class=\"params\">a, b</span>) =&gt;</span> a.<span class=\"property\">anchorY</span> - b.<span class=\"property\">anchorY</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"keyword\">return</span> peep;</span></span><br><span class=\"line\"><span class=\"language-javascript\">&#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">function</span> <span class=\"title function_\">removePeepFromCrowd</span>(<span class=\"params\">peep</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"title function_\">removeItemFromArray</span>(crowd, peep);</span></span><br><span class=\"line\"><span class=\"language-javascript\">  availablePeeps.<span class=\"title function_\">push</span>(peep);</span></span><br><span class=\"line\"><span class=\"language-javascript\">&#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">function</span> <span class=\"title function_\">render</span>(<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  canvas.<span class=\"property\">width</span> = canvas.<span class=\"property\">width</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  ctx.<span class=\"title function_\">save</span>();</span></span><br><span class=\"line\"><span class=\"language-javascript\">  ctx.<span class=\"title function_\">scale</span>(devicePixelRatio, devicePixelRatio);</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">  crowd.<span class=\"title function_\">forEach</span>(<span class=\"function\">(<span class=\"params\">peep</span>) =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    peep.<span class=\"title function_\">render</span>(ctx);</span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;);</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">  ctx.<span class=\"title function_\">restore</span>();</span></span><br><span class=\"line\"><span class=\"language-javascript\">&#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>这个 HTML 模板很简单：</p>\n<ul>\n<li>body 部分放 <a href=\"https://codepen.io/zadvorsky/pen/xxwbBQV\">Crowd Simulator (codepen.io)</a> 中 HTML 的内容</li>\n<li>style 部分放 CSS 内容。增加一点样式隐藏滚动条。</li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">body</span>::-webkit-scrollbar &#123;</span><br><span class=\"line\">\t<span class=\"attribute\">display</span>: none</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>js 做了写优化（我调错调试出来的）\n<ul>\n<li>引入其他 js：<code>gsap.min.js</code></li>\n<li>改了一个变量名：img-&gt;img_crowd 防冲突</li>\n</ul>\n</li>\n</ul>\n<p>将新建的 HTML 放到<strong>你博客目录 Sourse 文件夹</strong>下的合适位置。这里我单独放到 <code>DO_NOT_render</code> 文件夹下，以便后续设置 Hexo 忽略对该文件夹的渲染。注意 <code>DO_NOT_render</code> 文件夹是 <code>sourse</code> 的子文件夹。</p>\n<p>在 <code>_config.yaml</code> 中设置禁止渲染：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">skip_render:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">DO_NOT_render/people.html</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"引入-css-2\"><a class=\"markdownIt-Anchor\" href=\"#引入-css-2\"></a> 引入 CSS</h2>\n<p>Butterfly 主题配置文件 inject 以下 CSS：</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-id\">#effect_shade</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/* width:40%!important; */</span></span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">200px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">background-color</span>: <span class=\"built_in\">var</span>(--lyx-white-acrylic1)<span class=\"meta\">!important</span>;</span><br><span class=\"line\">    <span class=\"attribute\">border-radius</span>: <span class=\"number\">8px</span>;</span><br><span class=\"line\">    <span class=\"comment\">/* margin-right: 10px !important; */</span></span><br><span class=\"line\">    <span class=\"attribute\">font-family</span>: PingFang,微软雅黑,HYTMR,SimSun;</span><br><span class=\"line\">    <span class=\"attribute\">background-size</span>:cover;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>: <span class=\"number\">#00000000</span>;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>:<span class=\"number\">40px</span>; <span class=\"comment\">/*觉得小可以开大一点*/</span></span><br><span class=\"line\">    <span class=\"attribute\">position</span>: relative;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-id\">#effect_shade-banner</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>:<span class=\"number\">100%</span><span class=\"meta\">!important</span>;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>:<span class=\"number\">100%</span><span class=\"meta\">!important</span>;</span><br><span class=\"line\">    <span class=\"attribute\">border-radius</span>:<span class=\"number\">8px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-id\">#effect_shade-hover</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">position</span>:absolute;</span><br><span class=\"line\">    <span class=\"attribute\">right</span>:<span class=\"number\">0%</span>;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>:<span class=\"number\">100%</span><span class=\"meta\">!important</span>;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>:<span class=\"built_in\">var</span>(--lyx-<span class=\"number\">0</span>);</span><br><span class=\"line\">    <span class=\"attribute\">border-radius</span>: <span class=\"number\">8px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">padding-left</span>: <span class=\"number\">5%</span>;</span><br><span class=\"line\">    <span class=\"attribute\">padding-top</span>: <span class=\"number\">5%</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-id\">#effect_shade-hover</span><span class=\"selector-pseudo\">:hover</span>&#123;</span><br><span class=\"line\">   <span class=\"attribute\">color</span>:<span class=\"number\">#ffffff</span>;</span><br><span class=\"line\">   <span class=\"attribute\">background-color</span>: <span class=\"number\">#669900dd</span>;</span><br><span class=\"line\">   backdrop-<span class=\"attribute\">filter</span>: <span class=\"built_in\">blur</span>(<span class=\"number\">10px</span>) <span class=\"built_in\">saturate</span>(<span class=\"number\">180%</span>);</span><br><span class=\"line\">   -webkit-backdrop-<span class=\"attribute\">filter</span>: <span class=\"built_in\">blur</span>(<span class=\"number\">10px</span>) <span class=\"built_in\">saturate</span>(<span class=\"number\">180%</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* 这是为了无缝侧边栏 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.seamless-card</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">padding</span>: <span class=\"number\">0px</span><span class=\"meta\">!important</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.seamless-card</span> <span class=\"selector-class\">.item-headline</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">padding-bottom</span>: <span class=\"number\">0px</span><span class=\"meta\">!important</span>;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">0px</span><span class=\"meta\">!important</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>从上面的 CSS 中注意到：</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* 这是为了无缝侧边栏 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.seamless-card</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">padding</span>: <span class=\"number\">0px</span><span class=\"meta\">!important</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.seamless-card</span> <span class=\"selector-class\">.item-headline</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">padding-bottom</span>: <span class=\"number\">0px</span><span class=\"meta\">!important</span>;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">0px</span><span class=\"meta\">!important</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>这是为了覆盖 Butterfly 主题侧边栏样式，实现对目标侧边栏卡片进行调整，达到无缝的效果。这部分也可以独立出一个 css 样式文件出来。</p>\n<h2 id=\"自定义侧边栏-widgetyml\"><a class=\"markdownIt-Anchor\" href=\"#自定义侧边栏-widgetyml\"></a> 自定义侧边栏 widget.yml</h2>\n\n<div class=\"callout\" data-callout=\"hint\">\n<div class=\"callout-title\">\n<div class=\"callout-title-icon\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-flame\"><path d=\"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z\"/></svg>\n</div>\n<div class=\"callout-title-inner\">再次提醒</div>\n</div>\n<div class=\"callout-content\"><p>关于自定义侧边栏（widget.yml）信息详看 Butterfly 主题官方文档 <a href=\"https://butterfly.js.org/posts/ea33ab97/#%E6%A0%BC%E5%BC%8F\">自定義側邊欄 | Butterfly</a></p>\n</div></div><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">top:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">class_name:</span> <span class=\"string\">seamless-card</span></span><br><span class=\"line\">    <span class=\"attr\">id_name:</span></span><br><span class=\"line\">    <span class=\"attr\">name:</span></span><br><span class=\"line\">    <span class=\"attr\">icon:</span></span><br><span class=\"line\">    <span class=\"attr\">order:</span></span><br><span class=\"line\">    <span class=\"attr\">html:</span> <span class=\"string\">|</span></span><br><span class=\"line\"><span class=\"string\">      &lt;div id=&quot;effect_shade&quot;&gt;</span></span><br><span class=\"line\"><span class=\"string\">      &lt;iframe id=&quot;effect_shade-banner&quot; src=&quot;/DO_NOT_render/people.html&quot; frameborder=&quot;no&quot;&gt;&lt;/iframe&gt;</span></span><br><span class=\"line\"><span class=\"string\">      &lt;a id=&quot;effect_shade-hover&quot; style=&quot;width:100%;height:auto;&quot; href=&quot;javascript:randomPost()&quot;&gt;</span></span><br><span class=\"line\"><span class=\"string\">          &lt;span&gt;&amp;nbsp&lt;/span&gt;&lt;i class=&quot;fa fa-paper-plane&quot;&gt;&lt;/i&gt;</span></span><br><span class=\"line\"><span class=\"string\">        &lt;div&gt;&amp;nbsp随便逛逛→&lt;/div&gt;&lt;/a&gt;</span></span><br><span class=\"line\"><span class=\"string\">      &lt;/div&gt;</span></span><br></pre></td></tr></table></figure>\n<p><code>seamless-card</code> 呼应上文的无缝效果。<strong>无边框的关键就在于这</strong>！</p>\n<p>注意到，</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;random-hover&quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;width:100%;height:auto;&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;javascript:randomPost()&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>中的 js 函数为之前写的随机跳转函数 <sup class=\"footnote-ref\"><a href=\"#fn1\" id=\"fnref1\">[1]</a></sup>，你可以执行你想要的函数。</p>\n<p>从这个例子中，我们学到，HTML 是实现画面内容，CSS 是实现鼠标悬停动效，widget.yaml 可以配置侧边栏效果。以这种方式我们很快就能做出第二个例子。</p>\n<h1 id=\"例-3car-小汽车\"><a class=\"markdownIt-Anchor\" href=\"#例-3car-小汽车\"></a> 例 3：Car 小汽车</h1>\n<p>项目：<a href=\"https://codepen.io/abxlfazl/pen/NWrOBzg\">car (codepen.io)</a></p>\n<p>这个项目里只有 css 代码，那这个页面就简单了。新建 HTML 放入 <code>DO_NOT_render</code> 文件夹。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;zh&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>小车<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">\t<span class=\"comment\">// 这里放项目的CSS</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>widget.yml 几乎不用变：</p>\n<figure class=\"highlight diff\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> - class_name: seamless-card</span><br><span class=\"line\">    id_name:</span><br><span class=\"line\">    name:</span><br><span class=\"line\">    icon:</span><br><span class=\"line\">    order:</span><br><span class=\"line\">    html: |</span><br><span class=\"line\">      &lt;div id=&quot;effect_shade&quot;&gt;</span><br><span class=\"line\"><span class=\"deletion\">-     &lt;iframe id=&quot;effect_shade-banner&quot; src=&quot;/DO_NOT_render/people.html&quot; frameborder=&quot;no&quot;&gt;&lt;/iframe&gt;</span></span><br><span class=\"line\"><span class=\"addition\">+     &lt;iframe id=&quot;effect_shade-banner&quot; src=&quot;/DO_NOT_render/car/car.html&quot; frameborder=&quot;no&quot;&gt;&lt;/iframe&gt;</span></span><br><span class=\"line\">      &lt;a id=&quot;effect_shade-hover&quot; style=&quot;width:100%;height:auto;&quot; href=&quot;javascript:randomPost()&quot;&gt;</span><br><span class=\"line\">          &lt;span&gt;&amp;nbsp&lt;/span&gt;&lt;i class=&quot;fa fa-paper-plane&quot;&gt;&lt;/i&gt;</span><br><span class=\"line\">        &lt;div&gt;&amp;nbsp随便逛逛→&lt;/div&gt;&lt;/a&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br></pre></td></tr></table></figure>\n<p>就 OK 了。</p>\n<h1 id=\"其他侧边栏定制文章\"><a class=\"markdownIt-Anchor\" href=\"#其他侧边栏定制文章\"></a> 其他侧边栏定制文章</h1>\n<p><a class=\"uuanqin-bilink\" target=\"_blank\" href=\"/p/f6c0daf3/\"><span class=\"yukari\">站内文章</span>Butterfly 侧边栏实现 Obsidian 关系图谱</a></p>\n<h1 id=\"本文参考\"><a class=\"markdownIt-Anchor\" href=\"#本文参考\"></a> 本文参考</h1>\n<ul>\n<li><a href=\"https://yisous.xyz/posts/bd7ef112/\">Hexo butterfly 首页随便逛逛 banner 教程 | Ariasaka の小窝 (yisous.xyz)</a></li>\n<li><a href=\"https://codebeautify.org/pug-to-html-converter\">PUG to HTML Converter Online tool (codebeautify.org)</a></li>\n<li><a href=\"https://blog.zhheo.com/p/8148ca95.html\">Hexo 魔改：Codepen 项目组件移植教程，将 Codepen 项目移植到博客 | 张洪 Heo (zhheo.com)</a></li>\n</ul>\n<hr class=\"footnotes-sep\" />\n<section class=\"footnotes\">\n<ol class=\"footnotes-list\">\n<li id=\"fn1\" class=\"footnote-item\"><p>随机访问一篇文章：<a href=\"https://blog.leonus.cn/2022/randomPost.html\">随机访问一篇文章的实现 | Leonus</a> <a href=\"#fnref1\" class=\"footnote-backref\">↩︎</a></p>\n</li>\n</ol>\n</section>\n","raw":"---\ntitle: Butterfly 不改动主题源码实现自定义侧边栏\ntags:\n  - HTML\n  - CSS\n  - Butterfly\n  - Pug\n  - CodePen\n  - YAML\ncover: 'https://cdn.gallery.uuanqin.top/img/crowdcover46546.png'\ndescription: 侧边栏定制举一反三，手把手教你实现自己的侧边栏\ncategories:\n  - 博客站点维护\n  - Hexo\nabbrlink: 568ad08\ndate: 2023-06-01 00:17:21\ntop_img:\n---\n\n> [!success] 本文不涉及对主题源代码的修改\n\n> [!success] 本文已收录至 [Butterfly 主题美化教程](https://butterfly.zhheo.com/)\n\n侧边栏是 Butterfly 主题的一大功能亮点，在 Butterfly 3.8.0 版本前是不支持自定义侧边栏的，只能通过魔改实现。这也因此诞生了许多优质的魔改教程，效果也很惊艳，比如 [Heo](https://blog.zhheo.com/) 收录的：[侧边栏 | Butterfly 主题美化教程 (zhheo.com)](https://butterfly.zhheo.com/docs/aside.html)。\n\nButterfly 3.8.0 以后，主题支持自定义侧边栏，这也使我们可以通过不修改主题源码的方式自定义想要的侧边栏。（主题官方文档参考：[自定義側邊欄 | Butterfly](https://butterfly.js.org/posts/ea33ab97/)）\n\n**授人以鱼不如授人以渔**。本篇文章将以这个特性为基础，结合 CodePen 中的项目，以三个例子展示定制侧边栏过程：\n\n- 小风车：这是对主题官方文档示例的举一反三，提供与 CodePen 项目结合的思路。\n  ![image-20230530224311630|223](https://cdn.gallery.uuanqin.top/img/image-20230530224311630.png)\n- Crowd Simulator 人潮涌动模拟器：引入 CSS 文件去掉侧边栏容器的边框，嵌入 iframe 页面\n  ![crowdsimudemo.gif](https://cdn.gallery.uuanqin.top/img/crowdsimudemo.gif)\n- Car 小汽车：上例的举一反三\n  ![cardemo-min.gif|275](https://cdn.gallery.uuanqin.top/img/cardemo-min.gif)\n\n> 本人前端水平有限，欢迎各位博主互相交流！\n\n# 例 1：小风车\n\n首先，在 [Trending - CodePen](https://codepen.io/trending) 找到自己想要的小组件，以小风车为例 [Windmill (codepen.io)](https://codepen.io/FilipVitas/pen/zWWmbo)，进入代码编辑界面，里面有 HTML 代码和 CSS 代码。\n\n## 引入 CSS\n\n点击代码框右上小箭头，编译 css 文件：\n\n![image-20230530222130344|500](https://cdn.gallery.uuanqin.top/img/image-20230530222130344.png)\n\n复制里面的的代码到新文件 windmill.css。并将该 CSS 文件引入主题中。Butterfly 主题的方法为在主题配置文件的 inject 部分引入 CSS，如：\n\n```yaml\ninject:\n  head:\n    - <link rel=\"stylesheet\" href=\"your css\">\n  bottom:\n    - <script src=\"your js\"></script>\n```\n\n删除不必要代码（否则导致博客异常）并稍微修改一下类选择器（以防万一）：\n\n```diff\n- *,\n- *:before,\n- *:after {\n-   ...\n- }\n- body {\n-   ...\n- }\n- .inspiration {\n- \t...\n- }\n- .center {\n- ...\n- }\n- @media screen and (max-height: 500px) {\n- ...\n- }\n+ /* 这是为了让svg居中 */\n+ .windmill {\n+     display: flex;\n+     align-items: center;\n+     justify-content: center;\n+ }\n\n+ /* 以下关于svg类选择器加上.windmill */\n- svg {\n+ svg.windmill {\n  overflow: visible;\n}\n- svg .blades {\n+ svg .blades.windmill {\n\t...\n}\n- svg .clouds path:nth-child(1) {\n+ svg .clouds.windmill path:nth-child(1) {\n\t...\n}\n- svg .clouds path:nth-child(2) {\n+ svg .clouds.windmill path:nth-child(2) {\n\t...\n}\n...\n```\n\n## widget.yml 放入关键 HTML 代码\n\n只提取代码中第一个 div 元素，并对相关元素增加 windmill 类：\n\n```diff\n-<div class=\"center\">\n+<div class=\"windmill\">\n-  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"615.66 311.71 271.03 207.66\" width=\"271.03\" height=\"207.66\">\n-   <g class=\"clouds\" fill=\"none\" stroke-width=\"3\" stroke=\"#BED3CF\" stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"3\">\n+ <svg class=\"windmill\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"615.66 311.71 271.03 207.66\" width=\"271.03\" height=\"207.66\">\n+ <g class=\"clouds windmill\" fill=\"none\" stroke-width=\"3\" stroke=\"#BED3CF\" stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"3\">\n        ...\n    </g>\n\t...\n- <g class=\"blades\" fill=\"#FFF\" stroke-width=\"3\" stroke=\"#4A5370\" stroke-linejoin=\"round\" stroke-miterlimit=\"3\">\n+ <g class=\"blades windmill\" fill=\"#FFF\" stroke-width=\"3\" stroke=\"#4A5370\" stroke-linejoin=\"round\" stroke-miterlimit=\"3\">\n\t...\n  </g>\n</svg>\n</div>\n```\n\n在 widget.yml 中是这样的：\n\n![image-20230530223905933|500](https://cdn.gallery.uuanqin.top/img/image-20230530223905933.png)\n\n注意 YAML 文件中的缩进！否则会报这样的错误：\n\n```\ncan not read a block mapping entry; a multiline key may not be an implicit key\n```\n\n# 例 2：Crowd Simulator 人潮涌动模拟器\n\n逛了许多博主的网站，发现了这个卡片：[Crowd Simulator (codepen.io)](https://codepen.io/zadvorsky/pen/xxwbBQV)。想尝试一下是不是可以放到侧边栏，试了一晚上成功了。现分享步骤。\n\n## 新建 HTML 文件\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <title>人潮汹涌 Crowd Simulator</title>\n    <link rel=\"stylesheet\" href=\"/css/people.css\">\n</head>\n\n<body><canvas id=\"canvas\"></canvas>\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js\"></script>\n</body>\n\n<style>\n    body,\n    html {\n        height: 100%;\n        background-color: #fff\n    }\n\n    body {\n        margin: 0\n    }\n\n    #canvas {\n        width: 100%;\n        height: 100%\n    }\n\n    body::-webkit-scrollbar {\n        display: none\n    }\n\n</style>\n\n<script>\n\nconst config = {\n  src:\n    \"https://s3-us-west-2.amazonaws.com/s.cdpn.io/175711/open-peeps-sheet.png\",\n  rows: 15,\n  cols: 7\n};\n\n// UTILS\n\nconst randomRange = (min, max) => min + Math.random() * (max - min);\n\nconst randomIndex = (array) => randomRange(0, array.length) | 0;\n\nconst removeFromArray = (array, i) => array.splice(i, 1)[0];\n\nconst removeItemFromArray = (array, item) =>\n  removeFromArray(array, array.indexOf(item));\n\nconst removeRandomFromArray = (array) =>\n  removeFromArray(array, randomIndex(array));\n\nconst getRandomFromArray = (array) => array[randomIndex(array) | 0];\n\n// TWEEN FACTORIES\n\nconst resetPeep = ({ stage, peep }) => {\n  const direction = Math.random() > 0.5 ? 1 : -1;\n  // using an ease function to skew random to lower values to help hide that peeps have no legs\n  const offsetY = 100 - 250 * gsap.parseEase(\"power2.in\")(Math.random());\n  const startY = stage.height - peep.height + offsetY;\n  let startX;\n  let endX;\n\n  if (direction === 1) {\n    startX = -peep.width;\n    endX = stage.width;\n    peep.scaleX = 1;\n  } else {\n    startX = stage.width + peep.width;\n    endX = 0;\n    peep.scaleX = -1;\n  }\n\n  peep.x = startX;\n  peep.y = startY;\n  peep.anchorY = startY;\n\n  return {\n    startX,\n    startY,\n    endX\n  };\n};\n\nconst normalWalk = ({ peep, props }) => {\n  const { startX, startY, endX } = props;\n\n  const xDuration = 10;\n  const yDuration = 0.25;\n\n  const tl = gsap.timeline();\n  tl.timeScale(randomRange(0.5, 1.5));\n  tl.to(\n    peep,\n    {\n      duration: xDuration,\n      x: endX,\n      ease: \"none\"\n    },\n    0\n  );\n  tl.to(\n    peep,\n    {\n      duration: yDuration,\n      repeat: xDuration / yDuration,\n      yoyo: true,\n      y: startY - 10\n    },\n    0\n  );\n\n  return tl;\n};\n\nconst walks = [normalWalk];\n\n// CLASSES\n\nclass Peep {\n  constructor({ image, rect }) {\n    this.image = image;\n    this.setRect(rect);\n\n    this.x = 0;\n    this.y = 0;\n    this.anchorY = 0;\n    this.scaleX = 1;\n    this.walk = null;\n  }\n\n  setRect(rect) {\n    this.rect = rect;\n    this.width = rect[2];\n    this.height = rect[3];\n\n    this.drawArgs = [this.image, ...rect, 0, 0, this.width, this.height];\n  }\n\n  render(ctx) {\n    ctx.save();\n    ctx.translate(this.x, this.y);\n    ctx.scale(this.scaleX, 1);\n    ctx.drawImage(...this.drawArgs);\n    ctx.restore();\n  }\n}\n\n// MAIN\n\nconst img_crowd = document.createElement(\"img\");\nimg_crowd.onload = init;\nimg_crowd.src = config.src;\n\nconst canvas = document.querySelector(\"#canvas\");\nconst ctx = canvas.getContext(\"2d\");\n\nconst stage = {\n  width: 0,\n  height: 0\n};\n\nvar allPeeps = [];\nconst availablePeeps = [];\nconst crowd = [];\n\nfunction init() {\n  createPeeps();\n\n  // resize also (re)populates the stage\n  resize();\n\n  gsap.ticker.add(render);\n  window.addEventListener(\"resize\", resize);\n}\n\nfunction createPeeps() {\n  const { rows, cols } = config;\n  const { naturalWidth: width, naturalHeight: height } = img_crowd;\n  const total = rows * cols;\n  const rectWidth = width / rows;\n  const rectHeight = height / cols;\n\n  for (let i = 0; i < total; i++) {\n    allPeeps.push(\n      new Peep({\n        image: img_crowd,\n        rect: [\n          (i % rows) * rectWidth,\n          ((i / rows) | 0) * rectHeight,\n          rectWidth,\n          rectHeight\n        ]\n      })\n    );\n  }\n}\n\nfunction resize() {\n  stage.width = canvas.clientWidth;\n  stage.height = canvas.clientHeight;\n  canvas.width = stage.width * devicePixelRatio;\n  canvas.height = stage.height * devicePixelRatio;\n\n  crowd.forEach((peep) => {\n    peep.walk.kill();\n  });\n\n  crowd.length = 0;\n  availablePeeps.length = 0;\n  availablePeeps.push(...allPeeps);\n\n  initCrowd();\n}\n\nfunction initCrowd() {\n  while (availablePeeps.length) {\n    // setting random tween progress spreads the peeps out\n    addPeepToCrowd().walk.progress(Math.random());\n  }\n}\n\nfunction addPeepToCrowd() {\n  const peep = removeRandomFromArray(availablePeeps);\n  const walk = getRandomFromArray(walks)({\n    peep,\n    props: resetPeep({\n      peep,\n      stage\n    })\n  }).eventCallback(\"onComplete\", () => {\n    removePeepFromCrowd(peep);\n    addPeepToCrowd();\n  });\n\n  peep.walk = walk;\n\n  crowd.push(peep);\n  crowd.sort((a, b) => a.anchorY - b.anchorY);\n\n  return peep;\n}\n\nfunction removePeepFromCrowd(peep) {\n  removeItemFromArray(crowd, peep);\n  availablePeeps.push(peep);\n}\n\nfunction render() {\n  canvas.width = canvas.width;\n  ctx.save();\n  ctx.scale(devicePixelRatio, devicePixelRatio);\n\n  crowd.forEach((peep) => {\n    peep.render(ctx);\n  });\n\n  ctx.restore();\n}\n\n</script>\n\n</html>\n\n```\n\n这个 HTML 模板很简单：\n\n- body 部分放 [Crowd Simulator (codepen.io)](https://codepen.io/zadvorsky/pen/xxwbBQV) 中 HTML 的内容\n- style 部分放 CSS 内容。增加一点样式隐藏滚动条。\n\n```css\nbody::-webkit-scrollbar {\n\tdisplay: none\n}\n```\n\n- js 做了写优化（我调错调试出来的）\n  - 引入其他 js：`gsap.min.js`\n  - 改了一个变量名：img->img_crowd 防冲突\n\n将新建的 HTML 放到**你博客目录 Sourse 文件夹**下的合适位置。这里我单独放到 `DO_NOT_render` 文件夹下，以便后续设置 Hexo 忽略对该文件夹的渲染。注意 `DO_NOT_render` 文件夹是 `sourse` 的子文件夹。\n\n在 `_config.yaml` 中设置禁止渲染：\n\n```yaml\nskip_render:\n  - DO_NOT_render/people.html\n```\n\n## 引入 CSS\n\nButterfly 主题配置文件 inject 以下 CSS：\n\n```css\n#effect_shade{\n    /* width:40%!important; */\n    height: 200px;\n    background-color: var(--lyx-white-acrylic1)!important;\n    border-radius: 8px;\n    /* margin-right: 10px !important; */\n    font-family: PingFang,微软雅黑,HYTMR,SimSun;\n    background-size:cover;\n    color: #00000000;\n    font-size:40px; /*觉得小可以开大一点*/\n    position: relative;\n}\n#effect_shade-banner{\n    width:100%!important;\n    height:100%!important;\n    border-radius:8px;\n}\n#effect_shade-hover{\n    position:absolute;\n    right:0%;\n    height:100%!important;\n    color:var(--lyx-0);\n    border-radius: 8px;\n    padding-left: 5%;\n    padding-top: 5%;\n}\n#effect_shade-hover:hover{\n   color:#ffffff;\n   background-color: #669900dd;\n   backdrop-filter: blur(10px) saturate(180%);\n   -webkit-backdrop-filter: blur(10px) saturate(180%);\n}\n\n/* 这是为了无缝侧边栏 */\n.seamless-card{\n    padding: 0px!important;\n}\n.seamless-card .item-headline{\n    padding-bottom: 0px!important;\n    height: 0px!important;\n}\n\n```\n\n从上面的 CSS 中注意到：\n\n```CSS\n/* 这是为了无缝侧边栏 */\n.seamless-card{\n    padding: 0px!important;\n}\n.seamless-card .item-headline{\n    padding-bottom: 0px!important;\n    height: 0px!important;\n}\n```\n\n这是为了覆盖 Butterfly 主题侧边栏样式，实现对目标侧边栏卡片进行调整，达到无缝的效果。这部分也可以独立出一个 css 样式文件出来。\n\n## 自定义侧边栏 widget.yml\n\n> [!hint] 再次提醒\n> 关于自定义侧边栏（widget.yml）信息详看 Butterfly 主题官方文档 [自定義側邊欄 | Butterfly](https://butterfly.js.org/posts/ea33ab97/#格式)\n\n```yaml\ntop:\n  - class_name: seamless-card\n    id_name:\n    name:\n    icon:\n    order:\n    html: |\n      <div id=\"effect_shade\">\n      <iframe id=\"effect_shade-banner\" src=\"/DO_NOT_render/people.html\" frameborder=\"no\"></iframe>\n      <a id=\"effect_shade-hover\" style=\"width:100%;height:auto;\" href=\"javascript:randomPost()\">\n          <span>&nbsp</span><i class=\"fa fa-paper-plane\"></i>\n        <div>&nbsp随便逛逛→</div></a>\n      </div>\n```\n\n`seamless-card` 呼应上文的无缝效果。**无边框的关键就在于这**！\n\n注意到，\n\n```html\n<a id=\"random-hover\" style=\"width:100%;height:auto;\" href=\"javascript:randomPost()\">\n```\n\n中的 js 函数为之前写的随机跳转函数 [^ram]，你可以执行你想要的函数。\n\n从这个例子中，我们学到，HTML 是实现画面内容，CSS 是实现鼠标悬停动效，widget.yaml 可以配置侧边栏效果。以这种方式我们很快就能做出第二个例子。\n\n[^ram]: 随机访问一篇文章：[随机访问一篇文章的实现 | Leonus](https://blog.leonus.cn/2022/randomPost.html)\n\n# 例 3：Car 小汽车\n\n项目：[car (codepen.io)](https://codepen.io/abxlfazl/pen/NWrOBzg)\n\n这个项目里只有 css 代码，那这个页面就简单了。新建 HTML 放入 `DO_NOT_render` 文件夹。\n\n```html\n<!DOCTYPE html>\n\n<html lang=\"zh\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>小车</title>\n</head>\n<script>\n\t// 这里放项目的CSS\n</script>\n</html>\n```\n\nwidget.yml 几乎不用变：\n\n```diff\n - class_name: seamless-card\n    id_name:\n    name:\n    icon:\n    order:\n    html: |\n      <div id=\"effect_shade\">\n-     <iframe id=\"effect_shade-banner\" src=\"/DO_NOT_render/people.html\" frameborder=\"no\"></iframe>\n+     <iframe id=\"effect_shade-banner\" src=\"/DO_NOT_render/car/car.html\" frameborder=\"no\"></iframe>\n      <a id=\"effect_shade-hover\" style=\"width:100%;height:auto;\" href=\"javascript:randomPost()\">\n          <span>&nbsp</span><i class=\"fa fa-paper-plane\"></i>\n        <div>&nbsp随便逛逛→</div></a>\n      </div>\n```\n\n就 OK 了。\n\n# 其他侧边栏定制文章\n\n[[Butterfly 侧边栏实现 Obsidian 关系图谱]]\n\n# 本文参考\n\n- [Hexo butterfly 首页随便逛逛 banner 教程 | Ariasaka の小窝 (yisous.xyz)](https://yisous.xyz/posts/bd7ef112/)\n- [PUG to HTML Converter Online tool (codebeautify.org)](https://codebeautify.org/pug-to-html-converter)\n- [Hexo 魔改：Codepen 项目组件移植教程，将 Codepen 项目移植到博客 | 张洪 Heo (zhheo.com)](https://blog.zhheo.com/p/8148ca95.html)\n","categories":[{"name":"博客站点维护","api":"api/categories/博客站点维护.json"},{"name":"Hexo","api":"api/categories/博客站点维护/Hexo.json"}],"tags":[{"name":"HTML","api":"api/tags/HTML.json"},{"name":"CSS","api":"api/tags/CSS.json"},{"name":"Butterfly","api":"api/tags/Butterfly.json"},{"name":"Pug","api":"api/tags/Pug.json"},{"name":"CodePen","api":"api/tags/CodePen.json"},{"name":"YAML","api":"api/tags/YAML.json"}]},"api":"api/posts/p/568ad08.json"}