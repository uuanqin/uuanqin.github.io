{"data":{"title":"Spring AI 中使用 PGVector 实现向量存储","slug":"技术学习/Spring AI 中使用 PGVector 实现向量存储","description":"RAG 环节中的向量数据库的创建与使用","date":"2026-02-23T18:43:44.000Z","updated":"2026-02-23T19:19:43.474Z","language":"zh-CN","comments":true,"url":"p/f3908a2e/","cover":"https://cdn.gallery.uuanqin.top/img/202602240313353.webp","images":[],"content":"<p>向量数据库是一种专门类型的数据库，它的查询和传统的关系型数据库有所不同。向量数据库执行的是相似性搜索而非精确匹配，当我们给定一个向量作为查询时，向量数据库会返回与查询向量「相似」的向量。</p>\n<p><a href=\"https://github.com/pgvector/pgvector\">PGvector</a> 是 PostgreSQL 的一个开源扩展，它能够存储和搜索由嵌入向量。</p>\n<p>本文将介绍使用 Spring AI 框架开发智能体应用时，在 RAG 步骤中的向量数据库搭建和使用环节的操作过程。</p>\n<h1 id=\"使用-postgresql-的-pgvector-构建向量存储\"><a class=\"markdownIt-Anchor\" href=\"#使用-postgresql-的-pgvector-构建向量存储\"></a> 使用 PostgreSQL 的 PGVector 构建向量存储</h1>\n<h2 id=\"linux-服务器中手动安装-postgresql-以及插件\"><a class=\"markdownIt-Anchor\" href=\"#linux-服务器中手动安装-postgresql-以及插件\"></a> Linux 服务器中手动安装 PostgreSQL 以及插件</h2>\n<h3 id=\"postgresql-的安装\"><a class=\"markdownIt-Anchor\" href=\"#postgresql-的安装\"></a> PostgreSQL 的安装</h3>\n\n<div class=\"callout\" data-callout=\"note\">\n<div class=\"callout-title\">\n<div class=\"callout-title-icon\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-pencil\"><path d=\"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z\"/><path d=\"m15 5 4 4\"/></svg>\n</div>\n<div class=\"callout-title-inner\">本文使用的云服务器环境信息</div>\n</div>\n<div class=\"callout-content\"><p>Alibaba Cloud Linux 3（基于 Anolis OS 8 打造，兼容 CentOS 8 / RHEL 8 生态），x86_64.</p>\n</div></div><p>安装 PostgreSQL 18：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">安装 postgresql18-server</span> </span><br><span class=\"line\">yum install -y postgresql18-server</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">检查 PostgreSQL 版本</span></span><br><span class=\"line\">psql --version</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">初始化数据库（首次安装必做）</span></span><br><span class=\"line\">/usr/pgsql-18/bin/postgresql-18-setup initdb</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">启动服务并设置开机自启</span></span><br><span class=\"line\">systemctl enable --now postgresql-18</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">检查服务状态（显示 active(running) 即为成功）</span></span><br><span class=\"line\">systemctl status postgresql-18</span><br></pre></td></tr></table></figure>\n<p>重启 PostgreSQL：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl restart postgresql-18</span><br></pre></td></tr></table></figure>\n<p>将其添加到环境变量：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">查看 psql 所在路径</span></span><br><span class=\"line\">which psql</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">正常输出：/usr/pgsql-18/bin/psql</span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">编辑系统全局环境变量文件</span></span><br><span class=\"line\">vi /etc/profile</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">在文件末尾添加以下内容</span></span><br><span class=\"line\">export PATH=$PATH:/usr/pgsql-18/bin</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">保存退出</span></span><br><span class=\"line\">source /etc/profile</span><br></pre></td></tr></table></figure>\n<p>验证环境变量是否生效：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">psql --version</span><br><span class=\"line\">pg_ctl --version</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">输出版本信息即为配置成功，示例：</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">psql (PostgreSQL) 18.2</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">pg_ctl (PostgreSQL) 18.2</span></span><br></pre></td></tr></table></figure>\n<p>简要介绍 PostgreSQL 命令行进入和退出的方法：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">su postgres # 退出方式为 exit</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">1. 连接 PostgreSQL 数据库（默认连接 postgres 库）</span></span><br><span class=\"line\">psql</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">2. 退出数据库命令行</span></span><br><span class=\"line\">\\q</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">3. 查看数据库列表</span></span><br><span class=\"line\">psql -c &quot;\\l&quot;</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">4. 启动/停止 PostgreSQL 服务（也可 root 执行 systemctl）</span></span><br><span class=\"line\">pg_ctl start -D /var/lib/pgsql/18/data/</span><br><span class=\"line\">pg_ctl stop -D /var/lib/pgsql/18/data/</span><br></pre></td></tr></table></figure>\n<h3 id=\"pgvector-插件的安装与验证\"><a class=\"markdownIt-Anchor\" href=\"#pgvector-插件的安装与验证\"></a> PGVector 插件的安装与验证</h3>\n<p>安装 <a href=\"https://github.com/pgvector/pgvector\">PGVector</a> 插件：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo yum install pgvector_18 # 这里我选择 yum 方式安装</span><br></pre></td></tr></table></figure>\n<p>进入 PostgreSQL 交互命令行执行测试：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 创建并切换数据库</span></span><br><span class=\"line\"><span class=\"keyword\">create</span> database ai_blog_vec;</span><br><span class=\"line\">\\c ai_blog_vec</span><br><span class=\"line\"><span class=\"comment\">-- 启用该扩展程序（在您希望使用该扩展程序的每个数据库中执行此操作一次）</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> EXTENSION vector;</span><br><span class=\"line\"><span class=\"comment\">-- 创建一个具有 3 个维度的向量列</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> items (id bigserial <span class=\"keyword\">PRIMARY</span> KEY, embedding vector(<span class=\"number\">3</span>));</span><br><span class=\"line\"><span class=\"comment\">-- 插入向量</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> items (embedding) <span class=\"keyword\">VALUES</span> (<span class=\"string\">&#x27;[1,2,3]&#x27;</span>), (<span class=\"string\">&#x27;[4,5,6]&#x27;</span>);</span><br><span class=\"line\"><span class=\"comment\">-- Get the nearest neighbors by L2 distance</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"operator\">*</span> <span class=\"keyword\">FROM</span> items <span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span> embedding <span class=\"operator\">&lt;</span><span class=\"operator\">-</span><span class=\"operator\">&gt;</span> <span class=\"string\">&#x27;[3,1,2]&#x27;</span> LIMIT <span class=\"number\">5</span>;</span><br></pre></td></tr></table></figure>\n<h3 id=\"为远程连接数据库做准备\"><a class=\"markdownIt-Anchor\" href=\"#为远程连接数据库做准备\"></a> 为远程连接数据库做准备</h3>\n<p>安装完成后，PostgreSQL 的配置文件在目录 <code>/var/lib/pgsql/18/data</code> 下。一般比较常见的是修改 <code>postgresql.conf</code> 和 <code>pg_hba.conf</code> ，可以修改监听地址允许远程连接数据库、修改默认端口号、以及 IP 黑白名单限制等。</p>\n<p><code>postgresql.conf</code> 中允许远程连接：</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/202602230420685.webp\" alt=\"image.png\" width=\"450px\" /></p>\n<p>设置 postgres 的密码：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 设置 postgres 用户密码（替换为你的密码）</span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">USER</span> postgres <span class=\"keyword\">WITH</span> PASSWORD <span class=\"string\">&#x27;你的强密码&#x27;</span>;</span><br></pre></td></tr></table></figure>\n<p>重启 PostgreSQL：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">切换回 root 用户（或直接用 postgres 用户执行）</span></span><br><span class=\"line\">exit</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">重启服务</span></span><br><span class=\"line\">systemctl restart postgresql-18</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">检查服务状态（确保启动成功）</span></span><br><span class=\"line\">systemctl status postgresql-18</span><br></pre></td></tr></table></figure>\n<p>注意开放阿里云 ECS 安全组即可。</p>\n<h2 id=\"使用阿里云-serverless-数据库产品进行构建\"><a class=\"markdownIt-Anchor\" href=\"#使用阿里云-serverless-数据库产品进行构建\"></a> 使用阿里云 Serverless 数据库产品进行构建</h2>\n<p>在 <a href=\"https://www.aliyun.com/product/rds/postgresql\">官网</a> 中购买相应的 Serverless 产品：</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/202602230321955.webp\" alt=\"image.png\" /></p>\n<p>选择基础配置：</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/202602230323425.webp\" alt=\"image.png\" /></p>\n<p>进入云数据库 RDB 控制台，点击进入相应实例并创建账号：</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/202602230328777.webp\" alt=\"image.png\" /></p>\n<p>然后创建数据库：</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/202602230328141.webp\" alt=\"image.png\" /></p>\n<p>进入插件管理安装相应插件：</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/202602230331612.webp\" alt=\"image.png\" /></p>\n<p>在数据库连接中开通外网地址：</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/202602230332390.webp\" alt=\"image.png\" /></p>\n\n<div class=\"callout\" data-callout=\"hint\">\n<div class=\"callout-title\">\n<div class=\"callout-title-icon\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-flame\"><path d=\"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z\"/></svg>\n</div>\n<div class=\"callout-title-inner\">省钱小贴士</div>\n</div>\n<div class=\"callout-content\"><p>阿里云 RDB 请开启「自动启停」，这样可以<strong>减缓</strong>烧钱速度。开启后，在低频率的使用场景下，预估费用为 30 元/月左右。</p>\n</div></div><h1 id=\"使用数据库连接工具连接-postgresql\"><a class=\"markdownIt-Anchor\" href=\"#使用数据库连接工具连接-postgresql\"></a> 使用数据库连接工具连接 PostgreSQL</h1>\n<p>我们可以根据外网地址、端口号、用户名、密码、数据库这些信息，使用数据库连接工具即可进行连接。比如使用 IDEA 的数据库连接工具：</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/202602230335456.webp\" alt=\"image.png\" /></p>\n\n<div class=\"callout\" data-callout=\"note\">\n<div class=\"callout-title\">\n<div class=\"callout-title-icon\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-pencil\"><path d=\"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z\"/><path d=\"m15 5 4 4\"/></svg>\n</div>\n<div class=\"callout-title-inner\">Navicat 连接注意事项</div>\n</div>\n<div class=\"callout-content\"><p>Navicat 连接 PostgreSQL 18 需要将其升级到 Navicat 17。</p>\n</div></div><h1 id=\"spring-ai-构建向量数据库\"><a class=\"markdownIt-Anchor\" href=\"#spring-ai-构建向量数据库\"></a> Spring AI 构建向量数据库</h1>\n<p>完成好向量数据库的构建后，接下来，我们参照 Spring AI 的 <a href=\"https://docs.spring.io/spring-ai/reference/api/vectordbs/pgvector.html\">官方文档</a> 整合 PGVector。</p>\n<p>在此之前，确保远程 PostgreSQL 向量数据库已经新开有数据库，比如本文的 <code>ai_blog_vec</code>，并且启动了 PGVector 拓展。如果后续报漏装拓展错误可以自行补装（详见后续章节）。数据库里暂时不需要建立表格。</p>\n<p>Spring AI 项目中导入依赖：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.ai<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-ai-starter-vector-store-pgvector<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>在配置文件中做好以下配置：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">spring:</span></span><br><span class=\"line\">  <span class=\"attr\">datasource:</span></span><br><span class=\"line\">    <span class=\"attr\">url:</span> <span class=\"string\">jdbc:postgresql://localhost:5432/postgres</span></span><br><span class=\"line\">    <span class=\"attr\">username:</span> <span class=\"string\">postgres</span></span><br><span class=\"line\">    <span class=\"attr\">password:</span> <span class=\"string\">postgres</span></span><br><span class=\"line\">  <span class=\"attr\">ai:</span></span><br><span class=\"line\">\t<span class=\"attr\">vectorstore:</span></span><br><span class=\"line\">\t  <span class=\"attr\">pgvector:</span></span><br><span class=\"line\">\t\t<span class=\"attr\">index-type:</span> <span class=\"string\">HNSW</span></span><br><span class=\"line\">\t\t<span class=\"attr\">distance-type:</span> <span class=\"string\">COSINE_DISTANCE</span></span><br><span class=\"line\">\t\t<span class=\"comment\"># dimensions: 1536 # 维度数据请确认好再调整</span></span><br><span class=\"line\">\t\t<span class=\"attr\">max-document-batch-size:</span> <span class=\"number\">10000</span> <span class=\"comment\"># Optional: Maximum number of documents per batch</span></span><br></pre></td></tr></table></figure>\n<p>Java 中可以编写一段简单的测试代码：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Autowired</span> </span><br><span class=\"line\">VectorStore vectorStore;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ...</span></span><br><span class=\"line\"></span><br><span class=\"line\">List&lt;Document&gt; documents = List.of(</span><br><span class=\"line\">    <span class=\"keyword\">new</span> <span class=\"title class_\">Document</span>(<span class=\"string\">&quot;Spring AI rocks!! Spring AI rocks!! Spring AI rocks!! Spring AI rocks!! Spring AI rocks!!&quot;</span>, Map.of(<span class=\"string\">&quot;meta1&quot;</span>, <span class=\"string\">&quot;meta1&quot;</span>)),</span><br><span class=\"line\">    <span class=\"keyword\">new</span> <span class=\"title class_\">Document</span>(<span class=\"string\">&quot;The World is Big and Salvation Lurks Around the Corner&quot;</span>),</span><br><span class=\"line\">    <span class=\"keyword\">new</span> <span class=\"title class_\">Document</span>(<span class=\"string\">&quot;You walk forward facing the past and you turn back toward the future.&quot;</span>, Map.of(<span class=\"string\">&quot;meta2&quot;</span>, <span class=\"string\">&quot;meta2&quot;</span>)));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Add the documents to PGVector</span></span><br><span class=\"line\">vectorStore.add(documents);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Retrieve documents similar to a query</span></span><br><span class=\"line\">List&lt;Document&gt; results = <span class=\"built_in\">this</span>.vectorStore.similaritySearch(SearchRequest.builder().query(<span class=\"string\">&quot;Spring&quot;</span>).topK(<span class=\"number\">5</span>).build());</span><br></pre></td></tr></table></figure>\n<p>因为向量的制作是需要使用 Embedding 模型制作向量的，如果你的项目中引入了许多同名的 <code>EmbeddingModel</code> 的 Bean，用上面的方式可能会报错。这时我们可以换另外一种方式初始化 <code>VectorStore</code>。</p>\n<p>首先引入依赖：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter-jdbc<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.postgresql<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>postgresql<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>runtime<span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span>  </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.ai<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span>  </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-ai-pgvector-store<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span>  </span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>然后编写配置类自己构造 <code>VectorStore</code>：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Configuration</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">PgVectorVectorStoreConfig</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Bean</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> VectorStore <span class=\"title function_\">pgVectorVectorStore</span><span class=\"params\">(JdbcTemplate jdbcTemplate, EmbeddingModel dashscopeEmbeddingModel)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">VectorStore</span> <span class=\"variable\">vectorStore</span> <span class=\"operator\">=</span> PgVectorStore.builder(jdbcTemplate, dashscopeEmbeddingModel)</span><br><span class=\"line\">                .dimensions(<span class=\"number\">1536</span>)                    <span class=\"comment\">// 不要盲目设置</span></span><br><span class=\"line\">                .distanceType(COSINE_DISTANCE)       <span class=\"comment\">// Optional: defaults to COSINE_DISTANCE</span></span><br><span class=\"line\">                .indexType(HNSW)                     <span class=\"comment\">// Optional: defaults to HNSW</span></span><br><span class=\"line\">                .initializeSchema(<span class=\"literal\">true</span>)              <span class=\"comment\">// Optional: defaults to false</span></span><br><span class=\"line\">                .schemaName(<span class=\"string\">&quot;public&quot;</span>)                <span class=\"comment\">// Optional: defaults to &quot;public&quot;</span></span><br><span class=\"line\">                .vectorTableName(<span class=\"string\">&quot;vector_store&quot;</span>)     <span class=\"comment\">// Optional: defaults to &quot;vector_store&quot;</span></span><br><span class=\"line\">                .maxDocumentBatchSize(<span class=\"number\">10000</span>)         <span class=\"comment\">// Optional: defaults to 10000</span></span><br><span class=\"line\">                .build();</span><br><span class=\"line\">        <span class=\"keyword\">return</span> vectorStore;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>然后我们就可以使用 <code>pgVectorVectorStore</code> 这个 Bean 了。</p>\n<h1 id=\"错误解决\"><a class=\"markdownIt-Anchor\" href=\"#错误解决\"></a> 错误解决</h1>\n<h2 id=\"向量维度数设置错误\"><a class=\"markdownIt-Anchor\" href=\"#向量维度数设置错误\"></a> 向量维度数设置错误</h2>\n<p>如果在后续的运行中，出现向量维度数指定错误的情况时，我们需要清空表格，调整好表的结构在执行一次向量数据库的构建。</p>\n<h2 id=\"数据库拓展缺失错误\"><a class=\"markdownIt-Anchor\" href=\"#数据库拓展缺失错误\"></a> 数据库拓展缺失错误</h2>\n<p>如果本地运行出现以下错误，说明服务器中还缺少一个拓展：</p>\n\n<div class=\"callout\" data-callout=\"error\">\n<div class=\"callout-title\">\n<div class=\"callout-title-icon\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-zap\"><polygon points=\"13 2 3 14 12 14 11 22 21 10 12 10 13 2\"/></svg>\n</div>\n<div class=\"callout-title-inner\">相关错误信息</div>\n</div>\n<div class=\"callout-content\"><p>StatementCallback; uncategorized SQLException for SQL [CREATE EXTENSION IF NOT EXISTS hstore]; SQL state [0A000]; error code [0]; ERROR: extension “hstore” is not available</p>\n<p>建议：The extension must first be installed on the system where PostgreSQL is running.</p>\n</div></div><p>解决方法：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">安装 postgresql18-contrib 包（包含 hstore、pg_trgm 等扩展）</span></span><br><span class=\"line\">yum install -y postgresql18-contrib</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">切换到 postgres 用户</span></span><br><span class=\"line\">su - postgres</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">连接到你的目标数据库</span></span><br><span class=\"line\">psql -d ai_blog_vec</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">执行启用 hstore 扩展的命令</span></span><br><span class=\"line\">CREATE EXTENSION IF NOT EXISTS hstore;</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">验证是否启用成功（输出 hstore 即为成功）</span></span><br><span class=\"line\">\\dx hstore</span><br></pre></td></tr></table></figure>\n<p>成功示例：</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/202602230536020.webp\" alt=\"image.png\" /></p>\n<h1 id=\"本文参考\"><a class=\"markdownIt-Anchor\" href=\"#本文参考\"></a> 本文参考</h1>\n<ul>\n<li><a href=\"https://www.codefather.cn/course/1915010091721236482/section/1920435766373552129\">编程导航 - 一站式程序员学习交流社区</a></li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/1988606508431320087\">阿里云镜像Alibaba cloud linux系统版本有什么区别？操作系统全解析 - 知乎</a></li>\n<li><a href=\"https://blog.csdn.net/feiying101/article/details/135033040\">Linux服务器快速安装PostgreSQL15以及pgvector向量插件_postgres vector centos-CSDN博客</a></li>\n<li><a href=\"https://github.com/pgvector/pgvector\">pgvector/pgvector: Open-source vector similarity search for Postgres</a></li>\n<li><a href=\"https://docs.spring.io/spring-ai/reference/api/vectordbs/pgvector.html\">PGvector :: Spring AI Reference</a></li>\n</ul>\n","raw":"---\ntitle: Spring AI 中使用 PGVector 实现向量存储\ntags:\n  - PostgreSQL\n  - PGVector\n  - AI Agent\n  - Embedding\n  - IDEA\n  - Serverless\n  - RDB\n  - 阿里云\n  - Linux\n  - Spring AI\n  - RAG\n  - Navicat\ncover: https://cdn.gallery.uuanqin.top/img/202602240313353.webp\ndescription: RAG 环节中的向量数据库的创建与使用\nkatex: false\ncategories:\n  - 技术学习\nabbrlink: f3908a2e\nsummary: >-\n  本文介绍了如何在 Spring AI 框架中使用 PGVector 实现向量存储。首先，详细说明了如何在云服务器上安装和配置 PostgreSQL 18，并安装 PGVector插件。接着，讨论了如何为远程连接数据库做准备，包括修改 PostgreSQL 配置文件和开放安全组。最后，展示了如何在 Spring AI 项目中整合 PGVector，并提供了 Java 测试代码示例。文章还提醒了向量维度数设置错误时的解决方法。通过这些步骤，读者可以在 Spring AI环境中有效地利用 PGVector 进行向量存储和相似性搜索。\ndate: 2026-02-24 02:43:44\ntop_img:\n---\n\n向量数据库是一种专门类型的数据库，它的查询和传统的关系型数据库有所不同。向量数据库执行的是相似性搜索而非精确匹配，当我们给定一个向量作为查询时，向量数据库会返回与查询向量「相似」的向量。\n\n[PGvector](https://github.com/pgvector/pgvector) 是 PostgreSQL 的一个开源扩展，它能够存储和搜索由嵌入向量。\n\n本文将介绍使用 Spring AI 框架开发智能体应用时，在 RAG 步骤中的向量数据库搭建和使用环节的操作过程。\n\n# 使用 PostgreSQL 的 PGVector 构建向量存储\n\n## Linux 服务器中手动安装 PostgreSQL 以及插件\n\n### PostgreSQL 的安装\n\n> [!note] 本文使用的云服务器环境信息\n> Alibaba Cloud Linux 3（基于 Anolis OS 8 打造，兼容 CentOS 8 / RHEL 8 生态），x86_64.\n\n安装 PostgreSQL 18：\n\n```shell\n# 安装 postgresql18-server \nyum install -y postgresql18-server\n# 检查 PostgreSQL 版本\npsql --version\n# 初始化数据库（首次安装必做）\n/usr/pgsql-18/bin/postgresql-18-setup initdb\n# 启动服务并设置开机自启\nsystemctl enable --now postgresql-18\n# 检查服务状态（显示 active(running) 即为成功）\nsystemctl status postgresql-18\n```\n\n重启 PostgreSQL：\n\n```shell\nsystemctl restart postgresql-18\n```\n\n将其添加到环境变量：\n\n```shell\n# 查看 psql 所在路径\nwhich psql\n# 正常输出：/usr/pgsql-18/bin/psql\n\n# 编辑系统全局环境变量文件\nvi /etc/profile\n\n# 在文件末尾添加以下内容\nexport PATH=$PATH:/usr/pgsql-18/bin\n\n# 保存退出\nsource /etc/profile\n```\n\n验证环境变量是否生效：\n\n```shell\npsql --version\npg_ctl --version\n# 输出版本信息即为配置成功，示例：\n# psql (PostgreSQL) 18.2\n# pg_ctl (PostgreSQL) 18.2\n```\n\n简要介绍 PostgreSQL 命令行进入和退出的方法：\n\n```shell\nsu postgres # 退出方式为 exit\n\n# 1. 连接 PostgreSQL 数据库（默认连接 postgres 库）\npsql\n\n# 2. 退出数据库命令行\n\\q\n\n# 3. 查看数据库列表\npsql -c \"\\l\"\n\n# 4. 启动/停止 PostgreSQL 服务（也可 root 执行 systemctl）\npg_ctl start -D /var/lib/pgsql/18/data/\npg_ctl stop -D /var/lib/pgsql/18/data/\n```\n\n### PGVector 插件的安装与验证\n\n安装 [PGVector](https://github.com/pgvector/pgvector) 插件：\n\n```shell\nsudo yum install pgvector_18 # 这里我选择 yum 方式安装\n```\n\n进入 PostgreSQL 交互命令行执行测试：\n\n```sql\n-- 创建并切换数据库\ncreate database ai_blog_vec;\n\\c ai_blog_vec\n-- 启用该扩展程序（在您希望使用该扩展程序的每个数据库中执行此操作一次）\nCREATE EXTENSION vector;\n-- 创建一个具有 3 个维度的向量列\nCREATE TABLE items (id bigserial PRIMARY KEY, embedding vector(3));\n-- 插入向量\nINSERT INTO items (embedding) VALUES ('[1,2,3]'), ('[4,5,6]');\n-- Get the nearest neighbors by L2 distance\nSELECT * FROM items ORDER BY embedding <-> '[3,1,2]' LIMIT 5;\n```\n\n### 为远程连接数据库做准备\n\n安装完成后，PostgreSQL 的配置文件在目录 `/var/lib/pgsql/18/data` 下。一般比较常见的是修改 `postgresql.conf` 和 `pg_hba.conf` ，可以修改监听地址允许远程连接数据库、修改默认端口号、以及 IP 黑白名单限制等。\n\n `postgresql.conf` 中允许远程连接：\n\n![image.png|450](https://cdn.gallery.uuanqin.top/img/202602230420685.webp)\n\n设置 postgres 的密码：\n\n```sql\n# 设置 postgres 用户密码（替换为你的密码）\nALTER USER postgres WITH PASSWORD '你的强密码';\n```\n\n重启 PostgreSQL：\n\n```shell\n# 切换回 root 用户（或直接用 postgres 用户执行）\nexit\n\n# 重启服务\nsystemctl restart postgresql-18\n\n# 检查服务状态（确保启动成功）\nsystemctl status postgresql-18\n```\n\n注意开放阿里云 ECS 安全组即可。\n\n## 使用阿里云 Serverless 数据库产品进行构建\n\n在 [官网](https://www.aliyun.com/product/rds/postgresql) 中购买相应的 Serverless 产品：\n\n![image.png](https://cdn.gallery.uuanqin.top/img/202602230321955.webp)\n\n选择基础配置：\n\n![image.png](https://cdn.gallery.uuanqin.top/img/202602230323425.webp)\n\n进入云数据库 RDB 控制台，点击进入相应实例并创建账号：\n\n![image.png](https://cdn.gallery.uuanqin.top/img/202602230328777.webp)\n\n然后创建数据库：\n\n![image.png](https://cdn.gallery.uuanqin.top/img/202602230328141.webp)\n\n进入插件管理安装相应插件：\n\n![image.png](https://cdn.gallery.uuanqin.top/img/202602230331612.webp)\n\n在数据库连接中开通外网地址：\n\n![image.png](https://cdn.gallery.uuanqin.top/img/202602230332390.webp)\n\n> [!hint] 省钱小贴士\n> 阿里云 RDB 请开启「自动启停」，这样可以**减缓**烧钱速度。开启后，在低频率的使用场景下，预估费用为 30 元/月左右。\n\n# 使用数据库连接工具连接 PostgreSQL\n\n我们可以根据外网地址、端口号、用户名、密码、数据库这些信息，使用数据库连接工具即可进行连接。比如使用 IDEA 的数据库连接工具：\n\n![image.png](https://cdn.gallery.uuanqin.top/img/202602230335456.webp)\n\n> [!note] Navicat 连接注意事项\n> Navicat 连接 PostgreSQL 18 需要将其升级到 Navicat 17。\n\n# Spring AI 构建向量数据库\n\n完成好向量数据库的构建后，接下来，我们参照 Spring AI 的 [官方文档](https://docs.spring.io/spring-ai/reference/api/vectordbs/pgvector.html) 整合 PGVector。\n\n在此之前，确保远程 PostgreSQL 向量数据库已经新开有数据库，比如本文的 `ai_blog_vec`，并且启动了 PGVector 拓展。如果后续报漏装拓展错误可以自行补装（详见后续章节）。数据库里暂时不需要建立表格。\n\nSpring AI 项目中导入依赖：\n\n```xml\n<dependency>\n\t<groupId>org.springframework.ai</groupId>\n\t<artifactId>spring-ai-starter-vector-store-pgvector</artifactId>\n</dependency>\n```\n\n在配置文件中做好以下配置：\n\n```yaml\nspring:\n  datasource:\n    url: jdbc:postgresql://localhost:5432/postgres\n    username: postgres\n    password: postgres\n  ai:\n\tvectorstore:\n\t  pgvector:\n\t\tindex-type: HNSW\n\t\tdistance-type: COSINE_DISTANCE\n\t\t# dimensions: 1536 # 维度数据请确认好再调整\n\t\tmax-document-batch-size: 10000 # Optional: Maximum number of documents per batch\n```\n\nJava 中可以编写一段简单的测试代码：\n\n```java\n@Autowired \nVectorStore vectorStore;\n\n// ...\n\nList<Document> documents = List.of(\n    new Document(\"Spring AI rocks!! Spring AI rocks!! Spring AI rocks!! Spring AI rocks!! Spring AI rocks!!\", Map.of(\"meta1\", \"meta1\")),\n    new Document(\"The World is Big and Salvation Lurks Around the Corner\"),\n    new Document(\"You walk forward facing the past and you turn back toward the future.\", Map.of(\"meta2\", \"meta2\")));\n\n// Add the documents to PGVector\nvectorStore.add(documents);\n\n// Retrieve documents similar to a query\nList<Document> results = this.vectorStore.similaritySearch(SearchRequest.builder().query(\"Spring\").topK(5).build());\n```\n\n因为向量的制作是需要使用 Embedding 模型制作向量的，如果你的项目中引入了许多同名的 `EmbeddingModel` 的 Bean，用上面的方式可能会报错。这时我们可以换另外一种方式初始化 `VectorStore`。\n\n首先引入依赖：\n\n```xml\n<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-jdbc</artifactId>\n</dependency>\n<dependency>\n    <groupId>org.postgresql</groupId>\n    <artifactId>postgresql</artifactId>\n    <scope>runtime</scope>\n</dependency>\n<dependency>  \n    <groupId>org.springframework.ai</groupId>  \n    <artifactId>spring-ai-pgvector-store</artifactId>  \n</dependency>\n\n```\n\n然后编写配置类自己构造 `VectorStore`：\n\n```java\n@Configuration\npublic class PgVectorVectorStoreConfig {\n\n    @Bean\n    public VectorStore pgVectorVectorStore(JdbcTemplate jdbcTemplate, EmbeddingModel dashscopeEmbeddingModel) {\n        VectorStore vectorStore = PgVectorStore.builder(jdbcTemplate, dashscopeEmbeddingModel)\n                .dimensions(1536)                    // 不要盲目设置\n                .distanceType(COSINE_DISTANCE)       // Optional: defaults to COSINE_DISTANCE\n                .indexType(HNSW)                     // Optional: defaults to HNSW\n                .initializeSchema(true)              // Optional: defaults to false\n                .schemaName(\"public\")                // Optional: defaults to \"public\"\n                .vectorTableName(\"vector_store\")     // Optional: defaults to \"vector_store\"\n                .maxDocumentBatchSize(10000)         // Optional: defaults to 10000\n                .build();\n        return vectorStore;\n    }\n}\n```\n\n然后我们就可以使用 `pgVectorVectorStore` 这个 Bean 了。\n\n# 错误解决\n\n## 向量维度数设置错误\n\n如果在后续的运行中，出现向量维度数指定错误的情况时，我们需要清空表格，调整好表的结构在执行一次向量数据库的构建。\n\n## 数据库拓展缺失错误\n\n如果本地运行出现以下错误，说明服务器中还缺少一个拓展：\n\n> [!error] 相关错误信息\n> StatementCallback; uncategorized SQLException for SQL [CREATE EXTENSION IF NOT EXISTS hstore]; SQL state [0A000]; error code [0]; ERROR: extension \"hstore\" is not available\n>\n> 建议：The extension must first be installed on the system where PostgreSQL is running.\n\n解决方法：\n\n```shell\n# 安装 postgresql18-contrib 包（包含 hstore、pg_trgm 等扩展）\nyum install -y postgresql18-contrib\n```\n\n```shell\n# 切换到 postgres 用户\nsu - postgres\n\n# 连接到你的目标数据库\npsql -d ai_blog_vec\n\n# 执行启用 hstore 扩展的命令\nCREATE EXTENSION IF NOT EXISTS hstore;\n\n# 验证是否启用成功（输出 hstore 即为成功）\n\\dx hstore\n```\n\n成功示例：\n\n![image.png](https://cdn.gallery.uuanqin.top/img/202602230536020.webp)\n\n# 本文参考\n\n- [编程导航 - 一站式程序员学习交流社区](https://www.codefather.cn/course/1915010091721236482/section/1920435766373552129)\n- [阿里云镜像Alibaba cloud linux系统版本有什么区别？操作系统全解析 - 知乎](https://zhuanlan.zhihu.com/p/1988606508431320087)\n- [Linux服务器快速安装PostgreSQL15以及pgvector向量插件_postgres vector centos-CSDN博客](https://blog.csdn.net/feiying101/article/details/135033040)\n- [pgvector/pgvector: Open-source vector similarity search for Postgres](https://github.com/pgvector/pgvector)\n- [PGvector :: Spring AI Reference](https://docs.spring.io/spring-ai/reference/api/vectordbs/pgvector.html)","categories":[{"name":"技术学习","api":"api/categories/技术学习.json"}],"tags":[{"name":"Linux","api":"api/tags/Linux.json"},{"name":"阿里云","api":"api/tags/阿里云.json"},{"name":"Navicat","api":"api/tags/Navicat.json"},{"name":"PostgreSQL","api":"api/tags/PostgreSQL.json"},{"name":"PGVector","api":"api/tags/PGVector.json"},{"name":"AI Agent","api":"api/tags/AI-Agent.json"},{"name":"Embedding","api":"api/tags/Embedding.json"},{"name":"IDEA","api":"api/tags/IDEA.json"},{"name":"Serverless","api":"api/tags/Serverless.json"},{"name":"RDB","api":"api/tags/RDB.json"},{"name":"Spring AI","api":"api/tags/Spring-AI.json"},{"name":"RAG","api":"api/tags/RAG.json"}]},"api":"api/posts/p/f3908a2e.json"}