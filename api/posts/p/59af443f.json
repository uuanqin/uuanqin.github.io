{"data":{"title":"å‰åç¼€åˆ†è§£çš„åº”ç”¨","slug":"ç®—æ³•ä¸æ•°æ®ç»“æ„/å‰åç¼€åˆ†è§£çš„åº”ç”¨","description":"åŠ¨æ€è§„åˆ’çš„ç®€å•è¿ç”¨ï¼Œæ‰“éã€Œè¿ç»­å­æ•°ç»„ã€ã€Œæ¥é›¨æ°´ã€","date":"2024-09-21T11:12:16.000Z","updated":"2025-10-16T16:24:57.142Z","language":"zh-CN","comments":true,"url":"p/59af443f/","cover":"https://cdn.gallery.uuanqin.top/img/202409220021307.webp","images":[],"content":"<p>æœ¬æ–‡é¢˜ç›®éš¾åº¦æ ‡è¯†ï¼šğŸŸ©ç®€å•ï¼ŒğŸŸ¨ä¸­ç­‰ï¼ŒğŸŸ¥å›°éš¾ã€‚</p>\n<h1 id=\"å‰ç¼€å’Œ\"><a class=\"markdownIt-Anchor\" href=\"#å‰ç¼€å’Œ\"></a> å‰ç¼€å’Œ</h1>\n<p>å¯¹äºã€Œè¿ç»­å­æ•°ç»„é—®é¢˜ã€ä¸€èˆ¬å¯ä»¥é€šè¿‡å‰ç¼€å’Œæ–¹å¼è§£å†³ã€‚</p>\n\n<div class=\"callout\" data-callout=\"example\">\n<div class=\"callout-title\">\n<div class=\"callout-title-icon\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-list\"><line x1=\"8\" x2=\"21\" y1=\"6\" y2=\"6\"/><line x1=\"8\" x2=\"21\" y1=\"12\" y2=\"12\"/><line x1=\"8\" x2=\"21\" y1=\"18\" y2=\"18\"/><line x1=\"3\" x2=\"3.01\" y1=\"6\" y2=\"6\"/><line x1=\"3\" x2=\"3.01\" y1=\"12\" y2=\"12\"/><line x1=\"3\" x2=\"3.01\" y1=\"18\" y2=\"18\"/></svg>\n</div>\n<div class=\"callout-title-inner\">é¢˜ç›®ï¼šğŸŸ¨ <a href=\"https://leetcode.cn/problems/subarray-sum-equals-k/description/\">560. å’Œä¸º K çš„å­æ•°ç»„ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></div>\n</div>\n<div class=\"callout-content\"><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•° k ï¼Œè¯·ä½ ç»Ÿè®¡å¹¶è¿”å› è¯¥æ•°ç»„ä¸­å’Œä¸º k çš„å­æ•°ç»„çš„ä¸ªæ•° ã€‚</p>\n<p>å­æ•°ç»„æ˜¯æ•°ç»„ä¸­å…ƒç´ çš„è¿ç»­éç©ºåºåˆ—ã€‚</p>\n</div></div><p>æš´åŠ›æšä¸¾ï¼š</p>\n<ul>\n<li>æ—¶é—´å¤æ‚åº¦ï¼š<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n^2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span>ï¼Œå…¶ä¸­ n ä¸ºæ•°ç»„çš„é•¿åº¦ã€‚æšä¸¾å­æ•°ç»„å¼€å¤´å’Œç»“å°¾éœ€è¦ <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n^2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> çš„æ—¶é—´ï¼Œå…¶ä¸­æ±‚å’Œéœ€è¦ <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span> çš„æ—¶é—´å¤æ‚åº¦ï¼Œå› æ­¤æ€»æ—¶é—´å¤æ‚åº¦ä¸º <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n^2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span>ã€‚</li>\n<li>ç©ºé—´å¤æ‚åº¦ï¼š<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span>ã€‚åªéœ€è¦å¸¸æ•°ç©ºé—´å­˜æ”¾è‹¥å¹²å˜é‡ã€‚</li>\n</ul>\n<p>ä¸‹é¢ä»‹ç»å‰ç¼€å’Œ + å“ˆå¸Œè¡¨ä¼˜åŒ–æ–¹æ³•ã€‚</p>\n<p>å®šä¹‰ <code>pre[i]</code> ä¸º <code>[0..i]</code> é‡Œæ‰€æœ‰æ•°çš„å’Œï¼Œåˆ™ <code>pre[i]</code> å¯ä»¥ç”± <code>pre[iâˆ’1]</code> é€’æ¨è€Œæ¥ï¼Œå³ï¼š<code>pre[i]=pre[iâˆ’1]+nums[i]</code>ã€‚</p>\n<p>é‚£ä¹ˆã€Œ<code>[j..i]</code> è¿™ä¸ªå­æ•°ç»„å’Œä¸º <code>k</code> ã€è¿™ä¸ªæ¡ä»¶æˆ‘ä»¬å¯ä»¥è½¬åŒ–ä¸º <code>pre[i]âˆ’pre[jâˆ’1]==k</code>ã€‚</p>\n<p>å› æ­¤æˆ‘ä»¬å¯ä»¥åœ¨éå†çš„åŒæ—¶è®¡ç®—å‰ç¼€å’Œ <code>pre[i]</code> æ—¶ï¼Œæ‰¾ä¸€ä¸‹å“ˆå¸Œè¡¨ä¸­æœ‰æ²¡æœ‰å­˜æœ‰ <code>pre[jâˆ’1]</code> å³å¯ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"type\">int</span> <span class=\"title function_\">subarraySum</span><span class=\"params\">(<span class=\"type\">int</span>[] nums, <span class=\"type\">int</span> k)</span> &#123;</span><br><span class=\"line\">\t<span class=\"type\">int</span> <span class=\"variable\">count</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>, pre = <span class=\"number\">0</span>;</span><br><span class=\"line\">\tHashMap &lt; Integer, Integer &gt; mp = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span> &lt; &gt; ();</span><br><span class=\"line\">\tmp.put(<span class=\"number\">0</span>, <span class=\"number\">1</span>); <span class=\"comment\">// è€ƒè™‘åˆ°ç­”æ¡ˆæ˜¯æ•´ä¸ªå‰ç¼€æœ¬èº«çš„æƒ…å†µ</span></span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class=\"line\">\t\tpre += nums[i];</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (mp.containsKey(pre - k)) &#123;</span><br><span class=\"line\">\t\t\tcount += mp.get(pre - k);</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\tmp.put(pre, mp.getOrDefault(pre, <span class=\"number\">0</span>) + <span class=\"number\">1</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> count;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>å¤æ‚åº¦åˆ†æï¼š</p>\n<ul>\n<li>æ—¶é—´å¤æ‚åº¦ï¼š<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span>ï¼Œå…¶ä¸­ n ä¸ºæ•°ç»„çš„é•¿åº¦ã€‚æˆ‘ä»¬éå†æ•°ç»„çš„æ—¶é—´å¤æ‚åº¦ä¸º <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span>ï¼Œä¸­é—´åˆ©ç”¨å“ˆå¸Œè¡¨æŸ¥è¯¢åˆ é™¤çš„å¤æ‚åº¦å‡ä¸º <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span>ï¼Œå› æ­¤æ€»æ—¶é—´å¤æ‚åº¦ä¸º <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span>ã€‚</li>\n<li>ç©ºé—´å¤æ‚åº¦ï¼š<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span>ï¼Œå…¶ä¸­ n ä¸ºæ•°ç»„çš„é•¿åº¦ã€‚å“ˆå¸Œè¡¨åœ¨æœ€åæƒ…å†µä¸‹å¯èƒ½æœ‰ n ä¸ªä¸åŒçš„é”®å€¼ï¼Œå› æ­¤éœ€è¦ <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span> çš„ç©ºé—´å¤æ‚åº¦ã€‚</li>\n</ul>\n<p>ç›¸å…³é¢˜ç›®ï¼š</p>\n<ul>\n<li>ğŸŸ¨ <a href=\"https://leetcode.cn/problems/subarray-sums-divisible-by-k/description/\">974. å’Œå¯è¢« K æ•´é™¤çš„å­æ•°ç»„ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a> å¯¹ <a class=\"uuanqin-bilink\" target=\"_blank\" href=\"/p/7602b79c/\"><span class=\"bilink-pop-up\">ç«™å†…æ–‡ç« </span>åŒä½™å®šç†</a> çš„è€ƒå¯Ÿã€‚</li>\n<li>ğŸŸ¨ <a href=\"https://leetcode.cn/problems/continuous-subarray-sum/description/\">523. è¿ç»­çš„å­æ•°ç»„å’Œ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a> å¯¹ <a class=\"uuanqin-bilink\" target=\"_blank\" href=\"/p/7602b79c/\"><span class=\"bilink-pop-up\">ç«™å†…æ–‡ç« </span>åŒä½™å®šç†</a> çš„è€ƒå¯Ÿï¼Œå¹¶ä¸”é™åˆ¶äº†æ•°ç»„é•¿åº¦ï¼Œä¸éœ€è¦ç»Ÿè®¡ç¬¦åˆæ¡ä»¶çš„ä¸ªæ•°ã€‚</li>\n<li>ğŸŸ¨ <a href=\"https://leetcode.cn/problems/maximum-subarray/description/\">53. æœ€å¤§å­æ•°ç»„å’Œ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a>ã€‚è§£æ³•è¯¦çœ‹ <a class=\"uuanqin-bilink\" target=\"_blank\" href=\"/p/19c8c246/\"><span class=\"bilink-pop-up\">ç«™å†…æ–‡ç« </span>æœ€å¤§å­æ•°ç»„é—®é¢˜</a>ã€‚</li>\n</ul>\n<h1 id=\"å‰ç¼€æ¡ä»¶å’Œ\"><a class=\"markdownIt-Anchor\" href=\"#å‰ç¼€æ¡ä»¶å’Œ\"></a> å‰ç¼€ã€Œæ¡ä»¶ã€å’Œ</h1>\n<p>æˆ‘è¿™é‡Œèµ·åå‰ç¼€ã€Œæ¡ä»¶ã€å’Œï¼Œæ˜¯å› ä¸ºè¿™é‡Œ <code>nums</code> å…ƒç´ å¿…é¡»æ»¡è¶³ä¸€å®šæ¡ä»¶ï¼Œæ‰ç»Ÿè®¡å…¥å‰ç¼€å’Œã€‚</p>\n\n<div class=\"callout\" data-callout=\"example\">\n<div class=\"callout-title\">\n<div class=\"callout-title-icon\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-list\"><line x1=\"8\" x2=\"21\" y1=\"6\" y2=\"6\"/><line x1=\"8\" x2=\"21\" y1=\"12\" y2=\"12\"/><line x1=\"8\" x2=\"21\" y1=\"18\" y2=\"18\"/><line x1=\"3\" x2=\"3.01\" y1=\"6\" y2=\"6\"/><line x1=\"3\" x2=\"3.01\" y1=\"12\" y2=\"12\"/><line x1=\"3\" x2=\"3.01\" y1=\"18\" y2=\"18\"/></svg>\n</div>\n<div class=\"callout-title-inner\">é¢˜ç›®ï¼šğŸŸ¨ <a href=\"https://leetcode.cn/problems/count-number-of-nice-subarrays/description/\">1248. ç»Ÿè®¡ã€Œä¼˜ç¾å­æ•°ç»„ã€ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></div>\n</div>\n<div class=\"callout-content\"><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ <code>nums</code> å’Œä¸€ä¸ªæ•´æ•° kã€‚å¦‚æœæŸä¸ªè¿ç»­å­æ•°ç»„ä¸­æ°å¥½æœ‰ k ä¸ªå¥‡æ•°æ•°å­—ï¼Œæˆ‘ä»¬å°±è®¤ä¸ºè¿™ä¸ªå­æ•°ç»„æ˜¯ã€Œä¼˜ç¾å­æ•°ç»„ã€ã€‚</p>\n<p>è¯·è¿”å›è¿™ä¸ªæ•°ç»„ä¸­ ã€Œä¼˜ç¾å­æ•°ç»„ã€ çš„æ•°ç›®ã€‚</p>\n</div></div><p>æœ¬é¢˜å’Œä¸Šé¢˜ååˆ†ç›¸åƒã€‚ä¸å‰ç¼€å’Œè§£æ³•ä¸åŒçš„æ˜¯ï¼Œæˆ‘ä»¬å®šä¹‰çš„å‰ç¼€æ•°ç»„ç´¯ç§¯çš„æ˜¯ç¬¦åˆç‰¹å®šæ¡ä»¶ï¼ˆåœ¨æœ¬é¢˜é‡Œä¸ºå¥‡æ•°æ•°å­—ï¼‰çš„å…ƒç´ æ•°ç›®ã€‚</p>\n<p>æˆ‘ä»¬å®šä¹‰ <code>pre[i]</code> ä¸º <code>[0..i]</code> ä¸­å¥‡æ•°çš„ä¸ªæ•°ï¼Œåˆ™ <code>pre[i]</code> å¯ä»¥ç”± <code>pre[iâˆ’1]</code> é€’æ¨è€Œæ¥ï¼Œå³ï¼š<code>pre[i]=pre[iâˆ’1]+(nums[i]&amp;1)</code>ã€‚</p>\n<p>é‚£ä¹ˆã€Œ<code>[j..i]</code> è¿™ä¸ªå­æ•°ç»„é‡Œçš„å¥‡æ•°ä¸ªæ•°æ°å¥½ä¸º k ã€è¿™ä¸ªæ¡ä»¶æˆ‘ä»¬å¯ä»¥è½¬åŒ–ä¸º <code>pre[i]âˆ’pre[jâˆ’1]==k</code>ã€‚</p>\n<p>å› æ­¤æˆ‘ä»¬å¯ä»¥åœ¨éå†çš„åŒæ—¶è®¡ç®—å‰ç¼€å’Œ <code>pre[i]</code> æ—¶ï¼Œæ‰¾ä¸€ä¸‹å“ˆå¸Œè¡¨ä¸­æœ‰æ²¡æœ‰å­˜æœ‰ <code>pre[jâˆ’1]</code> å³å¯ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"type\">int</span> <span class=\"title function_\">numberOfSubarrays</span><span class=\"params\">(<span class=\"type\">int</span>[] nums, <span class=\"type\">int</span> k)</span> &#123;</span><br><span class=\"line\">\t<span class=\"type\">int</span> <span class=\"variable\">res</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>, pre = <span class=\"number\">0</span>;</span><br><span class=\"line\">\tHashMap &lt; Integer, Integer &gt; mp = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span> &lt; &gt; ();</span><br><span class=\"line\">\tmp.put(<span class=\"number\">0</span>, <span class=\"number\">1</span>); <span class=\"comment\">// è€ƒè™‘åˆ°ç­”æ¡ˆæ˜¯æ•´ä¸ªå‰ç¼€æœ¬èº«çš„æƒ…å†µ</span></span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class=\"line\">\t\tpre += nums[i]&amp;<span class=\"number\">1</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (mp.containsKey(pre - k)) &#123;</span><br><span class=\"line\">\t\t\tres += mp.get(pre - k);</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\tmp.put(pre, mp.getOrDefault(pre, <span class=\"number\">0</span>) + <span class=\"number\">1</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> res;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>å¤æ‚åº¦åˆ†æ:</p>\n<ul>\n<li>æ—¶é—´å¤æ‚åº¦ï¼š<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span>ï¼Œå…¶ä¸­ n ä¸ºæ•°ç»„çš„å¤§å°ã€‚æˆ‘ä»¬åªéœ€è¦éå†ä¸€éæ•°ç»„å³å¯æ±‚å¾—ç­”æ¡ˆã€‚</li>\n<li>ç©ºé—´å¤æ‚åº¦ï¼š<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span>ï¼Œå…¶ä¸­ n ä¸ºæ•°ç»„çš„å¤§å°ã€‚å“ˆå¸Œè¡¨åœ¨æœ€åæƒ…å†µä¸‹å¯èƒ½æœ‰ n ä¸ªä¸åŒçš„é”®å€¼ï¼Œå› æ­¤éœ€è¦ <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span> çš„ç©ºé—´å¤æ‚åº¦ã€‚</li>\n</ul>\n<p>ç›¸å…³é¢˜ç›®ï¼š</p>\n<ul>\n<li>ğŸŸ¨ <a href=\"https://leetcode.cn/problems/number-of-subarrays-with-bounded-maximum/description/?envType=problem-list-v2&amp;envId=two-pointers\">795. åŒºé—´å­æ•°ç»„ä¸ªæ•° - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a> ç¨å¾®å¤æ‚çš„å‰ç¼€ç‰¹å¾</li>\n</ul>\n<h1 id=\"å‰ç¼€ç‰¹å¾\"><a class=\"markdownIt-Anchor\" href=\"#å‰ç¼€ç‰¹å¾\"></a> å‰ç¼€ç‰¹å¾</h1>\n<p>æ‰€è°“å‰ç¼€ç‰¹å¾æŒ‡çš„å°±æ˜¯ <code>pre[i]</code> ä»£è¡¨ <code>nums[0]</code> åˆ° <code>nums[i]</code> ä¸­çš„ä¸€ä¸ªç‰¹å¾å€¼æ˜¯å¤šå°‘ã€‚æ¯”å¦‚ï¼š</p>\n<ul>\n<li><code>pre[i]</code> ä»£è¡¨ <code>nums[0]</code> åˆ° <code>nums[i]</code> ä¸­çš„æœ€å¤§å€¼/æœ€å°å€¼ã€‚</li>\n<li><code>pre[i]</code> ä»£è¡¨ <code>nums[0]</code> åˆ° <code>nums[i]</code> ä¸­æœ€åä¸€æ¬¡æ»¡è¶³ xxx æ¡ä»¶çš„å€¼ã€‚</li>\n</ul>\n<p>ä»è¿™é‡Œå¼€å§‹ï¼Œ<strong>åŠ¨æ€è§„åˆ’</strong>çš„å‘³é“å°±å¼€å§‹ä¸Šæ¥äº†ã€‚</p>\n\n<div class=\"callout\" data-callout=\"example\">\n<div class=\"callout-title\">\n<div class=\"callout-title-icon\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-list\"><line x1=\"8\" x2=\"21\" y1=\"6\" y2=\"6\"/><line x1=\"8\" x2=\"21\" y1=\"12\" y2=\"12\"/><line x1=\"8\" x2=\"21\" y1=\"18\" y2=\"18\"/><line x1=\"3\" x2=\"3.01\" y1=\"6\" y2=\"6\"/><line x1=\"3\" x2=\"3.01\" y1=\"12\" y2=\"12\"/><line x1=\"3\" x2=\"3.01\" y1=\"18\" y2=\"18\"/></svg>\n</div>\n<div class=\"callout-title-inner\">é¢˜ç›®ï¼šğŸŸ¨ <a href=\"https://leetcode.cn/problems/number-of-subarrays-with-bounded-maximum/description/?envType=problem-list-v2&amp;envId=two-pointers\">795. åŒºé—´å­æ•°ç»„ä¸ªæ•° - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></div>\n</div>\n<div class=\"callout-content\"><p></p>\n<p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ <code>nums</code> å’Œä¸¤ä¸ªæ•´æ•°ï¼š<code>left</code> åŠ <code>right</code> ã€‚æ‰¾å‡º <code>nums</code> ä¸­è¿ç»­ã€éç©ºä¸”å…¶ä¸­æœ€å¤§å…ƒç´ åœ¨èŒƒå›´ <code>[left, right]</code> å†…çš„å­æ•°ç»„ï¼Œå¹¶è¿”å›æ»¡è¶³æ¡ä»¶çš„å­æ•°ç»„çš„ä¸ªæ•°ã€‚</p>\n<p>ç”Ÿæˆçš„æµ‹è¯•ç”¨ä¾‹ä¿è¯ç»“æœç¬¦åˆ <strong>32-bit</strong> æ•´æ•°èŒƒå›´ã€‚</p>\n</div></div><p>ä¸€ä¸ªå­æ•°ç»„çš„æœ€å¤§å€¼èŒƒå›´åœ¨ <code>[left,right]</code> è¡¨ç¤ºå­æ•°ç»„ä¸­ä¸èƒ½å«æœ‰å¤§äº right çš„å…ƒç´ ï¼Œä¸”è‡³å°‘å«æœ‰ä¸€ä¸ªå¤„äº <code>[left,right]</code> åŒºé—´çš„å…ƒç´ ã€‚</p>\n<p>æˆ‘ä»¬å¯ä»¥å°†æ•°ç»„ä¸­çš„å…ƒç´ åˆ†ä¸ºä¸‰ç±»ï¼Œå¹¶åˆ†åˆ«ç”¨ 0, 1, 2 æ¥è¡¨ç¤ºï¼š</p>\n<ul>\n<li>å°äº <code>left</code>ï¼Œç”¨ 0 è¡¨ç¤ºï¼›</li>\n<li>å¤§äºç­‰äº <code>left</code> ä¸”å°äºç­‰äº <code>right</code>ï¼Œç”¨ 1 è¡¨ç¤ºï¼›</li>\n<li>å¤§äº <code>right</code>ï¼Œç”¨ 2 è¡¨ç¤ºã€‚</li>\n</ul>\n<p>é‚£ä¹ˆæœ¬é¢˜å¯ä»¥è½¬æ¢ä¸ºæ±‚è§£ä¸åŒ…å« 2ï¼Œä¸”è‡³å°‘åŒ…å«ä¸€ä¸ª 1 çš„å­æ•°ç»„æ•°ç›®ã€‚æˆ‘ä»¬éå† iï¼Œå¹¶å°†å³ç«¯ç‚¹å›ºå®šåœ¨ iï¼Œæ±‚è§£æœ‰å¤šå°‘åˆæ³•çš„å­åŒºé—´ã€‚è¿‡ç¨‹ä¸­éœ€è¦ç»´æŠ¤ä¸¤ä¸ªå˜é‡ï¼š</p>\n<ul>\n<li><code>last1</code>ï¼Œè¡¨ç¤ºä¸Šä¸€æ¬¡ 1 å‡ºç°çš„ä½ç½®ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™ä¸º âˆ’1ï¼›</li>\n<li><code>last2</code>ï¼Œè¡¨ç¤ºä¸Šä¸€æ¬¡ 2 å‡ºç°çš„ä½ç½®ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™ä¸º âˆ’1ã€‚</li>\n</ul>\n<p>å¦‚æœ <code>last1 != âˆ’1</code>ï¼Œé‚£ä¹ˆå­æ•°ç»„è‹¥ä»¥ i ä¸ºå³ç«¯ç‚¹ï¼Œåˆæ³•çš„å·¦ç«¯ç‚¹å¯ä»¥è½åœ¨ <code>(last2,last1]</code> ä¹‹é—´ã€‚è¿™æ ·çš„å·¦ç«¯ç‚¹å…±æœ‰ <code>last1âˆ’last2</code> ä¸ªã€‚</p>\n<p>å› æ­¤ï¼Œæˆ‘ä»¬éå† <code>i</code>ï¼š</p>\n<ul>\n<li>å¦‚æœ <code>leftâ‰¤nums[i]â‰¤right</code>ï¼Œä»¤ <code>last1=i</code>ï¼›</li>\n<li>å¦åˆ™å¦‚æœ <code>nums[i]&gt;right</code>ï¼Œä»¤ <code>last2=i, last1=âˆ’1</code>ã€‚</li>\n</ul>\n<p>ç„¶åå°† <code>last1âˆ’last2</code> ç´¯åŠ åˆ°ç­”æ¡ˆä¸­å³å¯ã€‚æœ€åçš„æ€»å’Œå³ä¸ºé¢˜ç›®æ‰€æ±‚ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Solution</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> <span class=\"title function_\">numSubarrayBoundedMax</span><span class=\"params\">(<span class=\"type\">int</span>[] nums, <span class=\"type\">int</span> left, <span class=\"type\">int</span> right)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">res</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>, last2 = -<span class=\"number\">1</span>, last1 = -<span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (nums[i] &gt;= left &amp;&amp; nums[i] &lt;= right) &#123;</span><br><span class=\"line\">                last1 = i;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (nums[i] &gt; right) &#123;</span><br><span class=\"line\">                last2 = i;</span><br><span class=\"line\">                last1 = -<span class=\"number\">1</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (last1 != -<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">                res += last1 - last2;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"å‰åç¼€ç‰¹å¾\"><a class=\"markdownIt-Anchor\" href=\"#å‰åç¼€ç‰¹å¾\"></a> å‰åç¼€ç‰¹å¾</h1>\n<p>æœ‰ä¸€äº›é¢˜ç›®éœ€è¦ç»¼åˆè¿ç”¨å‰åç¼€ç‰¹å¾è¿›è¡Œæ±‚è§£ã€‚</p>\n\n<div class=\"callout\" data-callout=\"example\">\n<div class=\"callout-title\">\n<div class=\"callout-title-icon\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-list\"><line x1=\"8\" x2=\"21\" y1=\"6\" y2=\"6\"/><line x1=\"8\" x2=\"21\" y1=\"12\" y2=\"12\"/><line x1=\"8\" x2=\"21\" y1=\"18\" y2=\"18\"/><line x1=\"3\" x2=\"3.01\" y1=\"6\" y2=\"6\"/><line x1=\"3\" x2=\"3.01\" y1=\"12\" y2=\"12\"/><line x1=\"3\" x2=\"3.01\" y1=\"18\" y2=\"18\"/></svg>\n</div>\n<div class=\"callout-title-inner\">é¢˜ç›®ï¼šğŸŸ© <a href=\"https://leetcode.cn/problems/minimum-sum-of-mountain-triplets-i/description/\">2908. å…ƒç´ å’Œæœ€å°çš„å±±å½¢ä¸‰å…ƒç»„ I - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></div>\n</div>\n<div class=\"callout-content\"><p></p>\n<p>ç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹çš„æ•´æ•°æ•°ç»„ nums ã€‚</p>\n<p>å¦‚æœä¸‹æ ‡ä¸‰å…ƒç»„ (i, j, k) æ»¡è¶³ä¸‹è¿°å…¨éƒ¨æ¡ä»¶ï¼Œåˆ™è®¤ä¸ºå®ƒæ˜¯ä¸€ä¸ª å±±å½¢ä¸‰å…ƒç»„ ï¼š</p>\n<ul>\n<li><code>i &lt; j &lt; k</code></li>\n<li><code>nums[i] &lt; nums[j]</code> ä¸” <code>nums[k] &lt; nums[j]</code></li>\n</ul>\n<p>è¯·ä½ æ‰¾å‡º nums ä¸­ å…ƒç´ å’Œæœ€å° çš„å±±å½¢ä¸‰å…ƒç»„ï¼Œå¹¶è¿”å›å…¶ å…ƒç´ å’Œ ã€‚å¦‚æœä¸å­˜åœ¨æ»¡è¶³æ¡ä»¶çš„ä¸‰å…ƒç»„ï¼Œè¿”å› -1 ã€‚</p>\n</div></div><p>é™¤äº†æš´åŠ›æ–¹æ³•å¤–ï¼Œè¿˜æœ‰ä»€ä¹ˆåˆ«çš„æ–¹æ³•ä½¿æ—¶é—´å¤æ‚åº¦å°†ä¸º <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span>ï¼Ÿ</p>\n<p>æ€è·¯ï¼šæšä¸¾ä¸­é—´çš„æ•° <code>nums[j]</code>ï¼Œæ‰¾åˆ° <code>nums[j]</code> å·¦è¾¹æœ€å°çš„å€¼å’Œå³è¾¹æœ€å°çš„å€¼ï¼Œç„¶åæ£€æŸ¥è¿™ä¸‰ä¸ªæ•°æ˜¯å¦ç¬¦åˆè¦æ±‚ï¼Œå†æ›´æ–°ç­”æ¡ˆã€‚</p>\n<p>å®šä¹‰ <code>preMin[i]</code> è¡¨ç¤ºä» <code>nums[0]</code> åˆ° <code>nums[i]</code> çš„æœ€å°å€¼ï¼Œå®šä¹‰ <code>sufMin[i]</code> è¡¨ç¤º <code>nums[i]</code> åˆ° <code>nums[n-1]</code> çš„æœ€å°å€¼ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span> çš„æ—¶é—´å†…å®Œæˆè®¡ç®—ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"type\">int</span> <span class=\"title function_\">minimumSum</span><span class=\"params\">(<span class=\"type\">int</span>[] nums)</span> &#123;</span><br><span class=\"line\">\t<span class=\"type\">int</span> <span class=\"variable\">n</span> <span class=\"operator\">=</span> nums.length;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// è®¡ç®— preMin</span></span><br><span class=\"line\">\t<span class=\"type\">int</span>[] preMin = <span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[n]; <span class=\"comment\">// å‰ç¼€</span></span><br><span class=\"line\">\tpreMin[<span class=\"number\">0</span>] = nums[<span class=\"number\">0</span>];</span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">1</span>; i &lt; n-<span class=\"number\">1</span>; i++) &#123;</span><br><span class=\"line\">\t\tpreMin[i] = Math.min(preMin[i - <span class=\"number\">1</span>], nums[i]); <span class=\"comment\">// è¿™å…¶å®æ˜¯ä¸€ç§åŠ¨æ€è§„åˆ’æ€æƒ³</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// è®¡ç®— sufMin</span></span><br><span class=\"line\">\t<span class=\"type\">int</span>[] sufMin = <span class=\"keyword\">new</span> <span class=\"title class_\">int</span>[n]; <span class=\"comment\">// åç¼€æœ€å°å€¼</span></span><br><span class=\"line\">\tsufMin[n - <span class=\"number\">1</span>] = nums[n - <span class=\"number\">1</span>];</span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> n - <span class=\"number\">2</span>; i &gt; <span class=\"number\">1</span>; i--) &#123;</span><br><span class=\"line\">\t\tsufMin[i] = Math.min(sufMin[i + <span class=\"number\">1</span>], nums[i]); </span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// è®¡ç®—æœ€ç»ˆç­”æ¡ˆ</span></span><br><span class=\"line\">\t<span class=\"type\">int</span> <span class=\"variable\">res</span> <span class=\"operator\">=</span> Integer.MAX_VALUE;</span><br><span class=\"line\">\t<span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">1</span>;i&lt;n-<span class=\"number\">1</span>;i++)&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(preMin[i-<span class=\"number\">1</span>]&lt;nums[i] &amp;&amp; nums[i]&gt;sufMin[i+<span class=\"number\">1</span>])&#123;</span><br><span class=\"line\">\t\t\tres = Math.min(res,preMin[i-<span class=\"number\">1</span>]+nums[i]+sufMin[i+<span class=\"number\">1</span>]);</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> res == Integer.MAX_VALUE? -<span class=\"number\">1</span> : res;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<div class=\"callout\" data-callout=\"example\">\n<div class=\"callout-title\">\n<div class=\"callout-title-icon\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-list\"><line x1=\"8\" x2=\"21\" y1=\"6\" y2=\"6\"/><line x1=\"8\" x2=\"21\" y1=\"12\" y2=\"12\"/><line x1=\"8\" x2=\"21\" y1=\"18\" y2=\"18\"/><line x1=\"3\" x2=\"3.01\" y1=\"6\" y2=\"6\"/><line x1=\"3\" x2=\"3.01\" y1=\"12\" y2=\"12\"/><line x1=\"3\" x2=\"3.01\" y1=\"18\" y2=\"18\"/></svg>\n</div>\n<div class=\"callout-title-inner\">æ€è€ƒé¢˜ï¼šä½ å¯ä»¥å°†è®¡ç®— <code>preMin</code> ä¸æ¢ç´¢ç­”æ¡ˆçš„è¿‡ç¨‹ç»“åˆèµ·æ¥ï¼Œä»¥å‡å°‘éå†æ¬¡æ•°å’Œç©ºé—´å—ï¼Ÿ</div>\n</div>\n<div class=\"callout-content\"><p>è¿™ç§å°† <code>preMin</code> å’Œç­”æ¡ˆéå†è¿‡ç¨‹ç»“åˆèµ·æ¥çš„åšæ³•ç›¸å½“äº <a class=\"uuanqin-bilink\" target=\"_blank\" href=\"/p/41280b89/\"><span class=\"bilink-pop-up\">ç«™å†…æ–‡ç« </span>ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº</a> ä¸­çš„ä¸€æ¬¡éå†åšæ³•ã€‚</p>\n</div></div><p>ç›¸å…³é¢˜ç›®ï¼š</p>\n<ul>\n<li>ğŸŸ© <a href=\"https://leetcode.cn/problems/maximum-value-of-an-ordered-triplet-i/description/\">2873. æœ‰åºä¸‰å…ƒç»„ä¸­çš„æœ€å¤§å€¼ I - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></li>\n<li>ğŸŸ© <a href=\"https://leetcode.cn/problems/best-time-to-buy-and-sell-stock/description/\">121. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></li>\n<li>ğŸŸ¨ <a href=\"https://leetcode.cn/problems/sum-of-beauty-in-the-array/description/?envType=daily-question&amp;envId=2025-03-11\">2012. æ•°ç»„ç¾ä¸½å€¼æ±‚å’Œ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></li>\n</ul>\n\n<div class=\"callout\" data-callout=\"example\">\n<div class=\"callout-title\">\n<div class=\"callout-title-icon\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-list\"><line x1=\"8\" x2=\"21\" y1=\"6\" y2=\"6\"/><line x1=\"8\" x2=\"21\" y1=\"12\" y2=\"12\"/><line x1=\"8\" x2=\"21\" y1=\"18\" y2=\"18\"/><line x1=\"3\" x2=\"3.01\" y1=\"6\" y2=\"6\"/><line x1=\"3\" x2=\"3.01\" y1=\"12\" y2=\"12\"/><line x1=\"3\" x2=\"3.01\" y1=\"18\" y2=\"18\"/></svg>\n</div>\n<div class=\"callout-title-inner\">é¢˜ç›®ï¼šğŸŸ¥ <a href=\"https://leetcode.cn/problems/trapping-rain-water/description/\">42. æ¥é›¨æ°´ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></div>\n</div>\n<div class=\"callout-content\"><p>ç»™å®š <code>n</code> ä¸ªéè´Ÿæ•´æ•°è¡¨ç¤ºæ¯ä¸ªå®½åº¦ä¸º <code>1</code> çš„æŸ±å­çš„é«˜åº¦å›¾ï¼Œè®¡ç®—æŒ‰æ­¤æ’åˆ—çš„æŸ±å­ï¼Œä¸‹é›¨ä¹‹åèƒ½æ¥å¤šå°‘é›¨æ°´ã€‚</p>\n</div></div><p>æ€è·¯ï¼šæ¯ä¸€ä¸ªä½ç½® i èƒ½æ¥åˆ°çš„é›¨æ°´ï¼Œç›¸å½“äºå·¦ä¾§æœ€å¤§å€¼ä¸å³ä¾§æœ€å¤§å€¼ä¸­è¾ƒå°çš„é‚£ä¸ªå€¼ï¼Œå‡å»è‡ªèº«çš„é«˜åº¦ã€‚</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/202409212140018.webp\" alt=\"image.png\" /></p>\n<p>å¤æ‚åº¦åˆ†æï¼š</p>\n<ul>\n<li>æ—¶é—´å¤æ‚åº¦ï¼š<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span>ï¼Œå…¶ä¸­ n æ˜¯æ•°ç»„ <code>height</code> çš„é•¿åº¦ã€‚è®¡ç®—æ•°ç»„ <code>leftMax</code> å’Œ <code>rightMax</code> çš„å…ƒç´ å€¼å„éœ€è¦éå†æ•°ç»„ <code>height</code> ä¸€æ¬¡ï¼Œè®¡ç®—èƒ½æ¥çš„é›¨æ°´æ€»é‡è¿˜éœ€è¦éå†ä¸€æ¬¡ã€‚</li>\n<li>ç©ºé—´å¤æ‚åº¦ï¼š<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span>ï¼Œå…¶ä¸­ n æ˜¯æ•°ç»„ <code>height</code> çš„é•¿åº¦ã€‚éœ€è¦åˆ›å»ºä¸¤ä¸ªé•¿åº¦ä¸º n çš„æ•°ç»„ <code>leftMax</code> å’Œ <code>rightMax</code>ã€‚</li>\n</ul>\n<h1 id=\"å‰åç¼€å’Œç§¯\"><a class=\"markdownIt-Anchor\" href=\"#å‰åç¼€å’Œç§¯\"></a> å‰åç¼€å’Œ/ç§¯</h1>\n<p>ç›¸å…³é¢˜ç›®ï¼š</p>\n<ul>\n<li>ğŸŸ¨ <a href=\"https://leetcode.cn/problems/product-of-array-except-self/description/\">238. é™¤è‡ªèº«ä»¥å¤–æ•°ç»„çš„ä¹˜ç§¯ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></li>\n<li>ğŸŸ¨ <a href=\"https://leetcode.cn/problems/construct-product-matrix/description/\">2906. æ„é€ ä¹˜ç§¯çŸ©é˜µ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></li>\n</ul>\n<h1 id=\"æœ¬æ–‡å‚è€ƒ\"><a class=\"markdownIt-Anchor\" href=\"#æœ¬æ–‡å‚è€ƒ\"></a> æœ¬æ–‡å‚è€ƒ</h1>\n<ul>\n<li><a href=\"https://leetcode.cn/problems/minimum-sum-of-mountain-triplets-i/solutions/2493551/on-zuo-fa-mei-ju-numsjqian-hou-zhui-fen-xweo4/\">2908. å…ƒç´ å’Œæœ€å°çš„å±±å½¢ä¸‰å…ƒç»„ I  é¢˜è§£ï¼šO(n) å‰åç¼€åˆ†è§£ï¼Œé™„é¢˜å• - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></li>\n<li>LeetCode ç›¸å…³é¢˜è§£</li>\n</ul>\n","raw":"---\ntitle: å‰åç¼€åˆ†è§£çš„åº”ç”¨\ntags:\n  - LeetCode\n  - å‰ç¼€å’Œ\n  - åŠ¨æ€è§„åˆ’\n  - å“ˆå¸Œè¡¨\n  - Java\ncover: 'https://cdn.gallery.uuanqin.top/img/202409220021307.webp'\ncategories:\n  - ç®—æ³•ä¸æ•°æ®ç»“æ„\nabbrlink: 59af443f\ndescription: åŠ¨æ€è§„åˆ’çš„ç®€å•è¿ç”¨ï¼Œæ‰“éã€Œè¿ç»­å­æ•°ç»„ã€ã€Œæ¥é›¨æ°´ã€\nkatex: true\ndate: 2024-09-21 19:12:16\ntop_img:\n---\n\næœ¬æ–‡é¢˜ç›®éš¾åº¦æ ‡è¯†ï¼šğŸŸ©ç®€å•ï¼ŒğŸŸ¨ä¸­ç­‰ï¼ŒğŸŸ¥å›°éš¾ã€‚\n\n# å‰ç¼€å’Œ\n\nå¯¹äºã€Œè¿ç»­å­æ•°ç»„é—®é¢˜ã€ä¸€èˆ¬å¯ä»¥é€šè¿‡å‰ç¼€å’Œæ–¹å¼è§£å†³ã€‚\n\n> [!example] é¢˜ç›®ï¼šğŸŸ¨ [560. å’Œä¸º K çš„å­æ•°ç»„ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/subarray-sum-equals-k/description/)\n> ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•° k ï¼Œè¯·ä½ ç»Ÿè®¡å¹¶è¿”å› è¯¥æ•°ç»„ä¸­å’Œä¸º k çš„å­æ•°ç»„çš„ä¸ªæ•° ã€‚\n>\n> å­æ•°ç»„æ˜¯æ•°ç»„ä¸­å…ƒç´ çš„è¿ç»­éç©ºåºåˆ—ã€‚\n\næš´åŠ›æšä¸¾ï¼š\n\n- æ—¶é—´å¤æ‚åº¦ï¼š$O(n^2)$ï¼Œå…¶ä¸­ n ä¸ºæ•°ç»„çš„é•¿åº¦ã€‚æšä¸¾å­æ•°ç»„å¼€å¤´å’Œç»“å°¾éœ€è¦ $O(n^2)$ çš„æ—¶é—´ï¼Œå…¶ä¸­æ±‚å’Œéœ€è¦ $O(1)$ çš„æ—¶é—´å¤æ‚åº¦ï¼Œå› æ­¤æ€»æ—¶é—´å¤æ‚åº¦ä¸º $O(n^2)$ã€‚\n- ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$ã€‚åªéœ€è¦å¸¸æ•°ç©ºé—´å­˜æ”¾è‹¥å¹²å˜é‡ã€‚\n\nä¸‹é¢ä»‹ç»å‰ç¼€å’Œ + å“ˆå¸Œè¡¨ä¼˜åŒ–æ–¹æ³•ã€‚\n\nå®šä¹‰ `pre[i]` ä¸º `[0..i]` é‡Œæ‰€æœ‰æ•°çš„å’Œï¼Œåˆ™ `pre[i]` å¯ä»¥ç”± `pre[iâˆ’1]` é€’æ¨è€Œæ¥ï¼Œå³ï¼š`pre[i]=pre[iâˆ’1]+nums[i]`ã€‚\n\né‚£ä¹ˆã€Œ`[j..i]` è¿™ä¸ªå­æ•°ç»„å’Œä¸º `k` ã€è¿™ä¸ªæ¡ä»¶æˆ‘ä»¬å¯ä»¥è½¬åŒ–ä¸º `pre[i]âˆ’pre[jâˆ’1]==k`ã€‚\n\nå› æ­¤æˆ‘ä»¬å¯ä»¥åœ¨éå†çš„åŒæ—¶è®¡ç®—å‰ç¼€å’Œ `pre[i]` æ—¶ï¼Œæ‰¾ä¸€ä¸‹å“ˆå¸Œè¡¨ä¸­æœ‰æ²¡æœ‰å­˜æœ‰ `pre[jâˆ’1]` å³å¯ã€‚\n\n```java\npublic int subarraySum(int[] nums, int k) {\n\tint count = 0, pre = 0;\n\tHashMap < Integer, Integer > mp = new HashMap < > ();\n\tmp.put(0, 1); // è€ƒè™‘åˆ°ç­”æ¡ˆæ˜¯æ•´ä¸ªå‰ç¼€æœ¬èº«çš„æƒ…å†µ\n\tfor (int i = 0; i < nums.length; i++) {\n\t\tpre += nums[i];\n\t\tif (mp.containsKey(pre - k)) {\n\t\t\tcount += mp.get(pre - k);\n\t\t}\n\t\tmp.put(pre, mp.getOrDefault(pre, 0) + 1);\n\t}\n\treturn count;\n}\n```\n\nå¤æ‚åº¦åˆ†æï¼š\n\n- æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$ï¼Œå…¶ä¸­ n ä¸ºæ•°ç»„çš„é•¿åº¦ã€‚æˆ‘ä»¬éå†æ•°ç»„çš„æ—¶é—´å¤æ‚åº¦ä¸º $O(n)$ï¼Œä¸­é—´åˆ©ç”¨å“ˆå¸Œè¡¨æŸ¥è¯¢åˆ é™¤çš„å¤æ‚åº¦å‡ä¸º $O(1)$ï¼Œå› æ­¤æ€»æ—¶é—´å¤æ‚åº¦ä¸º $O(n)$ã€‚\n- ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$ï¼Œå…¶ä¸­ n ä¸ºæ•°ç»„çš„é•¿åº¦ã€‚å“ˆå¸Œè¡¨åœ¨æœ€åæƒ…å†µä¸‹å¯èƒ½æœ‰ n ä¸ªä¸åŒçš„é”®å€¼ï¼Œå› æ­¤éœ€è¦ $O(n)$ çš„ç©ºé—´å¤æ‚åº¦ã€‚\n\nç›¸å…³é¢˜ç›®ï¼š\n\n- ğŸŸ¨ [974. å’Œå¯è¢« K æ•´é™¤çš„å­æ•°ç»„ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/subarray-sums-divisible-by-k/description/) å¯¹ [[ã€æ•°è®ºã€‘æ•´é™¤ã€æ¨¡è¿ç®—å’ŒåŒä½™|åŒä½™å®šç†]] çš„è€ƒå¯Ÿã€‚\n- ğŸŸ¨ [523. è¿ç»­çš„å­æ•°ç»„å’Œ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/continuous-subarray-sum/description/) å¯¹ [[ã€æ•°è®ºã€‘æ•´é™¤ã€æ¨¡è¿ç®—å’ŒåŒä½™|åŒä½™å®šç†]] çš„è€ƒå¯Ÿï¼Œå¹¶ä¸”é™åˆ¶äº†æ•°ç»„é•¿åº¦ï¼Œä¸éœ€è¦ç»Ÿè®¡ç¬¦åˆæ¡ä»¶çš„ä¸ªæ•°ã€‚\n- ğŸŸ¨ [53. æœ€å¤§å­æ•°ç»„å’Œ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/maximum-subarray/description/)ã€‚è§£æ³•è¯¦çœ‹ [[æœ€å¤§å­æ•°ç»„é—®é¢˜]]ã€‚\n\n# å‰ç¼€ã€Œæ¡ä»¶ã€å’Œ\n\næˆ‘è¿™é‡Œèµ·åå‰ç¼€ã€Œæ¡ä»¶ã€å’Œï¼Œæ˜¯å› ä¸ºè¿™é‡Œ `nums` å…ƒç´ å¿…é¡»æ»¡è¶³ä¸€å®šæ¡ä»¶ï¼Œæ‰ç»Ÿè®¡å…¥å‰ç¼€å’Œã€‚\n\n> [!example] é¢˜ç›®ï¼šğŸŸ¨ [1248. ç»Ÿè®¡ã€Œä¼˜ç¾å­æ•°ç»„ã€ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/count-number-of-nice-subarrays/description/)\n> ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` å’Œä¸€ä¸ªæ•´æ•° kã€‚å¦‚æœæŸä¸ªè¿ç»­å­æ•°ç»„ä¸­æ°å¥½æœ‰ k ä¸ªå¥‡æ•°æ•°å­—ï¼Œæˆ‘ä»¬å°±è®¤ä¸ºè¿™ä¸ªå­æ•°ç»„æ˜¯ã€Œä¼˜ç¾å­æ•°ç»„ã€ã€‚\n>\n> è¯·è¿”å›è¿™ä¸ªæ•°ç»„ä¸­ ã€Œä¼˜ç¾å­æ•°ç»„ã€ çš„æ•°ç›®ã€‚\n\næœ¬é¢˜å’Œä¸Šé¢˜ååˆ†ç›¸åƒã€‚ä¸å‰ç¼€å’Œè§£æ³•ä¸åŒçš„æ˜¯ï¼Œæˆ‘ä»¬å®šä¹‰çš„å‰ç¼€æ•°ç»„ç´¯ç§¯çš„æ˜¯ç¬¦åˆç‰¹å®šæ¡ä»¶ï¼ˆåœ¨æœ¬é¢˜é‡Œä¸ºå¥‡æ•°æ•°å­—ï¼‰çš„å…ƒç´ æ•°ç›®ã€‚\n\næˆ‘ä»¬å®šä¹‰ `pre[i]` ä¸º `[0..i]` ä¸­å¥‡æ•°çš„ä¸ªæ•°ï¼Œåˆ™ `pre[i]` å¯ä»¥ç”± `pre[iâˆ’1]` é€’æ¨è€Œæ¥ï¼Œå³ï¼š`pre[i]=pre[iâˆ’1]+(nums[i]&1)`ã€‚\n\né‚£ä¹ˆã€Œ`[j..i]` è¿™ä¸ªå­æ•°ç»„é‡Œçš„å¥‡æ•°ä¸ªæ•°æ°å¥½ä¸º k ã€è¿™ä¸ªæ¡ä»¶æˆ‘ä»¬å¯ä»¥è½¬åŒ–ä¸º `pre[i]âˆ’pre[jâˆ’1]==k`ã€‚\n\nå› æ­¤æˆ‘ä»¬å¯ä»¥åœ¨éå†çš„åŒæ—¶è®¡ç®—å‰ç¼€å’Œ `pre[i]` æ—¶ï¼Œæ‰¾ä¸€ä¸‹å“ˆå¸Œè¡¨ä¸­æœ‰æ²¡æœ‰å­˜æœ‰ `pre[jâˆ’1]` å³å¯ã€‚\n\n```java\npublic int numberOfSubarrays(int[] nums, int k) {\n\tint res = 0, pre = 0;\n\tHashMap < Integer, Integer > mp = new HashMap < > ();\n\tmp.put(0, 1); // è€ƒè™‘åˆ°ç­”æ¡ˆæ˜¯æ•´ä¸ªå‰ç¼€æœ¬èº«çš„æƒ…å†µ\n\tfor (int i = 0; i < nums.length; i++) {\n\t\tpre += nums[i]&1;\n\t\tif (mp.containsKey(pre - k)) {\n\t\t\tres += mp.get(pre - k);\n\t\t}\n\t\tmp.put(pre, mp.getOrDefault(pre, 0) + 1);\n\t}\n\treturn res;\n}\n```\n\nå¤æ‚åº¦åˆ†æ:\n\n- æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$ï¼Œå…¶ä¸­ n ä¸ºæ•°ç»„çš„å¤§å°ã€‚æˆ‘ä»¬åªéœ€è¦éå†ä¸€éæ•°ç»„å³å¯æ±‚å¾—ç­”æ¡ˆã€‚\n- ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$ï¼Œå…¶ä¸­ n ä¸ºæ•°ç»„çš„å¤§å°ã€‚å“ˆå¸Œè¡¨åœ¨æœ€åæƒ…å†µä¸‹å¯èƒ½æœ‰ n ä¸ªä¸åŒçš„é”®å€¼ï¼Œå› æ­¤éœ€è¦ $O(n)$ çš„ç©ºé—´å¤æ‚åº¦ã€‚\n\nç›¸å…³é¢˜ç›®ï¼š\n\n- ğŸŸ¨ [795. åŒºé—´å­æ•°ç»„ä¸ªæ•° - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/number-of-subarrays-with-bounded-maximum/description/?envType=problem-list-v2&envId=two-pointers) ç¨å¾®å¤æ‚çš„å‰ç¼€ç‰¹å¾\n\n# å‰ç¼€ç‰¹å¾\n\næ‰€è°“å‰ç¼€ç‰¹å¾æŒ‡çš„å°±æ˜¯ `pre[i]` ä»£è¡¨ `nums[0]` åˆ° `nums[i]` ä¸­çš„ä¸€ä¸ªç‰¹å¾å€¼æ˜¯å¤šå°‘ã€‚æ¯”å¦‚ï¼š\n\n- `pre[i]` ä»£è¡¨ `nums[0]` åˆ° `nums[i]` ä¸­çš„æœ€å¤§å€¼/æœ€å°å€¼ã€‚\n- `pre[i]` ä»£è¡¨ `nums[0]` åˆ° `nums[i]` ä¸­æœ€åä¸€æ¬¡æ»¡è¶³ xxx æ¡ä»¶çš„å€¼ã€‚\n\nä»è¿™é‡Œå¼€å§‹ï¼Œ**åŠ¨æ€è§„åˆ’**çš„å‘³é“å°±å¼€å§‹ä¸Šæ¥äº†ã€‚\n\n> [!example] é¢˜ç›®ï¼šğŸŸ¨ [795. åŒºé—´å­æ•°ç»„ä¸ªæ•° - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/number-of-subarrays-with-bounded-maximum/description/?envType=problem-list-v2&envId=two-pointers)\n>\n> ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` å’Œä¸¤ä¸ªæ•´æ•°ï¼š`left` åŠ `right` ã€‚æ‰¾å‡º `nums` ä¸­è¿ç»­ã€éç©ºä¸”å…¶ä¸­æœ€å¤§å…ƒç´ åœ¨èŒƒå›´ `[left, right]` å†…çš„å­æ•°ç»„ï¼Œå¹¶è¿”å›æ»¡è¶³æ¡ä»¶çš„å­æ•°ç»„çš„ä¸ªæ•°ã€‚\n>\n> ç”Ÿæˆçš„æµ‹è¯•ç”¨ä¾‹ä¿è¯ç»“æœç¬¦åˆ **32-bit** æ•´æ•°èŒƒå›´ã€‚\n\nä¸€ä¸ªå­æ•°ç»„çš„æœ€å¤§å€¼èŒƒå›´åœ¨ `[left,right]` è¡¨ç¤ºå­æ•°ç»„ä¸­ä¸èƒ½å«æœ‰å¤§äº right çš„å…ƒç´ ï¼Œä¸”è‡³å°‘å«æœ‰ä¸€ä¸ªå¤„äº `[left,right]` åŒºé—´çš„å…ƒç´ ã€‚\n\næˆ‘ä»¬å¯ä»¥å°†æ•°ç»„ä¸­çš„å…ƒç´ åˆ†ä¸ºä¸‰ç±»ï¼Œå¹¶åˆ†åˆ«ç”¨ 0, 1, 2 æ¥è¡¨ç¤ºï¼š\n\n- å°äº `left`ï¼Œç”¨ 0 è¡¨ç¤ºï¼›\n- å¤§äºç­‰äº `left` ä¸”å°äºç­‰äº `right`ï¼Œç”¨ 1 è¡¨ç¤ºï¼›\n- å¤§äº `right`ï¼Œç”¨ 2 è¡¨ç¤ºã€‚\n\né‚£ä¹ˆæœ¬é¢˜å¯ä»¥è½¬æ¢ä¸ºæ±‚è§£ä¸åŒ…å« 2ï¼Œä¸”è‡³å°‘åŒ…å«ä¸€ä¸ª 1 çš„å­æ•°ç»„æ•°ç›®ã€‚æˆ‘ä»¬éå† iï¼Œå¹¶å°†å³ç«¯ç‚¹å›ºå®šåœ¨ iï¼Œæ±‚è§£æœ‰å¤šå°‘åˆæ³•çš„å­åŒºé—´ã€‚è¿‡ç¨‹ä¸­éœ€è¦ç»´æŠ¤ä¸¤ä¸ªå˜é‡ï¼š\n\n- `last1`ï¼Œè¡¨ç¤ºä¸Šä¸€æ¬¡ 1 å‡ºç°çš„ä½ç½®ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™ä¸º âˆ’1ï¼›\n- `last2`ï¼Œè¡¨ç¤ºä¸Šä¸€æ¬¡ 2 å‡ºç°çš„ä½ç½®ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™ä¸º âˆ’1ã€‚\n\nå¦‚æœ `last1 != âˆ’1`ï¼Œé‚£ä¹ˆå­æ•°ç»„è‹¥ä»¥ i ä¸ºå³ç«¯ç‚¹ï¼Œåˆæ³•çš„å·¦ç«¯ç‚¹å¯ä»¥è½åœ¨ `(last2,last1]` ä¹‹é—´ã€‚è¿™æ ·çš„å·¦ç«¯ç‚¹å…±æœ‰ `last1âˆ’last2` ä¸ªã€‚\n\nå› æ­¤ï¼Œæˆ‘ä»¬éå† `i`ï¼š\n\n- å¦‚æœ `leftâ‰¤nums[i]â‰¤right`ï¼Œä»¤ `last1=i`ï¼›\n- å¦åˆ™å¦‚æœ `nums[i]>right`ï¼Œä»¤ `last2=i, last1=âˆ’1`ã€‚\n\nç„¶åå°† `last1âˆ’last2` ç´¯åŠ åˆ°ç­”æ¡ˆä¸­å³å¯ã€‚æœ€åçš„æ€»å’Œå³ä¸ºé¢˜ç›®æ‰€æ±‚ã€‚\n\n```java\nclass Solution {\n    public int numSubarrayBoundedMax(int[] nums, int left, int right) {\n        int res = 0, last2 = -1, last1 = -1;\n        for (int i = 0; i < nums.length; i++) {\n            if (nums[i] >= left && nums[i] <= right) {\n                last1 = i;\n            } else if (nums[i] > right) {\n                last2 = i;\n                last1 = -1;\n            }\n            if (last1 != -1) {\n                res += last1 - last2;\n            }\n        }\n        return res;\n    }\n}\n```\n\n# å‰åç¼€ç‰¹å¾\n\næœ‰ä¸€äº›é¢˜ç›®éœ€è¦ç»¼åˆè¿ç”¨å‰åç¼€ç‰¹å¾è¿›è¡Œæ±‚è§£ã€‚\n\n> [!example] é¢˜ç›®ï¼šğŸŸ© [2908. å…ƒç´ å’Œæœ€å°çš„å±±å½¢ä¸‰å…ƒç»„ I - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/minimum-sum-of-mountain-triplets-i/description/)\n>\n> ç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹çš„æ•´æ•°æ•°ç»„ nums ã€‚\n>\n> å¦‚æœä¸‹æ ‡ä¸‰å…ƒç»„ (i, j, k) æ»¡è¶³ä¸‹è¿°å…¨éƒ¨æ¡ä»¶ï¼Œåˆ™è®¤ä¸ºå®ƒæ˜¯ä¸€ä¸ª å±±å½¢ä¸‰å…ƒç»„ ï¼š\n> - `i < j < k`\n> - `nums[i] < nums[j]` ä¸” `nums[k] < nums[j]`\n>\n> è¯·ä½ æ‰¾å‡º nums ä¸­ å…ƒç´ å’Œæœ€å° çš„å±±å½¢ä¸‰å…ƒç»„ï¼Œå¹¶è¿”å›å…¶ å…ƒç´ å’Œ ã€‚å¦‚æœä¸å­˜åœ¨æ»¡è¶³æ¡ä»¶çš„ä¸‰å…ƒç»„ï¼Œè¿”å› -1 ã€‚\n\né™¤äº†æš´åŠ›æ–¹æ³•å¤–ï¼Œè¿˜æœ‰ä»€ä¹ˆåˆ«çš„æ–¹æ³•ä½¿æ—¶é—´å¤æ‚åº¦å°†ä¸º $O(n)$ï¼Ÿ\n\næ€è·¯ï¼šæšä¸¾ä¸­é—´çš„æ•° `nums[j]`ï¼Œæ‰¾åˆ° `nums[j]` å·¦è¾¹æœ€å°çš„å€¼å’Œå³è¾¹æœ€å°çš„å€¼ï¼Œç„¶åæ£€æŸ¥è¿™ä¸‰ä¸ªæ•°æ˜¯å¦ç¬¦åˆè¦æ±‚ï¼Œå†æ›´æ–°ç­”æ¡ˆã€‚\n\nå®šä¹‰ `preMin[i]` è¡¨ç¤ºä» `nums[0]` åˆ° `nums[i]` çš„æœ€å°å€¼ï¼Œå®šä¹‰ `sufMin[i]` è¡¨ç¤º `nums[i]` åˆ° `nums[n-1]` çš„æœ€å°å€¼ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ $O(n)$ çš„æ—¶é—´å†…å®Œæˆè®¡ç®—ã€‚\n\n```java\npublic int minimumSum(int[] nums) {\n\tint n = nums.length;\n\n\t// è®¡ç®— preMin\n\tint[] preMin = new int[n]; // å‰ç¼€\n\tpreMin[0] = nums[0];\n\tfor (int i = 1; i < n-1; i++) {\n\t\tpreMin[i] = Math.min(preMin[i - 1], nums[i]); // è¿™å…¶å®æ˜¯ä¸€ç§åŠ¨æ€è§„åˆ’æ€æƒ³\n\t}\n\n\t// è®¡ç®— sufMin\n\tint[] sufMin = new int[n]; // åç¼€æœ€å°å€¼\n\tsufMin[n - 1] = nums[n - 1];\n\tfor (int i = n - 2; i > 1; i--) {\n\t\tsufMin[i] = Math.min(sufMin[i + 1], nums[i]); \n\t}\n\n\t// è®¡ç®—æœ€ç»ˆç­”æ¡ˆ\n\tint res = Integer.MAX_VALUE;\n\tfor(int i=1;i<n-1;i++){\n\t\tif(preMin[i-1]<nums[i] && nums[i]>sufMin[i+1]){\n\t\t\tres = Math.min(res,preMin[i-1]+nums[i]+sufMin[i+1]);\n\t\t}\n\t}\n\treturn res == Integer.MAX_VALUE? -1 : res;\n}\n```\n\n> [!example] æ€è€ƒé¢˜ï¼šä½ å¯ä»¥å°†è®¡ç®— `preMin` ä¸æ¢ç´¢ç­”æ¡ˆçš„è¿‡ç¨‹ç»“åˆèµ·æ¥ï¼Œä»¥å‡å°‘éå†æ¬¡æ•°å’Œç©ºé—´å—ï¼Ÿ\n> è¿™ç§å°† `preMin` å’Œç­”æ¡ˆéå†è¿‡ç¨‹ç»“åˆèµ·æ¥çš„åšæ³•ç›¸å½“äº [[ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº]] ä¸­çš„ä¸€æ¬¡éå†åšæ³•ã€‚\n\nç›¸å…³é¢˜ç›®ï¼š\n\n- ğŸŸ© [2873. æœ‰åºä¸‰å…ƒç»„ä¸­çš„æœ€å¤§å€¼ I - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/maximum-value-of-an-ordered-triplet-i/description/)\n- ğŸŸ© [121. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/best-time-to-buy-and-sell-stock/description/)\n- ğŸŸ¨ [2012. æ•°ç»„ç¾ä¸½å€¼æ±‚å’Œ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/sum-of-beauty-in-the-array/description/?envType=daily-question&envId=2025-03-11)\n\n\n> [!example] é¢˜ç›®ï¼šğŸŸ¥ [42. æ¥é›¨æ°´ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/trapping-rain-water/description/)\n> ç»™å®š `n` ä¸ªéè´Ÿæ•´æ•°è¡¨ç¤ºæ¯ä¸ªå®½åº¦ä¸º `1` çš„æŸ±å­çš„é«˜åº¦å›¾ï¼Œè®¡ç®—æŒ‰æ­¤æ’åˆ—çš„æŸ±å­ï¼Œä¸‹é›¨ä¹‹åèƒ½æ¥å¤šå°‘é›¨æ°´ã€‚\n\næ€è·¯ï¼šæ¯ä¸€ä¸ªä½ç½® i èƒ½æ¥åˆ°çš„é›¨æ°´ï¼Œç›¸å½“äºå·¦ä¾§æœ€å¤§å€¼ä¸å³ä¾§æœ€å¤§å€¼ä¸­è¾ƒå°çš„é‚£ä¸ªå€¼ï¼Œå‡å»è‡ªèº«çš„é«˜åº¦ã€‚\n\n![image.png](https://cdn.gallery.uuanqin.top/img/202409212140018.webp)\n\nå¤æ‚åº¦åˆ†æï¼š\n\n- æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$ï¼Œå…¶ä¸­ n æ˜¯æ•°ç»„ `height` çš„é•¿åº¦ã€‚è®¡ç®—æ•°ç»„ `leftMax` å’Œ `rightMax` çš„å…ƒç´ å€¼å„éœ€è¦éå†æ•°ç»„ `height` ä¸€æ¬¡ï¼Œè®¡ç®—èƒ½æ¥çš„é›¨æ°´æ€»é‡è¿˜éœ€è¦éå†ä¸€æ¬¡ã€‚\n- ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$ï¼Œå…¶ä¸­ n æ˜¯æ•°ç»„ `height` çš„é•¿åº¦ã€‚éœ€è¦åˆ›å»ºä¸¤ä¸ªé•¿åº¦ä¸º n çš„æ•°ç»„ `leftMax` å’Œ `rightMax`ã€‚\n\n# å‰åç¼€å’Œ/ç§¯\n\nç›¸å…³é¢˜ç›®ï¼š\n\n- ğŸŸ¨ [238. é™¤è‡ªèº«ä»¥å¤–æ•°ç»„çš„ä¹˜ç§¯ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/product-of-array-except-self/description/)\n- ğŸŸ¨ [2906. æ„é€ ä¹˜ç§¯çŸ©é˜µ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/construct-product-matrix/description/)\n\n# æœ¬æ–‡å‚è€ƒ\n\n- [2908. å…ƒç´ å’Œæœ€å°çš„å±±å½¢ä¸‰å…ƒç»„ I  é¢˜è§£ï¼šO(n) å‰åç¼€åˆ†è§£ï¼Œé™„é¢˜å• - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/minimum-sum-of-mountain-triplets-i/solutions/2493551/on-zuo-fa-mei-ju-numsjqian-hou-zhui-fen-xweo4/)\n- LeetCode ç›¸å…³é¢˜è§£\n","categories":[{"name":"ç®—æ³•ä¸æ•°æ®ç»“æ„","api":"api/categories/ç®—æ³•ä¸æ•°æ®ç»“æ„.json"}],"tags":[{"name":"Java","api":"api/tags/Java.json"},{"name":"LeetCode","api":"api/tags/LeetCode.json"},{"name":"åŠ¨æ€è§„åˆ’","api":"api/tags/åŠ¨æ€è§„åˆ’.json"},{"name":"å“ˆå¸Œè¡¨","api":"api/tags/å“ˆå¸Œè¡¨.json"},{"name":"å‰ç¼€å’Œ","api":"api/tags/å‰ç¼€å’Œ.json"}]},"api":"api/posts/p/59af443f.json"}