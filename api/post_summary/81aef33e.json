{"title":"Waline 评论安全","tags":["Waline","Vercel","GitHub","Turnstile","Askimet","Butterfly"],"cover":"https://cdn.gallery.uuanqin.top/img/diy-waline.png","description":"避免恶意用户骚扰","categories":["博客站点维护","Waline"],"abbrlink":"81aef33e","date":"2023-04-28T16:15:12.000Z","top_img":null,"summary":"> [!note] 文章解耦 `241024`：解耦自 [[【索引】定制自己的 Waline 评论系统]] 关于评论安全博主分享自己的一些经验： 不法分子会利用特殊方法将违规内容评论在站点不存在的链接上。站长需及时接收评论通知并检查 Waline 后端及时处理。 不法分子的评论文本也许会很正常，但携带只有在外网才能查看的违规图片，导致一些站长在平时日常检视、邮件通知中没有留意。这种情况需要多加留心，我们可以在 Waline 后台点击评论的编辑按钮查看是否携带了不明链接。 参看官方文档完善更多的安全措施：服务端环境变量 | Waline 设置违禁词（服务端配置） > 最近苦于梯子广告入侵，设置违禁词可以解决这个问题。 修改在 Github 上 Waline 文件 `index.js`： 评论带有违禁词的统一当做垃圾评论处理，存在误判的话可以从垃圾箱中恢复。 参考：服务端配置 | Waline 设置 IP 黑名单 > 最近存在沙币乱评论，得试试黑名单功能了 配置方法和设置违禁词一样： 参考：服务端配置 | Waline 使用 Turnstile 验证码服务 Turnstile 服务注册 Cloudflare Turnstile 是一款替代 CAPTCHA 的免费工具，相比于谷歌 reCAPTCHA，它不需要繁琐的选择红绿灯消防栓之类的交互。 根据网站提示自己注册一个。 配置时安全域名需要同时添加网站地址和 Waline 服务端地址（不包含传输协议，即 `http://` 或 `https://`）。 记住这两串 KEY，待会配置需要用到： > 注意，打算关闭 Turnstile 时服务端环境变量和客户端配置要同时删去。免去不必要的错误 [^turn]。 [^turn]: [[Bug]: 未登录用户评论时报Forbidden提示 Issue #2427 · walinejs/waline (github.com)](https://github.com/walinejs/waline/issues/2427) 服务端配置 > 以 Vercel 部署方案为例 打开 Vercel 中 waline 服务端项目的环境变量设置，新建这两个环境变量并输入对应的值。..."}