{"title":"对电脑端微信小程序抓包","tags":["微信小程序","微信","Charles","Burp"],"cover":"https://cdn.gallery.uuanqin.top/img/20240417234049.webp","description":"关闸远离我","abbrlink":"5744d011","categories":["核心协同"],"date":"2024-04-17T22:54:39.000Z","top_img":null,"summary":"> [!warning] 免责声明：本文仅供学习和交流，切勿用于违法行为。本文作者不对读者的不当使用负责。 起因是我所住的宿舍水电费用得很快，不知道什么时候欠费就把闸给关了。我们交电费和查电费是通过微信小程序进行的，想想能不能抓到 API 地址，以后派爬虫定时去查。避免关闸情况的发生。 前期简单调研了解到直接通过电脑抓手机的包可能有点麻烦，现尝试能不能通过在电脑上登录小程序抓取我们需要的东西。 这篇文章就以获取某小程序余额数据为例演示电脑抓包过程。 准备工作 软件安装： Charles（30 天试用，应该有破解版） Burp Suite（下载社区版应该不要钱） > 实测：N 个月后软件还能用，起码这篇文章的操作是可以完成的。 然后看一下电脑端小程序能不能正常查询水电费余额： Charles 软件中的操作 如下图所示安装证书： 安装到受信任的根证书颁发机构： 接下来配置代理： 接下来配置 SSL 代理设置： `*` 是代表抓取任意端口和域名，如果只抓取固定的端口 or 域名可自行设置。 接下来配置将数据包代理到 BurpSuite： 注意，Web Proxy（HTTP）和 Secure Web Peoxy（HTTPS）都需要填写 127.0.0.1 以及端口（这里填的都是 8091），这和后续配置 BurpSuite 代理的端口一致。 Burp Suite 软件中的操作 接下来你就可以在拦截历史中抓到包了： 通过返回的数据可以精准定位我们需要的 GET 参数。 本文参考 【Windows】 一个能用的微信小程序抓包方式（亲测） - 知乎 (zhihu.com)"}