{"data":{"title":"Ant Design Pro å‰ç«¯é¡¹ç›®åˆå§‹åŒ–åˆ°éƒ¨ç½²ä¸Šçº¿","slug":"æŠ€æœ¯å­¦ä¹ /Ant Design Pro å‰ç«¯é¡¹ç›®åˆå§‹åŒ–åˆ°éƒ¨ç½²ä¸Šçº¿","description":"å¤‡å¿˜ä¸€ä¸‹ Ant Design Pro ä¸Šçº¿å…³é”®æµç¨‹","date":"2024-04-10T16:18:37.000Z","updated":"2025-07-02T15:10:01.351Z","language":"zh-CN","comments":true,"url":"p/3d8f61f0/","cover":"https://cdn.gallery.uuanqin.top/img/20240410234822.webp","images":[],"content":"<h1 id=\"åˆå§‹åŒ–\"><a class=\"markdownIt-Anchor\" href=\"#åˆå§‹åŒ–\"></a> åˆå§‹åŒ–</h1>\n\n<div class=\"callout\" data-callout=\"warning\">\n<div class=\"callout-title\">\n<div class=\"callout-title-icon\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-alert-triangle\"><path d=\"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z\"/><path d=\"M12 9v4\"/><path d=\"M12 17h.01\"/></svg>\n</div>\n<div class=\"callout-title-inner\">æ­å»ºæ–¹æ³•éšæ—¶å¯èƒ½æ›´æ–°ï¼Œè¯·æ³¨æ„æŸ¥çœ‹æœ€æ–°å®˜ç½‘ç›¸å…³æ–‡æ¡£</div>\n</div>\n<div class=\"callout-content\"><p></p>\n</div></div><p>Ant Design Pro æ˜¯åŸºäº Ant Design å’Œ umi çš„å°è£…çš„ä¸€æ•´å¥—ä¼ä¸šçº§ä¸­åå°å‰ç«¯/è®¾è®¡è§£å†³æ–¹æ¡ˆã€‚</p>\n<p>å®˜ç½‘ï¼š<a href=\"https://pro.ant.design/zh-CN/docs/getting-started/\">pro.ant.design/zh-CN/docs/getting-started/</a></p>\n<p>ä¸€äº›å‡†å¤‡ï¼š</p>\n<ul>\n<li>å‰ç«¯å¼€å‘å·¥å…·å¯ä»¥ä½¿ç”¨ vscodeï¼Œæˆ– WebStormã€‚</li>\n<li>yarnï¼š<a href=\"https://yarn.nodejs.cn/en/docs/install#windows-stable\">å®‰è£… | Yarn ä¸­æ–‡ç½‘ (nodejs.cn)</a>ã€‚yarn æ˜¯å¹¶è¡Œçš„ npmã€‚ä¸€å¥è¯ï¼š<code>npm install --global yarn</code></li>\n</ul>\n<p>ç”±äºå›½å†…ç½‘ç»œå’Œå‰ç«¯çš„ç‰¹æ®Šæ€§ï¼Œåœ¨å®‰è£…ä¾èµ–ç­‰æ–¹é¢å¯èƒ½ä¼šå¤±è´¥æˆ–å¯¼è‡´æ— æ³•å¯åŠ¨ï¼Œæµªè´¹å¤§é‡çš„æ—¶é—´ï¼Œå› æ­¤ Ant Design æ¨èä½¿ç”¨ <a href=\"https://www.npmjs.com/package/tyarn\">tyarn - npm (npmjs.com)</a> åŠ <a href=\"https://www.npmjs.com/package/cnpm\">cnpm - npm (npmjs.com)</a> å·¥å…·ã€‚</p>\n<p>ä¸»è¦æ­å»ºæŒ‡ä»¤ï¼š</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i @ant-design/pro-cli -g   # å…¨å±€å®‰è£…</span><br><span class=\"line\">pro create myapp               # åœ¨é¡¹ç›®æ–‡ä»¶å¤¹ä¸‹ä½¿ç”¨ï¼Œmyappä¸ºé¡¹ç›®å</span><br></pre></td></tr></table></figure>\n\n<div class=\"callout\" data-callout=\"error\">\n<div class=\"callout-title\">\n<div class=\"callout-title-icon\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-zap\"><polygon points=\"13 2 3 14 12 14 11 22 21 10 12 10 13 2\"/></svg>\n</div>\n<div class=\"callout-title-inner\">ä¸€ä¸ªå¯èƒ½é‡åˆ°çš„é—®é¢˜</div>\n</div>\n<div class=\"callout-content\"><p>/usr/local/lib/node_modules/@ant-design/pro-cli/src/create/generators/ant-design-pro/index.js:10<br />\nconst sortPackage = require(â€˜sort-package-jsonâ€™);<br />\nError [ERR_REQUIRE_ESM]: require() of ES Module</p>\n<p>è§£å†³æ–¹æ³•ï¼š<br />\nè¿›å…¥ <code>@ant-design/pro-cli</code> å…¨å±€å®‰è£…ç›®å½•ï¼ˆä¸€èˆ¬åœ¨ <code>C:\\Users\\yourname\\AppData\\Roaming\\npm\\node_modules\\@ant-design\\pro-cli</code>ï¼‰ä¸­æ‰§è¡Œ <code>npm i sort-package-json@1.55.0 -D</code>ï¼ˆå¦‚æœåˆå§‹åŒ–å¤±è´¥åˆ™ <code>npm cache clean --force</code>ï¼‰ã€‚</p>\n</div></div><p>ä¸‹è½½å®Œæˆåç»ˆç«¯è¾“å…¥ï¼š</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn # å¦‚æœå¯ä»¥çš„è¯ï¼Œæ˜¯ tyarnã€‚å¦‚æœè¿˜å‡ºé”™ï¼Œå†è¯•è¯• cnpm install</span><br></pre></td></tr></table></figure>\n<p>é¡¹ç›®ç›®å½•å¯çœ‹åˆ°ç”Ÿæˆå¥½çš„ä¾èµ–åŒ…ï¼š<code>node_modules</code></p>\n<p>æ³¨æ„ï¼šè„šæ‰‹æ¶å·¥å…·ç”Ÿæˆäº†é¡¹ç›®å</p>\n<ul>\n<li>ä¸è¦æ”¹åŠ¨ä»»ä½•ä»£ç ï¼Œå…ˆä¿è¯é¡¹ç›®èƒ½è¿è¡Œ</li>\n<li>ç¡®è®¤ç¯å¢ƒæ˜¯å¦åŒ¹é…ã€å®‰è£…é¡¹ç›®ä¾èµ–</li>\n</ul>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn run start <span class=\"comment\"># ä½ å¯ä»¥çœ‹çœ‹package.jsoné‡Œçš„scriptï¼Œä»¥æ¨¡æ‹Ÿæ•°æ®çš„æ–¹å¼è¿è¡Œ</span></span><br><span class=\"line\"><span class=\"comment\"># npm run startä¹Ÿè¡Œ</span></span><br></pre></td></tr></table></figure>\n<p>æ³¨æ„ä½¿ç”¨ F12 åŠæ—¶çœ‹é”™è¯¯ã€‚</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/20240410232133.webp\" alt=\"image.png\" width=\"500px\" /></p>\n<blockquote>\n<p>react æ˜¯å¯¹ js çš„ä¸€å±‚å°è£…ï¼Œè€Œ umi æ˜¯å¯¹ react çš„è¿›ä¸€æ­¥å°è£…ã€‚</p>\n</blockquote>\n<h2 id=\"å¯é€‰ant-design-pro-é¡¹ç›®ç˜¦èº«\"><a class=\"markdownIt-Anchor\" href=\"#å¯é€‰ant-design-pro-é¡¹ç›®ç˜¦èº«\"></a> ã€å¯é€‰ã€‘Ant Design Pro é¡¹ç›®ç˜¦èº«</h2>\n\n<div class=\"callout\" data-callout=\"hint\">\n<div class=\"callout-title\">\n<div class=\"callout-title-icon\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-flame\"><path d=\"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z\"/></svg>\n</div>\n<div class=\"callout-title-inner\">é¡¹ç›®ç˜¦èº«è¿‡ç¨‹ä¸­ï¼Œæ¯åšä¸€æ­¥å°±è¿è¡Œæµ‹è¯•</div>\n</div>\n<div class=\"callout-content\"><p></p>\n</div></div><p>ç§»é™¤å›½é™…åŒ–æ¨¡å—ï¼ˆå›½é™…åŒ–é›†æˆäº†å¤šç§è¯­è¨€ï¼Œå¦‚æ— å›½é™…åŒ–éœ€æ±‚å¯ä»¥åˆ æ‰ï¼‰ï¼š<code>npm run i18n-remove</code>ã€‚è¿™ä¸ªè„šæœ¬å°†ä¼šå°è¯•åˆ é™¤é¡¹ç›®ä¸­æ‰€æœ‰çš„ i18n ä»£ç ï¼Œå¯¹äºå¤æ‚çš„è¿è¡Œæ—¶ä»£ç ï¼Œè¡¨ç°å¹¶ä¸å¥½ï¼Œæ…ç”¨ã€‚</p>\n<p>ç„¶åè‡ªå·±æ‰‹åŠ¨åˆ æ‰ <code>/src/locales</code> æ–‡ä»¶å¤¹ã€‚</p>\n<p>ä¸€äº›è§£å†³æ–¹æ¡ˆï¼š</p>\n<ul>\n<li><a href=\"https://github.com/ant-design/ant-design-pro/issues/11143\">ç§»é™¤å›½é™…åŒ–å‡ºç°SyntaxError: Export â€˜SelectLangâ€™ is not defined. (11:55) Â· Issue #11143</a>ã€‚æŠŠé¡¹ç›®æ ¹ç›®å½•ä¸‹ <code>src/components/index.js</code> ä¸­çš„ <code>SelectLang</code> å˜é‡åˆ é™¤åå°±è¡Œã€‚</li>\n<li><a href=\"https://github.com/ant-design/ant-design-pro/issues/10452\">ğŸ› BUGæ‰§è¡Œåˆ é™¤å›½é™…åŒ–å‘½ä»¤æŠ¥é”™ Â· Issue #10452 Â· ant-design/ant-design-pro (github.com)</a></li>\n<li>å·¦ä¾§å¯¼èˆªæ ä¸æ˜¾ç¤ºé—®é¢˜ï¼šç§»é™¤å›½é™…åŒ–åï¼Œé¡¹ç›®å·¦ä¾§å¯¼èˆªæ èœå•å’Œå³ä¸Šè§’é€€å‡ºç™»é™†æŒ‰é’®ä¸æ˜¾ç¤ºäº†ã€‚è§£å†³æ–¹æ³•ï¼šç»™ <code>/config/route.ts</code> é…ç½®æ–‡ä»¶çš„æ¯ä¸€ä¸ªè·¯ç”±éƒ½åŠ ä¸Šå¯¹åº”çš„ name å±æ€§ï¼Œå¦‚æœä¸æ·»åŠ  name å±æ€§ï¼Œåˆ™èœå•é»˜è®¤å±•ç¤ºçš„æ˜¯ path å±æ€§ã€‚è¿™é‡Œä¸€å®šè¦ç»™æ¯ä¸€ä¸ªè·¯ç”±éƒ½æ·»åŠ å¯¹åº”çš„ name å±æ€§ï¼Œä¸ç„¶å¯¼èˆªæ è¿˜æ˜¯ä¸æ˜¾ç¤ºã€‚</li>\n</ul>\n<p>å…¶å®ƒæ–‡ä»¶çš„åˆ é™¤ï¼ˆä¸åŒç‰ˆæœ¬ä¸‹çš„æ“ä½œç•¥æœ‰ä¸åŒï¼‰ï¼š</p>\n<ul>\n<li>ç§»é™¤æµ‹è¯•å·¥å…·ï¼š<code>/tests</code></li>\n<li>ï¼ˆåœ¨è€ç‰ˆæœ¬ä¸­å‡ºç°ï¼‰ç§»é™¤ e2eï¼ˆè‡ªåŠ¨åŒ–æµ‹è¯•ï¼‰ï¼šåˆ é™¤ <code>src/e2e</code> æ–‡ä»¶å¤¹</li>\n<li>ï¼ˆåœ¨è€ç‰ˆæœ¬ä¸­å‡ºç°ï¼‰ç§»å‡ºè‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶ <code>playwright.config.ts</code></li>\n<li>ç§»é™¤é»˜è®¤é¡µé¢æ—¶è®°å¾—åˆ æ‰è·¯ç”±</li>\n<li>ç§»é™¤ <code>/src/services/swagger</code> æ¥å£æ–‡æ¡£å·¥å…·</li>\n</ul>\n<h2 id=\"å¯é€‰ä½†ä¸æ¨èumi-ui-åŠ é€Ÿå¼€å‘\"><a class=\"markdownIt-Anchor\" href=\"#å¯é€‰ä½†ä¸æ¨èumi-ui-åŠ é€Ÿå¼€å‘\"></a> ã€å¯é€‰ä½†ä¸æ¨èã€‘Umi UI åŠ é€Ÿå¼€å‘</h2>\n\n<div class=\"callout\" data-callout=\"warning\">\n<div class=\"callout-title\">\n<div class=\"callout-title-icon\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-alert-triangle\"><path d=\"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z\"/><path d=\"M12 9v4\"/><path d=\"M12 17h.01\"/></svg>\n</div>\n<div class=\"callout-title-inner\">ç›®å‰ä¸å†æ¨èä½¿ç”¨ Umi UI ç»„ä»¶</div>\n</div>\n<div class=\"callout-content\"><p></p>\n</div></div><p>åªæœ‰æ¡†æ¶çš„ V3 ç‰ˆæœ¬æ”¯æŒæ‚¬æµ®çš„ Umi UI æŒ‰é’®ï¼š</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i @ant-design/pro-cli@3.1.0 -g</span><br><span class=\"line\">pro -v <span class=\"comment\"># æŸ¥çœ‹å½“å‰å®‰è£…çš„ç‰ˆæœ¬</span></span><br></pre></td></tr></table></figure>\n<p>æ—§ç‰ˆæœ¬è„šæ‰‹æ¶ï¼š</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/20240410233405.webp\" alt=\"image.png\" /></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn add @umijs/preset-ui -D</span><br></pre></td></tr></table></figure>\n<h1 id=\"å¤šç¯å¢ƒ\"><a class=\"markdownIt-Anchor\" href=\"#å¤šç¯å¢ƒ\"></a> å¤šç¯å¢ƒ</h1>\n<p>å…³é”®çš„ç¯å¢ƒå˜é‡ï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span></span><br><span class=\"line\"><span class=\"comment\">// &#x27;development&#x27;, &#x27;production&#x27;</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"æ„å»º\"><a class=\"markdownIt-Anchor\" href=\"#æ„å»º\"></a> æ„å»º</h1>\n<p>æ‰§è¡Œæ„å»ºå‘½ä»¤ï¼š</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm run build</span><br></pre></td></tr></table></figure>\n<p>æ„å»ºç”Ÿæˆçš„æ–‡ä»¶åœ¨æ–‡ä»¶å¤¹ <code>/dist</code> ä¸­ã€‚</p>\n<h1 id=\"éƒ¨ç½²\"><a class=\"markdownIt-Anchor\" href=\"#éƒ¨ç½²\"></a> éƒ¨ç½²</h1>\n<h2 id=\"æœ¬åœ°éƒ¨ç½²\"><a class=\"markdownIt-Anchor\" href=\"#æœ¬åœ°éƒ¨ç½²\"></a> æœ¬åœ°éƒ¨ç½²</h2>\n<blockquote>\n<p><a href=\"https://www.npmjs.com/package/serve\">serve</a> å·¥å…·å¯ä»¥åœ¨æœ¬åœ°å¯åŠ¨ä¸€ä¸ªé™æ€æ–‡ä»¶æœåŠ¡å™¨ã€‚å¦‚æœä½ éœ€è¦å°†ç½‘ç«™éƒ¨ç½²åˆ°æ­£å¼ç¯å¢ƒï¼Œå¯ä»¥ä½¿ç”¨ Vercel è¿›è¡Œéƒ¨ç½²ã€‚</p>\n</blockquote>\n<p>å®‰è£… serve å·¥å…·ï¼š</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install serve -g <span class=\"comment\"># å…¨å±€å®‰è£…</span></span><br></pre></td></tr></table></figure>\n<p>è¿›å…¥ç”Ÿæˆçš„æ–‡ä»¶å¤¹ <code>/dist</code> ä¸­ï¼Œæ‰§è¡Œï¼š</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/dist&gt; serve</span><br><span class=\"line\"></span><br><span class=\"line\">   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class=\"line\">   â”‚                                          â”‚</span><br><span class=\"line\">   â”‚   Serving!                               â”‚</span><br><span class=\"line\">   â”‚                                          â”‚</span><br><span class=\"line\">   â”‚   - Local:    http://localhost:3000      â”‚</span><br><span class=\"line\">   â”‚   - Network:  http://192.168.30.1:3000   â”‚</span><br><span class=\"line\">   â”‚                                          â”‚</span><br><span class=\"line\">   â”‚   Copied <span class=\"built_in\">local</span> address to clipboard!     â”‚</span><br><span class=\"line\">   â”‚                                          â”‚</span><br><span class=\"line\">   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></pre></td></tr></table></figure>\n<h2 id=\"nginx-éƒ¨ç½²\"><a class=\"markdownIt-Anchor\" href=\"#nginx-éƒ¨ç½²\"></a> Nginx éƒ¨ç½²</h2>\n<blockquote>\n<p>Linux+Nginx</p>\n</blockquote>\n<p>å°†æ–‡ä»¶å¤¹ <code>/dist</code> å‹ç¼©æˆåŒ… <code>dist.zip</code> ä¸Šä¼ åˆ°æœåŠ¡å™¨ã€‚</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># è§£å‹æ–‡ä»¶</span></span><br><span class=\"line\">unzip dist.zip -d myapp</span><br><span class=\"line\"><span class=\"comment\"># æŠŠdistå†…å®¹ç§»å‡ºä¸€å±‚</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> myapp/dist</span><br><span class=\"line\"><span class=\"built_in\">mv</span> * ../</span><br><span class=\"line\"><span class=\"built_in\">cd</span> ..</span><br><span class=\"line\"><span class=\"built_in\">rm</span> -rf dist</span><br></pre></td></tr></table></figure>\n<p>å‡è®¾ myapp æ–‡ä»¶å¤¹ç›®å½•ä½ç½®ä¸ºï¼š<code>/var/www/temp_test/myapp</code>ã€‚Nginx é…ç½®æ–‡ä»¶çš„å†™æ³•ä¸ºï¼š</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server&#123;</span><br><span class=\"line\">\tserver_name\tprojects.uuanqin.top; # åŸŸå</span><br><span class=\"line\">\t# å‰ç«¯</span><br><span class=\"line\">\tlocation / &#123;</span><br><span class=\"line\">\t\troot /var/www/temp_test/myapp;</span><br><span class=\"line\">\t\tindex\tindex.html\tindex.htm;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ä¸Šé¢æ˜¯é…ç½®æ–‡ä»¶å…³é”®å†…å®¹å†™æ³•ï¼Œç«¯å£å·ä»€ä¹ˆçš„è‡ªè¡Œè¡¥å……ã€‚ä¸Šé¢çš„é…ç½®å¯ä»¥ä½¿ç”¨ certbot å·¥å…·å¯ç”¨ HTTPSã€‚è¯¦çœ‹ï¼š<a class=\"uuanqin-bilink\" target=\"_blank\" href=\"/p/6f54b93a/\"><span class=\"yukari\">ç«™å†…æ–‡ç« </span>Linux æœåŠ¡å™¨ HTTPS çš„é…ç½®</a>ã€‚</p>\n<p>é‡å¯ Nginxï¼š</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl restart nginx</span><br><span class=\"line\"><span class=\"comment\"># æˆ– service nginx restart</span></span><br></pre></td></tr></table></figure>\n<p>å®Œæˆç™»å½•ã€‚</p>\n<h2 id=\"docker-å®¹å™¨éƒ¨ç½²\"><a class=\"markdownIt-Anchor\" href=\"#docker-å®¹å™¨éƒ¨ç½²\"></a> Docker å®¹å™¨éƒ¨ç½²</h2>\n<p>é¡¹ç›®æºç ä¸­æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ <code>docker</code> ç”¨äºå­˜æ”¾æ„å»º Docker éœ€è¦çš„ç›¸å…³æ–‡ä»¶ã€‚</p>\n<p>åœ¨æ–‡ä»¶å¤¹ <code>docker</code> ä¸­æ–°å»º <code>nginx.conf</code>ï¼š</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server &#123;</span><br><span class=\"line\">    listen 80;</span><br><span class=\"line\">    # gzip config</span><br><span class=\"line\">    gzip on;</span><br><span class=\"line\">    gzip_min_length 1k;</span><br><span class=\"line\">    gzip_comp_level 9;</span><br><span class=\"line\">    gzip_types text/plain text/css text/javascript application/json application/javascript application/x-javascript application/xml;</span><br><span class=\"line\">    gzip_vary on;</span><br><span class=\"line\">    gzip_disable &quot;MSIE [1-6]\\.&quot;;</span><br><span class=\"line\">    root /usr/share/nginx/html;</span><br><span class=\"line\">    include /etc/nginx/mime.types;</span><br><span class=\"line\"></span><br><span class=\"line\">\t# å¦‚æœç”¨æˆ·è®¿é—®æŸä¸ªç½‘é¡µæ‰¾ä¸åˆ°çš„è¯å°±é™çº§å°è¯•è®¿é—®index.html</span><br><span class=\"line\">    location / &#123;</span><br><span class=\"line\">        try_files $uri /index.html;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>é¡¹ç›®æºç æ ¹ç›®å½•ä¸­æ–°å»º Dockerfileï¼š</p>\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">FROM</span> nginx</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># æŒ‡å®šå·¥ä½œç›®å½•</span></span><br><span class=\"line\"><span class=\"keyword\">WORKDIR</span><span class=\"language-bash\"> /usr/share/nginx/html/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ã€å¯é€‰ã€‘æŒ‡å®šç”¨æˆ·</span></span><br><span class=\"line\"><span class=\"keyword\">USER</span> root</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># æŠŠæˆ‘ä»¬çš„é…ç½®æ–‡ä»¶å¤åˆ¶åˆ°æœåŠ¡å™¨Nginxçš„é…ç½®æ–‡ä»¶ä¸­</span></span><br><span class=\"line\"><span class=\"keyword\">COPY</span><span class=\"language-bash\"> ./docker/nginx.conf /etc/nginx/conf.d/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">COPY</span><span class=\"language-bash\"> ./dist  /usr/share/nginx/html/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ã€å¯é€‰ã€‘æ˜¾ç¤ºæŒ‡å®šç«¯å£</span></span><br><span class=\"line\"><span class=\"keyword\">EXPOSE</span> <span class=\"number\">80</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">CMD</span><span class=\"language-bash\"> [<span class=\"string\">&quot;nginx&quot;</span>, <span class=\"string\">&quot;-g&quot;</span>, <span class=\"string\">&quot;daemon off;&quot;</span>]</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>Docker æ„å»ºï¼š</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># å‰ç«¯</span></span><br><span class=\"line\">docker build -t myapp:v0.0.1 .</span><br></pre></td></tr></table></figure>\n<p>Docker è¿è¡Œï¼š</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># å‰ç«¯</span></span><br><span class=\"line\">docker run -p 1122:80 -d myapp:v0.0.1 <span class=\"comment\"># ä¸»æœºç«¯å£æ”¹ä¸€ä¸‹æ¯”å¦‚1122ï¼Œ80å¯èƒ½ä¼šè¢«å ç”¨ï¼›-d è¡¨ç¤ºåå°è¿è¡Œ</span></span><br></pre></td></tr></table></figure>\n<p>é‚£ä¹ˆæœåŠ¡å™¨ä¸Šçš„ nginx å¢åŠ ä»¥ä¸‹é…ç½®ï¼Œä»¥å°†è¯·æ±‚è½¬å‘åˆ° 1122 ç«¯å£ã€‚æ¯”å¦‚æˆ‘çš„è®¾ç½®ä¸ºï¼Œè®¿é—® <code>projects.uuanqin.top</code> è¯·æ±‚æ—¶å°†è¿›è¡Œè½¬å‘ã€‚</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server&#123;</span><br><span class=\"line\">\tserver_name\tprojects.uuanqin.top;</span><br><span class=\"line\">\t# å‰ç«¯</span><br><span class=\"line\">\tlocation / &#123;</span><br><span class=\"line\">\t\tproxy_pass http://localhost:1122;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ä¸Šé¢æ˜¯é…ç½®æ–‡ä»¶å…³é”®å†…å®¹å†™æ³•ï¼Œç«¯å£å·ä»€ä¹ˆçš„è‡ªè¡Œè¡¥å……ã€‚ä¸Šé¢çš„é…ç½®å¯ä»¥ä½¿ç”¨ certbot å·¥å…·å¯ç”¨ HTTPSã€‚è¯¦çœ‹ï¼š<a class=\"uuanqin-bilink\" target=\"_blank\" href=\"/p/6f54b93a/\"><span class=\"yukari\">ç«™å†…æ–‡ç« </span>Linux æœåŠ¡å™¨ HTTPS çš„é…ç½®</a>ã€‚</p>\n<p>æµè§ˆå™¨è®¿é—®ï¼š<code>projects.uuanqin.top</code> å³å¯æ‰“å¼€å‰ç«¯åº”ç”¨ã€‚</p>\n<p>é™„ docker å¸¸ç”¨å‘½ä»¤ï¼š</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker ps <span class=\"comment\"># æŸ¥çœ‹è¿è¡Œçš„é•œåƒ</span></span><br><span class=\"line\">docker <span class=\"built_in\">kill</span> &lt;CONTAINER...&gt; <span class=\"comment\"># æ€æ­»è¿è¡Œä¸­çš„å®¹å™¨</span></span><br><span class=\"line\">docker logs &lt;CONTAINER&gt; <span class=\"comment\"># è¿½è¸ªå®¹å™¨çš„æ—¥å¿—è¾“å‡º</span></span><br><span class=\"line\">docker images <span class=\"comment\"># æŸ¥çœ‹é•œåƒ</span></span><br><span class=\"line\">docker rmi -f IMAGE [IMAGE...] <span class=\"comment\"># ç§»é™¤é•œåƒ</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"æœ¬æ–‡å‚è€ƒ\"><a class=\"markdownIt-Anchor\" href=\"#æœ¬æ–‡å‚è€ƒ\"></a> æœ¬æ–‡å‚è€ƒ</h1>\n<ul>\n<li><a href=\"https://pro.ant.design/zh-CN/docs/getting-started/\">å¼€å§‹ä½¿ç”¨ - Ant Design Pro</a></li>\n<li><a href=\"https://github.com/ant-design/ant-design-pro/issues/10505\">ğŸ› [BUG]pro create myapp fail Â· Issue #10505 Â· ant-design/ant-design-pro (github.com)</a></li>\n<li><a href=\"https://yuyuanweb.feishu.cn/wiki/DclswHMhkiRXckkWve1ckXTonDh\">çŸ¥è¯†æ˜ŸçƒÂ·ç¼–ç¨‹å¯¼èˆª - ç”¨æˆ·ä¸­å¿ƒç³»ç»Ÿ</a></li>\n</ul>\n","raw":"---\ntitle: Ant Design Pro å‰ç«¯é¡¹ç›®åˆå§‹åŒ–åˆ°éƒ¨ç½²ä¸Šçº¿\ntags:\n  - é˜¿é‡Œå·´å·´\n  - å‰ç«¯\n  - Ant Design\n  - umijs\n  - npm\n  - yarn\n  - cnpm\n  - tyarn\n  - èš‚èšé‡‘æœ\n  - React\n  - Nginx\n  - Linux\ncover: 'https://cdn.gallery.uuanqin.top/img/20240410234822.webp'\ndescription: å¤‡å¿˜ä¸€ä¸‹ Ant Design Pro ä¸Šçº¿å…³é”®æµç¨‹\nabbrlink: 3d8f61f0\ncategories:\n  - æŠ€æœ¯å­¦ä¹ \ndate: 2024-04-11 00:18:37\ntop_img:\n---\n\n# åˆå§‹åŒ–\n\n> [!warning] æ­å»ºæ–¹æ³•éšæ—¶å¯èƒ½æ›´æ–°ï¼Œè¯·æ³¨æ„æŸ¥çœ‹æœ€æ–°å®˜ç½‘ç›¸å…³æ–‡æ¡£\n\n Ant Design Pro æ˜¯åŸºäº Ant Design å’Œ umi çš„å°è£…çš„ä¸€æ•´å¥—ä¼ä¸šçº§ä¸­åå°å‰ç«¯/è®¾è®¡è§£å†³æ–¹æ¡ˆã€‚\n\n å®˜ç½‘ï¼š[pro.ant.design/zh-CN/docs/getting-started/](https://pro.ant.design/zh-CN/docs/getting-started/)\n\nä¸€äº›å‡†å¤‡ï¼š\n\n- å‰ç«¯å¼€å‘å·¥å…·å¯ä»¥ä½¿ç”¨ vscodeï¼Œæˆ– WebStormã€‚\n- yarnï¼š[å®‰è£… | Yarn ä¸­æ–‡ç½‘ (nodejs.cn)](https://yarn.nodejs.cn/en/docs/install#windows-stable)ã€‚yarn æ˜¯å¹¶è¡Œçš„ npmã€‚ä¸€å¥è¯ï¼š`npm install --global yarn`\n\nç”±äºå›½å†…ç½‘ç»œå’Œå‰ç«¯çš„ç‰¹æ®Šæ€§ï¼Œåœ¨å®‰è£…ä¾èµ–ç­‰æ–¹é¢å¯èƒ½ä¼šå¤±è´¥æˆ–å¯¼è‡´æ— æ³•å¯åŠ¨ï¼Œæµªè´¹å¤§é‡çš„æ—¶é—´ï¼Œå› æ­¤ Ant Design æ¨èä½¿ç”¨ [tyarn - npm (npmjs.com)](https://www.npmjs.com/package/tyarn) åŠ [cnpm - npm (npmjs.com)](https://www.npmjs.com/package/cnpm) å·¥å…·ã€‚\n\nä¸»è¦æ­å»ºæŒ‡ä»¤ï¼š\n\n```shell\nnpm i @ant-design/pro-cli -g   # å…¨å±€å®‰è£…\npro create myapp               # åœ¨é¡¹ç›®æ–‡ä»¶å¤¹ä¸‹ä½¿ç”¨ï¼Œmyappä¸ºé¡¹ç›®å\n```\n\n> [!error] ä¸€ä¸ªå¯èƒ½é‡åˆ°çš„é—®é¢˜\n> /usr/local/lib/node_modules/@ant-design/pro-cli/src/create/generators/ant-design-pro/index.js:10\n> const sortPackage = require('sort-package-json');\n> Error \\[ERR_REQUIRE_ESM\\]: require() of ES Module\n>\n> è§£å†³æ–¹æ³•ï¼š\n> è¿›å…¥ `@ant-design/pro-cli` å…¨å±€å®‰è£…ç›®å½•ï¼ˆä¸€èˆ¬åœ¨ `C:\\Users\\yourname\\AppData\\Roaming\\npm\\node_modules\\@ant-design\\pro-cli`ï¼‰ä¸­æ‰§è¡Œ `npm i sort-package-json@1.55.0 -D`ï¼ˆå¦‚æœåˆå§‹åŒ–å¤±è´¥åˆ™ `npm cache clean --force`ï¼‰ã€‚\n\nä¸‹è½½å®Œæˆåç»ˆç«¯è¾“å…¥ï¼š\n\n```shell\nyarn # å¦‚æœå¯ä»¥çš„è¯ï¼Œæ˜¯ tyarnã€‚å¦‚æœè¿˜å‡ºé”™ï¼Œå†è¯•è¯• cnpm install\n```\n\né¡¹ç›®ç›®å½•å¯çœ‹åˆ°ç”Ÿæˆå¥½çš„ä¾èµ–åŒ…ï¼š`node_modules`\n\næ³¨æ„ï¼šè„šæ‰‹æ¶å·¥å…·ç”Ÿæˆäº†é¡¹ç›®å\n\n- ä¸è¦æ”¹åŠ¨ä»»ä½•ä»£ç ï¼Œå…ˆä¿è¯é¡¹ç›®èƒ½è¿è¡Œ\n- ç¡®è®¤ç¯å¢ƒæ˜¯å¦åŒ¹é…ã€å®‰è£…é¡¹ç›®ä¾èµ–\n\n```sh\nyarn run start # ä½ å¯ä»¥çœ‹çœ‹package.jsoné‡Œçš„scriptï¼Œä»¥æ¨¡æ‹Ÿæ•°æ®çš„æ–¹å¼è¿è¡Œ\n# npm run startä¹Ÿè¡Œ\n```\n\næ³¨æ„ä½¿ç”¨ F12 åŠæ—¶çœ‹é”™è¯¯ã€‚\n\n![image.png|500](https://cdn.gallery.uuanqin.top/img/20240410232133.webp)\n\n> react æ˜¯å¯¹ js çš„ä¸€å±‚å°è£…ï¼Œè€Œ umi æ˜¯å¯¹ react çš„è¿›ä¸€æ­¥å°è£…ã€‚\n\n## ã€å¯é€‰ã€‘Ant Design Pro é¡¹ç›®ç˜¦èº«\n\n> [!hint] é¡¹ç›®ç˜¦èº«è¿‡ç¨‹ä¸­ï¼Œæ¯åšä¸€æ­¥å°±è¿è¡Œæµ‹è¯•\n\nç§»é™¤å›½é™…åŒ–æ¨¡å—ï¼ˆå›½é™…åŒ–é›†æˆäº†å¤šç§è¯­è¨€ï¼Œå¦‚æ— å›½é™…åŒ–éœ€æ±‚å¯ä»¥åˆ æ‰ï¼‰ï¼š`npm run i18n-remove`ã€‚è¿™ä¸ªè„šæœ¬å°†ä¼šå°è¯•åˆ é™¤é¡¹ç›®ä¸­æ‰€æœ‰çš„ i18n ä»£ç ï¼Œå¯¹äºå¤æ‚çš„è¿è¡Œæ—¶ä»£ç ï¼Œè¡¨ç°å¹¶ä¸å¥½ï¼Œæ…ç”¨ã€‚\n\nç„¶åè‡ªå·±æ‰‹åŠ¨åˆ æ‰ `/src/locales` æ–‡ä»¶å¤¹ã€‚\n\nä¸€äº›è§£å†³æ–¹æ¡ˆï¼š\n\n- [ç§»é™¤å›½é™…åŒ–å‡ºç°SyntaxError: Export 'SelectLang' is not defined. (11:55) Â· Issue #11143](https://github.com/ant-design/ant-design-pro/issues/11143)ã€‚æŠŠé¡¹ç›®æ ¹ç›®å½•ä¸‹ `src/components/index.js` ä¸­çš„ `SelectLang` å˜é‡åˆ é™¤åå°±è¡Œã€‚\n- [ğŸ› BUGæ‰§è¡Œåˆ é™¤å›½é™…åŒ–å‘½ä»¤æŠ¥é”™ Â· Issue #10452 Â· ant-design/ant-design-pro (github.com)](https://github.com/ant-design/ant-design-pro/issues/10452)\n- å·¦ä¾§å¯¼èˆªæ ä¸æ˜¾ç¤ºé—®é¢˜ï¼šç§»é™¤å›½é™…åŒ–åï¼Œé¡¹ç›®å·¦ä¾§å¯¼èˆªæ èœå•å’Œå³ä¸Šè§’é€€å‡ºç™»é™†æŒ‰é’®ä¸æ˜¾ç¤ºäº†ã€‚è§£å†³æ–¹æ³•ï¼šç»™ `/config/route.ts` é…ç½®æ–‡ä»¶çš„æ¯ä¸€ä¸ªè·¯ç”±éƒ½åŠ ä¸Šå¯¹åº”çš„ name å±æ€§ï¼Œå¦‚æœä¸æ·»åŠ  name å±æ€§ï¼Œåˆ™èœå•é»˜è®¤å±•ç¤ºçš„æ˜¯ path å±æ€§ã€‚è¿™é‡Œä¸€å®šè¦ç»™æ¯ä¸€ä¸ªè·¯ç”±éƒ½æ·»åŠ å¯¹åº”çš„ name å±æ€§ï¼Œä¸ç„¶å¯¼èˆªæ è¿˜æ˜¯ä¸æ˜¾ç¤ºã€‚\n\nå…¶å®ƒæ–‡ä»¶çš„åˆ é™¤ï¼ˆä¸åŒç‰ˆæœ¬ä¸‹çš„æ“ä½œç•¥æœ‰ä¸åŒï¼‰ï¼š\n\n- ç§»é™¤æµ‹è¯•å·¥å…·ï¼š`/tests`\n- ï¼ˆåœ¨è€ç‰ˆæœ¬ä¸­å‡ºç°ï¼‰ç§»é™¤ e2eï¼ˆè‡ªåŠ¨åŒ–æµ‹è¯•ï¼‰ï¼šåˆ é™¤ `src/e2e` æ–‡ä»¶å¤¹\n- ï¼ˆåœ¨è€ç‰ˆæœ¬ä¸­å‡ºç°ï¼‰ç§»å‡ºè‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶ `playwright.config.ts`\n- ç§»é™¤é»˜è®¤é¡µé¢æ—¶è®°å¾—åˆ æ‰è·¯ç”±\n- ç§»é™¤ `/src/services/swagger` æ¥å£æ–‡æ¡£å·¥å…·\n\n## ã€å¯é€‰ä½†ä¸æ¨èã€‘Umi UI åŠ é€Ÿå¼€å‘\n\n> [!warning] ç›®å‰ä¸å†æ¨èä½¿ç”¨ Umi UI ç»„ä»¶\n\nåªæœ‰æ¡†æ¶çš„ V3 ç‰ˆæœ¬æ”¯æŒæ‚¬æµ®çš„ Umi UI æŒ‰é’®ï¼š\n\n```sh\nnpm i @ant-design/pro-cli@3.1.0 -g\npro -v # æŸ¥çœ‹å½“å‰å®‰è£…çš„ç‰ˆæœ¬\n```\n\næ—§ç‰ˆæœ¬è„šæ‰‹æ¶ï¼š\n\n![image.png](https://cdn.gallery.uuanqin.top/img/20240410233405.webp)\n\n```sh\nyarn add @umijs/preset-ui -D\n```\n\n\n# å¤šç¯å¢ƒ\n\nå…³é”®çš„ç¯å¢ƒå˜é‡ï¼š\n\n```js\nprocess.env.NODE_ENV\n// 'development', 'production'\n```\n\n\n# æ„å»º\n\næ‰§è¡Œæ„å»ºå‘½ä»¤ï¼š\n\n```sh\nnpm run build\n```\n\næ„å»ºç”Ÿæˆçš„æ–‡ä»¶åœ¨æ–‡ä»¶å¤¹ `/dist` ä¸­ã€‚\n\n# éƒ¨ç½²\n\n## æœ¬åœ°éƒ¨ç½²\n\n> [serve](https://www.npmjs.com/package/serve) å·¥å…·å¯ä»¥åœ¨æœ¬åœ°å¯åŠ¨ä¸€ä¸ªé™æ€æ–‡ä»¶æœåŠ¡å™¨ã€‚å¦‚æœä½ éœ€è¦å°†ç½‘ç«™éƒ¨ç½²åˆ°æ­£å¼ç¯å¢ƒï¼Œå¯ä»¥ä½¿ç”¨ Vercel è¿›è¡Œéƒ¨ç½²ã€‚\n\nå®‰è£… serve å·¥å…·ï¼š\n\n```sh\nnpm install serve -g # å…¨å±€å®‰è£…\n```\n\nè¿›å…¥ç”Ÿæˆçš„æ–‡ä»¶å¤¹ `/dist` ä¸­ï¼Œæ‰§è¡Œï¼š\n\n```sh\n/dist> serve\n\n   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n   â”‚                                          â”‚\n   â”‚   Serving!                               â”‚\n   â”‚                                          â”‚\n   â”‚   - Local:    http://localhost:3000      â”‚\n   â”‚   - Network:  http://192.168.30.1:3000   â”‚\n   â”‚                                          â”‚\n   â”‚   Copied local address to clipboard!     â”‚\n   â”‚                                          â”‚\n   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n## Nginx éƒ¨ç½²\n\n> Linux+Nginx\n\nå°†æ–‡ä»¶å¤¹ `/dist` å‹ç¼©æˆåŒ… `dist.zip` ä¸Šä¼ åˆ°æœåŠ¡å™¨ã€‚\n\n```sh\n# è§£å‹æ–‡ä»¶\nunzip dist.zip -d myapp\n# æŠŠdistå†…å®¹ç§»å‡ºä¸€å±‚\ncd myapp/dist\nmv * ../\ncd ..\nrm -rf dist\n```\n\nå‡è®¾ myapp æ–‡ä»¶å¤¹ç›®å½•ä½ç½®ä¸ºï¼š`/var/www/temp_test/myapp`ã€‚Nginx é…ç½®æ–‡ä»¶çš„å†™æ³•ä¸ºï¼š\n\n```\nserver{\n\tserver_name\tprojects.uuanqin.top; # åŸŸå\n\t# å‰ç«¯\n\tlocation / {\n\t\troot /var/www/temp_test/myapp;\n\t\tindex\tindex.html\tindex.htm;\n\t}\n}\n```\n\nä¸Šé¢æ˜¯é…ç½®æ–‡ä»¶å…³é”®å†…å®¹å†™æ³•ï¼Œç«¯å£å·ä»€ä¹ˆçš„è‡ªè¡Œè¡¥å……ã€‚ä¸Šé¢çš„é…ç½®å¯ä»¥ä½¿ç”¨ certbot å·¥å…·å¯ç”¨ HTTPSã€‚è¯¦çœ‹ï¼š[[Linux æœåŠ¡å™¨ HTTPS çš„é…ç½®]]ã€‚\n\né‡å¯ Nginxï¼š\n\n```sh\nsystemctl restart nginx\n# æˆ– service nginx restart\n```\n\nå®Œæˆç™»å½•ã€‚\n\n## Docker å®¹å™¨éƒ¨ç½²\n\né¡¹ç›®æºç ä¸­æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ `docker` ç”¨äºå­˜æ”¾æ„å»º Docker éœ€è¦çš„ç›¸å…³æ–‡ä»¶ã€‚\n\nåœ¨æ–‡ä»¶å¤¹ `docker` ä¸­æ–°å»º `nginx.conf`ï¼š\n\n```\nserver {\n    listen 80;\n    # gzip config\n    gzip on;\n    gzip_min_length 1k;\n    gzip_comp_level 9;\n    gzip_types text/plain text/css text/javascript application/json application/javascript application/x-javascript application/xml;\n    gzip_vary on;\n    gzip_disable \"MSIE [1-6]\\.\";\n    root /usr/share/nginx/html;\n    include /etc/nginx/mime.types;\n\n\t# å¦‚æœç”¨æˆ·è®¿é—®æŸä¸ªç½‘é¡µæ‰¾ä¸åˆ°çš„è¯å°±é™çº§å°è¯•è®¿é—®index.html\n    location / {\n        try_files $uri /index.html;\n    }\n}\n```\n\né¡¹ç›®æºç æ ¹ç›®å½•ä¸­æ–°å»º Dockerfileï¼š\n\n```dockerfile\nFROM nginx\n\n# æŒ‡å®šå·¥ä½œç›®å½•\nWORKDIR /usr/share/nginx/html/\n\n# ã€å¯é€‰ã€‘æŒ‡å®šç”¨æˆ·\nUSER root\n\n# æŠŠæˆ‘ä»¬çš„é…ç½®æ–‡ä»¶å¤åˆ¶åˆ°æœåŠ¡å™¨Nginxçš„é…ç½®æ–‡ä»¶ä¸­\nCOPY ./docker/nginx.conf /etc/nginx/conf.d/\n\nCOPY ./dist  /usr/share/nginx/html/\n\n# ã€å¯é€‰ã€‘æ˜¾ç¤ºæŒ‡å®šç«¯å£\nEXPOSE 80\n\nCMD [\"nginx\", \"-g\", \"daemon off;\"]\n\n```\n\nDocker æ„å»ºï¼š\n\n```sh\n# å‰ç«¯\ndocker build -t myapp:v0.0.1 .\n```\n\nDocker è¿è¡Œï¼š\n\n```sh\n# å‰ç«¯\ndocker run -p 1122:80 -d myapp:v0.0.1 # ä¸»æœºç«¯å£æ”¹ä¸€ä¸‹æ¯”å¦‚1122ï¼Œ80å¯èƒ½ä¼šè¢«å ç”¨ï¼›-d è¡¨ç¤ºåå°è¿è¡Œ\n```\n\né‚£ä¹ˆæœåŠ¡å™¨ä¸Šçš„ nginx å¢åŠ ä»¥ä¸‹é…ç½®ï¼Œä»¥å°†è¯·æ±‚è½¬å‘åˆ° 1122 ç«¯å£ã€‚æ¯”å¦‚æˆ‘çš„è®¾ç½®ä¸ºï¼Œè®¿é—® `projects.uuanqin.top` è¯·æ±‚æ—¶å°†è¿›è¡Œè½¬å‘ã€‚\n\n```\nserver{\n\tserver_name\tprojects.uuanqin.top;\n\t# å‰ç«¯\n\tlocation / {\n\t\tproxy_pass http://localhost:1122;\n\t}\n}\n```\n\nä¸Šé¢æ˜¯é…ç½®æ–‡ä»¶å…³é”®å†…å®¹å†™æ³•ï¼Œç«¯å£å·ä»€ä¹ˆçš„è‡ªè¡Œè¡¥å……ã€‚ä¸Šé¢çš„é…ç½®å¯ä»¥ä½¿ç”¨ certbot å·¥å…·å¯ç”¨ HTTPSã€‚è¯¦çœ‹ï¼š[[Linux æœåŠ¡å™¨ HTTPS çš„é…ç½®]]ã€‚\n\næµè§ˆå™¨è®¿é—®ï¼š`projects.uuanqin.top` å³å¯æ‰“å¼€å‰ç«¯åº”ç”¨ã€‚\n\né™„ docker å¸¸ç”¨å‘½ä»¤ï¼š\n\n```sh\ndocker ps # æŸ¥çœ‹è¿è¡Œçš„é•œåƒ\ndocker kill <CONTAINER...> # æ€æ­»è¿è¡Œä¸­çš„å®¹å™¨\ndocker logs <CONTAINER> # è¿½è¸ªå®¹å™¨çš„æ—¥å¿—è¾“å‡º\ndocker images # æŸ¥çœ‹é•œåƒ\ndocker rmi -f IMAGE [IMAGE...] # ç§»é™¤é•œåƒ\n```\n\n\n# æœ¬æ–‡å‚è€ƒ\n- [å¼€å§‹ä½¿ç”¨ - Ant Design Pro](https://pro.ant.design/zh-CN/docs/getting-started/)\n- [ğŸ› [BUG]pro create myapp fail Â· Issue #10505 Â· ant-design/ant-design-pro (github.com)](https://github.com/ant-design/ant-design-pro/issues/10505)\n- [çŸ¥è¯†æ˜ŸçƒÂ·ç¼–ç¨‹å¯¼èˆª - ç”¨æˆ·ä¸­å¿ƒç³»ç»Ÿ](https://yuyuanweb.feishu.cn/wiki/DclswHMhkiRXckkWve1ckXTonDh)\n\n","categories":[{"name":"æŠ€æœ¯å­¦ä¹ ","api":"api/categories/æŠ€æœ¯å­¦ä¹ .json"}],"tags":[{"name":"Linux","api":"api/tags/Linux.json"},{"name":"Nginx","api":"api/tags/Nginx.json"},{"name":"é˜¿é‡Œå·´å·´","api":"api/tags/é˜¿é‡Œå·´å·´.json"},{"name":"å‰ç«¯","api":"api/tags/å‰ç«¯.json"},{"name":"Ant Design","api":"api/tags/Ant-Design.json"},{"name":"umijs","api":"api/tags/umijs.json"},{"name":"npm","api":"api/tags/npm.json"},{"name":"yarn","api":"api/tags/yarn.json"},{"name":"cnpm","api":"api/tags/cnpm.json"},{"name":"tyarn","api":"api/tags/tyarn.json"},{"name":"èš‚èšé‡‘æœ","api":"api/tags/èš‚èšé‡‘æœ.json"},{"name":"React","api":"api/tags/React.json"}]},"api":"api/posts/p/3d8f61f0.json"}