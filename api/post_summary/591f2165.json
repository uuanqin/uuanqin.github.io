{"title":"Hexo Btterfly 引入 Waline 评论系统以及常见问题解决","tags":["Waline","Butterfly","Vercel","问题解决"],"cover":"https://cdn.gallery.uuanqin.top/img/waline-comment.png","description":"引入 Waline 方式以及一些问题的解决","abbrlink":"591f2165","categories":["博客站点维护","Waline"],"date":"2023-04-27T16:27:09.000Z","summary":"引入 Waline 评论 Hexo 博客框架 Butterfly 主题中引入 Waline 评论操作可以参考以下文章解决： Butterfly 安裝文檔(四) 主題配置-2 | Butterfly 快速上手 | Waline 注意： 在 快速上手 | Waline 这篇文章中，请按照指引完成 Vercel 的部署，并完成域名绑定小节（虽然它说可选，但我强烈建议你完成，否则你的评论系统只能在严苛的网络环境中运行） 在 Butterfly 的主题配置文件中有两处需要改： 注意 serverURL 填自己创建子域名 切换数据库 文档：多数据库服务支持 | Waline 基本步骤： 打开 Waline 管理面板，导出数据 准备好自己的数据库 依据文档要求添加环境变量 删除 Vercel 中原有数据库相关的环境变量。或者把这些变量的多环境「Production」取消掉。 Vercel 重新部署 登录 Waline，并成为第一个注册用户 打开管理面板导入数据，等待数据导入成功。 把数据从 LeanCloud 切换到自己服务器数据库的好处是： 评论数据加载迅速 数据维护方便 如果你是从 LeanCloud 迁入 MySQL，建议紧接着看下一小节完成时区转换问题。 加速 Waline 按照官网配置好的 Waline 在国内的加载速度还是有点慢，现记录下一些可用的加速手段： Waline 的 js 文件、css 文件全部替换为国内高速访问的 CDN 链接，或直接存储在本站。国内常用 CDN 镜像站详见：[[国内访问 Hexo 博客优化加速（静态资源 CDN 链接替换）]] 使用的「文章反应」「表情包」等素材均替换为国内镜像。比如 Waline 内置的表情包源为 unpkg，我们可以切换到国内 unpkg 的镜像站。参考：[[学会通过看文档配置 Butterfly 主题中的 Waline 客户端]]。 评论区头像服务使用国内的 Cravatar 服务。详见：[[Waline 配置头像服务（含常用公共头像服务介绍）]] Vercel 使用国内加速域名、将数据库服务部署到国内。上文已介绍了相关操作方法。..."}