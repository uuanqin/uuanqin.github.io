{"title":"Hexo 博客与 Waline 评论区实现外链跳转中间页","tags":["JavaScript","HTML","Waline","Butterfly","npm","Vercel","GitHub"],"description":"博客与评论区统一拦截重定向","abbrlink":"e1ee5eca","cover":"https://cdn.gallery.uuanqin.top/img/202408042352584.webp","categories":["博客站点维护","Waline"],"swiper_index":7,"swiper_desc":"文章推荐","swiper_cover":"https://cdn.gallery.uuanqin.top/img/202408042352584.webp","date":"2024-08-04T23:40:25.000Z","top_img":null,"summary":"> [!note] 文章重要更新 `240804` > - 新增 Waline 评论区中间页的实现 > - 加入 @清羽飞扬 的插件方案 > > 原文章发表于 `240223`。 > [!success] 本文已收录至 Butterfly 主题美化教程 今年年初站长收到了 wxb 的温暖来电😨......自此以后对博客安全额外关注。好巧不巧那时在 友链朋友圈 刷到类似文章，于是立刻开展学习并全站自查外链安全性。 本文主要构成： Waline 评论区中间页的实现（新增）： - 方案 1：官方插件实现。但是有点小问题，建议直接看第二个方案。 - 方案 2：使用博主自写插件，流畅配合 Hexo 中其他中间页插件，同时支持昵称中的外链插入中间页。 Hexo 博客外链跳转中间页的实现： - 方案 1： @清羽飞扬 的插件方案。 - 方案 2【过期方案】：博主原本的过渡方案。 Waline 评论区实现外链跳转中间页 > [!hint] 温馨提示：本章节介绍的内容适用于基于 Vercel 服务端部署的 Waline > 当然，如果 Waline 是其他部署方式，那么安装插件的方法其实大差不差，可继续阅读参考。 Waline 评论区独立于 Hexo 博客，是一个另外的系统，因此 Hexo 的各种渲染插件管理不到 Waline 的内容。但是我们可以通过安装 Waline 评论区的插件实现评论中的外链拦截。 这里介绍两种方案： 方案 1：使用官方插件。但是中间页链接无法定制，不够灵活，且存在小 Bug。 方案 2：使用博主本人基于官方插件二次改造的插件。其特点是黑白名单逻辑优化，可定制中间页链接，昵称外链匹配，并修复一些原官方插件中的 Bug。 想立刻上手可以直接看方案 2！ 方案一：使用 Waline 官方提供的插件 `@waline-plugins/link-interceptor` 虽然 Waline 的插件不多，但是 Waline 维护者 lizheming 还是写了个相关的插件：plugins/packages/link-interceptor at master · walinejs/plugins (github.com) > 本方案将介绍一种繁琐的但是又利于管理的安装 waline 插件的方法，以理解整个插件安装流程。..."}