{"title":"Hexo 博客添加漂浮物效果（可定制显示页面）","tags":["ButterFly","JavaScript"],"cover":"https://cdn.gallery.uuanqin.top/img/starfloat.png","description":"为博客添加漂浮物效果，并可定制需要显示漂浮物的页面。Hexo 优雅改。","abbrlink":"28a4bfe2","categories":["博客站点维护","Hexo"],"date":"2023-04-30T18:53:23.000Z","summary":"本文为 Hexo Butterfly 主题的优雅改（只引入 js 文件）。 原码参考自：博客魔改日记（3） | Ariasakaの小窝 (yisous.xyz)，在其中做了改动： 替换了部分变量和注释名 增加可定制显示漂浮物页面的逻辑 引入方式 1：作为 js 文件直接 inject 到博客中 这种方式在对于多个页面使用漂浮物效果时有用。 使用方法： 需要所有博客页面都显示漂浮物：将 `allowAll = true` 指定显示漂浮物的页面：将 `allowAll = false`，在 urlAllowList 中列出需要显示漂浮物的网页相对地址。如 `/about/`。 优点：统一指定需要使用漂浮物的 url。 缺点：还是有那么一点不灵活。 js 代码： 引入方式 2：只在单个普通文章中使用 > [!warning] 使用本方式时，开启 Pjax 会导致漂浮物应用范围错乱 就像本页面展示的效果那样。 优点：省去博客每次都要请求一个 js 文件。 缺点：不灵活。 直接在文章末尾插入 script，等 markdown 文件渲染成 html 后就相当于只注入这段脚本到当前页面： 这段脚本其实就是把页面判断逻辑删去了。注意选择的图片路径。 未来计划 [ ] 简化 Script [ ] 节日触发漂浮物效果，以及优雅进行实现。js处理时间戳为各种格式/js判断公历/农历/周历节日和节气_js 二十四节气计算_to Zero-的博客-CSDN博客 <script> var stop, staticx; var img = new Image(); img.src = \"/image/star_float.png\"; // 图片 function Float(x, y, s, r, fn) { this.x = x; this.y = y; this.s = s; this.r = r; this.fn = fn; } Float.prototype.draw = function(cxt) { cxt.save(); var xc = 40 * this.s / 4; cxt.translate(this.x, this.y); cxt.rotate(this.r); cxt.drawImage(img, 0, 0, 35 this.s, 35 this.s..."}