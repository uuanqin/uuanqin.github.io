{"data":{"title":"","description":"function getIpInfo(){var path&#x3D;&#39;https:&#x2F;&#x2F;2024.ipchaxun.com&#x2F;&#39;,httpRequest&#x3D;new XMLHttpRequest,path&#x3D;(httpRequest.open(&#39;GET&#39;,path,!0),httpRequest.send(),httpRequest.onreadystatechange&#x3D;function(){var info;4&#x3D;","date":"2024-02-15T13:37:22.617Z","updated":"2024-02-15T13:37:22.617Z","language":"zh-CN","comments":true,"url":"js/privacy.js","cover":null,"images":[],"content":"function getIpInfo(){var path='https://2024.ipchaxun.com/',httpRequest=new XMLHttpRequest,path=(httpRequest.open('GET',path,!0),httpRequest.send(),httpRequest.onreadystatechange=function(){var info;4==httpRequest.readyState&&200==httpRequest.status?(info=httpRequest.responseText,(info=JSON.parse(info)).ip,document.getElementById('userAgentIp').innerHTML=info.ip,document.getElementById('userAgentCountry').innerHTML=info.data[0],document.getElementById('userAgentRegion').innerHTML=info.data[1],document.getElementById('userAgentCity').innerHTML=info.data[2],document.getElementById('userAgentIsp').innerHTML=info.data[4]):console.log('privacy.js - 获取信息失败. httpRequest.readyState=%d, httpRequest.status=%d',httpRequest.readyState,httpRequest.status)},navigator.userAgent);document.getElementById('userAgent').innerHTML=path}","raw":"// 获取ip\nfunction getIpInfo(){\n    var path = 'https://2024.ipchaxun.com/';\n    if(path !== undefined){\n        var httpRequest = new XMLHttpRequest();//第一步：建立所需的对象\n        httpRequest.open('GET', path , true);//第二步：打开连接  将请求参数写在url中  ps:\"./Ptest.php?name=test&nameone=testone\"\n        httpRequest.send();//第三步：发送请求  将请求参数写在URL中\n        /**\n         * 获取数据后的处理程序\n         */\n        httpRequest.onreadystatechange = function () {\n            if (httpRequest.readyState == 4 && httpRequest.status == 200) {\n                var info = httpRequest.responseText;//获取到json字符串，还需解析\n                var obj = JSON.parse(info)\n                const ip = obj.ip;\n                document.getElementById(\"userAgentIp\").innerHTML = obj.ip;\n                document.getElementById(\"userAgentCountry\").innerHTML = obj.data[0];\n                document.getElementById(\"userAgentRegion\").innerHTML = obj.data[1];\n                document.getElementById(\"userAgentCity\").innerHTML = obj.data[2];\n                document.getElementById(\"userAgentIsp\").innerHTML = obj.data[4];\n            }else{\n                console.log('privacy.js - 获取信息失败. httpRequest.readyState=%d, httpRequest.status=%d',httpRequest.readyState,httpRequest.status);\n            }\n        };\n    }else{\n        console.log('privacy.js - path === undefined');\n    }\n\n    var uaInfo = navigator.userAgent;\n    document.getElementById(\"userAgent\").innerHTML = uaInfo;\n}"},"api":"api/pages/js.json"}