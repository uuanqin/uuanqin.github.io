{"data":{"title":"SpringBoot ä¸­çš„ IoC & DI å…¥é—¨","slug":"æŠ€æœ¯å­¦ä¹ /SpringBoot ä¸­çš„ IoC & DI å…¥é—¨","description":"å…¥é—¨æ¡ˆä¾‹æ„Ÿå— IOC å®¹å™¨çš„åŸºæœ¬å·¥ä½œæ–¹å¼ã€‚","date":"2024-08-01T16:40:03.000Z","updated":"2025-07-28T16:24:24.197Z","language":"zh-CN","comments":true,"url":"p/66216cb4/","cover":"https://cdn.gallery.uuanqin.top/img/202409050030052.webp","images":[],"content":"\n<div class=\"callout\" data-callout=\"notice\">\n<div class=\"callout-title\">\n<div class=\"callout-title-icon\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-pencil\"><path d=\"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z\"/><path d=\"m15 5 4 4\"/></svg>\n</div>\n<div class=\"callout-title-inner\">SpringBoot çš„ä¸¤å¤§æ ¸å¿ƒ</div>\n</div>\n<div class=\"callout-content\"><p></p>\n<ol>\n<li>IoCï¼šæ§åˆ¶åè½¬</li>\n<li><a class=\"uuanqin-bilink\" target=\"_blank\" href=\"/p/e036b68e/\"><span class=\"yukari\">ç«™å†…æ–‡ç« </span>AOP</a>ï¼šé¢å‘åˆ‡é¢ç¼–ç¨‹</li>\n</ol>\n</div></div><h1 id=\"åŸºæœ¬æ¦‚å¿µ\"><a class=\"markdownIt-Anchor\" href=\"#åŸºæœ¬æ¦‚å¿µ\"></a> åŸºæœ¬æ¦‚å¿µ</h1>\n<h2 id=\"æ§åˆ¶åè½¬-inversion-of-control\"><a class=\"markdownIt-Anchor\" href=\"#æ§åˆ¶åè½¬-inversion-of-control\"></a> æ§åˆ¶åè½¬ Inversion of Control</h2>\n<p><strong>æ§åˆ¶åè½¬ï¼ˆInversion of Controlï¼ŒIoCï¼‰</strong> å³æ§åˆ¶åè½¬/åè½¬æ§åˆ¶ã€‚å®ƒæ˜¯ä¸€ç§è®¾è®¡æ€æƒ³ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæŠ€æœ¯å®ç°ã€‚å®ƒæè¿°çš„æ˜¯ Java å¼€å‘é¢†åŸŸå¯¹è±¡çš„åˆ›å»ºä»¥åŠç®¡ç†çš„é—®é¢˜ã€‚è¿™ç§è®¾è®¡æ€æƒ³å¯ä»¥ç”¨æ¥æŒ‡å¯¼æ¡†æ¶å±‚é¢çš„è®¾è®¡ã€‚</p>\n<ul>\n<li><strong>æ§åˆ¶</strong> ï¼šæŒ‡çš„æ˜¯å¯¹è±¡åˆ›å»ºï¼ˆå®ä¾‹åŒ–ã€ç®¡ç†ï¼‰çš„æƒåŠ›ï¼Œå¯¹ç¨‹åºæ‰§è¡Œæµç¨‹çš„æ§åˆ¶ã€‚</li>\n<li><strong>åè½¬</strong> ï¼šæ§åˆ¶æƒäº¤ç»™å¤–éƒ¨ç¯å¢ƒï¼ˆIoC å®¹å™¨ï¼‰ã€‚åœ¨æ²¡æœ‰åè½¬ä¹‹å‰ï¼Œç¨‹åºå‘˜è‡ªå·±æ§åˆ¶æ•´ä¸ªç¨‹åºçš„æ‰§è¡Œã€‚åœ¨ä½¿ç”¨æŸä¸ªæ§åˆ¶åè½¬æ¡†æ¶ä¹‹åï¼Œæ•´ä¸ªç¨‹åºçš„æ‰§è¡Œæµç¨‹å¯ä»¥é€šè¿‡æ¡†æ¶æ¥æ§åˆ¶ã€‚æµç¨‹çš„æ§åˆ¶æƒä»ç¨‹åºå‘˜ã€Œåè½¬ã€åˆ°äº†æ¡†æ¶ã€‚</li>\n</ul>\n<h2 id=\"ä¾èµ–æ³¨å…¥-dependency-injection\"><a class=\"markdownIt-Anchor\" href=\"#ä¾èµ–æ³¨å…¥-dependency-injection\"></a> ä¾èµ–æ³¨å…¥ Dependency Injection</h2>\n<p>IoC æœ€å¸¸è§ä»¥åŠæœ€åˆç†çš„å®ç°æ–¹å¼å«åš <strong>ä¾èµ–æ³¨å…¥ï¼ˆDependency Injectionï¼ŒDIï¼‰</strong>ã€‚å®ƒæ˜¯ä¸€ç§å…·ä½“çš„ç¼–ç æŠ€å·§ï¼šä¸é€šè¿‡ <code>new</code> çš„æ–¹å¼åœ¨ç±»å†…éƒ¨åˆ›å»ºä¾èµ–ç±»å¯¹è±¡ï¼Œè€Œæ˜¯å°†ä¾èµ–çš„ç±»å¯¹è±¡åœ¨å¤–éƒ¨åˆ›å»ºå¥½ä¹‹åï¼Œé€šè¿‡æ„é€ å‡½æ•°ã€å‡½æ•°å‚æ•°ç­‰æ–¹å¼ä¼ é€’ï¼ˆæˆ–æ³¨å…¥ï¼‰ç»™ç±»ä½¿ç”¨ã€‚</p>\n<p>ä¸‹é¢é€šè¿‡ç®€å•ä¾‹å­å±•ç¤º DIï¼šæ‰‹æœºç±» <code>Phone</code> å­˜åœ¨å†…éƒ¨æˆå‘˜ <code>SIMCard</code> å¡ã€‚æ’å…¥ <code>SIMCard</code> çš„æ‰‹æœºæ‰èƒ½ä½¿ç”¨ï¼Œè°ƒç”¨ <code>SIMCard</code> ç±»ä¸­çš„æ–¹æ³•ã€‚</p>\n<p>ä¸‹é¢å±•ç¤º <code>Phone</code> éä¾èµ–æ³¨å…¥å®ç°çš„è¿‡ç¨‹ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// éä¾èµ–æ³¨å…¥å®ç°æ–¹å¼</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Phone</span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> SIMCard card;</span><br><span class=\"line\">\t<span class=\"keyword\">public</span> <span class=\"title function_\">Phone</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">this</span>.card = <span class=\"keyword\">new</span> <span class=\"title class_\">SIMCard</span>(); <span class=\"comment\">// æ„é€ å‡½æ•°åˆ›å»ºäº†SIMå¡ï¼Œæœ‰ç‚¹ç¡¬ç¼–ç </span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">sendMsg</span><span class=\"params\">(String text)</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">this</span>.card.send(text);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">SIMCard</span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">send</span><span class=\"params\">(String text)</span>&#123;<span class=\"comment\">/* ... */</span>&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ä½¿ç”¨ Phone æ—¶</span></span><br><span class=\"line\"><span class=\"type\">Phone</span> <span class=\"variable\">phone</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Phone</span>()</span><br></pre></td></tr></table></figure>\n<p>ä¾èµ–æ³¨å…¥çš„å®ç°è¿‡ç¨‹ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ä¾èµ–æ³¨å…¥å®ç°æ–¹å¼</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Phone</span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> SIMCard card;</span><br><span class=\"line\">\t<span class=\"keyword\">public</span> <span class=\"title function_\">Phone</span><span class=\"params\">(SIMCard card)</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">this</span>.card = card;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">sendMsg</span><span class=\"params\">(String text)</span>&#123;<span class=\"comment\">/* ... */</span>&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ä½¿ç”¨ Phone</span></span><br><span class=\"line\"><span class=\"type\">SIMCard</span> <span class=\"variable\">card</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">SIMCard</span>();</span><br><span class=\"line\"><span class=\"type\">Phone</span> <span class=\"variable\">phone</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Phone</span>(card); <span class=\"comment\">//é€šè¿‡ä¾èµ–æ³¨å…¥çš„æ–¹å¼æ¥å°†ä¾èµ–çš„ç±»å¯¹è±¡ä¼ é€’è¿›æ¥ï¼Œè¿™æ ·å°±æé«˜äº†ä»£ç çš„æ‰©å±•æ€§ï¼Œæˆ‘ä»¬å¯ä»¥çµæ´»åœ°æ›¿æ¢ä¾èµ–çš„ç±»ã€‚</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"ä¾èµ–æ³¨å…¥æ¡†æ¶-di-framework\"><a class=\"markdownIt-Anchor\" href=\"#ä¾èµ–æ³¨å…¥æ¡†æ¶-di-framework\"></a> ä¾èµ–æ³¨å…¥æ¡†æ¶ DI Framework</h1>\n<p>åœ¨ä¸Šé¢çš„æ‰‹æœºå’Œ SIM çš„ä¾‹å­ä¸­ï¼Œä¾èµ–æ³¨å…¥çš„å®ç°è¿‡ç¨‹è™½ç„¶ä¸å­˜åœ¨ç¡¬ç¼–ç åœ¨ <code>Phone</code> å†…éƒ¨åˆ›å»º <code>SIMCard</code> ç±»çš„æ–¹å¼ï¼Œä½†æ˜¯ <code>SIMCard</code> ç±»çš„åˆ›å»ºã€ç»„è£…ï¼ˆæ³¨å…¥ï¼‰<code>Phone</code> çš„å·¥ä½œä»…ä»…æ˜¯è¢«ç§»åŠ¨åˆ°äº†æ›´åŠ ä¸Šå±‚çš„ä»£ç è€Œå·²ï¼Œè¿˜æ˜¯éœ€è¦æˆ‘ä»¬ç¨‹åºå‘˜è‡ªå·±æ¥å®ç°ã€‚</p>\n<p>åœ¨å®é™…çš„è½¯ä»¶å¼€å‘ä¸­ï¼Œä¸€äº›é¡¹ç›®å¯èƒ½ä¼šæ¶‰åŠå‡ åã€ä¸Šç™¾ã€ç”šè‡³å‡ ç™¾ä¸ªç±»ï¼Œç±»å¯¹è±¡çš„åˆ›å»ºå’Œä¾èµ–æ³¨å…¥ä¼šå˜å¾—éå¸¸å¤æ‚ã€‚å¦‚æœè¿™éƒ¨åˆ†å·¥ä½œéƒ½æ˜¯é ç¨‹åºå‘˜è‡ªå·±å†™ä»£ç æ¥å®Œæˆï¼Œå®¹æ˜“å‡ºé”™ä¸”å¼€å‘æˆæœ¬ä¹Ÿæ¯”è¾ƒé«˜ã€‚è€Œå¯¹è±¡åˆ›å»ºå’Œä¾èµ–æ³¨å…¥çš„å·¥ä½œï¼Œæœ¬èº«è·Ÿå…·ä½“çš„ä¸šåŠ¡æ— å…³ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥æŠ½è±¡æˆæ¡†æ¶æ¥è‡ªåŠ¨å®Œæˆã€‚è¿™ä¸ªæ¡†æ¶å°±æ˜¯ã€Œä¾èµ–æ³¨å…¥æ¡†æ¶ã€ã€‚</p>\n<p>ç°æˆçš„ä¾èµ–æ³¨å…¥æ¡†æ¶æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚ Google Guiceã€Java Springã€Pico Containerã€Butterfly Container ç­‰ã€‚</p>\n<p>Spring æ˜¯ä¾èµ–æ³¨å…¥æ¡†æ¶ï¼Œè€Œå®ƒè‡ªç§°æ˜¯æ§åˆ¶åè½¬å®¹å™¨ï¼ˆInversion Of Control Containerï¼‰ã€‚è¿™ä¸¤ç§è¯´æ³•éƒ½æ²¡é”™ã€‚æ§åˆ¶åè½¬å®¹å™¨è¿™ç§è¡¨è¿°æ˜¯ä¸€ç§éå¸¸å®½æ³›çš„æè¿°ï¼ŒDI ä¾èµ–æ³¨å…¥æ¡†æ¶çš„è¡¨è¿°æ›´å…·ä½“ã€æ›´æœ‰é’ˆå¯¹æ€§ã€‚æ§åˆ¶åè½¬çš„æ–¹å¼æœ‰å¾ˆå¤šï¼Œé™¤äº†ä¾èµ–æ³¨å…¥ï¼Œè¿˜æœ‰æ¨¡æ¿æ¨¡å¼ç­‰ï¼Œè€Œ Spring æ¡†æ¶çš„æ§åˆ¶åè½¬ä¸»è¦æ˜¯é€šè¿‡ä¾èµ–æ³¨å…¥æ¥å®ç°çš„ã€‚</p>\n<h2 id=\"ä¾èµ–åè½¬åŸåˆ™-dependency-inversion-principle\"><a class=\"markdownIt-Anchor\" href=\"#ä¾èµ–åè½¬åŸåˆ™-dependency-inversion-principle\"></a> ä¾èµ–åè½¬åŸåˆ™ Dependency Inversion Principle</h2>\n<p>è¯¦è§ï¼š<a class=\"uuanqin-bilink\" target=\"_blank\" href=\"/p/undefined/\"><span class=\"yukari\">ç«™å†…æ–‡ç« </span>è®¾è®¡åŸåˆ™</a></p>\n<h1 id=\"spring-ä¸­-iocdi-çš„ä½¿ç”¨\"><a class=\"markdownIt-Anchor\" href=\"#spring-ä¸­-iocdi-çš„ä½¿ç”¨\"></a> Spring ä¸­ IoC/DI çš„ä½¿ç”¨</h1>\n<p>Bean å¯¹è±¡ï¼šIoC å®¹å™¨ä¸­åˆ›å»ºã€ç®¡ç†çš„å¯¹è±¡ï¼Œç§°ä¹‹ä¸º beanã€‚</p>\n<p>åŸºç¡€ä½¿ç”¨ï¼š</p>\n<ul>\n<li><code>@Component</code>ï¼šå°†å½“å‰ç±»ï¼ˆService å±‚ã€Dao å±‚ï¼‰äº¤ç»™ IoC å®¹å™¨ç®¡ç†ï¼Œæˆä¸º IoC å®¹å™¨ä¸­çš„ beanã€‚å®ç°æ§åˆ¶åè½¬ã€‚</li>\n<li><code>@Autowired</code>ï¼šï¼ˆä¸º Controller å’Œ Service æ³¨å…¥ï¼‰è¿è¡Œæ—¶ï¼ŒIoC å®¹å™¨ä¼šæä¾›è¯¥ç±»å‹çš„ bean å¯¹è±¡ï¼Œå¹¶èµ‹å€¼ç»™è¯¥å˜é‡ã€‚å®ç°ä¾èµ–æ³¨å…¥ã€‚</li>\n</ul>\n<blockquote>\n<p>æ‰€ä»¥è¯´ï¼Œåˆ‡æ¢ä¸šåŠ¡å®ç°ç±»æ—¶ï¼Œç›´æ¥æŠŠéœ€è¦ç”¨çš„å®ç°ç±»ä¸ŠåŠ ä¸Š <code>@Component</code> å°±è¡Œã€‚</p>\n</blockquote>\n<p>SpringBoot ä¸­ Bean çš„å£°æ˜ï¼š</p>\n<table>\n<thead>\n<tr>\n<th>æ³¨è§£</th>\n<th>è¯´æ˜</th>\n<th>ä½ç½®</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>@Component</code></td>\n<td>å£°æ˜ bean çš„åŸºç¡€æ³¨è§£</td>\n<td>ä¸å±äºä»¥ä¸‹ä¸‰ç±»æ—¶ï¼Œç”¨æ­¤æ³¨è§£ï¼ˆæ¯”å¦‚ä¸€äº›å·¥å…·ç±»ï¼‰</td>\n</tr>\n<tr>\n<td><code>@Controller</code></td>\n<td rowspan=\"3\"><code>@Component</code> çš„è¡ç”Ÿæ³¨è§£</td>\n<td>æ ‡æ³¨åœ¨æ§åˆ¶å™¨ç±»ä¸Š</td>\n</tr>\n<tr>\n<td><code>@Service</code></td>\n<td>æ ‡æ³¨åœ¨ä¸šåŠ¡ç±»ä¸Š</td>\n</tr>\n<tr>\n<td><code>@Repository</code></td>\n<td>æ ‡æ³¨åœ¨æ•°æ®è®¿é—®ç±»ä¸Šï¼ˆç”±äºä¸ mybatis æ•´åˆï¼Œç”¨çš„å°‘ï¼‰</td>\n</tr>\n</tbody>\n</table>\n<p>å£°æ˜ bean çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡ value å±æ€§æŒ‡å®š bean çš„åå­—ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œé»˜è®¤ä¸ºç±»åé¦–å­—æ¯å°å†™ã€‚</p>\n<p>ä½¿ç”¨ä»¥ä¸Šå››ä¸ªæ³¨è§£éƒ½å¯ä»¥å£°æ˜ beanï¼Œä½†æ˜¯åœ¨ Springboot é›†æˆ web å¼€å‘ä¸­ï¼Œå£°æ˜æ§åˆ¶å™¨ bean åªèƒ½ç”¨ <code>@Controller</code>ã€‚</p>\n<blockquote>\n<p><code>@RestController</code> ä¸­åŒ…å« <code>@Controller</code> æ³¨è§£ã€‚</p>\n</blockquote>\n<p>Bean ç»„ä»¶æ‰«æï¼š</p>\n<ul>\n<li>å‰é¢å£°æ˜ bean çš„å››å¤§æ³¨è§£ï¼Œè¦æƒ³ç”Ÿæ•ˆï¼Œè¿˜éœ€è¦è¢«ç»„ä»¶æ‰«ææ³¨è§£ <code>@Componentscan</code> æ‰«æã€‚<code>@ComponentScan</code> æ³¨è§£è™½ç„¶æ²¡æœ‰æ˜¾å¼é…ç½®ï¼Œä½†æ˜¯å®é™…ä¸Šå·²ç»åŒ…å«åœ¨äº†å¯åŠ¨ç±»å£°æ˜æ³¨è§£ <code>@SpringBootApplication</code> ä¸­ï¼Œé»˜è®¤æ‰«æçš„èŒƒå›´æ˜¯å¯åŠ¨ç±»æ‰€åœ¨åŒ…åŠå…¶å­åŒ…ã€‚</li>\n<li>ã€ä¸æ¨èã€‘æˆ‘ä»¬å¯ä»¥åœ¨å¯åŠ¨ç±»ä¸Šå¢åŠ  <code>@ComponentScan</code> æ³¨è§£ï¼Œæ‰‹åŠ¨è®¾ç½®æ‰«æåŒ…çš„èŒƒå›´ã€‚æ³¨æ„æ£€æŸ¥æœ‰æ²¡æœ‰è¦†ç›–æ‰é»˜è®¤çš„è–®çŒ«èŒƒå›´ï¼Œå¯ä»¥è‡ªå·±æ‰‹åŠ¨æ·»åŠ ä¸Šã€‚</li>\n</ul>\n<p>Bean æ³¨å…¥ï¼š</p>\n<ul>\n<li><code>@Autowired</code> æ³¨è§£ï¼Œé»˜è®¤æ˜¯æŒ‰ç…§ç±»å‹è¿›è¡Œã€‚ä¹Ÿå°±æ˜¯åœ¨ IoC å®¹å™¨ä¸­æ‰¾è¿™ä¸ªç±»å‹çš„ Bean å¯¹è±¡ç„¶åå†æ³¨å…¥ã€‚</li>\n<li>å¦‚æœå­˜åœ¨å¤šä¸ªç›¸åŒç±»å‹çš„ beanï¼Œå°†ä¼šæŠ¥é”™ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ¡ˆè§£å†³ï¼š\n<ul>\n<li><code>@Primary</code>ã€‚åœ¨ Bean ä¸Šé¢å†åŠ ä¸Šè¿™ä¸ªæ³¨è§£ï¼Œå¯ä»¥è®©è¯¥ Bean ä¼˜å…ˆç”Ÿæ•ˆã€‚</li>\n<li><code>@Autowired</code>+<code>@Qualifier(&quot;&lt;beanName&gt;&quot;)</code>ã€‚ä½¿è¯¥åå­—çš„ Bean ç”Ÿæ•ˆã€‚</li>\n<li><code>@Resource(name=&quot;&lt;beanName&gt;&quot;)</code>ã€‚ä½¿è¯¥åå­—çš„ Bean ç”Ÿæ•ˆã€‚</li>\n</ul>\n</li>\n</ul>\n\n<div class=\"callout\" data-callout=\"example\">\n<div class=\"callout-title\">\n<div class=\"callout-title-icon\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-list\"><line x1=\"8\" x2=\"21\" y1=\"6\" y2=\"6\"/><line x1=\"8\" x2=\"21\" y1=\"12\" y2=\"12\"/><line x1=\"8\" x2=\"21\" y1=\"18\" y2=\"18\"/><line x1=\"3\" x2=\"3.01\" y1=\"6\" y2=\"6\"/><line x1=\"3\" x2=\"3.01\" y1=\"12\" y2=\"12\"/><line x1=\"3\" x2=\"3.01\" y1=\"18\" y2=\"18\"/></svg>\n</div>\n<div class=\"callout-title-inner\">ã€é«˜é¢‘é¢è¯•é¢˜ã€‘<code>@Resource</code> ä¸ <code>@Autowired</code> åŒºåˆ«ï¼š</div>\n</div>\n<div class=\"callout-content\"><p></p>\n<ul>\n<li><code>@Autowired</code> æ˜¯ Spring æ¡†æ¶æä¾›çš„æ³¨è§£ï¼Œè€Œ <code>@Resource</code> æ˜¯ JDK æä¾›çš„æ³¨è§£ï¼Œ</li>\n<li><code>@Autowired</code> é»˜è®¤æ˜¯æŒ‰ç…§ç±»å‹æ³¨å…¥ï¼Œè€Œ <code>@Resource</code> é»˜è®¤æ˜¯æŒ‰ç…§åç§°æ³¨å…¥ã€‚</li>\n</ul>\n</div></div><h1 id=\"ç¤ºä¾‹å·¥ç¨‹\"><a class=\"markdownIt-Anchor\" href=\"#ç¤ºä¾‹å·¥ç¨‹\"></a> ç¤ºä¾‹å·¥ç¨‹</h1>\n<p>ä¸€ä¸ªå·¥ç¨‹ç›®å½•ç¤ºä¾‹ï¼š</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/20240508230449.webp\" alt=\"image.png\" width=\"350px\" /></p>\n<p>ç¤ºä¾‹ Mapperï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Mapper</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">DeptMapper</span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">// åŸºäºæ³¨è§£æ–¹å¼ç¼–å†™SQLè¯­å¥</span></span><br><span class=\"line\">\t<span class=\"meta\">@Select(&quot;select * from user&quot;)</span></span><br><span class=\"line\">\tList&lt;dept&gt; <span class=\"title function_\">list</span><span class=\"params\">()</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ç¤ºä¾‹ Service æ¥å£ç±»ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">DeptService</span>&#123;</span><br><span class=\"line\">\tList&lt;Dept&gt; <span class=\"title function_\">list</span><span class=\"params\">()</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ç¤ºä¾‹ Service çš„å®ç°ç±»ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Service</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">DeptServiceImpl</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">DeptService</span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">// æ³¨å…¥Mapper</span></span><br><span class=\"line\">\t<span class=\"meta\">@Autowired</span></span><br><span class=\"line\">\t<span class=\"keyword\">private</span> DeptMapper deptMapper;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// å®ç°æ¥å£</span></span><br><span class=\"line\">\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t<span class=\"keyword\">public</span> List&lt;Dept&gt; <span class=\"title function_\">list</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> deptMapper.list();</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ç¤ºä¾‹ Controller çš„å†™æ³•ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Slf4j</span> <span class=\"comment\">// ä½¿ç”¨æ—¥å¿—</span></span><br><span class=\"line\"><span class=\"meta\">@RestController</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">DeptController</span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">// @Slf4j å°†çœç•¥ä¸‹é¢è¿™ä¸€è¡Œ</span></span><br><span class=\"line\">\t<span class=\"comment\">// private static Logger log = LoggerFactory.getLogger(DeptController.class);</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// Serviceçš„æ³¨å…¥</span></span><br><span class=\"line\">\t<span class=\"meta\">@Autowired</span></span><br><span class=\"line\">\t<span class=\"keyword\">private</span> DeptService deptService;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// @GetMapping ä½œç”¨å’Œä¸‹é¢è¿™æ¡ç›¸åŒ</span></span><br><span class=\"line\">\t<span class=\"comment\">// @RequestMapping(vaue = &quot;/depts&quot;,method = RequestMethod.GET)</span></span><br><span class=\"line\">\t<span class=\"meta\">@GetMapping(&quot;/depts&quot;)</span></span><br><span class=\"line\">\t<span class=\"keyword\">public</span> Result <span class=\"title function_\">list</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">\t\tlog.info(<span class=\"string\">&quot;æŸ¥è¯¢éƒ¨é—¨æ•°æ®&quot;</span>);</span><br><span class=\"line\">\t\tList&lt;Dept&gt; deptList = deptService.list();</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> Result.success(deptList); <span class=\"comment\">// ç»“æœç±»Resultæ˜¯è‡ªå·±å®šä¹‰çš„</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"bean-ç®¡ç†\"><a class=\"markdownIt-Anchor\" href=\"#bean-ç®¡ç†\"></a> Bean ç®¡ç†</h1>\n<h2 id=\"è·å–-bean\"><a class=\"markdownIt-Anchor\" href=\"#è·å–-bean\"></a> è·å– Bean</h2>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æ‹¿åˆ° IoC å®¹å™¨çš„æ–¹æ³•</span></span><br><span class=\"line\"><span class=\"meta\">@Autowired</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> ApplicationContext applicationContext; <span class=\"comment\">// IoCå®¹å™¨å¯¹è±¡</span></span><br></pre></td></tr></table></figure>\n<p><strong>é»˜è®¤æƒ…å†µä¸‹</strong>ï¼ŒSpring é¡¹ç›®å¯åŠ¨æ—¶ï¼Œä¼šæŠŠ bean éƒ½åˆ›å»ºå¥½æ”¾åœ¨ IoC å®¹å™¨ä¸­ <sup class=\"footnote-ref\"><a href=\"#fn1\" id=\"fnref1\">[1]</a></sup>ï¼Œå¦‚æœæƒ³è¦<strong>ä¸»åŠ¨</strong>è·å–è¿™äº› beanï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼ä½¿ç”¨ <code>ApplicationContext</code> çš„æ–¹æ³•ï¼š</p>\n<ul>\n<li>æ ¹æ® name è·å– beanï¼š<code>Object getBean(String name)</code></li>\n<li>æ ¹æ®ç±»å‹è·å– beanï¼š<code>&lt;T&gt; T getBean(Class&lt;T&gt; requiredType)</code></li>\n<li>æ ¹æ® name è·å– beanï¼ˆå¸¦ç±»å‹è½¬æ¢ï¼‰ï¼š<code>&lt;T&gt; T getBean(String name, Class&lt;T&gt; requiredType)</code></li>\n</ul>\n<p>ç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@SpringBootTest</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">ApplicationTests</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"meta\">@Autowired</span></span><br><span class=\"line\">\t<span class=\"keyword\">private</span> ApplicationContext applicationContext; <span class=\"comment\">// IoCå®¹å™¨å¯¹è±¡</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"meta\">@Test</span></span><br><span class=\"line\">\t<span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testGetBean</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">//æ ¹æ®beançš„åç§°è·å–</span></span><br><span class=\"line\">\t<span class=\"type\">DeptController</span> <span class=\"variable\">bean1</span> <span class=\"operator\">=</span> (DeptController) applicationContext.getBean(<span class=\"string\">&quot;deptController&quot;</span>);</span><br><span class=\"line\">\tSystem.out.println(bean1);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">//æ ¹æ®beançš„ç±»å‹è·å–</span></span><br><span class=\"line\">\t<span class=\"type\">DeptController</span> <span class=\"variable\">bean2</span> <span class=\"operator\">=</span> applicationContext.getBean(DeptController.class);</span><br><span class=\"line\">\tSystem.out.println(bean2);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">//æ ¹æ®beançš„åç§°åŠç±»å‹è·å–</span></span><br><span class=\"line\">\t<span class=\"type\">DeptController</span> <span class=\"variable\">bean3</span> <span class=\"operator\">=</span> applicationContext.getBean(<span class=\"string\">&quot;deptController&quot;</span>,DeptController.class);</span><br><span class=\"line\">\tSystem.out.println(bean3);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>è¾“å‡ºç»“æœå‘ç°ä¸‰ä¸ª bean å¯¹è±¡éƒ½æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œè¯´æ˜æ­¤æ—¶ bean æ˜¯å•ä¾‹çš„ã€‚</p>\n<h2 id=\"bean-çš„ä½œç”¨åŸŸ\"><a class=\"markdownIt-Anchor\" href=\"#bean-çš„ä½œç”¨åŸŸ\"></a> Bean çš„ä½œç”¨åŸŸ</h2>\n<p>Spring æ”¯æŒäº”ç§ä½œç”¨åŸŸï¼Œåä¸‰ç§åœ¨ web ç¯å¢ƒæ‰ç”Ÿæ•ˆï¼š</p>\n<table>\n<thead>\n<tr>\n<th>ä½œç”¨åŸŸ</th>\n<th>è¯´æ˜</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>singleton</code></td>\n<td>å®¹å™¨å†…åŒåç§°çš„ bean åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼ˆå•ä¾‹ï¼‰ï¼ˆé»˜è®¤ï¼‰</td>\n</tr>\n<tr>\n<td><code>prototype</code></td>\n<td>æ¯æ¬¡ä½¿ç”¨è¯¥ bean æ—¶ä¼šåˆ›å»ºæ–°çš„å®ä¾‹ï¼ˆéå•ä¾‹ï¼‰</td>\n</tr>\n<tr>\n<td><code>request</code></td>\n<td>æ¯ä¸ªè¯·æ±‚èŒƒå›´å†…ä¼šåˆ›å»ºæ–°çš„å®ä¾‹ï¼ˆweb ç¯å¢ƒä¸­ï¼Œäº†è§£å³å¯ï¼‰</td>\n</tr>\n<tr>\n<td><code>session</code></td>\n<td>æ¯ä¸ªä¼šè¯èŒƒå›´å†…ä¼šåˆ›å»ºæ–°çš„å®ä¾‹ï¼ˆweb ç¯å¢ƒä¸­ï¼Œäº†è§£å³å¯ï¼‰</td>\n</tr>\n<tr>\n<td><code>application</code></td>\n<td>æ¯ä¸ªåº”ç”¨èŒƒå›´å†…ä¼šåˆ›å»ºæ–°çš„å®ä¾‹ï¼ˆweb ç¯å¢ƒä¸­ï¼Œäº†è§£å³å¯ï¼‰</td>\n</tr>\n</tbody>\n</table>\n<p>å¯ä»¥é€šè¿‡ <code>@Scope</code> æ³¨è§£æ¥è¿›è¡Œé…ç½®ä½œç”¨åŸŸï¼š<code>@Scope(&quot;prototype&quot;)</code>ã€‚</p>\n<p>é»˜è®¤ <code>singleton</code> çš„ beanï¼Œåœ¨å®¹å™¨å¯åŠ¨æ—¶è¢«åˆ›å»ºï¼Œå¯ä»¥ä½¿ç”¨ <code>@Lazy</code> æ³¨è§£æ¥å»¶è¿Ÿåˆå§‹åŒ–ï¼ˆå»¶è¿Ÿåˆ°ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶ï¼‰ï¼Œ<code>prototype</code> çš„ beanï¼Œæ¯ä¸€æ¬¡ä½¿ç”¨è¯¥ bean çš„æ—¶å€™éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹ã€‚</p>\n<p>å®é™…å¼€å‘å½“ä¸­ï¼Œç»å¤§éƒ¨åˆ†çš„ Bean æ˜¯å•ä¾‹çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ç»å¤§éƒ¨åˆ† Bean ä¸éœ€è¦é…ç½® scope å±æ€§ã€‚</p>\n<h2 id=\"ç¬¬ä¸‰æ–¹-bean\"><a class=\"markdownIt-Anchor\" href=\"#ç¬¬ä¸‰æ–¹-bean\"></a> ç¬¬ä¸‰æ–¹ Bean</h2>\n<p>å¦‚æœè¦ç®¡ç†çš„ bean å¯¹è±¡æ¥è‡ªäºç¬¬ä¸‰æ–¹ï¼ˆä¸æ˜¯è‡ªå®šä¹‰çš„ï¼‰ï¼Œæ˜¯æ— æ³•ç”¨ <code>@Component</code> åŠè¡ç”Ÿæ³¨è§£å£°æ˜ bean çš„ï¼ˆç¬¬ä¸‰æ–¹æŸäº›ç±»çš„æºç å®šä¹‰ä¸­æˆ‘ä»¬æ— æ³•æ”¹åŠ¨ï¼‰ï¼Œå°±éœ€è¦ç”¨åˆ° <code>@Bean</code> æ³¨è§£ã€‚è‹¥è¦ç®¡ç†çš„ç¬¬ä¸‰æ–¹ bean å¯¹è±¡ï¼Œå»ºè®®å¯¹è¿™äº› bean è¿›è¡Œé›†ä¸­åˆ†ç±»é…ç½®ï¼Œå¯ä»¥é€šè¿‡ <code>@Configuration</code> æ³¨è§£å£°æ˜ä¸€ä¸ªé…ç½®ç±»ã€‚</p>\n<blockquote>\n<p><code>@Configuration</code> åº•å±‚ä¹Ÿæ˜¯ <code>@Component</code>ã€‚</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æ–¹æ³•ä¸€ï¼šã€ä¸æ¨èã€‘å®šä¹‰åœ¨å¯åŠ¨ç±»ä¸­</span></span><br><span class=\"line\"><span class=\"comment\">// è¿™æ ·å¯¼è‡´å¯åŠ¨ç±»ä¸çº¯ç²¹</span></span><br><span class=\"line\"><span class=\"meta\">@SpringBootApplication</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">SpringbootWebConfig2Application</span>&#123;</span><br><span class=\"line\">\t<span class=\"meta\">@Bean</span> <span class=\"comment\">//å°†æ–¹æ³•è¿”å›å€¼äº¤ç»™IoCå®¹å™¨ç®¡ç†ï¼Œæˆä¸ºIoCå®¹å™¨çš„beanå¯¹è±¡</span></span><br><span class=\"line\">\t<span class=\"keyword\">public</span> MyBean <span class=\"title function_\">myBean</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">MyBean</span>();</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æ–¹æ³•äºŒï¼šå£°æ˜ä¸€ä¸ªé…ç½®ç±»</span></span><br><span class=\"line\"><span class=\"comment\">// é€šè¿‡@Beanæ³¨è§£çš„name/valueå±æ€§æŒ‡å®šbeanåç§°ï¼Œå¦‚æœæœªæŒ‡å®šï¼Œé»˜è®¤æ˜¯æ–¹æ³•å</span></span><br><span class=\"line\"><span class=\"meta\">@Configuration</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">CommonConfig</span>&#123;</span><br><span class=\"line\">\t<span class=\"meta\">@Bean</span></span><br><span class=\"line\">\t<span class=\"keyword\">public</span> MyBean <span class=\"title function_\">myBean</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">MyBean</span>();</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ä½¿ç”¨ Bean æ—¶ç›´æ¥æ³¨å…¥å³å¯ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Autowired</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> MyBean mybean;</span><br></pre></td></tr></table></figure>\n<p>å¦‚æœç¬¬ä¸‰æ–¹ bean éœ€è¦ä¾èµ–å…¶å®ƒ bean å¯¹è±¡ï¼Œç›´æ¥åœ¨ bean å®šä¹‰æ–¹æ³•ä¸­è®¾ç½®å½¢å‚å³å¯ï¼Œå®¹å™¨ä¼šæ ¹æ®ç±»å‹è‡ªåŠ¨è£…é…ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Configuration</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">CommonConfig</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// SpringBootå®¹å™¨ä¼šæ ¹æ®å‚æ•°ç±»å‹MyServiceè‡ªåŠ¨è£…é…Beanå¯¹è±¡</span></span><br><span class=\"line\">\t<span class=\"meta\">@Bean</span></span><br><span class=\"line\">\t<span class=\"keyword\">public</span> MyBean <span class=\"title function_\">myBean</span><span class=\"params\">(MyService myService)</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// çœç•¥ä¸€äº›ä½¿ç”¨myServiceçš„æ“ä½œ</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">MyBean</span>();</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>@Component</code> åŠè¡ç”Ÿæ³¨è§£ä¸ <code>@Bean</code> æ³¨è§£ä½¿ç”¨åœºæ™¯?</p>\n<ul>\n<li>é¡¹ç›®ä¸­è‡ªå®šä¹‰çš„ï¼Œä½¿ç”¨ <code>@Component</code> åŠå…¶è¡ç”Ÿæ³¨è§£</li>\n<li>é¡¹ç›®ä¸­å¼•å…¥ç¬¬ä¸‰æ–¹çš„ï¼Œä½¿ç”¨ <code>@Bean</code> æ³¨è§£</li>\n</ul>\n<h1 id=\"åè®°\"><a class=\"markdownIt-Anchor\" href=\"#åè®°\"></a> åè®°</h1>\n<p>ä¸‹é¢ä½ å¯ä»¥ç«‹å³ç§»æ­¥è¿™ç¯‡æ–‡ç« åŠ æ·±ä¸Šé¢æ‰€å­¦çŸ¥è¯†çš„å°è±¡ï¼š<a class=\"uuanqin-bilink\" target=\"_blank\" href=\"/p/21b7da2d/\"><span class=\"yukari\">ç«™å†…æ–‡ç« </span>SpringBoot çš„åŸç†ä»¥åŠå†™ä¸€ä¸ªè‡ªå®šä¹‰ Starter</a>ã€‚</p>\n<h1 id=\"æœ¬æ–‡å‚è€ƒ\"><a class=\"markdownIt-Anchor\" href=\"#æœ¬æ–‡å‚è€ƒ\"></a> æœ¬æ–‡å‚è€ƒ</h1>\n<ul>\n<li><a href=\"https://www.bilibili.com/video/BV1m84y1w7Tb?p=75&amp;vd_source=e03d48176855fc5349b27aef691f9cdb\">Day05-09. åˆ†å±‚è§£è€¦-ä¸‰å±‚æ¶æ„_å“”å“©å“”å“©_bilibili</a></li>\n<li><a href=\"https://javaguide.cn/system-design/framework/spring/ioc-and-aop.html#ioc-inversion-of-control\">IoC &amp; AOPè¯¦è§£ï¼ˆå¿«é€Ÿææ‡‚ï¼‰ | JavaGuide</a></li>\n<li><a href=\"https://gitee.com/buxsren/design-pattern-books/blob/master/docs/177444.md\">è®¾è®¡æ¨¡å¼ä¹‹ç¾ - ç‹äº‰ - æå®¢æ—¶é—´ä¸“æ </a></li>\n<li>æœ¬ç§‘ç”Ÿè¯¾ç¨‹ç¬”è®°ã€Šç¨‹åºè®¾è®¡ä¸­çº§å®è·µï¼†è®¾è®¡æ¨¡å¼ã€‹ - TJU ğŸâš±ï¸</li>\n</ul>\n<hr class=\"footnotes-sep\" />\n<section class=\"footnotes\">\n<ol class=\"footnotes-list\">\n<li id=\"fn1\" class=\"footnote-item\"><p>è¿™è¿˜ä¼šå—åˆ°ä½œç”¨åŸŸåŠå»¶è¿Ÿåˆå§‹åŒ–å½±å“ï¼Œè¿™é‡Œä¸»è¦é’ˆå¯¹äºé»˜è®¤çš„å•ä¾‹éå»¶è¿ŸåŠ è½½çš„ bean è€Œè¨€ã€‚ <a href=\"#fnref1\" class=\"footnote-backref\">â†©ï¸</a></p>\n</li>\n</ol>\n</section>\n","raw":"---\ntitle: SpringBoot ä¸­çš„ IoC & DI å…¥é—¨\ntags:\n  - SpringBoot\n  - Java\n  - Bean\n  - IoC\n  - DI\ncover: 'https://cdn.gallery.uuanqin.top/img/202409050030052.webp'\ndescription: å…¥é—¨æ¡ˆä¾‹æ„Ÿå— IOC å®¹å™¨çš„åŸºæœ¬å·¥ä½œæ–¹å¼ã€‚\ncategories:\n  - æŠ€æœ¯å­¦ä¹ \nabbrlink: 66216cb4\ndate: 2024-08-02 00:40:03\ntop_img:\n---\n\n> [!notice] SpringBoot çš„ä¸¤å¤§æ ¸å¿ƒ\n>\n> 1. IoCï¼šæ§åˆ¶åè½¬\n> 2. [[SpringBoot ä¸­çš„é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰|AOP]]ï¼šé¢å‘åˆ‡é¢ç¼–ç¨‹\n\n# åŸºæœ¬æ¦‚å¿µ\n\n## æ§åˆ¶åè½¬ Inversion of Control\n\n**æ§åˆ¶åè½¬ï¼ˆInversion of Controlï¼ŒIoCï¼‰** å³æ§åˆ¶åè½¬/åè½¬æ§åˆ¶ã€‚å®ƒæ˜¯ä¸€ç§è®¾è®¡æ€æƒ³ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæŠ€æœ¯å®ç°ã€‚å®ƒæè¿°çš„æ˜¯ Java å¼€å‘é¢†åŸŸå¯¹è±¡çš„åˆ›å»ºä»¥åŠç®¡ç†çš„é—®é¢˜ã€‚è¿™ç§è®¾è®¡æ€æƒ³å¯ä»¥ç”¨æ¥æŒ‡å¯¼æ¡†æ¶å±‚é¢çš„è®¾è®¡ã€‚\n\n- **æ§åˆ¶** ï¼šæŒ‡çš„æ˜¯å¯¹è±¡åˆ›å»ºï¼ˆå®ä¾‹åŒ–ã€ç®¡ç†ï¼‰çš„æƒåŠ›ï¼Œå¯¹ç¨‹åºæ‰§è¡Œæµç¨‹çš„æ§åˆ¶ã€‚\n- **åè½¬** ï¼šæ§åˆ¶æƒäº¤ç»™å¤–éƒ¨ç¯å¢ƒï¼ˆIoC å®¹å™¨ï¼‰ã€‚åœ¨æ²¡æœ‰åè½¬ä¹‹å‰ï¼Œç¨‹åºå‘˜è‡ªå·±æ§åˆ¶æ•´ä¸ªç¨‹åºçš„æ‰§è¡Œã€‚åœ¨ä½¿ç”¨æŸä¸ªæ§åˆ¶åè½¬æ¡†æ¶ä¹‹åï¼Œæ•´ä¸ªç¨‹åºçš„æ‰§è¡Œæµç¨‹å¯ä»¥é€šè¿‡æ¡†æ¶æ¥æ§åˆ¶ã€‚æµç¨‹çš„æ§åˆ¶æƒä»ç¨‹åºå‘˜ã€Œåè½¬ã€åˆ°äº†æ¡†æ¶ã€‚\n\n## ä¾èµ–æ³¨å…¥ Dependency Injection\n\nIoC æœ€å¸¸è§ä»¥åŠæœ€åˆç†çš„å®ç°æ–¹å¼å«åš **ä¾èµ–æ³¨å…¥ï¼ˆDependency Injectionï¼ŒDIï¼‰**ã€‚å®ƒæ˜¯ä¸€ç§å…·ä½“çš„ç¼–ç æŠ€å·§ï¼šä¸é€šè¿‡ `new` çš„æ–¹å¼åœ¨ç±»å†…éƒ¨åˆ›å»ºä¾èµ–ç±»å¯¹è±¡ï¼Œè€Œæ˜¯å°†ä¾èµ–çš„ç±»å¯¹è±¡åœ¨å¤–éƒ¨åˆ›å»ºå¥½ä¹‹åï¼Œé€šè¿‡æ„é€ å‡½æ•°ã€å‡½æ•°å‚æ•°ç­‰æ–¹å¼ä¼ é€’ï¼ˆæˆ–æ³¨å…¥ï¼‰ç»™ç±»ä½¿ç”¨ã€‚\n\nä¸‹é¢é€šè¿‡ç®€å•ä¾‹å­å±•ç¤º DIï¼šæ‰‹æœºç±» `Phone` å­˜åœ¨å†…éƒ¨æˆå‘˜ `SIMCard` å¡ã€‚æ’å…¥ `SIMCard` çš„æ‰‹æœºæ‰èƒ½ä½¿ç”¨ï¼Œè°ƒç”¨ `SIMCard` ç±»ä¸­çš„æ–¹æ³•ã€‚\n\nä¸‹é¢å±•ç¤º `Phone` éä¾èµ–æ³¨å…¥å®ç°çš„è¿‡ç¨‹ï¼š\n\n```java\n// éä¾èµ–æ³¨å…¥å®ç°æ–¹å¼\npublic class Phone{\n\tprivate SIMCard card;\n\tpublic Phone(){\n\t\tthis.card = new SIMCard(); // æ„é€ å‡½æ•°åˆ›å»ºäº†SIMå¡ï¼Œæœ‰ç‚¹ç¡¬ç¼–ç \n\t}\n\tpublic void sendMsg(String text){\n\t\tthis.card.send(text);\n\t}\n}\n\npublic class SIMCard{\n\tpublic void send(String text){/* ... */}\n}\n\n// ä½¿ç”¨ Phone æ—¶\nPhone phone = new Phone()\n```\n\nä¾èµ–æ³¨å…¥çš„å®ç°è¿‡ç¨‹ï¼š\n\n```java\n// ä¾èµ–æ³¨å…¥å®ç°æ–¹å¼\npublic class Phone{\n\tprivate SIMCard card;\n\tpublic Phone(SIMCard card){\n\t\tthis.card = card;\n\t}\n\tpublic void sendMsg(String text){/* ... */}\n}\n\n// ä½¿ç”¨ Phone\nSIMCard card = new SIMCard();\nPhone phone = new Phone(card); //é€šè¿‡ä¾èµ–æ³¨å…¥çš„æ–¹å¼æ¥å°†ä¾èµ–çš„ç±»å¯¹è±¡ä¼ é€’è¿›æ¥ï¼Œè¿™æ ·å°±æé«˜äº†ä»£ç çš„æ‰©å±•æ€§ï¼Œæˆ‘ä»¬å¯ä»¥çµæ´»åœ°æ›¿æ¢ä¾èµ–çš„ç±»ã€‚\n```\n\n# ä¾èµ–æ³¨å…¥æ¡†æ¶ DI Framework\n\nåœ¨ä¸Šé¢çš„æ‰‹æœºå’Œ SIM çš„ä¾‹å­ä¸­ï¼Œä¾èµ–æ³¨å…¥çš„å®ç°è¿‡ç¨‹è™½ç„¶ä¸å­˜åœ¨ç¡¬ç¼–ç åœ¨ `Phone` å†…éƒ¨åˆ›å»º `SIMCard` ç±»çš„æ–¹å¼ï¼Œä½†æ˜¯ `SIMCard` ç±»çš„åˆ›å»ºã€ç»„è£…ï¼ˆæ³¨å…¥ï¼‰`Phone` çš„å·¥ä½œä»…ä»…æ˜¯è¢«ç§»åŠ¨åˆ°äº†æ›´åŠ ä¸Šå±‚çš„ä»£ç è€Œå·²ï¼Œè¿˜æ˜¯éœ€è¦æˆ‘ä»¬ç¨‹åºå‘˜è‡ªå·±æ¥å®ç°ã€‚\n\nåœ¨å®é™…çš„è½¯ä»¶å¼€å‘ä¸­ï¼Œä¸€äº›é¡¹ç›®å¯èƒ½ä¼šæ¶‰åŠå‡ åã€ä¸Šç™¾ã€ç”šè‡³å‡ ç™¾ä¸ªç±»ï¼Œç±»å¯¹è±¡çš„åˆ›å»ºå’Œä¾èµ–æ³¨å…¥ä¼šå˜å¾—éå¸¸å¤æ‚ã€‚å¦‚æœè¿™éƒ¨åˆ†å·¥ä½œéƒ½æ˜¯é ç¨‹åºå‘˜è‡ªå·±å†™ä»£ç æ¥å®Œæˆï¼Œå®¹æ˜“å‡ºé”™ä¸”å¼€å‘æˆæœ¬ä¹Ÿæ¯”è¾ƒé«˜ã€‚è€Œå¯¹è±¡åˆ›å»ºå’Œä¾èµ–æ³¨å…¥çš„å·¥ä½œï¼Œæœ¬èº«è·Ÿå…·ä½“çš„ä¸šåŠ¡æ— å…³ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥æŠ½è±¡æˆæ¡†æ¶æ¥è‡ªåŠ¨å®Œæˆã€‚è¿™ä¸ªæ¡†æ¶å°±æ˜¯ã€Œä¾èµ–æ³¨å…¥æ¡†æ¶ã€ã€‚\n\nç°æˆçš„ä¾èµ–æ³¨å…¥æ¡†æ¶æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚ Google Guiceã€Java Springã€Pico Containerã€Butterfly Container ç­‰ã€‚\n\nSpring æ˜¯ä¾èµ–æ³¨å…¥æ¡†æ¶ï¼Œè€Œå®ƒè‡ªç§°æ˜¯æ§åˆ¶åè½¬å®¹å™¨ï¼ˆInversion Of Control Containerï¼‰ã€‚è¿™ä¸¤ç§è¯´æ³•éƒ½æ²¡é”™ã€‚æ§åˆ¶åè½¬å®¹å™¨è¿™ç§è¡¨è¿°æ˜¯ä¸€ç§éå¸¸å®½æ³›çš„æè¿°ï¼ŒDI ä¾èµ–æ³¨å…¥æ¡†æ¶çš„è¡¨è¿°æ›´å…·ä½“ã€æ›´æœ‰é’ˆå¯¹æ€§ã€‚æ§åˆ¶åè½¬çš„æ–¹å¼æœ‰å¾ˆå¤šï¼Œé™¤äº†ä¾èµ–æ³¨å…¥ï¼Œè¿˜æœ‰æ¨¡æ¿æ¨¡å¼ç­‰ï¼Œè€Œ Spring æ¡†æ¶çš„æ§åˆ¶åè½¬ä¸»è¦æ˜¯é€šè¿‡ä¾èµ–æ³¨å…¥æ¥å®ç°çš„ã€‚\n\n## ä¾èµ–åè½¬åŸåˆ™ Dependency Inversion Principle\n\nè¯¦è§ï¼š[[è®¾è®¡åŸåˆ™]]\n\n# Spring ä¸­ IoC/DI çš„ä½¿ç”¨\n\nBean å¯¹è±¡ï¼šIoC å®¹å™¨ä¸­åˆ›å»ºã€ç®¡ç†çš„å¯¹è±¡ï¼Œç§°ä¹‹ä¸º beanã€‚\n\nåŸºç¡€ä½¿ç”¨ï¼š\n\n- `@Component`ï¼šå°†å½“å‰ç±»ï¼ˆService å±‚ã€Dao å±‚ï¼‰äº¤ç»™ IoC å®¹å™¨ç®¡ç†ï¼Œæˆä¸º IoC å®¹å™¨ä¸­çš„ beanã€‚å®ç°æ§åˆ¶åè½¬ã€‚\n- `@Autowired`ï¼šï¼ˆä¸º Controller å’Œ Service æ³¨å…¥ï¼‰è¿è¡Œæ—¶ï¼ŒIoC å®¹å™¨ä¼šæä¾›è¯¥ç±»å‹çš„ bean å¯¹è±¡ï¼Œå¹¶èµ‹å€¼ç»™è¯¥å˜é‡ã€‚å®ç°ä¾èµ–æ³¨å…¥ã€‚\n\n> æ‰€ä»¥è¯´ï¼Œåˆ‡æ¢ä¸šåŠ¡å®ç°ç±»æ—¶ï¼Œç›´æ¥æŠŠéœ€è¦ç”¨çš„å®ç°ç±»ä¸ŠåŠ ä¸Š `@Component` å°±è¡Œã€‚\n\nSpringBoot ä¸­ Bean çš„å£°æ˜ï¼š\n\n| æ³¨è§£            | è¯´æ˜                 | ä½ç½®                            |\n| ------------- | ------------------ | ----------------------------- |\n| `@Component`  | å£°æ˜ bean çš„åŸºç¡€æ³¨è§£      | ä¸å±äºä»¥ä¸‹ä¸‰ç±»æ—¶ï¼Œç”¨æ­¤æ³¨è§£ï¼ˆæ¯”å¦‚ä¸€äº›å·¥å…·ç±»ï¼‰        |\n| `@Controller` | `@Component` çš„è¡ç”Ÿæ³¨è§£ | æ ‡æ³¨åœ¨æ§åˆ¶å™¨ç±»ä¸Š                      |\n| `@Service`    | `@Component` çš„è¡ç”Ÿæ³¨è§£ | æ ‡æ³¨åœ¨ä¸šåŠ¡ç±»ä¸Š                       |\n| `@Repository` | `@Component` çš„è¡ç”Ÿæ³¨è§£ | æ ‡æ³¨åœ¨æ•°æ®è®¿é—®ç±»ä¸Šï¼ˆç”±äºä¸ mybatis æ•´åˆï¼Œç”¨çš„å°‘ï¼‰ |\n\nå£°æ˜ bean çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡ value å±æ€§æŒ‡å®š bean çš„åå­—ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œé»˜è®¤ä¸ºç±»åé¦–å­—æ¯å°å†™ã€‚\n\nä½¿ç”¨ä»¥ä¸Šå››ä¸ªæ³¨è§£éƒ½å¯ä»¥å£°æ˜ beanï¼Œä½†æ˜¯åœ¨ Springboot é›†æˆ web å¼€å‘ä¸­ï¼Œå£°æ˜æ§åˆ¶å™¨ bean åªèƒ½ç”¨ `@Controller`ã€‚\n\n> `@RestController` ä¸­åŒ…å« `@Controller` æ³¨è§£ã€‚\n\nBean ç»„ä»¶æ‰«æï¼š\n\n- å‰é¢å£°æ˜ bean çš„å››å¤§æ³¨è§£ï¼Œè¦æƒ³ç”Ÿæ•ˆï¼Œè¿˜éœ€è¦è¢«ç»„ä»¶æ‰«ææ³¨è§£ `@Componentscan` æ‰«æã€‚`@ComponentScan` æ³¨è§£è™½ç„¶æ²¡æœ‰æ˜¾å¼é…ç½®ï¼Œä½†æ˜¯å®é™…ä¸Šå·²ç»åŒ…å«åœ¨äº†å¯åŠ¨ç±»å£°æ˜æ³¨è§£ `@SpringBootApplication` ä¸­ï¼Œé»˜è®¤æ‰«æçš„èŒƒå›´æ˜¯å¯åŠ¨ç±»æ‰€åœ¨åŒ…åŠå…¶å­åŒ…ã€‚\n- ã€ä¸æ¨èã€‘æˆ‘ä»¬å¯ä»¥åœ¨å¯åŠ¨ç±»ä¸Šå¢åŠ  `@ComponentScan` æ³¨è§£ï¼Œæ‰‹åŠ¨è®¾ç½®æ‰«æåŒ…çš„èŒƒå›´ã€‚æ³¨æ„æ£€æŸ¥æœ‰æ²¡æœ‰è¦†ç›–æ‰é»˜è®¤çš„è–®çŒ«èŒƒå›´ï¼Œå¯ä»¥è‡ªå·±æ‰‹åŠ¨æ·»åŠ ä¸Šã€‚\n\nBean æ³¨å…¥ï¼š\n\n- `@Autowired` æ³¨è§£ï¼Œé»˜è®¤æ˜¯æŒ‰ç…§ç±»å‹è¿›è¡Œã€‚ä¹Ÿå°±æ˜¯åœ¨ IoC å®¹å™¨ä¸­æ‰¾è¿™ä¸ªç±»å‹çš„ Bean å¯¹è±¡ç„¶åå†æ³¨å…¥ã€‚\n- å¦‚æœå­˜åœ¨å¤šä¸ªç›¸åŒç±»å‹çš„ beanï¼Œå°†ä¼šæŠ¥é”™ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ¡ˆè§£å†³ï¼š\n\t- `@Primary`ã€‚åœ¨ Bean ä¸Šé¢å†åŠ ä¸Šè¿™ä¸ªæ³¨è§£ï¼Œå¯ä»¥è®©è¯¥ Bean ä¼˜å…ˆç”Ÿæ•ˆã€‚\n\t- `@Autowired`+`@Qualifier(\"<beanName>\")`ã€‚ä½¿è¯¥åå­—çš„ Bean ç”Ÿæ•ˆã€‚\n\t- `@Resource(name=\"<beanName>\")`ã€‚ä½¿è¯¥åå­—çš„ Bean ç”Ÿæ•ˆã€‚\n\n> [!example] ã€é«˜é¢‘é¢è¯•é¢˜ã€‘`@Resource` ä¸ `@Autowired` åŒºåˆ«ï¼š\n> - `@Autowired` æ˜¯ Spring æ¡†æ¶æä¾›çš„æ³¨è§£ï¼Œè€Œ `@Resource` æ˜¯ JDK æä¾›çš„æ³¨è§£ï¼Œ\n> - `@Autowired` é»˜è®¤æ˜¯æŒ‰ç…§ç±»å‹æ³¨å…¥ï¼Œè€Œ `@Resource` é»˜è®¤æ˜¯æŒ‰ç…§åç§°æ³¨å…¥ã€‚\n\n# ç¤ºä¾‹å·¥ç¨‹\n\nä¸€ä¸ªå·¥ç¨‹ç›®å½•ç¤ºä¾‹ï¼š\n\n![image.png|350](https://cdn.gallery.uuanqin.top/img/20240508230449.webp)\n\nç¤ºä¾‹ Mapperï¼š\n\n```java\n@Mapper\npublic interface DeptMapper{\n\t// åŸºäºæ³¨è§£æ–¹å¼ç¼–å†™SQLè¯­å¥\n\t@Select(\"select * from user\")\n\tList<dept> list();\n}\n```\n\nç¤ºä¾‹ Service æ¥å£ç±»ï¼š\n\n```java\npublic interface DeptService{\n\tList<Dept> list();\n}\n```\n\nç¤ºä¾‹ Service çš„å®ç°ç±»ï¼š\n\n```java\n@Service\npublic class DeptServiceImpl implements DeptService{\n\t// æ³¨å…¥Mapper\n\t@Autowired\n\tprivate DeptMapper deptMapper;\n\n\t// å®ç°æ¥å£\n\t@Override\n\tpublic List<Dept> list(){\n\t\treturn deptMapper.list();\n\t}\n}\n```\n\nç¤ºä¾‹ Controller çš„å†™æ³•ï¼š\n\n```java\n@Slf4j // ä½¿ç”¨æ—¥å¿—\n@RestController\npublic class DeptController{\n\t// @Slf4j å°†çœç•¥ä¸‹é¢è¿™ä¸€è¡Œ\n\t// private static Logger log = LoggerFactory.getLogger(DeptController.class);\n\n\t// Serviceçš„æ³¨å…¥\n\t@Autowired\n\tprivate DeptService deptService;\n\n\t// @GetMapping ä½œç”¨å’Œä¸‹é¢è¿™æ¡ç›¸åŒ\n\t// @RequestMapping(vaue = \"/depts\",method = RequestMethod.GET)\n\t@GetMapping(\"/depts\")\n\tpublic Result list(){\n\t\tlog.info(\"æŸ¥è¯¢éƒ¨é—¨æ•°æ®\");\n\t\tList<Dept> deptList = deptService.list();\n\t\treturn Result.success(deptList); // ç»“æœç±»Resultæ˜¯è‡ªå·±å®šä¹‰çš„\n\t}\n}\n```\n\n# Bean ç®¡ç†\n\n## è·å– Bean\n\n```java\n// æ‹¿åˆ° IoC å®¹å™¨çš„æ–¹æ³•\n@Autowired\nprivate ApplicationContext applicationContext; // IoCå®¹å™¨å¯¹è±¡\n```\n\n**é»˜è®¤æƒ…å†µä¸‹**ï¼ŒSpring é¡¹ç›®å¯åŠ¨æ—¶ï¼Œä¼šæŠŠ bean éƒ½åˆ›å»ºå¥½æ”¾åœ¨ IoC å®¹å™¨ä¸­ [^ioc]ï¼Œå¦‚æœæƒ³è¦**ä¸»åŠ¨**è·å–è¿™äº› beanï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼ä½¿ç”¨ `ApplicationContext` çš„æ–¹æ³•ï¼š\n- æ ¹æ® name è·å– beanï¼š`Object getBean(String name)`\n- æ ¹æ®ç±»å‹è·å– beanï¼š`<T> T getBean(Class<T> requiredType)`\n- æ ¹æ® name è·å– beanï¼ˆå¸¦ç±»å‹è½¬æ¢ï¼‰ï¼š`<T> T getBean(String name, Class<T> requiredType)`\n\n[^ioc]: è¿™è¿˜ä¼šå—åˆ°ä½œç”¨åŸŸåŠå»¶è¿Ÿåˆå§‹åŒ–å½±å“ï¼Œè¿™é‡Œä¸»è¦é’ˆå¯¹äºé»˜è®¤çš„å•ä¾‹éå»¶è¿ŸåŠ è½½çš„ bean è€Œè¨€ã€‚\n\nç¤ºä¾‹ï¼š\n\n```java\n@SpringBootTest\nclass ApplicationTests{\n\n\t@Autowired\n\tprivate ApplicationContext applicationContext; // IoCå®¹å™¨å¯¹è±¡\n\t\n\t@Test\n\tpublic void testGetBean(){\n\t\n\t//æ ¹æ®beançš„åç§°è·å–\n\tDeptController bean1 = (DeptController) applicationContext.getBean(\"deptController\");\n\tSystem.out.println(bean1);\n\t\n\t//æ ¹æ®beançš„ç±»å‹è·å–\n\tDeptController bean2 = applicationContext.getBean(DeptController.class);\n\tSystem.out.println(bean2);\n\t\n\t//æ ¹æ®beançš„åç§°åŠç±»å‹è·å–\n\tDeptController bean3 = applicationContext.getBean(\"deptController\",DeptController.class);\n\tSystem.out.println(bean3);\n}\n```\n\nè¾“å‡ºç»“æœå‘ç°ä¸‰ä¸ª bean å¯¹è±¡éƒ½æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œè¯´æ˜æ­¤æ—¶ bean æ˜¯å•ä¾‹çš„ã€‚\n\n## Bean çš„ä½œç”¨åŸŸ\n\nSpring æ”¯æŒäº”ç§ä½œç”¨åŸŸï¼Œåä¸‰ç§åœ¨ web ç¯å¢ƒæ‰ç”Ÿæ•ˆï¼š\n\n| ä½œç”¨åŸŸ           | è¯´æ˜                           |\n| ------------- | ---------------------------- |\n| `singleton`   | å®¹å™¨å†…åŒåç§°çš„ bean åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼ˆå•ä¾‹ï¼‰ï¼ˆé»˜è®¤ï¼‰  |\n| `prototype`   | æ¯æ¬¡ä½¿ç”¨è¯¥ bean æ—¶ä¼šåˆ›å»ºæ–°çš„å®ä¾‹ï¼ˆéå•ä¾‹ï¼‰     |\n| `request`     | æ¯ä¸ªè¯·æ±‚èŒƒå›´å†…ä¼šåˆ›å»ºæ–°çš„å®ä¾‹ï¼ˆweb ç¯å¢ƒä¸­ï¼Œäº†è§£å³å¯ï¼‰ |\n| `session`     | æ¯ä¸ªä¼šè¯èŒƒå›´å†…ä¼šåˆ›å»ºæ–°çš„å®ä¾‹ï¼ˆweb ç¯å¢ƒä¸­ï¼Œäº†è§£å³å¯ï¼‰ |\n| `application` | æ¯ä¸ªåº”ç”¨èŒƒå›´å†…ä¼šåˆ›å»ºæ–°çš„å®ä¾‹ï¼ˆweb ç¯å¢ƒä¸­ï¼Œäº†è§£å³å¯ï¼‰ |\n\nå¯ä»¥é€šè¿‡ `@Scope` æ³¨è§£æ¥è¿›è¡Œé…ç½®ä½œç”¨åŸŸï¼š`@Scope(\"prototype\")`ã€‚\n\né»˜è®¤ `singleton` çš„ beanï¼Œåœ¨å®¹å™¨å¯åŠ¨æ—¶è¢«åˆ›å»ºï¼Œå¯ä»¥ä½¿ç”¨ `@Lazy` æ³¨è§£æ¥å»¶è¿Ÿåˆå§‹åŒ–ï¼ˆå»¶è¿Ÿåˆ°ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶ï¼‰ï¼Œ`prototype` çš„ beanï¼Œæ¯ä¸€æ¬¡ä½¿ç”¨è¯¥ bean çš„æ—¶å€™éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹ã€‚\n\nå®é™…å¼€å‘å½“ä¸­ï¼Œç»å¤§éƒ¨åˆ†çš„ Bean æ˜¯å•ä¾‹çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ç»å¤§éƒ¨åˆ† Bean ä¸éœ€è¦é…ç½® scope å±æ€§ã€‚\n\n## ç¬¬ä¸‰æ–¹ Bean\n\nå¦‚æœè¦ç®¡ç†çš„ bean å¯¹è±¡æ¥è‡ªäºç¬¬ä¸‰æ–¹ï¼ˆä¸æ˜¯è‡ªå®šä¹‰çš„ï¼‰ï¼Œæ˜¯æ— æ³•ç”¨ `@Component` åŠè¡ç”Ÿæ³¨è§£å£°æ˜ bean çš„ï¼ˆç¬¬ä¸‰æ–¹æŸäº›ç±»çš„æºç å®šä¹‰ä¸­æˆ‘ä»¬æ— æ³•æ”¹åŠ¨ï¼‰ï¼Œå°±éœ€è¦ç”¨åˆ° `@Bean` æ³¨è§£ã€‚è‹¥è¦ç®¡ç†çš„ç¬¬ä¸‰æ–¹ bean å¯¹è±¡ï¼Œå»ºè®®å¯¹è¿™äº› bean è¿›è¡Œé›†ä¸­åˆ†ç±»é…ç½®ï¼Œå¯ä»¥é€šè¿‡ `@Configuration` æ³¨è§£å£°æ˜ä¸€ä¸ªé…ç½®ç±»ã€‚\n\n> `@Configuration` åº•å±‚ä¹Ÿæ˜¯ `@Component`ã€‚\n\n```java\n// æ–¹æ³•ä¸€ï¼šã€ä¸æ¨èã€‘å®šä¹‰åœ¨å¯åŠ¨ç±»ä¸­\n// è¿™æ ·å¯¼è‡´å¯åŠ¨ç±»ä¸çº¯ç²¹\n@SpringBootApplication\npublic class SpringbootWebConfig2Application{\n\t@Bean //å°†æ–¹æ³•è¿”å›å€¼äº¤ç»™IoCå®¹å™¨ç®¡ç†ï¼Œæˆä¸ºIoCå®¹å™¨çš„beanå¯¹è±¡\n\tpublic MyBean myBean(){\n\t\treturn new MyBean();\n\t}\n}\n\n// æ–¹æ³•äºŒï¼šå£°æ˜ä¸€ä¸ªé…ç½®ç±»\n// é€šè¿‡@Beanæ³¨è§£çš„name/valueå±æ€§æŒ‡å®šbeanåç§°ï¼Œå¦‚æœæœªæŒ‡å®šï¼Œé»˜è®¤æ˜¯æ–¹æ³•å\n@Configuration\npublic class CommonConfig{\n\t@Bean\n\tpublic MyBean myBean(){\n\t\treturn new MyBean();\n\t}\n}\n```\n\nä½¿ç”¨ Bean æ—¶ç›´æ¥æ³¨å…¥å³å¯ï¼š\n\n```java\n@Autowired\nprivate MyBean mybean;\n```\n\nå¦‚æœç¬¬ä¸‰æ–¹ bean éœ€è¦ä¾èµ–å…¶å®ƒ bean å¯¹è±¡ï¼Œç›´æ¥åœ¨ bean å®šä¹‰æ–¹æ³•ä¸­è®¾ç½®å½¢å‚å³å¯ï¼Œå®¹å™¨ä¼šæ ¹æ®ç±»å‹è‡ªåŠ¨è£…é…ã€‚\n\n```java\n@Configuration\npublic class CommonConfig{\n\n\t// SpringBootå®¹å™¨ä¼šæ ¹æ®å‚æ•°ç±»å‹MyServiceè‡ªåŠ¨è£…é…Beanå¯¹è±¡\n\t@Bean\n\tpublic MyBean myBean(MyService myService){\n\t\t// çœç•¥ä¸€äº›ä½¿ç”¨myServiceçš„æ“ä½œ\n\t\treturn new MyBean();\n\t}\n}\n```\n\n`@Component` åŠè¡ç”Ÿæ³¨è§£ä¸ `@Bean` æ³¨è§£ä½¿ç”¨åœºæ™¯?\n\n- é¡¹ç›®ä¸­è‡ªå®šä¹‰çš„ï¼Œä½¿ç”¨ `@Component` åŠå…¶è¡ç”Ÿæ³¨è§£\n- é¡¹ç›®ä¸­å¼•å…¥ç¬¬ä¸‰æ–¹çš„ï¼Œä½¿ç”¨ `@Bean` æ³¨è§£\n\n# åè®°\n\nä¸‹é¢ä½ å¯ä»¥ç«‹å³ç§»æ­¥è¿™ç¯‡æ–‡ç« åŠ æ·±ä¸Šé¢æ‰€å­¦çŸ¥è¯†çš„å°è±¡ï¼š[[SpringBoot çš„åŸç†ä»¥åŠå†™ä¸€ä¸ªè‡ªå®šä¹‰ Starter]]ã€‚\n\n# æœ¬æ–‡å‚è€ƒ\n- [Day05-09. åˆ†å±‚è§£è€¦-ä¸‰å±‚æ¶æ„_å“”å“©å“”å“©_bilibili](https://www.bilibili.com/video/BV1m84y1w7Tb?p=75&vd_source=e03d48176855fc5349b27aef691f9cdb)\n- [IoC & AOPè¯¦è§£ï¼ˆå¿«é€Ÿææ‡‚ï¼‰ | JavaGuide](https://javaguide.cn/system-design/framework/spring/ioc-and-aop.html#ioc-inversion-of-control)\n- [è®¾è®¡æ¨¡å¼ä¹‹ç¾ - ç‹äº‰ - æå®¢æ—¶é—´ä¸“æ ](https://gitee.com/buxsren/design-pattern-books/blob/master/docs/177444.md)\n- æœ¬ç§‘ç”Ÿè¯¾ç¨‹ç¬”è®°ã€Šç¨‹åºè®¾è®¡ä¸­çº§å®è·µï¼†è®¾è®¡æ¨¡å¼ã€‹ - TJU ğŸâš±ï¸","categories":[{"name":"æŠ€æœ¯å­¦ä¹ ","api":"api/categories/æŠ€æœ¯å­¦ä¹ .json"}],"tags":[{"name":"Java","api":"api/tags/Java.json"},{"name":"SpringBoot","api":"api/tags/SpringBoot.json"},{"name":"Bean","api":"api/tags/Bean.json"},{"name":"IoC","api":"api/tags/IoC.json"},{"name":"DI","api":"api/tags/DI.json"}]},"api":"api/posts/p/66216cb4.json"}