{"data":{"title":"WordPress 使用 HTTPS","slug":"博客站点维护/WordPress/WordPress 使用 HTTPS","description":"如果网站是WordPress网站，配置好证书后下一步怎么做？","date":"2022-04-21T06:43:30.000Z","updated":"2024-12-09T19:37:21.215Z","language":"zh-CN","comments":true,"url":"p/7af6b112/","cover":"https://cdn.gallery.uuanqin.top/img/WPPIC.png","images":[],"content":"<p>服务器安装好证书后<sup class=\"footnote-ref\"><a href=\"#fn1\" id=\"fnref1\">[1]</a></sup>，访问WordPress博客还会提醒该站点“并非完全安全”。</p>\n<p>WordPress 设置中修改地址：</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/image-5sad8.png\" alt=\"\" /></p>\n<p>将 <code>http</code> 修改为 <code>https</code></p>\n<p>如果修改不成功（比如页面不安全什么的），可以通过数据库修改：</p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/image-59asda.png\" alt=\"\" /></p>\n<p>登录服务器，修改文件：</p>\n<p>1，修改的路径：\\wp-includes\\functions.php 文件<br />\n2，打开修改 functions.php 文件，找到代码 require( ABSPATH . WPINC . ‘/option.php’ ); 在下方添加：</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_ invoke__\">add_filter</span>(<span class=\"string\">&#x27;script_loader_src&#x27;</span>, <span class=\"string\">&#x27;agnostic_script_loader_src&#x27;</span>, <span class=\"number\">20</span>,<span class=\"number\">2</span>);</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">agnostic_script_loader_src</span>(<span class=\"params\"><span class=\"variable\">$src</span>, <span class=\"variable\">$handle</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"title function_ invoke__\">preg_replace</span>(<span class=\"string\">&#x27;/^(httphttps):/&#x27;</span>, <span class=\"string\">&#x27;&#x27;</span>, <span class=\"variable\">$src</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"title function_ invoke__\">add_filter</span>(<span class=\"string\">&#x27;style_loader_src&#x27;</span>, <span class=\"string\">&#x27;agnostic_style_loader_src&#x27;</span>, <span class=\"number\">20</span>,<span class=\"number\">2</span>);</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">agnostic_style_loader_src</span>(<span class=\"params\"><span class=\"variable\">$src</span>, <span class=\"variable\">$handle</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"title function_ invoke__\">preg_replace</span>(<span class=\"string\">&#x27;/^(httphttps):/&#x27;</span>, <span class=\"string\">&#x27;&#x27;</span>, <span class=\"variable\">$src</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>再修改配置文件：</p>\n<p>在<a href=\"https://so.csdn.net/so/search?q=wordpress&amp;spm=1001.2101.3001.7020\">wordpress</a>网站根目录中找到，<code>wp-config.php</code> 文件，</p>\n<p>在文件开头位置中，添加如下代码：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$_SERVER[&#x27;HTTPS&#x27;] = &#x27;on&#x27;;</span><br><span class=\"line\">define(&#x27;FORCE_SSL_LOGIN&#x27;, true);</span><br><span class=\"line\">define(&#x27;FORCE_SSL_ADMIN&#x27;, true);</span><br></pre></td></tr></table></figure>\n<h2 id=\"成果\"><a class=\"markdownIt-Anchor\" href=\"#成果\"></a> 成果</h2>\n<p>可以使用检查工具检查：<a href=\"https://decoder.link/sslchecker/www.uuanqin.top/443\">SSL Checker (decoder.link)</a></p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/imageas-60.png\" alt=\"\" /></p>\n<p><img src= \"/image/loading.gif\" data-lazy-src=\"https://cdn.gallery.uuanqin.top/img/image-61asda.png\" alt=\"\" /></p>\n<h1 id=\"本文参考\"><a class=\"markdownIt-Anchor\" href=\"#本文参考\"></a> 本文参考</h1>\n<p><a href=\"https://blog.csdn.net/weixin_43983960/article/details/120096009?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_title~default-1.pc_relevant_paycolumn_v3&amp;spm=1001.2101.3001.4242.2&amp;utm_relevant_index=2\">【亲测】wordpress 如何开启全站 https-真实有效_前端小罗的博客-CSDN 博客_wordpress 设置 https</a></p>\n<hr class=\"footnotes-sep\" />\n<section class=\"footnotes\">\n<ol class=\"footnotes-list\">\n<li id=\"fn1\" class=\"footnote-item\"><p>参考<a class=\"uuanqin-bilink\" target=\"_blank\" href=\"/p/6f54b93a/\"><span class=\"bilink-pop-up\">站内文章</span>Linux 服务器 HTTPS 的配置</a> <a href=\"#fnref1\" class=\"footnote-backref\">↩︎</a></p>\n</li>\n</ol>\n</section>\n","raw":"---\ntitle: WordPress 使用 HTTPS\ntags:\n  - HTTPS\n  - SSL\n  - WordPress\ndescription: 如果网站是WordPress网站，配置好证书后下一步怎么做？\nabbrlink: 7af6b112\ncategories:\n  - 博客站点维护\n  - WordPress\ncover: 'https://cdn.gallery.uuanqin.top/img/WPPIC.png'\ndate: 2022-04-21 14:43:30\n---\n\n\n\n服务器安装好证书后[^1]，访问WordPress博客还会提醒该站点“并非完全安全”。\n\n[^1]: 参考[[Linux 服务器 HTTPS 的配置]]\n\nWordPress 设置中修改地址：\n\n![](https://cdn.gallery.uuanqin.top/img/image-5sad8.png)\n\n将 `http` 修改为 `https`\n\n如果修改不成功（比如页面不安全什么的），可以通过数据库修改：\n\n![](https://cdn.gallery.uuanqin.top/img/image-59asda.png)\n\n登录服务器，修改文件：\n\n1，修改的路径：\\\\wp-includes\\\\functions.php 文件  \n2，打开修改 functions.php 文件，找到代码 require( ABSPATH . WPINC . ‘/option.php’ ); 在下方添加：\n\n```php\nadd_filter('script_loader_src', 'agnostic_script_loader_src', 20,2);\nfunction agnostic_script_loader_src($src, $handle) {\n  return preg_replace('/^(httphttps):/', '', $src);\n}\nadd_filter('style_loader_src', 'agnostic_style_loader_src', 20,2);\nfunction agnostic_style_loader_src($src, $handle) {\n  return preg_replace('/^(httphttps):/', '', $src);\n}\n```\n\n再修改配置文件：\n\n在[wordpress](https://so.csdn.net/so/search?q=wordpress&spm=1001.2101.3001.7020)网站根目录中找到，`wp-config.php` 文件，\n\n在文件开头位置中，添加如下代码：\n\n```\n$_SERVER['HTTPS'] = 'on';\ndefine('FORCE_SSL_LOGIN', true);\ndefine('FORCE_SSL_ADMIN', true);\n```\n\n## 成果\n\n可以使用检查工具检查：[SSL Checker (decoder.link)](https://decoder.link/sslchecker/www.uuanqin.top/443)\n\n![](https://cdn.gallery.uuanqin.top/img/imageas-60.png)\n\n\n![](https://cdn.gallery.uuanqin.top/img/image-61asda.png)\n\n\n\n\n\n# 本文参考\n\n[【亲测】wordpress 如何开启全站 https-真实有效\\_前端小罗的博客-CSDN 博客\\_wordpress 设置 https](https://blog.csdn.net/weixin_43983960/article/details/120096009?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_title~default-1.pc_relevant_paycolumn_v3&spm=1001.2101.3001.4242.2&utm_relevant_index=2)\n","categories":[{"name":"博客站点维护","api":"api/categories/博客站点维护.json"},{"name":"WordPress","api":"api/categories/博客站点维护/WordPress.json"}],"tags":[{"name":"HTTPS","api":"api/tags/HTTPS.json"},{"name":"SSL","api":"api/tags/SSL.json"},{"name":"WordPress","api":"api/tags/WordPress.json"}]},"api":"api/posts/p/7af6b112.json"}