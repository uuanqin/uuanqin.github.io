{"title":"串口驱动程序之「不定长字符串的接收」","tags":["串口","C","ESP8266","驱动"],"cover":"https://cdn.gallery.uuanqin.top/img/20240412000200.webp","description":"以 ESP8266 为例。","categories":["嵌入式"],"abbrlink":"aae69ac0","date":"2024-04-04T22:48:51.000Z","top_img":null,"summary":"主要思路： 在标准库例子中的思路是，若收到串口空闲中断，则设置定时器。定时器时间到则认为串口接收完毕，置标志位。 在 HAL 库例子中的思路是，收到每一个字符都设置定时器，定时器时间到则认为串口接收完毕，置标志位。 本文假设的场景： 串口 1 连接电脑。`printf` 重写，输出至串口 1。详看：[[串口驱动程序之「发送数据」]] 串口 2 连接 ESP8266。`ESP8266_Printf` 函数重写 `sprintf`，输出到串口 2。 函数 `uint8_t ESP8266_Cmd(uint8_t cmd,uint8_t expect_ack,uint16_t waittime)` 用于发送 AT 命令，并将收到结果回显至电脑（解注释 printf）。 标准库 ESP8266 驱动： HAL ESP8266 驱动： main.c FreeRTOS.c： 本文参考 HAL库教程9：串口接收不定长数据_hal库接收串口不定长数据-CSDN博客 STM32 USART 接收任意长度字符_stm32f4 读取字符串长度-CSDN博客"}